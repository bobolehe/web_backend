"use strict";(self.webpackChunkapifox_renderer=self.webpackChunkapifox_renderer||[]).push([["25300"],{69179:function(e,t,i){i.d(t,{A:()=>n});var l=i(838e3),s=i(458184),r=i(641486);let n=e=>{let{showCountdown:t,asButton:i,onFinish:n,duration:a=60,interval:o=1,...c}=e,d=(e=>{let{active:t,duration:i,interval:l,onFinish:s}=e,[n,a]=(0,r.useState)(i),o=(0,r.useRef)(),c=(0,r.useCallback)(()=>{a(i),clearInterval(o.current),null==s||s()},[i,s]),d=(0,r.useCallback)(()=>{o.current=setInterval(()=>{a(e=>e<=1?(c(),i):e-1)},1e3*l)},[c,i,l]);return(0,r.useEffect)(()=>{t?d():c()},[t]),n})({active:t,duration:a,interval:o,onFinish:n});return t?i?(0,l.jsxs)(s.A,{...c,disabled:!0,children:[d,"s"]}):(0,l.jsxs)("span",{className:"px-4",style:{color:"var(--ui-primary-base)"},children:[d,"s"]}):(0,l.jsx)(s.A,{...c,children:null==c?void 0:c.children})}},180519:function(e,t,i){i.d(t,{A:()=>m});var l=i(838e3),s=i(678514),r=i(740565),n=i(140049),a=i(718180),o=i(255529),c=i(820182),d=i(794397),u=i(458184),g=i(641486),h=i(69179);let m=e=>{let{sendTxt:t,inputProps:i,formItemProps:m,onStart:p,onFinish:x,loading:f,showCountDownButton:y=!0,autoFocusAfterOnStart:v=!0}=e,[w,b]=(0,g.useState)(!1),{report:j,autoSendEmailCaptcha:A}=(0,g.useContext)(s.hi),C=(0,g.useRef)(null),_=(0,n.A)(async()=>{let e=!0;if(p&&(e=await p(),v)){var t;null==(t=C.current)||t.focus()}e&&b(!0)});return(0,a.A)(()=>{A&&_()}),(0,l.jsx)(o.A.Item,{name:"password",style:{marginBottom:16},rules:[{required:!0,message:(0,r.hw)({id:"user.loginOrRegister.rule.required.captcha"})}],...m,children:(0,l.jsx)(c.A,{ref:C,size:"large",allowClear:!0,placeholder:(0,r.hw)({id:"user.loginOrRegister.captcha.placeholder"}),onFocus:()=>{j("app_input_click_code_focus")},addonAfter:f?(0,l.jsx)(d.A,{spinning:!0,size:"small"}):y?(0,l.jsx)(h.A,{type:"link",className:"flex items-center justify-center p-0",showCountdown:w,onFinish:()=>{b(!1),null==x||x()},onClick:async()=>{j("app_button_click_get_code"),_()},children:t}):(0,l.jsx)(u.A,{type:"link",className:"flex items-center justify-center p-0",onClick:async()=>{j("app_button_click_get_code"),_()},children:t}),...i})})}},258203:function(e,t,i){i.d(t,{iu:()=>l.A,Hb:()=>x,a3:()=>u,SD:()=>g.Ay});var l=i(180519),s=i(838e3),r=i(678514),n=i(740565),a=i(292303),o=i(471504),c=i(255529),d=i(641486);let u=e=>{var t;let{inputProps:i,formItemProps:l}=e,{report:u}=(0,d.useContext)(r.hi);return(0,s.jsx)(c.A.Item,{name:null!=(t=null==i?void 0:i.name)?t:"account",style:{marginBottom:16},validateTrigger:a.$,rules:[{required:!0,message:(0,n.hw)({id:"user.loginOrRegister.rule.required.mail"})},{type:"email",message:(0,n.hw)({id:"user.loginOrRegister.rule.pattern.mail"})}],...l,children:(0,s.jsx)(o.I6,{size:"large",allowClear:!0,autoFocus:!0,onFocus:e=>{var t;u("app_input_click_email_focus"),null==i||null==(t=i.onFocus)||t.call(i,e)},placeholder:(0,n.hw)({id:"user.loginOrRegister.email"}),...i,ignoreThirdPartyPasswordManager:!1})})};var g=i(788238),h=i(140049),m=i(929463),p=i(820182);let x=e=>{let{inputProps:t,formItemProps:i}=e,{report:l}=(0,d.useContext)(r.hi),o=(0,h.A)(e=>{if("compositionend"===e.type){let t=e.target.value;/[^\x00-\x7F]/.test(t)&&(m.Ay.warning((0,n.hw)({id:"user.loginOrRegister.password.nonEnglish"})),e.target.value=t.replace(/[^\x00-\x7F]/g,""))}});return(0,s.jsx)(c.A.Item,{name:"password",validateTrigger:a.$,style:{marginBottom:16},rules:[{required:!0,message:(0,n.hw)({id:"user.loginOrRegister.rule.required.password"})},{pattern:/^[\x00-\x7F]*$/,message:(0,n.hw)({id:"user.loginOrRegister.password.nonEnglish"})}],...i,children:(0,s.jsx)(p.A.Password,{size:"large",allowClear:!0,placeholder:(0,n.hw)({id:"user.loginOrRegister.password"}),onClick:()=>{l("app_input_click_password_focus")},onCompositionEnd:o,...t})})}},380440:function(e,t,i){i.d(t,{A:()=>o});var l=i(838e3),s=i(678514),r=i(740565),n=i(458184),a=i(641486);let o=()=>{let{setShowResetPassword:e,report:t}=(0,a.useContext)(s.hi);return(0,l.jsx)(n.A,{onClick:()=>{t("app_button_click_forget"),e(!0)},type:"link",style:{padding:0},children:(0,r.hw)({id:"user.loginOrRegister.passwordForgot"})})}},347603:function(e,t,i){i.d(t,{A:()=>d});var l=i(838e3),s=i(678514),r=i(740565),n=i(689368),a=i(169508),o=i(929463),c=i(641486);let d=function(){let{externalURL:e}=(0,n.Ay)(e=>{let{externalURL:t}=e;return{externalURL:t}}),t={privateProtocol:e.help.privateProtocol,serveProtocol:e.help.serveProtocol},i=e=>{if(e){if(!a.xl)return void window.open(e);window.require("electron").shell.openExternal(e).catch(()=>{o.Ay.error((0,r.hw)({id:"user.register.error.Url"},{url:e}))})}},{report:d}=(0,c.useContext)(s.hi);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("a",{onClick:()=>{d("app_button_click_term_service"),i(t.serveProtocol)},children:[(0,r.hw)({id:"user.loginOrRegister.agreement.service"}),"\xa0"]}),(0,r.hw)({id:"and"}),(0,l.jsx)("a",{onClick:()=>{d("app_button_click_privacy_policy"),i(t.privateProtocol)},children:(0,r.hw)({id:"user.loginOrRegister.agreement.privacy"})}),(0,r.hw)({id:"user.loginOrRegister.agreement.end"})]})}},97465:function(e,t,i){i.d(t,{A:()=>m});var l=i(838e3),s=i(169508),r=i(966117),n=i(483482),a=i(556561),o=i(140049),c=i(838487),d=i.n(c),u=i(458184),g=i(952167),h=i(716395);let m=e=>{let{authKey:t,height:i,title:c,onSuccess:m,allowIframe:p,allowWebview:x=!1,onClick:f,children:y,btnClassName:v="",type:w="default"}=e,[b,{setTrue:j,setFalse:A}]=(0,a.A)(),C="LOGIN",{loginUrl:_}=(0,g.Ay)({authKey:t,action:C,allowWebview:x}),k=(0,o.A)(()=>{s.xl?(0,n.kK)(_):window.location.href=_});return s.HZ&&!p||s.xl&&!x?(0,l.jsx)(u.A,{block:!0,size:"large",type:w,onClick:()=>{null==f||f(),k()},className:d()("flex items-center justify-center",v),children:y}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.A,{block:!0,size:"large",type:"default",onClick:()=>{null==f||f(),j()},className:d()("flex items-center justify-center",v),children:y}),(0,l.jsx)(h.A,{title:c,height:i,visible:b,authKey:t,action:C,allowWebview:x,onClose:A,onFail:A,onSuccess:async e=>{A(),m?m(e):(0,r.Xh)(e)}})]})}},716395:function(e,t,i){i.d(t,{A:()=>c});var l=i(838e3),s=i(471504),r=i(838487),n=i.n(r);i(641486);var a=i(445494);let o="iframeModal-n_4Gnt",c=e=>{let{title:t,authKey:i,action:r,visible:c,onSuccess:d,onFail:u,onClose:g,height:h,allowWebview:m}=e;return(0,l.jsx)(s.oi,{title:t,visible:c,footer:null,keyboard:!1,maskClosable:!1,onCancel:g,destroyOnClose:!0,className:n()({[o]:!0}),width:650,centered:!0,children:(0,l.jsx)("div",{className:"w-full h-full relative rounded relative flex items-center justify-center",style:{height:h},children:(0,l.jsx)("div",{className:"w-full h-full absolute",style:{top:0,bottom:0,left:0,right:0,zIndex:10},children:(0,l.jsx)(a.A,{authKey:i,onSuccess:d,action:r,allowWebview:m,onFail:()=>{g(),null==u||u()}})})})})}},80539:function(e,t,i){i.d(t,{A:()=>b});var l=i(838e3),s=i(678514),r=i(740565),n=i(966117),a=i(838487),o=i.n(a),c=i(671466),d=i(641486),u=i(618487);i(952167);var g=i(97465);let h="container-bK8tDX",m="google-login-btn-HH1_xH",p="github-login-btn-sAsXaD",x="okta-login-btn-GSDgPG";var f=i(458184);let y=e=>{let{children:t,btnClassName:i=""}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(f.A,{block:!0,size:"large",type:"default",onClick:()=>{u.history.push("/user/sso-login")},className:o()("flex items-center justify-center",i),children:t})})};var v=i(550431);let w=function(){let{setLoginType:e,report:t,wechatLoginType:i}=(0,d.useContext)(s.hi);return i?(0,l.jsxs)(f.A,{block:!0,size:"large",type:"default",onClick:()=>{t("app_button_click_wx_login"),e(i)},style:{background:"transparent"},className:"flex items-center justify-center",children:[(0,l.jsx)("span",{className:"text-2xl mr-1",children:(0,l.jsx)(v.A,{style:{color:"#1BD66A"}})}),(0,l.jsx)("span",{style:{color:"#1BD66A"},children:(0,r.hw)({id:"account.wechatLogin"})})]}):null},b=e=>{let{position:t}=e,{dynamicConfig:{isUseWechat:i,isUseOkta:a,isUseGoogle:f,isUseGithub:v,isUseOAuth2:b,oauth2LoginTitle:j,isUseECS4A:A,isUseDingtalk:C}}=(0,u.useModel)("clientConfig",e=>{let{dynamicConfig:t}=e;return{dynamicConfig:t}}),{report:_,isUseSamlSso:k}=(0,d.useContext)(s.hi),N=i||a||f||v||A||b||k||C,S=(0,n.BV)().isSSOLoginSuccess;return!N||S?null:(0,l.jsxs)("div",{className:o()(`w-full flex flex-col ${"top"===t?"pb-4 mt-4 mb-6":"pt-4 mt-0"}`,h),style:"top"===t?{borderBottom:"1px solid var(--intl-login-component-border-color)"}:{borderTop:"1px solid var(--intl-login-component-border-color)"},children:[f&&(0,l.jsx)("div",{className:"py-2",children:(0,l.jsxs)(g.A,{height:764,authKey:"google",title:(0,r.hw)({id:"account.googleLogin"}),onClick:()=>_("app_button_click_login_google"),btnClassName:m,children:[(0,l.jsx)(c.A,{type:"icon-google-lg"}),(0,l.jsx)("span",{children:(0,r.hw)({id:"account.googleLogin"})})]})}),v&&(0,l.jsx)("div",{className:"py-2",children:(0,l.jsxs)(g.A,{height:764,authKey:"github",title:(0,r.hw)({id:"account.githubLogin"}),onClick:()=>_("app_button_click_login_github"),btnClassName:p,children:[(0,l.jsx)(c.A,{type:"icon-github-lg"}),(0,l.jsx)("span",{children:(0,r.hw)({id:"account.githubLogin"})})]})}),i&&(0,l.jsx)("div",{className:"py-2",children:(0,l.jsx)(w,{})}),a&&(0,l.jsx)("div",{className:"py-2",children:(0,l.jsx)(g.A,{btnClassName:x,height:600,authKey:"okta",title:(0,r.hw)({id:"account.oktaLogin"}),allowWebview:!1,children:(0,r.hw)({id:"account.oktaLogin"})})}),b&&(0,l.jsx)("div",{className:"py-2",children:(0,l.jsx)(g.A,{height:600,authKey:"oauth2",title:j||(0,r.hw)({id:"account.oauth2Login"}),allowWebview:!1,children:j||(0,r.hw)({id:"account.oauth2Login"})})}),k&&(0,l.jsx)("div",{className:"py-2",children:(0,l.jsx)(y,{children:(0,r.hw)({id:"account.samlSsoLogin"})})}),A&&(0,l.jsx)("div",{className:"py-2",children:(0,l.jsx)(g.A,{height:600,authKey:"ecs4a",title:(0,r.hw)({id:"account.ecs4aLogin"}),allowWebview:!1,children:(0,r.hw)({id:"account.ecs4aLogin"})})}),C&&(0,l.jsx)("div",{className:"py-2",children:(0,l.jsx)(g.A,{height:600,authKey:"dingtalk",title:(0,r.hw)({id:"account.dingtalkLogin"}),allowWebview:!1,children:(0,r.hw)({id:"account.dingtalkLogin"})})})]})}},180447:function(e,t,i){i.r(t),i.d(t,{default:()=>en});var l=i(838e3),s=i(169508),r=i(678514),n=i(511389),a=i(987016),o=i(850735),c=i(966117),d=i(73586),u=i(140049),g=i(718180),h=i(794397),m=i(637962),p=i(641486),x=i(618487),f=i(740565),y=i(255529),v=i(458184),w=i(101610),b=i(436799),j=i(838487),A=i.n(j),C=i(364099);let _={container:"container-tOCWsg"};var k=i(347603),N=i(80539);let S=s.YX?(0,l.jsx)(f.n3,{id:"user.loginOrRegister.title_eu",values:{appName:s.JB}}):(0,f.hw)({id:"user.loginOrRegister.title"},{appName:s.JB}),L=e=>{let{children:t,title:i}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(C.A,{className:"justify-center",children:(0,l.jsx)("h3",{className:"mb-0 app-text-fg-high text-center",style:{fontSize:"29px",lineHeight:"38px"},children:i||S})}),(0,l.jsx)(N.A,{position:"top"}),t,(0,l.jsxs)("p",{className:A()("text-center mt-6 pt-6 m-0 font-sm",_.pContainer),style:{fontSize:12,fontWeight:"var(--ui-font-weight-400)",color:"var(--ui-text-color-secondary)",borderTop:"1px solid var(--intl-login-component-border-color)"},children:[(0,f.hw)({id:"user.loginOrRegister.intl.agreement.continue"},{appName:s.JB}),(0,l.jsx)(k.A,{})]})]})};var O=i(258203),I=i(671466);let R=e=>{let{className:t=""}=e;return(0,l.jsxs)("section",{className:A()("flex justify-center items-center mt-4",t),children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(I.A,{type:"icon-check",size:14,style:{color:"var(--ui-primary-base)"}}),(0,l.jsx)("span",{className:"ml-1 text-color",style:{fontSize:"var(--ui-font-size-sm)"},children:(0,f.hw)({id:"payment.login.slogan.noCreditCardRequired"})})]}),(0,l.jsxs)("div",{className:"flex items-center ml-1",children:[(0,l.jsx)(I.A,{type:"icon-check",size:14,style:{color:"var(--ui-primary-base)"}}),(0,l.jsx)("span",{className:"ml-1 text-color",style:{fontSize:"var(--ui-font-size-sm)"},children:(0,f.hw)({id:"payment.login.slogan.noTimeLimitOnFreePlan"})})]})]})},G=()=>(0,l.jsx)(L,{children:(0,l.jsx)(E,{})});function E(){let{setLoginType:e,email:t,setEmail:i,setAutoSendEmailCaptcha:s,report:n}=(0,p.useContext)(r.hi),[a,o]=(0,p.useState)(!1),c=r.Gb.IntlEmailCaptcha,{submitting:d,slotId:u,handleSubmit:h}=(0,b.A)(c),{formRef:m,onSend:x,loading:j,slotId:A}=(0,w.A)(r.Gb.EmailCaptcha);return(0,p.useEffect)(()=>()=>{s(!1)},[]),(0,g.A)(()=>{n("page_view")}),(0,l.jsxs)(y.A,{ref:m,onFinish:h,className:"w-full",initialValues:{account:t},children:[(0,l.jsx)(O.a3,{inputProps:{onChange:e=>i(e.target.value)}}),a&&(0,l.jsx)("p",{className:"px-2 app-text-fg-low",children:(0,f.hw)({id:"user.loginOrRegister.intl.captcha.tip"})}),(0,l.jsx)(O.iu,{sendTxt:(0,f.hw)({id:"user.loginOrRegister.captcha.sendEmail"}),onStart:async()=>{let e=await x();return e&&o(!0),e},onFinish:()=>o(!1),loading:j,showCountDownButton:!1}),(0,l.jsx)("div",{id:u,className:"flex items-center justify-center"}),A&&A!==u&&(0,l.jsx)("div",{id:A,className:"flex items-center justify-center"}),(0,l.jsx)(v.A,{type:"primary",block:!0,className:"mb-2",htmlType:"submit",size:"large",loading:d,onClick:()=>n("app_button_click_login_email_code"),children:(0,f.hw)({id:"user.loginOrRegister.intl.submit.captcha"})}),(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)(v.A,{onClick:()=>{n("app_button_click_login_email_password"),e(r.Gb.IntlEmailPassword)},type:"link",style:{padding:0},children:(0,f.hw)({id:"user.loginOrRegister.intl.submit.password"})})}),(0,l.jsx)(R,{})]},c)}var P=i(380440);let T=()=>(0,l.jsx)(L,{children:(0,l.jsx)(F,{})});function F(){let{setLoginType:e,email:t,setEmail:i,report:s}=(0,p.useContext)(r.hi),{submitting:n,slotId:a,handleSubmit:o}=(0,b.A)(r.Gb.IntlEmailPassword);return(0,g.A)(()=>{s("page_view")}),(0,l.jsxs)(y.A,{onFinish:o,className:"w-full",initialValues:{account:t},children:[(0,l.jsx)(O.a3,{inputProps:{onChange:e=>i(e.target.value)}}),(0,l.jsx)(O.Hb,{}),(0,l.jsx)("div",{id:a,className:"flex items-center justify-center"}),(0,l.jsx)(v.A,{type:"primary",block:!0,className:"mb-2",htmlType:"submit",size:"large",loading:n,onClick:()=>s("app_button_click_login_email_password"),children:(0,f.hw)({id:"user.loginOrRegister.intl.submit.password"})}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)(v.A,{onClick:()=>{s("app_button_click_login_email_code"),e(r.Gb.IntlEmailCaptcha)},type:"link",style:{padding:0},children:(0,f.hw)({id:"user.loginOrRegister.intl.submit.captcha"})}),(0,l.jsx)(P.A,{})]}),(0,l.jsx)(R,{})]},"MobilePassword")}let z=()=>(0,l.jsx)("div",{className:"w-full p-4 flex items-center justify-center",style:{minHeight:400},children:(0,l.jsx)(h.A,{spinning:!0})}),M=(0,x.dynamic)({loading:z,loader:async()=>{let{default:e}=await i.e("25046").then(i.bind(i,908066));return e}}),B=(0,x.dynamic)({loading:z,loader:async()=>{let{default:e}=await i.e("8951").then(i.bind(i,198713));return e}}),W=(0,x.dynamic)({loading:z,loader:async()=>{let{default:e}=await i.e("25655").then(i.bind(i,352609));return e}}),q=(0,x.dynamic)({loading:z,loader:async()=>{let{default:e}=await i.e("85087").then(i.bind(i,423623));return e}}),D=(0,x.dynamic)({loading:z,loader:async()=>{let{default:e}=await i.e("25794").then(i.bind(i,587794));return e}}),H=(0,x.dynamic)({loading:z,loader:async()=>{let{default:e}=await i.e("72198").then(i.bind(i,591028));return e}});var K=i(556910),$=i(751455),U=i(929463);let J="container-Ds7hJt",V=()=>{let{loginType:e,email:t,setEmail:i,setAutoSendEmailCaptcha:s,report:n,setLoginType:a}=(0,p.useContext)(r.hi),o=(0,p.useRef)(),c=(0,p.useRef)(""),{run:d,loading:h}=(0,$.Ay)(K.b8,{manual:!0,onSuccess:e=>{e.data.enablePasswordLogin?a(r.Gb.IntlEmailPassword):s(!0),i(c.current)},onError:e=>{U.Ay.error(null==e?void 0:e.errorMessage)}}),m=(0,u.A)(e=>{c.current=e.account,d({email:e.account})});return((0,g.A)(()=>{n("page_view")}),t)?e===r.Gb.IntlEmailCaptcha?(0,l.jsx)(G,{}):(0,l.jsx)(T,{}):(0,l.jsxs)(L,{children:[(0,l.jsxs)(y.A,{ref:o,onFinish:m,className:"w-full",children:[(0,l.jsx)(O.a3,{formItemProps:{validateTrigger:"onSubmit"},inputProps:{onFocus:()=>{var e;n("app_input_click_email_focus"),null==(e=o.current)||e.setFields([{name:"account",errors:void 0}])}}}),(0,l.jsx)(v.A,{loading:h,type:"primary",block:!0,className:"mb-2",htmlType:"submit",size:"large",onClick:()=>n("app_button_click_login_email"),children:(0,f.hw)({id:"user.loginOrRegister.intl.email.confirm"})})]}),(0,l.jsx)(R,{})]})},X=()=>(0,l.jsx)("section",{className:A()(J),children:(0,l.jsx)(V,{})});var Y=i(351697);function Z(e){let t=`[GoogleOneTap] ${e}`;U.Ay.error(t),(0,Y.A)(Error(t))}let Q=()=>{let{report:e}=(0,p.useContext)(r.hi),t=async t=>{try{let i=await (0,K.Vn)(t.credential);e((null==i?void 0:i.newlyRegistered)?"user_register":"user_login",{userId:i.userId,login_mode:r.j8.Google}),(0,c.Xh)(i)}catch(e){}},i=async()=>{var e,i,l;let{clientId:s}=await (0,K.NH)(),r=null==(l=window)||null==(i=l.google)||null==(e=i.accounts)?void 0:e.id;r?(r.initialize({client_id:s,callback:t,cancel_on_tap_outside:!1,auto_select:!1,ux_mode:"popup",prompt_parent_id:"GoogleOneTapContainer"}),r.prompt()):Z("Script Load Error")},n=async()=>{try{let e="googleOneTap",t=document.getElementById(e);t?i():((t=document.createElement("script")).id=e,t.onload=i,t.onerror=()=>Z("Script Load Error"),t.src="https://accounts.google.com/gsi/client",document.body.appendChild(t))}catch(e){Z("Init Options Error")}};return(0,g.A)(()=>{s.HZ&&"GLOBAL"===s.Gi&&n()}),(0,l.jsx)("div",{id:"GoogleOneTapContainer",style:{position:"fixed",top:16,right:16,width:0,height:0,overflow:"visible",display:"flex",alignItems:"flex-start",justifyContent:"flex-end"}})},ee="main-uLpMe9";var et=i(286616),ei=i(730198),el=i(290547);let es=e=>{let t=s.xl&&s.tv,{modalPlaceHolder:i,onOpenOfflineSpace:r}=(0,el.x)();return t&&!0===e.visible?(0,l.jsxs)("div",{className:"relative",style:{height:8},children:[(0,l.jsx)("div",{className:"absolute flex justify-center",style:{left:0,right:0,bottom:-28},children:(0,l.jsx)(v.A,{type:"text",theme:"secondary",size:"small",style:{color:"var(--ui-text-color-tertiary)"},onClick:r,children:(0,f.hw)({id:"offlineSpace.useOfflineButton"})})}),i]}):null},er=()=>{let{loginType:e,showResetPassword:t,loading:i,renderFromModal:a}=(0,p.useContext)(r.hi),o=(0,p.useMemo)(()=>{if(i)return(0,l.jsx)("div",{className:"w-full flex items-center justify-center",style:{height:400},children:(0,l.jsx)(h.A,{spinning:!0,size:"large"})});if(t)return(0,l.jsx)(q,{});switch(e){case r.Gb.PdvLogin:case r.Gb.PdvRegister:return(0,l.jsx)(W,{});case r.Gb.IntlEmailCaptcha:case r.Gb.IntlEmailPassword:return(0,l.jsx)(X,{});case r.Gb.WechatOfficialAccount:return(0,l.jsx)(H,{});case r.Gb.Wechat:return(0,l.jsx)(D,{});case r.Gb.EmailCaptcha:case r.Gb.SmsCaptcha:return(0,l.jsx)(M,{defaultTab:e});case r.Gb.EmailPassword:case r.Gb.MobilePassword:return(0,l.jsx)(B,{defaultTab:e});default:return null}},[e,i,t]),{theme:c}=(0,p.useContext)(n.Ay),{cardStyle:d,cardBodyStyle:u,containerStyle:g}=(0,p.useMemo)(()=>{let t=e===r.Gb.Wechat,i={},l={width:440,border:"1px solid var(--ui-border-color-base)",boxShadow:"0px 0px 40px rgba(22, 14, 45, 0.02), 0px 0px 104px rgba(22, 14, 45, 0.06)",borderRadius:"calc(var(--ui-border-radius-base) + 10px)"};return["dark","darkblue","grey","lightbrown"].includes(null==c?void 0:c.background)&&(l.background="var(--ui-component-background)"),a&&t&&(i={background:s.xl?"#191919":"#ffffff"}),t&&(l.background=s.xl?"#191919":"#ffffff"),{cardStyle:l,cardBodyStyle:{padding:"48px 48px"},containerStyle:i}},[a,e,s.xl]),x="GLOBAL"===s.Gi;return(0,l.jsxs)("div",{style:g,className:`${ee} flex flex-col items-center justify-center ${a?"p-12":"px-6"}`,children:[a?o:(0,l.jsxs)(m.A,{bordered:!1,style:d,bodyStyle:u,children:[o,(0,l.jsx)(es,{visible:!a&&!t})]}),x&&!s.f3&&(0,l.jsx)(Q,{})]})},en=e=>{let{renderFromModal:t,onSucceeded:i,hideThirdPartyLoginType:n=[]}=e,{load:h,loading:m,dynamicConfig:{defaultLoginType:f,wechatLoginType:y,isUseLdap:v,isUsingCas:w,ldapLoginTitle:b,isPdvVerifyRegisterEmail:j,isPdvRegisterDisabled:A,isUseSamlSso:C}}=(0,x.useModel)("clientConfig",e=>{let{load:t,loading:i,dynamicConfig:l}=e;return{load:t,loading:i,dynamicConfig:l}}),[_,k]=(0,p.useState)(),[N,S]=(0,p.useState)(),[L,O]=(0,p.useState)(!1),[I,R]=(0,p.useState)(!1),[G,E]=(0,p.useState)(),[P,T]=(0,p.useState)(),[F,z]=(0,p.useState)(),[M,B]=(0,p.useState)(),W=(0,u.A)(e=>{E(_),k(e),R(!1)}),q=(0,et.i)(e=>e.lastLoginInfo),D=(0,u.A)(()=>{let{isSSOLoginSuccess:e}=(0,c.BV)(),t=(null==q?void 0:q.type)||f;e&&(t=r.Gb.EmailCaptcha),W(t)}),H=(0,u.A)(()=>{let{isSSOLoginSuccess:e,email:t}=(0,c.BV)();if(e&&t)return void T(t);if(q){if([r.Gb.EmailCaptcha,r.Gb.EmailPassword].includes(q.type))return void T(q.account);if([r.Gb.MobilePassword,r.Gb.SmsCaptcha].includes(q.type))return void z(q.account)}}),K=(0,p.useMemo)(()=>_||(null==q?void 0:q.type)||f,[_,q,f]),$=(0,ei.Ay)(K,I,N);return(0,g.A)(async()=>{window.location.href.includes("?cleanup=true")&&((0,c.YQ)(),(0,a.xL)()),h(),(0,o.Dc)(),D(),H(),s.xl&&(d.gc.send("WindowAction.Logout"),(0,x.broadcastUserInfo)(x.CURRENT_USER_INIT_STATE),d.gc.send("TabChannel.MaskManager",{visible:!1,type:"All"}),document.documentElement.removeAttribute("data-global-mask"))}),(0,l.jsx)(r.hi.Provider,{value:{loginType:K,wechatLoginType:y,setLoginType:W,resetLoginType:D,previousLoginType:G,previousMobile:F,setPreviousMobile:z,previousAccount:P,setPreviousAccount:T,loading:m,showResetPassword:I,setShowResetPassword:R,renderFromModal:t,onSucceeded:i,report:$,email:N,setEmail:S,autoSendEmailCaptcha:L,setAutoSendEmailCaptcha:O,isUseLdap:v,isUsingCas:w,ldapLoginTitle:b,isPdvVerifyRegisterEmail:j,isPdvRegisterDisabled:A,isUseSamlSso:!n.includes("saml-sso")&&C,passwordResetFlow:M,setPasswordResetFlow:B},children:(0,l.jsx)(er,{})})}},286616:function(e,t,i){i.d(t,{i:()=>n});var l=i(322057),s=i(325475);let r="LastLoginInfo",n=(0,s.vt)(e=>({lastLoginInfo:(()=>{try{let e=localStorage.getItem(r);if(e)return JSON.parse(l.Base64.decode(e))}catch{}})(),setLastLoginInfo:t=>{localStorage.setItem(r,l.Base64.encode(JSON.stringify(t))),e({lastLoginInfo:t})},clearLastLoginInfo:()=>{localStorage.removeItem(r),e({lastLoginInfo:void 0})}}))},101610:function(e,t,i){i.d(t,{A:()=>h});var l=i(678514),s=i(740565);i(564867);var r=i(556910),n=i(905007),a=i(866146),o=i(140049),c=i(929463),d=i(641486),u=i(618487);let g={SmsCaptcha:{successMsg:"user.loginOrRegister.succeed.sms",captchaType:"sms"},EmailCaptcha:{successMsg:"user.loginOrRegister.succeed.email",captchaType:"email"}},h=e=>{let t=(0,d.useRef)(),[i,h]=(0,d.useState)(!1),[m,p]=(0,a.A)(),[x,f]=(0,a.A)(),{verify:y,slotId:v}=(0,n.A)(),w=async e=>{let t=await y(e);t&&f(t)},{run:b}=(0,u.useRequest)(r.qW,{manual:!0,onSuccess:()=>{var t;h(!1);let{successMsg:i}=null!=(t=g[e])?t:{};c.Ay.success((0,s.hw)({id:i}))},onError:e=>{h(!1),(null==e?void 0:e.errorCode)==="401007"?(p(e.meta),w(e.meta)):(null==e?void 0:e.errorCode)==="401006"?c.Ay.error((0,s.hw)({id:"user.request.message.rateLimit"})):(null==e?void 0:e.errorCode)==="401008"?c.Ay.error((0,s.hw)({id:"user.login.message.invalidCaptcha"})):c.Ay.error(null==e?void 0:e.errorMessage)}}),j=(0,o.A)(async()=>{var i,s,r,n,a;let o;return m&&!x?(w(m),!1):!!(o=e===l.Gb.SmsCaptcha?(null!=(r=await (null==t||null==(s=t.current)?void 0:s.validateFields(["mobile"])))?r:{}).mobile:(null!=(a=await (null==t||null==(n=t.current)?void 0:n.validateFields(["account"])))?a:{}).account)&&(f(void 0),p(void 0),h(!0),await b(null==(i=g[e])?void 0:i.captchaType,{from:"loginOrRegister",account:o,captchaResponse:x}),!0)});return{formRef:t,slotId:v,loading:i,onSend:j}}},436799:function(e,t,i){i.d(t,{A:()=>v});var l=i(169508),s=i(678514),r=i(740565),n=i(966117),a=i(496411),o=i(73586),c=i(850646),d=i(315918),u=i(905007),g=i(866146),h=i(929463),m=i(111540),p=i(398380),x=i(641486),f=i(618487),y=i(286616);let v=e=>{let[t,i]=(0,g.A)(!1),[v,w]=(0,g.A)(),[b,j]=(0,g.A)(),{report:A,isUseLdap:C,onSucceeded:_}=(0,x.useContext)(s.hi),{verify:k,slotId:N}=(0,u.A)(),S=async e=>{let t=await k(e);t&&j(t)},L=(0,y.i)(e=>e.setLastLoginInfo),O=(0,p.debounce)(async t=>{if(v&&!b)return void S(v);j(void 0),w(void 0),i(!0);let u={...t,account:e===s.Gb.MobilePassword||e===s.Gb.SmsCaptcha?t.mobile:t.account,loginType:e,captchaResponse:b,isUseLdap:C};(0,n.wy)(u,t=>{i(!1),t&&(e&&!l.T0&&L({type:e,account:u.account}),A((null==t?void 0:t.newlyRegistered)?"user_register":"user_login",{userId:t.userId}),null==_||_(t)),o.gc.send("WindowAction.SetUserTokenCookie",{url:(0,c.hY)(),token:(0,a.iD)()})},{autoShowMessage:!1,onFailure:e=>{var t;if(i(!1),e&&"401007"===e.errorCode)w(e.meta),S(e.meta);else if(e&&"401006"===e.errorCode)h.Ay.error((0,r.hw)({id:"user.login.message.rateLimit"}));else if(["401008","400121","400122"].includes(null==e?void 0:e.errorCode))h.Ay.error((0,r.hw)({id:"user.login.message.invalidCaptcha"}));else if(e&&"403023"===e.errorCode)m.A.error({message:(0,r.hw)({id:"user.login.message.deviceCountOverload"}),duration:0});else if(e&&"403024"===e.errorCode)m.A.error({message:(0,r.hw)({id:"user.login.message.userLimited"}),duration:0});else if(e&&"403055"===e.errorCode)m.A.error({message:(0,r.hw)({id:"user.login.message.orgNoSeats"}),duration:0});else if(e&&"403056"===e.errorCode){let{search:t}=(0,d.bp)(),{originalNameId:i,nameId:l,organizationName:s}=e.meta,r=new URLSearchParams(t);r.set("organizationName",s),r.set("originalNameId",i),r.set("nameId",l),f.history.push(`/user/sso-overwrite?${r.toString()}`)}else e&&"403070"===e.errorCode?m.A.error({message:e.errorMessage,duration:0}):(null==e||null==(t=e.meta)?void 0:t.showedMessage)||h.Ay.error((0,r.hw)({id:"user.login.message.invalidCredentials"}))}})},800);return{submitting:t,slotId:N,handleSubmit:O}}}}]);