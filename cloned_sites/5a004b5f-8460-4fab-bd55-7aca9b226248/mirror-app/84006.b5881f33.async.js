"use strict";(self.webpackChunkapifox_renderer=self.webpackChunkapifox_renderer||[]).push([["84006"],{932092:function(e,t,r){r.d(t,{A:()=>d});var l=r(838e3),n=r(169508),a=r(140049),i=r(641486),o=r.n(i);let s=e=>{let{style:t,position:r,display:n,overflow:i,onLoad:o,forwardedRef:s,...u}=e,c=(0,a.A)(()=>{null==o||o()});return(0,l.jsx)("iframe",{...u,ref:s,onLoad:c,style:{...t,display:n||"block",position:r,overflow:i}})},u=o().forwardRef((e,t)=>(0,l.jsx)(s,{...e,forwardedRef:t}));var c=r(645510),g=r(787194);let d=e=>{let{onLoadListener:t,loading:r,initUrl:o,onSuccessLoadSource:s,className:d,...h}=e,{ref:m,status:f,...p}=(e=>{let{onBeforeLoadListener:t,onLoadListener:r}=e,l=(0,i.useRef)(null),[n,o]=(0,i.useState)(0),s=(0,a.A)(e=>{if(o(1),r){var t,n;r(null==l||null==(n=l.current)||null==(t=n.state)?void 0:t.webview,e.url)}}),u=(0,a.A)(e=>{if(t){var r,n;t(null==l||null==(n=l.current)||null==(r=n.state)?void 0:r.webview,e.url)}}),c=(0,a.A)(()=>{o(2)});return{ref:l,status:n,onDidNavigate:s,onWillNavigate:u,onDidFinishLoad:(0,a.A)(()=>{o(1)}),onDidFailLoad:c,onCrashed:c,onDidRedirectNavigation:s}})({onLoadListener:t}),{ref:v,status:w}=(e=>{let{onSuccessLoadSource:t,onLoadListener:r,intervalCheckDuration:l,isDesktop:n}=e,o=(0,i.useRef)(null),s=(0,i.useRef)(""),[u,g]=(0,i.useState)(0),d=(0,a.A)(e=>{g(1),r&&r(o.current,e)}),h=(0,a.A)(()=>{g(2)}),m=(0,a.A)(()=>{var e,r;let l=o.current;if(!l)return;let a=s.current,i=n?null==(r=l.contentWindow)||null==(e=r.location)?void 0:e.href:l.src;s.current=i,a!==i&&t.some(e=>null==i?void 0:i.includes(e))&&d(i)});return(0,c.A)(()=>{null==m||m()},null!=l?l:100),{ref:o,status:u,onLoad:m,onError:h}})({onLoadListener:t,onSuccessLoadSource:s,isDesktop:n.xl}),A=n.xl?1!==f:1!==w;return(0,l.jsx)(l.Fragment,{children:n.xl?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(g.default,{ref:m,className:d,...h,...p,src:o}),A&&(null==r?void 0:r())]}):(0,l.jsx)(u,{ref:v,className:d,...h,...p,src:o})})}},564867:function(e,t,r){r.d(t,{A:()=>d});var l=r(740565),n=r(556910),a=r(905007),i=r(866146),o=r(140049),s=r(929463),u=r(641486),c=r(618487);let g={sms:"user.loginOrRegister.succeed.sms",email:"user.loginOrRegister.succeed.email"},d=function(e,t){let r=(0,u.useRef)(),[d,h]=(0,u.useState)(!1),[m,f]=(0,i.A)(),[p,v]=(0,i.A)(),{verify:w,slotId:A}=(0,a.A)(),b=async e=>{let t=await w(e);t&&v(t)},{run:C}=(0,c.useRequest)(n.qW,{manual:!0,onSuccess:()=>{h(!1),v(null),s.Ay.success((0,l.hw)({id:g[e]}))},onError:e=>{h(!1),v(null),(null==e?void 0:e.errorCode)==="401007"?(f(e.meta),b(e.meta)):(null==e?void 0:e.errorCode)==="401006"?s.Ay.error((0,l.hw)({id:"user.request.message.rateLimit"})):(null==e?void 0:e.errorCode)==="401008"?s.Ay.error((0,l.hw)({id:"user.login.message.invalidCaptcha"})):(null==e?void 0:e.errorCode)==="400101"?s.Ay.error((0,l.hw)({id:"user.loginOrRegister.email.exist"})):(null==e?void 0:e.errorCode)==="400123"?s.Ay.error((0,l.hw)({id:"user.loginOrRegister.mobile.exist"})):s.Ay.error(null==e?void 0:e.errorMessage)}}),y=(0,o.A)(async function(r){let l=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return m&&!p?(b(m),!1):(h(!0),await C(e,{from:t,account:r,captchaResponse:p,checkOccupied:l}),!0)});return{formRef:r,slotId:A,loading:d,onSend:y}}},788238:function(e,t,r){r.d(t,{p9:()=>p,Ay:()=>f,Cd:()=>v});var l=r(838e3);let n=[{label:"中国+86",engLabel:"China Mainland +86",value:"+86",pattern:/^\+86 \d{11}$/}];var a=r(678514),i=r(740565),o=r(292303),s=r(698879),u=r(140049),c=r(255529),g=r(524381),d=r(138249),h=r(820182),m=r(641486);let f=e=>{var t;let{inputProps:r,formItemProps:n}=e,{regions:s,region:u,onRegionChange:g}=v(),{report:d}=(0,m.useContext)(a.hi);return(0,l.jsx)(c.A.Item,{name:null!=(t=null==r?void 0:r.name)?t:"account",style:{marginBottom:16},validateTrigger:o.$,rules:[{required:!0,message:(0,i.hw)({id:"user.loginOrRegister.rule.required.mobile"})},{pattern:u.pattern,message:(0,i.hw)({id:"user.loginOrRegister.rule.pattern.mobile"})}],...n,children:(0,l.jsx)(p,{...r,regions:s,region:u,onRegionChange:g,onInputFocus:()=>{d("app_input_click_phone_focus")},onSelectFocus:()=>{d("app_select_click_area_code_focus")},placeholder:(0,i.hw)({id:"user.loginOrRegister.mobile"})})})};function p(e){let{value:t,onChange:r,regions:n,region:a,onRegionChange:o,onInputFocus:c,onSelectFocus:f,...p}=e,v=a.val,w=(0,m.useMemo)(()=>{if(null==t?void 0:t.trim())return t.replace(v,"").trim()},[t,v]),A=(0,u.A)(e=>{(null==e?void 0:e.trim())?r(`${v} ${e.trim()}`):r(void 0)}),b=(0,u.A)(e=>{t&&r(t.replace(v,n[e].val)),o(e)}),C=(0,i.JK)(),y=(0,s.A)();return(0,l.jsxs)(g.A.Compact,{className:"w-full",children:[(0,l.jsx)(d.A,{style:{width:96},dropdownStyle:"zh-CN"===C?{width:96}:{width:172},dropdownMatchSelectWidth:!1,options:n,value:a.val,onChange:b,onClick:f}),(0,l.jsx)(h.A,{ref:y,size:"large",allowClear:!0,onFocus:c,value:w,onChange:e=>A(e.target.value),...p,ignoreThirdPartyPasswordManager:!1})]})}function v(){let e=(0,i.JK)(),t=(0,m.useMemo)(()=>{let t="zh-CN"===e;return n.map((e,r)=>({...e,value:r,val:e.value,label:t?e.label:e.engLabel}))},[e]),[r,l]=(0,m.useState)(t[0]);return{regions:t,region:r,onRegionChange:e=>{l(t[e]||t[0])}}}},445494:function(e,t,r){r.d(t,{A:()=>u});var l=r(838e3),n=r(932092),a=r(838487),i=r.n(a),o=r(794397),s=r(952167);let u=e=>{let{authKey:t,onSuccess:r,onFail:a,action:u,allowWebview:c,className:g}=e,{onLoadListener:d,loginUrl:h,succeedPath:m,failedPath:f}=(0,s.Ay)({authKey:t,onSuccess:r,onFail:a,action:u,allowWebview:c});return(0,l.jsx)(n.A,{className:i()("w-full h-full",g),initUrl:h,onSuccessLoadSource:[m,f],onLoadListener:d,frameBorder:0,scrolling:"no",sandbox:"allow-scripts allow-same-origin allow-top-navigation allow-forms",loading:()=>(0,l.jsx)("div",{className:"w-full h-full absolute",style:{top:0,left:0,right:0,bottom:0,height:400},children:(0,l.jsx)(o.A,{spinning:!0,children:(0,l.jsx)("div",{className:"w-full h-full"})})})})}},952167:function(e,t,r){r.d(t,{Ay:()=>m,ID:()=>h,IO:()=>d});var l,n=r(169508),a=r(678514),i=r(740565),o=r(483482),s=r(850646),u=r(929463),c=r(641486),g=r(730198),d=((l={}).Wechat="wechat",l.Google="google",l.Github="github",l.Okta="okta",l.OAuth2="oauth2",l.Cas="cas",l.SamlSso="samlSso",l.ECS4A="ecs4a",l.Dingtalk="dingtalk",l);let h={wechat:"account-settings.binding.auth.wechat",github:"account-settings.binding.auth.github",google:"account-settings.binding.auth.google",okta:"account-settings.binding.auth.okta",ecs4a:"account-settings.binding.auth.ecs4a",dingtalk:"account-settings.binding.auth.dingtalk"},m=function(e){let{authKey:t,action:r,onSuccess:l,onFail:d,allowWebview:h}=e,m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},f=(0,i.JK)(),p=(0,g.BX)(),{loginType:v}=(0,c.useContext)(a.hi),{category:w}=(0,g.Ax)({loginType:v}),{loginUrl:A,succeedPath:b,failedPath:C}=(0,c.useMemo)(()=>{var e;let l={action:r,isAccessFromWeb:null!==n.HZ&&void 0!==n.HZ&&n.HZ,deviceId:null!=(e=(0,o.fL)())?e:"",version:null!==n.CU&&void 0!==n.CU?n.CU:"",provider:t,allowWebview:h,locale:f,pageSource:p,pageCategory:w,...m};return{loginUrl:`${(0,s.hY)()}/passport/${t}/login?query=${encodeURIComponent(JSON.stringify(l))}`,succeedPath:`/passport/${t}/login-result-success`,failedPath:`/passport/${t}/login-result-failure`}},[t,h,f,p,w,r,m]),y=async(e,r)=>{var a,o;let s=null!=(o=null==e||null==(a=e.getURL)?void 0:a.call(e))?o:r,c=null==s?void 0:s.includes(b),g=null==s?void 0:s.includes(C),{searchParams:h}=new URL(decodeURIComponent(s||"")),m=h.get("data"),f=h.get("verifyInfo"),p=h.get("msg"),v=h.get("action"),w=h.get("errorCode");if(c){try{if(f){let e=JSON.parse(f);null==l||l(null,e)}else if(m){let e=JSON.parse(m);null==l||l(e)}}catch(e){u.Ay.error((0,i.hw)({id:"message.networkFailure"}))}return}if(g){if("BIND"===v&&w){let e;switch(w){case"AUTHORIZATION_EXISTED":e=(0,i.hw)({id:"account-settings.basic.bind.auth-existed"},{provider:t});break;case"USER_NOT_EXIST":e=(0,i.hw)({id:"account-settings.basic.bind.user-notfound"},{provider:t});break;default:e=(0,i.hw)({id:"message.networkFailure"},{provider:t})}u.Ay.error(e),null==d||d(e);return}let e=null!=p?p:(0,i.hw)({id:"message.networkFailure"});u.Ay.error(e),null==d||d(e);return}if(n.HZ){let e=(0,i.hw)({id:"message.networkFailure"});u.Ay.error(e),null==d||d(e)}};return{loginUrl:A,succeedPath:b,failedPath:C,onLoadListener:y}}},730198:function(e,t,r){r.d(t,{Ax:()=>g,Ay:()=>u,BX:()=>c,oC:()=>d});var l=r(169508),n=r(678514),a=r(793594),i=r(140049),o=r(641486),s=r(618487);let u=(e,t,r)=>{let n=c(),{page_title:o,category:s,login_mode:u}=g({loginType:e,showResetPassword:t,email:r});return(0,i.A)((e,t)=>{if(l.NP||!e||!n||!s||!o)return;let{userId:r,...i}=null!=t?t:{},c={page_source:n,page_category:s,page_title:o,...null!=i?i:{}};"GLOBAL"===l.Gi&&u&&["user_register","user_login"].includes(e)&&(c.login_mode=u),(0,a.IL)(e,c,{},!0,!0),"user_register"===e&&r&&(0,a.Hg)("userRegister",{userId:r})})};function c(){let e=(0,s.useLocation)();return(0,o.useMemo)(()=>{let t=(null==e?void 0:e.pathname)||"";return t.includes("/user/login")?n.I0.Login:t.includes("/invite")?n.I0.Invite:/\/project\/\d*/.test(t)?n.I0.Hub:n.I0.Login},[e.pathname])}function g(e){let{loginType:t,showResetPassword:r=!1,email:l}=e;return(0,o.useMemo)(()=>{if(r)return{page_title:n.jg.ResetPassword,category:n.jg.ResetPassword};switch(t){case n.Gb.WechatOfficialAccount:return{page_title:n.jg.WechatOfficialAccount,category:n.jg.WechatOfficialAccount};case n.Gb.Wechat:return{page_title:n.jg.Wechat,category:n.jg.Wechat};case n.Gb.SmsCaptcha:return{page_title:n.jg.SmsCaptcha,category:n.jg.SmsCaptcha};case n.Gb.MobilePassword:return{page_title:n.jg.MobilePassword,category:n.jg.MobilePassword};case n.Gb.EmailCaptcha:return{page_title:n.jg.EmailCaptcha,category:n.jg.EmailCaptcha};case n.Gb.EmailPassword:return{page_title:n.jg.EmailPassword,category:n.jg.EmailPassword};case n.Gb.IntlEmailCaptcha:if(!l)return{page_title:n.jg.IntlLogin,category:n.jg.IntlLogin};return{page_title:n.jg.IntlEmailCaptcha,category:n.jg.IntlEmailCaptcha,login_mode:n.j8.Email};case n.Gb.IntlEmailPassword:if(!l)return{page_title:n.jg.IntlLogin,category:n.jg.IntlLogin};return{page_title:n.jg.IntlEmailPassword,category:n.jg.IntlEmailPassword,login_mode:n.j8.Email};default:return{}}},[t,r,l])}function d(){return c()===n.I0.Login}},292303:function(e,t,r){r.d(t,{$:()=>l,Q:()=>n});let l=["onSubmit"],n=["onChange","onSubmit"]}}]);