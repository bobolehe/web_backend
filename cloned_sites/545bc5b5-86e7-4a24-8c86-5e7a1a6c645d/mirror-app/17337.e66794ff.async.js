/*! For license information please see 17337.e66794ff.async.js.LICENSE.txt */
(self.webpackChunkapifox_renderer=self.webpackChunkapifox_renderer||[]).push([["17337"],{441960:function(e,t,i){"use strict";i.d(t,{A:()=>a});let a={container:"container-q50TQl","card-pane":"card-pane-oQ3aBW",cardPane:"card-pane-oQ3aBW","card-pane__top":"card-pane__top-QBVmLY",cardPaneTop:"card-pane__top-QBVmLY","card-pane__top__title":"card-pane__top__title-bORTw_",cardPaneTopTitle:"card-pane__top__title-bORTw_","card-pane__top__right":"card-pane__top__right-eX7otU",cardPaneTopRight:"card-pane__top__right-eX7otU",horizontal:"horizontal-dMlyqe","contraction-tab":"contraction-tab-jS57lg",contractionTab:"contraction-tab-jS57lg","contraction-tab__title":"contraction-tab__title-Lc4LxC",contractionTabTitle:"contraction-tab__title-Lc4LxC","json-schema-viewer":"json-schema-viewer-FPPI1S",jsonSchemaViewer:"json-schema-viewer-FPPI1S","json-schema-viewer__card":"json-schema-viewer__card-XGkgyM",jsonSchemaViewerCard:"json-schema-viewer__card-XGkgyM","json-schema-viewer_empty":"json-schema-viewer_empty-u3NkeK",jsonSchemaViewerEmpty:"json-schema-viewer_empty-u3NkeK","example-viewer":"example-viewer-B9rNfM",exampleViewer:"example-viewer-B9rNfM","example-viewer_empty":"example-viewer_empty-FhMhjc",exampleViewerEmpty:"example-viewer_empty-FhMhjc","bottom-border-radius":"bottom-border-radius-W1ehNZ",bottomBorderRadius:"bottom-border-radius-W1ehNZ","responses-name-select":"responses-name-select-_Fzpla",responsesNameSelect:"responses-name-select-_Fzpla","responses-name-select_dropdown":"responses-name-select_dropdown-C_ji01",responsesNameSelectDropdown:"responses-name-select_dropdown-C_ji01","enum-popover":"enum-popover-fBbYRX",enumPopover:"enum-popover-fBbYRX","enum-popover__title":"enum-popover__title-mnDaYa",enumPopoverTitle:"enum-popover__title-mnDaYa","enum-popover__content":"enum-popover__content-lByvSu",enumPopoverContent:"enum-popover__content-lByvSu"}},594835:function(e,t,i){"use strict";i.d(t,{A:()=>a});let a={title:"title-lJOrI5",description:"description-yE_H6b",httpApiContainer:"httpApiContainer-EM0JKH",schemaContainer:"schemaContainer-No_0jX",noChange:"noChange-CtNbq9",emptyContainer:"emptyContainer-sM3bkB",empty:"empty-svUTqk"}},2409:function(e,t,i){"use strict";i.d(t,{A:()=>a});let a={response:"response-bjkA0M",response__code:"response__code-NkbhX3",responseCode:"response__code-NkbhX3","response__tab-name":"response__tab-name-_t447o",responseTabName:"response__tab-name-_t447o",nameCodeForm:"nameCodeForm-b5IhMZ"}},389137:function(e,t,i){"use strict";i.d(t,{A:()=>a});let a={container:"container-_O56OM",responseExamples:"responseExamples-KNA7ok","request-body":"request-body-NWzHof",requestBody:"request-body-NWzHof","request-body__text":"request-body__text-atgBYk",requestBodyText:"request-body__text-atgBYk","request-body__text__value":"request-body__text__value-NJKx7n",requestBodyTextValue:"request-body__text__value-NJKx7n","json-viewer__btn":"json-viewer__btn-sK7dSp",jsonViewerBtn:"json-viewer__btn-sK7dSp","json-viewer__icon":"json-viewer__icon-KkSr07",jsonViewerIcon:"json-viewer__icon-KkSr07",action:"action-KEwZih","response__tab-name":"response__tab-name-Zyu1Gm",responseTabName:"response__tab-name-Zyu1Gm",authorization:"authorization-YcedI3","authorization-inherit":"authorization-inherit-EP4TdA",authorizationInherit:"authorization-inherit-EP4TdA",parameters__selector__card:"parameters__selector__card-OkFkSh",parametersSelectorCard:"parameters__selector__card-OkFkSh",parameters__selector__modern:"parameters__selector__modern-ClIprU",parametersSelectorModern:"parameters__selector__modern-ClIprU",parameters__card:"parameters__card-RgO9Bm",parametersCard:"parameters__card-RgO9Bm",parameters__card__text:"parameters__card__text-Nf8W2_",parametersCardText:"parameters__card__text-Nf8W2_",parameters__classic:"parameters__classic-T2gL5L",parametersClassic:"parameters__classic-T2gL5L",parameters__classic__table__type:"parameters__classic__table__type-kMR1nA",parametersClassicTableType:"parameters__classic__table__type-kMR1nA",parameters__classic__table:"parameters__classic__table-ijfKMe",parametersClassicTable:"parameters__classic__table-ijfKMe",parameters__classic__narrow:"parameters__classic__narrow-gl4fsU",parametersClassicNarrow:"parameters__classic__narrow-gl4fsU","view-value":"view-value-ZTSIxw",viewValue:"view-value-ZTSIxw","enum-popover":"enum-popover-szX5wd",enumPopover:"enum-popover-szX5wd","enum-popover__title":"enum-popover__title-xxfeE8",enumPopoverTitle:"enum-popover__title-xxfeE8","enum-popover__content":"enum-popover__content-YLRwnK",enumPopoverContent:"enum-popover__content-YLRwnK","panel-content":"panel-content-vsvu0x",panelContent:"panel-content-vsvu0x","security-scheme-title":"security-scheme-title-SY3dcV",securitySchemeTitle:"security-scheme-title-SY3dcV","auth-type":"auth-type-HYPNOp",authType:"auth-type-HYPNOp","oauth2-flow-tags":"oauth2-flow-tags-l5nFIR",oauth2FlowTags:"oauth2-flow-tags-l5nFIR","oauth2-flow-tag":"oauth2-flow-tag-BnMLhT",oauth2FlowTag:"oauth2-flow-tag-BnMLhT","oauth2-flow-tag-selected":"oauth2-flow-tag-selected-L1sOJl",oauth2FlowTagSelected:"oauth2-flow-tag-selected-L1sOJl","scopes-group":"scopes-group-h37tWt",scopesGroup:"scopes-group-h37tWt",scopes:"scopes-aJkbPb","scope-name":"scope-name-CK1Dzq",scopeName:"scope-name-CK1Dzq","scope-divider":"scope-divider-shHc6P",scopeDivider:"scope-divider-shHc6P","oauth2-auth-detail":"oauth2-auth-detail-j6nzSD",oauth2AuthDetail:"oauth2-auth-detail-j6nzSD","oauth2-auth-detail-divider":"oauth2-auth-detail-divider-DfMmZ3",oauth2AuthDetailDivider:"oauth2-auth-detail-divider-DfMmZ3","scheme-combination":"scheme-combination-OzYwgF",schemeCombination:"scheme-combination-OzYwgF","auth-detail":"auth-detail-UZtijt",authDetail:"auth-detail-UZtijt"}},548727:function(e,t,i){"use strict";i.d(t,{A:()=>a});let a={treeList:"treeList-xwLhVW",treeListContainer__panelExtra:"treeListContainer__panelExtra-_dR8gn",treeListContainerPanelExtra:"treeListContainer__panelExtra-_dR8gn",treeListContainer__panelExtraSuffix:"treeListContainer__panelExtraSuffix-iON3vE",treeListContainerPanelExtraSuffix:"treeListContainer__panelExtraSuffix-iON3vE",treeWrapper:"treeWrapper-jP1LLy",treeListContainer__panelExtraItem:"treeListContainer__panelExtraItem-s1JBNu",treeListContainerPanelExtraItem:"treeListContainer__panelExtraItem-s1JBNu",treeList__customTreeTitle:"treeList__customTreeTitle-_tGGev",treeListCustomTreeTitle:"treeList__customTreeTitle-_tGGev",treeList_rootFolderTitle:"treeList_rootFolderTitle-gxOT7q",treeListRootFolderTitle:"treeList_rootFolderTitle-gxOT7q",treeList__emptyNodeTitle:"treeList__emptyNodeTitle-jIGXca",treeListEmptyNodeTitle:"treeList__emptyNodeTitle-jIGXca",treeList__emptyBranchCopyNodeTitle:"treeList__emptyBranchCopyNodeTitle-_S0GJS",treeListEmptyBranchCopyNodeTitle:"treeList__emptyBranchCopyNodeTitle-_S0GJS",treeNodeSubMenu:"treeNodeSubMenu-SrLerl",treeList__emptyNodeTitle2:"treeList__emptyNodeTitle2-hip3Fe",treeListEmptyNodeTitle2:"treeList__emptyNodeTitle2-hip3Fe",treeList__projectModuleTitle:"treeList__projectModuleTitle-oZkYTS",treeListProjectModuleTitle:"treeList__projectModuleTitle-oZkYTS",treeList__icon:"treeList__icon-zIVkAD",treeListIcon:"treeList__icon-zIVkAD",treeList__endpointDesignGuidelineTitle:"treeList__endpointDesignGuidelineTitle-u1SIrZ",treeListEndpointDesignGuidelineTitle:"treeList__endpointDesignGuidelineTitle-u1SIrZ",treeDropdownMenu:"treeDropdownMenu-G3Wjm_",dropdown:"dropdown-LNXIZT",oasComponentExpandToggle:"oasComponentExpandToggle-sJYZ48",oasComponentExpandToggleIcon:"oasComponentExpandToggleIcon-cfIaD4",closed:"closed-UisC10"}},844774:function(e,t,i){"use strict";i.d(t,{A:()=>a});let a={httpResponseForm:"httpResponseForm-Gb3pMf",listItem:"listItem-BJ6okZ",buttons:"buttons-PCuAE1","secondary-button":"secondary-button-Al7Fgz",secondaryButton:"secondary-button-Al7Fgz"}},792117:function(e,t,i){"use strict";i.d(t,{A:()=>a});let a={importPreview:"importPreview-zLowa_",container:"container-ngLeUm",importPreviewActionsWrap:"importPreviewActionsWrap-yLT2dV",errorModelWrap:"errorModelWrap-Yeh1U_","search-arrow":"search-arrow-6wCe09",searchArrow:"search-arrow-6wCe09",prompt:"prompt-AL7zbq",upload:"upload-fNTVzd","import-to-project-modal":"import-to-project-modal-X0DvbK",importToProjectModal:"import-to-project-modal-X0DvbK","upload-selector":"upload-selector-DDavnz",uploadSelector:"upload-selector-DDavnz",segmented:"segmented-2JVUBX",promptMessage:"promptMessage-u4guVC",externalLink:"externalLink-wIC1uv",urlInput:"urlInput-2j_rpp",form:"form-buGARE",postmanFileImportWrapper:"postmanFileImportWrapper-GuN26Q",importProtobufWrapper:"importProtobufWrapper-wm1QUH",importPromptImage:"importPromptImage-FrTNWQ","import-format-detail-modal":"import-format-detail-modal-fubV2g",importFormatDetailModal:"import-format-detail-modal-fubV2g","group-title":"group-title-KQN6Cp",groupTitle:"group-title-KQN6Cp","group-description":"group-description-ry0gzB",groupDescription:"group-description-ry0gzB","group-list-item":"group-list-item-ELR9up",groupListItem:"group-list-item-ELR9up","group-list-item-icon":"group-list-item-icon-cfO4n_",groupListItemIcon:"group-list-item-icon-cfO4n_"}},848336:function(e,t,i){"use strict";i.d(t,{A:()=>a});let a={projectDetail:"projectDetail-mBojpW","member-list":"member-list-MN38ry",memberList:"member-list-MN38ry",input:"input-PQytQK",inputSimpleLabel:"inputSimpleLabel-HtE312",inputSimpleLabelWrapper:"inputSimpleLabelWrapper-JH2cMP",inputSimpleLabelRadioGroup:"inputSimpleLabelRadioGroup-DWfJZY",inputSimpleLabelDetail:"inputSimpleLabelDetail-qmThgt",projectTypeItem:"projectTypeItem-bslGUn",projectTypeItemDisabled:"projectTypeItemDisabled-N6q_PI",projectTypeItemActive:"projectTypeItemActive-vRlXzg","disabled-text":"disabled-text-nQhA4k",disabledText:"disabled-text-nQhA4k",tag:"tag-_ZlZPW",tableWrapper:"tableWrapper-y3I0OA","member-permission-table":"member-permission-table-KT2g_i",memberPermissionTable:"member-permission-table-KT2g_i","member-permission-table-header":"member-permission-table-header-sKWIXR",memberPermissionTableHeader:"member-permission-table-header-sKWIXR",customSelect:"customSelect-KyQuRJ",projectDetailImportMode:"projectDetailImportMode-C59WjZ",inputImportLabelDetail:"inputImportLabelDetail-o7esLW",importModeDivider:"importModeDivider-Vqy5uX",inputRightSuffix:"inputRightSuffix-YbKJ0h"}},808034:function(e,t,i){"use strict";i.d(t,{A:()=>a});let a={teamResources:"teamResources-E5_qrP",menus:"menus-LGJVYs",item:"item-bAojJD",title:"title-z82Uih",arrow:"arrow-LcbMMg",active:"active-CgZsWn"}},770189:function(e,t,i){"use strict";i.d(t,{A:()=>a});let a={container:"container-QJ6b6s","operation-node-dropdown":"operation-node-dropdown-uZnV_2",operationNodeDropdown:"operation-node-dropdown-uZnV_2",testLayoutTabs:"testLayoutTabs-LGOgc6",dropdownWrapper:"dropdownWrapper-fzV8pk"}},810558:function(e,t,i){"use strict";i.d(t,{A:()=>a});let a={searchBar:"searchBar-veytg4",small:"small-YvvPlz",actions:"actions-OTBCQs",button:"button-dsBuFp",divider:"divider-kDZHl3",inline:"inline-z3wQaj",enable:"enable-xbtb1L",text:"text-MM73mf"}},187e3:function(e,t,i){"use strict";i.d(t,{A:()=>a});let a={"response-attribute-wrap":"response-attribute-wrap-_SXRMI",responseAttributeWrap:"response-attribute-wrap-_SXRMI",editableAttributesLeft:"editableAttributesLeft-wLhew4",borderless:"borderless-xlgEq4",hasValue:"hasValue-TQGzkS",codeInputError:"codeInputError-yMfV3M",addButton:"addButton-qPATJi",descriptionWrapper:"descriptionWrapper-JKx2dX",description:"description-gffMjm",noResponse:"noResponse-L87iqO",label:"label-DLNvln",space:"space-HVqBFR",buttons:"buttons-IJ_mQl","secondary-button":"secondary-button-T4JytD",secondaryButton:"secondary-button-T4JytD"}},939515:function(e){function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=939515,e.exports=t},417222:function(e){function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=417222,e.exports=t},895335:function(e,t,i){"use strict";i.d(t,{h:()=>n});var a=i(838e3);i(641486);let n=e=>(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",...e,children:[(0,a.jsx)("path",{fill:"var(--ui-blue-6)",fillRule:"evenodd",d:"M14.7 8H9.3A1.3 1.3 0 0 0 8 9.3v5.4A1.3 1.3 0 0 0 9.3 16h5.4a1.3 1.3 0 0 0 1.3-1.3V9.3A1.3 1.3 0 0 0 14.7 8M9.3 6h5.4A3.3 3.3 0 0 1 18 9.3v5.4a3.3 3.3 0 0 1-3.3 3.3H9.3A3.3 3.3 0 0 1 6 14.7V9.3A3.3 3.3 0 0 1 9.3 6",clipRule:"evenodd"}),(0,a.jsx)("path",{fill:"var(--ui-text-color)",fillOpacity:.8,fillRule:"evenodd",d:"M11 4a1 1 0 1 0 2 0V2a1 1 0 1 0-2 0zm0 18a1 1 0 1 0 2 0v-2a1 1 0 1 0-2 0zM1 12a1 1 0 0 1 1-1h2a1 1 0 1 1 0 2H2a1 1 0 0 1-1-1m19-1a1 1 0 1 0 0 2h2a1 1 0 1 0 0-2z",clipRule:"evenodd"})]})},867325:function(e,t,i){"use strict";function a(e){return null!==e[1]}function n(e){return e[0]}function l(e){return e[1]}i.d(t,{Me:()=>l,Tp:()=>n,ys:()=>a}),Symbol.for(""),Symbol.for("")},837403:function(e,t,i){"use strict";i.d(t,{zI:()=>a});let a="utility-process-run-request-enabled"},452054:function(e,t,i){"use strict";i.d(t,{x:()=>d});var a=i(838e3),n=i(838487),l=i.n(n);let r="wrapper-V0zEFK",s="value-sXFiEi",o="child-dw4gip";function d(e){let{size:t,value:i,placeHolder:n,wrapperClassName:d,wrapperStyle:c,children:u}=e;return(0,a.jsxs)("div",{className:l()(r,t,d),style:c,children:[(0,a.jsx)("div",{className:l()(s),children:i||n}),(0,a.jsx)("div",{className:o,children:u})]})}},738753:function(e,t,i){"use strict";i.d(t,{A:()=>u});var a=i(838e3),n=i(740565),l=i(941929),r=i(140049),s=i(257100),o=i(138249),d=i(641486),c=i(570742);let u=e=>{let{dropdownProps:t,onChange:i,optionsProcessor:u,...p}=e,[m,h]=(0,l.A)(p,{valuePropName:"value"}),v=(0,d.useMemo)(()=>Object.values(c.Q),[]),f=(0,d.useMemo)(()=>{let e=(0,n.getUserLocale)(),t=v.filter(e=>e!==c.Q.ORIGINAL).map(t=>{let i="en-US"===e?t:`${(0,n.hw)({id:`caseStyle.${t}`})} ${t}`;return{label:(0,a.jsx)("span",{title:i,style:{fontWeight:"var(--ui-font-weight-400)"},children:i}),value:t,key:t}});return[{label:(0,n.hw)({id:`caseStyle.${c.Q.ORIGINAL}`}),value:c.Q.ORIGINAL,key:c.Q.ORIGINAL},{key:"divider",type:"divider"},...t]},[v]),g=(0,d.useMemo)(()=>{let e=v.map(e=>({label:(0,n.hw)({id:`caseStyle.${e}`}),value:e,key:e}));return u?u(e):e},[v,u]),y=(0,r.A)(e=>{let t=null==g?void 0:g.find(t=>t.value===e);null==i||i(e,t),h(e)});return(0,a.jsx)(s.A,{...t,menu:{items:f,selectedKeys:[m],onSelect:e=>{y(e.key)},onClick:e=>{y(e.key)}},children:(0,a.jsx)(o.A,{defaultActiveFirstOption:!0,...p,options:g,open:!1})})}},328970:function(e,t,i){"use strict";i.d(t,{z:()=>r});var a=i(570742),n=i(398380),l=i.n(n);let r={[a.Q.ORIGINAL]:e=>e,[a.Q.CONSTANT_CASE]:e=>l().snakeCase(e).toUpperCase(),[a.Q.KEBAB_CASE]:e=>l().kebabCase(e),[a.Q.SCREAMING_KEBAB_CASE]:e=>l().kebabCase(e).toUpperCase(),[a.Q.PASCAL_SNAKE_CASE]:e=>l().snakeCase(e).split("_").map(l().upperFirst).join("_"),[a.Q.PASCAL_CASE]:e=>l().upperFirst(l().camelCase(e)),[a.Q.SNAKE_CASE]:e=>l().snakeCase(e),[a.Q.CAMEL_CASE]:e=>l().camelCase(e),[a.Q.FLAT_CASE]:e=>l().camelCase(e).toLowerCase(),[a.Q.UPPER_CASE]:e=>l().camelCase(e).toUpperCase()}},343197:function(e,t,i){"use strict";i.d(t,{$:()=>m,s:()=>p});var a=i(838e3),n=i(838487),l=i.n(n),r=i(202130),s=i(671466),o=i(641486);let d="container-uoyVzK",c="item-container-O1xX7w",u="item-content-y4f97l",p=["blue","purple","cyan","green","magenta","red","orange","yellow","volcano","geekblue","lime","gold"];function m(e){let{overlayRef:t,value:i,className:n,onChange:m}=e,[h,v]=(0,o.useState)(!1);return(0,a.jsx)(r.A,{showArrow:!1,placement:"bottomLeft",open:h,content:(0,a.jsx)("div",{ref:t,className:"flex flex-wrap items-center w-48 gap-1",children:p.map(e=>(0,a.jsx)("div",{className:l()(c,{active:e===i}),style:{"--item-color":`var(--ui-${e}-6)`,"--active-color":`var(--ui-${e}-6)`,"--hover-color":`var(--ui-${e}-2)`},onClick:()=>null==m?void 0:m(e),children:(0,a.jsx)("div",{className:l()(u)})},e))}),onOpenChange:v,children:(0,a.jsx)("div",{className:l()(d,n,{active:h}),style:{"--selected-color":`var(--ui-${i||"purple"}-6)`},children:(0,a.jsx)(s.A,{type:"icon-triangle-down",color:"white",size:12})})})}},553047:function(e,t,i){"use strict";i.d(t,{w:()=>r});var a=i(838e3),n=i(689368),l=i(471504);function r(e){var t;let i=null==(t=(0,n.Ay)(e=>e.customEndpointTemplate.list).find(t=>t.protocol===e.protocol))?void 0:t.color;return(0,a.jsx)(l.K4,{...e,color:i})}},328321:function(e,t,i){"use strict";i.d(t,{A:()=>m});var a=i(838e3),n=i(740565),l=i(838487),r=i.n(l),s=i(539867),o=i(803664),d=i(641486),c=i(184319);let u="leftRadioLabel-sg5lgM",p="rightRadioLabel-knjBNf",m=()=>{var e,t,i,l;let{selectedVersion:m,setSelectedVersion:h,...v}=(0,d.useContext)(c.Kd),f=null!=(e=v.originalHeaderLabel)?e:(0,n.hw)({id:"version.label.original"}),g=null!=(t=v.modifiedHeaderLabel)?t:(0,n.hw)({id:"version.label.modified"}),y=null!=(i=v.reserveHeaderActionLabel)?i:(0,n.hw)({id:"version.label.reserve"}),x=null!=(l=v.recoverHeaderActionLabel)?l:(0,n.hw)({id:"version.label.recover"});return(0,a.jsxs)(s.A.Group,{value:m,className:"flex w-full items-center mb-5",onChange:e=>{h(e.target.value)},children:[(0,a.jsx)(o.A,{hiddenRadio:!0,className:"flex w-1/2 mr-1",value:1,title:(0,a.jsxs)("div",{className:"w-full flex items-center justify-between",children:[(0,a.jsx)("span",{className:r()("truncate flex items-center",u),children:f}),(0,a.jsx)("span",{className:"mr-1 flex-shrink-0",children:x})]})}),(0,a.jsx)(o.A,{hiddenRadio:!0,className:"flex w-1/2 ml-1",value:0,title:(0,a.jsxs)("div",{className:"w-full flex items-center justify-between",children:[(0,a.jsx)("span",{className:r()("truncate flex items-center",p),children:g}),(0,a.jsx)("span",{className:"mr-1 flex-shrink-0",children:y})]})})]})}},184319:function(e,t,i){"use strict";i.d(t,{Ay:()=>h,Kd:()=>p,My:()=>m,r5:()=>d.r5});var a=i(838e3),n=i(740565),l=i(957705),r=i(689368),s=i(641486),o=i(618487),d=i(641930);let c={ORIGINAL:{},MODIFIED:{}},u={comparisonModel:"httpApiComparison",projectMemberMap:{},apiFolderMap:c,dataSchemaFolderMap:c,responseComponentFolderMap:c,responseComponentMap:c,securitySchemeFolderMap:c,securitySchemeMap:c,docMap:c,oasComponentFolderMap:c,oasComponentMap:c,comparisonType:"HISTORY",dataComparisonIgnoreProperties:{},isResolveConflictsMode:!1,enableFieldNameDescription:!0,...d.Sr,original:null,modified:null,historyStore:null,leftSideState:null,rightSideState:null},p=(0,s.createContext)(u),m=["zh-cn"],h=function(e){let{extraFormatterData:t,...i}=e.comparisonProps,c=(0,r.Ay)(e=>{let{projectMember:t}=e;return t.currentProjectMembers}),u=(0,s.useMemo)(()=>{var e;return null!=(e=null==c?void 0:c.reduce((e,t)=>(e[t.userId]=t,e),{}))?e:{}},[c]),{responseComponentMap:h,dataSchemaFolderMap:v,responseComponentFolderMap:f,apiFolderMap:g,securitySchemeMap:y,securitySchemeFolderMap:x,oasComponentFolderMap:A,oasComponentMap:j}=(0,r.Ay)(e=>({responseComponentMap:e.apiResponse.apiResponseMap,dataSchemaFolderMap:e.apiSchemaFolder.apiSchemaFolderMap,responseComponentFolderMap:e.httpResponseFolder.map,apiFolderMap:e.apiDetailFolder.apiDetailFolderMap,securitySchemeMap:e.securityScheme.securitySchemeMap,securitySchemeFolderMap:e.securitySchemeFolder.map,oasComponentFolderMap:e.oasComponentFolder.map,oasComponentMap:e.oasComponent.oasComponentMap})),b=(0,l.Ay)(e=>e.docMap),w=(0,s.useMemo)(()=>{var e,i,a,n,l,r,s,o,d,c,u,p,m,w,S,C,I,N,k,T,M,E,_,F,D,R,O,P,L,$,B,z,U,H,V,K,q,G,W,J,Y,Z,Q,X,ee,et,ei,ea;return{apiFolderMap:{ORIGINAL:null!=(k=null==t||null==(e=t.apiFolderMap)?void 0:e.ORIGINAL)?k:g,MODIFIED:null!=(T=null==t||null==(i=t.apiFolderMap)?void 0:i.MODIFIED)?T:g},dataSchemaFolderMap:{ORIGINAL:null!=(M=null==t||null==(a=t.dataSchemaFolderMap)?void 0:a.ORIGINAL)?M:v,MODIFIED:null!=(E=null==t||null==(n=t.dataSchemaFolderMap)?void 0:n.MODIFIED)?E:v},responseComponentFolderMap:{ORIGINAL:null!=(F=null!=(_=null==t||null==(l=t.responseComponentFolderMap)?void 0:l.ORIGINAL)?_:f)?F:{},MODIFIED:null!=(R=null!=(D=null==t||null==(r=t.responseComponentFolderMap)?void 0:r.MODIFIED)?D:f)?R:{}},responseComponentMap:{ORIGINAL:null!=(P=null!=(O=null==t||null==(s=t.responseComponentMap)?void 0:s.ORIGINAL)?O:h)?P:{},MODIFIED:null!=($=null!=(L=null==t||null==(o=t.responseComponentMap)?void 0:o.MODIFIED)?L:h)?$:{}},docMap:{ORIGINAL:null!=(B=null==t||null==(d=t.docMap)?void 0:d.ORIGINAL)?B:b,MODIFIED:null!=(z=null==t||null==(c=t.docMap)?void 0:c.MODIFIED)?z:b},securitySchemeMap:{ORIGINAL:null!=(H=null!=(U=null==t||null==(u=t.securitySchemeMap)?void 0:u.ORIGINAL)?U:y)?H:{},MODIFIED:null!=(K=null!=(V=null==t||null==(p=t.securitySchemeMap)?void 0:p.MODIFIED)?V:y)?K:{}},securitySchemeFolderMap:{ORIGINAL:null!=(G=null!=(q=null==t||null==(m=t.securitySchemeFolderMap)?void 0:m.ORIGINAL)?q:x)?G:{},MODIFIED:null!=(J=null!=(W=null==t||null==(w=t.securitySchemeFolderMap)?void 0:w.MODIFIED)?W:x)?J:{}},oasComponentFolderMap:{ORIGINAL:null!=(Z=null!=(Y=null==t||null==(S=t.oasComponentFolderMap)?void 0:S.ORIGINAL)?Y:A)?Z:{},MODIFIED:null!=(X=null!=(Q=null==t||null==(C=t.oasComponentFolderMap)?void 0:C.MODIFIED)?Q:A)?X:{}},oasComponentMap:{ORIGINAL:null!=(et=null!=(ee=null==t||null==(I=t.oasComponentMap)?void 0:I.ORIGINAL)?ee:j)?et:{},MODIFIED:null!=(ea=null!=(ei=null==t||null==(N=t.oasComponentMap)?void 0:N.MODIFIED)?ei:j)?ea:{}}}},[g,v,b,null==t?void 0:t.apiFolderMap,null==t?void 0:t.dataSchemaFolderMap,null==t?void 0:t.docMap,null==t?void 0:t.responseComponentFolderMap,null==t?void 0:t.responseComponentMap,null==t?void 0:t.securitySchemeFolderMap,null==t?void 0:t.securitySchemeMap,null==t?void 0:t.oasComponentFolderMap,null==t?void 0:t.oasComponentMap,f,h,x,y,A,j]),S=(0,n.JK)().toLowerCase(),C=(0,d.Ay)(i.defaultVersionTag),I=(0,o.useModel)("clientConfig",e=>{let{dynamicConfig:t}=e;return"HISTORY"===i.comparisonType?t.dataComparisonIgnoreProperties:t.branchDataComparisonIgnoreProperties});return(0,a.jsx)(p.Provider,{value:{...i,...w,enableFieldNameDescription:m.includes(S),projectMemberMap:u,dataComparisonIgnoreProperties:I,...C},children:e.children})}},58311:function(e,t,i){"use strict";i.d(t,{A:()=>b});var a=i(838e3),n=i(740565),l=i(69712),r=i(838487),s=i.n(r),o=i(539867),d=i(803664),c=i(969812),u=i(671466),p=i(641486);i(641930);let m="group-mvDNwC",h="collapsed-Z4zImC",v="diffDetail-tJiwLh",f="disableStyle-L_RsUK",g="title-Hswr3P",y="radio-jogzOw",x="radioSecondaryText-k7B5Px",A="groupTitle-gnQZy6",j="fullRound-u2Yq6S",b=e=>{var t,i,r,b;let{renderTitle:w,beforeLabel:S,afterLabel:C,children:I,isResolveConflictsMode:N,contentHeight:k,...T}=e,[M,E]=(0,p.useState)(!0),_=null!=(t=T.originalLabel)?t:(0,n.hw)({id:"version.label.original"}),F=null!=(i=T.modifiedLabel)?i:(0,n.hw)({id:"version.label.modified"}),D=null!=(r=T.reserveActionLabel)?r:(0,n.hw)({id:"version.label.reserve"}),R=null!=(b=T.recoverActionLabel)?b:(0,n.hw)({id:"version.label.recover"}),O="function"==typeof w?w(M):w;return(0,a.jsxs)("div",{className:s()(m,{[h]:!M},"mb-5"),children:[(0,a.jsx)("div",{className:s()(A,"cursor-pointer flex items-center p-2"),onClick:()=>{E(e=>!e)},children:(0,a.jsxs)(o.A.Group,{value:T.value,onChange:e=>{T.onChange(e.target.value)},className:"flex items-center justify-between w-full",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between w-1/2",children:[(0,a.jsx)("span",{className:"flex items-center flex-shrink-0",children:(0,a.jsx)(u.A,{type:"icon-nav-keyboard-arrow-right",className:"mr-1",style:{transition:"transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:`rotate(${90*!!M}deg)`},size:18})}),(0,a.jsx)("span",{title:O,className:s()(g,"truncate mx-1"),children:O}),(0,a.jsxs)("span",{className:"ml-auto",children:[M&&!!S&&(0,a.jsx)("span",{className:f,children:S}),N&&(0,a.jsx)(d.A,{hiddenRadio:!0,onClick:l.dG,className:s()(y,"m-0 p-0 ml-auto flex items-center"),value:1,title:(0,a.jsxs)("span",{className:s()("flex items-center",x),children:[!!_&&(0,a.jsxs)("span",{className:"truncate",children:["(",_,")"]}),!!R&&(0,a.jsx)("span",{className:"ml-1 text-color flex-shrink-0",children:R}),(0,a.jsx)(c.A,{className:s()("ml-2",j),checked:1===T.value})]})})]})]}),(0,a.jsxs)("div",{className:"flex w-1/2",children:[M&&C&&(0,a.jsx)("span",{className:s()(f,"ml-auto"),children:C}),N&&(0,a.jsx)(d.A,{hiddenRadio:!0,onClick:l.dG,className:s()(y,"m-0 p-0 ml-auto flex items-center"),value:0,title:(0,a.jsxs)("span",{className:s()("flex items-center",x),children:[!!F&&(0,a.jsxs)("span",{className:"truncate",children:["(",F,")"]}),!!D&&(0,a.jsx)("span",{className:"ml-1 text-color flex-shrink-0",children:D}),(0,a.jsx)(c.A,{className:s()("ml-2",j),checked:0===T.value})]})})]})]})}),(0,a.jsx)("div",{className:v,style:{height:M?k:0},children:I})]})}},292137:function(e,t,i){"use strict";i.d(t,{A:()=>r});var a=i(838e3),n=i(641486),l=i(466504);let r=e=>{let t=(0,n.useMemo)(()=>e.pickedFieldNames.reduce((t,i)=>{var a,n;return(null==(a=e.value)?void 0:a[i])?{...t,[i]:null==(n=e.value)?void 0:n[i]}:t},{}),[e.value,e.pickedFieldNames]);return(0,a.jsx)(l.A,{...e,value:t})}},466504:function(e,t,i){"use strict";i.d(t,{A:()=>m});var a=i(838e3),n=i(641486),l=i(58311),r=i(171882),s=i(511389),o=i(485956),d=i(838487),c=i.n(d);let u="groupContent-i_SVRD",p=function(e){let{title:t,value:i,setContentHeight:l}=e,[r,d]=(0,n.useState)(300),{theme:p}=(0,n.useContext)(s.Ay);return(0,a.jsx)("div",{className:c()(u,"py-2"),children:(0,a.jsx)(o.A,{theme:p.background,language:"yaml",height:r,value:i,options:{unicodeHighlight:{nonBasicASCII:!1,invisibleCharacters:!1,ambiguousCharacters:!1,includeComments:!1,includeStrings:!1},readOnly:!0,lineNumbers:"on",automaticLayout:!0,scrollBeyondLastLine:!1,scrollbar:{alwaysConsumeMouseWheel:!1},renderFinalNewline:"off",renderLineHighlight:"line",contextmenu:!1},editorWillUnmount:()=>{},editorDidMount:e=>{e.onDidContentSizeChange(()=>{let t;t=Math.min(e.getContentHeight(),400),l(t+16),d(t)})}},t)})},m=function(e){let[t,i]=(0,n.useState)("auto"),s=(0,r.d)(e);return s.length?(0,a.jsx)(l.A,{renderTitle:e.title,contentHeight:t,children:(0,a.jsx)(p,{title:e.title,value:s,setContentHeight:i})}):null}},694931:function(e,t,i){"use strict";i.d(t,{A:()=>r});var a=i(526838),n=i(557010);class l extends n.A{get pickedFieldNames(){return this.fieldNames}constructor({pickedFieldNames:e,...t}){super(t),(0,a._)(this,"fieldNames",void 0),this.fieldNames=e}}let r=l},557010:function(e,t,i){"use strict";i.d(t,{A:()=>n});var a=i(526838);let n=class e{get key(){return this.options.key}get title(){return this.options.title}get value(){return this.options.value}get mask(){return this.options.mask}get view(){return this.options.view}get formatter(){return this.options.formatter}get hideFieldNameIfSingleField(){return this.options.hideFieldNameIfSingleField}get translateRelevantData(){return this.options.translateRelevantData}get defaultOpen(){return this.options.defaultOpen}constructor(e){(0,a._)(this,"options",void 0),this.options=e}}},431078:function(e,t,i){"use strict";i.d(t,{A:()=>d});var a=i(838e3),n=i(897395);let l=e=>(0,a.jsx)(n.A,{...e,title:e.title,formatter:e.formatter,modified:e.modified,original:e.original,hideFieldNameIfSingleField:e.hideFieldNameIfSingleField,translateRelevantData:e.translateRelevantData,mask:e.mask});var r=i(584117),s=i(255529),o=i(641486);let d=e=>{let t=e.pickedFieldNames[0],i=(0,o.useMemo)(()=>{var i;return null!=(i=e.original[t])?i:[]},[t,e.original]),n=(0,o.useMemo)(()=>{var i;return null!=(i=e.modified[t])?i:[]},[t,e.modified]),d=(0,o.useMemo)(()=>{var a,l,s;let o,d,c,u=(0,r.A)(e.mask,`${t}[]`);return a=i,l=n,s=u,o=null!=l?l:[],d=[],c=[],(null!=a?a:[]).forEach(e=>{let t=null==e?void 0:e.id;if(!t)return;let i=o.find(e=>(null==e?void 0:e.id)===t);i&&i.id&&c.push(i.id),d.push({name:String(t),title:(null==e?void 0:e.name)||(null==e?void 0:e.relatedName)||(null==i?void 0:i.name)||(null==i?void 0:i.relatedName)||String(t),original:e,modified:i,mask:s})}),o.forEach(e=>{var t,i;c.includes(null!=(t=null==e?void 0:e.id)?t:0)||d.push({name:String(null==e?void 0:e.id),title:(null==e?void 0:e.name)||(null==e?void 0:e.relatedName)||String(null!=(i=null==e?void 0:e.id)?i:""),modified:e,mask:s})}),d},[e.mask,t,i,n]);return(0,a.jsx)(s.A,{onValuesChange:(i,a)=>{var n;let l=Object.keys(a);null==(n=e.onChange)||n.call(e,{[t]:l.reduce((e,t)=>{let i=a[t];if(i)i.id&&e.push(i);else{let i=d.find(e=>e.name===t);i&&e.push(i.original)}return e},[])})},children:d.map(t=>(0,a.jsx)(s.A.Item,{name:t.name,noStyle:!0,children:(0,a.jsx)(l,{title:`${e.title} / ${t.title}`,original:t.original||{},modified:t.modified||{},formatter:e.formatter,mask:t.mask})},t.name))})}},897395:function(e,t,i){"use strict";i.d(t,{A:()=>p});var a=i(838e3),n=i(140049),l=i(641486),r=i(129867),s=i(184319),o=i(58311),d=i(641930),c=i(171882),u=i(398240);let p=function(e){var t;let i=(0,l.useRef)(`instance-${(0,r.Z0)()}`),p=(0,l.useContext)(s.Kd),[m,h]=(0,l.useState)(null!=(t=p.defaultVersionTag)?t:d.U8),v=(0,n.A)(t=>{var i,a;1===t?null==(i=e.onChange)||i.call(e,e.original):null==(a=e.onChange)||a.call(e,e.modified)}),f=(0,n.A)(()=>{p.reCalcHeaderSelectedVersion()}),{hasDifference:g,originalYaml:y,modifiedYaml:x}=(0,c.A)(e);(0,l.useEffect)(()=>{g&&(v(m),f())},[f,v,m,g]);let A=(0,n.A)(()=>m),[j,b]=(0,l.useState)("auto");return(p.useVersionCtrl(g,{id:i.current,getSelectedVersion:A,select:h}),g)?(0,a.jsx)(o.A,{renderTitle:e.title,value:m,onChange:h,originalLabel:p.originalLabel,modifiedLabel:p.modifiedLabel,reserveActionLabel:p.reserveActionLabel,recoverActionLabel:p.recoverActionLabel,beforeLabel:p.beforeLabel,afterLabel:p.afterLabel,isResolveConflictsMode:p.isResolveConflictsMode,contentHeight:j,children:(0,a.jsx)(u.A,{title:e.title,originalYaml:y,modifiedYaml:x,setContentHeight:b})}):null}},53432:function(e,t,i){"use strict";i.d(t,{A:()=>r});var a=i(838e3),n=i(641486),l=i(897395);let r=e=>{let t=(0,n.useMemo)(()=>0===Object.keys(e.original).length?{}:e.pickedFieldNames.reduce((t,i)=>({...t,[i]:e.original[i]}),{}),[e.original,e.pickedFieldNames]),i=(0,n.useMemo)(()=>0===Object.keys(e.modified).length?{}:e.pickedFieldNames.reduce((t,i)=>({...t,[i]:e.modified[i]}),{}),[e.modified,e.pickedFieldNames]);return(0,a.jsx)(l.A,{...e,modified:i,original:t})}},684498:function(e,t,i){"use strict";i.d(t,{A:()=>J});var a=i(838e3),n=i(184319),l=i(740565),r=i(69712),s=i(140049),o=i(579159),d=i(641486),c=i(129867),u=i(58311),p=i(641930),m=i(171882),h=i(751527),v=i(533066),f=i(664283),g=i(695545),y=i(398380);let x=(0,f.cG)(),A=`x-${x}-refs`,j=`x-${x}-overrides`,b=`x-${x}-orders`,w=e=>!!((null==e?void 0:e.length)===2&&"null"===e[1].type&&e[0].$ref),S=e=>{var t,i;let a,n,l,{anyOf:r,oneOf:s,allOf:o,...d}=e;if(!r&&!s&&!o||w(r))return e;return{...d,...(a={},n=[],l=Object.keys(t={anyOf:r,allOf:o,oneOf:s}).filter(e=>t[e])[0],null==(i=t[l])||i.forEach((e,t)=>{a[t]=e,n.push(String(t))}),{properties:a,type:l,[b]:n})}},C=e=>{var t,i,a,n;let l=(i=e.type)?"string"==typeof i?i:i.length>2?"any":i[0]:"",r=l+((null==e?void 0:e.format)?`<${e.format}>`:""),s=(a=l,null!=(n=v.q[a])?n:"text-purple-6");return{displayType:r,typeColumnColor:s,allowNull:null==(t=e.type)?void 0:t.includes("null")}},I=(e,t)=>{let i,a=S(JSON.parse(JSON.stringify(e))),{required:n=[]}=a;delete a.required;let l=JSON.parse(JSON.stringify((0,y.omit)(a,"refIdMap")));if(!(i=a).properties&&!i.items&&!i.$ref&&!i.anyOf&&!i[A])return{...a,...C(a),originalSchemaData:l};a.refIdMap=a.refIdMap||{},a.$ref&&(a=((e,t,i)=>{var a;let{$ref:n,refIdMap:l={},...r}=e,s=n.replace("#/definitions/","");if(i.push(...(null==r?void 0:r.required)||[],...(null==(a=t[s])?void 0:a.required)||[]),!t[s])return{...r,properties:{},removed:!0,type:"ref"};let{title:o,name:d,...c}=t[s],u=l[s];return t[s].properties&&!u?S({...c,...r,type:o||d,refIdMap:{...l,[s]:s}}):{...r,properties:{},type:o||d}})(a,t,n)),w(a.anyOf)&&(a=((e,t,i)=>{var a;let{anyOf:n,refIdMap:l={},...r}=e,s=n[0].$ref.replace("#/definitions/","");if(i.push(...(null==r?void 0:r.required)||[],...(null==(a=t[s])?void 0:a.required)||[]),!t[s])return{...r,properties:{},removed:!0,type:["ref",n[1].type]};let{title:o,name:d,...c}=t[s],u=l[s];return t[s].properties&&!u?S({...c,...r,type:[o||d,n[1].type],refIdMap:{...l,[s]:s}}):{...r,properties:{},type:[o||d,n[1].type]}})(a,t,n)),a[A]&&Object.keys(a[A]).length&&(a=((e,t,i)=>{let a=JSON.parse(JSON.stringify(e)),{[A]:n,[b]:l=[],properties:r,refIdMap:s={},...o}=a;return Object.entries(n).forEach(e=>{var n;let[d,c]=e,u=c.$ref.replace("#/definitions/",""),{[j]:p,...m}=c;if(!t[u])return a.properties={...r,[d]:{removed:!0}},!0;s[u]=u;let h=t[u][b];if(h){let e=l.findIndex(e=>e===d);l.splice(e,1,...h)}return i.push(...(null==m?void 0:m.required)||[],...(null==(n=t[u])?void 0:n.required)||[]),m.properties={...t[u].properties,...p,...a.properties},a={...m,...o,[b]:l,refIdMap:s},!0}),a})(a,t,n)),a.items&&(a=(e=>{let{items:t,...i}=e;return{properties:{ITEMS:t},[b]:["ITEMS"],...i}})(a));let{properties:r,[b]:s,refIdMap:o}=a;delete a.refIdMap,delete a[b];let d=new Map;s&&s.forEach(e=>{d.set(e,null==r?void 0:r[e])});let c=new Map;return[...d].forEach(e=>{let[i,a]=e;if(a){let e={...a,refIdMap:o};c.set(i,{...I(e,t),itemRequired:n.includes(i)})}}),{...a,...C(a),properties:c,originalSchemaData:l}},N=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,h.a)({id:"rootNode"}),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#",{properties:n,...l}=e,r=[];return r.push({key:t,level:i,path:a,...l}),n&&[...n].forEach(e=>{let[n,l]=e;r.push(...N(l,n,i+1,`${a}/${t}`))}),r},k=["originalSchemaData","refIdMap"],T=(0,y.flow)([I,N]);var M=i(791027),E=i(689368),_=i(718180);let F="diffContent-qcr9Ld",D="popover-advanced-setting-NtKIqx";var R=i(169508),O=i(838487),P=i.n(O);let L=e=>{let{placement:t}=e,i=(0,l.hw)({id:"project.label.apiCustomField.fieldName"}),n=(0,l.hw)({id:"dataType"}),r=(0,l.hw)({id:"mock"}),s=(0,h.a)({id:"schemaTitle"}),o=(0,l.hw)({id:"description"});return(0,a.jsxs)("div",{className:P()(t,"header"),children:[(0,a.jsx)("div",{className:"truncate",title:i,children:i}),(0,a.jsx)("div",{className:"truncate",title:n,children:n}),(0,a.jsx)("div",{className:"truncate",title:r,children:r}),"CN"===R.Gi&&(0,a.jsx)("div",{className:"truncate",title:s,children:s}),(0,a.jsx)("div",{className:"truncate",title:o,children:o})]})};var $=i(704128),B=i(671466),z=i(28594),U=i(674984),H=i(202130);function V(e){let{children:t,...i}=e;return(0,a.jsx)(U.hL,{children:(0,a.jsx)(H.A,{trigger:"click",placement:"right",overlayClassName:D,content:(0,a.jsx)(z.A,{mode:"full",disabled:!0,...i,onClose:()=>{},onChangeMode:()=>{},onChange:()=>{}}),children:t})})}function K(e){var t,i;let{item:n,diffType:l,placement:r,moduleId:s}=e;if(!n)return(0,a.jsx)("div",{className:P()(r,l)});let{removed:o,level:d,typeColumnColor:c,allowNull:u,itemRequired:p,originalSchemaData:m,deprecated:v,displayType:f,key:g,description:y,title:x}=n,A=null!=(i=n[$.EW])?i:null==(t=n.mock)?void 0:t.mock,j=["ITEMS",(0,h.a)({id:"rootNode"})];return o&&"ref"!==f?(0,a.jsx)("div",{className:P()(r,l),children:(0,a.jsx)("span",{className:`pl-${4*d}`,children:(0,h.a)({id:"InvalidXRefObject"})})}):(0,a.jsxs)("div",{className:P()(r,l),children:[(0,a.jsx)("div",{className:`pl-${4*d}`,style:{textDecoration:v?"line-through":void 0},title:g,children:j.includes(g)?(0,a.jsx)("div",{className:"items-tag",children:g}):g}),(0,a.jsxs)("div",{className:c,children:[(0,a.jsx)("span",{className:"truncate",title:f,children:f}),(0,a.jsxs)("div",{className:"schema-icons",children:["same"!==l&&(0,a.jsx)(V,{value:m,requiredChecked:p,nullableChecked:u,moduleId:s,children:(0,a.jsx)("div",{className:"p-1 settings-icon ml-1",children:(0,a.jsx)(B.A,{size:10,color:"var(--ui-text-color)",type:"icon-settings-03"})})}),p&&(0,a.jsx)(B.A,{size:12,color:"var(--ui-red-6)",type:"icon-must",style:{marginLeft:4}}),u&&(0,a.jsx)(B.A,{size:12,color:"var(--ui-red-6)",type:"icon-null",style:{marginLeft:4}})]})]}),(0,a.jsx)("div",{title:A,children:A}),"CN"===R.Gi&&(0,a.jsx)("div",{children:x}),(0,a.jsx)("div",{title:y,children:y})]})}let q=e=>{let{original:t,modified:i,setContentHeight:n,pickedFieldNames:l}=e,r=(0,E.Ay)(e=>{let{apiSchema:t}=e;return t.dataSchemaDefinitions}),s=(0,M.PJ)((null==t?void 0:t.moduleId)||(null==i?void 0:i.moduleId)),o=("string"==typeof(null==l?void 0:l[0])?null==l?void 0:l[0]:"jsonSchema")||"jsonSchema",c=(0,d.useMemo)(()=>((e,t)=>{let i=e.map(e=>{let{key:t,path:i}=e;return`${i}/${t}`}),a=t.map(e=>{let{key:t,path:i}=e;return`${i}/${t}`}),{added:n,removed:l}=(0,g.Ui)(i,a),r=0,s=0,o=[];for(;r<i.length||s<a.length;)if(i[r]&&a[s])if(l.includes(i[r]))o.push({key:i[r]+"delete",$diff:"delete",$old:e[r]}),r+=1;else if(n.includes(a[s]))o.push({key:a[s]+"insert",$diff:"insert",$new:t[s]}),s+=1;else{let i=(0,y.omit)(e[r],k),n=(0,y.omit)(t[s],k);o.push({key:a[r],$diff:(0,y.isEqual)(i,n)?"same":"update",$old:e[r],$new:t[s]}),r+=1,s+=1}else i[r]?(o.push({key:i[r]+"delete",$diff:"delete",$old:e[r]}),r+=1):(o.push({key:a[s]+"insert",$diff:"insert",$new:t[s]}),s+=1);return o})(T((null==t?void 0:t[o])||{},r),T((null==i?void 0:i[o])||{},r)),[t,i,r,o]),u=(0,d.useRef)(null);return(0,_.A)(()=>{u.current&&n(u.current.offsetHeight)}),(0,a.jsxs)("div",{className:F,ref:u,children:[(0,a.jsxs)("section",{className:"flex",children:[(0,a.jsx)(L,{placement:"left"}),(0,a.jsx)(L,{placement:"right"})]}),(0,a.jsx)("section",{children:c.map(e=>{let{$old:t,$new:i,$diff:n,key:l}=e;return(0,a.jsxs)("div",{className:"compare-view",children:[(0,a.jsx)(K,{item:t,diffType:n,placement:"left",moduleId:s}),(0,a.jsx)(K,{item:i,diffType:n,placement:"right",moduleId:s})]},l)})})]})};var G=i(398240);let W=[{value:"VISUALIZATION",label:(0,l.hw)({id:"apiSchema.comparison.mode.visualization"})},{value:"YAML",label:"YAML"}];function J(e){var t,i,l;let h=(0,d.useRef)(`instance-${(0,c.Z0)()}`),[v,f]=(0,d.useState)("VISUALIZATION"),g=(0,d.useContext)(n.Kd),y=null==(t=e.pickedFieldNames)?void 0:t.reduce((t,i)=>{var a;return{...t,[i]:null==(a=e.original)?void 0:a[i]}},{}),x=null==(i=e.pickedFieldNames)?void 0:i.reduce((t,i)=>{var a;return{...t,[i]:null==(a=e.modified)?void 0:a[i]}},{}),[A,j]=(0,d.useState)(null!=(l=g.defaultVersionTag)?l:p.U8),b=(0,s.A)(t=>{var i,a;1===t?null==(i=e.onChange)||i.call(e,y):null==(a=e.onChange)||a.call(e,x)}),w=(0,s.A)(()=>{g.reCalcHeaderSelectedVersion()}),{hasDifference:S,originalYaml:C,modifiedYaml:I}=(0,m.A)({...e,original:y,modified:x});(0,d.useEffect)(()=>{S&&(b(A),w())},[S,w,A,b]);let N=(0,s.A)(()=>A);g.useVersionCtrl(S,{id:h.current,getSelectedVersion:N,select:j});let[k,T]=(0,d.useState)("auto");return S?(0,a.jsxs)(u.A,{renderTitle:t=>(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"truncate",children:e.title}),t&&(0,a.jsx)(o.A,{height:22,className:"ml-2 flex-shrink-0",options:W,defaultValue:v,size:"small",gap:!1,onClick:r.dG,onChange:f})]}),value:A,onChange:j,originalLabel:g.originalLabel,modifiedLabel:g.modifiedLabel,reserveActionLabel:g.reserveActionLabel,recoverActionLabel:g.recoverActionLabel,beforeLabel:g.beforeLabel,afterLabel:g.afterLabel,isResolveConflictsMode:g.isResolveConflictsMode,contentHeight:k,children:["VISUALIZATION"===v&&(0,a.jsx)(q,{original:y,modified:x,setContentHeight:T,pickedFieldNames:e.pickedFieldNames}),"YAML"===v&&(0,a.jsx)(G.A,{originalYaml:C,modifiedYaml:I,title:e.title,setContentHeight:T})]}):null}},398240:function(e,t,i){"use strict";i.d(t,{A:()=>d});var a=i(838e3),n=i(537890),l=i(838487),r=i.n(l),s=i(641486);let o="groupContent-ms_Px0",d=function(e){let{title:t,originalYaml:i,modifiedYaml:l,setContentHeight:d}=e,[c,u]=(0,s.useState)(300);return(0,a.jsx)("div",{className:r()(o,"py-2"),children:(0,a.jsx)(n.Ay,{language:"yaml",height:c,original:i,value:l,options:{unicodeHighlight:{nonBasicASCII:!1,invisibleCharacters:!1,ambiguousCharacters:!1,includeComments:!1,includeStrings:!1},readOnly:!0,enableSplitViewResizing:!1,lineNumbers:"on",automaticLayout:!0,scrollBeyondLastLine:!1,scrollbar:{alwaysConsumeMouseWheel:!1},renderIndicators:!1,renderFinalNewline:"off",renderOverviewRuler:!0,renderLineHighlight:"line",contextmenu:!1},editorWillUnmount:()=>{},editorDidMount:e=>{let t=()=>{let t=e.getOriginalEditor().getContentHeight(),i=Math.min(Math.max(t,e.getModifiedEditor().getContentHeight()),400);d(i+16),u(i)};e.getModifiedEditor().onDidContentSizeChange(()=>{t()}),e.getOriginalEditor().onDidContentSizeChange(()=>{t()})}},t)})}},761528:function(e,t,i){"use strict";i.d(t,{A:()=>r});var a=i(526838),n=i(506083);class l extends n.A{get pickedFieldNames(){return[this.fieldName]}get formatter(){return this.itemFormatter}constructor({pickedFieldName:e,itemFormatter:t,...i}){super(i),(0,a._)(this,"fieldName",void 0),(0,a._)(this,"itemFormatter",void 0),this.fieldName=e,this.itemFormatter=t}}let r=l},506083:function(e,t,i){"use strict";i.d(t,{A:()=>n});var a=i(526838);let n=class e{get key(){return this.options.key}get title(){return this.options.title}get original(){return this.options.original}get modified(){return this.options.modified}get mask(){return this.options.mask}get view(){return this.options.view}get formatter(){return this.options.formatter}get hideFieldNameIfSingleField(){return this.options.hideFieldNameIfSingleField}get translateRelevantData(){return this.options.translateRelevantData}get defaultOpen(){return this.options.defaultOpen}constructor(e){(0,a._)(this,"options",void 0),this.options=e}}},233025:function(e,t,i){"use strict";i.d(t,{A:()=>r});var a=i(526838),n=i(506083);class l extends n.A{get pickedFieldNames(){return this.fieldNames}constructor({pickedFieldNames:e,...t}){super(t),(0,a._)(this,"fieldNames",void 0),this.fieldNames=e}}let r=l},78731:function(e,t,i){"use strict";i.d(t,{A:()=>n});var a=i(526838);let n=class e{formatField(e,t){var i,a;if(void 0===t)return;this.processedKeys.push(String(e));let n=(null==(i=this.options)?void 0:i.enableFieldNameDescription)&&null!=(a=this.formatedFieldNames[String(e)])?a:String(e);this.obj[n]=t}init(){this.obj={},this.processedKeys=[]}format(e){return(this.init(),e)?(this.formatFields(e),Object.keys(e).forEach(t=>{this.processedKeys.includes(t)||(this.obj[t]=e[t])}),this.obj):{}}constructor(e={enableFieldNameDescription:!0}){(0,a._)(this,"processedKeys",[]),(0,a._)(this,"obj",{}),(0,a._)(this,"options",void 0),this.options=e}}},488335:function(e,t,i){"use strict";i.d(t,{A:()=>s});var a=i(526838),n=i(78731),l=i(740565);class r extends n.A{formatFields(e){this.formatField("type",e.type),this.formatField("apikey",e.apikey),this.formatField("basic",e.basic),this.formatField("bearer",e.bearer),this.formatField("digest",e.digest),this.formatField("hawk",e.hawk),this.formatField("awsv4",e.awsv4),this.formatField("edgegrid",e.edgegrid)}constructor(...e){super(...e),(0,a._)(this,"formatedFieldNames",{type:`${(0,l.hw)({id:"api.auth.label.type"})} [type]`,apikey:"API Key [apikey]",basic:"Basic Auth [basic]",bearer:"Bearer Token [bearer]",digest:"Digest Auth [digest]",hawk:"Hawk Authentication [hawk]",awsv4:"AWS Signature [awsv4]",edgegrid:"Akamai EdgeGrid [edgegrid]"})}}let s=r},898791:function(e,t,i){"use strict";i.d(t,{A:()=>f});var a=i(838e3),n=i(53432),l=i(233025),r=i(977633),s=i(740565),o=i(689368),d=i(269966),c=i(140049),u=i(255529),p=i(641486),m=i(618487),h=i(184319),v=i(544487);let f=function(e){let t=(0,o.Ay)(e=>{let{teamMember:t}=e;return t.teamMemberList.reduce((e,t)=>(e[t.userId]=t,e),{})}),{projectMemberMap:i,dataComparisonIgnoreProperties:f,apiFolderMap:g}=(0,p.useContext)(h.Kd),y=(0,m.useModel)("projectCustomApiField",e=>{let{data:t}=e;return t}),x=(0,o.Ay)(e=>{let{settings:t}=e;return t.projectSettingData}),A=(0,c.A)((e,t)=>{var i;return(null==(i=g[null!=t?t:"ORIGINAL"][e])?void 0:i.name)||""}),j=(0,p.useMemo)(()=>{var a,o,c,u;let p,m;return u={original:null!=(a=e.original)?a:{},modified:null!=(o=e.modified)?o:{},getFolderName:A,projectMemberMap:i,teamMemberMap:t,apiFieldList:y,projectSetting:x,mask:null!=(c=f.httpApi)?c:[]},p=[new l.A({key:"name",title:`${(0,s.hw)({id:"api.comparison.basicInfo"})} / ${(0,s.hw)({id:"name"})}`,original:u.original,modified:u.modified,pickedFieldNames:["name"],mask:u.mask,formatter:v.A,hideFieldNameIfSingleField:!0,view:n.A}),new l.A({key:"path",title:`${(0,s.hw)({id:"api.comparison.basicInfo"})} / ${(0,s.hw)({id:"customEndpoint.uri"})}`,original:u.original,modified:u.modified,pickedFieldNames:["path"],mask:u.mask,formatter:v.A,hideFieldNameIfSingleField:!0,view:n.A}),new l.A({key:"protocol",title:`${(0,s.hw)({id:"api.comparison.basicInfo"})} / ${(0,s.hw)({id:"customEndpoint.protocol"})}`,original:u.original,modified:u.modified,pickedFieldNames:["protocol"],mask:u.mask,formatter:v.A,hideFieldNameIfSingleField:!0,view:n.A}),new l.A({key:"folderId",title:`${(0,s.hw)({id:"api.comparison.basicInfo"})} / ${(0,s.hw)({id:"folder"})}`,original:u.original,modified:u.modified,pickedFieldNames:["folderId"],mask:u.mask,formatter:v.A,hideFieldNameIfSingleField:!0,view:n.A,translateRelevantData:(e,t,i)=>0===t?(0,s.hw)({id:"defaultFolder"}):u.getFolderName(+t,i)}),new l.A({key:"status",title:`${(0,s.hw)({id:"api.comparison.basicInfo"})} / ${(0,s.hw)({id:"status"})}`,original:u.original,modified:u.modified,pickedFieldNames:["status"],mask:u.mask,formatter:v.A,hideFieldNameIfSingleField:!0,view:n.A,translateRelevantData:(e,t)=>{var i;return(null==(i=d.zj[t])?void 0:i.labelLocale)?(0,s.hw)({id:d.zj[t].labelLocale}):""}}),new l.A({key:"maintainerId",title:`${(0,s.hw)({id:"api.comparison.basicInfo"})} / ${(0,s.hw)({id:"responsible"})}`,original:u.original,modified:u.modified,pickedFieldNames:["maintainerId"],mask:u.mask,formatter:v.A,hideFieldNameIfSingleField:!0,view:n.A,translateRelevantData:(e,t)=>{if(0===t)return(0,s.hw)({id:"app.settings.hasNoSetting"});let i=u.projectMemberMap[t];if(i)return`${i.nickname||i.user.name||i.user.username} (@${i.user.name})`;let a=u.teamMemberMap[t];return a?a.user.username:""}}),new l.A({key:"tags",title:`${(0,s.hw)({id:"api.comparison.basicInfo"})} / ${(0,s.hw)({id:"tags"})}`,original:u.original,modified:u.modified,pickedFieldNames:["tags"],mask:u.mask,formatter:v.A,hideFieldNameIfSingleField:!0,view:n.A}),new l.A({key:"serverId",title:`${(0,s.hw)({id:"api.comparison.basicInfo"})} / ${(0,s.hw)({id:"api.label.server"})}`,original:u.original,modified:u.modified,pickedFieldNames:["serverId"],mask:u.mask,formatter:v.A,hideFieldNameIfSingleField:!0,view:n.A,translateRelevantData:(e,t)=>{var i,a,n;if(!t)return(0,s.hw)({id:"message.inheritParent"});let l=null==(a=u.projectSetting)||null==(i=a.servers)?void 0:i.find(e=>e.id===t);return null!=(n=null==l?void 0:l.name)?n:""}}),new l.A({key:"operationId",title:`${(0,s.hw)({id:"api.comparison.basicInfo"})} / OperationId`,original:u.original,modified:u.modified,pickedFieldNames:["operationId"],mask:u.mask,formatter:v.A,hideFieldNameIfSingleField:!0,view:n.A}),new l.A({key:"sourceUrl",title:`${(0,s.hw)({id:"api.comparison.basicInfo"})} / ${(0,s.hw)({id:"api.label.sourceUrl"})}`,original:u.original,modified:u.modified,pickedFieldNames:["sourceUrl"],mask:u.mask,formatter:v.A,hideFieldNameIfSingleField:!0,view:n.A}),new l.A({key:"customEndpointFields",title:`${(0,s.hw)({id:"api.comparison.basicInfo"})} / ${(0,s.hw)({id:"api.diff.customFields"})}`,original:u.original,modified:u.modified,pickedFieldNames:["customEndpointFields"],mask:u.mask,formatter:v.A,hideFieldNameIfSingleField:!0,view:n.A,translateRelevantData:(e,t)=>{let i=u.apiFieldList.find(e=>String(e.id)===String(t));return i?i.fieldName:""}}),new l.A({key:"content",title:(0,s.hw)({id:"version.label.content"}),original:u.original,modified:u.modified,pickedFieldNames:["content"],mask:u.mask,hideFieldNameIfSingleField:!0,view:n.A})],m=(0,r.A)(p,u.original,u.modified,u.mask),m&&p.push(m),p},[e.original,e.modified,A,i,t,y,x,f.httpApi]);return(0,a.jsx)(a.Fragment,{children:j.map(e=>(0,a.jsx)(u.A.Item,{name:e.key,noStyle:!0,children:(0,a.jsx)(e.view,{title:e.title,original:e.original,modified:e.modified,pickedFieldNames:e.pickedFieldNames,mask:e.mask,formatter:e.formatter,hideFieldNameIfSingleField:e.hideFieldNameIfSingleField,translateRelevantData:e.translateRelevantData})},e.key))})}},544487:function(e,t,i){"use strict";i.d(t,{A:()=>o,i:()=>r});var a=i(526838),n=i(78731),l=i(740565);let r=["name","path","protocol","folderId","status","maintainerId","tags","serverId","operationId","sourceUrl","customEndpointFields"];class s extends n.A{formatCustomFieldObj(e){let t={};return Object.keys(e).forEach(i=>{var a,n,l;let r=null!=(l=null==(a=(n=this.options).translateRelevantData)?void 0:a.call(n,"customEndpointFields",i))?l:"";r?t[`${r} [${i}]`]=e[i]:t[i]=e[i]}),t}formatFields(e){var t,i,a,n,l,r,s,o,d,c,u,p;this.formatField("id",e.id),this.formatField("name",e.name),this.formatField("path",e.path),this.formatField("protocol",e.protocol);let m=null==(t=(i=this.options).translateRelevantData)?void 0:t.call(i,"folderId",null!=(l=e.folderId)?l:0,this.options.dataSourceType);if(this.formatField("folderId","number"==typeof e.folderId&&m?`${m} [${e.folderId}]`:e.folderId),e.status){let t=null==(r=(s=this.options).translateRelevantData)?void 0:r.call(s,"status",null!=(o=e.status)?o:"");this.formatField("status",t?`${t} [${e.status}]`:e.status)}let h=void 0===e.maintainerId?"":null==(a=(n=this.options).translateRelevantData)?void 0:a.call(n,"maintainerId",e.maintainerId);if(this.formatField("maintainerId",h?`${h} [${e.maintainerId}]`:e.maintainerId),this.formatField("tags",e.tags),e.serverId){let t=null==(d=(c=this.options).translateRelevantData)?void 0:d.call(c,"serverId",null!=(u=e.serverId)?u:""),i=e.serverId?` [${e.serverId}]`:"";this.formatField("serverId",t?`${t}${i}`:e.serverId)}this.formatField("operationId",e.operationId),this.formatField("sourceUrl",e.sourceUrl),this.formatField("content",e.content),e.customEndpointFields&&this.formatField("customEndpointFields",this.formatCustomFieldObj(null!=(p=e.customEndpointFields)?p:{}))}constructor(...e){super(...e),(0,a._)(this,"formatedFieldNames",{id:"ID [id]",name:`${(0,l.hw)({id:"name"})} [name]`,path:`${(0,l.hw)({id:"customEndpoint.uri"})} [path]`,protocol:`${(0,l.hw)({id:"customEndpoint.protocol"})} [protocol]`,folderId:`${(0,l.hw)({id:"folder"})} [folderId]`,status:`${(0,l.hw)({id:"status"})} [status]`,maintainerId:`${(0,l.hw)({id:"responsible"})} [maintainerId]`,tags:`${(0,l.hw)({id:"tags"})} [tags]`,serverId:`${(0,l.hw)({id:"api.label.server"})} [serverId]`,operationId:"operationId [operationId]",sourceUrl:`${(0,l.hw)({id:"api.label.sourceUrl"})} [sourceUrl]`,customEndpointFields:`${(0,l.hw)({id:"api.diff.customFields"})} [customFields]`,content:`${(0,l.hw)({id:"version.label.content"})} [content]`})}}let o=s},217490:function(e,t,i){"use strict";i.d(t,{A:()=>h});var a=i(838e3),n=i(53432),l=i(233025),r=i(977633),s=i(740565),o=i(140049),d=i(255529),c=i(641486),u=i(184319),p=i(684498),m=i(956376);let h=function(e){let{dataComparisonIgnoreProperties:t,dataSchemaFolderMap:i}=(0,c.useContext)(u.Kd),h=(0,o.A)((e,t)=>{var a;return(null==(a=i[null!=t?t:"ORIGINAL"][e])?void 0:a.name)||""}),v=(0,c.useMemo)(()=>{var i,a,o,d;let c,u;return d={original:null!=(i=e.original)?i:{},modified:null!=(a=e.modified)?a:{},getFolderName:h,mask:null!=(o=t.dataSchema)?o:[]},c=[new l.A({key:"name",title:`${(0,s.hw)({id:"api.comparison.basicInfo"})} / ${(0,s.hw)({id:"apiSchema.label.name"})}`,original:d.original,modified:d.modified,pickedFieldNames:["name"],defaultOpen:!0,mask:d.mask,formatter:m.A,hideFieldNameIfSingleField:!0,view:n.A}),new l.A({key:"displayName",title:`${(0,s.hw)({id:"api.comparison.basicInfo"})} / ${(0,s.hw)({id:"apiSchema.label.displayName"})}`,original:d.original,modified:d.modified,pickedFieldNames:["displayName"],defaultOpen:!0,mask:d.mask,formatter:m.A,hideFieldNameIfSingleField:!0,view:n.A}),new l.A({key:"description",title:`${(0,s.hw)({id:"api.comparison.basicInfo"})} / ${(0,s.hw)({id:"apiSchema.label.description"})}`,original:d.original,modified:d.modified,pickedFieldNames:["description"],defaultOpen:!0,mask:d.mask,formatter:m.A,hideFieldNameIfSingleField:!0,view:n.A}),new l.A({key:"folderId",title:`${(0,s.hw)({id:"api.comparison.basicInfo"})} / ${(0,s.hw)({id:"apiSchema.label.folder"})}`,original:d.original,modified:d.modified,pickedFieldNames:["folderId"],defaultOpen:!0,mask:d.mask,formatter:m.A,hideFieldNameIfSingleField:!0,view:n.A,translateRelevantData:(e,t,i)=>0===t?(0,s.hw)({id:"defaultFolder"}):d.getFolderName(+t,i)}),new l.A({key:"jsonSchema",title:(0,s.hw)({id:"apiSchema.label.jsonSchema"}),original:d.original,modified:d.modified,defaultOpen:!0,mask:d.mask,pickedFieldNames:["jsonSchema"],hideFieldNameIfSingleField:!0,view:p.A})],u=(0,r.A)(c,d.original,d.modified,d.mask),u&&c.push(u),c},[e.original,e.modified,h,t.dataSchema]);return(0,a.jsx)(a.Fragment,{children:v.map(e=>(0,a.jsx)(d.A.Item,{name:e.key,noStyle:!0,children:(0,a.jsx)(e.view,{mask:e.mask,title:e.title,original:e.original,modified:e.modified,pickedFieldNames:e.pickedFieldNames,formatter:e.formatter,hideFieldNameIfSingleField:e.hideFieldNameIfSingleField,translateRelevantData:e.translateRelevantData})},e.key))})}},956376:function(e,t,i){"use strict";i.d(t,{A:()=>o,G:()=>r});var a=i(526838),n=i(78731),l=i(740565);let r=["name","displayName","description","folderId"];class s extends n.A{formatFields(e){var t,i,a;this.formatField("name",e.name),this.formatField("displayName",e.displayName),this.formatField("description",e.description);let n=null==(t=(i=this.options).translateRelevantData)?void 0:t.call(i,"folderId",e.folderId,this.options.dataSourceType);this.formatField("folderId",n?`${n} [${null!=(a=e.folderId)?a:0}]`:e.folderId)}constructor(...e){super(...e),(0,a._)(this,"formatedFieldNames",{name:`${(0,l.hw)({id:"apiSchema.label.name"})} [name]`,displayName:`${(0,l.hw)({id:"apiSchema.label.displayName"})} [displayName]`,description:`${(0,l.hw)({id:"apiSchema.label.description"})} [description]`,folderId:`${(0,l.hw)({id:"apiSchema.label.folder"})} [folderId]`})}}let o=s},886001:function(e,t,i){"use strict";i.d(t,{A:()=>m});var a=i(838e3),n=i(53432),l=i(233025),r=i(977633),s=i(740565),o=i(140049),d=i(255529),c=i(641486),u=i(184319),p=i(218509);let m=function(e){let{dataComparisonIgnoreProperties:t,apiFolderMap:i}=(0,c.useContext)(u.Kd),m=(0,o.A)((e,t)=>{var a;return(null==(a=i[null!=t?t:"ORIGINAL"][e])?void 0:a.name)||""}),h=(0,c.useMemo)(()=>{var i,a,o,d;let c,u;return d={original:null!=(i=e.original)?i:{},modified:null!=(a=e.modified)?a:{},mask:null!=(o=t.doc)?o:[],getFolderName:m},c=[new l.A({key:"name",title:`${(0,s.hw)({id:"api.comparison.basicInfo"})} / ${(0,s.hw)({id:"name"})}`,original:d.original,modified:d.modified,pickedFieldNames:["name"],mask:d.mask,hideFieldNameIfSingleField:!0,view:n.A,formatter:p.A}),new l.A({key:"folderId",title:`${(0,s.hw)({id:"api.comparison.basicInfo"})} / ${(0,s.hw)({id:"folder"})}`,original:d.original,modified:d.modified,pickedFieldNames:["folderId"],mask:d.mask,hideFieldNameIfSingleField:!0,view:n.A,formatter:p.A,translateRelevantData:(e,t,i)=>0===t?(0,s.hw)({id:"defaultFolder"}):d.getFolderName(+t,i)}),new l.A({key:"tags",title:`${(0,s.hw)({id:"api.comparison.basicInfo"})} / ${(0,s.hw)({id:"tags"})}`,original:d.original,modified:d.modified,pickedFieldNames:["tags"],mask:d.mask,hideFieldNameIfSingleField:!0,view:n.A,formatter:p.A}),new l.A({key:"content",title:(0,s.hw)({id:"version.label.content"}),original:d.original,modified:d.modified,pickedFieldNames:["content"],mask:d.mask,hideFieldNameIfSingleField:!0,view:n.A})],u=(0,r.A)(c,d.original,d.modified,d.mask),u&&c.push(u),c},[e.original,e.modified,t.doc,m]);return(0,a.jsx)(a.Fragment,{children:h.map(e=>(0,a.jsx)(d.A.Item,{name:e.key,noStyle:!0,children:(0,a.jsx)(e.view,{mask:e.mask,title:e.title,original:e.original,modified:e.modified,pickedFieldNames:e.pickedFieldNames,formatter:e.formatter,hideFieldNameIfSingleField:e.hideFieldNameIfSingleField,translateRelevantData:e.translateRelevantData})},e.key))})}},218509:function(e,t,i){"use strict";i.d(t,{A:()=>o,x:()=>r});var a=i(526838),n=i(78731),l=i(740565);let r=["name","folderId","tags"];class s extends n.A{formatFields(e){var t,i,a;this.formatField("name",e.name);let n=null==(t=(i=this.options).translateRelevantData)?void 0:t.call(i,"folderId",e.folderId,this.options.dataSourceType);this.formatField("folderId",n?`${n} [${null!=(a=e.folderId)?a:0}]`:e.folderId)}constructor(...e){super(...e),(0,a._)(this,"formatedFieldNames",{name:`${(0,l.hw)({id:"apiSchema.label.name"})} [name]`,folderId:`${(0,l.hw)({id:"apiSchema.label.folder"})} [folderId]`,tags:`${(0,l.hw)({id:"tags"})} [tags]`})}}let o=s},310187:function(e,t,i){"use strict";i.d(t,{A:()=>m,T:()=>u});var a=i(526838),n=i(78731),l=i(740565),r=i(488335),s=i(900920),o=i(845697),d=i(507210);class c extends n.A{formatFields(e){var t;this.formatField("type",e.type),this.formatField("parameters",null==(t=e.parameters)?void 0:t.map(e=>new d.A(this.options).format(e))),this.formatField("data",e.data)}constructor(...e){super(...e),(0,a._)(this,"formatedFieldNames",{type:`${(0,l.hw)({id:"api.parameterLabel.type"})} [type]`,parameters:`${(0,l.hw)({id:"apiMock.label.params"})} [parameters]`,data:`${(0,l.hw)({id:"version.label.data"})} [data]`})}}let u=["name","path","method"];class p extends n.A{formatFields(e){this.formatField("id",e.id),this.formatField("type",e.type),this.formatField("name",e.name),this.formatField("path",e.path),this.formatField("method",e.method),e.requestBody&&this.formatField("requestBody",new c(this.options).format(e.requestBody)),e.commonParameters&&this.formatField("commonParameters",new s.A(this.options).format(e.commonParameters)),e.auth&&this.formatField("auth",new r.A(this.options).format(e.auth)),e.advancedSettings&&this.formatField("advancedSettings",new o.A(this.options).format(e.advancedSettings))}constructor(...e){super(...e),(0,a._)(this,"formatedFieldNames",{id:"ID [id]",type:`${(0,l.hw)({id:"api.auth.label.type"})} [type]`,requestBody:"Body [requestBody]",auth:"Auth [auth]",name:`${(0,l.hw)({id:"name"})} [name]`,path:`${(0,l.hw)({id:"version.label.path"})} [path]`,method:`${(0,l.hw)({id:"version.label.method"})} [method]`})}}let m=p},139411:function(e,t,i){"use strict";i.d(t,{A:()=>M});var a=i(838e3),n=i(431078),l=i(53432),r=i(761528),s=i(233025),o=i(977633),d=i(740565),c=i(689368),u=i(269966),p=i(140049),m=i(255529),h=i(641486),v=i(618487),f=i(184319),g=i(701604),y=i(270039),x=i(14941),A=i(818880),j=i(877404),b=i(584117),w=i(507210);let S="parameters",C=e=>{let t=(0,h.useMemo)(()=>{var t;return null!=(t=e.original[S])?t:{}},[e.original[S]]),i=(0,h.useMemo)(()=>{var t;return null!=(t=e.modified[S])?t:{}},[e.modified[S]]),l=(0,h.useMemo)(()=>{var a;let l,s;return a={original:t,modified:i,mask:(0,b.A)(e.mask,S)},l=[new r.A({key:"query",title:(0,d.hw)({id:"message.queryParameter"}),original:a.original,modified:a.modified,pickedFieldName:"query",mask:a.mask,itemFormatter:w.A,view:n.A}),new r.A({key:"path",title:(0,d.hw)({id:"message.pathParameter"}),original:a.original,modified:a.modified,pickedFieldName:"path",mask:a.mask,itemFormatter:w.A,view:n.A}),new r.A({key:"cookie",title:"Cookie",original:a.original,modified:a.modified,pickedFieldName:"cookie",mask:a.mask,itemFormatter:w.A,view:n.A}),new r.A({key:"header",title:"Header",original:a.original,modified:a.modified,pickedFieldName:"header",mask:a.mask,itemFormatter:w.A,view:n.A})],s=(0,o.A)(l,a.original,a.modified,a.mask),s&&l.push(s),l},[t,i]);return(0,a.jsx)(m.A,{onValuesChange:(t,i)=>{var a;let n=Object.keys(i);null==(a=e.onChange)||a.call(e,{[S]:n.reduce((e,t)=>({...e,...i[t]}),{})})},children:l.map(n=>(0,a.jsx)(m.A.Item,{name:n.key,noStyle:!0,children:(0,a.jsx)(n.view,{title:`${e.title} / ${n.title}`,original:t,modified:i,pickedFieldNames:n.pickedFieldNames,mask:n.mask,formatter:n.formatter,hideFieldNameIfSingleField:n.hideFieldNameIfSingleField,translateRelevantData:n.translateRelevantData})},n.key))})};var I=i(512495),N=i.n(I);let k="securityScheme",T=e=>{let t=(0,h.useMemo)(()=>{var t;return null!=(t=e.original[k])?t:{}},[e.original[k]]),i=(0,h.useMemo)(()=>{var t;return null!=(t=e.modified[k])?t:{}},[e.modified[k]]),n=(0,h.useMemo)(()=>{var a;let n,r;return a={original:t,modified:i,mask:(0,b.A)(e.mask,k)},n=[new s.A({key:"required",title:"Required",original:a.original,modified:a.modified,pickedFieldNames:["required"],mask:a.mask,hideFieldNameIfSingleField:!0,view:l.A}),new s.A({key:"schemeGroups",title:"Scheme Groups",original:a.original,modified:a.modified,pickedFieldNames:["schemeGroups"],mask:a.mask,hideFieldNameIfSingleField:!0,view:l.A}),new s.A({key:"use",title:"Use",original:a.original,modified:a.modified,pickedFieldNames:["use"],mask:a.mask,hideFieldNameIfSingleField:!0,view:l.A}),new s.A({key:"useOverride",title:"Use Override",original:a.original,modified:a.modified,pickedFieldNames:["useOverride"],mask:a.mask,hideFieldNameIfSingleField:!0,view:l.A})],r=(0,o.A)(n,a.original,a.modified,a.mask),r&&n.push(r),n},[t,i]);return(0,a.jsx)(m.A,{onValuesChange:(i,a)=>{var n;let l=Object.keys(a),r={[k]:N()(t,l.reduce((e,t)=>({...e,...a[t]}),{}))};null==(n=e.onChange)||n.call(e,r)},children:n.map(n=>(0,a.jsx)(m.A.Item,{name:n.key,noStyle:!0,children:(0,a.jsx)(n.view,{title:`${e.title} / ${n.title}`,original:t,modified:i,pickedFieldNames:n.pickedFieldNames,mask:n.mask,formatter:n.formatter,hideFieldNameIfSingleField:n.hideFieldNameIfSingleField,translateRelevantData:n.translateRelevantData})},n.key))})},M=function(e){let t=(0,c.Ay)(e=>{let{teamMember:t}=e;return t.teamMemberList.reduce((e,t)=>(e[t.userId]=t,e),{})}),{projectMemberMap:i,dataComparisonIgnoreProperties:b,apiFolderMap:w,responseComponentMap:S}=(0,h.useContext)(f.Kd),I=(0,v.useModel)("projectCustomApiField",e=>{let{data:t}=e;return t}),N=(0,c.Ay)(e=>{let{settings:t}=e;return t.projectSettingData}),k=(0,p.A)((e,t)=>{var i;return(null==(i=w[null!=t?t:"ORIGINAL"][e])?void 0:i.name)||""}),M=(0,p.A)((e,t)=>{var i;return(null==(i=S[null!=t?t:"ORIGINAL"][e])?void 0:i.name)||""}),E=(0,h.useMemo)(()=>{var a,c,p,m;let h,v;return m={original:null!=(a=e.original)?a:{},modified:null!=(c=e.modified)?c:{},getFolderName:k,projectMemberMap:i,teamMemberMap:t,apiFieldList:I,projectSetting:N,mask:null!=(p=b.httpApi)?p:[],getResponseComponentName:M},h=[new s.A({key:"name",title:`${(0,d.hw)({id:"api.comparison.basicInfo"})} / ${(0,d.hw)({id:"name"})}`,original:m.original,modified:m.modified,pickedFieldNames:["name"],mask:m.mask,formatter:x.A,hideFieldNameIfSingleField:!0,view:l.A}),new s.A({key:"path",title:`${(0,d.hw)({id:"api.comparison.basicInfo"})} / ${(0,d.hw)({id:"version.label.path"})}`,original:m.original,modified:m.modified,pickedFieldNames:["path"],mask:m.mask,formatter:x.A,hideFieldNameIfSingleField:!0,view:l.A}),new s.A({key:"method",title:`${(0,d.hw)({id:"api.comparison.basicInfo"})} / ${(0,d.hw)({id:"version.label.method"})}`,original:m.original,modified:m.modified,pickedFieldNames:["method"],mask:m.mask,formatter:x.A,hideFieldNameIfSingleField:!0,view:l.A}),new s.A({key:"folderId",title:`${(0,d.hw)({id:"api.comparison.basicInfo"})} / ${(0,d.hw)({id:"folder"})}`,original:m.original,modified:m.modified,pickedFieldNames:["folderId"],mask:m.mask,formatter:x.A,hideFieldNameIfSingleField:!0,view:l.A,translateRelevantData:(e,t,i)=>0===t?(0,d.hw)({id:"defaultFolder"}):m.getFolderName(+t,i)}),new s.A({key:"status",title:`${(0,d.hw)({id:"api.comparison.basicInfo"})} / ${(0,d.hw)({id:"status"})}`,original:m.original,modified:m.modified,pickedFieldNames:["status"],mask:m.mask,formatter:x.A,hideFieldNameIfSingleField:!0,view:l.A,translateRelevantData:(e,t)=>{var i;return(null==(i=u.zj[t])?void 0:i.labelLocale)?(0,d.hw)({id:u.zj[t].labelLocale}):""}}),new s.A({key:"responsibleId",title:`${(0,d.hw)({id:"api.comparison.basicInfo"})} / ${(0,d.hw)({id:"responsible"})}`,original:m.original,modified:m.modified,pickedFieldNames:["responsibleId"],mask:m.mask,formatter:x.A,hideFieldNameIfSingleField:!0,view:l.A,translateRelevantData:(e,t)=>{if(0===t)return(0,d.hw)({id:"app.settings.hasNoSetting"});let i=m.projectMemberMap[t];if(i)return`${i.nickname||i.user.name||i.user.username} (@${i.user.name})`;let a=m.teamMemberMap[t];return a?a.user.username:""}}),new s.A({key:"tags",title:`${(0,d.hw)({id:"api.comparison.basicInfo"})} / ${(0,d.hw)({id:"tags"})}`,original:m.original,modified:m.modified,pickedFieldNames:["tags"],mask:m.mask,formatter:x.A,hideFieldNameIfSingleField:!0,view:l.A}),new s.A({key:"serverId",title:`${(0,d.hw)({id:"api.comparison.basicInfo"})} / ${(0,d.hw)({id:"api.label.server"})}`,original:m.original,modified:m.modified,pickedFieldNames:["serverId"],mask:m.mask,formatter:x.A,hideFieldNameIfSingleField:!0,view:l.A,translateRelevantData:(e,t)=>{var i,a,n;if(!t)return(0,d.hw)({id:"message.inheritParent"});let l=null==(a=m.projectSetting)||null==(i=a.servers)?void 0:i.find(e=>e.id===t);return null!=(n=null==l?void 0:l.name)?n:""}}),new s.A({key:"description",title:`${(0,d.hw)({id:"api.comparison.basicInfo"})} / ${(0,d.hw)({id:"api.label.description"})}`,original:m.original,modified:m.modified,pickedFieldNames:["description"],mask:m.mask,formatter:x.A,hideFieldNameIfSingleField:!0,view:l.A}),new s.A({key:"operationId",title:`${(0,d.hw)({id:"api.comparison.basicInfo"})} / OperationId`,original:m.original,modified:m.modified,pickedFieldNames:["operationId"],mask:m.mask,formatter:x.A,hideFieldNameIfSingleField:!0,view:l.A}),new s.A({key:"sourceUrl",title:`${(0,d.hw)({id:"api.comparison.basicInfo"})} / ${(0,d.hw)({id:"api.label.sourceUrl"})}`,original:m.original,modified:m.modified,pickedFieldNames:["sourceUrl"],mask:m.mask,formatter:x.A,hideFieldNameIfSingleField:!0,view:l.A}),new s.A({key:"customApiFields",title:`${(0,d.hw)({id:"api.comparison.basicInfo"})} / ${(0,d.hw)({id:"api.diff.customFields"})}`,original:m.original,modified:m.modified,pickedFieldNames:["customApiFields"],mask:m.mask,formatter:x.A,hideFieldNameIfSingleField:!0,view:l.A,translateRelevantData:(e,t)=>{let i=m.apiFieldList.find(e=>String(e.id)===String(t));return i?i.fieldName:""}}),new s.A({key:"request params",title:(0,d.hw)({id:"api.label.parameters"}),original:m.original,modified:m.modified,view:C,pickedFieldNames:["parameters"],mask:m.mask}),new s.A({key:"request body",title:`${(0,d.hw)({id:"api.label.parameters"})} / Body`,original:m.original,modified:m.modified,pickedFieldNames:["requestBody"],mask:m.mask,formatter:x.A,hideFieldNameIfSingleField:!0,view:l.A}),new s.A({key:"request auth",title:`${(0,d.hw)({id:"api.label.parameters"})} / Auth`,original:m.original,modified:m.modified,pickedFieldNames:["auth"],mask:m.mask,formatter:x.A,hideFieldNameIfSingleField:!0,view:l.A}),new s.A({key:"security scheme",title:(0,d.hw)({id:"component.securityScheme.name"}),original:m.original,modified:m.modified,view:T,pickedFieldNames:["securityScheme"],mask:m.mask}),new s.A({key:"advanced settings",title:`${(0,d.hw)({id:"api.label.parameters"})} / ${(0,d.hw)({id:"setting"})}`,original:m.original,modified:m.modified,pickedFieldNames:["advancedSettings"],mask:m.mask,formatter:x.A,hideFieldNameIfSingleField:!0,view:l.A,translateRelevantData:(e,t)=>{if("isDefaultUrlEncoding"===e)switch(t){case 1:return(0,d.hw)({id:"projectSetting.advancedSetting.inherit"});case 2:return(0,d.hw)({id:"projectSetting.advancedSetting.encodeOptions.RFC3986"});case 3:return(0,d.hw)({id:"projectSetting.advancedSetting.encodeOptions.WHATWG"});case 0:return(0,d.hw)({id:"projectSetting.advancedSetting.encodeOptions.OFF"})}return""}}),new s.A({key:"common parameters",title:(0,d.hw)({id:"parameter.globals"}),original:m.original,modified:m.modified,pickedFieldNames:["commonParameters"],mask:m.mask,formatter:x.A,hideFieldNameIfSingleField:!0,view:l.A}),new s.A({key:"common response status",title:(0,d.hw)({id:"component.response.title"}),original:m.original,modified:m.modified,pickedFieldNames:["commonResponseStatus"],mask:m.mask,formatter:y.A,hideFieldNameIfSingleField:!0,view:l.A,translateRelevantData:(e,t,i)=>m.getResponseComponentName(+t,i)}),new r.A({key:"responses",title:(0,d.hw)({id:"httpRequestResult.response"}),original:m.original,modified:m.modified,pickedFieldName:"responses",view:n.A,mask:m.mask,itemFormatter:j.A}),new r.A({key:"response examples",title:(0,d.hw)({id:"api.label.responseExamples"}),original:m.original,modified:m.modified,pickedFieldName:"responseExamples",view:n.A,mask:m.mask,itemFormatter:A.A}),new r.A({key:"code samples",title:(0,d.hw)({id:"projectSettings.advancedSetting.sampleCode.title"}),original:m.original,modified:m.modified,pickedFieldName:"codeSamples",view:n.A,mask:m.mask,itemFormatter:g.A}),new s.A({title:(0,d.hw)({id:"api.management.preProcessor"}),key:"preProcessors",original:m.original,modified:m.modified,pickedFieldNames:["preProcessors","inheritPreProcessors"],view:l.A,formatter:x.A,mask:m.mask}),new s.A({key:"postProcessors",title:(0,d.hw)({id:"api.management.postProcessor"}),original:m.original,modified:m.modified,pickedFieldNames:["postProcessors","inheritPostProcessors"],formatter:x.A,view:l.A,mask:m.mask})],v=(0,o.A)(h,m.original,m.modified,m.mask),v&&h.push(v),h},[e.original,e.modified,k,i,t,I,N,b.httpApi,M]);return(0,a.jsx)(a.Fragment,{children:E.map(e=>(0,a.jsx)(m.A.Item,{name:e.key,noStyle:!0,children:(0,a.jsx)(e.view,{title:e.title,original:e.original,modified:e.modified,pickedFieldNames:e.pickedFieldNames,mask:e.mask,formatter:e.formatter,hideFieldNameIfSingleField:e.hideFieldNameIfSingleField,translateRelevantData:e.translateRelevantData})},e.key))})}},701604:function(e,t,i){"use strict";i.d(t,{A:()=>s});var a=i(526838),n=i(78731),l=i(740565);class r extends n.A{formatFields(e){this.formatField("id",e.id),this.formatField("name",e.name),this.formatField("language",e.language),this.formatField("prompt",e.prompt),this.formatField("code",e.code),this.formatField("ordering",e.ordering)}constructor(...e){super(...e),(0,a._)(this,"formatedFieldNames",{id:"ID [id]",name:`${(0,l.hw)({id:"sampleRequestCode.label.name"})} [name]`,language:`${(0,l.hw)({id:"sampleRequestCode.label.language"})} [language]`,prompt:`${(0,l.hw)({id:"sampleRequestCode.label.prompt"})} [description]`,code:`${(0,l.hw)({id:"projectSettings.advancedSetting.sampleCode.title"})} [code]`,ordering:`${(0,l.hw)({id:"ordering"})} [ordering]`})}}let s=r},900920:function(e,t,i){"use strict";i.d(t,{A:()=>o});var a=i(526838),n=i(78731),l=i(740565);class r extends n.A{formatFields(e){this.formatField("name",e.name),this.formatField("enable",e.enable)}constructor(...e){super(...e),(0,a._)(this,"formatedFieldNames",{name:`${(0,l.hw)({id:"api.parameterLabel.name"})} [name]`,enable:`${(0,l.hw)({id:"settings.on"})} [enable]`})}}class s extends n.A{formatFields(e){var t,i,a,n;this.formatField("header",null==e||null==(t=e.header)?void 0:t.map(e=>new r(this.options).format(e))),this.formatField("cookie",null==e||null==(i=e.cookie)?void 0:i.map(e=>new r(this.options).format(e))),this.formatField("query",null==e||null==(a=e.query)?void 0:a.map(e=>new r(this.options).format(e))),this.formatField("body",null==e||null==(n=e.body)?void 0:n.map(e=>new r(this.options).format(e)))}constructor(...e){super(...e),(0,a._)(this,"formatedFieldNames",{header:"Header [header]",cookie:"Cookie [cookie]",query:`${(0,l.hw)({id:"message.queryParameter"})} [query]`,body:"Body [body]"})}}let o=s},270039:function(e,t,i){"use strict";i.d(t,{A:()=>r});var a=i(526838),n=i(78731);class l extends n.A{formatCustomFieldObj(e){let t={};return Object.keys(e).forEach(i=>{var a,n,l;let r=null!=(l=null==(a=(n=this.options).translateRelevantData)?void 0:a.call(n,"",i))?l:"";r?t[`${r} [${i}]`]=e[i]:t[i]=e[i]}),t}formatFields(e){e.commonResponseStatus&&this.formatField("commonResponseStatus",this.formatCustomFieldObj(e.commonResponseStatus))}constructor(...e){super(...e),(0,a._)(this,"formatedFieldNames",{commonResponseStatus:"commonResponseStatus"})}}let r=l},14941:function(e,t,i){"use strict";i.d(t,{A:()=>m,e:()=>u});var a=i(526838),n=i(78731),l=i(740565),r=i(488335),s=i(900920),o=i(507210);class d extends n.A{formatFields(e){var t;this.formatField("type",e.type),this.formatField("parameters",null==(t=e.parameters)?void 0:t.map(e=>new o.A(this.options).format(e))),this.formatField("jsonSchema",e.jsonSchema),this.formatField("data",e.data),this.formatField("description",e.description),this.formatField("sampleValue",e.sampleValue),this.formatField("example",e.example),this.formatField("examples",e.examples),this.formatField("oasExtensions",e.oasExtensions)}constructor(...e){super(...e),(0,a._)(this,"formatedFieldNames",{type:`${(0,l.hw)({id:"api.parameterLabel.type"})} [type]`,parameters:`${(0,l.hw)({id:"apiMock.label.params"})} [parameters]`,jsonSchema:`${(0,l.hw)({id:"api.label.dataSchema"})} [jsonSchema]`,data:`${(0,l.hw)({id:"version.label.data"})} [data]`,description:`${(0,l.hw)({id:"api.label.description"})} [description]`,sampleValue:`${(0,l.hw)({id:"api.parameterLabel.sampleValue"})} [sampleValue]`,example:`${(0,l.hw)({id:"api.parameterLabel.sampleValue"})} [example]`,examples:`${(0,l.hw)({id:"api.parameterLabel.examples"})} [examples]`,oasExtensions:`${(0,l.hw)({id:"responseExample.label.oasExtensions"})} [oasExtensions]`})}}var c=i(845697);let u=["name","path","method","folderId","status","responsibleId","tags","serverId","description","operationId","sourceUrl","customApiFields"];class p extends n.A{formatCustomFieldObj(e){let t={};return Object.keys(e).forEach(i=>{var a,n,l;let r=null!=(l=null==(a=(n=this.options).translateRelevantData)?void 0:a.call(n,"customApiFields",i))?l:"";r?t[`${r} [${i}]`]=e[i]:t[i]=e[i]}),t}formatFields(e){var t,i,a,n,l,o,u,p,m,h,v,f;this.formatField("id",e.id),this.formatField("type",e.type),this.formatField("name",e.name),this.formatField("path",e.path),this.formatField("method",e.method);let g=null==(t=(i=this.options).translateRelevantData)?void 0:t.call(i,"folderId",null!=(l=e.folderId)?l:0,this.options.dataSourceType);if(this.formatField("folderId","number"==typeof e.folderId&&g?`${g} [${e.folderId}]`:e.folderId),e.status){let t=null==(o=(u=this.options).translateRelevantData)?void 0:o.call(u,"status",null!=(p=e.status)?p:"");this.formatField("status",t?`${t} [${e.status}]`:e.status)}let y=void 0===e.responsibleId?"":null==(a=(n=this.options).translateRelevantData)?void 0:a.call(n,"responsibleId",e.responsibleId);if(this.formatField("responsibleId",y?`${y} [${e.responsibleId}]`:e.responsibleId),this.formatField("tags",e.tags),e.serverId){let t=null==(m=(h=this.options).translateRelevantData)?void 0:m.call(h,"serverId",null!=(v=e.serverId)?v:""),i=e.serverId?` [${e.serverId}]`:"";this.formatField("serverId",t?`${t}${i}`:e.serverId)}this.formatField("description",e.description),this.formatField("operationId",e.operationId),this.formatField("sourceUrl",e.sourceUrl),e.customApiFields&&this.formatField("customApiFields",this.formatCustomFieldObj(null!=(f=e.customApiFields)?f:{})),e.requestBody&&this.formatField("requestBody",new d(this.options).format(e.requestBody)),e.commonParameters&&this.formatField("commonParameters",new s.A(this.options).format(e.commonParameters)),e.auth&&this.formatField("auth",new r.A(this.options).format(e.auth)),e.advancedSettings&&this.formatField("advancedSettings",new c.A(this.options).format(e.advancedSettings))}constructor(...e){super(...e),(0,a._)(this,"formatedFieldNames",{id:"ID [id]",type:`${(0,l.hw)({id:"api.auth.label.type"})} [type]`,requestBody:"Body [requestBody]",auth:"Auth [auth]",name:`${(0,l.hw)({id:"name"})} [name]`,path:`${(0,l.hw)({id:"version.label.path"})} [path]`,method:`${(0,l.hw)({id:"version.label.method"})} [method]`,folderId:`${(0,l.hw)({id:"folder"})} [folderId]`,status:`${(0,l.hw)({id:"status"})} [status]`,responsibleId:`${(0,l.hw)({id:"responsible"})} [responsibleId]`,tags:`${(0,l.hw)({id:"tags"})} [tags]`,serverId:`${(0,l.hw)({id:"api.label.server"})} [serverId]`,operationId:"operationId [operationId]",sourceUrl:`${(0,l.hw)({id:"api.label.sourceUrl"})} [sourceUrl]`,customApiFields:`${(0,l.hw)({id:"api.diff.customFields"})} [customFields]`,description:`${(0,l.hw)({id:"api.label.description"})} [description]`})}}let m=p},507210:function(e,t,i){"use strict";i.d(t,{A:()=>s});var a=i(526838),n=i(78731),l=i(740565);class r extends n.A{formatFields(e){this.formatField("name",e.name),this.formatField("type",e.type),this.formatField("description",e.description),this.formatField("required",e.required),this.formatField("example",e.example),this.formatField("fixedValue",e.fixedValue)}constructor(...e){super(...e),(0,a._)(this,"formatedFieldNames",{name:`${(0,l.hw)({id:"api.parameterLabel.name"})} [name]`,type:`${(0,l.hw)({id:"api.parameterLabel.type"})} [type]`,description:`${(0,l.hw)({id:"api.parameterLabel.description"})} [description]`,required:`${(0,l.hw)({id:"api.parameterLabel.required"})} [required]`,example:`${(0,l.hw)({id:"api.parameterLabel.sampleValue"})} [example]`,fixedValue:`${(0,l.hw)({id:"api.parameterLabel.fixedValue"})} [fixedValue]`,defaultEnable:`${(0,l.hw)({id:"response.label.defaultEnable"})} [defaultEnable]`,isModify:"isModify"})}}let s=r},845697:function(e,t,i){"use strict";i.d(t,{A:()=>s});var a=i(526838),n=i(78731),l=i(740565);class r extends n.A{formatIsDefaultUrlEncodingValue(e){var t,i;if(void 0===e)return;let a=null==(t=(i=this.options).translateRelevantData)?void 0:t.call(i,"isDefaultUrlEncoding",e);return a?`${a} [${e}]`:""}formatFields(e){this.formatField("SSLValidate",e.SSLValidate),this.formatField("followRedirects",e.followRedirects),this.formatField("isDefaultUrlEncoding",this.formatIsDefaultUrlEncodingValue(e.isDefaultUrlEncoding))}constructor(...e){super(...e),(0,a._)(this,"formatedFieldNames",{SSLValidate:`${(0,l.hw)({id:"app.setting.menu.general.request.sslValidate"})} [SSLValidate]`,followRedirects:`${(0,l.hw)({id:"app.setting.menu.general.headers.followRedirects"})} [followRedirects]`,isDefaultUrlEncoding:`${(0,l.hw)({id:"app.setting.menu.general.protocolProfileBehavior.autoEncodeUrl"})} [isDefaultUrlEncoding]`})}}let s=r},818880:function(e,t,i){"use strict";i.d(t,{A:()=>s});var a=i(526838),n=i(78731),l=i(740565);class r extends n.A{formatFields(e){this.formatField("id",e.id),this.formatField("name",e.name),this.formatField("data",e.data),this.formatField("responseId",e.responseId),this.formatField("ordering",e.ordering),this.formatField("description",e.description),this.formatField("oasKey",e.oasKey),this.formatField("oasExtensions",e.oasExtensions)}constructor(...e){super(...e),(0,a._)(this,"formatedFieldNames",{id:"ID [id]",name:`${(0,l.hw)({id:"responseExample.label.name"})} [name]`,data:`${(0,l.hw)({id:"responseExample.label.data"})} [data]`,responseId:"responseId",ordering:`${(0,l.hw)({id:"ordering"})} [ordering]`,description:`${(0,l.hw)({id:"description"})} [description]`,oasKey:`${(0,l.hw)({id:"responseExample.label.oasKey"})} [oasKey]`,oasExtensions:`${(0,l.hw)({id:"responseExample.label.oasExtensions"})} [oasExtensions]`})}}let s=r},877404:function(e,t,i){"use strict";i.d(t,{A:()=>o});var a=i(526838),n=i(78731),l=i(740565),r=i(507210);class s extends n.A{formatFields(e){var t;this.formatField("id",e.id),this.formatField("name",e.name),this.formatField("code",e.code),this.formatField("jsonSchema",e.jsonSchema),this.formatField("itemSchema",e.itemSchema),this.formatField("contentType",e.contentType),this.formatField("schemaDefinitions",e.schemaDefinitions),this.formatField("defaultEnable",e.defaultEnable),this.formatField("ordering",e.ordering),this.formatField("mediaType",e.mediaType),this.formatField("headers",null==(t=e.headers)?void 0:t.map(e=>new r.A(this.options).format(e))),this.formatField("description",e.description),this.formatField("oasExtensions",e.oasExtensions),this.formatField("callbacks",e.callbacks)}constructor(...e){super(...e),(0,a._)(this,"formatedFieldNames",{id:"ID [id]",name:`${(0,l.hw)({id:"response.label.name"})} [name]`,code:`${(0,l.hw)({id:"response.label.code"})} [code]`,jsonSchema:`${(0,l.hw)({id:"response.label.jsonSchema"})} [jsonSchema]`,itemSchema:`${(0,l.hw)({id:"response.label.jsonSchema"})} [itemSchema]`,contentType:`${(0,l.hw)({id:"response.label.contentType"})} [contentType]`,schemaDefinitions:`${(0,l.hw)({id:"dataSchemas"})} [schemaDefinitions]`,defaultEnable:`${(0,l.hw)({id:"response.label.defaultEnable"})} [defaultEnable]`,ordering:`${(0,l.hw)({id:"ordering"})} [ordering]`,headers:`${(0,l.hw)({id:"response.label.headers"})} [headers]`,mediaType:`${(0,l.hw)({id:"response.label.mediaType"})} [mediaType]`,description:`${(0,l.hw)({id:"response.label.description"})} [description]`,oasExtensions:`${(0,l.hw)({id:"responseExample.label.oasExtensions"})} [oasExtensions]`})}}let o=s},893180:function(e,t,i){"use strict";i.d(t,{A:()=>o,m:()=>r});var a=i(526838),n=i(78731),l=i(740565);let r=["name","code","contentType","defaultEnable","folderId"];class s extends n.A{formatFields(e){var t,i,a;this.formatField("name",e.name),this.formatField("code",e.code),this.formatField("contentType",e.contentType),this.formatField("defaultEnable",e.defaultEnable);let n=null==(t=(i=this.options).translateRelevantData)?void 0:t.call(i,"folderId",e.folderId,this.options.dataSourceType);this.formatField("folderId",n?`${n} [${null!=(a=e.folderId)?a:0}]`:e.folderId)}constructor(...e){super(...e),(0,a._)(this,"formatedFieldNames",{name:`${(0,l.hw)({id:"response.label.name"})} [name]`,code:`${(0,l.hw)({id:"response.label.code"})} [code]`,contentType:`${(0,l.hw)({id:"response.label.contentType"})} [contentType]`,defaultEnable:`${(0,l.hw)({id:"response.label.defaultEnable"})} [defaultEnable]`,folderId:`${(0,l.hw)({id:"apiSchema.label.folder"})} [folderId]`})}}let o=s},672547:function(e,t,i){"use strict";i.d(t,{A:()=>s});var a=i(526838),n=i(78731),l=i(748537);class r extends n.A{formatFields(e){let t=l.u3[e.authType];this.formatField("authType",t?`${t} [${e.authType}]`:e.authType)}constructor(...e){super(...e),(0,a._)(this,"formatedFieldNames",{})}}let s=r},584117:function(e,t,i){"use strict";function a(e,t){return e&&t?e.reduce((e,i)=>{if(i.startsWith(t)){let t=i.indexOf("."),a="";-1!==t&&(a=i.substr(t+1)),a&&e.push(a)}return e},[]):e}i.d(t,{A:()=>a})},977633:function(e,t,i){"use strict";i.d(t,{A:()=>o,_:()=>d});var a=i(740565),n=i(292137),l=i(694931),r=i(53432),s=i(233025);function o(e,t,i,n){let l=e.reduce((e,t)=>[...e,...t.pickedFieldNames],[]),o=Object.keys(t||{}),d=Array.from(new Set([...o,...Object.keys(i||{})])).filter(e=>!l.includes(e));return d.length?new s.A({key:"remaining",title:(0,a.hw)({id:"apiTestCase.title.other"}),original:t,modified:i,mask:n,pickedFieldNames:d,view:r.A}):null}function d(e,t,i){let r=e.reduce((e,t)=>[...e,...t.pickedFieldNames],[]),s=Object.keys(t||{}).filter(e=>!r.includes(e));return s.length?new l.A({key:"remaining",title:(0,a.hw)({id:"apiTestCase.title.other"}),value:t,mask:i,pickedFieldNames:s,view:n.A}):null}},641930:function(e,t,i){"use strict";i.d(t,{Ay:()=>p,Sr:()=>c,U8:()=>d,r5:()=>o});var a,n=i(866146),l=i(140049),r=i(272164),s=i(641486),o=((a={})[a.Modified=0]="Modified",a[a.Original=1]="Original",a[a.Mixed=2]="Mixed",a);let d=0,c={hasDifference:!1,selectedVersion:0,setSelectedVersion:()=>{},reCalcHeaderSelectedVersion:()=>{},useVersionCtrl:()=>{},defaultVersionTag:0};function u(e){return 0===Object.keys(e).length}let p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,[t,i]=(0,n.A)(!1),[a,o]=(0,s.useState)(e),c=(0,s.useRef)({}),p=(0,s.useCallback)(e=>{c.current[e.id]=e;let t=u(c.current);i(e=>!t&&!e||e)},[]),m=(0,s.useCallback)(e=>{delete c.current[e.id];let t=u(c.current);i(e=>(!t||!e)&&e)},[]),h=(0,l.A)((e,t)=>{(0,s.useEffect)(()=>e?(p(t),()=>{m(t)}):()=>{},[e])}),{run:v}=(0,r.A)(()=>{let e=Object.keys(c.current).map(e=>c.current[e].getSelectedVersion()),t=e.every(e=>1===e),i=e.every(e=>0===e);t?o(1):i?o(0):o(2)},{wait:30});return{hasDifference:t,selectedVersion:a,reCalcHeaderSelectedVersion:v,useVersionCtrl:h,defaultVersionTag:e,setSelectedVersion:e=>{Object.keys(c.current).forEach(t=>{c.current[t].select(e)})}}}},171882:function(e,t,i){"use strict";i.d(t,{A:()=>u,d:()=>p});var a=i(641486),n=i(184319),l=i(453407);function r(e){let t=(0,l.stringify)(e,{indent:4}).replace(/\n$/,"");return["{}","[]","null","undefined",'""'].includes(t)?"":t}var s=i(398380);let o=/^\[(\d*)\]$/;function d(e,t){if(!(0,s.isPlainObject)(e)&&!Array.isArray(e))return e;let i=[],a={};return function(e,t,i){e.forEach(e=>{let a=e.replace(/\.?\[/g,(e,t)=>0===t?e:".["),n=a.indexOf(".");if(-1===n)return void t.push(a);let l=a.slice(0,n),r=a.slice(n+1);if(""===r){t.push(l),delete i[l];return}t.includes(l)||(Array.isArray(i[l])||(i[l]=[]),i[l].push(r))})}(t,i,a),function(e,t){t.forEach(t=>{let i=t.match(o);i&&Array.isArray(e)?e.splice(parseInt(i[1],10),""!==i[1]?1:e.length):delete e[t]})}(e,i),function(e,t){let i=Object.keys(t);for(let a=0;a<i.length;a+=1){let n=i[a],l=n.match(o);l?Array.isArray(e)&&(""===l[1]?e.forEach(e=>d(e,t[n])):d(e[l[1]],t[n])):d(e[n],t[n])}}(e,a),e}function c(e){return(0,a.useMemo)(()=>{var t,i;if(!e.data)return null;let a=e.formatter,n=a?new a({enableFieldNameDescription:e.enableFieldNameDescription,translateRelevantData:e.translateRelevantData,dataSourceType:e.dataSourceType}):null,l=d((0,s.cloneDeep)(e.data),null!=(t=e.mask)?t:[]),r=Object.keys(l=n?n.format(l):l);return 1===r.length&&e.hideFieldNameIfSingleField?null!=(i=l[r[0]])?i:null:l},[e.data,e.formatter,e.enableFieldNameDescription,e.translateRelevantData,e.dataSourceType,e.mask,e.hideFieldNameIfSingleField])}function u(e){let t=(0,a.useContext)(n.Kd),i=c({data:e.original,formatter:e.formatter,dataSourceType:"BRANCH"===t.comparisonType?"ORIGINAL":void 0,enableFieldNameDescription:t.enableFieldNameDescription,hideFieldNameIfSingleField:e.hideFieldNameIfSingleField,translateRelevantData:e.translateRelevantData,mask:e.mask}),l=c({data:e.modified,formatter:e.formatter,dataSourceType:"BRANCH"===t.comparisonType?"MODIFIED":void 0,enableFieldNameDescription:t.enableFieldNameDescription,hideFieldNameIfSingleField:e.hideFieldNameIfSingleField,translateRelevantData:e.translateRelevantData,mask:e.mask}),s=(0,a.useMemo)(()=>r(i),[i]),o=(0,a.useMemo)(()=>r(l),[l]),d=(0,a.useMemo)(()=>s!==o,[o,s]);return{originalYaml:s,modifiedYaml:o,hasDifference:d}}function p(e){let t=(0,a.useContext)(n.Kd),i=c({data:e.value,formatter:e.formatter,dataSourceType:"BRANCH"===t.comparisonType?"ORIGINAL":void 0,enableFieldNameDescription:t.enableFieldNameDescription,hideFieldNameIfSingleField:e.hideFieldNameIfSingleField,translateRelevantData:e.translateRelevantData,mask:e.mask});return(0,a.useMemo)(()=>r(i),[i])}},117464:function(e,t,i){"use strict";i.d(t,{A:()=>d});var a=i(838e3),n=i(740565),l=i(371488),r=i(641486),s=i.n(r);let o="description-aS3bev",d=s().memo(e=>(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full w-full",children:[(0,a.jsx)(l.$,{width:120,height:120}),(0,a.jsx)("div",{className:o,children:e.description||(0,a.jsx)(n.sA,{id:"apiTestCase.noData"})})]}))},600508:function(e,t,i){"use strict";i.d(t,{nc:()=>m,Nn:()=>p,QC:()=>c,aq:()=>h,hW:()=>f,sW:()=>v,lf:()=>u,eK:()=>d});var a=i(838e3),n=i(740565),l=i(554692),r=i(641486);let s="disabled-tooltip-fZwHBv",o=[{value:"string",label:"string"},{value:"integer",label:"integer"},{value:"boolean",label:"boolean"},{value:"number",label:"number"},{value:"file",label:"file"},{value:"array",label:"array"}],d=[...o.filter(e=>{let{value:t}=e;return["number","string","boolean","integer","array"].includes(t)}),{value:"file",disabled:!0,label:(0,a.jsx)(g,{tooltipTitle:(0,a.jsx)(n.n3,{id:"api.parameterLabel.file.query.disabled.tip"})})}],c=o.filter(e=>{let{value:t}=e;return["number","string","boolean","integer","array"].includes(t)}),u=o.filter(e=>{let{value:t}=e;return["number","string","boolean","integer","array"].includes(t)}),p=o.filter(e=>{let{value:t}=e;return["number","string","boolean","integer"].includes(t)}),m=o.filter(e=>{let{value:t}=e;return["string"].includes(t)}),h=o.filter(e=>{let{value:t}=e;return["number","string","boolean","integer","array","file"].includes(t)}),v=[...o.filter(e=>{let{value:t}=e;return["number","boolean","string","integer"].includes(t)}),{value:"file",disabled:!0,label:(0,a.jsx)(g,{})}],f=[...o.filter(e=>{let{value:t}=e;return["number","string","boolean","integer","array"].includes(t)}),{value:"file",disabled:!0,label:(0,a.jsx)(g,{})}];function g(e){let{tooltipTitle:t=(0,a.jsx)(n.n3,{id:"api.parameterLabel.file.disabled.tip"})}=e,[i,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)(null),u=(0,r.useMemo)(()=>{let e=d;if(e)for(;!((null==(e=null==e?void 0:e.parentElement)?void 0:e.classList.contains("ui-select-item"))&&(null==e?void 0:e.classList.contains("ui-select-item-option")));){;if((null==e?void 0:e.tagName.toLowerCase())==="html"){e=null;break}}return e},[d]);return(0,r.useEffect)(()=>{let e=()=>{u&&o(!0)},t=()=>{u&&o(!1)};return null==u||u.addEventListener("mouseenter",e),null==u||u.addEventListener("mouseleave",t),()=>{null==u||u.removeEventListener("mouseenter",e),null==u||u.removeEventListener("mouseleave",t)}},[u]),(0,a.jsx)(l.A,{title:t,placement:"left",open:i,align:{offset:[-12,0]},overlayClassName:s,children:(0,a.jsx)("div",{className:"w-full",ref:c,children:"file"})})}},760912:function(e,t,i){"use strict";i.d(t,{Zt:()=>$,Ab:()=>L,Ay:()=>B});var a=i(838e3),n=i(169508),l=i(740565),r=i(502890),s=i(387752),o=i(201679),d=i(988374),c=i(842765),u=i(689368),p=i(159747),m=i(471504),h=i(140049),v=i(751455),f=i(838487),g=i.n(f),y=i(743190),x=i(554692),A=i(458184),j=i(138249),b=i(671466),w=i(398380),S=i(641486),C=i(618487),I=i(170746),N=i(81264);let k="environment__select__item-w4sa_v",T="dropdown-xjhpJp",M="highlight-aCxHm5",E="tooltipButton-alrnGC",_="tooltipLink-AYT1dj";var F=i(590863),D=i(754594),R=i(876898),O=i(179574),P=i(325475);function L(e){let{name:t,type:i,tags:n,className:l}=e,r=(0,D.a)({name:t,type:i,tags:n});return(0,a.jsxs)("div",{className:g()("flex-shrink truncate",l),children:[(0,a.jsx)(F.A,{name:r.name||t,color:r.color||(0,R.lr)(i),disabled:!0}),(0,a.jsx)("span",{className:"truncate",children:t})]})}let $=(e,t)=>{if(!t)return e;try{let i=RegExp(t,"gi"),n=e.match(i);if(n){let t=e.split(i);return(0,a.jsxs)(a.Fragment,{children:[null==n?void 0:n.map((e,i)=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:t[i]}),(0,a.jsx)("span",{className:k,children:n[i]})]})),t[t.length-1]||""]})}}catch{}return e},B=e=>{var t;let{showHighlight:i,ignoreIds:f,disableMockEnvironment:k=!1}=e,{formatMessage:B}=(0,l.tz)(),[z]=(0,C.useModel)("useLocalMockConfig"),{environmentList:U,projectSetting:H,userData:V,externalURL:K}=(0,u.Ay)(e=>{let{environment:t,projectSetting:i,userData:a,externalURL:n}=e;return{userData:a,externalURL:n,projectSetting:i,environmentList:t.list}}),{activeKey:q}=(0,P.Pj)(O.L,e=>({activeKey:e.activeKey})),G=(0,S.useMemo)(()=>!!q&&(null==q?void 0:q.includes("webSocketApi")),[q]),[W,J]=(0,S.useState)(""),[Y,Z]=(0,S.useState)(void 0),Q=(0,h.A)(t=>{var i;null==(i=e.onChange)||i.call(e,t)});(0,S.useEffect)(()=>{G||!Y||e.value||(Q(Y),Z(void 0))},[G,Y,e.value,Q]),(0,S.useEffect)(()=>{if(!G||!e.value)return;let t=null==U?void 0:U.find(t=>t.id===e.value);t&&p.C8.includes(t.type)&&(void 0!==e.value&&Z(e.value),Q(0))},[G,U,e.value,Q]),(0,S.useEffect)(()=>{void 0===U&&(0,r.yV)()},[U]);let X=(0,S.useMemo)(()=>({placeholder:B({id:"environment.environmentSelect.placeholder"}),placement:"bottomRight",dropdownRender:t=>(0,a.jsxs)("div",{children:[t,(0,a.jsx)(y.A,{style:{margin:"4px 0"}}),(0,a.jsx)("div",{style:{display:"flex",flexWrap:"nowrap"},children:(0,a.jsxs)("a",{style:{flex:"none",width:"100%",padding:"4px 0px 4px 12px",display:"block",cursor:"pointer"},onClick:()=>{var t,i;return(0,s.Du)({activeItemId:null!=(i=null!=(t=e.overrideActiveItemId)?t:e.value)?i:void 0})},children:[(0,a.jsx)(b.A,{type:"icon-setting-o",className:"mr-2"}),B({id:"environment.Management"})]})})]})}),[B,e.value]),{data:ee}=(0,v.Ay)(d.I),et=(0,S.useMemo)(()=>{let t=(U||[]).map(e=>{var t,l,r,d;let u=(0,D.a)(e),h=p.C8.includes(e.type),v=(0,a.jsxs)("div",{className:"flex overflow-hidden items-center justify-start h-full",children:[(0,a.jsx)(L,{type:e.type,name:e.name,tags:e.tags}),"private"===e.visibility&&(0,a.jsx)(x.A,{title:B({id:"forPersonal"}),children:(0,a.jsx)(b.A,{type:"icon-lock",className:"ml-auto",color:"var(--ui-purple-6)"})})]});if("mock"===e.type&&!n.xl)return{value:e.id,disabled:!0,name:e.name,label:(0,a.jsx)(N.A,{tooltipPlacement:"left",disabledTooltip:B({id:"webVersion.tips.mock"}),overlayStyle:{maxWidth:"max-content"},children:v})};if("mock"===e.type&&"serviceSuccess"!==z.localMockStatus)return{value:e.id,disabled:!0,name:e.name,label:(0,a.jsx)(m.jz,{tooltipPlacement:"left",disabledTooltip:(0,a.jsxs)(a.Fragment,{children:[B({id:"app.settings.mockSettings.localMock.notEnabled"}),B({id:"app.settings.mockSettings.separator"}),(0,a.jsx)("a",{onClick:s.jQ,children:(0,a.jsx)("span",{className:g()("app-text-primary-high ml-2 cursor-pointer",_),children:B({id:"app.settings.mockSettings.cloudMock.openIt"})})})]}),disabled:!0,children:v})};if("cloudMock"===e.type&&!(null==H||null==(t=H.cloudMock)?void 0:t.enable))return{value:e.id,disabled:!0,name:e.name,label:(0,a.jsx)(N.A,{tooltipPlacement:"left",overlayStyle:{maxWidth:"max-content"},disabledTooltip:(0,a.jsxs)(a.Fragment,{children:[B({id:n.f3?"app.settings.mockSettings.serverMock.notEnabled":"app.settings.mockSettings.cloudMock.notEnabled"}),B({id:"app.settings.mockSettings.separator"}),(0,a.jsx)(I.A,{to:"/project-settings/common/feature-setting/mock/",children:(0,a.jsx)("span",{className:g()("app-text-primary-high cursor-pointer",_),children:B({id:"app.settings.mockSettings.cloudMock.openIt"})})})]}),disabled:!0,children:v})};if("SELF_HOSTED_MOCK"===e.type){if((0,w.isEmpty)(ee))return{value:e.id,disabled:!0,name:e.name,label:(0,a.jsx)(N.A,{tooltipPlacement:"left",overlayStyle:{maxWidth:"max-content"},disabledTooltip:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:B({id:"team.runner.selfHostedMock.tips2"})}),(0,a.jsx)(A.A,{className:E,type:"link",onClick:o.zN,children:B({id:"apiTestCase.deploy"})})]}),disabled:!0,children:v})};if(!(null==(d=e.baseUrls)?void 0:d.default))return{value:e.id,disabled:!0,name:e.name,label:(0,a.jsx)(m.jz,{tooltipPlacement:"left",disabledTooltip:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:B({id:"team.runner.selfHostedMock.noServerHost.tips"})}),(0,a.jsx)(A.A,{className:E,size:"small",type:"link",onClick:o.zN,children:B({id:"team.runner.selfHostedMock.noServerHost.configureIt"})})]}),disabled:!0,children:v})}}let f=$(e.name,W),y=i&&(null==(l=e.baseUrls)?void 0:l.default)===(null==K||null==(r=K.system)?void 0:r.petstore)&&V&&!V.onboarding.environment;return{visibility:e.visibility,highlight:y,value:e.id,name:e.name,disabled:h&&k,label:(0,a.jsxs)(c.A,{title:e.name,className:"flex items-center",children:[(0,a.jsx)(F.A,{name:u.name||e.name,color:u.color||(0,R.lr)(e.type)}),(0,a.jsx)("span",{className:"truncate",children:f})]})}}),l=f?t.filter(e=>!f.has(e.value)):t;return e.transformOptions?e.transformOptions(l):l},[U,K,G,B,z.localMockStatus,null==H||null==(t=H.cloudMock)?void 0:t.enable,W,i,V,k,f,ee,e.transformOptions]),ei=(0,h.A)((e,t)=>{try{return(null==t?void 0:t.name).toLowerCase().includes(e.toLowerCase())}catch{return!1}}),ea=(0,h.A)(e=>{J(e)}),en=(0,h.A)(e=>{if(J(""),i){let t=null==et?void 0:et.find(t=>t.value===e);(null==t?void 0:t.highlight)&&(0,C.dispatchUpdateUserData)({id:V.id,onboarding:{...V.onboarding,environment:1}})}});return(0,a.jsx)(j.A,{...X,dropdownMatchSelectWidth:e.dropdownMatchSelectWidth,dropdownStyle:e.dropdownMatchSelectWidth?void 0:{maxWidth:360,minWidth:160},showSearch:!0,...e,dropdownClassName:T,filterOption:ei,onSearch:ea,onSelect:en,optionLabelProp:"label",children:et.map(e=>(0,a.jsx)(j.A.Option,{disabled:e.disabled,value:e.value,name:e.name,label:e.label,className:g()({[M]:e.highlight},"mx-1"),children:(0,a.jsxs)("div",{className:"flex overflow-hidden items-center justify-start h-full",children:[e.label,"private"===e.visibility&&(0,a.jsx)(x.A,{title:B({id:"forPersonal"}),children:(0,a.jsx)(b.A,{type:"icon-lock",className:"private-icon ml-auto pl-1",color:"var(--ui-purple-6)"})})]})},e.value))})}},190127:function(e,t,i){"use strict";i.d(t,{A:()=>c});var a=i(838e3),n=i(740565),l=i(387752),r=i(524381),s=i(458184),o=i(671466),d=i(760912);let c=e=>{let{formatMessage:t}=(0,n.tz)();return(0,a.jsxs)(r.A.Compact,{block:!0,children:[(0,a.jsx)(d.Ay,{dropdownMatchSelectWidth:!1,style:{width:112},...e}),(0,a.jsx)(s.A,{onClick:()=>{var t,i;(0,l.Du)({activeItemId:null!=(i=null!=(t=e.overrideActiveItemId)?t:e.value)?i:void 0})},icon:(0,a.jsx)(o.A,{type:"icon-nav-drag"}),title:t({id:"environmentSettingHoverTips"})})]})}},562887:function(e,t,i){"use strict";i.d(t,{z:()=>A});var a=i(838e3),n=i(968941),l=i(372557),r=i(140049),s=i(662387),o=i(838487),d=i.n(o),c=i(838062),u=i(876591),p=i(641486),m=i(913385),h=i(729968);let v="tableArrayInput_divider-qDyiqP",f="tableArrayInput-Yu7YgC",g="tableArrayInput_oneLine-w7IMWS",y="action-gWLaJP",x=e=>{if(Array.isArray(e)){let t=e.map(e=>{if("string"==typeof e)return e;try{return String(e)}catch(e){return null}}).filter(e=>null!==e);return 0===t.length?[]:t}try{var t;return[null!=(t=String(e))?t:""]}catch(e){return[""]}},A=e=>{let{defaultValue:t,value:i,onChange:o,disabled:A,size:j,renderInputAvailable:b,...w}=e,[S,C]=(0,p.useState)(()=>{var e;let a=x(null!=(e=null!=i?i:t)?e:[]);return Array.isArray(a)&&0===a.length?[""]:a}),I=(0,r.A)(e=>{if(o){let t="function"==typeof e?e(S):e;null==o||o(t)}else C(t=>"function"==typeof e?e(t):e)});(0,s.A)(()=>{S!==i&&C(()=>Array.isArray(i)&&0===i.length?[""]:x(i))},[i]);let N={},k=(0,p.useContext)(u.A),T=null!=j?j:k;return(0,a.jsx)("div",{...w,className:d()(f,w.className),children:S.map((t,i)=>{var r;return null!=(r=N[t])||(N[t]=0),N[t]+=1,(0,a.jsxs)(a.Fragment,{children:[0===i?null:(0,a.jsx)("div",{className:v}),(0,a.jsxs)("div",{className:`flex ${g}`,children:[(0,a.jsx)(h.A,{value:t,moduleId:e.moduleId,renderInput:b&&(0,m.A)(b.conditions,{...b.renderInputProps,renderFlatArrayComponent:e=>(0,a.jsx)(c.A,{value:t,bordered:!1,options:e,defaultValue:t,onSearch:e=>{I(t=>t.map((t,a)=>a===i?e:t))},onSelect:e=>{I(t=>t.map((t,a)=>a===i?e:t))}})}),onChange:e=>{I(t=>t.map((t,a)=>a===i?e:t))},disabled:e.disabled,className:"flex-1"}),e.disabled?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:d()(`cursor-pointer mx-2 ${y}`),onClick:()=>{I(e=>e.concat(""))},style:{fontSize:`calc(var(--editable-table-font-size, ${"small"===T?"12px":"14px"}) + 2px)`},children:(0,a.jsx)(n.A,{})}),(0,a.jsx)("div",{className:d()(`mr-2 ${y}`,{"opacity-0":1===S.length,"cursor-pointer":S.length>1}),onClick:()=>{S.length>1&&I(e=>e.filter((e,t)=>t!==i))},style:{fontSize:`calc(var(--editable-table-font-size, ${"small"===T?"12px":"14px"}) + 2px)`},children:(0,a.jsx)(l.A,{})})]})]})]})})})}},139890:function(e,t,i){"use strict";i.d(t,{A:()=>m,q:()=>u});var a=i(838e3),n=i(740565),l=i(471504),r=i(140049),s=i(743190),o=i(458184),d=i(671466),c=i(641486);let u={label:(0,n.hw)({id:"defaultFolder"}),value:"0"},p="var(--ui-zindex-dropdown)",m=e=>{let{moduleId:t,disableValue:i,hideCreateFolder:u=!1,hideForkFolder:m=!0,onCreateFolder:h,onForkFolder:v,...f}=e,g=(0,r.A)((e,t)=>(t.label||t.title||t.name).toLowerCase().includes(e.toLowerCase())&&!t.disabled),[y,x]=(0,c.useState)(p),A=(0,r.A)(function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];x(-1),null==h||h(...t)}),j=(0,r.A)(()=>{x(-1),null==v||v(t)}),b=(0,r.A)(e=>{var t;null==(t=f.onDropdownVisibleChange)||t.call(f,e),e&&x(p)});return(0,a.jsx)(l.Uh,{showSearch:!0,dropdownStyle:{zIndex:y},allowClear:!0,disableValue:i,filterTreeNode:g,dropdownRender:e=>(0,a.jsxs)(a.Fragment,{children:[e,!u&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.A,{className:"app-bg-300 mt-2 mb-1"}),(0,a.jsx)(o.A,{className:"w-full -mb-1",style:{justifyContent:"flex-start"},type:"text",icon:(0,a.jsx)(d.A,{type:"icon-folder-add"}),onClick:A,children:(0,n.hw)({id:"addFolder"})})]}),!m&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(o.A,{className:"w-full -mb-1",style:{justifyContent:"flex-start"},type:"text",icon:(0,a.jsx)(d.A,{type:"icon-FolderDefault"}),onClick:j,children:(0,n.hw)({id:"branch.action.pickFromMain"})})})]}),treeDefaultExpandAll:!0,...f,onDropdownVisibleChange:b})}},608017:function(e,t,i){"use strict";i.d(t,{A:()=>l});var a=i(838e3);i(276129);var n=i(543605);function l(){return(0,n.D)("ignoreAll"),(0,a.jsx)(a.Fragment,{})}},282066:function(e,t,i){"use strict";i.d(t,{w:()=>g,A:()=>x});var a=i(838e3),n=i(740565),l=i(689368),r=i(294359),s=i(838487),o=i.n(s),d=i(838062),c=i(554692),u=i(641486),p=i(671466);let m="container-X4udxE",h="optionLabel-oo9ySn";var v=i(298033),f=i(69712);function g(e,t,i){r.tB.filter(e=>"string"==typeof e).includes(t)?i():/^\d{1,9}$/.test(t)?i():i((0,n.hw)({id:"response.label.codeIncorrect"}))}function y(e){let{value:t,httpCodeNames:i,httpCodeDescriptions:n}=e,l=i[t],r=n[t],{text:s}=(0,u.useMemo)(()=>(0,v.xj)(String(t)),[t]);return(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("div",{className:"flex items-center flex-1",children:[(0,a.jsx)("span",{style:{fontWeight:500,color:s},children:t}),!!l&&(0,a.jsx)("span",{className:o()(h,"ml-3"),children:l})]}),!!r&&(0,a.jsx)(c.A,{title:r,children:(0,a.jsx)(p.A,{className:"ml-3",type:"icon-info2"})})]})}let x=function(e){let{style:t,...i}=e,n=(0,l.Ay)(e=>{let{projectSetting:t}=e;return t.projectSettingData}),s=(0,u.useMemo)(()=>(0,f.Y_)(null==n?void 0:n.language),[null==n?void 0:n.language]),c=(0,u.useMemo)(()=>(0,f.dW)(),[]),p=(0,u.useCallback)(e=>r.tB.reduce((e,t)=>(e.push({value:String(t),label:(0,a.jsx)(y,{value:t,httpCodeNames:s,httpCodeDescriptions:c})}),e),[]),[]),[h,v]=(0,u.useState)(p(i.value||""));return(0,a.jsx)(d.A,{...i,value:i.value?String(i.value):void 0,className:o()(m,i.className),options:h,style:t,dropdownMatchSelectWidth:312,onSearch:e=>{}})}},33352:function(e,t,i){"use strict";i.d(t,{E:()=>B});var a=i(838e3),n=i(491220),l=i(431218),r=i(957705),s=i(387752),o=i(427098),d=i(982668),c=i(622290),u=i(399013),p=i(481069),m=i(573885),h=i(689368),v=i(435685),f=i(398380),g=i(641486);function y(e){for(var t=arguments.length,i=Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];e&&e.addEventListener&&e.addEventListener(...i)}function x(e){for(var t=arguments.length,i=Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];e&&e.removeEventListener&&e.removeEventListener(...i)}let A=["mousemove","mousedown","resize","keydown","touchstart","wheel"],j=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6e4,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:A,[a,n]=(0,g.useState)(t);return(0,g.useEffect)(()=>{let t,l=!0,r=a,s=e=>{l&&(r=e,n(e))},o=(0,f.throttle)(()=>{r&&s(!1),clearTimeout(t),t=setTimeout(()=>s(!0),e)},50),d=()=>{document.hidden||o()};for(let e=0;e<i.length;e++)y(window,i[e],o);return y(document,"visibilitychange",d),t=setTimeout(()=>s(!0),e),()=>{l=!1;for(let e=0;e<i.length;e++)x(window,i[e],o);x(document,"visibilitychange",d)}},[e,i]),a};function b(e,t){let i=(0,g.useRef)(!1);(0,g.useEffect)(()=>{!i.current&&t&&(i.current=!0,e())},[t,e])}var w=i(17516),S=i(485956),C=i(506598),I=i(140049),N=i(618487),k=i(429862),T=i(585403),M=i(55561),E=i(14549),_=i(182187),F=i(710993),D=i(265276),R=i(668113),O=i(95470);let P=e=>{let{scope:t}=e;return t===s.Ix.API_MANAGE_MAIN_VIEWER||t===s.Ix.DOC_VIEWER?(0,a.jsx)(R.A,{loading:!0}):(0,a.jsx)("div",{style:{padding:12},children:(0,a.jsx)(O.A,{active:!0})})};var L=i(169508);let $=e=>{let{canStartPrefetchStatus:t}=e;return b(async()=>{await (0,F.G)(),await (0,_.N)(),await (0,E.$)(),L.Qv||w.sdkContainer.getItems(e=>Object.keys(e).map(t=>e[t])).then(()=>{})},j(5e3)&&t===s.Sp.READY),b(async()=>{await (0,F.G)(),await (0,_.N)(),await (0,E.$)(),await (0,M.rs)(),await (0,S.M)(),await Promise.all([i.e("720"),i.e("88175")]).then(i.bind(i,984530)),L.Qv||(v.baseContainer.getItems(e=>Object.keys(e).map(t=>e[t])).then(()=>{}),C.utilsContainer.getItems(e=>Object.keys(e).map(t=>e[t])).then(()=>{}))},j(15e3)&&t===s.Sp.READY),(0,a.jsx)(a.Fragment,{})};function B(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.Ix.PROJECT_PUBLIC_RESOURCE,i=arguments.length>2?arguments[2]:void 0;return t===s.Ix.API_MANAGE_MAIN_SIDE?function(n){let{incubatorStatus:l,canStartPrefetchStatus:r}=(0,h.Ay)(e=>{let{global:i}=e;return{incubatorStatus:i.incubatorStatus[t],canStartPrefetchStatus:i.incubatorStatus[s.Ix.CAN_START_PREFETCH_ASYNC_STATICS]}}),o=(0,I.A)(async()=>{await (0,p.f4)({dispatchFetchApiTreeList:N.dispatchFetchWebSocketApiTreeList,dispatchFetchDataSchemaTreeList:N.dispatchFetchDataSchemaTreeList,loadRequestTreeList:(0,c.F)().loadTreeList,dispatchFetchResponseTreeList:N.dispatchFetchResponseTreeList,dispatchFetchSecuritySchemeTreeList:k.es,dispatchFetchOASComponentTreeList:T.jn})});return l===s.Sp.ERROR?(0,a.jsx)(D.A,{errorType:"network",onReload:o}):l!==s.Sp.LOADING&&l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e,{...n}),(0,a.jsx)($,{canStartPrefetchStatus:r})]}):i?i():(0,a.jsx)(P,{})}:function(c){let{incubatorStatus:v}=(0,h.Ay)(e=>{let{global:i}=e;return{incubatorStatus:i.incubatorStatus[t]}}),{load:f}=(0,N.useModel)("projectCustomApiField",e=>{let{load:t}=e;return{load:t}}),g=(0,I.A)(()=>f()),{load:y}=(0,N.useModel)("httpRequest",e=>{let{load:t}=e;return{load:t}}),x=(0,I.A)(()=>y()),{load:A}=(0,N.useModel)("requestFolder",e=>{let{load:t}=e;return{load:t}}),j=(0,I.A)(()=>A()),{load:b}=(0,N.useModel)("authorizations",e=>{let{load:t}=e;return{load:t}}),w=(0,I.A)(()=>b()),S=(0,h.Ay)(e=>{var t;return null==(t=e.project.currentProject)?void 0:t.type}),C=(0,I.A)(async()=>{await (0,p.dI)({dispatchFetchUserData:N.dispatchFetchUserData,dispatchFetchCommonHttpApiResponseList:N.dispatchFetchCommonHttpApiResponseList,dispatchFetchCommonParameters:N.dispatchFetchCommonParameters,dispatchFetchGlobals:N.dispatchFetchGlobals,dispatchFetchVaultSecret:N.dispatchFetchVaultSecret,dispatchFetchTeamVariables:u.Zk,dispatchFetchApiCaseScriptList:n.WA,dispatchFetchDatabaseConnection:l.y,dispatchFetchDataSchemaList:N.dispatchFetchDataSchemaList,dispatchFetchHttpApiList:N.dispatchFetchHttpApiList,dispatchFetchWebSocketApiList:N.dispatchFetchWebSocketApiList,dispatchFetchRpcMethodList:N.dispatchFetchRpcMethodList,dispatchFetchRpcMessageList:N.dispatchFetchRpcMessageList,dispatchFetchRpcServiceList:N.dispatchFetchRpcServiceList,dispatchFetchRpcModuleList:N.dispatchFetchRpcModuleList,dispatchFetchHttpApiCaseList:N.dispatchFetchHttpApiCaseList,dispatchFetchTestCaseList:N.dispatchFetchTestCaseList,dispatchFetchApiFolderList:N.dispatchFetchApiFolderList,loadHttpRequestMap:x,loadRequestFolder:j,dispatchFetchDocList:r.dq,dispatchFetchHttpApiMockList:N.dispatchFetchHttpApiMockList,dispatchFetchUserProjectState:N.dispatchFetchUserProjectState,loadProjectCustomApiField:g,dispatchFetchCurrentProjectMemberList:N.dispatchFetchCurrentProjectMemberList,initSocketData:m._,dispatchFetchCustomFunctionList:N.dispatchFetchCustomFunctionList,loadAuthorizations:w,dispatchFetchCustomEndpointList:N.dispatchFetchCustomEndpointList,dispatchFetchSocketIOApiList:N.dispatchFetchSocketIOApiList,dispatchFetchMcpClientList:N.dispatchFetchMcpClientList,dispatchFetchCustomEndpointTemplateList:N.dispatchFetchCustomEndpointTemplateList,dispatchFetchNotificationTargetList:N.dispatchFetchNotificationTargetList,dispatchFetchOASExportSettings:N.dispatchFetchOASExportSettings,dispatchFetchProjectTestCaseCategoryList:(0,o.n)().queryList,dispatchFetchProjectTestCaseTagList:(0,d.H)().queryList},S)});return v===s.Sp.ERROR?(0,a.jsx)(D.A,{errorType:"network",onReload:C}):v!==s.Sp.LOADING&&v?(0,a.jsx)(e,{...c}):i?i():(0,a.jsx)(P,{scope:t})}}},541993:function(e,t,i){"use strict";i.d(t,{W:()=>l});var a=i(838e3),n=i(740565);let l=()=>(0,a.jsx)("div",{className:"text-sm",style:{color:"var(--ui-disabled-color)",fontWeight:"var(--ui-font-weight-400)"},children:(0,n.hw)({id:"invitation.expiredAt"},{days:7})})},487843:function(e,t,i){"use strict";i.d(t,{K:()=>y});var a=i(838e3),n=i(161178),l=i(740565),r=i(359108),s=i(524381),o=i(138249),d=i(458184),c=i(764007),u=i(671466),p=i(641486),m=i(662387),h=i(926378);let v={compact:"compact-VqANME",select:"select-tmcJmY"};var f=i(838487),g=i.n(f);function y(e){let{value:t,onChange:i,teamId:f,projectId:y,teamProjectList:x,customProjectPermissions:A,onCustomPermissionsChange:j,disabled:b=!1,className:w,hideManualSetup:S=!1,allowClear:C=!1,placeholder:I}=e,{projectRoleList:N}=(0,r.vv)(f,{includeForbiddenAccessRole:!0,includeManualSetup:!S}),k=(0,p.useMemo)(()=>{var e;return(null==x||null==(e=x.filter(e=>e.id!==y))?void 0:e.map(e=>({projectId:e.id,projectName:e.name,roleType:n._I.None,enable:!0})))||[]},[y,x]),[T,M]=(0,p.useState)(!1),[E,_]=(0,p.useState)([]),F=(0,p.useCallback)(()=>{_(A&&A.length>0?A:k),M(!0)},[A,k]),D=(0,p.useCallback)(()=>{null==j||j(E),M(!1)},[E,j]);(0,m.A)(()=>{T&&_(e=>e.map(e=>({...e,enable:!0})))},[T]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(s.A.Compact,{className:g()("w-full",w,v.compact),children:[(0,a.jsx)(o.A,{value:t,disabled:b,dropdownMatchSelectWidth:!1,className:v.select,allowClear:C,placeholder:I,onChange:e=>{var t,a;i(e);if(-1===e)F();else if(null!=e){let i=(null==x||null==(t=x.filter(e=>e.id!==y))?void 0:t.map(t=>({projectId:t.id,projectName:t.name,roleType:e,enable:!0})))||[];null==j||j(i)}else{let e=(null==x||null==(a=x.filter(e=>e.id!==y))?void 0:a.map(e=>({projectId:e.id,projectName:e.name,roleType:n._I.None,enable:!0})))||[];null==j||j(e)}},children:N.map(e=>(0,a.jsx)(o.A.Option,{value:e.id,children:e.name},e.id))}),-1===t&&(0,a.jsx)(d.A,{disabled:b,icon:(0,a.jsx)(u.A,{type:"icon-settings-04"}),onClick:F})]}),(0,a.jsx)(c.Ay,{getContainer:!1,title:(0,l.hw)({id:"projectDetail.label.memberRole"}),open:T,onCancel:()=>{_(A&&A.length>0?A:k),M(!1)},size:600,okText:(0,l.hw)({id:"save"}),cancelText:(0,l.hw)({id:"cancel"}),onOk:D,className:v.modal,children:(0,a.jsx)(h.B,{value:E,onChange:e=>_(e),projectRoleList:N,className:v.table})})]})}},138775:function(e,t,i){"use strict";i.d(t,{Dk:()=>u,Fx:()=>c,Zh:()=>p,_7:()=>d});var a=i(169508),n=i(740565),l=i(959585),r=i.n(l),s=i(929463);let o={CN:`https://app.${a.A3}.com/invite?token=********`,GLOBAL:`https://app.${a.A3}.com/invite?token=********`,EU:`https://app.eu.${a.A3}.com/invite?token=********`},d=50,c=o[a.aN];function u(e){let t=r()(e);return t?s.Ay.success((0,n.hw)({id:"overView.isCopied"})):s.Ay.error((0,n.hw)({id:"overView.failToCopied"})),t}let p=e=>[...e.reduce((e,t)=>(e.set(t,(e.get(t)||0)+1),e),new Map).entries()].sort((e,t)=>t[1]-e[1])[0][0]},384532:function(e,t,i){"use strict";i.d(t,{A:()=>s});var a=i(838e3),n=i(838487),l=i.n(n),r=i(441960);let s=e=>{let{contentRender:t,leftTopTitleRender:i,rightTopActionRender:n,className:s,paneRef:o,...d}=e;return(0,a.jsxs)("div",{className:l()("w-full",r.A["card-pane"],s),ref:o,...d,children:[!e.hideHeader&&(0,a.jsxs)("div",{className:l()("w-full flex justify-between items-center card-pane__header",r.A["card-pane__top"]),children:[null==i?void 0:i(),(0,a.jsx)("div",{className:r.A["card-pane__top__right"],children:null==n?void 0:n()})]}),null==t?void 0:t()]})}},524095:function(e,t,i){"use strict";i.d(t,{A:()=>L,n:()=>P});var a=i(838e3),n=i(182187),l=i(511389),r=i(740565),s=i(221675),o=i(308250),d=i(212168),c=i(722238),u=i(208335),p=i(664283),m=i(838487),h=i.n(m),v=i(458184),f=i(671466),g=i(398380),y=i(641486),x=i.n(y),A=i(441960),j=i(384532),b=i(202130);function w(e){let[t,i]=(0,y.useState)(!1),n=(0,y.useCallback)(()=>i(!0),[]);return(0,a.jsx)(b.A,{placement:"top",title:null,content:e.content,open:t,onOpenChange:i,children:(0,a.jsx)("div",{className:"cursor-pointer",onMouseOver:n,children:e.children})})}var S=i(169508),C=i(949695),I=i(543013);async function N(e){var t,a,n,l,r,s;if(!e)return{dataContentSchema:void 0,dataContentMediaType:void 0,eventStreamSchema:I.SM};let{deRefSchema:o}=await Promise.all([i.e("67007"),i.e("77447"),i.e("84962"),i.e("75466")]).then(i.bind(i,210833)),d=o({schema:e,appNameLower:S.A3}),c=null==(a=d.properties)||null==(t=a.data)?void 0:t.contentSchema,u=null==(l=d.properties)||null==(n=l.data)?void 0:n.contentMediaType;return c?(null==(s=d.properties)||null==(r=s.data)||delete r.contentSchema,{dataContentSchema:c,dataContentMediaType:u,eventStreamSchema:d}):{dataContentSchema:void 0,dataContentMediaType:void 0,eventStreamSchema:d}}var k=i(794397);let T="container-vKukz5",M="title-TfYWaZ",E="titleFoldable-EmqwIH",_="titleCollapsed-BYQsEI",F="contentMediaType-lwdkac";var D=i(103712),R=i(961144);function O(e){let{isSSE:t,...i}=e,[n,l]=x().useState(void 0),[s,o]=x().useState(void 0);return(x().useEffect(()=>{t&&(async()=>{try{let e=await N(i.schema);l(e)}catch{l({dataContentSchema:void 0,dataContentMediaType:void 0,eventStreamSchema:i.schema})}})()},[t,i.schema]),t)?n?(0,a.jsxs)("div",{className:T,children:[n.dataContentSchema&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:M,children:[(0,r.hw)({id:"response.sse.contentSchemaOfData"}),n.dataContentMediaType&&(0,a.jsx)("span",{className:F,children:n.dataContentMediaType})]}),(0,a.jsx)(C.A,{...i,schema:n.dataContentSchema})]}),(0,a.jsx)("div",{className:"flex",children:(0,a.jsxs)("div",{className:h()(M,{[E]:n.dataContentSchema,[_]:n.dataContentSchema&&!s}),onClick:()=>{n.dataContentSchema&&o(e=>!e)},children:[(0,r.hw)({id:"response.sse.envelopeStructure"}),n.dataContentSchema&&(0,a.jsx)(a.Fragment,{children:s?(0,a.jsx)(D.A,{}):(0,a.jsx)(R.A,{})})]})}),(!n.dataContentSchema||s)&&(0,a.jsx)(C.A,{...i,schema:n.eventStreamSchema})]}):(0,a.jsx)(k.A,{}):(0,a.jsx)(C.A,{...i})}let P={enum:(e,t,i)=>!i||(0,g.isEmpty)(i)||i.every(e=>""===e.value)?t:(0,a.jsx)(w,{content:()=>{var e;let t=null!=(e=null==i?void 0:i.map(e=>({label:String(void 0!==e.value?e.value:""),name:e.name,value:void 0!==e.description?e.description:""})))?e:[];return(0,a.jsxs)("div",{className:h()("flex",A.A["enum-popover"]),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:A.A["enum-popover__title"],children:(0,r.hw)({id:"enumeratedValue"})}),t.map(e=>(0,a.jsx)("div",{className:A.A["enum-popover__content"],children:(0,a.jsx)(s.A,{text:e.label,copyText:e.label})},e.label))]}),t.some(e=>""!==e.name)&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:A.A["enum-popover__title"],children:(0,r.hw)({id:"name"})}),t.map(e=>(0,a.jsx)("div",{className:A.A["enum-popover__content"],children:e.name},e.label))]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:A.A["enum-popover__title"],children:(0,r.hw)({id:"description"})}),t.map(e=>(0,a.jsx)("div",{className:A.A["enum-popover__content"],children:e.value},e.label))]})]})},children:t})},L=e=>{let{schema:t,viewMode:i,shouldPreventLinkDefault:s,isStateRightAligned:m,jsonSchemaPaneLeftTopTitleRender:x,hiddenRightAction:b,className:w,isSSE:C}=e,I=(0,c.bq)(),{dataModelName:N}=(0,y.useContext)(d.h),{theme:k}=(0,y.useContext)(l.Ay),{locale:T}=(0,r.UX)(),M=o.O,E=e=>(0,a.jsx)(n.A,{value:e,shouldPreventLinkDefault:s,locale:(0,r.getUserLocale)()}),_="object"===t.type&&(0,g.isEmpty)(t.properties);return(0,a.jsx)(j.A,{contentRender:()=>(0,a.jsx)("div",{className:h()("w-full",A.A["json-schema-viewer"],_?A.A["json-schema-viewer_empty"]:"",w),children:(0,a.jsx)(O,{schema:t,locale:T,disableCrumbs:!0,propertyNameRender:M,keyValueRenderMap:P,viewMode:i,descriptionRender:E,isMergeAllOf:!0,isStateRightAligned:m,appNameLower:S.A3,isSSE:C})}),leftTopTitleRender:()=>(null==x?void 0:x())?x():(0,a.jsx)("span",{className:"font-medium",children:(0,r.hw)({id:"response.label.jsonSchema"})}),rightTopActionRender:b?void 0:()=>(0,a.jsx)(v.A,{type:"soft",theme:"secondary",icon:(0,a.jsx)(f.A,{type:"icon-button-generate",className:"mr-1"}),onClick:e=>{I.show(u.G,{schema:t||{},schemaName:N||(null==t?void 0:t.title)||`${(0,p.fj)()}Model`,theme:k.background}),e.stopPropagation()},size:"small",children:(0,r.hw)({id:"codeGenerate"})}),className:A.A["json-schema-viewer__card"],hideHeader:e.hideHeader})}},442318:function(e,t,i){"use strict";i.d(t,{$:()=>r});var a=i(238504),n=i(689368),l=i(718180);function r(){return(0,l.A)(()=>{void 0===(0,n.DA)(e=>{let{apiSchema:t}=e;return t.list})&&(0,a.g6)()}),(0,n.Ay)(e=>e.apiSchema.dataSchemaDefinitions)}},186018:function(e,t,i){"use strict";i.d(t,{p:()=>o,x:()=>s});var a=i(398380),n=i(442318),l=i(641486),r=i(506598);let s=i(674984).hL;function o(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=(0,n.$)();return(0,l.useMemo)(()=>{if(void 0===e)return;let n=e;"string"==typeof e?n=JSON.parse(e):"object"==typeof n&&(n=t?{...n}:(0,a.cloneDeep)(n));let l={...n};"object"==typeof n&&(l.definitions={...i,...n.definitions});let{jsonSchemaUtils:s}=r.utilsContainer.getItemsSync(e=>[e.jsonSchemaUtils]);return s.AppJsonSchema2JsonSchemaStandardAndNesscarySchema(l,{enableXAppEnum:!0,enableXAppMock:!0}).finalSchema},[e,i,t])}},67276:function(e,t,i){"use strict";i.d(t,{T:()=>p});var a=i(838e3),n=i(143193),l=i(272164),r=i(140049),s=i(579159),o=i(974015),d=i(641486);let c="title-FebAgb",u=[{label:"JSON",value:"JSON"},{label:"YAML",value:"YAML"}];function p(e){let{value:t,title:i,autoFocus:p,height:m=200,className:h,options:v,onChange:f,format:g,placeholder:y,jsonPlaceholder:x,yamlPlaceholder:A,placeholderOffset:j}=e,b=(0,d.useRef)(null),[w,S]=(0,d.useState)("JSON"),{run:C}=(0,l.A)(e=>{let t=t=>{try{return JSON.stringify(t(e),null,2)}catch(t){return console.error("JsonYamlEditor parse error:",t),e}},i=t("YAML"===w?o.Ay.load:JSON.parse);null==f||f(i)},{wait:300,trailing:!0,leading:!1}),I=(0,r.A)(e=>{var t;let i=null==(t=b.current)?void 0:t.editor;if(e&&i){S(e);try{let t=i.getValue();if("YAML"===e){let e=JSON.parse(t||""),a=(0,o.Bh)(e);i.setValue(a)}else if("JSON"===e){let e=o.Ay.load(t||""),a=JSON.stringify(e,null,2);i.setValue(a)}}catch(e){console.error("JsonYamlEditor format error:",e)}}});return(0,d.useEffect)(()=>{if(g&&g!==w){var e;let t=null==(e=b.current)?void 0:e.editor;if(!t)return void S(g);S(g);try{let e=t.getValue();if("YAML"===g){let i=JSON.parse(e||""),a=(0,o.Bh)(i);t.setValue(a)}else if("JSON"===g){let i=o.Ay.load(e||""),a=JSON.stringify(i,null,2);t.setValue(a)}}catch(e){console.error("JsonYamlEditor format error:",e)}}},[g]),(0,d.useEffect)(()=>{let e=null,i=window.setTimeout(()=>{var i,a,n,l;let r=null==(i=b.current)?void 0:i.editor,s=null==r||null==(a=r.getDomNode)?void 0:a.call(r),o=y;"JSON"===w&&x?o=x:"YAML"===w&&A&&(o=A),s&&o&&(e=s.querySelector(".jsonyaml-placeholder"),t||e||((e=document.createElement("span")).innerText=o,e.style.color="var(--ui-input-placeholder-color)",e.style.marginLeft="0px",e.style.fontSize="12px",e.style.position="absolute",e.style.left=`${null!=(n=null==j?void 0:j.left)?n:0}px`,e.style.top=`${null!=(l=null==j?void 0:j.top)?l:0}px`,e.style.pointerEvents="none",e.style.userSelect="none",e.style.zIndex="10",e.style.fontFamily='Menlo, Monaco, "Courier New", monospace',e.style.whiteSpace="pre",s.appendChild(e)))},0);return()=>{window.clearTimeout(i),null==e||e.remove()}},[t,y,x,A,w,b.current]),(0,a.jsx)(n.Ay,{ref:b,defaultValue:t,onChange:C,language:w.toLowerCase(),jsonDiagnosticsOptions:{allowComments:!0},options:{lineNumbers:"off",...v},actions:["format"],height:m,autoFocus:p,headerLeft:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:c,children:i}),(0,a.jsx)(s.A,{value:w,gap:!1,size:"small",options:u,onChange:I})]}),editorClassName:"pt-2"})}},837152:function(e,t,i){"use strict";i.d(t,{z:()=>n});var a=i(740565);function n(e,t,i){try{if(t){let e=JSON.parse(t);"object"!=typeof e||null===e||Array.isArray(e)?i((0,a.hw)({id:"not.valid.oasExtensions"})):i()}else i()}catch{i((0,a.hw)({id:"not.valid.oasExtensions"}))}}},170746:function(e,t,i){"use strict";i.d(t,{A:()=>r});var a=i(838e3),n=i(103058),l=i(641486);let r=e=>{let{to:t,...i}=e,{Link:r}=(0,l.useContext)(n.A);return(0,a.jsx)(r,{to:t,...i,children:i.children})}},52859:function(e,t,i){"use strict";i.d(t,{B:()=>l,W:()=>r});var a=i(838e3),n=i(437193);let l=(0,i(641486).createContext)(void 0);function r(e){let{children:t}=e,i=(0,n.A)();return(0,a.jsx)(l.Provider,{value:{focusTreeListActiveItemEvent:i},children:t})}},86456:function(e,t,i){"use strict";i.d(t,{A:()=>l});var a=i(838e3),n=i(671466);let l=e=>(0,a.jsx)(n.A,{size:16,...e,type:"icon-ModelContextProtocol"})},9003:function(e,t,i){"use strict";i.d(t,{O:()=>s});var a=i(838e3),n=i(276129),l=i(641486),r=i(140049);function s(e){let{onNext:t,onPrev:i,onClose:s,hotkeyHandlers:o,children:d,className:c}=e,u=(0,l.useRef)(null),p=(0,l.useMemo)(()=>{let e={};return t&&(e.enter=t),i&&(e.shiftEnter=i),s&&(e.esc=s),o&&Object.assign(e,o),e},[t,i,s,o]),m=(0,l.useMemo)(()=>Object.keys(p).filter(e=>void 0!==p[e]),[p]),h=(0,r.A)(e=>{let t=p[e];t&&t()});return(0,n.B7)("default",m,h,u,void 0,{unrestricted:!0}),(0,a.jsx)("div",{ref:u,className:c,children:d})}},109836:function(e,t,i){"use strict";i.d(t,{N:()=>m});var a=i(838e3),n=i(740565),l=i(838487),r=i.n(l),s=i(820182),o=i(554692),d=i(671466),c=i(641486),u=i(810558),p=i(140049);function m(e){let{variant:t,size:i,prefix:l,className:m,deepSearchEnabled:h,deepSearchLoading:v,placeholder:f=(0,n.hw)({id:"search"}),value:g,activeIndex:y,resultCount:x,inputRef:A,onValueChange:j,onNext:b,onPrev:w,onClose:S,setDeepSearchEnabled:C}=e,I=(0,c.useRef)(!1),N=x>0,k=(0,p.A)(()=>{v||null==C||C(!h)}),T=(0,p.A)(()=>{I.current=!0}),M=(0,p.A)(e=>{I.current=!1,j(e)}),E=(0,p.A)(e=>{I.current||j(e)});return(0,a.jsxs)("div",{className:r()(u.A.searchBar,t&&u.A[t],i&&u.A[i],m),children:[(0,a.jsx)(d.A,{type:"icon-search-sm",size:20}),l,(0,a.jsx)(s.A,{ref:A,type:"text",autoFocus:!0,bordered:!1,className:"p-0 h-full rounded-none",placeholder:f,defaultValue:g,onChange:E,onCompositionStart:T,onCompositionEnd:M}),N&&(0,a.jsxs)("div",{children:[y+1,"/",x]}),(0,a.jsxs)("div",{className:u.A.actions,children:[(0,a.jsx)(o.A,{title:(0,n.hw)({id:h?"apiTest.search.exact.tooltip":"apiTest.search.exactOff.tooltip"}),children:(0,a.jsx)(d.A,{spin:v,type:v?"icon-loading-01":h?"icon-target":"icon-target-disabled",className:r()(u.A.button,u.A.enable,u.A.text),onClick:k})}),(0,a.jsx)("div",{className:u.A.divider}),(0,a.jsx)(d.A,{type:"icon-up-md",className:r()(u.A.button,{[u.A.enable]:N}),onClick:w}),(0,a.jsx)(d.A,{type:"icon-down-md",className:r()(u.A.button,{[u.A.enable]:N}),onClick:b}),(0,a.jsx)(d.A,{type:"icon-x",className:r()(u.A.button,u.A.enable),onClick:S})]})]})}},169292:function(e,t,i){"use strict";i.d(t,{r:()=>h,f:()=>m});var a=i(838e3),n=i(140049),l=i(764007),r=i(671466),s=i(641486);let o="wrap-Df6arX";var d=i(9003),c=i(109836),u=i(917589);function p(e){let{variant:t,size:i,prefix:n,deepSearchLoading:l,deepSearchEnabled:r,setDeepSearchEnabled:s,searchContents:o,placeholder:p,onHit:m,onMiss:h,onClose:v,onSearchResult:f}=e,{inputRef:g,value:y,activeIndex:x,resultCount:A,handleChange:j,handleClose:b,next:w,prev:S}=(0,u.V)({searchContents:o,onHit:m,onMiss:h,onSearchResult:f,onClose:v});return(0,a.jsx)(d.O,{onNext:w,onPrev:S,onClose:b,children:(0,a.jsx)(c.N,{variant:t,size:i,prefix:n,deepSearchLoading:l,deepSearchEnabled:r,placeholder:p,value:y,activeIndex:x,resultCount:A,inputRef:g,onValueChange:j,onNext:w,onPrev:S,onClose:b,setDeepSearchEnabled:s})})}function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"COMMON";return`TestSteps-${t}-${e}`}function h(e){let{open:t,className:i,iconClassName:d,iconSize:c,searchContents:u,deepSearchEnabled:m,setDeepSearchEnabled:h,onOpen:v,onMiss:f,onClose:g,onHit:y,placeholder:x}=e,A=(0,s.useRef)(null),j=(0,n.A)(()=>{t?g():v()});return(0,a.jsxs)("div",{className:i,ref:A,children:[(0,a.jsx)(r.A,{className:d,type:"icon-search-sm",size:c,onClick:j}),A.current&&(0,a.jsx)(l.Ay,{open:t,mask:!1,wrapClassName:o,getContainer:A.current,destroyOnClose:!0,modalRender:()=>(0,a.jsx)(p,{searchContents:u,deepSearchEnabled:m,setDeepSearchEnabled:h,onHit:y,onMiss:f,onClose:g,placeholder:x})})]})}},917589:function(e,t,i){"use strict";i.d(t,{V:()=>s});var a=i(698879),n=i(140049),l=i(641486),r=i(25457);function s(e){var t,i,s,o;let d,{searchContents:c,onHit:u,onMiss:p,onSearchResult:m,onClose:h,tag:v,value:f,onChange:g}=e,y=(0,l.useRef)(null),[x,A]=(0,l.useState)(""),[j,b]=(0,l.useState)([]),[w,S]=(0,l.useState)(-1),C=void 0!==f,I=C?f:x,N=j.length,k=N>0,T=(0,n.A)(()=>{if(!k)return;let e=(w+1)%N;S(e),u(j[e].value)}),M=(0,n.A)(()=>{if(!k)return;let e=(w-1+N)%N;S(e),u(j[e].value)});t=I,i=v,s=c,o=e=>{let t=e.length?0:-1;S(t),b(e),null==m||m(e.map(e=>e.value)),e[t]?u(e[t].value):null==p||p()},d=(0,n.A)(()=>{let e=t.toLocaleLowerCase();e||i?o(s.filter(t=>{let{searchValues:a,tags:n}=t;return(!(i&&Array.isArray(n))||!!n.includes(i))&&a.some(t=>"string"==typeof t&&t.includes(e))})):o([])}),(0,r.A)(d,[t,i],{wait:100,trailing:!0,leading:!1}),(0,l.useEffect)(()=>{t&&d()},[s]);let E=(0,n.A)(e=>{let t=e.target.value;C?null==g||g(t):A(t)}),_=(0,n.A)(()=>{h(),C?null==g||g(""):A("")});return(0,a.A)({ref:y}),{inputRef:y,value:I,searchResult:j,activeIndex:w,resultCount:N,hasSearchResult:k,handleChange:E,handleClose:_,next:T,prev:M}}},217071:function(e,t,i){"use strict";i.d(t,{f:()=>C,A:()=>N});var a=i(838e3),n=i(843212),l=i(325318),r=i(744283),s=i(740565),o=i(690391),d=i(496411),c=i(190183),u=i(140049),p=i(718180),m=i(759345),h=i(838487),v=i.n(h),f=i(174972),g=i(163808),y=i(671466),x=i(398380),A=i(641486);let j="branchBehindAlert-flD6rL";var b=i(2183),w=i(81319),S=i(64091);let C=38,I={HTTP_API:r.o.ENDPOINT_ENDPOINT_CDU,DATA_SCHEMA:r.o.ENDPOINT_SCHEMA_CDU,RESPONSE_COMPONENT:r.o.ENDPOINT_COMPONENT_CDU,DOC:r.o.ENDPOINT_ENDPOINT_CDU,SECURITY_SCHEME:r.o.ENDPOINT_COMPONENT_CDU,OAS_COMPONENT:r.o.ENDPOINT_COMPONENT_CDU},N=e=>{var t,i;let h,C,{onRendered:N,hidden:k,className:T,entityType:M,entityId:E,..._}=e,F=(0,o.A)(),D=(0,S.z0)(e=>{var t,i;return null!=(i=null==(t=e[M][E])?void 0:t.isBehind)&&i}),R=(t=E,i=M,h=(0,b._$)(e=>e.projectCurrentBranch.isMain),C=(0,b._$)(e=>"SPRINT"===e.projectCurrentBranch.type),(0,w.Ay)(e=>{switch(i){case"HTTP_API":return!!e.baseHttpApiMap[t];case"DATA_SCHEMA":return!!e.baseDataSchemaMap[t];case"DOC":return!!e.baseDocMap[t];case"RESPONSE_COMPONENT":return!!e.baseResponseComponentMap[t];case"SECURITY_SCHEME":return!!e.baseSecuritySchemeMap[t];case"CUSTOM_ENDPOINT":return!!e.baseCustomEndpointMap[t];case"HTTP_API_CASE":return!!e.baseHttpApiCaseMap[t];case"OAS_COMPONENT":return!!e.baseOasComponentMap[t];default:return!1}})&&!h&&C),O=R&&!k&&D,{hasPermission:P}=(0,n.w)(r.o.BRANCH_SPRINT_READ),L=(0,u.A)(null!=N?N:x.noop);(0,p.A)(()=>{P&&R&&(0,S.TN)().fetchLastSyncedAt({entityType:M,entityId:E,projectBranchId:(0,d.U3)()})}),(0,m.A)(()=>{(0,S.TN)().markAsUnmount(M,E)}),(0,A.useEffect)(()=>{null==L||L(O)},[L,O]);let $=(0,u.A)(()=>{L(!1)}),B=(0,u.A)(()=>{F({defaultActiveKey:`${c.XV[M]}.${E}`})});return O&&P?(0,a.jsx)(f.A,{message:(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[(0,a.jsx)(y.A,{type:"icon-warning",className:"mr-2",color:"var(--ui-warning-color)"}),(0,s.hw)({id:"branch.behind.alert.message"},{action:(0,a.jsx)(l.y,{permission:I[M],children:(0,a.jsx)(g.A.Link,{onClick:B,className:"mx-1",children:(0,s.hw)({id:"branch.behind.alert.action"})})})})]}),className:v()(j,"justify-center rounded-none w-full",T),type:"warning",closable:!0,onClose:$,..._}):null}},64091:function(e,t,i){"use strict";i.d(t,{TN:()=>j,z0:()=>A});var a=i(755694),n=i(515875),l=i(167223),r=i(371122),s=i(342392),o=i(307528),d=i(496411),c=i(325475),u=i(404245),p=i(653435),m=i(405147),h=i(187633),v=i(362917);let f={HTTP_API:{},DATA_SCHEMA:{},RESPONSE_COMPONENT:{},SECURITY_SCHEME:{},DOC:{},CUSTOM_ENDPOINT:{},HTTP_API_CASE:{},OAS_COMPONENT:{}},g=async(e,t)=>({data:((await (0,r.n_)((0,d.MJ)(),t)).data||[]).find(t=>t.id===e)}),y=async(e,t)=>({data:((await (0,s.n_)((0,d.MJ)(),t)).data||[]).find(t=>t.id===e)}),x={HTTP_API:(e,t)=>(0,l.P)(e,(0,d.MJ)(),t),DATA_SCHEMA:a.P,RESPONSE_COMPONENT:g,SECURITY_SCHEME:y,DOC:n.RD,CUSTOM_ENDPOINT:m.Tb,HTTP_API_CASE:h.P,OAS_COMPONENT:(e,t)=>(0,v.P)(String(e),t)},A=(0,c.vt)((e,t)=>{let i=async t=>{let{projectBranchId:i,entityType:a,entityId:n}=t,{data:l}=await (0,o.Kg)({projectBranchId:i,entityType:a,entityId:n});if(!l)return;let r=l.lastSyncedAt,s=new Date(r).getTime(),{data:c}=await x[a](n,(0,d.Hs)());if(!c)return;let m=new Date(c.updatedAt).getTime(),h={lastSyncedAt:r,baseBranchUpdatedAt:c.updatedAt,lastFetchedAt:new Date().toISOString(),isBehind:!1,isMounted:!0};if(m<=s)e(e=>({[a]:{...e[a],[n]:h}}));else{let{data:t}=await x[a](n);if(!t)return;(0,u.Ay)(t,c,(0,p.fN)())?e(e=>({[a]:{...e[a],[n]:h}})):e(e=>({[a]:{...e[a],[n]:{...h,isBehind:!0}}}))}};return{...f,fetchLastSyncedAt:async a=>{var n;let{projectBranchId:l,entityType:r,entityId:s}=a,o=null==(n=t()[r])?void 0:n[s];o&&Date.now()-new Date(o.lastFetchedAt).getTime()<1e4?e(e=>({[r]:{...e[r],[s]:{...o,isMounted:!0}}})):await i({projectBranchId:l,entityType:r,entityId:s})},refreshRegisteredState:async()=>{let e=t(),a=[];Object.entries(e).forEach(e=>{let[t,i]=e;Object.entries(i).forEach(e=>{let[i,n]=e,{isBehind:l,isMounted:r}=n;l&&r&&a.push({projectBranchId:(0,d.U3)(),entityType:t,entityId:Number(i)})})}),await Promise.all(a.map(e=>i(e)))},markAsUnmount:(t,i)=>{e(e=>({[t]:{...e[t],[i]:{...e[t][i],isMounted:!1}}}))},resetAll:()=>{e(f)}}}),j=A.getState},845309:function(e,t,i){"use strict";i.d(t,{A:()=>eI});var a=i(838e3),n=i(328321),l=i(898791),r=i(217490),s=i(53432),o=i(233025),d=i(977633),c=i(740565),u=i(140049),p=i(255529),m=i(641486),h=i(184319),v=i(526838),f=i(78731);let g=["name","parentId"];class y extends f.A{formatFields(e){if(this.formatField("name",e.name),void 0!==e.parentId){var t,i,a,n;let l=null==(t=(i=this.options).translateRelevantData)?void 0:t.call(i,"parentId",null!=(a=e.parentId)?a:0,this.options.dataSourceType);this.formatField("parentId",l?`${l} [${null!=(n=e.parentId)?n:0}]`:e.parentId)}}constructor(...e){super(...e),(0,v._)(this,"formatedFieldNames",{name:`${(0,c.hw)({id:"api.comparison.basicInfo.name"})} [name]`,parentId:`${(0,c.hw)({id:"groupByParent"})} [parentId]`})}}let x=function(e){let{dataComparisonIgnoreProperties:t,dataSchemaFolderMap:i}=(0,m.useContext)(h.Kd),n=(0,u.A)((e,t)=>{var a;return(null==(a=i[null!=t?t:"ORIGINAL"][e])?void 0:a.name)||""}),l=(0,m.useMemo)(()=>{var i,a,l,r;let u,p;return r={original:null!=(i=e.original)?i:{},modified:null!=(a=e.modified)?a:{},getFolderName:n,mask:null!=(l=t.dataSchemaFolder)?l:[]},u=[new o.A({key:"basicInfo",title:(0,c.hw)({id:"api.comparison.basicInfo"}),original:r.original,modified:r.modified,pickedFieldNames:g,defaultOpen:!0,mask:r.mask,formatter:y,hideFieldNameIfSingleField:!0,view:s.A,translateRelevantData:(e,t,i)=>0===t?(0,c.hw)({id:"defaultFolder"}):r.getFolderName(+t,i)})],p=(0,d.A)(u,r.original,r.modified,r.mask),p&&u.push(p),u},[e.original,e.modified,n,t.dataSchemaFolder]);return(0,a.jsx)(a.Fragment,{children:l.map(e=>(0,a.jsx)(p.A.Item,{name:e.key,noStyle:!0,children:(0,a.jsx)(e.view,{mask:e.mask,title:e.title,original:e.original,modified:e.modified,pickedFieldNames:e.pickedFieldNames,formatter:e.formatter,hideFieldNameIfSingleField:e.hideFieldNameIfSingleField,translateRelevantData:e.translateRelevantData})},e.key))})};var A=i(886001),j=i(310187),b=i(584117),w=i(431078),S=i(761528),C=i(507210);let I="parameters",N=e=>{let t=(0,m.useMemo)(()=>{var t;return null!=(t=e.original[I])?t:{}},[e.original[I]]),i=(0,m.useMemo)(()=>{var t;return null!=(t=e.modified[I])?t:{}},[e.modified[I]]),n=(0,m.useMemo)(()=>{var a;let n,l;return a={original:t,modified:i,mask:(0,b.A)(e.mask,I)},n=[new S.A({key:"query",title:(0,c.hw)({id:"message.queryParameter"}),original:a.original,modified:a.modified,pickedFieldName:"query",mask:a.mask,itemFormatter:C.A,view:w.A}),new S.A({key:"path",title:(0,c.hw)({id:"message.pathParameter"}),original:a.original,modified:a.modified,pickedFieldName:"path",mask:a.mask,itemFormatter:C.A,view:w.A}),new S.A({key:"cookie",title:"Cookie",original:a.original,modified:a.modified,pickedFieldName:"cookie",mask:a.mask,itemFormatter:C.A,view:w.A}),new S.A({key:"header",title:"Header",original:a.original,modified:a.modified,pickedFieldName:"header",mask:a.mask,itemFormatter:C.A,view:w.A})],l=(0,d.A)(n,a.original,a.modified,a.mask),l&&n.push(l),n},[t,i]);return(0,a.jsx)(p.A,{onValuesChange:(t,i)=>{var a;let n=Object.keys(i);null==(a=e.onChange)||a.call(e,{[I]:n.reduce((e,t)=>({...e,...i[t]}),{})})},children:n.map(n=>(0,a.jsx)(p.A.Item,{name:n.key,noStyle:!0,children:(0,a.jsx)(n.view,{title:`${e.title} / ${n.title}`,original:t,modified:i,pickedFieldNames:n.pickedFieldNames,mask:n.mask,formatter:n.formatter,hideFieldNameIfSingleField:n.hideFieldNameIfSingleField,translateRelevantData:n.translateRelevantData})},n.key))})};var k=i(512495),T=i.n(k);let M="securityScheme",E=e=>{let t=(0,m.useMemo)(()=>{var t;return null!=(t=e.original[M])?t:{}},[e.original[M]]),i=(0,m.useMemo)(()=>{var t;return null!=(t=e.modified[M])?t:{}},[e.modified[M]]),n=(0,m.useMemo)(()=>{var a;let n,l;return a={original:t,modified:i,mask:(0,b.A)(e.mask,M)},n=[new o.A({key:"required",title:"Required",original:a.original,modified:a.modified,pickedFieldNames:["required"],mask:a.mask,hideFieldNameIfSingleField:!0,view:s.A}),new o.A({key:"schemeGroups",title:"Scheme Groups",original:a.original,modified:a.modified,pickedFieldNames:["schemeGroups"],mask:a.mask,hideFieldNameIfSingleField:!0,view:s.A}),new o.A({key:"use",title:"Use",original:a.original,modified:a.modified,pickedFieldNames:["use"],mask:a.mask,hideFieldNameIfSingleField:!0,view:s.A}),new o.A({key:"useOverride",title:"Use Override",original:a.original,modified:a.modified,pickedFieldNames:["useOverride"],mask:a.mask,hideFieldNameIfSingleField:!0,view:s.A})],l=(0,d.A)(n,a.original,a.modified,a.mask),l&&n.push(l),n},[t,i]);return(0,a.jsx)(p.A,{onValuesChange:(i,a)=>{var n;let l=Object.keys(a),r={[M]:T()(t,l.reduce((e,t)=>({...e,...a[t]}),{}))};null==(n=e.onChange)||n.call(e,r)},children:n.map(n=>(0,a.jsx)(p.A.Item,{name:n.key,noStyle:!0,children:(0,a.jsx)(n.view,{title:`${e.title} / ${n.title}`,original:t,modified:i,pickedFieldNames:n.pickedFieldNames,mask:n.mask,formatter:n.formatter,hideFieldNameIfSingleField:n.hideFieldNameIfSingleField,translateRelevantData:n.translateRelevantData})},n.key))})},_=function(e){let{dataComparisonIgnoreProperties:t}=(0,m.useContext)(h.Kd),i=(0,m.useMemo)(()=>{var i,a,n,l;let r,u;return l={original:null!=(i=e.original)?i:{},modified:null!=(a=e.modified)?a:{},mask:null!=(n=t.endpointCase)?n:[]},r=[new o.A({key:"name",title:`${(0,c.hw)({id:"api.comparison.basicInfo"})} / ${(0,c.hw)({id:"name"})}`,original:l.original,modified:l.modified,pickedFieldNames:["name"],mask:l.mask,formatter:j.A,hideFieldNameIfSingleField:!0,view:s.A}),new o.A({key:"path",title:`${(0,c.hw)({id:"api.comparison.basicInfo"})} / ${(0,c.hw)({id:"version.label.path"})}`,original:l.original,modified:l.modified,pickedFieldNames:["path"],mask:l.mask,formatter:j.A,hideFieldNameIfSingleField:!0,view:s.A}),new o.A({key:"method",title:`${(0,c.hw)({id:"api.comparison.basicInfo"})} / ${(0,c.hw)({id:"version.label.method"})}`,original:l.original,modified:l.modified,pickedFieldNames:["method"],mask:l.mask,formatter:j.A,hideFieldNameIfSingleField:!0,view:s.A}),new o.A({key:"request params",title:(0,c.hw)({id:"api.label.parameters"}),original:l.original,modified:l.modified,view:N,pickedFieldNames:["parameters"],mask:l.mask}),new o.A({key:"request body",title:`${(0,c.hw)({id:"api.label.parameters"})} / Body`,original:l.original,modified:l.modified,pickedFieldNames:["requestBody"],mask:l.mask,formatter:j.A,hideFieldNameIfSingleField:!0,view:s.A}),new o.A({key:"request auth",title:`${(0,c.hw)({id:"api.label.parameters"})} / Auth`,original:l.original,modified:l.modified,pickedFieldNames:["auth"],mask:l.mask,formatter:j.A,hideFieldNameIfSingleField:!0,view:s.A}),new o.A({key:"security scheme",title:(0,c.hw)({id:"component.securityScheme.name"}),original:l.original,modified:l.modified,view:E,pickedFieldNames:["securityScheme"],mask:l.mask}),new o.A({key:"advanced settings",title:`${(0,c.hw)({id:"api.label.parameters"})} / ${(0,c.hw)({id:"setting"})}`,original:l.original,modified:l.modified,pickedFieldNames:["advancedSettings"],mask:l.mask,formatter:j.A,hideFieldNameIfSingleField:!0,view:s.A,translateRelevantData:(e,t)=>{if("isDefaultUrlEncoding"===e)switch(t){case 1:return(0,c.hw)({id:"projectSetting.advancedSetting.inherit"});case 2:return(0,c.hw)({id:"projectSetting.advancedSetting.encodeOptions.RFC3986"});case 3:return(0,c.hw)({id:"projectSetting.advancedSetting.encodeOptions.WHATWG"});case 0:return(0,c.hw)({id:"projectSetting.advancedSetting.encodeOptions.OFF"})}return""}}),new o.A({key:"common parameters",title:(0,c.hw)({id:"parameter.globals"}),original:l.original,modified:l.modified,pickedFieldNames:["commonParameters"],mask:l.mask,formatter:j.A,hideFieldNameIfSingleField:!0,view:s.A}),new o.A({title:(0,c.hw)({id:"api.management.preProcessor"}),key:"preProcessors",original:l.original,modified:l.modified,pickedFieldNames:["preProcessors","inheritPreProcessors"],view:s.A,formatter:j.A,mask:l.mask}),new o.A({key:"postProcessors",title:(0,c.hw)({id:"api.management.postProcessor"}),original:l.original,modified:l.modified,pickedFieldNames:["postProcessors","inheritPostProcessors"],formatter:j.A,view:s.A,mask:l.mask})],u=(0,d.A)(r,l.original,l.modified,l.mask),u&&r.push(u),r},[e.original,e.modified,t.endpointCase]);return(0,a.jsx)(a.Fragment,{children:i.map(e=>(0,a.jsx)(p.A.Item,{name:e.key,noStyle:!0,children:(0,a.jsx)(e.view,{title:e.title,original:e.original,modified:e.modified,pickedFieldNames:e.pickedFieldNames,mask:e.mask,formatter:e.formatter,hideFieldNameIfSingleField:e.hideFieldNameIfSingleField,translateRelevantData:e.translateRelevantData})},e.key))})};var F=i(139411),D=i(689368);class R extends f.A{formatFields(e){this.formatField("id",e.id),this.formatField("name",e.name),this.formatField("content",e.content),this.formatField("tags",e.tags)}constructor(...e){super(...e),(0,v._)(this,"formatedFieldNames",{id:"DocId [docId]",name:`${(0,c.hw)({id:"branch.diffView.format.name"})} [name]`,tags:`${(0,c.hw)({id:"tags"})} [tags]`,content:`${(0,c.hw)({id:"branch.diffView.format.content"})} [content]`})}}class O extends f.A{formatFields(e){e.doc&&this.formatField("doc",new R(this.options).format(e.doc))}constructor(...e){super(...e),(0,v._)(this,"formatedFieldNames",{doc:"Doc [Doc]"})}}class P extends f.A{formatFields(e){var t,i,a;let n=null==(t=(i=this.options).translateRelevantData)?void 0:t.call(i,"docId",null!=(a=e.docId)?a:0,this.options.dataSourceType);n&&(this.formatField("docId",e.docId),this.formatField("name",n.name),this.formatField("content",n.content),this.formatField("tags",n.tags))}constructor(...e){super(...e),(0,v._)(this,"formatedFieldNames",{docId:"docId [docId]",name:`${(0,c.hw)({id:"branch.diffView.format.name"})} [name]`,tags:`${(0,c.hw)({id:"tags"})} [tags]`,content:`${(0,c.hw)({id:"branch.diffView.format.content"})} [content]`})}}var L=i(488335);class $ extends f.A{formatFields(e){e.auth&&this.formatField("auth",new L.A(this.options).format(e.auth))}constructor(...e){super(...e),(0,v._)(this,"formatedFieldNames",{auth:"Auth [auth]"})}}class B extends f.A{formatFields(e){var t,i,a,n,l,r,s,o;this.formatField("directoryTreeDisplayStyle",null!=(r=null==(t=(i=this.options).translateRelevantData)?void 0:t.call(i,"directoryTreeDisplayStyle",null!=(l=null==e?void 0:e.directoryTreeDisplayStyle)?l:"",this.options.dataSourceType))?r:null==e?void 0:e.directoryTreeDisplayStyle),this.formatField("folderContentsDisplayingSettings",null!=(o=null==(a=(n=this.options).translateRelevantData)?void 0:a.call(n,"folderContentsDisplayingSettings",null!=(s=null==e?void 0:e.folderContentsDisplayingSettings)?s:"",this.options.dataSourceType))?o:null==e?void 0:e.folderContentsDisplayingSettings)}constructor(...e){super(...e),(0,v._)(this,"formatedFieldNames",{directoryTreeDisplayStyle:`${(0,c.hw)({id:"api.management.tabTitle.documentation.settings.directoryTreeDisplayStyle"})} [directoryTreeDisplayStyle]`,folderContentsDisplayingSettings:`${(0,c.hw)({id:"api.management.tabTitle.documentation.settings.contentVideMode"})} [folderContentsDisplayingSettings]`})}}let z=["name","parentId","serverId","description","identityPattern","shareSettings"];class U extends f.A{formatFields(e){var t,i,a,n,l,r,s;if(this.formatField("name",e.name),void 0!==e.parentId){let l=null==(t=(i=this.options).translateRelevantData)?void 0:t.call(i,"parentId",null!=(a=e.parentId)?a:0,this.options.dataSourceType);this.formatField("parentId",l?`${l} [${null!=(n=e.parentId)?n:0}]`:e.parentId)}if(e.serverId){let t=null==(l=(r=this.options).translateRelevantData)?void 0:l.call(r,"serverId",null!=(s=e.serverId)?s:""),i=e.serverId?` [${e.serverId}]`:"";this.formatField("serverId",t?`${t}${i}`:e.serverId)}this.formatField("identityPattern",e.identityPattern),this.formatField("description",e.description),e.shareSettings&&this.formatField("shareSettings",new B(this.options).format(e.shareSettings))}constructor(...e){super(...e),(0,v._)(this,"formatedFieldNames",{name:`${(0,c.hw)({id:"api.folder.setting.label.name"})} [name]`,parentId:`${(0,c.hw)({id:"groupByParent"})} [parentId]`,serverId:`${(0,c.hw)({id:"environmentDetail.label.server"})} [serverId]`,identityPattern:`${(0,c.hw)({id:"api.folder.setting.label.identification"})} [identityPattern]`,description:`${(0,c.hw)({id:"api.folder.setting.label.description"})} [description]`,shareSettings:`${(0,c.hw)({id:"api.management.tabTitle.documentation.settings"})} [shareSettings]`})}}let H=function(e){let{dataComparisonIgnoreProperties:t,apiFolderMap:i,docMap:n}=(0,m.useContext)(h.Kd),l=(0,u.A)((e,t)=>{var a;return(null==(a=i[null!=t?t:"ORIGINAL"][e])?void 0:a.name)||""}),r=(0,u.A)((e,t)=>n[null!=t?t:"ORIGINAL"][e]),v=(0,D.Ay)(e=>{let{settings:t}=e;return t.projectSettingData}),f=(0,m.useMemo)(()=>{var i,a,n,u,p;let m,h;return p={original:null!=(i=e.original)?i:{},modified:null!=(a=e.modified)?a:{},getFolderName:l,getDoc:r,projectSetting:v,mask:null!=(n=t.apiFolder)?n:[],docMaskFields:null!=(u=t.doc)?u:[]},m=[new o.A({key:"folderSettings",title:(0,c.hw)({id:"api.management.tabTitle.group"}),original:p.original,modified:p.modified,pickedFieldNames:z,defaultOpen:!0,mask:p.mask,formatter:U,hideFieldNameIfSingleField:!0,view:s.A,translateRelevantData:(e,t,i)=>{switch(e){case"parentId":if(0===t)return(0,c.hw)({id:"defaultFolder"});return p.getFolderName(+t,i);case"serverId":{var a,n,l;if(!t)return(0,c.hw)({id:"message.inheritParent"});let e=null==(n=p.projectSetting)||null==(a=n.servers)?void 0:a.find(e=>e.id===t);return null!=(l=null==e?void 0:e.name)?l:""}case"directoryTreeDisplayStyle":return({GENERAL_FOLDER:(0,c.hw)({id:"api.management.tabTitle.documentation.settings.directoryTreeDisplayStyle.general"}),MODULE_TITLE:(0,c.hw)({id:"api.management.tabTitle.documentation.settings.directoryTreeDisplayStyle.title"}),GO_TO_THE_SUBFOLDER:(0,c.hw)({id:"api.management.tabTitle.documentation.settings.directoryTreeDisplayStyle.navigateSubfolder"})})[t];case"folderContentsDisplayingSettings":return({HIDE:(0,c.hw)({id:"api.management.tabTitle.documentation.settings.contentVideMode.hide"}),SUB_LIST:(0,c.hw)({id:"api.management.tabTitle.documentation.settings.contentVideMode.subResource"}),CUSTOM_CONTENT:(0,c.hw)({id:"api.management.tabTitle.documentation.settings.contentVideMode.doc"})})[t];default:return""}}}),new o.A({key:"docId",title:(0,c.hw)({id:"api.management.tabTitle.doc"}),original:p.original,modified:p.modified,pickedFieldNames:["docId"],defaultOpen:!0,mask:p.mask,formatter:P,hideFieldNameIfSingleField:!0,view:s.A,translateRelevantData:(e,t,i)=>p.getDoc(+t,i)}),new o.A({key:"doc",title:(0,c.hw)({id:"api.management.tabTitle.doc"}),original:p.original,modified:p.modified,pickedFieldNames:["doc"],defaultOpen:!0,mask:p.docMaskFields.map(e=>`doc.${e}`),formatter:O,hideFieldNameIfSingleField:!0,view:s.A}),new o.A({title:(0,c.hw)({id:"api.management.preProcessor"}),key:"preProcessors",original:p.original,modified:p.modified,pickedFieldNames:["preProcessors","inheritPreProcessors"],view:s.A,mask:p.mask}),new o.A({key:"postProcessors",title:(0,c.hw)({id:"api.management.postProcessor"}),original:p.original,modified:p.modified,pickedFieldNames:["postProcessors","inheritPostProcessors"],view:s.A,mask:p.mask}),new o.A({key:"auth",title:(0,c.hw)({id:"api.management.tabTitle.auth"}),formatter:$,original:p.original,modified:p.modified,pickedFieldNames:["auth"],view:s.A,mask:p.mask})],h=(0,d.A)(m,p.original,p.modified,p.mask),h&&m.push(h),m},[e.original,e.modified,l,r,v,t.apiFolder,t.doc]);return(0,a.jsx)(a.Fragment,{children:f.map(e=>(0,a.jsx)(p.A.Item,{name:e.key,noStyle:!0,children:(0,a.jsx)(e.view,{mask:e.mask,title:e.title,original:e.original,modified:e.modified,pickedFieldNames:e.pickedFieldNames,formatter:e.formatter,hideFieldNameIfSingleField:e.hideFieldNameIfSingleField,translateRelevantData:e.translateRelevantData})},e.key))})};var V=i(684498),K=i(818880),q=i(893180);let G=function(e){let{dataComparisonIgnoreProperties:t,responseComponentFolderMap:i}=(0,m.useContext)(h.Kd),n=(0,u.A)((e,t)=>{var a;return(null==(a=i[null!=t?t:"ORIGINAL"][e])?void 0:a.name)||""}),l=(0,m.useMemo)(()=>{var i,a,l,r;let u,p;return r={original:null!=(i=e.original)?i:{},modified:null!=(a=e.modified)?a:{},getFolderName:n,mask:null!=(l=t.responseComponent)?l:[]},u=[new o.A({key:"name",title:`${(0,c.hw)({id:"api.comparison.basicInfo"})} / ${(0,c.hw)({id:"response.label.name"})}`,original:r.original,modified:r.modified,pickedFieldNames:["name"],defaultOpen:!0,mask:r.mask,formatter:q.A,hideFieldNameIfSingleField:!0,view:s.A}),new o.A({key:"basic define",title:`${(0,c.hw)({id:"api.comparison.basicInfo"})} / ${(0,c.hw)({id:"response.label.code"})}`,original:r.original,modified:r.modified,pickedFieldNames:["code","contentType","defaultEnable"],defaultOpen:!0,mask:r.mask,formatter:q.A,hideFieldNameIfSingleField:!0,view:s.A}),new o.A({key:"folderId",title:`${(0,c.hw)({id:"api.comparison.basicInfo"})} / ${(0,c.hw)({id:"response.label.folder"})}`,original:r.original,modified:r.modified,pickedFieldNames:["folderId"],defaultOpen:!0,mask:r.mask,formatter:q.A,hideFieldNameIfSingleField:!0,view:s.A,translateRelevantData:(e,t,i)=>0===t?(0,c.hw)({id:"defaultFolder"}):r.getFolderName(+t,i)}),new o.A({key:"jsonSchema",title:(0,c.hw)({id:"apiSchema.label.jsonSchema"}),original:r.original,modified:r.modified,defaultOpen:!0,mask:r.mask,pickedFieldNames:["jsonSchema"],hideFieldNameIfSingleField:!0,view:V.A}),new o.A({key:"itemSchema",title:(0,c.hw)({id:"apiSchema.label.jsonSchema"}),original:r.original,modified:r.modified,defaultOpen:!0,mask:r.mask,pickedFieldNames:["itemSchema"],hideFieldNameIfSingleField:!0,view:V.A}),new S.A({key:"response examples",title:(0,c.hw)({id:"api.label.responseExamples"}),original:r.original,modified:r.modified,pickedFieldName:"responseExamples",view:w.A,mask:r.mask,itemFormatter:K.A})],p=(0,d.A)(u,r.original,r.modified,r.mask),p&&u.push(p),u},[e.original,e.modified,n,t.responseComponent]);return(0,a.jsx)(a.Fragment,{children:l.map(e=>(0,a.jsx)(p.A.Item,{name:e.key,noStyle:!0,children:(0,a.jsx)(e.view,{mask:e.mask,title:e.title,original:e.original,modified:e.modified,pickedFieldNames:e.pickedFieldNames,formatter:e.formatter,hideFieldNameIfSingleField:e.hideFieldNameIfSingleField,translateRelevantData:e.translateRelevantData})},e.key))})},W=["name","parentId"];class J extends f.A{formatFields(e){this.formatField("name",e.name),this.formatField("parentId",e.parentId)}constructor(...e){super(...e),(0,v._)(this,"formatedFieldNames",{name:`${(0,c.hw)({id:"api.comparison.basicInfo.name"})} [name]`,parentId:`${(0,c.hw)({id:"groupByParent"})} [parentId]`})}}let Y=function(e){let{dataComparisonIgnoreProperties:t,responseComponentFolderMap:i}=(0,m.useContext)(h.Kd),n=(0,u.A)((e,t)=>{var a;return(null==(a=i[null!=t?t:"ORIGINAL"][e])?void 0:a.name)||""}),l=(0,m.useMemo)(()=>{var i,a,l,r;let u,p;return r={original:null!=(i=e.original)?i:{},modified:null!=(a=e.modified)?a:{},getFolderName:n,mask:null!=(l=t.responseComponentFolder)?l:[]},u=[new o.A({key:"basicInfo",title:(0,c.hw)({id:"api.comparison.basicInfo"}),original:r.original,modified:r.modified,pickedFieldNames:W,defaultOpen:!0,mask:r.mask,formatter:J,hideFieldNameIfSingleField:!0,view:s.A,translateRelevantData:(e,t,i)=>0===t?(0,c.hw)({id:"defaultFolder"}):r.getFolderName(+t,i)})],p=(0,d.A)(u,r.original,r.modified,r.mask),p&&u.push(p),u},[e.original,e.modified,n,t.responseComponentFolder]);return(0,a.jsx)(a.Fragment,{children:l.map(e=>(0,a.jsx)(p.A.Item,{name:e.key,noStyle:!0,children:(0,a.jsx)(e.view,{mask:e.mask,title:e.title,original:e.original,modified:e.modified,pickedFieldNames:e.pickedFieldNames,formatter:e.formatter,hideFieldNameIfSingleField:e.hideFieldNameIfSingleField,translateRelevantData:e.translateRelevantData})},e.key))})};var Z=i(672547);let Q=function(e){let{dataComparisonIgnoreProperties:t,securitySchemeFolderMap:i}=(0,m.useContext)(h.Kd),n=(0,u.A)((e,t)=>{var a;return(null==(a=i[null!=t?t:"ORIGINAL"][e])?void 0:a.name)||""}),l=(0,m.useMemo)(()=>{var i,a,l,r;let u,p;return r={original:null!=(i=e.original)?i:{},modified:null!=(a=e.modified)?a:{},getFolderName:n,mask:null!=(l=t.securityScheme)?l:[]},u=[new o.A({key:"name",title:`${(0,c.hw)({id:"api.comparison.basicInfo"})} / ${(0,c.hw)({id:"name"})}`,original:r.original,modified:r.modified,pickedFieldNames:["name"],defaultOpen:!0,mask:r.mask,formatter:q.A,hideFieldNameIfSingleField:!0,view:s.A}),new o.A({key:"folderId",title:`${(0,c.hw)({id:"api.comparison.basicInfo"})} / ${(0,c.hw)({id:"folder"})}`,original:r.original,modified:r.modified,pickedFieldNames:["folderId"],defaultOpen:!0,mask:r.mask,formatter:q.A,hideFieldNameIfSingleField:!0,view:s.A,translateRelevantData:(e,t,i)=>0===t?(0,c.hw)({id:"defaultFolder"}):r.getFolderName(+t,i)}),new o.A({key:"auth-configs",title:"Auth Configs",original:r.original,modified:r.modified,pickedFieldNames:["authType","oasAuthType","authConfigs"],defaultOpen:!0,mask:r.mask,formatter:Z.A,hideFieldNameIfSingleField:!0,view:s.A}),new o.A({key:"guidance-configs",title:"Guidance Configs",original:r.original,modified:r.modified,pickedFieldNames:["guidanceConfigs"],defaultOpen:!0,mask:r.mask,hideFieldNameIfSingleField:!0,view:s.A})],p=(0,d.A)(u,r.original,r.modified,r.mask),p&&u.push(p),u},[e.original,e.modified,n,t.securityScheme]);return(0,a.jsx)(a.Fragment,{children:l.map(e=>(0,a.jsx)(p.A.Item,{name:e.key,noStyle:!0,children:(0,a.jsx)(e.view,{mask:e.mask,title:e.title,original:e.original,modified:e.modified,pickedFieldNames:e.pickedFieldNames,formatter:e.formatter,hideFieldNameIfSingleField:e.hideFieldNameIfSingleField,translateRelevantData:e.translateRelevantData})},e.key))})};class X extends f.A{formatFields(e){var t,i,a;this.formatField("name",e.name),this.formatField("type",e.type);let n=null==(t=(i=this.options).translateRelevantData)?void 0:t.call(i,"folderId",e.folderId,this.options.dataSourceType);this.formatField("folderId",n?`${n} [${null!=(a=e.folderId)?a:0}]`:e.folderId)}constructor(...e){super(...e),(0,v._)(this,"formatedFieldNames",{name:`${(0,c.hw)({id:"apiSchema.label.name"})} [name]`,type:`${(0,c.hw)({id:"type"})} [type]`,folderId:`${(0,c.hw)({id:"apiSchema.label.folder"})} [folderId]`})}}let ee=function(e){let{dataComparisonIgnoreProperties:t,oasComponentFolderMap:i}=(0,m.useContext)(h.Kd),n=(0,u.A)((e,t)=>{var a,n;return(null==i||null==(n=i[null!=t?t:"ORIGINAL"])||null==(a=n[e])?void 0:a.name)||""}),l=(0,m.useMemo)(()=>{var i,a,l,r;let u,p;return r={original:null!=(i=e.original)?i:{},modified:null!=(a=e.modified)?a:{},getFolderName:n,mask:null!=(l=null==t?void 0:t.oasComponent)?l:[]},u=[new o.A({key:"name",title:`${(0,c.hw)({id:"api.comparison.basicInfo"})} / ${(0,c.hw)({id:"apiSchema.label.name"})}`,original:r.original,modified:r.modified,pickedFieldNames:["name"],defaultOpen:!0,mask:r.mask,formatter:X,hideFieldNameIfSingleField:!0,view:s.A}),new o.A({key:"folderId",title:`${(0,c.hw)({id:"api.comparison.basicInfo"})} / ${(0,c.hw)({id:"apiSchema.label.folder"})}`,original:r.original,modified:r.modified,pickedFieldNames:["folderId"],defaultOpen:!0,mask:r.mask,formatter:X,hideFieldNameIfSingleField:!0,view:s.A,translateRelevantData:(e,t,i)=>0===t?(0,c.hw)({id:"defaultFolder"}):r.getFolderName(+t,i)}),new o.A({key:"content",title:(0,c.hw)({id:"oasComponent.label.content"}),original:r.original,modified:r.modified,defaultOpen:!0,mask:r.mask,pickedFieldNames:["content"],hideFieldNameIfSingleField:!0,view:s.A})],p=(0,d.A)(u,r.original,r.modified,r.mask),p&&u.push(p),u},[e.original,e.modified,n,null==t?void 0:t.oasComponent]);return(0,a.jsx)(a.Fragment,{children:l.map(e=>(0,a.jsx)(p.A.Item,{name:e.key,noStyle:!0,children:(0,a.jsx)(e.view,{mask:e.mask,title:e.title,original:e.original,modified:e.modified,pickedFieldNames:e.pickedFieldNames,formatter:e.formatter,hideFieldNameIfSingleField:e.hideFieldNameIfSingleField,translateRelevantData:e.translateRelevantData})},e.key))})},et=["name","parentId"];class ei extends f.A{formatFields(e){if(this.formatField("name",e.name),void 0!==e.parentId){var t,i,a,n;let l=null==(t=(i=this.options).translateRelevantData)?void 0:t.call(i,"parentId",null!=(a=e.parentId)?a:0,this.options.dataSourceType);this.formatField("parentId",l?`${l} [${null!=(n=e.parentId)?n:0}]`:e.parentId)}}constructor(...e){super(...e),(0,v._)(this,"formatedFieldNames",{name:`${(0,c.hw)({id:"api.comparison.basicInfo.name"})} [name]`,parentId:`${(0,c.hw)({id:"groupByParent"})} [parentId]`})}}let ea=function(e){let{dataComparisonIgnoreProperties:t,oasComponentFolderMap:i}=(0,m.useContext)(h.Kd),n=(0,u.A)((e,t)=>{var a,n;return(null==i||null==(n=i[null!=t?t:"ORIGINAL"])||null==(a=n[e])?void 0:a.name)||""}),l=(0,m.useMemo)(()=>{var i,a,l,r;let u,p;return r={original:null!=(i=e.original)?i:{},modified:null!=(a=e.modified)?a:{},getFolderName:n,mask:null!=(l=null==t?void 0:t.oasComponentFolder)?l:[]},u=[new o.A({key:"basicInfo",title:(0,c.hw)({id:"api.comparison.basicInfo"}),original:r.original,modified:r.modified,pickedFieldNames:et,defaultOpen:!0,mask:r.mask,formatter:ei,hideFieldNameIfSingleField:!0,view:s.A,translateRelevantData:(e,t,i)=>0===t?(0,c.hw)({id:"defaultFolder"}):r.getFolderName(+t,i)})],p=(0,d.A)(u,r.original,r.modified,r.mask),p&&u.push(p),u},[e.original,e.modified,n,null==t?void 0:t.oasComponentFolder]);return(0,a.jsx)(a.Fragment,{children:l.map(e=>(0,a.jsx)(p.A.Item,{name:e.key,noStyle:!0,children:(0,a.jsx)(e.view,{mask:e.mask,title:e.title,original:e.original,modified:e.modified,pickedFieldNames:e.pickedFieldNames,formatter:e.formatter,hideFieldNameIfSingleField:e.hideFieldNameIfSingleField,translateRelevantData:e.translateRelevantData})},e.key))})},en=function(e){let{dataComparisonIgnoreProperties:t,securitySchemeFolderMap:i}=(0,m.useContext)(h.Kd),n=(0,u.A)((e,t)=>{var a;return(null==(a=i[null!=t?t:"ORIGINAL"][e])?void 0:a.name)||""}),l=(0,m.useMemo)(()=>{var i,a,l,r;let u,p;return r={original:null!=(i=e.original)?i:{},modified:null!=(a=e.modified)?a:{},getFolderName:n,mask:null!=(l=t.securitySchemeFolder)?l:[]},u=[new o.A({key:"basicInfo",title:(0,c.hw)({id:"api.comparison.basicInfo"}),original:r.original,modified:r.modified,pickedFieldNames:W,defaultOpen:!0,mask:r.mask,formatter:J,hideFieldNameIfSingleField:!0,view:s.A,translateRelevantData:(e,t,i)=>0===t?(0,c.hw)({id:"defaultFolder"}):r.getFolderName(+t,i)})],p=(0,d.A)(u,r.original,r.modified,r.mask),p&&u.push(p),u},[e.original,e.modified,n,t.securitySchemeFolder]);return(0,a.jsx)(a.Fragment,{children:l.map(e=>(0,a.jsx)(p.A.Item,{name:e.key,noStyle:!0,children:(0,a.jsx)(e.view,{mask:e.mask,title:e.title,original:e.original,modified:e.modified,pickedFieldNames:e.pickedFieldNames,formatter:e.formatter,hideFieldNameIfSingleField:e.hideFieldNameIfSingleField,translateRelevantData:e.translateRelevantData})},e.key))})};var el=i(730362),er=i(405147),es=i(755694),eo=i(515875),ed=i(167223),ec=i(187633),eu=i(371122),ep=i(5233),em=i(362917),eh=i(35281),ev=i(212462),ef=i(342392),eg=i(400568),ey=i(496411),ex=i(81319),eA=i(751455),ej=i(757657);let eb=async(e,t)=>({data:((await (0,eu.n_)((0,ey.MJ)(),t)).data||[]).find(t=>t.id===e)}),ew=async(e,t)=>({data:((await (0,ef.n_)((0,ey.MJ)(),t)).data||[]).find(t=>t.id===e)}),eS={apiDetail:e=>(0,a.jsx)(F.A,{...e}),apiCase:e=>(0,a.jsx)(_,{...e}),doc:e=>(0,a.jsx)(A.A,{...e}),apiSchema:e=>(0,a.jsx)(r.A,{...e}),httpResponse:e=>(0,a.jsx)(G,{...e}),apiDetailFolder:e=>(0,a.jsx)(H,{...e}),apiSchemaFolder:e=>(0,a.jsx)(x,{...e}),responseFolder:e=>(0,a.jsx)(Y,{...e}),SECURITY_SCHEME_FOLDER:e=>(0,a.jsx)(en,{...e}),SECURITY_SCHEME:e=>(0,a.jsx)(Q,{...e}),CUSTOM_ENDPOINT:e=>(0,a.jsx)(l.A,{...e}),OAS_COMPONENT:e=>(0,a.jsx)(ee,{...e}),OAS_COMPONENT_FOLDER:e=>(0,a.jsx)(ea,{...e})},eC={apiDetail:(e,t)=>(0,ed.P)(e,(0,ey.MJ)(),t),apiCase:ec.P,doc:eo.RD,apiSchema:es.P,httpResponse:eb,apiDetailFolder:ep.P,apiSchemaFolder:el.P,responseFolder:ev.P,SECURITY_SCHEME:ew,SECURITY_SCHEME_FOLDER:eg.P,CUSTOM_ENDPOINT:er.Tb,OAS_COMPONENT:(e,t)=>(0,em.P)(String(e),t),OAS_COMPONENT_FOLDER:eh.P},eI=function(e){var t,i;let{type:l,values:r,isResolveConflictsMode:s=!1,onConflictResolved:o,conflictConfigs:d,beforeLabel:u,afterLabel:v,leftBranchId:f=(0,ey.sI)(),rightBranchId:g=(0,ey.U3)(),enableGetLatestData:y=!0,extraFormatterData:x}=e,[A,j]=(0,m.useState)({original:r.leftSideState||void 0,modified:r.rightSideState||void 0}),{loading:b}=(0,eA.Ay)(async()=>{var e,t;if(!y)return void j({original:r.leftSideState||void 0,modified:r.rightSideState||void 0});let i=null==(e=r.leftSideState)?void 0:e.id,a=null==(t=r.rightSideState)?void 0:t.id;try{if(i){let[{data:e={}},{data:t={}}]=await Promise.all([eC[l](i,f),eC[l](a,g)]);j({original:e,modified:t})}else{let{data:e}=await eC[l](a,g);j({original:void 0,modified:e})}}catch(e){j({original:r.leftSideState||void 0,modified:r.rightSideState||void 0})}},{refreshDeps:[null==(t=r.leftSideState)?void 0:t.id,null==(i=r.rightSideState)?void 0:i.id,f,g]}),[w]=p.A.useForm(),{responseComponentMap:S,dataSchemaFolderMap:C,responseComponentFolderMap:I,apiFolderMap:N,docMap:k,securitySchemeMap:T,securitySchemeFolderMap:M,oasComponentFolderMap:E,oasComponentMap:_}=(0,ex.Ay)(e=>({responseComponentMap:e.baseResponseComponentMap,dataSchemaFolderMap:e.baseSchemaFolderMap,responseComponentFolderMap:e.baseResponseFolderMap,apiFolderMap:e.baseHttpFolderMap,docMap:e.baseDocMap,securitySchemeMap:e.baseSecuritySchemeMap,securitySchemeFolderMap:e.baseSecuritySchemeFolderMap,oasComponentFolderMap:e.baseOasComponentFolderMap,oasComponentMap:e.baseOasComponentMap})),F=(0,m.useMemo)(()=>{var e,t,i,a,n,l,r,s,o,d,c,u,p,m,h,v,f,g,y,A,j,b,w,F,D,R,O,P,L,$,B,z,U,H,V;return{apiFolderMap:{ORIGINAL:null!=(y=null==x||null==(e=x.apiFolderMap)?void 0:e.ORIGINAL)?y:N,MODIFIED:null==x||null==(t=x.apiFolderMap)?void 0:t.MODIFIED},dataSchemaFolderMap:null!=(j=null==x?void 0:x.dataSchemaFolderMap)?j:{ORIGINAL:null!=(A=null==x||null==(i=x.dataSchemaFolderMap)?void 0:i.ORIGINAL)?A:C,MODIFIED:null==x||null==(a=x.dataSchemaFolderMap)?void 0:a.MODIFIED},responseComponentFolderMap:null!=(w=null==x?void 0:x.responseComponentFolderMap)?w:{ORIGINAL:null!=(b=null==x||null==(n=x.responseComponentFolderMap)?void 0:n.ORIGINAL)?b:I,MODIFIED:null==x||null==(l=x.responseComponentFolderMap)?void 0:l.MODIFIED},responseComponentMap:null!=(D=null==x?void 0:x.responseComponentMap)?D:{ORIGINAL:null!=(F=null==x||null==(r=x.responseComponentMap)?void 0:r.ORIGINAL)?F:S,MODIFIED:null==x||null==(s=x.responseComponentMap)?void 0:s.MODIFIED},docMap:null!=(O=null==x?void 0:x.docMap)?O:{ORIGINAL:null!=(R=null==x||null==(o=x.docMap)?void 0:o.ORIGINAL)?R:k,MODIFIED:null==x||null==(d=x.docMap)?void 0:d.MODIFIED},securitySchemeMap:null!=(L=null==x?void 0:x.securitySchemeMap)?L:{ORIGINAL:null!=(P=null==x||null==(c=x.securitySchemeMap)?void 0:c.ORIGINAL)?P:T,MODIFIED:null==x||null==(u=x.securitySchemeMap)?void 0:u.MODIFIED},securitySchemeFolderMap:null!=(B=null==x?void 0:x.securitySchemeFolderMap)?B:{ORIGINAL:null!=($=null==x||null==(p=x.securitySchemeFolderMap)?void 0:p.ORIGINAL)?$:M,MODIFIED:null==x||null==(m=x.securitySchemeFolderMap)?void 0:m.MODIFIED},oasComponentFolderMap:null!=(U=null==x?void 0:x.oasComponentFolderMap)?U:{ORIGINAL:null!=(z=null==x||null==(h=x.oasComponentFolderMap)?void 0:h.ORIGINAL)?z:E,MODIFIED:null==x||null==(v=x.oasComponentFolderMap)?void 0:v.MODIFIED},oasComponentMap:null!=(V=null==x?void 0:x.oasComponentMap)?V:{ORIGINAL:null!=(H=null==x||null==(f=x.oasComponentMap)?void 0:f.ORIGINAL)?H:_,MODIFIED:null==x||null==(g=x.oasComponentMap)?void 0:g.MODIFIED}}},[N,C,k,null==x?void 0:x.apiFolderMap,null==x?void 0:x.dataSchemaFolderMap,null==x?void 0:x.docMap,null==x?void 0:x.responseComponentFolderMap,null==x?void 0:x.responseComponentMap,null==x?void 0:x.securitySchemeFolderMap,null==x?void 0:x.securitySchemeMap,null==x?void 0:x.oasComponentFolderMap,null==x?void 0:x.oasComponentMap,I,S,T,M,E,_]);return(0,a.jsx)(h.Ay,{comparisonProps:{isResolveConflictsMode:s,beforeLabel:u,afterLabel:v,...d,...r,comparisonType:"BRANCH",extraFormatterData:F},children:(0,a.jsx)(ej.A,{loading:b,children:(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[s&&(0,a.jsx)(n.A,{}),(0,a.jsx)(p.A,{form:w,onValuesChange:o,className:"flex-1 overflow-y-auto",children:eS[l](A)}),(0,a.jsx)(h.Kd.Consumer,{children:e=>{let{hasDifference:t}=e;return!t&&(0,a.jsx)("div",{className:"app-text-secondary-16 text-center my-12",children:(0,c.hw)({id:"version.history.no-difference"})})}})]})})})}},133150:function(e,t,i){"use strict";i.d(t,{A:()=>l});var a=i(838e3),n=i(671466);function l(e){let{type:t="VERSION",...i}=e;return(0,a.jsx)(n.A,{type:"SPRINT"===t?"icon-branch3":"icon-v2",...i})}},917359:function(e,t,i){"use strict";i.d(t,{A:()=>o});var a=i(838e3),n=i(740565),l=i(838487),r=i.n(l);let s="tag-PSH8E4";function o(e){let{visible:t=!0,icon:i,className:l,style:o}=e;return t?(0,a.jsxs)("span",{className:r()(s,l),style:o,children:[i,(0,a.jsx)(n.sA,{id:"app.settings.projectBranch.mainBranch"})]}):null}},757657:function(e,t,i){"use strict";i.d(t,{A:()=>r});var a=i(838e3),n=i(794397),l=i(823115);let r=e=>{let{loading:t,children:i}=e;return t?(0,a.jsx)("div",{className:"w-full h-full flex flex-col items-center justify-center",children:(0,a.jsx)(n.A,{children:(0,a.jsx)(l.A,{})})}):(0,a.jsx)(a.Fragment,{children:i})}},552639:function(e,t,i){"use strict";i.d(t,{A:()=>o});var a=i(838e3),n=i(471504);i(280831);var l=i(140049),r=i(662387),s=i(641486);let o=e=>{let{side:t,children:i,modalSize:o,setDefaultModalSize:d}=e,[c,u]=(0,s.useState)(960),p=(0,l.A)(e=>{u(e[0].size)}),m=(0,s.useMemo)(()=>[{size:c,minSize:150,maxSize:1180,resize:"dynamic"},{minSize:-Number.MAX_SAFE_INTEGER,resize:"stretch"}],[c]);return(0,r.A)(()=>{c<240&&u(240),c>=960&&(u(960),null==d||d())},[c]),(0,r.A)(()=>{u("720"===o?960:320)},[o]),(0,a.jsxs)(n.vh,{panelWidths:m,onResizeEnd:p,borderColor:"var(--ui-border-color-split)",children:[(0,a.jsx)("section",{className:"h-full w-full",children:t}),960!==c&&(0,a.jsx)("section",{className:"h-full w-full",children:i})]})}},823115:function(e,t,i){"use strict";i.d(t,{A:()=>r});var a=i(838e3),n=i(671466),l=i(594835);let r=()=>(0,a.jsx)("div",{className:"w-full h-full flex justify-center items-center",children:(0,a.jsx)("div",{className:l.A.emptyContainer,children:(0,a.jsx)("div",{className:l.A.empty,children:(0,a.jsx)(n.A,{type:"icon-branch3",size:32,color:"var(--ui-disabled-color)"})})})})},688089:function(e,t,i){"use strict";i.d(t,{A:()=>d});var a=i(838e3),n=i(740565),l=i(838487),r=i.n(l);let s="statusTag-ryg4T2",o={INSERT:(0,a.jsx)(n.sA,{id:"branch.info.sprintAdd.tag"}),UPDATE:(0,a.jsx)(n.sA,{id:"branch.info.sprintUpdate.tag"}),UNMODIFIED:(0,a.jsx)(n.sA,{id:"branch.info.sprintNoop.tag"})},d=e=>{let{comparisonStatus:t,className:i}=e;return"NO_COMPARE"===t?null:(0,a.jsx)("span",{className:r()(`${t.toLowerCase()}-tag`,s,i),children:(0,a.jsx)("span",{className:"statusText",children:o[t]})})}},507822:function(e,t,i){"use strict";i.d(t,{YM:()=>a});let a="fullScreen"},221339:function(e,t,i){"use strict";i.d(t,{z:()=>o});var a=i(838e3),n=i(471504),l=i(671466),r=i(474030),s=i(553047);let o={[r.Fn]:e=>(0,a.jsx)(a.Fragment,{}),apiDetail:e=>(0,a.jsx)(n.mn,{abbr:!0,method:e.method,className:"text-left block",title:e.name,style:{height:16},apiType:e.type,hiddenMethod:"webhook"===e.type}),apiCase:e=>(0,a.jsx)(n.a9,{}),CUSTOM_ENDPOINT:e=>(0,a.jsx)(s.w,{protocol:e.protocol}),doc:e=>(0,a.jsx)(l.A,{title:e.name,type:"icon-file-docs",size:16}),apiSchema:e=>(0,a.jsx)(n.NZ,{title:e.displayName||e.name}),httpResponse:e=>(0,a.jsx)(l.A,{title:e.name,size:16,type:"icon-response-component",color:"var(--ui-blue-6)"}),[r.qt]:()=>(0,a.jsx)(l.A,{type:"icon-Endpoints",size:16,className:"text-color-tertiary"}),[r.Xl]:()=>(0,a.jsx)(l.A,{type:"icon-Schemas",size:16,className:"text-color-tertiary"}),[r.Do]:()=>(0,a.jsx)(l.A,{type:"icon-Components",size:16,className:"text-color-tertiary"}),[r.Lb]:()=>(0,a.jsx)(l.A,{type:"icon-folder-response",size:16,className:"text-color-secondary"}),SECURITY_SCHEME:e=>"combination"===e.authType?(0,a.jsx)(l.A,{title:e.name,size:16,type:"icon-ShieldKeyholeGroup",color:"var(--ui-cyan-6)"}):(0,a.jsx)(l.A,{title:e.name,size:16,type:"icon-ShieldKeyhole",color:"var(--ui-blue-6)"}),OAS_COMPONENT:e=>(0,a.jsx)(l.A,{title:e.name,type:"icon-FileDefault",size:16}),OAS_COMPONENT_FOLDER:(e,t)=>(null==t?void 0:t.expanded)?(0,a.jsx)(l.A,{type:"icon-folder-open",size:16}):(0,a.jsx)(l.A,{type:"icon-FolderDefault",size:16})}},647146:function(e,t,i){"use strict";i.d(t,{A:()=>eG});var a=i(838e3),n=i(608017),l=i(843212),r=i(744283),s=i(740565),o=i(957705),d=i(2183),c=i(985518),u=i(523845),p=i(307528),m=i(140049),h=i(662387),v=i(751455),f=i(838487),g=i.n(f),y=i(764007),x=i(524381),A=i(458184),j=i(671466),b=i(398380),w=i(641486),S=i(618487),C=i(64091),I=i(757657),N=i(552639),k=i(823115),T=i(507822),M=i(351141),E=i(171791);let _=(0,w.createContext)({}),F=e=>{let{children:t,value:i}=e;return(0,a.jsx)(_.Provider,{value:i,children:t})},D="pickModal-Lsd0SL",R="miniSize-yhQvGo";var O=i(184319),P=i(689368),L=i(471504);i(280831);var $=i(977633),B=i(956376);let z=(0,w.createContext)({enableFieldNameDescription:!0,dataComparisonIgnoreProperties:{},projectMemberMap:{}}),U=e=>{let{children:t}=e,i=(0,P.Ay)(e=>{let{projectMember:t}=e;return t.currentProjectMembers}),n=(0,w.useMemo)(()=>{var e;return null!=(e=null==i?void 0:i.reduce((e,t)=>(e[t.userId]=t,e),{}))?e:{}},[i]),l=(0,S.useModel)("clientConfig",e=>{let{dynamicConfig:t}=e;return t.branchDataComparisonIgnoreProperties}),r=(0,s.JK)().toLowerCase();return(0,a.jsx)(z.Provider,{value:{enableFieldNameDescription:O.My.includes(r),dataComparisonIgnoreProperties:l,projectMemberMap:n},children:t})};var H=i(292137),V=i(694931);let K=function(e){let{dataComparisonIgnoreProperties:t}=(0,w.useContext)(z),i=(0,P.Ay)(e=>e.apiSchemaFolder.apiSchemaFolderMap),n=(0,m.A)(e=>{var t;return(null==(t=i[e])?void 0:t.name)||""}),l=(0,w.useMemo)(()=>{var i,a,l;let r,o;return l={value:null!=(i=e.value)?i:{},getFolderName:n,mask:null!=(a=t.dataSchema)?a:[]},r=[new V.A({key:"basicInfoField",title:(0,s.hw)({id:"apiSchema.comparison.basicInfo"}),value:l.value,pickedFieldNames:B.G,defaultOpen:!0,mask:l.mask,formatter:B.A,hideFieldNameIfSingleField:!0,view:H.A,translateRelevantData:(e,t)=>0===t?(0,s.hw)({id:"defaultFolder"}):l.getFolderName(+t)}),new V.A({key:"jsonSchema",title:(0,s.hw)({id:"apiSchema.label.jsonSchema"}),value:l.value,defaultOpen:!0,mask:l.mask,pickedFieldNames:["jsonSchema"],hideFieldNameIfSingleField:!0,view:H.A})],o=(0,$._)(r,l.value,l.mask),o&&r.push(o),r},[e.value,n,t.dataSchema]);return(0,a.jsx)(a.Fragment,{children:l.map(e=>(0,a.jsx)(e.view,{mask:e.mask,title:e.title,value:e.value,pickedFieldNames:e.pickedFieldNames,formatter:e.formatter,hideFieldNameIfSingleField:e.hideFieldNameIfSingleField,translateRelevantData:e.translateRelevantData},e.key))})};var q=i(218509);let G=function(e){let{dataComparisonIgnoreProperties:t}=(0,w.useContext)(z),i=(0,P.Ay)(e=>{let{apiDetailFolder:t}=e;return t.apiDetailFolderMap}),n=(0,m.A)(e=>{var t;return(null==i||null==(t=i[e])?void 0:t.name)||""}),l=(0,w.useMemo)(()=>{var i,a,l;let r,o;return l={value:null!=(i=e.value)?i:{},mask:null!=(a=t.doc)?a:[],getFolderName:n},r=[new V.A({key:"basicInfoField",title:(0,s.hw)({id:"apiSchema.comparison.basicInfo"}),value:l.value,pickedFieldNames:q.x,formatter:q.A,mask:l.mask,hideFieldNameIfSingleField:!0,view:H.A,translateRelevantData:(e,t)=>0===t?(0,s.hw)({id:"defaultFolder"}):l.getFolderName(+t)}),new V.A({key:"content",title:(0,s.hw)({id:"version.label.content"}),value:l.value,pickedFieldNames:["content"],mask:l.mask,hideFieldNameIfSingleField:!0,view:H.A})],o=(0,$._)(r,l.value,l.mask),o&&r.push(o),r},[e.value,t.doc,n]);return(0,a.jsx)(a.Fragment,{children:l.map(e=>(0,a.jsx)(e.view,{mask:e.mask,title:e.title,value:e.value,pickedFieldNames:e.pickedFieldNames,formatter:e.formatter,hideFieldNameIfSingleField:e.hideFieldNameIfSingleField,translateRelevantData:e.translateRelevantData},e.key))})};var W=i(269966),J=i(701604),Y=i(270039),Z=i(14941),Q=i(818880),X=i(877404),ee=i(584117),et=i(466504);let ei=e=>(0,a.jsx)(et.A,{...e,title:e.title,formatter:e.formatter,value:e.value,hideFieldNameIfSingleField:e.hideFieldNameIfSingleField,translateRelevantData:e.translateRelevantData,mask:e.mask}),ea=e=>{let t=e.pickedFieldNames[0],i=(0,w.useMemo)(()=>{var i,a;return null!=(a=null==(i=e.value)?void 0:i[t])?a:[]},[t,e.value]),n=(0,w.useMemo)(()=>{let a=(0,ee.A)(e.mask,`${t}[]`);return i.map(e=>{var t;return{name:String(null==e?void 0:e.id),title:(null==e?void 0:e.name)||String(null!=(t=null==e?void 0:e.id)?t:"")||String(null==e?void 0:e.id),value:e,mask:a}})},[e.mask,t,i]);return(0,a.jsx)(a.Fragment,{children:n.map(i=>(0,a.jsx)(ei,{title:`${e.title} / ${i.title}`,value:i.value,formatter:e.formatter,mask:i.mask},t))})};var en=i(526838),el=i(557010);class er extends el.A{get pickedFieldNames(){return[this.fieldName]}get formatter(){return this.itemFormatter}constructor({pickedFieldName:e,itemFormatter:t,...i}){super(i),(0,en._)(this,"fieldName",void 0),(0,en._)(this,"itemFormatter",void 0),this.fieldName=e,this.itemFormatter=t}}var es=i(78731),eo=i(507210);class ed extends es.A{formatFields(e){var t,i,a,n;this.formatField("header",null==e||null==(t=e.header)?void 0:t.map(e=>new eo.A(this.options).format(e))),this.formatField("cookie",null==e||null==(i=e.cookie)?void 0:i.map(e=>new eo.A(this.options).format(e))),this.formatField("query",null==e||null==(a=e.query)?void 0:a.map(e=>new eo.A(this.options).format(e))),this.formatField("path",null==e||null==(n=e.path)?void 0:n.map(e=>new eo.A(this.options).format(e)))}constructor(...e){super(...e),(0,en._)(this,"formatedFieldNames",{header:"Header [header]",cookie:"Cookie [cookie]",query:`${(0,s.hw)({id:"message.queryParameter"})} [query]`,path:`${(0,s.hw)({id:"message.pathParameter"})} [path]`})}}let ec="parameters",eu=e=>{let t=(0,w.useMemo)(()=>{var t,i;return null!=(i=null==(t=e.value)?void 0:t[ec])?i:{}},[e.value]),i=(0,w.useMemo)(()=>{var i;let a,n;if(!t)return[];return i={value:t,mask:(0,ee.A)(e.mask,ec)},a=[new V.A({key:"query",title:(0,s.hw)({id:"message.queryParameter"}),value:i.value,pickedFieldNames:["query"],mask:i.mask,formatter:ed,hideFieldNameIfSingleField:!0,view:H.A}),new V.A({key:"path",title:(0,s.hw)({id:"message.pathParameter"}),value:i.value,pickedFieldNames:["path"],mask:i.mask,formatter:ed,hideFieldNameIfSingleField:!0,view:H.A}),new V.A({key:"cookie",title:"Cookie",value:i.value,pickedFieldNames:["cookie"],mask:i.mask,formatter:ed,hideFieldNameIfSingleField:!0,view:H.A}),new V.A({key:"header",title:"Header",value:i.value,pickedFieldNames:["header"],mask:i.mask,formatter:ed,hideFieldNameIfSingleField:!0,view:H.A})],n=(0,$._)(a,i.value,i.mask),n&&a.push(n),a},[e.mask,t]);return(0,a.jsx)(a.Fragment,{children:i.map(i=>(0,a.jsx)(i.view,{title:`${e.title} / ${i.title}`,value:t,pickedFieldNames:i.pickedFieldNames,mask:i.mask,formatter:i.formatter,hideFieldNameIfSingleField:i.hideFieldNameIfSingleField,translateRelevantData:i.translateRelevantData},i.key))})},ep=e=>{let t=(0,P.Ay)(e=>{let{teamMember:t}=e;return t.teamMemberList.reduce((e,t)=>(e[t.userId]=t,e),{})}),{projectMemberMap:i,dataComparisonIgnoreProperties:n}=(0,w.useContext)(z),l=(0,S.useModel)("projectCustomApiField",e=>{let{data:t}=e;return t}),r=(0,P.Ay)(e=>{let{settings:t}=e;return t.projectSettingData}),o=(0,P.Ay)(e=>{let{apiDetailFolder:t}=e;return t.apiDetailFolderMap}),d=(0,m.A)(e=>{var t;return(null==o||null==(t=o[e])?void 0:t.name)||""}),c=(0,P.Ay)(e=>{let{apiResponse:t}=e;return t.apiResponseMap}),u=(0,m.A)(e=>{var t;return(null==c||null==(t=c[e])?void 0:t.name)||""}),p=(0,w.useMemo)(()=>{var a,o,c;let p,m;return c={value:null!=(a=e.value)?a:{},getFolderName:d,projectMemberMap:i,teamMemberMap:t,apiFieldList:l,projectSetting:r,mask:null!=(o=n.httpApi)?o:[],getResponseComponentName:u},p=[new V.A({key:"basic info field",title:(0,s.hw)({id:"api.comparison.basicInfo"}),value:c.value,pickedFieldNames:Z.e,mask:c.mask,formatter:Z.A,hideFieldNameIfSingleField:!0,view:H.A,translateRelevantData:(e,t)=>{var i,a,n,l;switch(e){case"folderId":if(0===t)return(0,s.hw)({id:"defaultFolder"});return c.getFolderName(+t);case"status":return(null==(i=W.zj[t])?void 0:i.labelLocale)?(0,s.hw)({id:W.zj[t].labelLocale}):"";case"responsibleId":{if(0===t)return(0,s.hw)({id:"app.settings.hasNoSetting"});let e=c.projectMemberMap[t];if(e)return`${e.nickname||e.user.name||e.user.username} (@${e.user.name})`;let i=c.teamMemberMap[t];if(i)return i.user.username;return""}case"serverId":{if(!t)return(0,s.hw)({id:"message.inheritParent"});let e=null==(n=c.projectSetting)||null==(a=n.servers)?void 0:a.find(e=>e.id===t);return null!=(l=null==e?void 0:e.name)?l:""}case"customApiFields":{let e=c.apiFieldList.find(e=>String(e.id)===String(t));if(e)return e.fieldName;return""}default:return null}}}),new V.A({key:"request params",title:(0,s.hw)({id:"api.label.parameters"}),value:c.value,view:eu,pickedFieldNames:["parameters"],mask:c.mask}),new V.A({key:"request body",title:`${(0,s.hw)({id:"api.label.parameters"})} / Body`,value:c.value,pickedFieldNames:["requestBody"],mask:c.mask,formatter:Z.A,hideFieldNameIfSingleField:!0,view:H.A}),new V.A({key:"request auth",title:`${(0,s.hw)({id:"api.label.parameters"})} / Auth`,value:c.value,pickedFieldNames:["auth"],mask:c.mask,formatter:Z.A,hideFieldNameIfSingleField:!0,view:H.A}),new V.A({key:"advanced settings",title:`${(0,s.hw)({id:"api.label.parameters"})} / ${(0,s.hw)({id:"setting"})}`,value:c.value,pickedFieldNames:["advancedSettings"],mask:c.mask,formatter:Z.A,hideFieldNameIfSingleField:!0,view:H.A,translateRelevantData:(e,t)=>{if("isDefaultUrlEncoding"===e)switch(t){case 1:return(0,s.hw)({id:"projectSetting.advancedSetting.inherit"});case 2:return(0,s.hw)({id:"projectSetting.advancedSetting.encodeOptions.RFC3986"});case 3:return(0,s.hw)({id:"projectSetting.advancedSetting.encodeOptions.WHATWG"});case 0:return(0,s.hw)({id:"projectSetting.advancedSetting.encodeOptions.OFF"})}return""}}),new V.A({key:"common parameters",title:(0,s.hw)({id:"parameter.globals"}),value:c.value,pickedFieldNames:["commonParameters"],mask:c.mask,formatter:Z.A,hideFieldNameIfSingleField:!0,view:H.A}),new V.A({key:"common response status",title:(0,s.hw)({id:"component.response.title"}),value:c.value,pickedFieldNames:["commonResponseStatus"],mask:c.mask,formatter:Y.A,hideFieldNameIfSingleField:!0,view:H.A,translateRelevantData:(e,t)=>c.getResponseComponentName(+t)}),new er({key:"responses",title:(0,s.hw)({id:"httpRequestResult.response"}),value:c.value,pickedFieldName:"responses",view:ea,mask:c.mask,itemFormatter:X.A}),new er({key:"response examples",title:(0,s.hw)({id:"api.label.responseExamples"}),value:c.value,pickedFieldName:"responseExamples",view:ea,mask:c.mask,itemFormatter:Q.A}),new er({key:"code samples",title:(0,s.hw)({id:"projectSettings.advancedSetting.sampleCode.title"}),value:c.value,pickedFieldName:"codeSamples",view:ea,mask:c.mask,itemFormatter:J.A}),new V.A({title:(0,s.hw)({id:"api.management.preProcessor"}),key:"preProcessors",value:c.value,pickedFieldNames:["preProcessors","inheritPreProcessors"],view:H.A,mask:c.mask}),new V.A({key:"postProcessors",title:(0,s.hw)({id:"api.management.postProcessor"}),value:c.value,pickedFieldNames:["postProcessors","inheritPostProcessors"],view:H.A,mask:c.mask})],m=(0,$._)(p,c.value,c.mask),m&&p.push(m),p},[e.value,d,i,t,l,r,n.httpApi,u]);return(0,a.jsx)(a.Fragment,{children:p.map(t=>(0,a.jsx)(t.view,{title:t.title,value:e.value,pickedFieldNames:t.pickedFieldNames,mask:t.mask,formatter:t.formatter,hideFieldNameIfSingleField:t.hideFieldNameIfSingleField,translateRelevantData:t.translateRelevantData},t.key))})};var em=i(893180);let eh=function(e){let{dataComparisonIgnoreProperties:t}=(0,w.useContext)(z),i=(0,P.Ay)(e=>e.httpResponseFolder.map),n=(0,m.A)(e=>{var t;return(null==i||null==(t=i[e])?void 0:t.name)||""}),l=(0,w.useMemo)(()=>{var i,a,l;let r,o;return l={value:null!=(i=e.value)?i:{},getFolderName:n,mask:null!=(a=t.responseComponent)?a:[]},r=[new V.A({key:"basicInfoField",title:(0,s.hw)({id:"apiSchema.comparison.basicInfo"}),value:l.value,pickedFieldNames:em.m,defaultOpen:!0,mask:l.mask,formatter:em.A,hideFieldNameIfSingleField:!0,view:H.A,translateRelevantData:(e,t)=>0===t?(0,s.hw)({id:"defaultFolder"}):l.getFolderName(+t)}),new V.A({key:"jsonSchema",title:(0,s.hw)({id:"apiSchema.label.jsonSchema"}),value:l.value,defaultOpen:!0,mask:l.mask,pickedFieldNames:["jsonSchema"],hideFieldNameIfSingleField:!0,view:H.A}),new V.A({key:"itemSchema",title:(0,s.hw)({id:"apiSchema.label.jsonSchema"}),value:l.value,defaultOpen:!0,mask:l.mask,pickedFieldNames:["itemSchema"],hideFieldNameIfSingleField:!0,view:H.A}),new er({key:"response examples",title:(0,s.hw)({id:"api.label.responseExamples"}),value:l.value,pickedFieldName:"responseExamples",view:ea,mask:l.mask,itemFormatter:Q.A})],o=(0,$._)(r,l.value,l.mask),o&&r.push(o),r},[e.value,n,t.responseComponent]);return(0,a.jsx)(a.Fragment,{children:l.map(e=>(0,a.jsx)(e.view,{mask:e.mask,title:e.title,value:e.value,pickedFieldNames:e.pickedFieldNames,formatter:e.formatter,hideFieldNameIfSingleField:e.hideFieldNameIfSingleField,translateRelevantData:e.translateRelevantData},e.key))})};var ev=i(544487);let ef=e=>{let t=(0,P.Ay)(e=>{let{teamMember:t}=e;return t.teamMemberList.reduce((e,t)=>(e[t.userId]=t,e),{})}),{projectMemberMap:i,dataComparisonIgnoreProperties:n}=(0,w.useContext)(z),l=(0,S.useModel)("projectCustomApiField",e=>{let{data:t}=e;return t}),r=(0,P.Ay)(e=>{let{settings:t}=e;return t.projectSettingData}),o=(0,P.Ay)(e=>{let{apiDetailFolder:t}=e;return t.apiDetailFolderMap}),d=(0,m.A)(e=>{var t;return(null==o||null==(t=o[e])?void 0:t.name)||""}),c=(0,P.Ay)(e=>{let{apiResponse:t}=e;return t.apiResponseMap}),u=(0,m.A)(e=>{var t;return(null==c||null==(t=c[e])?void 0:t.name)||""}),p=(0,w.useMemo)(()=>{var a,o,c;let p,m;return c={value:null!=(a=e.value)?a:{},getFolderName:d,projectMemberMap:i,teamMemberMap:t,apiFieldList:l,projectSetting:r,mask:null!=(o=n.httpApi)?o:[],getResponseComponentName:u},p=[new V.A({key:"basic",title:(0,s.hw)({id:"api.comparison.basicInfo"}),value:c.value,pickedFieldNames:ev.i,mask:c.mask,formatter:ev.A,hideFieldNameIfSingleField:!0,view:H.A,translateRelevantData:(e,t)=>{var i,a,n,l;switch(e){case"folderId":if(0===t)return(0,s.hw)({id:"defaultFolder"});return c.getFolderName(+t);case"status":return(null==(i=W.zj[t])?void 0:i.labelLocale)?(0,s.hw)({id:W.zj[t].labelLocale}):"";case"responsibleId":{if(0===t)return(0,s.hw)({id:"app.settings.hasNoSetting"});let e=c.projectMemberMap[t];if(e)return`${e.nickname||e.user.name||e.user.username} (@${e.user.name})`;let i=c.teamMemberMap[t];if(i)return i.user.username;return""}case"serverId":{if(!t)return(0,s.hw)({id:"message.inheritParent"});let e=null==(n=c.projectSetting)||null==(a=n.servers)?void 0:a.find(e=>e.id===t);return null!=(l=null==e?void 0:e.name)?l:""}case"customApiFields":{let e=c.apiFieldList.find(e=>String(e.id)===String(t));if(e)return e.fieldName;return""}default:return null}}}),new V.A({key:"content",title:(0,s.hw)({id:"version.label.content"}),value:c.value,pickedFieldNames:["content"],mask:c.mask,hideFieldNameIfSingleField:!0,view:H.A})],m=(0,$._)(p,c.value,c.mask),m&&p.push(m),p},[e.value,d,i,t,l,r,n.httpApi,u]);return(0,a.jsx)(a.Fragment,{children:p.map(t=>(0,a.jsx)(t.view,{title:t.title,value:e.value,pickedFieldNames:t.pickedFieldNames,mask:t.mask,formatter:t.formatter,hideFieldNameIfSingleField:t.hideFieldNameIfSingleField,translateRelevantData:t.translateRelevantData},t.key))})};var eg=i(310187);let ey="parameters",ex=e=>{let t=(0,w.useMemo)(()=>{var t,i;return null!=(i=null==(t=e.value)?void 0:t[ey])?i:{}},[e.value]),i=(0,w.useMemo)(()=>{var i;let a,n;if(!t)return[];return i={value:t,mask:(0,ee.A)(e.mask,ey)},a=[new V.A({key:"query",title:(0,s.hw)({id:"message.queryParameter"}),value:i.value,pickedFieldNames:["query"],mask:i.mask,formatter:ed,hideFieldNameIfSingleField:!0,view:H.A}),new V.A({key:"path",title:(0,s.hw)({id:"message.pathParameter"}),value:i.value,pickedFieldNames:["path"],mask:i.mask,formatter:ed,hideFieldNameIfSingleField:!0,view:H.A}),new V.A({key:"cookie",title:"Cookie",value:i.value,pickedFieldNames:["cookie"],mask:i.mask,formatter:ed,hideFieldNameIfSingleField:!0,view:H.A}),new V.A({key:"header",title:"Header",value:i.value,pickedFieldNames:["header"],mask:i.mask,formatter:ed,hideFieldNameIfSingleField:!0,view:H.A})],n=(0,$._)(a,i.value,i.mask),n&&a.push(n),a},[e.mask,t]);return(0,a.jsx)(a.Fragment,{children:i.map(i=>(0,a.jsx)(i.view,{title:`${e.title} / ${i.title}`,value:t,pickedFieldNames:i.pickedFieldNames,mask:i.mask,formatter:i.formatter,hideFieldNameIfSingleField:i.hideFieldNameIfSingleField,translateRelevantData:i.translateRelevantData},i.key))})},eA=e=>{let{dataComparisonIgnoreProperties:t}=(0,w.useContext)(z),i=(0,w.useMemo)(()=>{var i,a,n;let l,r;return n={value:null!=(i=e.value)?i:{},mask:null!=(a=t.endpointCase)?a:[]},l=[new V.A({key:"basic info field",title:(0,s.hw)({id:"api.comparison.basicInfo"}),value:n.value,pickedFieldNames:eg.T,mask:n.mask,formatter:Z.A,hideFieldNameIfSingleField:!0,view:H.A}),new V.A({key:"request params",title:(0,s.hw)({id:"api.label.parameters"}),value:n.value,view:ex,pickedFieldNames:["parameters"],mask:n.mask}),new V.A({key:"request body",title:`${(0,s.hw)({id:"api.label.parameters"})} / Body`,value:n.value,pickedFieldNames:["requestBody"],mask:n.mask,formatter:Z.A,hideFieldNameIfSingleField:!0,view:H.A}),new V.A({key:"request auth",title:`${(0,s.hw)({id:"api.label.parameters"})} / Auth`,value:n.value,pickedFieldNames:["auth"],mask:n.mask,formatter:Z.A,hideFieldNameIfSingleField:!0,view:H.A}),new V.A({key:"advanced settings",title:`${(0,s.hw)({id:"api.label.parameters"})} / ${(0,s.hw)({id:"setting"})}`,value:n.value,pickedFieldNames:["advancedSettings"],mask:n.mask,formatter:Z.A,hideFieldNameIfSingleField:!0,view:H.A,translateRelevantData:(e,t)=>{if("isDefaultUrlEncoding"===e)switch(t){case 1:return(0,s.hw)({id:"projectSetting.advancedSetting.inherit"});case 2:return(0,s.hw)({id:"projectSetting.advancedSetting.encodeOptions.RFC3986"});case 3:return(0,s.hw)({id:"projectSetting.advancedSetting.encodeOptions.WHATWG"});case 0:return(0,s.hw)({id:"projectSetting.advancedSetting.encodeOptions.OFF"})}return""}}),new V.A({key:"common parameters",title:(0,s.hw)({id:"parameter.globals"}),value:n.value,pickedFieldNames:["commonParameters"],mask:n.mask,formatter:Z.A,hideFieldNameIfSingleField:!0,view:H.A}),new V.A({title:(0,s.hw)({id:"api.management.preProcessor"}),key:"preProcessors",value:n.value,pickedFieldNames:["preProcessors","inheritPreProcessors"],view:H.A,mask:n.mask}),new V.A({key:"postProcessors",title:(0,s.hw)({id:"api.management.postProcessor"}),value:n.value,pickedFieldNames:["postProcessors","inheritPostProcessors"],view:H.A,mask:n.mask})],r=(0,$._)(l,n.value,n.mask),r&&l.push(r),l},[e.value,t.endpointCase]);return(0,a.jsx)(a.Fragment,{children:i.map(t=>(0,a.jsx)(t.view,{title:t.title,value:e.value,pickedFieldNames:t.pickedFieldNames,mask:t.mask,formatter:t.formatter,hideFieldNameIfSingleField:t.hideFieldNameIfSingleField,translateRelevantData:t.translateRelevantData},t.key))})};var ej=i(672547);let eb=function(e){let{dataComparisonIgnoreProperties:t}=(0,w.useContext)(z),i=(0,P.Ay)(e=>e.securitySchemeFolder.map),n=(0,m.A)(e=>{var t;return(null==i||null==(t=i[e])?void 0:t.name)||""}),l=(0,w.useMemo)(()=>{var i,a,l;let r,o;return l={value:null!=(i=e.value)?i:{},getFolderName:n,mask:null!=(a=t.securityScheme)?a:[]},r=[new V.A({key:"name",title:`${(0,s.hw)({id:"api.comparison.basicInfo"})} / ${(0,s.hw)({id:"name"})}`,value:l.value,pickedFieldNames:["name"],defaultOpen:!0,mask:l.mask,formatter:em.A,hideFieldNameIfSingleField:!0,view:H.A}),new V.A({key:"folderId",title:`${(0,s.hw)({id:"api.comparison.basicInfo"})} / ${(0,s.hw)({id:"folder"})}`,value:l.value,pickedFieldNames:["folderId"],defaultOpen:!0,mask:l.mask,formatter:em.A,hideFieldNameIfSingleField:!0,view:H.A,translateRelevantData:(e,t)=>0===t?(0,s.hw)({id:"defaultFolder"}):l.getFolderName(+t)}),new V.A({key:"auth-configs",title:"Auth Configs",value:l.value,pickedFieldNames:["authType","oasAuthType","authConfigs"],defaultOpen:!0,mask:l.mask,formatter:ej.A,hideFieldNameIfSingleField:!0,view:H.A}),new V.A({key:"guidance-configs",title:"Guidance Configs",value:l.value,pickedFieldNames:["guidanceConfigs"],defaultOpen:!0,mask:l.mask,hideFieldNameIfSingleField:!0,view:H.A})],o=(0,$._)(r,l.value,l.mask),o&&r.push(o),r},[e.value,n,t.responseComponent]);return(0,a.jsx)(a.Fragment,{children:l.map(e=>(0,a.jsx)(e.view,{mask:e.mask,title:e.title,value:e.value,pickedFieldNames:e.pickedFieldNames,formatter:e.formatter,hideFieldNameIfSingleField:e.hideFieldNameIfSingleField,translateRelevantData:e.translateRelevantData},e.key))})},ew={apiDetail:e=>(0,a.jsx)(ep,{...e}),doc:e=>(0,a.jsx)(G,{...e}),apiSchema:e=>(0,a.jsx)(K,{...e}),httpResponse:e=>(0,a.jsx)(eh,{...e}),SECURITY_SCHEME:e=>(0,a.jsx)(eb,{...e}),CUSTOM_ENDPOINT:e=>(0,a.jsx)(ef,{...e}),apiCase:e=>(0,a.jsx)(eA,{...e})},eS=function(e){var t;let{type:i,value:n}=e;return(0,a.jsx)(U,{children:null==(t=ew[i])?void 0:t.call(ew,{value:n})})};var eC=i(845309);let eI="hidden-EIiA8c",eN="subText-lkuzSW",ek=e=>{let{conflicts:t,activeKey:i,shouldMountKeySet:n,onResolveConflicts:l,sourceBranchId:r,targetBranchId:o,extraFormatterData:d}=e,c=(0,P.Ay)(e=>e.projectBranch.map),u=(0,w.useMemo)(()=>{var e,t,i,n;let l=null!=(i=null==(e=c[r])?void 0:e.name)?i:"",d=null!=(n=null==(t=c[o])?void 0:t.name)?n:"";return{originalLabel:"",modifiedLabel:"",recoverActionLabel:(0,s.hw)({id:"branch.conflict.resolve.useThis"}),reserveActionLabel:(0,s.hw)({id:"branch.conflict.resolve.useThis"}),originalHeaderLabel:(0,a.jsxs)("span",{className:"truncate flex items-center",title:l,style:{maxWidth:150,color:"var(--ui-primary-color)"},children:[(0,a.jsx)(j.A,{type:"icon-branch3",className:"mr-1"}),(0,a.jsx)("span",{className:"truncate",children:l})]}),modifiedHeaderLabel:(0,a.jsxs)("span",{className:"flex items-center text-blue-6",children:[(0,a.jsx)(j.A,{type:"icon-branch3",className:"mr-1"}),(0,a.jsx)("span",{className:"truncate",title:d,style:{maxWidth:150},children:d}),(0,a.jsxs)("span",{className:g()("ml-1 text-color-secondary",eN),children:["(",(0,s.hw)({id:"branch.current"}),")"]})]}),recoverHeaderActionLabel:(0,s.hw)({id:"selectAll"}),reserveHeaderActionLabel:(0,s.hw)({id:"selectAll"}),defaultVersionTag:1}},[c,r,o]),[p,h]=(0,w.useState)({}),v=(0,m.A)(e=>{null==l||l(e),h(t=>({...t,[i]:{...t[i],...e[Object.keys(e)[0]]}}))}),f=(0,w.useMemo)(()=>[{minSize:90,resize:"stretch"},{size:400,minSize:52,resize:"dynamic"}],[]);return(0,a.jsx)("div",{className:"h-full overflow-hidden",children:t.map(e=>n.has(e.key)&&(0,a.jsxs)(L.vh,{panelWidths:f,direction:"column",className:g()({[eI]:i!==e.key},"w-full"),borderColor:"var(--ui-border-color-split)",children:[(0,a.jsx)("section",{className:g()("px-5 pt-5 w-full h-full"),children:(0,a.jsx)(eC.A,{type:e.type,values:{leftSideState:e.benchmark,rightSideState:e.target},isResolveConflictsMode:!0,onConflictResolved:v,conflictConfigs:u,extraFormatterData:d,leftBranchId:r,rightBranchId:o})},e.key),(0,a.jsxs)("section",{className:g()("px-5 pt-5 flex flex-col w-full h-full"),children:[(0,a.jsx)("div",{style:{marginBottom:10},children:(0,s.hw)({id:"preview"})}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,a.jsx)(eS,{type:e.type,value:p[e.key]})})]})]}))})};var eT=i(117464),eM=i(850050),eE=i(718180),e_=i(963227),eF=i(969812),eD=i(688089);let eR="treeList-ScBE5o",eO="conflictTag-YBZd1Y",eP="pathText-i1juLJ",eL="countText-zCcK8b";var e$=i(474030);let eB=e=>{let{treeData:t,validChildrenMap:i,defaultExpandKeys:n,allFolderKeys:l,needFilter:r}=e,{modalSize:o,treeHeight:d,activeKey:c,handleConflict:u,nodeKeysToPick:p,handleSelectKeys:v,treeContainerRef:f,computedTreeHeight:y,pickResourceConfigs:x,filterData:A,filterOptions:S,handleFilterChange:C}=(0,w.useContext)(_),I=(0,w.useMemo)(()=>c?[c]:[],[c]),[N,k]=(0,w.useState)(n),T=(0,w.useRef)(N),M=(0,m.A)(e=>{r||(T.current=e),k(e)}),E=(0,m.A)(e=>{var t;let{key:a,checkable:n,type:l,nodeInfo:r}=e;if(!n&&!(0,e$._C)(l))return;let s=!p.has(a),o=new Set(p),d=null!=(t=i.get(a))?t:[];s?(o.add(a),d.forEach(e=>o.add(e)),"apiCase"===l&&o.add(`apiDetail.${r.apiId}`)):(o.delete(a),d.forEach(e=>o.delete(e))),v(o)}),F=(0,w.useCallback)(e=>{var t,n;let l=!1,r=p.has(e.key);if((0,e$.XT)(e.type)){let a=null!=(t=i.get(e.key))?t:[];if(a.length){let e=a.every(e=>p.has(e)),t=a.some(e=>p.has(e));l=!!a.length&&!e&&t,r=t}}return(0,a.jsxs)("span",{className:g()("flex items-center w-full",{"cursor-default":!e.checkable&&!(0,e$._C)(e.type)}),onClick:()=>{!(0,e$._C)(e.type)&&e.checkable&&E(e)},children:[(0,a.jsxs)("span",{className:"truncate",title:e.title,children:[e.title,e.isEntrance&&(0,a.jsx)(j.A,{type:"icon-triangle-right-medium",className:"switcher ml-1"}),(0,e$._C)(e.type)&&(0,a.jsx)("span",{className:g()(eL,"ml-1"),children:`(${null!=(n=e.leafNodeCount)?n:0})`}),e.nodeInfo.path&&(0,a.jsx)("span",{className:g()("truncate ml-1",eP),children:e.nodeInfo.path})]}),(0,a.jsxs)("span",{className:"flex ml-auto items-center",children:["UPDATE"===e.comparisonStatus&&(0,a.jsxs)(e_.A,{className:eO,onClick:t=>{t.stopPropagation(),u(e.key)},children:[(0,a.jsx)(j.A,{type:"icon-info1",className:"mr-1"}),(0,s.hw)({id:"branch.conflict"})]}),"UNMODIFIED"===e.comparisonStatus&&(0,a.jsx)(eD.A,{comparisonStatus:"UNMODIFIED",className:"treeItemHovering"}),e.checkable&&(0,a.jsx)(eF.A,{className:"ml-2",indeterminate:l,checked:r,onClick:t=>{(0,e$._C)(e.type)&&(t.stopPropagation(),E(e))}})]})]})},[p,i,E,u]),D=(0,w.useRef)(null);return(0,eE.A)(y),(0,h.A)((0,b.debounce)(y,400),[o]),(0,h.A)(()=>{if(I[0]){var e;null==(e=D.current)||e.scrollTo({key:I[0],offset:(null!=d?d:0)/3})}},[d]),(0,h.A)(()=>{r?k(l):k(T.current)},[r]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eM.A,{isEnableOptionsFilter:x.enableEndPoints,options:S,value:A,onVisibleChange:(0,b.debounce)(y,100),onChange:C,style:{margin:"16px 16px 8px"}}),(0,a.jsx)("div",{ref:f,className:"flex-1 min-h-0",children:t.length?(0,a.jsx)(L.Gq,{ref:D,treeData:t,selectedKeys:I,className:eR,height:d,titleRender:F,onExpand:M,expandedKeys:N}):(0,a.jsx)(eT.A,{})})]})};var ez=i(307355),eU=i(434119),eH=i(221339);function eV(e,t){let i=new Map,a=new Map,n=new Map,l=[];return{validChildrenMap:i,allFolderKeys:l,parentMap:n,treeData:e.map(e=>(function e(r,s,o){var d,c,u,p,m,h,v,f,g,y,x,A,j;(null==(d=r.children)?void 0:d.length)&&l.push(r.key);let b=function e(i,a,n){return i.children&&i.children.forEach(i=>{let l=t.get(i.key);l&&"UNMODIFIED"!==l.comparisonStatus&&"NO_COMPARE"!==l.comparisonStatus&&a.push(i.key),(0,e$.XT)(i.type)||n.push(i.key),e(i,a,n)}),{validChildrenKeys:a,allChildrenKeys:n}}(r,[],[]);i.set(r.key,b.validChildrenKeys),a.set(r.key,b.allChildrenKeys),n.set(r.key,o);let w=null==(c=t.get(r.key))?void 0:c.comparisonStatus,S=t.has(r.key)&&"UNMODIFIED"!==w&&"NO_COMPARE"!==w||(0,e$._C)(r.type)&&!!(null==(u=i.get(r.key))?void 0:u.length),C=(0,e$._C)(r.type)&&a.get(r.key)||[],I=(0,e$.XT)(r.type)?C.filter(e=>!(0,e$.Bd)(e.split(".")[0])).length:C.length,N={...r,key:r.key,title:r.displayName||r.name,type:r.type,comparisonStatus:w,checkable:S,parentKeywords:s,leafNodeCount:I,nodeInfo:null!=(j=null!=(A=null!=(x=null!=(y=null!=(g=null!=(f=null!=(v=null!=(h=null!=(m=r.folder)?m:r.api)?h:r.schema)?v:r.response)?f:r.doc)?g:r.securityScheme)?y:r.customEndpoint)?x:r.case)?A:r.oasComponent)?j:{},children:[]};(null==(p=r.children)?void 0:p.length)&&(N.children=r.children.map(t=>e(t,[...s,N.title],[...o,N.key])));let k=eH.z[r.type];return k&&((0,e$.XT)(r.type)?N.icon=e=>k(N.nodeInfo,{expanded:e.expanded}):N.icon=k(N.nodeInfo)),N})(e,[],[]))}}let eK=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,w.useMemo)(()=>{let a=Object.values(i).some(e=>!!(null==e?void 0:e.length)),n=eV(e,t);return a?{...eV((0,ez.A)(n.treeData,[e=>{var t,a,n;return!(null==(t=i.searchKeyWord)?void 0:t.length)||(0,eU.w)(e.title+((null==(a=e.nodeInfo)?void 0:a.path)||"")+((0,e$.XT)(e.type)?"":e.parentKeywords.join("")),null!=(n=i.searchKeyWord)?n:"")},e=>{var t,a;return!(null==(t=i.apiStatuses)?void 0:t.length)||i.apiStatuses.includes(null==(a=e.nodeInfo)?void 0:a.status)},e=>{var t;return!(null==(t=i.tags)?void 0:t.length)||i.tags.some(t=>{var i,a,n;return null==(n=e.nodeInfo)||null==(a=n.tags)||null==(i=a.includes)?void 0:i.call(a,t)})},e=>{var t,a;return!(null==(t=i.responsibleIds)?void 0:t.length)||i.responsibleIds.includes(null==(a=e.nodeInfo)?void 0:a.responsibleId)}]),t),allFolderKeys:n.allFolderKeys,needFilter:!0}:n},[t,i,e])};var eq=i(789728);let eG=e=>{var t;let{enableDocs:i=!0,enableEndPoints:f=!0,enableResponses:_=!0,enableSchemas:O=!0,enableEndPointCases:P=!0,enableSecuritySchemes:L=!0,enableOasComponentTypes:$=eq.Y,enableOtherBranch:B,defaultActiveKey:z,moduleId:U,...H}=e,V=(0,S.useModel)("clientConfig",e=>{var t;let{dynamicConfig:i}=e;return null==(t=i.branchDataComparisonIgnoreProperties)?void 0:t.equalIgnore}),K=(0,d._$)(e=>e.projectMainBranch.id),q=(0,d._$)(e=>e.projectCurrentBranch.id),[G,W]=(0,w.useState)(K),{hasPermission:J}=(0,l.w)(r.o.ENDPOINT_ENDPOINT_CDU),{hasPermission:Y}=(0,l.w)(r.o.ENDPOINT_ENDPOINT_CASE_CDU),{hasPermission:Z}=(0,l.w)(r.o.ENDPOINT_SCHEMA_CDU),{hasPermission:Q}=(0,l.w)(r.o.ENDPOINT_COMPONENT_CDU),X=(0,w.useMemo)(()=>({enableDocs:J&&i,enableEndPoints:J&&f,enableEndPointCases:Y&&P,enableSchemas:Z&&O,enableResponses:Q&&_,enableSecuritySchemes:Q&&L,enableOasComponentTypes:Q&&$}),[i,f,P,_,O,L,$,Q,J,Y,Z]),{entireTreeList:ee,treeItemStateMap:et,loading:ei,dataMaps:ea,entireInfo:en}=(0,E.A)({sourceBranchId:G,targetBranchId:q,moduleId:U,config:{...X,enableApiFolders:!1,enableResponseFolders:!1,enableSchemaFolders:!1,enableSecuritySchemeFolders:!1}}),el=(0,w.useMemo)(()=>{var e,t;return f?(0,c.A)(null!=(t=null==(e=ee[0])?void 0:e.children[0].children)?t:[]).filter(e=>"updatedByIds"!==e.type&&"changeType"!==e.type):[]},[f,ee]),[er,es]=(0,w.useState)({}),{parentMap:eo,...ed}=eK(ee,et,er),[ec,eu]=(0,w.useState)("720"),ep=(0,m.A)(()=>eu("720")),em=(0,w.useRef)(null),[eh,ev]=(0,w.useState)(0),ef=(0,m.A)(()=>{em.current&&ev(em.current.offsetHeight)}),eg=(0,w.useRef)({}),ey=(0,w.useRef)({toOverrides:[],toPick:[],toUpdate:[]}),ex=(0,w.useMemo)(()=>Array.from(et.values()).filter(e=>"UPDATE"===e.comparisonStatus),[et]),eA=(0,w.useMemo)(()=>{if(ex.length){let e=[...ex.reduce((e,t)=>{var i;return new Set([...e,...null!=(i=eo.get(t.key))?i:[]])},new Set)];return 0===e.length?[...en.map(e=>e.key)]:e}return[...en.map(e=>e.key)]},[ex,eo,en]),[ej,eb]=(0,w.useState)(),[ew,eS]=(0,w.useState)(new Set),[eC,eI]=(0,w.useState)(new Set),eN=(0,m.A)(e=>{W(e),eb(void 0),eS(new Set),eg.current={}}),eT=e=>{let t={toOverrides:[],toPick:[],toUpdate:[]};Array.from(e).forEach(e=>{let i=et.get(e);if(i&&"UNMODIFIED"!==i.comparisonStatus){if("INSERT"===i.comparisonStatus)return void t.toPick.push(e);eg.current[e]?t.toUpdate.push(e):t.toOverrides.push(e)}}),ey.current=t},eM=(0,m.A)(e=>{eI(new Set(e)),eT(e)}),eE=(0,m.A)(e=>{"720"===ec&&eu(T.YM),eb(e),eS(t=>new Set(t.add(e)))}),e_=(0,m.A)(e=>{var t;if(!ej)return;let i=Object.keys(e)[0],a={...eg.current[ej],...e};if(!Object.keys(null!=(t=eg.current[ej])?t:{}).includes(i)){eg.current[ej]=a;return}eg.current[ej]=a;let n=new Set(eC);eC.has(ej)||eI(n.add(ej)),eT(n)});(0,h.A)(()=>{ei||z&&(ex.find(e=>e.key===z)&&eE(z),eM(new Set([z])))},[ei,ex]);let{run:eF,loading:eD}=(0,v.Ay)(async()=>{let e={sourceBranchId:G,targetBranchId:q},t={apiDetail:"endpointIds",CUSTOM_ENDPOINT:"customEndpointIds",doc:"docIds",apiSchema:"dataSchemaIds",httpResponse:"responseComponentIds",SECURITY_SCHEME:"securitySchemeIds",apiCase:"endpointCaseIds",OAS_COMPONENT:"oasComponentIds"},{toOverrides:i,toPick:a,toUpdate:n}=ey.current;i.forEach(i=>{var a,n,l,r;null!=(l=e.overrideIds)||(e.overrideIds={});let[s,o]=i.split(".");t[s]&&(null!=(r=(a=e.overrideIds)[n=t[s]])?r:a[n]=[]).push(parseInt(o,10))}),a.forEach(i=>{var a,n,l,r;null!=(l=e.pickIds)||(e.pickIds={});let[s,o]=i.split(".");t[s]&&(null!=(r=(a=e.pickIds)[n=t[s]])?r:a[n]=[]).push(parseInt(o,10))});let l={apiDetail:"endpoints",CUSTOM_ENDPOINT:"customEndpoints",doc:"docs",apiSchema:"dataSchemas",httpResponse:"responseComponents",SECURITY_SCHEME:"securitySchemes",apiCase:"endpointCases",OAS_COMPONENT:"oasComponents",OAS_COMPONENT_FOLDER:"oasComponentFolders"},r=new Set(V);n.forEach(t=>{var i,a,n,s,o;null!=(n=e.updateDtos)||(e.updateDtos={});let d=et.get(t),c=eg.current[t];if(!c||!d)return;let[u,p]=t.split(".");if(!l[u])return;let m=Object.values(c).reduce((e,t)=>({...e,...t}),{});if("apiDetail"===u&&Object.keys(m).some(e=>["responses","responseExamples","codeSamples"].includes(e))){let{responses:e,responseExamples:i,codeSamples:a}=null==(s=et.get(t))?void 0:s.target;m={responses:e,responseExamples:i,codeSamples:a,...m}}(null!=(o=(i=e.updateDtos)[a=l[u]])?o:i[a]=[]).push({...(0,b.omitBy)(m,(e,t)=>r.has(t)),id:parseInt(p,10)})});let s=new Set;[...i,...a,...n].forEach(e=>{let t=e.split(".")[0];s.has(t)||s.add(t)}),await (0,p.aC)(e),(s.has("apiDetail")||s.has("apiCase")||s.has("doc")||s.has("CUSTOM_ENDPOINT"))&&((0,S.dispatchFetchHttpApiTreeList)(),(0,S.dispatchFetchApiFolderList)(),(s.has("apiDetail")||s.has("apiCase"))&&((0,S.dispatchFetchHttpApiList)(),(0,S.dispatchFetchHttpApiCaseList)(),(0,S.dispatchFetchHttpApiMockList)()),s.has("doc")&&(0,o.dq)(),s.has("CUSTOM_ENDPOINT")&&(0,S.dispatchFetchCustomEndpointList)()),s.has("apiSchema")&&await Promise.all([(0,S.dispatchFetchDataSchemaList)(),(0,S.dispatchFetchDataSchemaFolderList)(),(0,S.dispatchFetchDataSchemaTreeList)()]),s.has("httpResponse")&&await Promise.all([(0,S.dispatchFetchResponseTreeList)(),(0,S.dispatchFetchResponseFolderList)(),(0,S.dispatchFetchCommonHttpApiResponseList)()]),s.has("SECURITY_SCHEME")&&await Promise.all([(0,S.dispatchFetchSecuritySchemeTreeList)(),(0,S.dispatchFetchSecuritySchemeFolderList)(),(0,S.dispatchFetchCommonSecuritySchemeList)()]),(s.has("OAS_COMPONENT")||s.has("OAS_COMPONENT_FOLDER"))&&await Promise.all([(0,S.dispatchFetchOASComponentTreeList)(),(0,S.dispatchFetchOasComponentFolderList)(),(0,S.dispatchFetchCommonOASComponentList)()]),(0,C.TN)().refreshRegisteredState()},{manual:!0,onSuccess(){var e;null==(e=H.onCancel)||e.call(H)}}),eR=(0,w.useMemo)(()=>({apiFolderMap:{ORIGINAL:ea.sourceApiFolderMap},dataSchemaFolderMap:{ORIGINAL:ea.sourceSchemaFolderMap},responseComponentFolderMap:{ORIGINAL:ea.sourceResponseFolderMap},responseComponentMap:{ORIGINAL:ea.sourceResponseMap},docMap:{ORIGINAL:ea.sourceDocMap},securitySchemeFolderMap:{ORIGINAL:ea.sourceSecuritySchemeFolderMap},securitySchemeMap:{ORIGINAL:ea.sourceSecuritySchemeMap}}),[ea.sourceApiFolderMap,ea.sourceDocMap,ea.sourceResponseFolderMap,ea.sourceResponseMap,ea.sourceSchemaFolderMap,ea.sourceSecuritySchemeFolderMap,ea.sourceSecuritySchemeMap]);return(0,a.jsx)(F,{value:{modalSize:ec,computedTreeHeight:ef,treeContainerRef:em,treeHeight:eh,activeKey:ej,handleConflict:eE,nodeKeysToPick:eC,handleSelectKeys:eM,pickResourceConfigs:X,filterData:er,filterOptions:el,handleFilterChange:es},children:(0,a.jsxs)(y.Ay,{...H,size:ec,destroyOnClose:!0,maskClosable:!1,title:(0,a.jsxs)("div",{className:"flex items-center text-secondary",children:[null!=(t=H.title)?t:(0,a.jsx)(s.sA,{id:"branch.action.pickFromMain"}),(0,a.jsxs)(x.A,{className:"flex-shrink-0 ml-auto",children:[(0,a.jsx)(A.A,{size:"small",type:"text",onClick:()=>{eu(e=>e===T.YM?"720":T.YM)},icon:(0,a.jsx)(j.A,{type:"720"===ec?"icon-maximize":"icon-minimize"})}),(0,a.jsx)(A.A,{onClick:H.onCancel,size:"small",type:"text",icon:(0,a.jsx)(j.A,{type:"icon-x-close",size:18})})]})]}),className:g()(D,{[R]:"720"===ec}),okButtonProps:{disabled:!eC.size},footer:(0,a.jsx)("div",{className:"flex",children:(0,a.jsxs)(x.A,{className:"ml-auto",children:[(0,a.jsx)(A.A,{onClick:H.onCancel,children:(0,s.hw)({id:"cancel"})}),(0,a.jsx)(A.A,{disabled:!eC.size,loading:eD,type:"primary",onClick:(0,u.J0)(eF),children:(0,s.hw)({id:"okText"})})]})}),children:[(0,a.jsx)(N.A,{side:(0,a.jsxs)("div",{className:"flex flex-col h-full max-h-full overflow-hidden p-1",children:[(0,a.jsx)(M.A,{defaultTargetBranchId:q,defaultSourceBranchId:B?void 0:G,onSourceChange:B?eN:void 0,className:"m-4 mb-1",style:{display:ec===T.YM?"none":void 0}}),(0,a.jsx)(I.A,{loading:ei,children:(0,a.jsx)(eB,{...ed,defaultExpandKeys:eA})})]}),modalSize:ec,setDefaultModalSize:ep,children:ej?(0,a.jsx)(ek,{activeKey:ej,sourceBranchId:G,targetBranchId:q,shouldMountKeySet:ew,conflicts:ex,onResolveConflicts:e_,extraFormatterData:eR}):(0,a.jsx)(k.A,{})}),(0,a.jsx)(n.A,{})]})})}},351141:function(e,t,i){"use strict";i.d(t,{A:()=>j});var a=i(838e3),n=i(917359),l=i(740565),r=i(2183),s=i(496411),o=i(689368),d=i(140049),c=i(838487),u=i.n(c),p=i(257100),m=i(671466),h=i(641486);let v="headerItem-FuIXVW",f="arrow-BJW9kY",g="branchTag-pJlOvf",y="mainBranch-IRuOQu",x="selectBranchDropdown-HdBSDN";function A(e){let{value:t=(0,l.hw)({id:"branch.action.selectBranch"}),className:i,isMain:n,showArrow:r,...s}=e;return(0,a.jsxs)("div",{...s,title:n?(0,l.hw)({id:"branch.mainBranch"}):t,className:u()("truncate flex items-center",g,i,{[y]:n,"cursor-pointer":r}),children:[(0,a.jsx)(m.A,{type:"icon-branch3",size:16,className:"mr-1"}),(0,a.jsx)("span",{className:"w-full truncate",children:n?(0,l.hw)({id:"branch.mainBranch"}):t}),r&&(0,a.jsx)(m.A,{type:"icon-down-md",className:"ml-1"})]})}let j=e=>{var t,i;let{defaultTargetBranchId:c,defaultSourceBranchId:g=(0,s.sI)(),onSourceChange:y,onTargetChange:j,className:b,style:w}=e,{branches:S=[],branchMap:C={}}=(0,o.Ay)(e=>({branches:e.projectBranch.list,branchMap:e.projectBranch.map})),I=(0,r._$)(e=>e.planDegradeInfoData.sprintBranch.limitedBranchIds),[N,k]=(0,h.useState)(null!=(t=C[g])?t:{}),[T,M]=(0,h.useState)(null!=(i=C[c])?i:{}),{sourceMenuItems:E,targetMenuItems:_}=(0,h.useMemo)(()=>{let e=[],t=[];if(y||j){let i=S.filter(e=>e.id!==c&&e.id!==g&&!e.isArchived),l=e=>({key:e.id,disabled:I.includes(e.id),label:(0,a.jsxs)("span",{className:"flex items-center truncate",style:{maxWidth:150,minWidth:100},children:[(0,a.jsx)(m.A,{type:"icon-branch3",className:"mr-1"}),(0,a.jsx)("span",{className:"truncate",children:e.name}),e.isMain&&(0,a.jsx)(n.A,{className:"ml-1"})]})});if(y){let t=C[g];e=[C[(0,s.sI)()],...i].map(l),(0,s.sI)()!==g&&e.unshift(l(t))}j&&(t=[C[c],...i].map(l))}return{sourceMenuItems:e,targetMenuItems:t}},[C,S,g,c,y,j,I]),F=(0,d.A)(e=>{let{key:t}=e,i=C[Number(t)];i&&i.id!==N.id&&(null==y||y(Number(t)),k(i))}),D=(0,d.A)(e=>{let{key:t}=e,i=C[Number(t)];i&&i.id!==N.id&&(null==j||j(Number(t)),M(i))});return(0,a.jsxs)("div",{className:u()("flex justify-between items-center relative",b),style:w,children:[(0,a.jsxs)("div",{className:u()(v,"flex-1 px-4 py-3"),children:[(0,a.jsx)(l.sA,{id:"branch.action.createBranchCopy.basedBranch"}),(0,a.jsx)(p.A,{menu:{items:E,onClick:F,selectedKeys:[String(N.id)],hidden:!E.length},overlayClassName:x,children:(0,a.jsx)(A,{value:N.name,className:"mt-1",showArrow:!!y,isMain:N.isMain})})]}),(0,a.jsx)("div",{className:f,children:(0,a.jsx)(m.A,{type:"icon-arrow-narrow-right1",size:16,className:"text-secondary"})}),(0,a.jsx)("div",{className:u()(v,"flex-1 ml-1 px-4 py-3"),children:(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)(l.sA,{id:"branch.action.createBranchCopy.belongBranch"}),(0,a.jsx)(p.A,{menu:{items:_,onClick:D,selectedKeys:[String(T.id)],hidden:!_.length},placement:"bottomRight",overlayClassName:x,children:(0,a.jsx)(A,{value:T.name,className:"mt-1",showArrow:!!j,isMain:T.isMain})})]})})]})}},474030:function(e,t,i){"use strict";i.d(t,{E3:()=>m,XT:()=>h,AK:()=>g,Do:()=>c,Xl:()=>d,Bd:()=>v,_C:()=>f,qt:()=>s,Lb:()=>u,Fn:()=>r});var a=i(740565);let n="entrance-hgOZNs",l="projectModule-XrDprr",r="module",s="apiEntrance",o="apiDetailRootFolder",d="schemaEntrance",c="componentEntrance",u="responseEntrance",p="securitySchemeEntrance";function m(e){let[t]=e.split(".");return t===r||t===o||t===s||t===d||t===c||t===u||t===p}let h=e=>new Set(["apiDetailFolder","apiSchemaFolder","responseFolder","SECURITY_SCHEME_FOLDER","OAS_COMPONENT_FOLDER"]).has(e),v=e=>new Set(["apiCase"]).has(e),f=e=>new Set(["apiDetailFolder","apiSchemaFolder","responseFolder","SECURITY_SCHEME_FOLDER","apiDetail","OAS_COMPONENT_FOLDER"]).has(e),g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],m=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},{enableDocs:v=!0,enableEndPoints:f=!0,enableResponses:g=!0,enableSchemas:y=!0,enableSecuritySchemes:x=!0,enableOasComponentTypes:A=[]}=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},j=[];return{entireTreeList:e.map(e=>{let b=e.id,w={name:e.name,className:l,key:e.key,type:"module",moduleId:b,ignoreComparison:!0,children:[]};if(j.push({type:w.type,key:w.key,benchmark:w,mergeAction:"NOOP",comparisonStatus:"NO_COMPARE"}),v||f){let e={key:`${o}.${b}`,type:o,moduleId:b,ignoreComparison:!0,name:(0,a.hw)({id:"defaultFolder"}),children:t.filter(e=>e.moduleId===b)},i={name:(0,a.hw)({id:"apis"}),className:n,key:`${s}.${b}`,type:s,moduleId:b,isEntrance:!0,entranceCheckable:!0,ignoreComparison:!0,children:[e]};j.push({type:i.type,key:i.key,benchmark:i,mergeAction:"NOOP",comparisonStatus:"NO_COMPARE"},{type:e.type,key:e.key,benchmark:e,mergeAction:"NOOP",comparisonStatus:"NO_COMPARE"}),w.children.push(i)}if(y){let e={key:`${d}.${b}`,type:d,moduleId:b,isEntrance:!0,entranceCheckable:!0,ignoreComparison:!0,className:n,name:(0,a.hw)({id:"schemas"}),children:i.filter(e=>e.moduleId===b)};w.children.push(e),j.push({type:e.type,key:e.key,benchmark:e,mergeAction:"NOOP",comparisonStatus:"NO_COMPARE"})}let S=Array.isArray(A)&&A.length;if(g||x||S){let e={className:n,name:(0,a.hw)({id:"component.response.title"}),key:`${u}.${b}`,type:u,moduleId:b,isEntrance:!0,entranceCheckable:!0,ignoreComparison:!0,children:r.filter(e=>e.moduleId===b)},t={className:n,name:(0,a.hw)({id:"component.securityScheme.title"}),key:`${p}.${b}`,type:p,moduleId:b,isEntrance:!0,entranceCheckable:!0,ignoreComparison:!0,children:m.filter(e=>e.moduleId===b)},i={name:(0,a.hw)({id:"component.tree.entrance.title"}),key:`${c}.${b}`,type:c,moduleId:b,isEntrance:!0,entranceCheckable:!0,ignoreComparison:!0,className:n,children:[]};w.children.push(i),j.push({type:i.type,key:i.key,benchmark:i,mergeAction:"NOOP",comparisonStatus:"NO_COMPARE"}),g&&(i.children.push(e),j.push({type:e.type,key:e.key,benchmark:e,mergeAction:"NOOP",comparisonStatus:"NO_COMPARE"})),x&&(i.children.push(t),j.push({type:t.type,key:t.key,benchmark:t,mergeAction:"NOOP",comparisonStatus:"NO_COMPARE"})),A&&A.length>0&&h&&"object"==typeof h&&A.forEach(e=>{let t=(h[e]||[]).filter(e=>e.moduleId===b),l={className:n,name:(0,a.hw)({id:`component.oasComponent.type.${e}`}),key:`OAS_COMPONENT_ROOT_FOLDER.${e}.${b}`,type:"OAS_COMPONENT_ROOT_FOLDER",moduleId:b,oasComponentType:e,isEntrance:!0,entranceCheckable:!0,ignoreComparison:!0,children:t};i.children.push(l),j.push({type:l.type,key:l.key,benchmark:l,mergeAction:"NOOP",comparisonStatus:"NO_COMPARE"})})}return w}),entireInfo:j}}},307355:function(e,t,i){"use strict";function a(e,t){return function e(i){let a=[];return i.forEach(i=>{if(function e(i){return!!t.every(e=>e(i))||i.children.some(e)}(i)){var n;a.push({...i,children:e(null!=(n=i.children)?n:[])})}}),a}(e)}i.d(t,{A:()=>a})},404245:function(e,t,i){"use strict";i.d(t,{Ay:()=>s,Sv:()=>r});let a=e=>void 0===e||""===e||null===e||Array.isArray(e)&&0===e.length||"[object Object]"===Object.prototype.toString.call(e)&&0===Object.keys(e).length,n=e=>{if(e.includes("[]")){let t=e.replace(/\[\]/g,"\\[\\d+\\]").replace(/\./g,"\\.");return RegExp(`^${t}$`)}{let t=e.replace(/\./g,"\\.");return RegExp(`^${t}$`)}},l=function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(a(e)&&a(t))return!0;if(typeof e!=typeof t)return!1;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let a=0;a<e.length;a++){let r=`${n}[${a}]`;if(!l(e[a],t[a],i,r))return!1}return!0}if("object"==typeof e&&"object"==typeof t){for(let a of new Set([...Object.keys(e),...Object.keys(t)])){if(i(a,e[a],t[a],n))continue;let r=n?`${n}.${a}`:a;if(!l(e[a],t[a],i,r))return!1}return!0}return e===t},r=["id","createdAt","updatedAt","deletedAt","ordering","children","creatorId","editorId","hasPathConflict"];function s(e,t,i){return l(e,t,(e=>{let t=new Map;for(let i of e)t.set(i,n(i));return function(e,i,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";var l=e,r=n,s=t;let o=r?`${r}.${l}`:l;for(let[e,t]of s.entries())if(t.test(o))return!0;return!1}})(null!=i?i:new Set))}},64969:function(e,t,i){"use strict";i.d(t,{d6:()=>x,kg:()=>y});var a=i(730362),n=i(755694),l=i(515875),r=i(167223),s=i(405147),o=i(371122),d=i(5233),c=i(212462),u=i(342392),p=i(400568),m=i(362917),h=i(35281),v=i(496411),f=i(187633);function g(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((e,t)=>(t.id&&(e[t.id]=t),e),{})}async function y(e){let{projectBranchId:t=(0,v.U3)(),moduleId:i,config:{enableEndPoints:y,enableEndPointCases:x,enableSchemas:A,enableDocs:j,enableResponses:b,enableApiFolders:w,enableSchemaFolders:S,enableResponseFolders:C,enableSecuritySchemes:I,enableSecuritySchemeFolders:N,enableOasComponentTypes:k,enableOasComponentFolderTypes:T}={}}=e,M=Promise.resolve({data:[]}),[{data:E=[]},{data:_=[]},{data:F=[]},{data:D=[]},{data:R=[]},{data:O=[]},{data:P=[]},{data:L=[]},{data:$=[]},{data:B=[]},{data:z=[]},{data:U=[]},{data:H=[]}]=await Promise.all([y?(0,r.n_)(t,i):M,y?(0,s.Xr)((0,v.MJ)(),t,i):M,x?(0,f.n_)(t):M,A?(0,n.n_)((0,v.MJ)(),t,i):M,j?(0,l.n_)(t,i):M,b?(0,o.n_)((0,v.MJ)(),t,i):M,w?(0,d.n_)((0,v.MJ)(),t,i):M,S?(0,a.n_)(t,i):M,C?(0,c.n_)(t,i):M,I?(0,u.n_)((0,v.MJ)(),t,i):M,N?(0,p.n_)(t,i):M,k&&k.length>0?(0,m.n_)((0,v.MJ)(),t,i):M,T&&T.length>0?(0,h.n_)(t,i):M]);return{endpointMap:g(null!=E?E:[]),endpoints:E,customEndpointMap:g(null!=_?_:[]),customEndpoints:_,httpApiCaseMap:g(null!=F?F:[]),httpApiCases:F,schemaMap:g(null!=D?D:[]),schemas:D,docMap:g(null!=R?R:[]),docs:R,responseMap:g(null!=O?O:[]),responses:O,apiFolderMap:g(null!=P?P:[]),apiFolders:P,schemaFolderMap:g(null!=L?L:[]),schemaFolders:L,responseFolderMap:g(null!=$?$:[]),responseFolders:$,securitySchemeMap:g(null!=B?B:[]),securitySchemes:B,securitySchemeFolderMap:g(null!=z?z:[]),securitySchemeFolders:z,oasComponentMap:g(null!=U?U:[]),oasComponents:U,oasComponentFolderMap:g(null!=H?H:[]),oasComponentFolders:H}}async function x(e){let{projectBranchId:t=(0,v.U3)(),moduleId:i,config:{enableApiTreeList:a,enableResponseTreeList:l,enableSchemaTreeList:s,enableSecuritySchemeTreeList:d,enableOasComponentTreeList:c}={}}=e,p=Promise.resolve({data:[]}),h=Promise.resolve({data:{}}),[{data:f=[]},{data:g=[]},{data:y=[]},{data:x=[]},{data:A={}}]=await Promise.all([a?(0,r.hv)((0,v.MJ)(),t,void 0,i):p,s?(0,n.hv)(t,i):p,l?(0,o.hv)(t,i):p,d?(0,u.hv)(t,i):p,c?(0,m.hv)(t,i):h]);return{endpointTreeList:f,schemaTreeList:g,responseTreeList:y,securitySchemeTreeList:x,oasComponentTreeList:A}}},653435:function(e,t,i){"use strict";i.d(t,{HO:()=>d,Pd:()=>s,fN:()=>o});var a=i(641486),n=i(618487),l=i(325475),r=i(404245);let s=(0,l.vt)(e=>({ignoreKeys:new Set(r.Sv),setIgnoreKeys:t=>e({ignoreKeys:new Set([...r.Sv,...t])})})),o=()=>s.getState().ignoreKeys,d=()=>{let e=(0,n.useModel)("clientConfig",e=>{var t;let{dynamicConfig:i}=e;return null==(t=i.branchDataComparisonIgnoreProperties)?void 0:t.equalIgnore});(0,a.useEffect)(()=>{s.getState().setIgnoreKeys(new Set(null!=e?e:[]))},[e])}},171791:function(e,t,i){"use strict";i.d(t,{A:()=>h});var a=i(622754),n=i(751455),l=i(641486),r=i(474030),s=i(404245);let o=(e,t,i,a)=>{let n=i[t.id];return{...function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;return t?(0,s.Ay)(e,t,i)?{comparisonStatus:"UNMODIFIED",mergeAction:"NOOP"}:{comparisonStatus:"UPDATE",mergeAction:"OVERRIDE"}:{comparisonStatus:"INSERT",mergeAction:"CREATE"}}(t,n,a),benchmark:t,target:n,key:`${e}.${t.id}`,type:e}};function d(e,t){if(!e)return;let{docId:i,...a}=e;return{...a,doc:i?t[i]:{}}}var c=i(64969),u=i(653435),p=i(482106),m=i(789728);let h=function(e){let{sourceBranchId:t,targetBranchId:i,moduleId:s,config:h={}}=e,v=(0,p.IA)(e=>e.projectModuleList),f=(0,u.Pd)(e=>e.ignoreKeys),g=(0,l.useMemo)(()=>s?v.filter(e=>e.id===s):v,[s,v]),{enableEndPoints:y=!0,enableEndPointCases:x=!0,enableDocs:A=!0,enableSchemas:j=!0,enableResponses:b=!0,enableApiFolders:w=!0,enableSchemaFolders:S=!0,enableResponseFolders:C=!0,enableSecuritySchemes:I=!0,enableSecuritySchemeFolders:N=!0,enableOasComponentTypes:k=m.Y,enableOasComponentFolderTypes:T=m.Y}=h,M=T.length>0?T:k.length>0?k:[],{data:E,loading:_}=(0,n.Ay)(async()=>{let{endpointMap:e,endpoints:n,customEndpointMap:l,customEndpoints:u,httpApiCaseMap:p,httpApiCases:m,schemaMap:h,schemas:v,docMap:E,docs:_,responseMap:F,responses:D,apiFolderMap:R,apiFolders:O,schemaFolderMap:P,schemaFolders:L,responseFolderMap:$,responseFolders:B,securitySchemeMap:z,securitySchemes:U,securitySchemeFolderMap:H,securitySchemeFolders:V,oasComponentMap:K,oasComponents:q,oasComponentFolderMap:G,oasComponentFolders:W}=await (0,c.kg)({projectBranchId:t,moduleId:s,config:{enableEndPoints:y,enableEndPointCases:x,enableSchemas:j,enableDocs:A||w,enableResponses:b||y,enableApiFolders:w||A||y,enableSchemaFolders:S||j,enableResponseFolders:C||b,enableSecuritySchemes:I||y,enableSecuritySchemeFolders:N||I,enableOasComponentTypes:k,enableOasComponentFolderTypes:M}}),{endpointMap:J,customEndpointMap:Y,httpApiCaseMap:Z,schemaMap:Q,docMap:X,responseMap:ee,apiFolderMap:et,schemaFolderMap:ei,responseFolderMap:ea,securitySchemeMap:en,securitySchemeFolderMap:el,oasComponentMap:er,oasComponentFolderMap:es}=await (0,c.kg)({projectBranchId:i,moduleId:s,config:{enableEndPoints:y,enableEndPointCases:x,enableSchemas:j,enableDocs:A||w,enableResponses:b||y,enableApiFolders:w||A||y,enableSchemaFolders:S||j,enableResponseFolders:C||b,enableSecuritySchemes:I||y,enableSecuritySchemeFolders:N||I,enableOasComponentTypes:k,enableOasComponentFolderTypes:M}}),{endpointTreeList:eo,schemaTreeList:ed,responseTreeList:ec,securitySchemeTreeList:eu,oasComponentTreeList:ep}=await (0,c.d6)({projectBranchId:t,moduleId:s,config:{enableApiTreeList:y||A||w,enableSchemaTreeList:j||S,enableResponseTreeList:b||C,enableSecuritySchemeTreeList:I||N,enableOasComponentTreeList:k.length>0||T.length>0}}),em=(0,a.d)(eo,e=>{if(new Set(["doc","apiDetailFolder",y&&"apiDetail",y&&"CUSTOM_ENDPOINT",x&&"apiCase"]).has(e.type))return e}),eh=[],ev=[],ef=[],eg=[],ey=[],ex=[],eA=[],ej=[],eb=[],ew=[],eS=[],eC=[],eI=[];if(y&&(eh=n.map(e=>o("apiDetail",e,J,f)),ev=u.map(e=>o("CUSTOM_ENDPOINT",e,Y,f))),x&&(ef=m.map(e=>o("apiCase",e,Z,f))),j&&(eg=v.map(e=>o("apiSchema",e,Q,f))),A&&_.forEach(e=>{"folder"!==e.type&&ey.push(o("doc",e,X,f))}),b&&(ex=D.map(e=>o("httpResponse",e,ee,f))),I&&(ew=U.map(e=>o("SECURITY_SCHEME",e,en,f))),k.length>0){let e=q.filter(e=>e.type&&k.includes(e.type)),t=W.filter(e=>e.componentType&&k.includes(e.componentType));eC=e.map(e=>o("OAS_COMPONENT",e,er,f)),eI.push(...t.map(e=>o("OAS_COMPONENT_FOLDER",e,G,f)))}if(w){let e=new Proxy(et,{get:(e,t)=>d(e[t],X)});O.forEach(t=>{let i=d(t,E);"root"!==t.type&&eA.push(o("apiDetailFolder",i,e,f))})}S&&L.forEach(e=>{"root"!==e.type&&ej.push(o("apiSchemaFolder",e,ei,f))}),C&&B.forEach(e=>{"root"!==e.type&&eb.push(o("responseFolder",e,ea,f))}),N&&V.forEach(e=>{"root"!==e.type&&eS.push(o("SECURITY_SCHEME_FOLDER",e,el,f))}),M.length>0&&W.filter(e=>M.includes(e.componentType)).forEach(e=>{"root"!==e.type&&eI.push(o("OAS_COMPONENT_FOLDER",e,es,f))});let{entireTreeList:eN,entireInfo:ek}=(0,r.AK)(g,em,ed,ec,eu,ep||{},{enableDocs:A,enableEndPoints:y||w,enableResponses:b,enableSchemas:j,enableSecuritySchemes:I,enableOasComponentTypes:k}),eT=[...ek,...null!=eh?eh:[],...null!=ev?ev:[],...null!=ef?ef:[],...null!=ey?ey:[],...null!=eA?eA:[],...null!=eg?eg:[],...null!=ej?ej:[],...null!=ex?ex:[],...null!=eb?eb:[],...null!=ew?ew:[],...null!=eS?eS:[],...null!=eC?eC:[],...null!=eI?eI:[]].reduce((e,t)=>e.set(t.key,t),new Map);return{entireInfo:ek,entireTreeList:eN,treeItemStateMap:eT,dataMaps:{sourceEndpointMap:e,targetEndpointMap:J,sourceCustomEndpointMap:l,targetCustomEndpointMap:Y,sourceHttpApiCaseMap:p,targetHttpApiCaseMap:Z,sourceSchemaMap:h,targetSchemaMap:Q,sourceDocMap:E,targetDocMap:X,sourceResponseMap:F,targetResponseMap:ee,sourceApiFolderMap:R,targetApiFolderMap:et,sourceSchemaFolderMap:P,targetSchemaFolderMap:ei,sourceResponseFolderMap:$,targetResponseFolderMap:ea,sourceSecuritySchemeMap:z,targetSecuritySchemeMap:en,sourceSecuritySchemeFolderMap:H,targetSecuritySchemeFolderMap:el,sourceOasComponentMap:K,targetOasComponentMap:er,sourceOasComponentFolderMap:G,targetOasComponentFolderMap:es}}},{refreshDeps:[t]});return(0,l.useMemo)(()=>({...null!=E?E:{entireTreeList:[],entireInfo:[],treeItemStateMap:new Map,dataMaps:{sourceEndpointMap:{},targetEndpointMap:{},sourceCustomEndpointMap:{},targetCustomEndpointMap:{},sourceHttpApiCaseMap:{},targetHttpApiCaseMap:{},sourceSchemaMap:{},targetSchemaMap:{},sourceDocMap:{},targetDocMap:{},sourceResponseMap:{},targetResponseMap:{},sourceApiFolderMap:{},targetApiFolderMap:{},sourceSchemaFolderMap:{},targetSchemaFolderMap:{},sourceResponseFolderMap:{},targetResponseFolderMap:{},sourceSecuritySchemeMap:{},targetSecuritySchemeMap:{},sourceSecuritySchemeFolderMap:{},targetSecuritySchemeFolderMap:{},sourceOasComponentMap:{},targetOasComponentMap:{},sourceOasComponentFolderMap:{},targetOasComponentFolderMap:{}}},loading:_}),[E,_])}},253041:function(e,t,i){"use strict";i.d(t,{A:()=>m});var a=i(838e3),n=i(545690),l=i(740565),r=i(2183),s=i(81319),o=i(689368),d=i(471504),c=i(140049),u=i(764007),p=i(671466);function m(){let e=(0,n.Ay)(),t=(0,r._$)(e=>e.projectMainBranch),i=(0,c.A)(i=>e(t,i)),m=(e,n)=>({icon:(0,a.jsx)(p.A,{type:"icon-info-1",color:"var(--ui-primary-color)"}),title:(0,l.hw)({id:"branch.check.resource"}),content:(0,a.jsxs)(a.Fragment,{children:[(0,l.hw)({id:"branch.differentBranch.modal.content"},{branchName:t.name}),e]}),okText:(0,l.hw)({id:"branch.differentBranch.modal.ok"}),onOk:()=>i(n)}),h=(0,c.A)(e=>{let{id:t,httpApi:i,onOk:n}=e,l=i;!i&&t&&(l=(0,s.Ky)().baseHttpApiMap[t]),u.Ay.confirm(m((0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsx)(d.mn,{method:null==l?void 0:l.method,className:"text-left block mr-2"}),(0,a.jsx)("span",{children:null==l?void 0:l.name})]}),n))}),v=(0,c.A)(e=>{let{id:t,doc:i,onOk:n}=e,l=i;!i&&t&&(l=(0,s.Ky)().baseDocMap[t]),u.Ay.confirm(m((0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsx)(p.A,{type:"icon-file-docs",className:"text-left block mr-2"}),(0,a.jsx)("span",{children:null==l?void 0:l.name})]}),n))}),f=(0,c.A)(e=>{let{id:t,httpApiCase:i,onOk:n}=e,l=i;!i&&t&&(l=(0,s.Ky)().baseHttpApiCaseMap[t]),u.Ay.confirm(m((0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsx)(d.a9,{}),(0,a.jsx)("span",{children:null==l?void 0:l.name})]}),n))}),g=(0,c.A)(e=>{let{id:t,httpApiCase:i,onOk:n}=e;u.Ay.confirm(m((0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsx)(p.A,{type:"icon-TestCase",color:"var(--ui-yellow-6)",className:"mr-1"}),(0,a.jsx)("span",{children:null==i?void 0:i.name})]}),n))}),y=(0,c.A)(e=>{let{id:t,apiFolder:i,onOk:n}=e,l=i;!i&&t&&(l=(0,s.Ky)().baseHttpFolderMap[t]),u.Ay.confirm(m((0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsx)(p.A,{type:"icon-FolderDefault",style:{color:"var(--ui-text-color-secondary)"},className:"mx-1"}),(0,a.jsx)("span",{children:null==l?void 0:l.name})]}),n))}),x=(0,c.A)(e=>{let{id:t,webSocketApi:i,onOk:n}=e,l=i;!i&&t&&(l=(0,o.DA)(e=>{var i;return null==(i=e.webSocketApiDetail.apiDetailMap)?void 0:i[t]})),u.Ay.confirm(m((0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsx)(p.A,{type:"icon-websocket",className:"mx-1",color:"var(--ui-orange-6)"}),(0,a.jsx)("span",{children:null==l?void 0:l.name})]}),n))}),A=(0,c.A)(e=>{let{id:t,socketIOApi:i,onOk:n}=e,l=i;!i&&t&&(l=(0,o.DA)(e=>{var i;return null==(i=e.socketIOApi.map)?void 0:i[t]})),u.Ay.confirm(m((0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsx)(p.A,{type:"icon-websocket",className:"mx-1",color:"var(--ui-orange-6)"}),(0,a.jsx)("span",{children:null==l?void 0:l.name})]}),n))}),j=(0,c.A)(e=>{let{id:t,mcpClient:i,onOk:n}=e,l=i;!i&&t&&(l=(0,o.DA)(e=>{var i;return null==(i=e.mcpClient.map)?void 0:i[t]})),u.Ay.confirm(m((0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsx)(p.A,{type:"icon-websocket",className:"mx-1",color:"var(--ui-orange-6)"}),(0,a.jsx)("span",{children:null==l?void 0:l.name})]}),n))}),b=(0,c.A)(e=>{let{id:t,dataSchema:i,onOk:n}=e,l=i;!i&&t&&(l=(0,s.Ky)().baseDataSchemaMap[t]),u.Ay.confirm(m((0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsx)(p.A,{type:"icon-Schema",color:"var(--ui-purple-6)",className:"text-left block mr-2"}),(0,a.jsx)("span",{children:null==l?void 0:l.name})]}),n))}),w=(0,c.A)(e=>{let{id:t,responseComponent:i,onOk:n}=e,l=i;!i&&t&&(l=(0,s.Ky)().baseResponseComponentMap[t]),u.Ay.confirm(m((0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsx)(p.A,{type:"icon-response-component",color:"var(--ui-purple-6)",className:"text-left block mr-2"}),(0,a.jsx)("span",{children:null==l?void 0:l.name})]}),n))}),S=(0,c.A)(e=>{let{id:t,socketApi:i,onOk:n}=e,l=i;!i&&t&&(l=(0,o.DA)(e=>{var i;return null==(i=e.socketApi.socketApiMap)?void 0:i[t]})),u.Ay.confirm(m((0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsx)(d.mn,{method:"socket",className:"text-left block mr-2"}),(0,a.jsx)("span",{children:null==l?void 0:l.name})]}),n))});return{openMainBranchHttpApi:h,openMainBranchDoc:v,openMainBranchHttpApiCase:f,openMainBranchApiFolder:y,openMainBranchWebSocketApi:x,openMainBranchSocketIOApi:A,openMainBranchMcpClient:j,openMainBranchDataSchema:b,openMainBranchResponseComponent:w,openMainBranchSocketApi:S,openMainBranchCustomEndpoint:(0,c.A)(e=>{let{id:t,customEndpoint:i,onOk:n}=e,l=i;!i&&t&&(l=(0,o.DA)(e=>{var i;return null==(i=e.customEndpoint.map)?void 0:i[t]})),u.Ay.confirm(m((0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsx)(d.mn,{method:null==l?void 0:l.protocol,className:"text-left block mr-2"}),(0,a.jsx)("span",{children:null==l?void 0:l.name})]}),n))}),openMainBranchTestCase:g}}},943645:function(e,t,i){"use strict";i.d(t,{H:()=>c});var a=i(838e3),n=i(482106),l=i(838487),r=i.n(l),s=i(641486);let o="name-dFhSzv";var d=i(452577);function c(e){return e.value?(0,a.jsx)(p,{...e,value:e.value}):(0,a.jsx)(u,{...e,moduleId:e.moduleId})}function u(e){let t=(0,n.IA)(e=>e.projectModuleMap),i=(0,s.useMemo)(()=>{var i;return(null==(i=t.get(e.moduleId))?void 0:i.name)||""},[t,e.moduleId]);return(0,a.jsx)(p,{...e,value:i})}function p(e){let{prefix:t,postfix:i,className:n,value:l="",moduleIconColor:s="text-color-tertiary",showIcon:c=!0}=e;return(0,a.jsxs)("div",{className:r()(o,"truncate",n),children:[t,c&&(0,a.jsx)(d.A,{className:r()("mr-1",s)}),(0,a.jsx)("span",{className:"truncate",title:l.length>10?l:void 0,children:l}),i]})}},218362:function(e,t,i){"use strict";i.d(t,{N:()=>A});var a=i(838e3),n=i(482106),l=i(792093),r=i(138249),s=i(458184),o=i(671466),d=i(641486);let c="selector-eZXerg",u="icon-UPFSKb",p="line-kCj1d1",m="newModule-dBvquo",h="popup-hmkjHf",v="smallSelect-CZYYp7";var f=i(838487),g=i.n(f),y=i(740565),x=i(452577);function A(e){let{variant:t="filled",projectId:i,className:l,limitWidth:s=!1,showArrow:p=!0,hiddenOnOnlyOne:m=!1,showIconInSelected:f=!0,showIconInSelectOption:y,dropdownMatchSelectWidth:A=!1,showCreateProjectModuleMenuItem:b,projectModuleList:w,rightNode:S,...C}=e,I=(0,n.IA)(e=>e.firstProjectModuleId),{projectModuleList:N,loading:k}=(0,n.od)(i,w,C.onChange),T=(0,d.useMemo)(()=>N.map(e=>{let t=(0,a.jsxs)("div",{className:"flex items-center",children:[f&&(0,a.jsx)(x.A,{size:14,className:u}),(0,a.jsx)("span",{className:"truncate",children:e.name})]},e.id);return{value:e.id,label:y?t:e.name,title:e.name,item:t}}),[N,y,f]);return m&&N.length<2?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.A,{loading:k,placement:"bottomLeft",optionLabelProp:"item",defaultValue:I,variant:t,options:T,showArrow:p,dropdownMatchSelectWidth:A,className:g()(l,c,{limitWidth:s,[v]:"small"===C.size}),popupClassName:g()(h,{limitWidth:s}),menuItemSelectedIcon:(0,a.jsx)(o.A,{className:"ml-2",size:14,color:"var(--ui-primary-color)",type:"icon-check"}),dropdownRender:b?e=>(0,a.jsx)(j,{menu:e}):void 0,...C}),S]})}function j(e){let{menu:t}=e;return(0,a.jsxs)(a.Fragment,{children:[t,(0,a.jsx)("div",{className:p}),(0,a.jsx)(s.A,{type:"text",className:m,onClick:l.vx,icon:(0,a.jsx)(o.A,{size:14,type:"icon-plus"}),children:(0,y.hw)({id:"projectModule.create.title"})})]})}},926378:function(e,t,i){"use strict";i.d(t,{B:()=>b});var a=i(838e3),n=i(161178),l=i(740565),r=i(522571),s=i(689368),o=i(838487),d=i.n(o),c=i(969812),u=i(820182),p=i(571202),m=i(138249),h=i(671466),v=i(641486),f=i(327904),g=i(359108);let y="tableWrapper-LoK4Qm",x="member-permission-table-RW6ePF",A="member-permission-table-header-H8YDrV";function j(e){let{dataSource:t,onChange:i,setUniqueKey:n}=e,l=t.filter(e=>!e.required),r=t.length>0&&t.every(e=>e.enable),s=t.some(e=>e.enable),o=()=>{i(t.map(e=>{if(!e.required){let t=l.find(t=>t.projectId===e.projectId);if(t)return{...t,enable:!r}}return e})),null==n||n(Math.random())};return()=>(0,a.jsx)(c.A,{checked:r,indeterminate:!r&&s,onChange:o})}let b=e=>{let{value:t,dataSource:i,size:o="small",tableClassName:b="",tableHeaderClassName:w="",pagination:S=!1,bordered:C=!1,createMode:I="none",actionsColumn:N=null,onChange:k,projectRoleList:T}=e,{formatMessage:M}=(0,l.tz)(),E=(0,s.Ay)(e=>e.project.projectMap),[_,F]=(0,v.useState)(n._I.None),D=t||i||[],[R,O]=(0,v.useState)(""),P=(0,v.useMemo)(()=>D.filter(e=>{var t;return(e.projectName||(null==E||null==(t=E[e.projectId])?void 0:t.name)||"").toLowerCase().includes(R.toLowerCase())}),[D,R,E]),L=e=>{let t=new Set(P.map(e=>e.projectId));null==k||k(D.map(i=>i.enable&&t.has(i.projectId)?{...i,...e}:i),void 0)},$=[{title:j,dataIndex:"enable",width:40,align:"center",editable:!0,render:e=>(0,a.jsx)(c.A,{className:"enable-switch",checked:null!=e&&e}),componentValuePropName:"checked",tooltipProps:{mouseEnterDelay:.5}},{title:(0,a.jsxs)("div",{className:"w-full flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex-none",children:M({id:"teamMember.memberForm.label.project"})}),(0,a.jsx)(u.A,{allowClear:!0,size:"small",prefix:(0,a.jsx)(h.A,{type:"icon-search"}),value:R,onChange:e=>{O(e.target.value||"")}})]}),dataIndex:"projectName",width:340,editable:!1,rules:[{required:!0,message:M({id:"commonParameter.title.nameNotNull.message"})}],render:(e,t)=>{var i,n;let l=null==E||null==(i=E[t.projectId])?void 0:i.icon,r=e||(null==E||null==(n=E[t.projectId])?void 0:n.name)||"",s=t.hasPublicDocsSite;return(0,a.jsxs)("div",{className:"flex items-center mx-2",title:r,children:[(0,a.jsx)(p.A,{shape:"square",size:24,src:l}),(0,a.jsx)("div",{className:"ml-1 text-ellipsis",children:r}),(0,a.jsx)(f.A,{hasPublicDocsSite:s})]})}},{title:M({id:"teamMember.memberForm.label.role"}),dataIndex:"roleType",width:120,editable:!0,render:(e,t)=>(0,a.jsx)(g.iS,{projectRoleList:T})}];return(0,a.jsxs)("div",{className:y,children:[(0,a.jsxs)("div",{className:d()(A,"flex justify-between items-center px-3 py-2",w),children:[(0,a.jsxs)("div",{className:"text-color-secondary",children:[(0,a.jsx)(l.n3,{id:"projectForm.memberPermission.selected.count",values:{selected:P.filter(e=>e.enable).length,total:P.length}}),(0,a.jsx)("span",{className:"app-text-primary-high ml-2 cursor-pointer",style:{display:P.filter(e=>e.enable).length>0?"inline":"none"},onClick:()=>L({enable:!1}),children:M({id:"apiManage.action.selected.unselect"})})]}),(0,a.jsx)(m.A,{value:_,onSelect:e=>{F(e),L({roleType:e})},optionLabelProp:"label",size:"small",dropdownMatchSelectWidth:!1,type:"secondary",borderless:!0,getPopupContainer:e=>e,children:T.map(e=>(0,a.jsx)(m.A.Option,{label:M({id:"projectForm.memberPermission.batchSelect.editAll"}),value:e.id,children:e.name},e.id))})]}),(0,a.jsx)("div",{className:x,children:(0,a.jsx)(r.Ay,{value:P,onChange:e=>{let t=new Map(e.map(e=>[e.projectId,e]));null==k||k(D.map(e=>t.has(e.projectId)?t.get(e.projectId):e),void 0)},sticky:!0,scroll:{x:"100%",y:"240px"},columns:$,size:o,pagination:S,bordered:C,className:b,createMode:I,actionsColumn:N})})]})}},327904:function(e,t,i){"use strict";i.d(t,{A:()=>y});var a=i(838e3),n=i(744283),l=i(740565),r=i(2183),s=i(103058),o=i(838487),d=i.n(o),c=i(554692),u=i(458184),p=i(963227),m=i(641486),h=i(618487),v=i(325318);let f="link-UA9kLd",g="projectVisibilityTag-nIOJfZ",y=e=>{var t;let i,{hasPublicDocsSite:o}=e,{formatMessage:y}=(0,l.tz)(),x=(0,h.useLocation)().pathname.includes("/main"),{history:A}=(0,m.useContext)(s.A),j=null==(t=(0,r._$)(e=>e.currentBranchSettings.enableResourceShareDoc))||t;return o&&(i=(0,a.jsx)(c.A,{placement:e.tooltipPlacement,title:(0,a.jsxs)("div",{className:"relative",onClick:e=>e.stopPropagation(),children:[y({id:"project.makeProjectPublicVisible"}),j&&!x&&(0,a.jsx)(v.y,{permission:n.o.DOCS_PUBLISH_SETTING,children:(0,a.jsx)(u.A,{type:"link",onClick:()=>{A.push("/api-doc/published-project/publish-settings")},className:d()(f,"absolute"),children:y({id:"project.publishedSetting"})})},"docs_site_setting")]}),children:(0,a.jsx)(p.A,{color:"green",className:d()(`mr-0 ${e.className}`,g),compact:!0,children:y({id:"forPublic"})})},"Tooltip")),(0,a.jsx)(a.Fragment,{children:i})}},858534:function(e,t,i){"use strict";i.d(t,{v:()=>o});var a=i(838e3),n=i(740565),l=i(838487),r=i.n(l),s=i(671466);i(641486);let o=e=>{let{className:t,style:i}=e;return(0,a.jsxs)("section",{className:r()("flex flex-col items-center justify-center w-full h-full",t),style:i,children:[(0,a.jsx)("div",{style:{borderRadius:26,padding:6,border:"2px solid var(--ui-border-color-split)"},children:(0,a.jsx)(s.A,{type:"icon-lock",size:32,style:{borderRadius:20,color:"var(--ui-disabled-color)",backgroundColor:"var(--ui-background-color-light)",padding:14}})}),(0,a.jsx)("div",{className:"text-color font-size-base font-weight-base mt-3",children:(0,a.jsx)(n.sA,{id:"rbac.No.Permission"})})]})}},925122:function(e,t,i){"use strict";i.d(t,{A:()=>o});var a=i(740565),n=i(132349),l=i(751455),r=i(929463),s=i(618487);let o=function(e){let{run:t,loading:i}=(0,l.Ay)(n.X,{manual:!0,onSuccess:()=>{var t;(0,s.dispatchFetchHttpApiList)(),r.Ay.success((0,a.hw)({id:"message.actionSuccess"})),null==e||null==(t=e.onSuccess)||t.call(e)},onError:()=>{var t;r.Ay.error((0,a.hw)({id:"message.actionFailure"})),null==e||null==(t=e.onError)||t.call(e)}});return{dispatchBatchAction:t,loading:i}}},769923:function(e,t,i){"use strict";i.d(t,{i:()=>l});var a=i(838e3),n=i(671466);function l(e){let{kind:t,size:i,className:l,style:r}=e,s={CLIENT_STREAMING:"icon-lotsofgreetings",SERVER_STREAMING:"icon-lotsofreplied",BIDIRECTIONAL_STREAMING:"icon-bidihello",UNARY:"icon-sayhello"}[null!=t?t:"UNARY"],o={CLIENT_STREAMING:"var(--ui-orange-6)",SERVER_STREAMING:"var(--ui-orange-6)",BIDIRECTIONAL_STREAMING:"var(--ui-orange-6)",UNARY:"var(--ui-green-6)"}[null!=t?t:"UNARY"];return(0,a.jsx)(n.A,{className:l,type:s,color:o,size:i,style:r})}},123022:function(e,t,i){"use strict";i.d(t,{n:()=>s});var a=i(838e3),n=i(740565),l=i(671466),r=i(641486);function s(e){let{saving:t}=e,[i,s]=(0,r.useState)(!1),o=(0,r.useRef)(),d=(0,r.useRef)(t);return((0,r.useEffect)(()=>(!0===d.current&&!1===t&&(s(!0),window.clearTimeout(o.current),o.current=window.setTimeout(()=>{s(!1)},3e3)),d.current=t,()=>{window.clearTimeout(o.current)}),[t]),t)?(0,a.jsxs)("div",{className:"flex items-center gap-1",style:{fontSize:"var(--ui-font-size-sm)",color:"var(--ui-text-color-secondary)"},children:[(0,a.jsx)(l.A,{type:"icon-refresh",spin:!0}),(0,n.hw)({id:"saving"})]}):i?(0,a.jsxs)("div",{className:"flex items-center gap-1",style:{fontSize:"var(--ui-font-size-sm)",color:"var(--ui-text-color-secondary)"},children:[(0,a.jsx)(l.A,{type:"icon-cloud-check"}),(0,n.hw)({id:"saved"})]}):null}},355469:function(e,t,i){"use strict";i.d(t,{ue:()=>g,Ay:()=>y});var a=i(838e3),n=i(238504),l=i(2183),r=i(66011),s=i(923117);let o=(0,i(618487).dynamic)({loading:s.A,loader:async()=>{let{default:e}=await Promise.all([i.e("34351"),i.e("36969"),i.e("54527"),i.e("15973"),i.e("68531")]).then(i.bind(i,316861));return e}});var d=i(674984),c=i(81319),u=i(689368),p=i(435685),m=i(202182),h=i(641486),v=i(398380),f=i(697075);let g=d.nL,y=function(e){var t;let i=(0,l._$)(e=>e.projectCurrentBranch),s=(0,l._$)(e=>e.projectMainBranch),d=(0,l._$)(e=>e.currentBranchSettings.enableRefFallbackToMain),{dataSchemaList:g,mockRule:y,projectSettingData:x}=(0,u.Ay)(e=>{let{project:t,apiSchema:i,projectSetting:a}=e;return{dataSchemaList:i.list,mockRule:t.currentProject&&t.currentProject.mockRule,projectSettingData:a.projectSettingData}}),{templateParameters:A}=(0,r.Z)(),{showMock:j,showFaker:b}=(0,m.A)(()=>{var e,t;return{showMock:(null==x||null==(e=x.mockSettings)?void 0:e.engine)==="mockjs",showFaker:(null==x||null==(t=x.mockSettings)?void 0:t.engine)==="fakerjs"}},[x]);(0,h.useEffect)(()=>()=>{void 0===g&&(0,n.g6)()},[g]);let w=(0,h.useMemo)(()=>{if(!y)return[];let{utils:{mock:e}}=p.baseContainer.getItemsSync(e=>[e.utils]);return e.memoizedGetMockRules(y)},[y,x]),S=e.moduleId,C=(0,u.Ay)(e=>e.apiSchema.treeList),I=(0,c.Ay)(e=>e.baseDataSchemaTreeList),N=function(){let{currentBranch:e,mainBranch:t,enableFallback:i}=(0,l._$)(e=>({currentBranch:e.projectCurrentBranch,mainBranch:e.projectMainBranch,enableFallback:e.currentBranchSettings.enableRefFallbackToMain}),f.x),{dataSchemaMap:a,dataSchemaList:n}=(0,u.Ay)(e=>{let{apiSchema:t}=e;return{dataSchemaMap:t.map,dataSchemaList:t.list}}),r=(0,c.Ay)(e=>e.branchDataSchemaMap);return(0,h.useMemo)(()=>{if(!i)return a;let l=(0,v.pick)(t,["id","name","isMain"]),s=(0,v.pick)(e,["id","name","isMain"]),o={};return null==n||n.forEach(e=>{let t=e.id&&r[e.id];o[e.id]={...e,branchInfo:t?s:l}}),o},[r,e,n,a,i,t])}(),k=(0,u.Ay)(e=>e.apiSchema.dataSchemaDefinitions);return(0,a.jsx)(o,{...e,showMock:j,showFaker:b,mockRules:w,hiddenXmlOptions:null!=(t=e.hiddenXmlOptions)?t:"json"===e.contentType,customSchemaDefinitions:k,customSchemaTreeList:C,currentBranch:i,mainBranch:s,enableFallback:d,mainBranchSchemaTreeList:I,customDataSchemaMap:N,moduleId:S,useTemplateParameter:e.useTemplateParameter,templateParameters:A})}},622425:function(e,t,i){"use strict";i.d(t,{A:()=>tE});var a=i(838e3),n=i(666804),l=i(740565),r=i(764007),s=i(671466);function o(e){let{entityId:t,entityType:i,...o}=e;return(0,a.jsx)(r.Ay,{size:"400",closable:!1,title:null,open:o.open,maskClosable:!1,onCancel:o.onCancel,onOk:()=>{var e;null==(e=o.onCancel)||e.call(o),(0,n.Nu)({entityId:t,entityType:i})},okText:(0,a.jsx)(l.sA,{id:"payment.order.checktheorder"}),children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(s.A,{type:"icon-info",color:"var(--ui-primary-color)",className:"mr-3",size:24}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-size-lg font-weight-semibold",children:(0,a.jsx)(l.sA,{id:"payment.order.Thereisanexistingunpaidorder"})}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(l.sA,{id:"payment.order.canNotInviteWhenHasUnpaidOrder"})})]})]})})}var d=i(398380);function c(e){let{entityId:t,entityType:i,subscriptionType:o,quantity:c,...u}=e;return(0,a.jsx)(r.Ay,{size:"400",closable:!1,title:null,open:u.open,maskClosable:!1,onCancel:u.onCancel,onOk:()=>{var e;null==(e=u.onCancel)||e.call(u),(0,n.Nu)({entityId:t,entityType:i,showQuantityIncreaseModal:!0})},okText:(0,a.jsx)(l.sA,{id:"payment.AddSeats"}),children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(s.A,{type:"icon-info",color:"var(--ui-primary-color)",className:"mr-3",size:24}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-size-lg font-weight-semibold",children:(0,a.jsx)(l.sA,{id:"payment.seatsAreFullDoYouWantToAddMoreSeats",values:{planType:(0,a.jsx)(l.sA,{id:`payment.${(0,d.upperFirst)(o)}`})}})}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(l.sA,{id:"payment.currentlyHasMembersReachTheLimit",values:{quantity:(0,a.jsx)("b",{children:c})}})})]})]})})}var u=i(361975),p=i(280346),m=i(765787),h=i(71527),v=i(718180),f=i(161178),g=i(496411),y=i(689368),x=i(124704),A=i(662387),j=i(255529),b=i(579159),w=i(641486),S=i(700255),C=i(169508),I=i(451479),N=i(742952);function k(){let e=(0,y.Ay)(e=>e.externalURL),t=(0,y.Ay)(e=>e.userCredit.currentUserCredits.exchangeRate),i=(0,N.Y0)((0,g.n$)(),C.T0);return C.pF?(0,a.jsxs)("div",{className:"mt-4 pt-4 text-center",style:{borderTop:"1px solid var(--ui-border-color-split)"},children:[(0,l.hw)({id:"payment.inviteUserEarnCredit"},{amount:(0,I.pc)(1e3,t,i)})," ",(0,a.jsx)(S.A,{url:e.help.creditIntroduction})]}):null}var T=i(359108),M=i(11953),E=i(471755),_=i(154732),F=i(272164),D=i(458184),R=i(554692),O=i(653814),P=i(138775);let L={linkInvitationContainer:"linkInvitationContainer-VoGCnI",linkContainer:"linkContainer-KXXO6X",linkInputWrapper:"linkInputWrapper-mbW7rE",linkIcon:"linkIcon-ON0MiN",linkText:"linkText-eLLdiB",linkCopyButton:"linkCopyButton-etwkKb",permissionContainer:"permissionContainer-gP3Uq0",permissionItem:"permissionItem-VutjOn",permissionLabel:"permissionLabel-NpIeO0",otherProjectPermissionItem:"otherProjectPermissionItem-ZC57KA",otherProjectPermissionSelect:"otherProjectPermissionSelect-si1QW1",permissionSelectWrapper:"permissionSelectWrapper-oWL25L",settingButton:"settingButton-sq1ZRE",resetLinkContainer:"resetLinkContainer-E4H6ki",resetLink:"resetLink-OEbEcS",hintText:"hintText-tt4mor"};var $=i(487843),B=i(793594);function z(e){if(1===e)return"url";if(3===e)return"email";if(4===e)return"within_team";throw Error("Invalid invitation type")}function U(e){return e===f._I.Admin?"Admin":e===f._I.Maintainer?"Editor":e===f._I.Readonly?"Viewer":e===f._I.None?"Forbidden":"Paid_custom"}function H(e){return -1===e?"Custom":U(e)}function V(e){if(2===e)return"Admin";if(3===e)return"Member";if(4===e)return"Guest";throw Error("Invalid team role type")}function K(e,t,i,a){(0,B.IL)("app_invite_button_click_authority",{page_source:e,index:t,permission_field:i,..."target_project_role"===i?{target_project_role:a}:{},..."team_role"===i?{team_role:a}:{},..."other_project_role"===i?{other_project_role:a}:{}})}function q(e,t){(0,B.IL)("app_invite_button_click_customize",{page_source:e,index:t})}function G(e){let{projectId:t,teamId:i,formProjectRoleType:n,formTeamRoleType:r,teamProjectList:o,onInvitationSuccess:d,source:c}=e,{projectRoleList:u}=(0,T.vv)(i,{includeForbiddenAccessRole:!0}),p=(0,y.Ay)(e=>{var t,a;if(!i)return!1;let n=null==(a=e.team.teamMap)||null==(t=a[i])?void 0:t.roleType;return(0,E.pS)({userRoleType:n,needRoleType:2})}),[m,h]=(0,w.useState)(f._I.None),[v,g]=(0,w.useState)([]),x=e=>{(0,P.Dk)(e.invitationInfo),null==d||d()},A=async()=>{if(await (0,_.hm)({type:1,resourceType:"PROJECT",permissions:{teamRoleType:r,projectRoleList:((e,i)=>-1===e?[{projectId:t,roleType:i},...v.map(e=>({projectId:e.projectId,roleType:e.roleType}))]:o.map(a=>({projectId:a.id,roleType:a.id===t?i:e})))(m,n)},projectId:t,teamId:i},x,{autoShowMessage:!1}),c){let e=n===f._I.Maintainer&&3===r&&m===f._I.None;(0,B.IL)("app_invite_button_click_invite_member",{page_source:c,index:z(1),target_project_role:U(n),team_role:V(r),other_project_role:H(m),permission_is_default:e,invite_count:1})}},{run:b}=(0,F.A)(async()=>{let e={successMessage:(0,l.hw)({id:"teamMember.action.message.resetLinkSuccess"}),failureMessage:(0,l.hw)({id:"teamMember.action.message.resetLinkFail"})};await (0,_.$u)(t,void 0,e)},{wait:300});return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:L.linkInvitationContainer,children:[(0,a.jsx)("p",{className:L.hintText,children:(0,l.hw)({id:"invitation.link.hint"},{days:7})}),(0,a.jsxs)("div",{className:L.linkContainer,children:[(0,a.jsxs)("div",{className:L.linkInputWrapper,children:[(0,a.jsx)(s.A,{type:"icon-link1",className:L.linkIcon}),(0,a.jsx)("div",{className:L.linkText,children:P.Fx}),(0,a.jsx)(D.A,{type:"primary",onClick:A,icon:(0,a.jsx)(s.A,{type:"icon-copy-02"}),className:L.linkCopyButton,children:(0,l.hw)({id:"invitation.btn.copyLink"})})]}),(0,a.jsxs)("div",{className:L.permissionContainer,children:[(0,a.jsxs)("div",{className:L.permissionItem,children:[(0,a.jsxs)("span",{className:L.permissionLabel,children:[(0,a.jsx)(l.sA,{id:"invitation.permission.label.permission"}),":"]}),(0,a.jsx)(j.A.Item,{className:"mb-0",name:"projectRoleType",noStyle:!0,children:(0,a.jsx)(T.iS,{projectRoleList:u,dropdownMatchSelectWidth:!1,onChange:e=>{c&&K(c,z(1),"target_project_role",U(e))}})})]}),(0,a.jsxs)("div",{className:L.permissionItem,children:[(0,a.jsxs)("span",{className:L.permissionLabel,children:[(0,a.jsx)(l.sA,{id:"invitation.permission.label.teamRole"}),":"]}),(0,a.jsx)(R.A,{title:p?"":(0,l.hw)({id:"invitation.permission.tooltip"}),placement:"top",children:(0,a.jsx)("div",{children:(0,a.jsx)(j.A.Item,{className:"mb-0",name:"teamRoleType",noStyle:!0,children:(0,a.jsx)(M.A,{disabled:!p,dropdownMatchSelectWidth:!1,onChange:e=>{c&&K(c,z(1),"team_role",V(e))}})})})})]}),(0,a.jsxs)("div",{className:L.otherProjectPermissionItem,children:[(0,a.jsxs)("span",{className:L.permissionLabel,children:[(0,a.jsx)(l.sA,{id:"invitation.permission.label.otherProjects"}),":"]}),(0,a.jsx)(R.A,{title:p?"":(0,l.hw)({id:"invitation.permission.tooltip"}),placement:"top",children:(0,a.jsx)("div",{className:L.permissionSelectWrapper,children:(0,a.jsx)($.K,{value:m,disabled:!p,onChange:e=>{h(e),c&&(K(c,z(1),"other_project_role",H(e)),-1===e&&q(c,z(1)))},teamId:i,projectId:t,teamProjectList:o,customProjectPermissions:v,onCustomPermissionsChange:e=>{g(e)},className:L.otherProjectPermissionSelect})})})]})]})]}),(0,a.jsx)("div",{className:L.resetLinkContainer,children:(0,a.jsx)(O.A,{title:(0,l.hw)({id:"invitation.btn.resetLink.warning"}),onConfirm:()=>{b()},overlayClassName:"max-w-xs",children:(0,a.jsxs)("div",{className:L.resetLink,children:[(0,a.jsx)(s.A,{type:"icon-refresh-cw-02",className:L.resetLinkIcon}),(0,a.jsx)("span",{children:(0,l.hw)({id:"invitation.btn.resetLink"})})]})})})]})})}var W=i(69712),J=i(929463),Y=i(111540),Z=i(876870),Q=i(138249),X=i(963227);let ee={emailListContainer:"emailListContainer-gOLGK9",tableHeaderContainer:"tableHeaderContainer-t8vgmB",tableHeader:"tableHeader-juiABL",checkboxCell:"checkboxCell-HkG0ao",bulkAddContainer:"bulkAddContainer-8kBH1Z",bulkInputWrapper:"bulkInputWrapper-ho4x7r",bulkEmailInput:"bulkEmailInput-hPae_I",emailTag:"emailTag-G6HE3O",bulkAddActions:"bulkAddActions-MBCWWd",errorMessage:"errorMessage-gby5_M",headerCell:"headerCell-ZaevZn",tableBody:"tableBody-wFvo6K",tableRow:"tableRow-t26Rfn",inputCell:"inputCell-rKGbc7",selectCell:"selectCell-FosP3n",removeButton:"removeButton-LQu7h7",actionButtons:"actionButtons-e11GET",selectionToolbar:"selectionToolbar-pyQAuC",selectionInfo:"selectionInfo-jWa8SW",selectionCount:"selectionCount-GQYKNx",unselectLink:"unselectLink-ZkfZ4g",divider:"divider-G7Ej7U"};function et(e){let{bulkEmails:t,setBulkEmails:i,onCancel:n,onConfirm:r}=e,s=(0,w.useMemo)(()=>t.length>0&&t.some(e=>!(0,W.ws)(e)),[t]);return(0,a.jsxs)("div",{className:ee.bulkAddContainer,children:[(0,a.jsxs)("div",{className:ee.bulkInputWrapper,children:[(0,a.jsx)(Q.A,{mode:"tags",value:t,onChange:i,className:ee.bulkEmailInput,open:!1,placeholder:(0,l.hw)({id:"invitation.input.email.placeholder"}),tokenSeparators:[",","\n","\r",";"," "],tagRender:e=>{let{label:t,onClose:i,closable:n}=e,l="string"==typeof t?t:"",r=(0,W.ws)(l);return(0,a.jsx)(X.A,{className:ee.emailTag,color:r?"default":"error",closable:n,onClose:i,outline:!0,children:t})},autoFocus:!0,status:s?"error":void 0}),(0,a.jsxs)("div",{className:ee.bulkAddActions,children:[(0,a.jsx)(D.A,{type:"text",onClick:n,children:(0,l.hw)({id:"cancel"})}),(0,a.jsx)(D.A,{type:"neutral",onClick:r,disabled:0===t.length||s,children:(0,l.hw)({id:"confirm"})})]})]}),s&&(0,a.jsx)("div",{className:ee.errorMessage,children:(0,l.hw)({id:"teamMember.action.message.wrongEmailFormat"})})]})}function ei(e){let{visible:t,onCancel:i,onConfirm:n,permissions:s,setPermissions:o,projectRoleList:d,projectName:c,teamId:u,projectId:p,teamProjectList:m,currentUserTeamRoleType:h,source:v}=e,f=(0,w.useMemo)(()=>(0,E.pS)({userRoleType:h,needRoleType:2}),[h]),g=(0,w.useMemo)(()=>f?void 0:(0,l.hw)({id:"invitation.permission.tooltip"}),[f]),y=(0,w.useMemo)(()=>({points:["bc","tc"],offset:[0,26]}),[]);return(0,a.jsx)(r.Ay,{title:(0,l.hw)({id:"invitation.bulkEdit.modal.title"}),open:t,onCancel:i,onOk:n,okText:(0,l.hw)({id:"confirm"}),cancelText:(0,l.hw)({id:"cancel"}),size:480,destroyOnClose:!0,children:(0,a.jsxs)(j.A,{layout:"vertical",children:[(0,a.jsx)(j.A.Item,{label:(0,l.hw)({id:"invitation.bulkEdit.label.currentProject"},{projectName:c}),children:(0,a.jsx)(T.iS,{projectRoleList:d,value:s.projectRoleType,onChange:e=>{o(t=>({...t,projectRoleType:e})),v&&K(v,z(3),"target_project_role",U(e))}})}),(0,a.jsx)(R.A,{title:g,align:y,children:(0,a.jsx)(j.A.Item,{label:(0,l.hw)({id:"invitation.permission.label.teamRole"}),children:(0,a.jsx)(M.A,{style:{width:"100%"},value:s.teamRoleType,onChange:e=>{o(t=>({...t,teamRoleType:e})),v&&K(v,z(3),"team_role",V(e))},disabled:!!g})})}),(0,a.jsx)(R.A,{title:g,align:y,children:(0,a.jsx)(j.A.Item,{label:(0,l.hw)({id:"invitation.permission.label.otherProjects"}),children:(0,a.jsx)($.K,{value:s.otherProjectsPermission,onChange:e=>{o(t=>({...t,otherProjectsPermission:e})),v&&(K(v,z(3),"other_project_role",H(e)),-1===e&&q(v,z(3)))},disabled:!!g,teamId:u,projectId:p,teamProjectList:m,customProjectPermissions:s.customProjectPermissions,onCustomPermissionsChange:e=>{o(t=>({...t,customProjectPermissions:e}))},className:"w-full"})})})]})})}var ea=i(969812),en=i(820182);let el=(0,w.memo)(function(e){let{row:t,selected:i,onSelect:n,onUpdate:r,onRemove:o,projectRoleList:d,teamId:c,projectId:u,teamProjectList:p,isBulkMode:m,currentUserTeamRoleType:h,source:v,isBulkEditMode:f}=e,g=(0,w.useMemo)(()=>(0,E.pS)({userRoleType:h,needRoleType:2}),[h]),y=(0,w.useMemo)(()=>g?void 0:(0,l.hw)({id:"invitation.permission.tooltip"}),[g]);return(0,a.jsxs)("div",{className:ee.tableRow,children:[f&&(0,a.jsx)("div",{className:ee.checkboxCell,children:(0,a.jsx)(ea.A,{checked:i,onChange:e=>n(t.id,e.target.checked)})}),(0,a.jsx)("div",{className:ee.inputCell,style:{flex:1},children:(0,a.jsx)(en.A,{value:t.email,onChange:e=>r(t.id,{email:e.target.value}),placeholder:"email@example.com",status:t.email&&!(0,W.ws)(t.email)?"error":void 0})}),(0,a.jsx)("div",{className:ee.selectCell,style:{width:160},children:(0,a.jsx)(T.iS,{value:t.projectRoleType,projectRoleList:d,onChange:e=>{r(t.id,{projectRoleType:e}),v&&K(v,z(3),"target_project_role",U(e))},...m&&{dropdownMatchSelectWidth:!0}})}),(0,a.jsx)("div",{className:ee.selectCell,style:{width:160},children:(0,a.jsx)(R.A,{title:y,children:(0,a.jsx)(M.A,{style:{width:160},value:t.teamRoleType,onChange:e=>{r(t.id,{teamRoleType:e}),v&&K(v,z(3),"team_role",V(e))},disabled:!!y})})}),(0,a.jsx)(R.A,{title:y,children:(0,a.jsx)("div",{className:ee.selectOtherProjectCell,style:{width:160},children:(0,a.jsx)($.K,{value:t.otherProjectsPermission,onChange:e=>{r(t.id,{otherProjectsPermission:e}),v&&(K(v,z(3),"other_project_role",H(e)),-1===e&&q(v,z(3)))},teamId:c,projectId:u,teamProjectList:p,customProjectPermissions:t.customProjectPermissions,onCustomPermissionsChange:e=>{r(t.id,{customProjectPermissions:e})},disabled:!!y})})}),(0,a.jsx)(D.A,{type:"text",icon:(0,a.jsx)(s.A,{type:"icon-trash-04"}),onClick:()=>o(t.id),className:ee.removeButton})]})});function er(e){let{selectedCount:t,totalCount:i,onToggleAll:n,onUnselectAll:r,onBulkEdit:o,onBulkDelete:d,isBulkEditMode:c,isHovering:u,onEnterBulkEditMode:p}=e;return c?(0,a.jsxs)("div",{className:ee.selectionToolbar,children:[(0,a.jsx)("div",{className:ee.checkboxCell,children:(0,a.jsx)(ea.A,{checked:t===i&&i>0,indeterminate:t>0&&t<i,onChange:e=>n(e.target.checked)})}),(0,a.jsxs)("div",{className:ee.selectionInfo,children:[(0,a.jsx)("span",{className:ee.selectionCount,children:(0,l.hw)({id:"invitation.teamMember.selectedCount"},{count:t})}),(0,a.jsx)("span",{className:ee.unselectLink,onClick:r,children:(0,l.hw)({id:"cancel"})}),(0,a.jsx)("div",{className:ee.divider}),(0,a.jsx)(D.A,{icon:(0,a.jsx)(s.A,{type:"icon-setting-o"}),onClick:o,disabled:0===t,children:(0,l.hw)({id:"invitation.teamMember.bulkEditPermissions"})}),(0,a.jsx)(D.A,{icon:(0,a.jsx)(s.A,{type:"icon-trash-04"}),onClick:d,disabled:0===t,children:(0,l.hw)({id:"delete"})})]})]}):u&&i>1?(0,a.jsx)("div",{className:ee.tableHeaderContainer,children:(0,a.jsxs)("div",{className:ee.tableHeader,children:[(0,a.jsxs)("div",{className:ee.headerCell,style:{flex:1},children:[(0,a.jsx)(l.sA,{id:"invitation.teamMember.tableHeader.emailAddress"}),(0,a.jsx)("span",{className:ee.unselectLink,onClick:p,style:{marginLeft:8},children:(0,l.hw)({id:"projectSetting.templateParameter.button.bulkEdit"})})]}),(0,a.jsx)("div",{className:ee.headerCell,style:{width:160},children:(0,a.jsx)(l.sA,{id:"invitation.permission.label.permission"})}),(0,a.jsx)("div",{className:ee.headerCell,style:{width:160},children:(0,a.jsx)(l.sA,{id:"invitation.permission.label.teamRole"})}),(0,a.jsx)("div",{className:ee.headerCell,style:{width:160},children:(0,a.jsx)(l.sA,{id:"invitation.permission.label.otherProjects"})}),(0,a.jsx)("div",{className:ee.headerCell,style:{width:32}})]})}):(0,a.jsx)("div",{className:ee.tableHeaderContainer,children:(0,a.jsxs)("div",{className:ee.tableHeader,children:[(0,a.jsx)("div",{className:ee.headerCell,style:{flex:1},children:(0,a.jsx)(l.sA,{id:"invitation.teamMember.tableHeader.emailAddress"})}),(0,a.jsx)("div",{className:ee.headerCell,style:{width:160},children:(0,a.jsx)(l.sA,{id:"invitation.permission.label.permission"})}),(0,a.jsx)("div",{className:ee.headerCell,style:{width:160},children:(0,a.jsx)(l.sA,{id:"invitation.permission.label.teamRole"})}),(0,a.jsx)("div",{className:ee.headerCell,style:{width:160},children:(0,a.jsx)(l.sA,{id:"invitation.permission.label.otherProjects"})}),(0,a.jsx)("div",{className:ee.headerCell,style:{width:32}})]})})}let es=e=>{var t,i,a;return{id:`row-${Date.now()}-${Math.random()}`,email:"",projectRoleType:null!=(t=null==e?void 0:e.projectRoleType)?t:f._I.Maintainer,teamRoleType:null!=(i=null==e?void 0:e.teamRoleType)?i:3,otherProjectsPermission:null!=(a=null==e?void 0:e.otherProjectsPermission)?a:f._I.None}},eo={projectRoleType:f._I.Maintainer,teamRoleType:3,otherProjectsPermission:f._I.None};function ed(e){let{value:t,onChange:i,projectId:n,teamId:r,teamProjectList:o,projectName:d,isBulkMode:c,onBulkModeChange:u,currentUserTeamRoleType:p,source:m}=e,{projectRoleList:h}=(0,T.vv)(r,{includeForbiddenAccessRole:!0}),[v,f]=(0,w.useState)([]),[g,y]=(0,w.useState)([]),[x,A]=(0,w.useState)(!1),[j,b]=(0,w.useState)({}),[S,C]=(0,w.useState)(!1),[I,N]=(0,w.useState)(!1),k=(0,w.useCallback)(()=>{u(!1),f([]),y([]),i(e=>0===e.length?[es()]:e)},[u,i]),M=(0,w.useCallback)(()=>{C(!1),y([])},[]),E=(0,w.useCallback)(()=>{i([...t,es(t[t.length-1])])},[t,i]),_=(0,w.useCallback)(e=>{i(1===t.length?[es()]:t.filter(t=>t.id!==e))},[t,i]),F=(0,w.useCallback)((e,t)=>{i(i=>i.map(i=>i.id===e?{...i,...t}:i))},[i]),R=(0,w.useCallback)(()=>{if(0===v.length)return void J.Ay.warning((0,l.hw)({id:"teamMember.action.message.emailRequired"}));if(v.length>P._7)return void J.Ay.error((0,l.hw)({id:"teamMember.action.message.emailCountExceedLimit"},{count:P._7}));if(v.filter(e=>!(0,W.ws)(e)).length>0)return void J.Ay.error((0,l.hw)({id:"teamMember.action.message.wrongEmailFormat"}));let e=new Set(t.map(e=>e.email.trim().toLowerCase())),a=v.filter(t=>!e.has(t.trim().toLowerCase()));if(0===a.length)return void k();let n=t[0];i([...t,...a.map(e=>({...es(n),email:e}))]),k()},[v,t,k,i]),O=(0,w.useCallback)((e,t)=>{y(i=>t?[...i,e]:i.filter(t=>t!==e))},[]),L=(0,w.useCallback)(e=>{y(e?t.map(e=>e.id):[])},[t]),$=(0,w.useCallback)(()=>{if(0===g.length)return;let e=t.filter(e=>!g.includes(e.id));i(e.length>0?e:[es()]),y([])},[g,t,i]),B=(0,w.useCallback)(()=>{0===Object.keys(j).length?A(!1):(i(t.map(e=>g.includes(e.id)?{...e,...void 0!==j.projectRoleType&&{projectRoleType:j.projectRoleType},...void 0!==j.teamRoleType&&{teamRoleType:j.teamRoleType},...void 0!==j.otherProjectsPermission&&{otherProjectsPermission:j.otherProjectsPermission},...void 0!==j.customProjectPermissions&&{customProjectPermissions:j.customProjectPermissions}}:e)),A(!1),b({}))},[j,g,t,i]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:ee.emailListContainer,onMouseEnter:()=>N(!0),onMouseLeave:()=>N(!1),children:[(0,a.jsx)(er,{selectedCount:g.length,totalCount:t.length,onToggleAll:L,onUnselectAll:M,onBulkEdit:()=>{A(!0),b(eo)},onBulkDelete:$,isBulkEditMode:S,isHovering:I,onEnterBulkEditMode:()=>C(!0)}),t.length>0&&(0,a.jsx)("div",{className:ee.tableBody,children:t.map(e=>(0,a.jsx)(el,{row:e,selected:g.includes(e.id),onSelect:O,onUpdate:F,onRemove:_,projectRoleList:h,teamId:r,projectId:n,teamProjectList:o,isBulkMode:c,currentUserTeamRoleType:p,source:m,isBulkEditMode:S},e.id))})]}),c&&(0,a.jsx)(et,{bulkEmails:v,setBulkEmails:f,onCancel:k,onConfirm:R}),(0,a.jsxs)("div",{className:ee.actionButtons,children:[(0,a.jsx)(D.A,{icon:(0,a.jsx)(s.A,{type:"icon-plus"}),onClick:E,children:(0,l.hw)({id:"add"})}),!c&&(0,a.jsx)(D.A,{type:"link",onClick:()=>{i(e=>e.filter(e=>""!==e.email.trim())),f([]),u(!0)},children:(0,l.hw)({id:"invitation.teamMember.bulkAdd"})})]}),(0,a.jsx)(ei,{visible:x,onCancel:()=>{A(!1),b({})},onConfirm:B,permissions:j,setPermissions:b,projectRoleList:h,projectName:d,teamId:r,projectId:n,teamProjectList:o,currentUserTeamRoleType:p,source:m})]})}let ec="hintText-jdUPVe";function eu(e){let{projectId:t,teamId:i,form:n,teamProjectList:r,onCancel:s,onInvitationSuccess:o,source:d}=e,c=((0,y.Ay)(e=>e.project.projectMap)||{})[t],u=(null==c?void 0:c.name)||"",p=(0,y.Ay)(e=>{var t,a;return null==(a=e.team.teamMap)||null==(t=a[i])?void 0:t.roleType})||0,[m,h]=(0,w.useState)([es()]),[v,g]=(0,w.useState)(!1),{slotId:x,checkCaptchaResponse:A,responseHandler:j}=(0,Z.j)(e=>{var t;if(!e.success)return J.Ay.error(e.errorMessage||(0,l.hw)({id:"message.operateFailure"}));if(null==o||o(),!Array.isArray(e.data.failedList)||!(null==(t=e.data.failedList)?void 0:t.length)){let e=m.filter(e=>e.email.trim()).length;return J.Ay.success((0,l.hw)({id:"teamMember.action.message.sendSuccess"},{emails:e}))}let i=e.data.failedList.join(", ");return Y.A.warn({message:(0,l.hw)({id:"teamMember.action.message.someEmailSendFailed"}),description:i,btn:(0,a.jsx)(D.A,{onClick:()=>(0,P.Dk)(i),children:(0,l.hw)({id:"teamMember.inviteMemberForm.copy"})}),duration:null})}),{run:b}=(0,F.A)(async()=>{if(d){let e=(0,P.Zh)(m.map(e=>e.projectRoleType)),t=(0,P.Zh)(m.map(e=>e.teamRoleType)),i=(0,P.Zh)(m.map(e=>e.otherProjectsPermission)),a=m.every(e=>e.projectRoleType===f._I.Maintainer&&3===e.teamRoleType&&e.otherProjectsPermission===f._I.None);(0,B.IL)("app_invite_button_click_invite_member",{page_source:d,index:z(3),target_project_role:U(e),team_role:V(t),other_project_role:H(i),permission_is_default:a,invite_count:S})}let e=m.filter(e=>e.email.trim());if(0===e.length)return J.Ay.error((0,l.hw)({id:"teamMember.action.message.emailRequired"}));if(e.length>P._7)return J.Ay.error((0,l.hw)({id:"teamMember.action.message.emailCountExceedLimit"},{count:P._7}));if(e.filter(e=>!(0,W.ws)(e.email)).length>0)return J.Ay.error((0,l.hw)({id:"teamMember.action.message.wrongEmailFormat"}));let{pass:a,captchaResponse:n}=await A();if(!a)return;let s=e.map(e=>{let i;if(-1===e.otherProjectsPermission)i=[{projectId:t,roleType:e.projectRoleType},...(e.customProjectPermissions||[]).filter(e=>e.enable).map(e=>({projectId:e.projectId,roleType:e.roleType}))];else i=r.map(i=>({projectId:i.id,roleType:i.id===t?e.projectRoleType:e.otherProjectsPermission}));return{email:e.email,teamRoleType:e.teamRoleType,projectRoleList:i}});j(await (0,_.hm)({teamId:i,projectId:t,type:3,permissions:{emails:s},captchaResponse:n},void 0,{autoShowMessage:!1}))},{wait:300}),S=(0,w.useMemo)(()=>m.filter(e=>e.email.trim()&&(0,W.ws)(e.email)).length,[m]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{id:x}),(0,a.jsx)("p",{className:ec,children:(0,l.hw)({id:"invitation.email.hint"},{days:7})}),(0,a.jsx)(ed,{value:m,onChange:h,projectId:t,teamId:i,teamProjectList:r,projectName:u,isBulkMode:v,onBulkModeChange:g,currentUserTeamRoleType:p,source:d}),(0,a.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[(0,a.jsx)(D.A,{onClick:s,children:(0,l.hw)({id:"cancel"})}),(0,a.jsx)(D.A,{type:"primary",onClick:b,disabled:0===S,children:S>0?(0,l.hw)({id:"invitation.btn.sendInvites"},{count:S}):(0,l.hw)({id:"invitation.btn.sendInvite"})})]})]})}var ep=i(461294),em=i(520378),eh=i(751455),ev=i(794397),ef=i(838487),eg=i.n(ef),ey=i(257100),ex=i(571202);let eA="listContainer-AtpxNR",ej="tableHeaderContainer-hkTbqd",eb="tableHeader-v1tzrc",ew="tableHeaderLeft-XzzvZ6",eS="tableHeaderContent-jwgMGn",eC="tableHeaderRight-RjieOy",eI="tableHeaderTitle-yjqajO",eN="selectionToolbar-bZmxXm",ek="toolbarLeft-piOqEa",eT="toolbarContent-zsQa_H",eM="toolbarRight-e_oKi4",eE="checkboxWrapper-a3x0L3",e_="selectedCountText-U5yBLa",eF="unselectLink-a9FtlG",eD="divider-h3YCyu",eR="bulkEditButton-Jx_YPw",eO="memberRow-HEfpKH",eP="memberLeft-B4_Ye7",eL="memberContent-etpfpJ",e$="memberInfo-qvnAN7",eB="memberName-crUATK",ez="memberEmail-EJ5ohd",eU="memberRight-9npjRZ",eH="selectWrapper-PIq2Bs",eV="selectWithTag-qOQEHw",eK="forbiddenTag-nKRcc3";function eq(e){let t,{filteredMembers:i,selectedUserIds:n,memberPermissions:r,availableRoles:o,onSelectedUserIdsChange:d,onMemberPermissionsChange:c,source:u}=e,p=(0,w.useCallback)(e=>{var t;return null!=(t=r.get(e))?t:f._I.None},[r]),m=(e,t)=>{let i=new Set(n),a=new Map(r);t?(i.add(e),a.has(e)||a.set(e,f._I.None)):i.delete(e),d(i),t&&!r.has(e)&&c(a)},h=(0,w.useMemo)(()=>i.length>0&&i.every(e=>n.has(e.userId)),[i,n]),v=(0,w.useMemo)(()=>i.some(e=>n.has(e.userId))&&!h,[i,n,h]);return(0,a.jsxs)("div",{className:eA,children:[(t=(0,a.jsx)("div",{className:eE,children:(0,a.jsx)(ea.A,{checked:h,indeterminate:v,onChange:e=>{var t;let a,l;return t=e.target.checked,a=new Set(n),l=new Map(r),void(i.forEach(e=>{t?(a.add(e.userId),l.has(e.userId)||l.set(e.userId,f._I.None)):a.delete(e.userId)}),d(a),c(l))}})}),n.size>0?(0,a.jsx)("div",{className:ej,children:(0,a.jsxs)("div",{className:eN,children:[(0,a.jsx)("div",{className:ek,children:t}),(0,a.jsxs)("div",{className:eT,children:[(0,a.jsx)("span",{className:e_,children:(0,a.jsx)(l.sA,{id:"invitation.teamMember.selectedCount",values:{count:n.size}})}),(0,a.jsx)("span",{className:eF,onClick:()=>d(new Set),children:(0,l.hw)({id:"invitation.teamMember.unselect"})}),(0,a.jsx)("div",{className:eD}),(0,a.jsx)(ey.A,{menu:{items:o.map(e=>({key:e.id,label:e.name,onClick:()=>{let t=new Map(r);n.forEach(i=>t.set(i,e.id)),c(t),u&&K(u,z(4),"target_project_role",U(e.id))}}))},trigger:["click"],children:(0,a.jsx)(D.A,{className:eR,icon:(0,a.jsx)(s.A,{type:"icon-Setting"}),children:(0,l.hw)({id:"invitation.teamMember.bulkEditPermissions"})})})]}),(0,a.jsx)("div",{className:eM})]})}):(0,a.jsx)("div",{className:ej,children:(0,a.jsxs)("div",{className:eb,children:[(0,a.jsx)("div",{className:ew,children:t}),(0,a.jsx)("div",{className:eS,children:(0,a.jsx)("span",{className:eI,children:(0,l.hw)({id:"invitation.teamMemberList.teamRole.member"})})}),(0,a.jsx)("div",{className:eC,children:(0,a.jsx)("span",{className:eI,children:(0,l.hw)({id:"invitation.teamMember.tableHeader.projectPermission"})})})]})})),i.map(e=>{var t,i,s,d,h,v,g,y,x,A,j;let b=n.has(e.userId),w=p(e.userId),S=w===f._I.None;return(0,a.jsxs)("div",{className:eO,onClick:()=>m(e.userId,!b),children:[(0,a.jsx)("div",{className:eP,children:(0,a.jsx)("div",{className:eE,children:(0,a.jsx)(ea.A,{checked:b,onChange:t=>m(e.userId,t.target.checked)})})}),(0,a.jsxs)("div",{className:eL,children:[(0,a.jsx)(ex.A,{src:(null==(t=e.user)?void 0:t.avatar)||"",size:32,children:(null==(d=(s=e).nickname)?void 0:d[0])||(null==(v=s.user)||null==(h=v.name)?void 0:h[0])||(null==(y=s.user)||null==(g=y.username)?void 0:g[0])||"U"}),(0,a.jsxs)("div",{className:e$,children:[(0,a.jsx)("div",{className:eB,children:(x=e).nickname||(null==(A=x.user)?void 0:A.name)||(null==(j=x.user)?void 0:j.username)||"-"}),(0,a.jsx)("div",{className:ez,children:(null==(i=e.user)?void 0:i.email)||"-"})]})]}),(0,a.jsx)("div",{className:eg()(eU),children:(0,a.jsxs)("div",{className:eH,children:[(0,a.jsx)(Q.A,{value:w,onChange:t=>{var i,a;let n;i=e.userId,a=t,n=new Map(r),n.set(i,a),c(n),u&&K(u,z(4),"target_project_role",U(t))},onClick:e=>e.stopPropagation(),className:S?eV:"",style:{width:"100%"},children:o.map(e=>(0,a.jsx)(Q.A.Option,{label:e.name,value:e.id,children:e.name},e.id))}),S&&(0,a.jsx)(X.A,{color:"red",className:eK,children:(0,l.hw)({id:"projectMember.role.none"})})]})})]},e.userId)})]})}let eG="container-uGLTlk",eW="header-dZqXWx",eJ="headerTitle-dFAHx0",eY="searchButton-FmLG1V",eZ="searchInput-G1dzV3",eQ="hintText-NpYMrd",eX="tableContainer-CESgb1",e0="loadingContainer-mlfvAV",e1="emptyContainer-E15sGz",e4="emptyText-FIxZWU",e3="footer-MmmYM5",e8="footerButtons-vUkhw7";function e6(e){let{projectId:t,teamId:i,onCancel:n,onInvitationSuccess:r,source:o}=e,{projectRoleList:d}=(0,T.vv)(i,{includeForbiddenAccessRole:!0}),[c,u]=(0,w.useState)(""),[p,m]=(0,w.useState)(!1),[h,v]=(0,w.useState)(new Set),[g,x]=(0,w.useState)(new Map),A=(0,y.Ay)(e=>e.projectMember.currentProjectMembers)||[],{data:j=[],loading:b,refresh:S}=(0,eh.Ay)(async()=>{let e=await (0,em.CV)(i);return e.data?e.data.filter(e=>1===e.status).filter(e=>!(null==A?void 0:A.some(t=>t.userId===e.userId&&t.roleType!==f._I.None))):[]},{refreshDeps:[i,null==A?void 0:A.length]}),C=(0,w.useMemo)(()=>{if(!c)return j;let e=c.toLowerCase();return j.filter(t=>{var i,a;return[t.nickname,null==(i=t.user)?void 0:i.username,null==(a=t.user)?void 0:a.email].some(t=>null==t?void 0:t.toLowerCase().includes(e))})},[j,c]),I=(0,w.useCallback)(e=>{var t;return null!=(t=g.get(e))?t:f._I.None},[g]),{run:N}=(0,F.A)(async()=>{if(k)return;let e=j.filter(e=>I(e.userId)!==f._I.None),a=e.map(e=>({userId:e.userId,roleType:I(e.userId)}));if(o){let t=(0,P.Zh)(e.map(e=>I(e.userId)));(0,B.IL)("app_invite_button_click_invite_member",{page_source:o,index:z(3),target_project_role:U(t),team_role:V(3),other_project_role:H(f._I.None),permission_is_default:!0,invite_count:e.length})}try{await (0,ep.EZ)({projectId:t,teamId:i,userRoles:a}),J.Ay.success((0,l.hw)({id:"invitation.teamMember.addSuccess"})),null==r||r(),v(new Set),x(new Map),u(""),(0,_.dY)(()=>{S()})}catch(e){console.error("handleAddMembers error: ",e)}},{wait:300}),k=(0,w.useMemo)(()=>0===C.length||C.every(e=>I(e.userId)===f._I.None),[C,I]),M=(0,w.useMemo)(()=>d.filter(e=>e.id!==f._I.None),[d]);return(0,a.jsxs)("div",{className:eG,children:[(0,a.jsx)("p",{className:eQ,children:(0,l.hw)({id:"invitation.teamMember.hint"})}),(0,a.jsxs)("div",{className:eW,children:[(0,a.jsx)("p",{className:eJ,children:(0,l.hw)({id:"invitation.teamMember.availableToInvite"},{count:C.length})}),p?(0,a.jsx)(en.A,{className:eZ,prefix:(0,a.jsx)(s.A,{type:"icon-search-sm"}),value:c,onChange:e=>u(e.target.value),onBlur:()=>!c&&m(!1),allowClear:!0,autoFocus:!0}):(0,a.jsx)(D.A,{type:"text",className:eY,icon:(0,a.jsx)(s.A,{type:"icon-search-sm"}),onClick:()=>m(!0)})]}),(0,a.jsx)("div",{className:eX,children:b?(0,a.jsx)("div",{className:e0,children:(0,a.jsx)(ev.A,{})}):0===C.length?(0,a.jsx)("div",{className:e1,children:(0,a.jsx)("div",{className:e4,children:c?(0,a.jsx)("p",{children:(0,l.hw)({id:"teamMember.memberForm.search.noResult"})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:(0,l.hw)({id:"teamMember.memberForm.search.noResult"})}),(0,a.jsx)("p",{children:(0,l.hw)({id:"projectMember.search.noResultTip"})})]})})}):(0,a.jsx)(eq,{filteredMembers:C,selectedUserIds:h,memberPermissions:g,availableRoles:M,onSelectedUserIdsChange:v,onMemberPermissionsChange:x,source:o})}),(0,a.jsx)("div",{className:e3,children:(0,a.jsxs)("div",{className:e8,children:[(0,a.jsx)(D.A,{onClick:n,children:(0,l.hw)({id:"cancel"})}),(0,a.jsx)(D.A,{type:"primary",onClick:N,disabled:k,children:(0,l.hw)({id:"add"})})]})})]})}function e2(e){let{onCancel:t,source:i,...n}=e,s=(0,y.Ay)(e=>{var t;return(null==(t=e.project.currentProject)?void 0:t.id)||(0,g.MJ)()||0}),o=(0,y.Ay)(e=>e.project.projectMap)||{},d=(0,y.Ay)(e=>e.project.teamProjectListMap),c=o[s]||{},u=c.name,p=c.teamId,m=(0,g.CF)(),[h,v]=(0,x.A)(`invitationType:user:${m}`,1),[S,C]=(0,w.useState)(h||1),I=(0,w.useCallback)(e=>{v(e)},[v]),[N]=j.A.useForm(),T=j.A.useWatch("projectRoleType",N),M=j.A.useWatch("teamRoleType",N);(0,A.A)(()=>{n.open||N.resetFields()},[n.open]);let E=(0,w.useCallback)(()=>{var e;null==t||t(),i&&(e=i,(0,B.IL)("app_invite_button_click_off",{page_source:e}))},[t,i]),_=(0,w.useCallback)(e=>{var t,a;C(e),i&&(t=i,a=z(e),(0,B.IL)("app_invite_tab_switch",{page_source:t,index:a}))},[i]);return(0,a.jsx)(r.Ay,{title:(0,a.jsx)("div",{title:u,className:"text-ellipsis mr-6",children:(0,a.jsx)(l.sA,{id:"invitation.project.modal.title",values:{name:u}})}),okText:(0,l.hw)({id:"save"}),cancelText:(0,l.hw)({id:"cancel"}),size:800,footer:null,onCancel:E,destroyOnClose:!0,...n,children:(0,a.jsxs)(j.A,{form:N,initialValues:{emails:[],projectRoleType:f._I.Maintainer,teamRoleType:3},children:[(0,a.jsx)(b.A,{block:!0,value:S,onChange:_,options:[{label:(0,l.hw)({id:"invitation.btn.inviteViaLink"}),value:1},{label:(0,l.hw)({id:"invitation.btn.inviteViaEmail"}),value:3},{label:(0,l.hw)({id:"invitation.btn.selectFromTeam"}),value:4}]}),(0,a.jsxs)("div",{style:{marginTop:20},children:[1===S&&(0,a.jsx)(G,{source:i,projectId:s,teamId:p,formProjectRoleType:T,formTeamRoleType:M,teamProjectList:(null==d?void 0:d[p])||[],onInvitationSuccess:()=>I(1)}),3===S&&(0,a.jsx)(eu,{source:i,projectId:s,teamId:p,form:N,teamProjectList:(null==d?void 0:d[p])||[],onCancel:t,onInvitationSuccess:()=>I(3)}),4===S&&(0,a.jsx)(e6,{source:i,projectId:s,teamId:p,onCancel:t,onInvitationSuccess:()=>I(4)})]}),(0,a.jsx)(k,{})]})})}var e5=i(327904),e7=i(522571),e9=i(848336);let te=e=>{let{columns:t,tableDataSource:i,onTableChange:n,onUnselectAll:r,onBulkEdit:s,projectRoleList:o}=e,[d,c]=(0,w.useState)(f._I.None);return(0,a.jsxs)("div",{className:e9.A.tableWrapper,children:[(0,a.jsxs)("div",{className:eg()(e9.A["member-permission-table-header"],"flex justify-between items-center px-3 py-2"),children:[(0,a.jsxs)("div",{className:"text-color-secondary",children:[(0,a.jsx)(l.n3,{id:"projectForm.memberPermission.selected.count",values:{selected:i.filter(e=>e.enable).length,total:i.length}}),(0,a.jsx)("span",{className:"app-text-primary-high ml-2 cursor-pointer",style:{display:i.filter(e=>e.enable).length>0?"inline":"none"},onClick:()=>r(),children:(0,l.hw)({id:"apiManage.action.selected.unselect"})})]}),(0,a.jsx)(Q.A,{value:d,onSelect:e=>{c(e),s(e)},optionLabelProp:"label",size:"small",dropdownMatchSelectWidth:!1,type:"secondary",borderless:!0,children:o.map(e=>(0,a.jsx)(Q.A.Option,{label:(0,l.hw)({id:"projectForm.memberPermission.batchSelect.editAll"}),value:e.id,children:e.name},e.id))})]}),(0,a.jsx)("div",{className:e9.A["member-permission-table"],children:(0,a.jsx)(e7.Ay,{value:i,onChange:n,sticky:!0,scroll:{x:"100%",y:"240px"},columns:t,size:"small",pagination:!1,bordered:!1,createMode:"none",actionsColumn:null})})]})};var tt=i(819463),ti=i(452267),ta=i(618487),tn=i(541993);let tl={icon:"icon-XQv2zY",iconActive:"iconActive-TFFd18",tagSelect:"tagSelect-O1Tx29",tag:"tag-Mc43bz"};function tr(e){let{dataSource:t,onChange:i,setUniqueKey:n}=e,l=t.filter(e=>!e.required),r=l.every(e=>e.enable),s=t.some(e=>e.enable),o=()=>{i(t.map(e=>{if(!e.required){let t=l.find(t=>t.id===e.id);if(t)return{...t,enable:!r}}return e})),null==n||n(Math.random())};return()=>(0,a.jsx)(ea.A,{checked:r,indeterminate:!r&&s,onChange:o})}let ts=e=>{(0,P.Dk)(e.invitationInfo)};function to(e,t,i){return -1===i?e.map(e=>({projectId:e.id,roleType:e.roleType})):t.map(e=>({projectId:e.id,roleType:i}))}let td=e=>{let{teamId:t,onCancel:i,onInvited:n,...o}=e,d=(0,w.useRef)(null),c=(0,w.useRef)(null),[u,p]=(0,w.useState)(!1),m=(((0,y.Ay)(e=>e.team.teamMap)||{})[t]||{}).name,h=(0,y.Ay)(e=>e.project.teamProjectListMap),v=(0,y.Ay)(e=>e.project.projectMap),[g,x]=(0,w.useState)(1),S=(0,w.useMemo)(()=>{var e;return((null==h||null==(e=h[t])?void 0:e.map(e=>({...e,roleType:f._I.None})))||[]).map(e=>({...e,enable:!1}))},[]),[C,I]=(0,w.useState)(S),[N,M]=(0,w.useState)(void 0),[E]=j.A.useForm(),[_,R]=(0,w.useState)(f._I.Maintainer),L=async()=>{H(),await (0,ta.dispatchInviteTeamMember)({type:1,resourceType:"TEAM",permissions:{teamRoleType:3,projectRoleList:to(C,(null==h?void 0:h[t])||[],_)},teamId:t,emails:[]},ts,{autoShowMessage:!1})},{run:$}=(0,F.A)(async()=>{let e={successMessage:(0,l.hw)({id:"teamMember.action.message.resetLinkSuccess"}),failureMessage:(0,l.hw)({id:"teamMember.action.message.resetLinkFail"})};await (0,ta.dispatchDeleteInvitations)(t,void 0,e)},{wait:300});function U(){(0,B.IL)("app_invite_button_click_customize",{index:z(g)})}function H(){(0,B.IL)("app_invite_button_click_invite_member",{page_source:"team_set",index:z(g)})}let{projectRoleList:V}=(0,T.vv)(t);(0,A.A)(()=>{(0,B.IL)("app_invite_button_click_authority",{page_source:"team_set",index:z(g)});-1===_&&(p(!0),U())},[_]),(0,tt.A)(()=>{M(!1)},[c,d]);let{slotId:K,checkCaptchaResponse:q,responseHandler:G}=(0,Z.j)(e=>{let{success:t}=e,i=E.getFieldsValue();if(!t)return J.Ay.error(e.errorMessage||(0,l.hw)({id:"message.operateFailure"}));if(null==n||n(),!Array.isArray(e.data.failedList)||!e.data.failedList.length)return J.Ay.success((0,l.hw)({id:"teamMember.action.message.sendSuccess"},{emails:i.emails.length}));let r=e.data.failedList.join(", ");return Y.A.warn({message:(0,l.hw)({id:"teamMember.action.message.someEmailSendFailed"}),description:r,btn:(0,a.jsx)(D.A,{onClick:()=>(0,P.Dk)(r),children:(0,l.hw)({id:"teamMember.inviteMemberForm.copy"})}),duration:null})}),{run:ee}=(0,F.A)(async()=>{var e;H();let i={teamId:t,emails:null!=(e=(await E.validateFields()).emails)?e:[],type:3,permissions:{teamRoleType:3,projectRoleList:to(C,(null==h?void 0:h[t])||[],_)}},{pass:a,captchaResponse:n}=await q();if(a){let e={...i,captchaResponse:n};G(await (0,ta.dispatchInviteTeamMember)(e,void 0,{autoShowMessage:!1}))}},{wait:300}),et=[{title:tr,dataIndex:"enable",width:40,align:"center",editable:!0,render:e=>(0,a.jsx)(ea.A,{className:"enable-switch",checked:e}),componentValuePropName:"checked",tooltipProps:{mouseEnterDelay:.5}},{title:(0,a.jsx)(l.sA,{id:"teamMember.memberForm.label.project"}),dataIndex:"name",width:180,editable:!1,rules:[{required:!0,message:(0,l.hw)({id:"commonParameter.title.nameNotNull.message"})}],render:(e,t)=>{var i,n;let l=null==v||null==(i=v[t.id])?void 0:i.visibility;return(0,a.jsxs)("div",{className:"flex items-center mx-2",title:e,children:[(0,a.jsx)(ex.A,{shape:"square",size:"small",src:null==v||null==(n=v[t.id])?void 0:n.icon}),(0,a.jsx)("div",{className:"ml-1 text-ellipsis",children:e}),l&&(0,a.jsx)(e5.A,{visibility:l})]})}},{title:(0,a.jsx)(l.sA,{id:"teamMember.memberForm.label.role"}),dataIndex:"roleType",width:120,editable:!0,render:(e,t)=>(0,a.jsx)(T.iS,{projectRoleList:V})}],ei=(0,w.useMemo)(()=>{let e=V.map(e=>({name:e.name,id:e.id}));return e.push({name:(0,l.hw)({id:"projectForm.memberPermission.manualSetup"}),id:-1}),e.map(e=>(0,a.jsx)(Q.A.Option,{label:e.name,value:e.id,children:e.name},e.id))},[V]);return(0,a.jsxs)(r.Ay,{title:(0,a.jsx)("div",{title:m,className:"text-ellipsis mr-6",children:(0,a.jsx)(l.sA,{id:"invitation.modal.title",values:{name:m}})}),okText:(0,l.hw)({id:"save"}),cancelText:(0,l.hw)({id:"cancel"}),size:"400",footer:null,onCancel:()=>{null==i||i(),(0,B.IL)("app_invite_button_click_off",{page_source:"team_set"})},...o,children:[(0,a.jsx)("div",{id:K,className:"flex items-center justify-center"}),(0,a.jsxs)(j.A,{form:E,onFinish:ee,children:[(0,a.jsx)(b.A,{block:!0,value:g,onChange:e=>x(e),options:[{label:(0,l.hw)({id:"invitation.btn.inviteViaLink"}),value:1},{label:(0,l.hw)({id:"invitation.btn.inviteViaEmail"}),value:3}]}),(0,a.jsxs)("div",{style:{marginTop:20},children:[1===g&&(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(en.A,{disabled:!0,value:P.Fx,className:"flex-1"}),(0,a.jsx)(ey.A,{placement:"bottomRight",trigger:["click"],visible:N,onVisibleChange:e=>{M(e)},overlay:(0,a.jsx)(ti.A,{children:(0,a.jsx)(O.A,{title:(0,l.hw)({id:"invitation.btn.resetLink.warning"}),onConfirm:()=>{$()},onVisibleChange:e=>{M(e)},overlayClassName:"max-w-xs",children:(0,a.jsx)(ti.A.Item,{children:(0,a.jsxs)("div",{ref:d,children:[(0,a.jsx)(s.A,{className:"mr-2",type:"icon-refresh-cw-02"}),(0,l.hw)({id:"invitation.btn.resetLink"})]})})})}),children:(0,a.jsx)(D.A,{ref:c,icon:(0,a.jsx)(s.A,{size:18,type:"icon-dots-horizontal"}),className:eg()(tl.icon,N&&tl.iconActive,"ml-1"),onClick:()=>M(!0)})})]}),3===g&&(0,a.jsx)(j.A.Item,{className:"mb-0",name:"emails",rules:[{required:!0,message:(0,l.hw)({id:"teamMember.action.message.emailRequired"})},()=>({async validator(e,t){if((null==t?void 0:t.length)>P._7)throw Error((0,l.hw)({id:"teamMember.action.message.emailCountExceedLimit"},{count:P._7}));null==t||t.forEach(e=>{if(!(0,W.ws)(e))throw Error((0,l.hw)({id:"teamMember.action.message.wrongEmailFormat"}))})}})],children:(0,a.jsx)(Q.A,{className:eg()(tl.tagSelect,"w-full"),mode:"tags",open:!1,tagRender:e=>{let{label:t,onClose:i,closable:n}=e,l=(0,W.ws)("string"==typeof t?t:"");return(0,a.jsx)(X.A,{className:eg()(tl.tag),color:l?"default":"error",closable:n,onClose:i,style:{marginRight:8},outline:!0,children:t})},autoFocus:!0,tokenSeparators:[",","\n","\r",";"," "],placeholder:(0,l.hw)({id:"invitation.input.email.placeholder"}),onClick:()=>{(0,B.IL)("app_invite_input_click_email")}})})]}),(0,a.jsx)(tn.W,{}),(0,a.jsxs)("div",{className:"flex items-center",style:{marginTop:20},children:[(0,a.jsxs)("div",{className:"text-color-secondary",children:[" ",(0,l.hw)({id:"invitation.permission.label.allProjectPermission"})," "]}),(0,a.jsx)(Q.A,{value:_,className:"flex-1 ml-2 w-1",dropdownClassName:tl.customSelect,onChange:e=>{R(e)},optionLabelProp:"label",children:ei}),(0,a.jsx)(D.A,{className:"ml-1",style:{display:-1===_?"inline-block":"none"},icon:(0,a.jsx)(s.A,{type:"icon-setting-o"}),onClick:()=>{p(!0),U()}})]}),1===g?(0,a.jsx)(D.A,{className:"mt-6 w-full",type:"primary",onClick:L,children:(0,l.hw)({id:"invitation.btn.copyLink"})}):(0,a.jsx)(D.A,{className:"mt-6 w-full",type:"primary",onClick:()=>E.submit(),children:(0,l.hw)({id:"invitation.btn.sendInvite"})}),(0,a.jsx)(k,{}),(0,a.jsx)(r.Ay,{getContainer:!1,title:(0,l.hw)({id:"projectDetail.label.memberRole"}),visible:u,onCancel:()=>{I(S),p(!1)},size:"400",okText:(0,l.hw)({id:"save"}),cancelText:(0,l.hw)({id:"cancel"}),onOk:()=>{p(!1)},children:(0,a.jsx)(te,{projectRoleList:V,columns:et,tableDataSource:C,onBulkEdit:e=>{I(t=>t.map(t=>t.enable?{...t,roleType:e}:t))},onTableChange:e=>{I(e)},onUnselectAll:()=>I(e=>e.map(e=>({...e,enable:!1})))})})]})]})};function tc(e){let{entityId:t,entityType:i,resourceType:n,source:l,...r}=e,{shouldShowHasUnpaidOrderModal:s,shouldShowSeatsFullModal:d,quantity:f,subscriptionType:g}=function(e){let{entityId:t,entityType:i}=e,{getUnpaidOrderList:a,unpaidOrderId:n}=(0,p.yx)(t,i),{isOneTimePaymentMode:l}=(0,u.Ab)(t,i),{teamMemberCount:r}=(0,h.bH)(t,i),{quantity:s,subscriptionType:o}=(0,m.g9)(t,i);return(0,v.A)(async()=>{l&&await a(t)}),{shouldShowHasUnpaidOrderModal:l&&n,shouldShowSeatsFullModal:l&&r===s,quantity:s,subscriptionType:o}}({entityId:t,entityType:i,...r});return s?(0,a.jsx)(o,{entityId:t,entityType:i,...r}):d?(0,a.jsx)(c,{entityId:t,entityType:i,quantity:f,subscriptionType:g,...r}):"TEAM"===n?(0,a.jsx)(td,{teamId:t,...r}):"PROJECT"===n?(0,a.jsx)(e2,{...r,source:l}):null}var tu=i(756422),tp=i(220854),tm=i(237379),th=i(667754),tv=i(916858),tf=i(19523),tg=i(487844);let ty=e=>{let{teamId:t,onInvited:i,projectRoleList:n}=e,[r]=(0,tf.A)(),[s,o]=(0,w.useState)([]),[d,c]=(0,w.useState)(!1),u=(0,y.Ay)(e=>e.project.currentProject),p=(0,y.Ay)(e=>e.projectMember.currentProjectMembers),m=(0,tg.N)(e=>e.roleType,r);(0,w.useEffect)(()=>{m&&(0,B.IL)("app_invite_button_click_authority",{page_source:"project_detail",index:"within_team"})},[m]),(0,w.useEffect)(()=>{c(!0),(0,em.CV)(t).then(e=>{let{data:t}=e,i=[],a=[];t.filter(e=>1===e.status).forEach(e=>{(null==p?void 0:p.some(t=>t.userId===e.userId&&t.roleType!==tv._I.None))?i.push({...e,disabled:!0}):a.push(e)}),o([...a,...i])}).finally(()=>c(!1))},[p,t]);let{run:h,cancel:v,loading:f}=(0,th.ZO)(ep.EZ,e=>{let t=e.successIds.length,a=e.failIds.length;t>0?0===a?J.Ay.success((0,l.hw)({id:"projectMember.action.message.inviteSuccess"})):J.Ay.success((0,l.hw)({id:"projectMember.action.message.inviteSuccessPartial"},{successCount:t,failCount:a})):J.Ay.error((0,l.hw)({id:"projectMember.action.message.teamMemberQuitted"})),(0,ta.dispatchFetchCurrentProjectMemberList)(),null==i||i()},void 0,{showLoading:!1,isReturnAll:!0,isHideSuccessMsg:!0}),{run:g}=(0,F.A)(async e=>{u&&(h({projectId:u.id,teamId:t,userIds:e.userIds,roleType:e.roleType}),(0,B.IL)("app_invite_button_click_invite_member",{page_source:"project_detail"}))},{wait:200});return(0,a.jsxs)(j.A,{form:r,onFinish:g,requiredMark:!1,layout:"vertical",children:[(0,a.jsx)(tp.i,{title:(0,l.hw)({id:"invitation.add.teamMember.to.project"}),children:(0,a.jsx)(j.A.Item,{name:"userIds",style:{marginBottom:0},rules:[{required:!0,message:(0,l.hw)({id:"teamMember.action.message.accountsRequired"})}],children:(0,a.jsx)(tm.A,{loading:d,locale:{itemUnit:(0,l.hw)({id:"teamMember.memberForm.itemUnit"}),batchSelectPlaceholder:"",sourceNotFoundContent:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:(0,l.hw)({id:"teamMember.memberForm.search.noResult"})}),(0,a.jsx)("p",{children:(0,l.hw)({id:"projectMember.search.noResultTip"})})]}),targetNotFoundContent:(0,l.hw)({id:"teamMember.memberForm.search.noResult"}),targetEmptyContent:(0,l.hw)({id:"teamMember.memberForm.search.targetEmptyContent"}),searchPlaceholder:(0,l.hw)({id:"teamMember.memberForm.search.searchPlaceholder"})},dataSource:s,fieldNames:{id:"userId",title:"nickname"},render:e=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(ex.A,{className:"flex-none",size:20,src:e.user.avatar}),(0,a.jsx)("div",{className:"flex-auto truncate ml-2",children:e.nickname||e.user.username})]}),onFilter:(e,t)=>{var i,a;return(null==(i=e.nickname)?void 0:i.includes(t))||(null==(a=e.user.username)?void 0:a.includes(t))}})})}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-3",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"mr-2",children:(0,l.hw)({id:"teamMember.memberForm.label.projectRole"})}),(0,a.jsx)(j.A.Item,{name:"roleType",className:"mb-0",initialValue:tv._I.Maintainer,children:(0,a.jsx)(T.iS,{projectRoleList:n,placeholder:(0,l.hw)({id:"component.memberRoleSelect.placeholder"}),dropdownMatchSelectWidth:!1})})]}),(0,a.jsx)(tu.A,{type:"primary",htmlType:"submit",loading:f,onCancel:v,onClick:r.submit,children:(0,l.hw)({id:"teamMember.inviteMemberForm.inviteButton"})})]})]})};function tx(e){let{teamId:t,onInvited:i,projectRoleList:n,entityId:s,entityType:o,...d}=e,c=(0,y.Ay)(e=>e.project.currentProject),{projectRoleList:u}=(0,T.vv)(t,{fetch:!n,includeForbiddenAccessRole:!1});return(0,a.jsx)(r.Ay,{size:"720",title:(0,l.hw)({id:"invitation.add.member.to.project"},{projectName:null==c?void 0:c.name}),footer:null,...d,children:(0,a.jsx)(ty,{teamId:t,onInvited:i,projectRoleList:u})})}let tA="modal-KPbZPP";var tj=i(189840),tb=i(556910),tw=i(869704),tS=i(202182),tC=i(926378),tI=i(411576);let tN=e=>{let{teamId:t,autoSelectCurrentProject:i=!1,onInvited:n,onCancel:r}=e,[s]=(0,tf.A)(),[o,d]=(0,w.useState)([]),[c,u]=(0,w.useState)(!1),p=(0,y.Ay)(e=>{let{project:t}=e;return t.teamProjectListMap}),m=(0,y.Ay)(e=>{let{project:t}=e;return t.currentProject}),h=(0,y.Ay)(e=>{let{user:t}=e;return t.currentUser}),{run:v,data:f={data:[]}}=(0,eh.Ay)(tj.Or,{manual:!0}),g=(0,tS.A)(()=>(0,tw.rp)({superAdminRoleType:null==h?void 0:h.superAdminRoleType}),[h]);(0,w.useEffect)(()=>{g&&(null==v||v(t))},[g,v,t]);let x=(0,w.useMemo)(()=>(g?null==f?void 0:f.data:null==p?void 0:p[t])||[],[t,p,f,g]);(0,w.useEffect)(()=>{s.setFieldsValue({projectRoleList:x.map(e=>({projectId:e.id,projectName:e.name,visibility:e.visibility,roleType:i&&(null==m?void 0:m.id)===e.id?tv._I.Maintainer:tv._I.None}))})},[x]),(0,w.useEffect)(()=>{u(!0),Promise.all([(0,em.CV)(t),(0,tb.JW)({status:1})]).then(e=>{let[{data:t},{data:i}]=e,a=[],n=[];i.forEach(e=>{t.some(t=>t.userId===e.id&&1===t.status)?a.push({...e,disabled:!0}):n.push(e)}),d([...n,...a])}).finally(()=>u(!1))},[t]);let{run:A,cancel:b,loading:S}=(0,th.ZO)(em.EZ,()=>{null==n||n(),J.Ay.success((0,l.hw)({id:"teamMember.action.message.sendSuccess"},{emails:s.getFieldsValue().accounts.length}))},void 0,{showLoading:!1,isReturnAll:!0,isHideSuccessMsg:!0}),{run:I}=(0,F.A)(async e=>{var i;m&&A(t,{emails:[],account:"",type:4,accounts:null!=(i=e.accounts)?i:[],permissions:{teamRoleType:3,projectRoleList:e.projectRoleList.map(e=>{let{projectId:t,roleType:i}=e;return{roleType:i,projectId:t}})}})},{wait:200}),{projectRoleList:N}=(0,T.vv)(t);return(0,a.jsx)("div",{children:(0,a.jsxs)(j.A,{form:s,onFinish:I,requiredMark:!1,layout:"vertical",children:[(0,a.jsx)(tp.i,{title:(0,l.hw)({id:"teamMember.inviteMemberForm.addMemberToTeam"}),children:(0,a.jsx)(j.A.Item,{name:"accounts",style:{marginBottom:0},rules:[{required:!0,message:(0,l.hw)({id:"teamMember.action.message.accountsRequired"})}],children:(0,a.jsx)(tm.A,{showBatchSelect:!0,loading:c,locale:{itemUnit:(0,l.hw)({id:"teamMember.memberForm.itemUnit"}),batchSelectPlaceholder:(0,l.hw)({id:"teamMember.memberForm.search.batchSelectPlaceholder"}),sourceNotFoundContent:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:(0,l.hw)({id:"teamMember.memberForm.search.noResult"})}),(0,a.jsx)("p",{children:(0,l.hw)({id:"teamMember.memberForm.search.noResultTip"},{appName:C.JB})})]}),targetNotFoundContent:(0,l.hw)({id:"teamMember.memberForm.search.noResult"}),targetEmptyContent:(0,l.hw)({id:"teamMember.memberForm.search.targetEmptyContent"}),searchPlaceholder:(0,l.hw)({id:"teamMember.memberForm.search.searchPlaceholder"})},dataSource:o,fieldNames:{id:"id",title:"name"},render:e=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(ex.A,{className:"flex-none",size:20,src:e.avatar}),(0,a.jsx)("div",{className:"flex-auto truncate ml-2",children:e.name})]})})})}),(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsx)(j.A.Item,{name:"projectRoleList",noStyle:!0,labelCol:{span:24},children:(0,a.jsx)(tC.B,{projectRoleList:N,bordered:!0})})}),(0,a.jsx)(tI.A,{onCancel:r,onSubmit:s.submit,cancelSubmit:b,submitBtnLoading:S})]})})};var tk=i(995829);let tT=e=>{let{teamId:t,onInviteTypeChange:i,onInvited:n}=e,[r]=(0,tf.A)(),[s,o]=(0,w.useState)([]),[d,c]=(0,w.useState)(!1),u=(0,y.Ay)(e=>e.projectMember.currentProjectMembers),p=(0,y.Ay)(e=>e.project.currentProject),m=(0,tg.N)(e=>e.roleType,r),h=(0,y.Ay)(e=>e.user.currentUser),v=(0,y.Ay)(e=>{var t;return null==(t=e.team.userTeams)?void 0:t.find(t=>{var i;return t.id===(null==(i=e.project.currentProject)?void 0:i.teamId)})}),g=(0,tS.A)(()=>(!!v||!!(null==h?void 0:h.superAdminRoleType))&&(0,E.pS)({userRoleType:null==v?void 0:v.roleType,needRoleType:2,superAdminRoleType:null==h?void 0:h.superAdminRoleType}),[v,h]);(0,w.useEffect)(()=>{m&&(0,B.IL)("app_invite_button_click_authority",{page_source:"project_detail",index:"within_team"})},[m]),(0,w.useEffect)(()=>{c(!0),(0,em.CV)(t).then(e=>{let{data:t}=e,i=[],a=[];t.filter(e=>1===e.status).forEach(e=>{(null==u?void 0:u.some(t=>t.userId===e.userId&&t.roleType!==tv._I.None))?i.push({...e,disabled:!0}):a.push(e)}),o([...a,...i])}).finally(()=>c(!1))},[r,u,t]);let{run:x,cancel:A,loading:b}=(0,th.ZO)(ep.EZ,e=>{let t=e.successIds.length,i=e.failIds.length;t>0?0===i?J.Ay.success((0,l.hw)({id:"projectMember.action.message.inviteSuccess"})):J.Ay.success((0,l.hw)({id:"projectMember.action.message.inviteSuccessPartial"},{successCount:t,failCount:i})):J.Ay.error((0,l.hw)({id:"projectMember.action.message.teamMemberQuitted"})),(0,ta.dispatchFetchCurrentProjectMemberList)(),null==n||n()},void 0,{showLoading:!1,isReturnAll:!0,isHideSuccessMsg:!0}),{run:S}=(0,F.A)(async e=>{p&&(x({projectId:p.id,teamId:t,userIds:e.userIds,roleType:e.roleType}),(0,B.IL)("app_invite_button_click_invite_member",{page_source:"project_detail"}))},{wait:200});return(0,a.jsx)("div",{children:(0,a.jsxs)(j.A,{form:r,onFinish:S,requiredMark:!1,layout:"vertical",children:[(0,a.jsx)(j.A.Item,{name:"userIds",label:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,l.hw)({id:"projectMember.invite"}),g&&(0,a.jsx)("a",{className:"ml-3",onClick:()=>{null==i||i(),(0,B.IL)("app_invite_button_click_invite_outside",{page_source:"project_detail"})},children:(0,l.hw)({id:"projectMember.teamInvite"})})]}),rules:[{required:!0,message:(0,l.hw)({id:"teamMember.action.message.accountsRequired"})}],children:(0,a.jsx)(tm.A,{loading:d,locale:{itemUnit:(0,l.hw)({id:"teamMember.memberForm.itemUnit"}),batchSelectPlaceholder:"",sourceNotFoundContent:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:(0,l.hw)({id:"teamMember.memberForm.search.noResult"})}),(0,a.jsx)("p",{children:(0,l.hw)({id:"projectMember.search.noResultTip"})}),(0,a.jsx)("a",{onClick:i,children:(0,l.hw)({id:"projectMember.search.noResultHelp"})})]}),targetNotFoundContent:(0,l.hw)({id:"teamMember.memberForm.search.noResult"}),targetEmptyContent:(0,l.hw)({id:"teamMember.memberForm.search.targetEmptyContent"}),searchPlaceholder:(0,l.hw)({id:"teamMember.memberForm.search.searchPlaceholder"})},dataSource:s,fieldNames:{id:"userId",title:"nickname"},render:e=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(ex.A,{className:"flex-none",size:20,src:e.user.avatar}),(0,a.jsx)("div",{className:"flex-auto truncate ml-2",children:e.nickname||e.user.username})]}),onFilter:(e,t)=>{var i,a;return(null==(i=e.nickname)?void 0:i.includes(t))||(null==(a=e.user.username)?void 0:a.includes(t))}})}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"mr-2",children:(0,l.hw)({id:"teamMember.memberForm.label.projectRole"})}),(0,a.jsx)(j.A.Item,{name:"roleType",className:"mb-0",initialValue:tv._I.Maintainer,children:(0,a.jsx)(tk.A,{options:f.y.filter(e=>!e.isHiddenInOptions&&e.value!==tv._I.None).map(e=>({label:(0,l.hw)({id:e.labelLocale}),value:e.value})),placeholder:(0,l.hw)({id:"component.memberRoleSelect.placeholder"}),dropdownMatchSelectWidth:!1})})]}),(0,a.jsx)(tu.A,{type:"primary",htmlType:"submit",loading:b,onCancel:A,onClick:r.submit,children:(0,l.hw)({id:"teamMember.inviteMemberForm.inviteButton"})})]})]})})},tM={TEAM:{page_source:"team_set"},PROJECT:{page_source:"project_detail"}},tE=e=>{var t;let{teamId:i,resourceType:n="TEAM",visible:s,autoSelectCurrentProject:o,onCancel:d,onOk:c,source:u,...p}=e,[m,h]=(0,w.useState)(n),v=(0,y.Ay)(e=>e.team.teamMap||{}),f=(0,y.Ay)(e=>e.project.currentProject),g=null==(t=v[i])?void 0:t.name,x=(null==f?void 0:f.name)||"",A="TEAM"===n?g:x,j="TEAM";return((0,w.useEffect)(()=>{s||h(n)},[n,s]),C.f3)?C.f3&&"PROJECT"===n?(0,a.jsx)(tx,{entityId:i,entityType:j,teamId:i,onInvited:c,open:s,onOk:c,onCancel:d,...p}):(0,a.jsxs)(r.Ay,{className:eg()(!C.f3&&tA),destroyOnClose:!0,title:(0,a.jsx)("div",{title:A,className:"text-ellipsis mr-6",children:(0,a.jsx)(l.sA,{id:"invitation.modal.title",values:{name:A}})}),size:C.f3?"720":"400",maskClosable:!1,visible:s,footer:null,onCancel:()=>{null==d||d(),(0,B.IL)("app_invite_button_click_off",tM[n])},children:["TEAM"===m&&!!C.f3&&(0,a.jsx)(tN,{teamId:i,autoSelectCurrentProject:o,onInvited:c,onCancel:d}),"PROJECT"===m&&!!C.f3&&(0,a.jsx)(tT,{teamId:i,onInviteTypeChange:()=>h("TEAM"),onInvited:c})]}):(0,a.jsx)(tc,{...p,open:s,onOk:c,onCancel:d,teamId:i,entityId:i,entityType:j,resourceType:n,source:u})}},359108:function(e,t,i){"use strict";i.d(t,{iS:()=>v,vv:()=>h});var a=i(838e3),n=i(161178),l=i(740565),r=i(405194);i(995829);var s=i(689368),o=i(751455),d=i(718180),c=i(929463),u=i(138249),p=i(398380),m=i(641486);function h(e){let{includeForbiddenAccessRole:t=!0,includeManualSetup:i=!1,fetch:a=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=((0,s.Ay)(e=>e.team.teamMap)||{})[e]||{},h=(0,r.I)(e=>e.organizationProjectRoleMap),v=(0,r.I)(e=>e.teamProjectRoleMap),f=(0,r.I)(e=>e.queryProjectRoleListByTeamId),g=(0,r.I)(e=>e.queryProjectRoleListByOrganizationId),y=(0,m.useMemo)(()=>{let a=(u.organizationId>0?h.get(u.organizationId):v.get(e))||[],r=(0,p.cloneDeep)(a);return t&&r.splice(3,0,{name:(0,l.hw)({id:"projectMember.role.none"}),id:n._I.None,canDuplicate:!1,canEdit:!1,canView:!1,teamId:e,permissions:[],createdAt:"",updatedAt:""}),i&&r.push({name:(0,l.hw)({id:"projectForm.memberPermission.manualSetup"}),id:-1,canDuplicate:!1,canEdit:!1,canView:!1,teamId:e,permissions:[],createdAt:"",updatedAt:""}),r},[t,i,h,u.organizationId,e,v]),{run:x}=(0,o.Ay)(async()=>{let t=u.organizationId>0?await g(u.organizationId):await f(e);return t.success&&t.data||[]},{manual:!0,onError:e=>c.Ay.error(e.message)});return(0,d.A)(()=>{a&&x()}),{projectRoleList:y,fetchProjectRoleList:x}}function v(e){var t;let{projectRoleList:i,...n}=e;return(0,a.jsx)(u.A,{...n,dropdownMatchSelectWidth:null!=(t=n.dropdownMatchSelectWidth)?t:260,children:i.map(e=>(0,a.jsx)(u.A.Option,{label:e.name,value:e.id,children:e.name},e.id))})}n.y.filter(e=>!e.isHiddenInOptions)},899473:function(e,t,i){"use strict";i.d(t,{Eg:()=>c,ZD:()=>r,bP:()=>a,f2:()=>l,i8:()=>s,kA:()=>d,kx:()=>o,oc:()=>n});let a="LocalCertificate.EnabledSSLValidate",n="LocalCertificate.data",l="LocalCertificate.CACertificate",r="LocalCertificate.EnabledCAValidate";function s(){let e=localStorage.getItem(n);try{let t=e?JSON.parse(e):[];return t.length>0?t:void 0}catch(e){return[]}}function o(){let e=localStorage.getItem(a);try{return!!e&&JSON.parse(e)}catch(e){return!1}}function d(){let e=localStorage.getItem(r);try{return!!e&&JSON.parse(e)}catch(e){return!1}}function c(){let e=localStorage.getItem(l);try{return e?JSON.parse(e):void 0}catch(e){return}}},856294:function(e,t,i){"use strict";i.d(t,{Q:()=>n,j:()=>l});let a={followRedirects:!0,implicitCacheControl:!1},n="GeneralOptions";function l(){let e=localStorage.getItem(n);try{return e?JSON.parse(e):a}catch(e){return a}}},328851:function(e,t,i){"use strict";i.d(t,{A:()=>l});var a=i(838e3),n=i(95470);function l(e){let{loading:t=!1,children:i,className:l}=e;return t?(0,a.jsxs)("div",{className:l,children:[(0,a.jsx)(n.A,{active:!0,className:"mt-6"}),(0,a.jsx)(n.A,{active:!0,className:"mt-6"}),(0,a.jsx)(n.A,{active:!0,className:"mt-6"})]}):(0,a.jsx)(a.Fragment,{children:i})}},372178:function(e,t,i){"use strict";i.d(t,{A:()=>l});var a=i(838e3),n=i(671466);let l=e=>(0,a.jsx)(n.A,{color:"var(--ui-yellow-6)",size:16,...e,type:"icon-type-socketio"})},722339:function(e,t,i){"use strict";i.d(t,{b:()=>y});var a=i(838e3),n=i(838487),l=i.n(n),r=i(392819),s=i(762392),o=i(583268);let d="drag-handle-F02Wim",c="list-fdFwUN",u="item-QlFtVI",p="drop-over-downward-Y63epb",m="drop-over-upward-IVkie4";var h=i(671466),v=i(641486),f=i(87084),g=i(927050);function y(e){let{className:t,...i}=e;return(0,a.jsx)(s.Q,{backend:o.t,context:window,children:(0,a.jsx)(r.Ay,{...i,className:l()(t,c)})})}y.Item=function(e){let{index:t,dndType:i,onReorder:n,className:s,children:o,...c}=e,y=(0,v.useRef)(null),[{isOver:x,dropClassName:A},j]=(0,f.H)({accept:i,collect:e=>{let i=e.getItem()||{};return i.index===t?{}:{isOver:e.isOver(),dropClassName:i.index<t?p:m}},drop:e=>{e.index!==t&&(null==n||n({dragIndex:e.index,dropIndex:t}))}}),[,b,w]=(0,g.i)({type:i,item:{index:t}});return w(j(y)),(0,a.jsx)(r.Ay.Item,{...c,ref:y,className:l()(s,u,{[A]:x}),children:(0,a.jsxs)("div",{className:"flex items-center w-full",children:[!!i&&(0,a.jsx)("div",{role:"Handle",ref:b,className:d,children:(0,a.jsx)(h.A,{type:"icon-grip",size:10})}),(0,a.jsx)("div",{className:"flex-auto overflow-auto",children:o})]})})}},432254:function(e,t,i){"use strict";i.d(t,{CZ:()=>y,FR:()=>g,iT:()=>f,zD:()=>v});var a=i(238504),n=i(957705),l=i(781875),r=i(827316),s=i(429862),o=i(885410),d=i(770931),c=i(585403),u=i(660464),p=i(496411),m=i(81319),h=i(618487);let v=async e=>{let t=e||(0,p.sI)();return await Promise.all([(0,l.El)(t),(0,h.dispatchFetchBaseBranchHttpApiCaseList)(t),(0,a.xR)(t),(0,r._A)(t),(0,m.Gu)(t),(0,m.p8)(t),(0,m.mH)(t),(0,m.a5)(t),(0,m.XX)(t),(0,m.vh)(t),(0,h.dispatchFetchBaseBranchCommonSecuritySchemeList)(t),(0,m.p7)(t),(0,c.NI)(t),(0,m.uz)(t),(0,h.dispatchFetchBaseBranchCustomEndpointList)(t)])},f=async()=>Promise.all([(0,l.V1)(),(0,h.dispatchFetchHttpApiMockList)(),(0,l.tX)(),(0,h.dispatchFetchHttpApiCaseList)(),(0,h.dispatchFetchTestCaseList)(),(0,a.g6)(),(0,a.WX)(),(0,r.pV)(),(0,r.Kb)(),(0,h.dispatchFetchApiFolderList)(),(0,h.dispatchFetchCustomEndpointList)(),(0,h.dispatchFetchDataSchemaFolderList)(),(0,h.dispatchFetchResponseFolderList)(),(0,n.dq)(),(0,h.dispatchFetchCommonSecuritySchemeList)(),(0,s.es)(),(0,o.Se)(),(0,c.AF)(),(0,c.jn)(),(0,d.tc)(),(0,u.ZF)().fetchTree(),(0,u.ZF)().fetchTestScheduledTaskTree(),(0,u.ZF)().fetchTestSuiteTree(),(0,u.ZF)().fetchTestDataTree()]),g=async()=>Promise.all([(0,a.g6)(),(0,m.p8)(),(0,a.WX)(),(0,a.xR)()]),y=async e=>{if(e)return Promise.all([(0,m.en)(e),(0,m.OZ)(e),(0,m.a5)(e),(0,m.Gu)(e),(0,m.dI)(e),(0,m.vh)(e),(0,m.V0)(e),(0,m.XX)(e),(0,m.vm)(e),(0,m.p7)(e),(0,c.NI)(e),(0,m.uz)(e),(0,m.g5)(e)])}},545690:function(e,t,i){"use strict";i.d(t,{oV:()=>k,Ay:()=>E});var a=i(64091),n=i(843212),l=i(744283),r=i(987016),s=i(740565),o=i(334821),d=i(353748),c=i(135400),u=i(179574),p=i(2183),m=i(374781),h=i(496411),v=i(81319),f=i(387327),g=i(140049),y=i(764007),x=i(398380),A=i(618487),j=i(325475),b=i(697075),w=i(432254),S=i(622290),C=i(641486),I=i(775803);let{confirm:N}=y.Ay,k=(0,j.vt)(e=>({loading:!1,setLoading:t=>e({loading:t})})),T=(0,j.vt)(e=>({map:{},setMap:(t,i)=>{e(e=>({map:{...e.map,[t]:i}}))}})),M=(0,j.vt)(e=>({map:{},setMap:(t,i)=>{e(e=>({map:{...e.map,[t]:i}}))}}));function E(){let e,t,i,{setMenuByPathname:y}=(0,C.useContext)(I.Ay),{replaceProjectOverview:E}=(0,c.Qm)(),_=k(e=>e.setLoading),F=(0,j.Pj)(u.L,e=>e.layoutStore),{projectCurrentBranch:D,setProjectCurrentBranch:R}=(0,p._$)(e=>({projectCurrentBranch:e.projectCurrentBranch,setProjectCurrentBranch:e.setProjectCurrentBranch}),b.x),{map:O,setMap:P}=T(),{map:L,setMap:$}=M(),{fetchAutoImportSettingList:B,initProjectAutoImport:z}=(0,m.A)(),U=(0,r.jd)(e=>e.setRecording),H=(e=(0,S.s)(e=>e.loadTreeList),t=(0,A.useModel)("httpRequest",e=>e.load),i=(0,A.useModel)("requestFolder",e=>e.load),async()=>await Promise.all([e(),t(),i()])),{hasPermission:V}=(0,n.w)(l.o.SETTING_IMPORT_DATA_SCHEDULED),K=(0,g.A)(async e=>{let{id:t,type:i,forkFromBranchId:n}=e;if(_(!0),(0,a.TN)().resetAll(),(0,p.IF)()?await (0,w.zD)((0,h.sI)()):((0,v.Ky)().reset(),(0,p.ok)().currentBranchSettings.enableImportData&&B(e=>{z(e,V)}),"VERSION"===i&&((0,w.CZ)(n),null==y||y("/api-manage/"))),await (0,w.iT)(),H(),(0,A.dispatchFetchEnvironmentList)(),_(!1),O[t]){let e=O[t];F.setter(()=>O[t]);let i=e.tabPanes.filter(e=>e.key.startsWith("module")).map(e=>+e.key.split(".")[1]);(0,x.isEmpty)(i)||E(i)}L[t]&&(0,d.g0)().setTestTabs(L[t])});return(0,g.A)(async(e,t)=>{let{activeKey:i,tabPanes:a}=F.getter(),n=a.some(e=>e.modifying),{activeKey:l,tabPanes:u}=(0,d.g0)(),p=u.some(e=>e.modifying);if(n||p)return void N({title:(0,f.a)({id:"userLayout.title.notSave"}),content:(0,s.hw)({id:"branch.action.confirmCheckout"}),onOk:m});async function m(){var s,m;(0,r.l1)().checkout({branchId:e.id});let{shouldRestore:h}=(0,r.l1)(),v=h("apiManage",null==D?void 0:D.id),f=h("apiTest",null==D?void 0:D.id);v||P(null!=(s=null==D?void 0:D.id)?s:0,{activeKey:i,tabPanes:n?a.map(e=>({...e,modifying:!1})):a}),f||$(null!=(m=null==D?void 0:D.id)?m:0,{activeKey:l,tabPanes:p?u.map(e=>({...e,modifying:!1})):u}),U(!1),(0,o.Nw)().clearTestScenarioBlock(),(0,d.g0)().closeAllTab(),c.Qm.getState().closeAllTab(),R(e),await K(e),U(!0),null==t||t(e)}await m()})}},705522:function(e,t,i){"use strict";i.d(t,{A:()=>l});var a=i(838e3),n=i(183092);let l=(0,i(618487).dynamic)({loading:()=>(0,a.jsx)(n.A,{style:{width:"100px",height:"12px",marginTop:"10px"}}),loader:async()=>{let{default:e}=await Promise.resolve().then(i.bind(i,289449));return e}})},913385:function(e,t,i){"use strict";i.d(t,{A:()=>o});var a=i(838e3),n=i(169508),l=i(740565),r=i(345447),s=i(838062);let o=(e,t)=>{var i,o,d,c,u,p,m,h,v,f,g,y,x,A,j,b,w,S,C,I;let N,{value:k="",onChange:T,onSubmit:M,autoCompleteList:E=[],renderFlatArrayComponent:_}=t;if("boolean"===e.type){let e=[{label:(0,a.jsx)("span",{style:{float:"left"},children:(0,l.hw)({id:"templatePopover.mock.boolean"})}),options:[{value:"true"},{value:"false"}]}];return()=>(0,a.jsx)(s.A,{value:k,bordered:!1,options:e,onSearch:e=>{T(e),null==M||M(e)},onSelect:e=>{T(e),null==M||M(e)},className:"w-full",style:{"--ui-border-width-base":"0px"}})}if((null==(i=e.cell[r.TC])?void 0:i.schema)||(null==(o=e.cell.schema)?void 0:o.enum)||(null==(d=e.cell.schema)?void 0:d.items)&&(null==(u=e.cell.schema)||null==(c=u.items)?void 0:c.enum)){N=e.cell[r.TC]?e.cell[r.TC]:e.cell;let t="array"===e.type?null==(g=N.schema)||null==(f=g.items)?void 0:f.enum:null==(y=N.schema)?void 0:y.enum;if((null==t?void 0:t.length)>0&&""!==t[0]){let i=[{label:(0,a.jsx)("span",{style:{float:"left"},children:(0,l.hw)({id:"enumeratedValue"})}),options:null!=(I=null==(x=null!=(C="array"===e.type?null!=(S=null==N||null==(j=N.schema)||null==(A=j.items)?void 0:A[`x-${n.A3}-enum`])?S:null==N||null==(b=N.schema)?void 0:b[`x-${n.A3}-enum`]:null==N||null==(w=N.schema)?void 0:w[`x-${n.A3}-enum`])?C:null==t?void 0:t.map(e=>({value:String(e),name:""})).filter(Boolean))?void 0:x.map((e,t)=>({value:String(e.value),label:(0,a.jsxs)("div",{className:"flex items-center justify-between min-h-[20px] gap-2",children:[(0,a.jsx)("span",{className:"truncate flex-1 min-w-0",title:String(e.value),children:String(e.value)}),String(e.name)&&(0,a.jsx)("span",{className:"truncate text-xs opacity-70 shrink-0",title:String(e.name),style:{color:"var(--ui-text-color-secondary)",maxWidth:"40%"},children:String(e.name)})]})})))?I:[]}];return"array"===e.type?()=>!!_&&_(i):()=>(0,a.jsx)(s.A,{value:k,bordered:!1,options:i,onSearch:e=>{T(e),null==M||M(e)},onSelect:e=>{T(e),null==M||M(e)},className:"w-full",style:{"--ui-border-width-base":"0px"}})}}if((null==(m=e.record)||null==(p=m.name)?void 0:p.toLowerCase())==="content-type"||(null==(v=e.record)||null==(h=v.name)?void 0:h.toLowerCase())==="accept"||e.isSystemHeaderRecord)return"array"===e.type?()=>!!_&&_(E):()=>(0,a.jsx)(s.A,{value:k,bordered:!1,options:E,onSearch:e=>{T(e),null==M||M(e)},onSelect:e=>{T(e),null==M||M(e)},filterOption:(e,t)=>("string"==typeof(null==t?void 0:t.value)?t.value:"").toLowerCase().includes(e.toLowerCase()),className:"w-full",style:{"--ui-border-width-base":"0px"}})}},99608:function(e,t,i){"use strict";i.d(t,{t:()=>w});var a=i(838e3),n=i(641486),l=i(698879),r=i(556561),s=i(140049),o=i(838487),d=i.n(o),c=i(820182);let u="container-yJTg_L",p="textWrapper-cFNCt_",m="input-EPLaIF",h="containerSmall-bautvA",v="containerSmallPlus-xLd1AM",f="bold-lJI74G",g="boldSmall-uYAqCI",y="text-uDtjzF",x="alias-KkgtXT",A="filled-C23vVR",j="bordered-VrchdA",b="editing-rdvRL4";function w(e){let{fallbackValue:t,className:i,value:o,readOnly:w,placeholder:S,style:C,alias:I,bold:N,size:k,filled:T=!0,bordered:M=!1,autoFocus:E=!1,editing:_=!1,onChange:F,onBlur:D,inputClassName:R,textWrapperClassName:O,textClassName:P,textarea:L,...$}=e,B=o||t||"",z=(0,n.useRef)(null),U=(0,n.useRef)(null),[H,{setTrue:V,setFalse:K}]=(0,r.A)(!1),[q,{setTrue:G,setFalse:W}]=(0,r.A)(E);(0,l.A)({ref:U,delay:500,visible:E});let J=(0,s.A)(e=>{let i=e.target.value||t||"";z.current&&(z.current.innerText=i),null==F||F(i)}),Y=!w&&(H||q||!B||_);return(0,a.jsxs)("div",{style:C,title:B,className:d()(u,"small"===k&&h,"small-plus"===k&&v,N&&f,N&&"small"===k&&g,i,k,T&&A,M&&j,_&&b),onMouseEnter:V,onMouseLeave:K,children:[(0,a.jsxs)("div",{className:d()(p,O),children:[(0,a.jsx)("span",{className:d()(y,P),ref:z,children:B||S}),!Y&&I&&(0,a.jsx)("span",{className:x,children:`(${I})`})]}),Y&&(L?(0,n.createElement)(c.A.TextArea,{...$,...L,key:"input",ref:U,className:d()(m,R),size:k,placeholder:S,autoFocus:E,defaultValue:B,autoComplete:"off",onChange:J,onFocus:G,onBlur:e=>{W(),null==D||D(e)}}):(0,n.createElement)(c.A,{...$,key:"input",ref:U,className:d()(m,R),size:k,placeholder:S,autoFocus:E,defaultValue:B,autoComplete:"off",onChange:J,onFocus:G,onBlur:e=>{W(),null==D||D(e)}}))]})}},994311:function(e,t,i){"use strict";i.d(t,{A:()=>v});var a=i(838e3),n=i(666804),l=i(740565),r=i(689368),s=i(742952),o=i(458184),d=i(671466);let c="upgrade-container-YPb2zI",u="upgrade-icon-container-rCNiB_",p="upgrade-icon-box-rKWb2g",m="upgrade-title-LXHYbJ",h="upgrade-description-kxVlrI";function v(e){var t;let{title:i,description:v,planType:f=s.on.PRO}=e,g=(0,r.Ay)(e=>e.project.currentProject),y=(0,r.Ay)(e=>{var t;return(null==g?void 0:g.teamId)?null==(t=e.team.teamMap)?void 0:t[null==g?void 0:g.teamId]:void 0}),x=null!=(t=null==y?void 0:y.id)?t:0;return(0,a.jsxs)("div",{className:c,children:[(0,a.jsx)("div",{className:u,children:(0,a.jsx)("div",{className:p,children:(0,a.jsx)(d.A,{type:"icon-lock",size:32,color:"var(--ui-disabled-color)"})})}),(0,a.jsx)("div",{className:m,children:i}),(0,a.jsx)("div",{className:h,children:v}),(0,a.jsx)(o.A,{type:"primary",className:"mt-3",onClick:()=>{(0,n.Nu)({entityId:x,showUpgradeModal:!0,planType:f})},children:(0,l.hw)({id:"testScenario.association.enable"})})]})}},81264:function(e,t,i){"use strict";i.d(t,{A:()=>u,Y:()=>c});var a=i(838e3),n=i(169508),l=i(740565),r=i(689368),s=i(516723),o=i(471504),d=i(398380);let c=!n.xl,u=e=>{let{disabledTooltip:t}=e,{temporary:i,...c}=e,{externalURL:u}=(0,r.Ay)(e=>{let{externalURL:t}=e;return{externalURL:t}});t=t||(0,a.jsxs)(a.Fragment,{children:[i?(0,l.hw)({id:"webVersion.tips.temporaryNotSupport"}):(0,l.hw)({id:"webVersion.tips.notSupport"}),(0,l.hw)({id:"webVersion.label.please"}),n.f3?(0,l.hw)({id:"webVersion.label.downloadDesktopApp"},{appName:n.JB}):(0,a.jsxs)(a.Fragment,{children:["\xa0",(0,a.jsxs)("a",{href:u.home.index,target:"_blank",rel:"noreferrer",children:[(0,a.jsx)(s.A,{}),(0,l.hw)({id:"webVersion.label.downloadDesktopApp"},{appName:n.JB})]}),"\xa0"]}),(0,l.hw)({id:"webVersion.label.useTheFunction"})]});let p=!n.xl;return(0,d.isBoolean)(e.disabled)&&p&&(p=e.disabled),(0,a.jsx)(o.jz,{...c,disabledTooltip:t,disabled:p,handleChildren:function e(t){if(Array.isArray(t))return t.map(t=>e(t));let i=null==t?void 0:t.type;return("function"==typeof i&&(i=i.name),["Popconfirm"].includes(i))?t.props.children:t}})}},720087:function(e,t,i){"use strict";i.d(t,{A:()=>n});var a=i(923117);let n=(0,i(618487).dynamic)({loading:a.A,loader:async()=>{let{ApiTestReportDetail:e}=await Promise.all([i.e("720"),i.e("73034"),i.e("48737"),i.e("87053"),i.e("80232"),i.e("33898"),i.e("72168"),i.e("76066"),i.e("97074"),i.e("48579"),i.e("16336"),i.e("71877"),i.e("51235"),i.e("13996"),i.e("75562"),i.e("37730"),i.e("22246"),i.e("56344"),i.e("17219"),i.e("43390"),i.e("66953")]).then(i.bind(i,740853));return e}})},181488:function(e,t,i){"use strict";i.d(t,{A:()=>n});var a=i(923117);let n=(0,i(618487).dynamic)({loading:a.A,loader:async()=>{let{ApiTestReportList:e}=await Promise.all([i.e("76066"),i.e("56344"),i.e("25980")]).then(i.bind(i,46721));return e}})},815430:function(e,t,i){"use strict";i.d(t,{A:()=>l});var a=i(923117),n=i(618487);let l=(0,n.dynamic)({loading:a.A,loader:async()=>{let{default:e}=await Promise.all([i.e("13137"),i.e("1925"),i.e("53864")]).then(i.bind(i,363524));return e}})},745700:function(e,t,i){"use strict";i.d(t,{A:()=>n});var a=i(923117);let n=(0,i(618487).dynamic)({loading:a.A,loader:async()=>{let{default:e}=await Promise.all([i.e("73034"),i.e("4276"),i.e("90348"),i.e("99484"),i.e("43624"),i.e("8704"),i.e("73956"),i.e("8769"),i.e("67282"),i.e("11390"),i.e("4687")]).then(i.bind(i,532511));return e}})},55561:function(e,t,i){"use strict";i.d(t,{Ay:()=>o,X:()=>r,rs:()=>s});var a=i(923117),n=i(618487);let l=Object.freeze({title:"",type:"object",properties:{}}),r=()=>l,s=()=>Promise.all([i.e("87053"),i.e("72168"),i.e("48579"),i.e("37730"),i.e("2527"),i.e("33987"),i.e("84041")]).then(i.bind(i,159722)),o=(0,n.dynamic)({loading:a.A,loader:async()=>{let{default:e}=await s();return e}})},14549:function(e,t,i){"use strict";i.d(t,{$:()=>l,A:()=>r});var a=i(923117),n=i(618487);let l=async()=>Promise.all([i.e("73034"),i.e("90671")]).then(i.bind(i,454085)),r=(0,n.dynamic)({loading:a.A,loader:async()=>{let{default:e}=await l();return e}})},322148:function(e,t,i){"use strict";i.d(t,{A:()=>n});var a=i(923117);let n=(0,i(618487).dynamic)({loading:a.A,loader:async()=>{let{default:e}=await Promise.all([i.e("39622"),i.e("51863")]).then(i.bind(i,479365));return e}})},348266:function(e,t,i){"use strict";i.d(t,{A:()=>o});var a=i(838e3),n=i(671466),l=i(641486),r=i.n(l);let s="container-f04fAO";class o extends r().Component{render(){let e={marginRight:4};return this.props.style&&(e={...e,...this.props.style}),(0,a.jsx)("span",{title:this.props.title,className:this.props.className,children:(0,a.jsx)(n.A,{type:"icon-features-socket",style:e,className:s})})}}},721537:function(e,t,i){"use strict";i.d(t,{A:()=>v});var a=i(526838),n=i(838e3),l=i(740565),r=i(154732),s=i(995829),o=i(689368),d=i(140049),c=i(718180),u=i(963227),p=i(641486),m=i(618487);class h extends s.A{constructor(...e){super(...e),(0,a._)(this,"emptyValues",[0]),(0,a._)(this,"componentDidMount",()=>{let{currentProjectMembers:e}=this.props;void 0===e&&(0,r.dY)()})}}function v(e){let{value:t}=e,{actorMap:i,getActor:a,actorNotFoundList:s}=(0,m.useModel)("actor"),v=(0,o.Ay)(e=>e.projectMember.currentProjectMembers),f=(0,o.Ay)(e=>e.projectMember.memberSelectOptions),g=(0,d.A)((e,t)=>!e||t.label.includes(e)),[y,x]=(0,p.useState)(!1),A=(0,d.A)(e=>{(null==e?void 0:e.find(e=>e.userId===t))||(null==i?void 0:i[t])||null==a||a(t)});(0,c.A)(()=>{if(t){if(!v)return void(0,r.dY)(A);A(v)}});let j=(0,p.useMemo)(()=>{if(t&&!(null==v?void 0:v.find(e=>e.userId===t))){var e,a;return(null==i?void 0:i[t])||s.includes(t)?[...f,{label:(0,n.jsxs)("div",{className:"flex items-center",children:[null!=(a=null==i||null==(e=i[t])?void 0:e.name)?a:(0,l.hw)({id:"apiAccessToken.actor.invalid.placeholder"}),(0,n.jsx)(u.A,{className:"ml-auto",children:(0,l.hw)({id:"apiAccessToken.actor.invalid.state"})})]}),value:t}]:f}return f},[f,t,i,v,s]);return(0,n.jsx)(h,{onDropdownVisibleChange:x,...e,currentProjectMembers:v,options:y?f:j,filterOption:g,showSearch:!0})}},184406:function(e,t,i){"use strict";i.d(t,{A:()=>y});var a,n=i(526838),l=i(300367),r=i(838e3),s=i(740565),o=i(154732),d=i(594709),c=i(963227),u=i(571202),p=i(554692),m=i(641486),h=i.n(m),v=i(618487);let f=e=>{let{user:t}=e;return t&&t.type?t.icon?(0,r.jsx)(d.A,{type:t.icon,className:"mr-1"}):t.avatar?(0,r.jsx)("img",{className:"w-4 h-4 mr-1",src:t.avatar}):null:null};class g extends(a=h().Component){componentDidMount(){let{id:e,actorMap:t,getActor:i,currentProjectMembers:a}=this.props;e&&(a?(null==a?void 0:a.find(t=>t.userId===e))||t&&t[e]||i(e):(0,o.dY)(a=>{(null==a?void 0:a.find(t=>t.userId===e))||t&&t[e]||i(e)}))}render(){let e,{actorMap:t,id:i,currentProjectMembers:a,mode:n,className:l,children:o,render:d,actorNotFoundList:m}=this.props;if(!i)return null;let h=null==a?void 0:a.find(e=>e.userId===i);if(h?e={name:h.user.name,nickname:h.nickname,avatar:h.user.avatar}:t&&t[i]&&(e={name:t[i].name,nickname:t[i].name,type:t[i].type,icon:t[i].icon,avatar:t[i].avatar,title:t[i].title}),"EXTENSIVE"===n&&d)return null==d?void 0:d(e);if(!e)return(null==m?void 0:m.includes(i))?(0,r.jsxs)("span",{children:[(0,s.hw)({id:"apiAccessToken.actor.invalid.placeholder"}),(0,r.jsx)(c.A,{className:"ml-1",children:(0,s.hw)({id:"apiAccessToken.actor.invalid.state"})})]}):null;switch(n){case"FLEX_ROW":return(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(u.A,{className:"mr-1 flex-shrink-0",size:16,shape:"circle",src:e.avatar}),(0,r.jsx)("div",{className:"mr-2 truncate",title:`@${e.name}`,children:e.nickname}),null!=o?o:(0,r.jsx)(r.Fragment,{})]});case"full":return(0,r.jsx)("span",{className:l,children:`${e.nickname} (@${e.name})`});default:return(0,r.jsx)("div",{className:l,style:{display:"inline-block"},children:(0,r.jsxs)(p.A,{placement:"top",title:(0,r.jsxs)("span",{children:[e.title?(0,r.jsx)(s.n3,{id:"apiAccessToken.fromPersonalAccessToken",values:{title:e.title,username:`@${e.name}`}}):`@${e.name}`,!h&&!e.title&&(0,r.jsx)(c.A,{className:"ml-1",children:(0,s.hw)({id:"apiAccessToken.actor.invalid.state"})})]}),children:[(0,r.jsx)(f,{user:e}),(0,r.jsx)("span",{children:e.nickname}),!h&&!e.title&&(0,r.jsx)(c.A,{className:"ml-1",children:(0,s.hw)({id:"apiAccessToken.actor.invalid.state"})})]})})}}}(0,n._)(g,"defaultProps",{mode:"normal"}),g=(0,l.__decorate)([(0,v.connect)(e=>{let{projectMember:t}=e;return{currentProjectMembers:t.currentProjectMembers}})],g);let y=e=>{let{actorMap:t,getActor:i,actorNotFoundList:a}=(0,v.useModel)("actor");return(0,r.jsx)(g,{...e,actorMap:t,getActor:i,actorNotFoundList:a})}},530940:function(e,t,i){"use strict";i.d(t,{EH:()=>v,EI:()=>d,Iy:()=>c,RO:()=>n.RO,Vw:()=>m,mb:()=>s,qy:()=>h,tL:()=>u,wP:()=>o,wk:()=>p,z1:()=>r});var a=i(740565),n=i(449104);let l=e=>{let t=e.selected,i=e.expanded;return!!t||!i},r={id:0,parentId:0,key:n.t2,selectable:!1,className:"newTestScenario",type:"newTestScenario",name:(0,a.hw)({id:"new"})},s={id:0,parentId:0,key:n.Ln,selectable:!1,className:"newTestSuite",type:"newTestSuite",name:(0,a.hw)({id:"new"})},o={id:0,parentId:0,key:n.aU,selectable:!1,className:"newTestDataSet",type:"newTestDataSet",name:(0,a.hw)({id:"new"})};n.SZ,(0,a.hw)({id:"new"});let d={id:0,ordering:2,parentId:0,key:n.RO,className:"testScenarioRoot",type:"testScenarioRoot",name:(0,a.hw)({id:"testScenario"}),children:[],canExpand:l},c={id:0,ordering:1,parentId:0,className:"endpointRoot",key:n.pg,type:"endpointRoot",name:(0,a.hw)({id:"endpointTest"})},u={id:0,ordering:5,parentId:0,className:"TEST_SCHEDULED_TASK_ROOT",key:n.q5,type:"TEST_SCHEDULED_TASK_ROOT",name:(0,a.hw)({id:"team.runner.testScheduleTask"}),children:[],canExpand:l},p={id:0,ordering:6,parentId:0,className:"testReport",key:n.Et,type:"testReport",name:(0,a.hw)({id:"testReport"})},m={id:0,ordering:7,parentId:0,name:"",type:"testPlaceholder",key:n.Bz,className:"testPlaceholder",selectable:!1,title:""},h={id:0,ordering:3,parentId:0,className:"TEST_SUITE_ROOT",key:n.XS,type:"TEST_SUITE_ROOT",name:(0,a.hw)({id:"testSuites"}),children:[],canExpand:l},v={id:0,ordering:4,parentId:0,className:"TEST_DATA_SET_ROOT",key:n.sc,type:"TEST_DATA_SET_ROOT",name:(0,a.hw)({id:"testData"}),children:[],canExpand:l}},734050:function(e,t,i){"use strict";i.d(t,{qX:()=>a});let a=(0,i(325475).vt)(e=>({postmanGuidingVideoShow:!1,setPostmanGuidingVideoShow:t=>e({postmanGuidingVideoShow:t})}));a.getState,a.setState},713781:function(e,t,i){"use strict";i.d(t,{N:()=>n});var a=i(526838);let n=new class e{has(e){return this.map.has(e)}set(e,t){return this.map.set(e,t),t}get(e){return this.map.get(e)}clear(){this.map.clear()}delete(e){return this.map.delete(e)}constructor(){(0,a._)(this,"map",void 0),this.map=new Map}}},249276:function(e,t,i){"use strict";i.d(t,{w:()=>r});var a=i(410054),n=i(641486),l=i(140049);let r=()=>{let[e,t]=(0,n.useState)(!1),i=(0,l.A)(()=>{t(!1)});return(0,n.useEffect)(()=>(e&&(window.addEventListener("blur",i),a.A.on("closeDropdownMenu",i)),()=>{a.A.off("closeDropdownMenu",i),window.removeEventListener("blur",i)}),[i,e]),{close:i,toggle:t,open:e}}},716452:function(e,t,i){"use strict";i.d(t,{A:()=>o});var a=i(526838),n=i(740565);i(23602);var l=i(708326),r=i(435685),s=i(328967);class o{setFormat(e){this.format=e}getNewFolderId(){return this.folderIdIndex+=1,`${this.folderIdIndex}`}getDefaultFolder(){if(!this.defaultFolder){let{collections:e}=r.baseContainer.getItemsSync(e=>[e.collections]),{HttpFolder:t}=e;this.defaultFolder=new t({name:(0,n.hw)({id:"defaultFolder"})}),this.httpFolders.push(this.defaultFolder)}return this.defaultFolder}getHttpFolders(){return this.httpFolders}getDataSchemaFolders(){return this.dataSchemaFolders}getOasComponentFolders(){return this.oasComponentFolders}getEnvironments(){return this.environments}getDocCollection(){return this.docCollection}getWebSocketCollection(){return this.webSocketCollection}getSocketIOCollection(){return this.socketIOCollection}getMcpClientCollection(){return this.mcpClientCollection}getExtra(){return this.extra}getApiSpecification(){var e;let{collections:t}=r.baseContainer.getItemsSync(e=>[e.collections]),{ApiSpecification:i,DataSchemaCollection:a,HttpCollection:n,SecuritySchemeCollection:l,SocketCollection:s,OasComponentCollection:o}=t,d=new i({info:{title:"",version:"1.0.0"},basePath:this.basePath,hasFullPath:this.hasFullPath,contentMimeTypes:this.contentMimeTypes}),c=null==(e=this.extra)?void 0:e.moduleSettings,u=new n(...this.formateModuleFolder(c,this.httpFolders));d.setHttpCollection(u);let p=new s(...this.formateModuleFolder(c,this.socketFolders));d.setSocketCollection(p);let m=new a(...this.formateModuleFolder(c,this.dataSchemaFolders));d.setDataSchemaCollection(m);let h=new l(...this.formateModuleFolder(c,this.securitySchemeFolders));d.setSecuritySchemeCollection(h);let v=new o(...this.formateModuleFolder(c,this.oasComponentFolders));return d.setOasComponentCollection(v),d.setEnvironments(this.environments),d.httpCommonResponses=this.formateModuleFolder(c,this.httpCommonResponses),d.docCollection=this.formateModuleFolder(c,this.docCollection),d.webSocketCollection=this.formateModuleFolder(c,this.webSocketCollection),d.socketIOCollection=this.formateModuleFolder(c,this.socketIOCollection),d.mcpClientCollection=this.formateModuleFolder(c,this.mcpClientCollection),d.customEndpointCollection=this.formateModuleFolder(c,this.customEndpointCollection),d.requestCollection=this.requestCollection,d.apiTestCaseCollection=this.apiTestCaseCollection,d.apiTestDataCollection=this.apiTestDataCollection,d.testSuiteCollection=this.testSuiteCollection,d.$schema=this.$schema,d.extra=this.extra,d}formateModuleFolder(e,t){if(!e||0===e.length||!Array.isArray(t))return t;let{collections:i}=r.baseContainer.getItemsSync(e=>[e.collections]),{HttpFolder:a}=i,l=t.reduce((e,t)=>e.set(String(t.moduleId),t),new Map);return e.map(e=>l.get(e.id)||new a({name:(0,n.hw)({id:"defaultFolder"})}))}getTitle(){return"string"==typeof this.title&&this.title?this.title:"string"==typeof this.fileName&&this.fileName?this.fileName:void 0}getContentVersion(){if("string"==typeof this.contentVersion&&this.contentVersion)return this.contentVersion}async getProjectSettingData(){if(!this.projectLanguage)if(this.isExistedProject)try{var e,t;let i=await (0,l.El)();this.projectLanguage=null!=(t=null==(e=i.data)?void 0:e.language)?t:""}catch(e){this.projectLanguage=(0,n.getUserLocale)(),console.error("Convertor getProjectSettingData error",e)}else this.projectLanguage=(0,n.getUserLocale)()}formatCollectionAndCreateFolders(e,t){for(var i=arguments.length,a=Array(i>2?i-2:0),n=2;n<i;n++)a[n-2]=arguments[n];return e?this.formatCollection(e).map(e=>new t(e,...a)):[]}formatCollection(e){return Array.isArray(e)?e.map(e=>Array.isArray(e.children)?e:this.formatFolder(e)):[]}formatFolder(e){let t={id:e.id||(0,s.A)(),name:e.name,items:[],children:[],description:e.description,moduleId:e.moduleId,serverId:e.serverId,parentId:e.parentId,preProcessors:e.preProcessors,postProcessors:e.postProcessors,inheritPostProcessors:e.inheritPostProcessors,inheritPreProcessors:e.inheritPreProcessors,auth:e.auth,securityScheme:e.securityScheme,shareSettings:e.shareSettings,visibility:e.visibility||"public"};return e.items&&e.items.forEach(e=>{if(e.items)t.children.push(this.formatFolder(e));else{let i={id:e.id||(0,s.A)(),name:e.name,moduleId:e.moduleId,displayName:e.displayName||e.name,description:e.description,visibility:e.visibility||"public",...e.api||e.service||e.schema||e};t.items.push(i)}}),t}constructor(e,t){var i;(0,a._)(this,"globalResponseIdIndex",1),(0,a._)(this,"folderIdIndex",0),(0,a._)(this,"httpFolders",[]),(0,a._)(this,"socketFolders",[]),(0,a._)(this,"dataSchemaFolders",[]),(0,a._)(this,"securitySchemeFolders",[]),(0,a._)(this,"httpApiResponseFolders",[]),(0,a._)(this,"oasComponentFolders",[]),(0,a._)(this,"apiTestCaseCollection",void 0),(0,a._)(this,"apiTestDataCollection",void 0),(0,a._)(this,"testSuiteCollection",void 0),(0,a._)(this,"environments",[]),(0,a._)(this,"data",void 0),(0,a._)(this,"format",void 0),(0,a._)(this,"defaultFolder",void 0),(0,a._)(this,"httpCommonResponses",[]),(0,a._)(this,"basePath",void 0),(0,a._)(this,"hasFullPath",!1),(0,a._)(this,"contentMimeTypes",[]),(0,a._)(this,"docCollection",[]),(0,a._)(this,"requestCollection",[]),(0,a._)(this,"customEndpointCollection",void 0),(0,a._)(this,"extra",void 0),(0,a._)(this,"$schema",void 0),(0,a._)(this,"fileName",void 0),(0,a._)(this,"fileExtension",void 0),(0,a._)(this,"importToBody",void 0),(0,a._)(this,"apiNameExtractMethod",void 0),(0,a._)(this,"webSocketCollection",[]),(0,a._)(this,"socketIOCollection",[]),(0,a._)(this,"mcpClientCollection",[]),(0,a._)(this,"isExistedProject",!0),(0,a._)(this,"projectLanguage",""),(0,a._)(this,"importProjectId",void 0),(0,a._)(this,"title",void 0),(0,a._)(this,"contentVersion",void 0),(0,a._)(this,"moduleId",void 0),(0,a._)(this,"apiFolderId",void 0),this.fileName=null==t?void 0:t.fileName,this.fileExtension=(null==t?void 0:t.fileExtension)||"json",this.importToBody=(null==t?void 0:t.importToBody)||"SCHEMA",this.apiNameExtractMethod=(null==t?void 0:t.apiNameExtractMethod)||"OPERATION_ID",this.isExistedProject=null==(i=null==t?void 0:t.isExistedProject)||i,this.importProjectId=null==t?void 0:t.importProjectId,this.apiFolderId=null==t?void 0:t.apiFolderId,this.moduleId=null==t?void 0:t.moduleId,this.data=e}}},968734:function(e,t,i){"use strict";i.d(t,{$l:()=>h,AM:()=>j,F7:()=>x,Uw:()=>m,Uy:()=>A,XL:()=>y,ZF:()=>g,_0:()=>C,cx:()=>w,jD:()=>S,yO:()=>b});var a=i(169508),n=i(740565),l=i(269966),r=i(790453),s=i(820057),o=i.n(s),d=i(974015),c=i(398380),u=i(560905),p=i.n(u);function m(e){try{return d.Ay.load(e)}catch(e){throw SyntaxError(`Specification is not a valid YAML. ${e}`,{cause:r.hW.PARSE_ERROR})}}async function h(e){let t;if("string"==typeof e)try{t=function(e){try{return JSON.parse(e)}catch(t){try{let t=e.replace(/[\n|^]+/g,"");return JSON.parse(t)}catch(e){throw SyntaxError(`Specification is not a valid JSON. ${t}`,{cause:r.hW.PARSE_ERROR})}}}(e),"object"==typeof t&&t.paths&&Object.keys(t.paths).forEach(e=>{if(t.paths[e])for(let a of["post","patch","put","delete"]){var i;let n=null==(i=t.paths[e][a])?void 0:i.requestBody;n&&(0,c.isEmpty)(n)&&delete t.paths[e][a].requestBody}})}catch(a){try{t=await function(e){try{let t=i(407207);return p()(t.parseString)(e,{tagNameProcessors:[t.processors.stripPrefix],attrNameProcessors:[t.processors.stripPrefix]})}catch(e){throw SyntaxError(`Specification is not a valid XML. ${e}`,{cause:r.hW.PARSE_ERROR})}}(e)}catch(i){try{t=await m(e),"object"==typeof t&&(t=JSON.parse(JSON.stringify(t)))}catch(e){return{result:!1,reason:"Invalid format. Input must be in JSON YAML or XML format."}}}}return t||e}async function v(e){let t=e;"string"==typeof e&&(t=await h(e));let i=t.openapi||t.swagger||t.swaggerVersion;if(i){if(o()(i,"3.0")>=0)return"openapi_3";if(o()(i,"2.0")>=0)return"swagger_2";if(o()(i,"1.0")>=0)return"swagger_1"}}async function f(e){let t,{WebApiParser:a}=await Promise.all([i.e("47094"),i.e("57134"),i.e("9914"),i.e("79298")]).then(i.t.bind(i,363585,23));try{t=await a.raml10.parse(e)}catch(i){t=await a.raml08.parse(e)}return{openApiObject:JSON.parse(await a.oas30.generateString(t)),originalObject:t}}async function g(e,t){if("raml"===t)return await f(e);let n=await h(e);if("string"==typeof n&&(n=await h(n)),n&&!1===n.result)throw Error(n.reason,{cause:r.hW.PARSE_ERROR});let l=t;l||(l=await v(n));let s=n;if("swagger_2"===l){let{basePath:e}=n,{convertObj:t}=await Promise.all([i.e("57134"),i.e("77396"),i.e("87332")]).then(i.t.bind(i,203935,23));n=(await t(n,{appNameLower:a.A3,warnOnly:!0,patch:!0})).openapi,e&&"/"!==e&&(n["x-basePath"]=e.replace(/\/$/,""))}else if(l&&"openapi_3"!==l){let e=await Promise.all([i.e("66493"),i.e("48737"),i.e("67007"),i.e("47094"),i.e("90718"),i.e("57134"),i.e("30266"),i.e("98400"),i.e("96681"),i.e("8088"),i.e("72610"),i.e("81682"),i.e("83150"),i.e("76934"),i.e("54071")]).then(i.t.bind(i,11272,23));n=JSON.parse((await e.convert({from:l,to:"openapi_3",source:n})).stringify())}return{openApiObject:n,originalObject:s}}let y=e=>e&&"string"==typeof e?/array|\[.*\]/i.test(e)?"array":/long|int/i.test(e)?"integer":/num|float|double/i.test(e)?"number":/obj/i.test(e)?"object":/bool/i.test(e)?"boolean":/null/i.test(e)?"null":"string":"string",x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"string",t=arguments.length>1?arguments[1]:void 0;return"string"!=typeof e?l.hG.String:/arr|\[.*\]/i.test(e)?l.hG.Array:/long|int/i.test(e)?l.hG.Integer:/num|float|double/i.test(e)?l.hG.Number:"body"===t&&/file|binary/i.test(e)?l.hG.File:/bool/i.test(e)?l.hG.Boolean:l.hG.String},A=`x-${a.A3}`,j=`x-${a.A3}-folder`,b=`x-${a.A3}-status`;a.A3,a.A3;let w={expendAppNameKey:`x-${a.A3}`,expendOrdersKey:`x-${a.A3}-orders`,expendOrderingKey:`x-${a.A3}-ordering`,expendOverridesKey:`x-${a.A3}-overrides`,expendIgnorePropertiesKey:`x-${a.A3}-ignore-properties`,expendRefsKey:`x-${a.A3}-refs`,expend$RefsKey:`x-${a.A3}-$ref`,expendFolderKey:`x-${a.A3}-folder`,expendMaintainerKey:`x-${a.A3}-maintainer`,expendNameKey:`x-${a.A3}-name`,expendMockKey:`x-${a.A3}-mock`,expendEnumKey:`x-${a.A3}-enum`,expendResponsesKey:`x-${a.A3}-additional-responses`},S=(e,t)=>{try{return"string"==typeof e?JSON.parse(e):e}catch(i){return t||e}},C=e=>{if("object"==typeof e)return e;try{return JSON.parse(e)}catch(e){throw Error((0,n.hw)({id:"incorrectFileFormatWithType"},{name:"JSON"}),{cause:r.hW.PARSE_ERROR})}}},349300:function(e,t,i){"use strict";i.d(t,{i:()=>p});var a=i(526838),n=i(914149),l=i(496411),r=i(794337),s=i(520102),o=i(17516),d=i(398380),c=i(179048),u=i(1583);class p{sendSocketIOMessage(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];throw Error("Method not implemented. sendSocketIOMessage")}endSocketIO(){throw Error("Method not implemented. endSocketIO")}onSocketIOEvent(e){throw Error("Method not implemented. onSocketIOEvent")}offSocketIOEvent(e){throw Error("Method not implemented. offSocketIOEvent")}runSocketIO(e){this.run(e,!1)}runWebSocket(e){this.run({...e},!1)}sendWebSocketMessage(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];throw Error("Method not implemented. sendWebSocketMessage")}sendRpcMessage(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];throw Error("Method not implemented. sendRpcMessage")}endRpc(){throw Error("Method not implemented. endRpc")}runRpc(e){this.run({...e},!1)}updateVariables(e){this.saveVariables&&(this.environment&&(null==e?void 0:e.environmentVariable)&&(0,u.Lf)(this.environment,e.environmentVariable),this.globals&&(null==e?void 0:e.globalsVariable)&&(0,u.jO)(this.globals,e.globalsVariable),this.teamGlobals&&(null==e?void 0:e.teamGlobalsVariable)&&(0,u.Vr)(this.teamGlobals,e.teamGlobalsVariable),this.moduleVariablesMap&&(null==e?void 0:e.moduleVariablesMap)&&(0,u.vz)(this.moduleVariablesMap,e.moduleVariablesMap)),this.saveGlobalCookie&&(null==e?void 0:e.cookieJar)&&"true"!==localStorage.getItem(l.Jz)&&(0,r.L)(s.CookieJar.fromJSON(e.cookieJar))}handleResult(e){return this.updateVariables(e),{...e,steps:this.handleRunResultSteps(null==e?void 0:e.steps)}}handleStepResult(e){return{...e,steps:this.handleRunResultSteps(e.steps)}}handleRunResultSteps(e){let t=[];return Array.isArray(e)&&(t=e.map(u.yS)),t}constructor(e,{consoleLog:t=!0,saveGlobalCookie:i=!1,saveVariables:l=!1,readGlobalCookie:s=!1,delayItem:p,...m}){(0,a._)(this,"id",void 0),(0,a._)(this,"environment",void 0),(0,a._)(this,"globals",void 0),(0,a._)(this,"teamGlobals",void 0),(0,a._)(this,"moduleVariablesMap",void 0),(0,a._)(this,"collection",void 0),(0,a._)(this,"saveVariables",void 0),(0,a._)(this,"saveGlobalCookie",void 0),(0,a._)(this,"runnerOptions",void 0),(0,a._)(this,"consoleLog",void 0),(0,a._)(this,"lastIsLoading",void 0),(0,a._)(this,"hideLoading",void 0),(0,a._)(this,"canceled",!1),(0,a._)(this,"status",void 0),(0,a._)(this,"runOne",async(e,t)=>{let{Http:i}=await o.sdkContainer.getItems(e=>[e.Http]);this.run({sseStreamStart:t=>{e({request:new i.HttpRequest(t[0]),response:new i.HttpResponse(t[1])},"sseStreamStart")},sseStreamData:t=>{e({sseData:t[0],sseRawData:t[1]},"sseStreamData")},done:t=>{let a=t.steps[0],n=(0,d.last)((0,d.get)(a,"history.execution.data"));if(n){let e=i.HttpResponse.timingPhases(n.timings);e&&a.response&&(a.response.timingPhases=e)}let l=t.socketSession;l&&(a.socketSession=l),e(a,"done")},beforeStep:t=>{e((0,u.yS)(t),"beforeStep")},error:e=>{this.abort(),null==t||t(e)}},!1)});const h=m.id||(0,c.A)(),v={id:h};this.id=h,this.collection=e,this.saveVariables=l,this.consoleLog=t,this.environment=m.environment,this.globals=m.globals,this.teamGlobals=m.teamGlobals,this.moduleVariablesMap=m.moduleVariablesMap;const f=5===(0,n.Ap)().getCurrentAgentId();this.saveGlobalCookie=i&&!f,s&&!f&&(v.cookieJar=r.b),p&&(v.delay=m.delay||{},v.delay.item=p),this.runnerOptions={...m,...v,id:h},this.runnerOptions.script={...this.runnerOptions.script,serializeLogs:!0}}}},474256:function(e,t,i){"use strict";i.d(t,{RunnerFactory:()=>a});var a,n=i(914149),l=i(169508),r=i(850646),s=i(837403),o=i(435685),d=i(17516),c=i(506598),u=i(526838),p=i(899473),m=i(740565),h=i(496411),v=i(73586),f=i(99488),g=i(929463),y=i(398380),x=i(861418),A=i.n(x),j=i(349300),b=i(748358);class w extends j.i{sendWebSocketMessage(e,t){this.ipc.send("TestCase.RunnerAction",{id:this.id,type:"sendWebSocketMessage",data:{message:e,options:t}})}sendRpcMessage(e,t){this.ipc.send("TestCase.RunnerAction",{id:this.id,type:"sendRpcMessage",data:{message:e,options:t}})}endRpc(){this.ipc.send("TestCase.RunnerAction",{id:this.id,type:"endRpc",data:{}})}sendSocketIOMessage(e){this.ipc.send("TestCase.RunnerAction",{id:this.id,type:"sendSocketIOMessage",data:{message:e}})}endSocketIO(){this.ipc.send("TestCase.RunnerAction",{id:this.id,type:"endSocketIO",data:{}})}onSocketIOEvent(e){this.ipc.send("TestCase.RunnerAction",{id:this.id,type:"onSocketIOEvent",data:e})}offSocketIOEvent(e){this.ipc.send("TestCase.RunnerAction",{id:this.id,type:"offSocketIOEvent",data:e})}run(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];t&&(this.hideLoading=g.Ay.loading((0,m.hw)({id:"apiTestCase.threadResources"}))),this.ipc.send("TestCase.Runner",this.collection.id,this.prepareCollectionData()),w.runnerHandler.set(this.collection.id,[this,e])}prepareCollectionData(){var e;let{runnerOptions:t}=this;this.saveGlobalCookie&&(t.returnCookieJar=!0),this.saveVariables&&(t.returnEnvironmentVariable=!0,t.returnGlobalsVariable=!0,t.returnTeamGlobalsVariable=!0,t.returnModuleVariablesMap=!0),this.consoleLog&&(t.returnConsole=!0),t.certificatesList=(0,p.i8)(),t.fastResponse=!0,t.responseSizeThreshold=0x3200000,t.currentProxyAgentId=(0,n.Ap)().getCurrentAgentId(),t.environmentAdvancedSettings=null==(e=t.environment)?void 0:e.advancedSettings;let{Utils:{PropertyBase:i}}=d.sdkContainer.getItemsSync(e=>[e.Utils]);return i.toJSON({collection:this.collection,options:this.runnerOptions})}async handleRunnerMessage(e,t,i,a,n){var l,r,s,o,c,u,p,m,h,v,f,g,y,x,j,w,S,C,I,N,k,T,M,E,_,F,D,R;switch(e){case"fatalError":null==n||n(),null==(l=i.error)||l.call(i,(0,b.q)({code:"unknown error",message:""},{agentId:3}));break;case"done":i.done&&"end"!==this.status&&(await this.handleDoneBeforeError(t),A().unstable_batchedUpdates(()=>{i.done(this.handleResult(t))})),this.status="end";break;case"sseStreamStart":null==(r=i.sseStreamStart)||r.call(i,t);break;case"sseStreamData":null==(s=i.sseStreamData)||s.call(i,t);break;case"asyncBeforeRequest":null==(o=i.asyncBeforeRequest)||o.call(i,t);break;case"asyncBeforeItem":null==(c=i.asyncBeforeItem)||c.call(i,t);break;case"beforeStep":A().unstable_batchedUpdates(()=>{var e;null==(e=i.beforeStep)||e.call(i,t)});break;case"step":null==(u=i.step)||u.call(i,this.handleStepResult(t));break;case"saveTestCaseReport":null==(p=i.saveTestCaseReport)||p.call(i,t);break;case"complete":null==(m=i.complete)||m.call(i),null==a||a();break;case"beforeWebSocketOpen":{let{WebSocket:e}=await d.sdkContainer.getItems(e=>[e.WebSocket]);null==(h=i.beforeWebSocketOpen)||h.call(i,new e.WebSocketRequest(t));break}case"webSocketOpen":{let{WebSocket:e}=await d.sdkContainer.getItems(e=>[e.WebSocket]);null==(v=i.webSocketOpen)||v.call(i,new e.WebSocketResponse(t));break}case"webSocketMessage":null==(f=i.webSocketMessage)||f.call(i,t);break;case"webSocketMessageReturn":null==(g=i.webSocketMessageReturn)||g.call(i,t);break;case"webSocketClose":null==(y=i.webSocketClose)||y.call(i,t.code,t.reason);break;case"webSocketError":null==(x=i.webSocketError)||x.call(i,t);break;case"beforeRpcOpen":{let{Http:e}=await d.sdkContainer.getItems(e=>[e.Http]);null==(j=i.beforeRpcOpen)||j.call(i,new e.HttpRequest(t));break}case"rpcOpen":{let{Http:e}=await d.sdkContainer.getItems(e=>[e.Http]);null==(w=i.rpcOpen)||w.call(i,new e.HttpResponse(t));break}case"rpcMessage":null==(S=i.rpcMessage)||S.call(i,t);break;case"rpcMessageReturn":null==(C=i.rpcMessageReturn)||C.call(i,t);break;case"rpcClose":null==(I=i.rpcClose)||I.call(i,t.code,t.reason);break;case"rpcError":null==(N=i.rpcError)||N.call(i,t);break;case"rpcHeader":null==(k=i.rpcHeader)||k.call(i,t);break;case"rpcTrailer":null==(T=i.rpcTrailer)||T.call(i,t);break;case"socketIOConnect":null==(M=i.socketIOConnect)||M.call(i);break;case"socketIOMessage":null==(E=i.socketIOMessage)||E.call(i,t);break;case"socketIOClose":null==(_=i.socketIOClose)||_.call(i);break;case"socketIOError":null==(F=i.socketIOError)||F.call(i,t);break;case"socketIOAckCallback":null==(D=i.socketIOAckCallback)||D.call(i,...null!=t?t:[]);break;case"socketIOMessageSent":null==(R=i.socketIOMessageSent)||R.call(i,t)}}filterLocalMockErrorMessage(e){var t,i;if(!e.requestError)return e;let a=(0,h.JA)();return(null==(t=e.requestError)?void 0:t.port)===Number(null==a?void 0:a.localMockPort)&&(null==(i=e.requestError)?void 0:i.address)==="127.0.0.1"&&(e.requestError.type=f.N.connectLocalMockFailed,e.requestError.message=""),e}async handleDoneBeforeError(e){if(!(null==e?void 0:e.steps))return;let t=e.steps.filter(e=>e.requestError);if(1!==t.length)return;let[i]=t;await this.handleStepError(this.filterLocalMockErrorMessage(i))}async handleStepError(e){var t,i;let a=null==(t=e.requestError)?void 0:t.code;if(!a)return this.handleProxyError(e);if(["ETIMEDOUT","ESOCKETTIMEDOUT"].includes(a)&&!(0,y.isNil)(null==(i=this.runnerOptions.timeout)?void 0:i.request))return e;if(["ERR_UNESCAPED_CHARACTERS"].includes(a)){let t=!1;if(this.collection.forEachItem(i=>{var a,n,l;(null==i||null==(a=i.metaInfo)?void 0:a.httpApiId)===(null==e||null==(n=e.metaInfo)?void 0:n.httpApiId)&&(t=null==i||null==(l=i.protocolProfileBehavior)?void 0:l.disableUrlEncoding)}),t)return e}return this.handleProxyError(e)}async handleProxyError(e){if(3!==(0,n.Ap)().getCurrentAgentId())return e;let{type:t}=(0,h.pY)(),{proxy:i,url:a,method:l}=e.request;return(null==i?void 0:i.host)&&"none"!==t?(await v.gc.invoke("Proxy.CheckUrlConnectionWithoutProxy",{url:a.toString(),method:l})&&e.requestError&&(e.requestError.requestUrl=`${i.host}:${i.port}`,e.requestError.type=({system:f.N.connectSystemProxyFailed,custom:f.N.connectCustomProxyFailed})[t]),e):e}constructor(e,t,i){if(super(e,t),(0,u._)(this,"ipc",v.gc),(0,u._)(this,"abort",()=>{var e;this.status="end",this.ipc.send("TestCase.RunnerAction",{id:this.id,type:"abort"}),null==(e=this.hideLoading)||e.call(this)}),(0,u._)(this,"pause",()=>{this.ipc.send("TestCase.RunnerAction",{id:this.id,type:"pause"})}),(0,u._)(this,"resume",()=>{this.ipc.send("TestCase.RunnerAction",{id:this.id,type:"resume"})}),i){const e=w.handleRunnerResult(()=>{i.removeListener("TestCase.RunnerResult",e)});i.on("TestCase.RunnerResult",e),this.ipc=i}}}(0,u._)(w,"runnerHandler",new Map),(0,u._)(w,"handleRunnerResult",e=>async(t,i,a,n)=>{var l;if(!w.runnerHandler.has(i))return;let[r,s]=w.runnerHandler.get(i);null==(l=r.hideLoading)||l.call(r),s&&await r.handleRunnerMessage(a,n,s,()=>{null==e||e(),w.runnerHandler.delete(i)},()=>{w.runnerHandler.delete(i)})}),v.gc.on("TestCase.RunnerResult",w.handleRunnerResult());class S extends w{setupMessageChannelHandler(){if(!this.messagePort||S.setupMessagePorts.has(this.messagePort))return;let e=async(e,t)=>{var i;let{collectionId:a}=e.data;if(!a)return;let n=S.messageChannelHandler.get(a);if(!n)return void console.warn(`[DesktopApiTestRunnerWithMessageChannel] No handler for ${a} ${t}`,e.data);let[l,r]=n;null==(i=l.hideLoading)||i.call(l),r&&await l.handleRunnerMessage(t,e.data.result,r,()=>{S.messageChannelHandler.delete(a)},()=>{S.messageChannelHandler.delete(a)})};this.messagePort.onAll(e),S.setupMessagePorts.add(this.messagePort)}run(e){var t;let i=!(arguments.length>1)||void 0===arguments[1]||arguments[1];i&&(this.hideLoading=g.Ay.loading((0,m.hw)({id:"apiTestCase.threadResources"}))),null==(t=this.messagePort)||t.postMessage({type:"TASK_DATA_RESPONSE",collectionId:this.collection.id,collection:this.prepareCollectionData()}),S.messageChannelHandler.set(this.collection.id,[this,e])}constructor(e,t,i){super(e,t,null),(0,u._)(this,"messagePort",void 0),(0,u._)(this,"abort",()=>{var e,t;this.status="end",null==(e=this.messagePort)||e.postMessage({type:"abort",id:this.id}),null==(t=this.hideLoading)||t.call(this)}),(0,u._)(this,"pause",()=>{var e;null==(e=this.messagePort)||e.postMessage({type:"pause",id:this.id})}),(0,u._)(this,"resume",()=>{var e;null==(e=this.messagePort)||e.postMessage({type:"resume",id:this.id})}),this.messagePort=i,this.setupMessageChannelHandler()}}(0,u._)(S,"messageChannelHandler",new Map),(0,u._)(S,"setupMessagePorts",new WeakSet);var C=i(861645),I=i(867325);class N extends j.i{sendRunnerAction(e){N.runnerPort?N.runnerPort.postMessage(e):this.pendingAction.push(e)}filterLocalMockErrorMessage(e){var t,i;if(!e.requestError)return e;let a=(0,h.JA)();return(null==(t=e.requestError)?void 0:t.port)===Number(null==a?void 0:a.localMockPort)&&(null==(i=e.requestError)?void 0:i.address)==="127.0.0.1"&&(e.requestError.type=f.N.connectLocalMockFailed,e.requestError.message=""),e}async handleDoneBeforeError(e){if(!(null==e?void 0:e.steps))return;let t=e.steps.filter(e=>e.requestError);if(1!==t.length)return;let[i]=t;await this.handleStepError(this.filterLocalMockErrorMessage(i))}async handleStepError(e){var t,i;let a=null==(t=e.requestError)?void 0:t.code;if(!a)return this.handleProxyError(e);if(["ETIMEDOUT","ESOCKETTIMEDOUT"].includes(a)&&!(0,y.isNil)(null==(i=this.runnerOptions.timeout)?void 0:i.request))return e;if(["ERR_UNESCAPED_CHARACTERS"].includes(a)){let t=!1;if(this.collection.forEachItem(i=>{var a,n,l;(null==i||null==(a=i.metaInfo)?void 0:a.httpApiId)===(null==e||null==(n=e.metaInfo)?void 0:n.httpApiId)&&(t=null==i||null==(l=i.protocolProfileBehavior)?void 0:l.disableUrlEncoding)}),t)return e}return this.handleProxyError(e)}async handleProxyError(e){if(3!==(0,n.Ap)().getCurrentAgentId())return e;let{type:t}=(0,h.pY)(),{proxy:i,url:a,method:l}=e.request;return(null==i?void 0:i.host)&&"none"!==t?(await v.gc.invoke("Proxy.CheckUrlConnectionWithoutProxy",{url:a.toString(),method:l})&&e.requestError&&(e.requestError.requestUrl=`${i.host}:${i.port}`,e.requestError.type=({system:f.N.connectSystemProxyFailed,custom:f.N.connectCustomProxyFailed})[t]),e):e}constructor(e,t){var i;super(e,t),i=this,(0,u._)(this,"pendingAction",[]),(0,u._)(this,"abort",()=>{var e,t,i;this.status="end",this.sendRunnerAction({type:"TestCase.RunnerAction",id:this.id,eventId:null==(e=this.collection)?void 0:e.id,typeAction:"abort"}),null==(t=this.hideLoading)||t.call(this),(null==(i=this.collection)?void 0:i.id)&&N.runnerHandler.delete(this.collection.id)}),(0,u._)(this,"pause",()=>{var e;this.sendRunnerAction({type:"TestCase.RunnerAction",id:this.id,eventId:null==(e=this.collection)?void 0:e.id,typeAction:"pause"})}),(0,u._)(this,"resume",()=>{var e;this.sendRunnerAction({type:"TestCase.RunnerAction",id:this.id,eventId:null==(e=this.collection)?void 0:e.id,typeAction:"resume"})}),(0,u._)(this,"sendWebSocketMessage",(e,t)=>{var i;this.sendRunnerAction({type:"TestCase.RunnerAction",id:this.id,eventId:null==(i=this.collection)?void 0:i.id,typeAction:"sendWebSocketMessage",data:{message:e,options:t}})}),(0,u._)(this,"sendRpcMessage",(e,t)=>{var i;this.sendRunnerAction({type:"TestCase.RunnerAction",id:this.id,eventId:null==(i=this.collection)?void 0:i.id,typeAction:"sendRpcMessage",data:{message:e,options:t}})}),(0,u._)(this,"endRpc",()=>{var e;this.sendRunnerAction({type:"TestCase.RunnerAction",id:this.id,eventId:null==(e=this.collection)?void 0:e.id,typeAction:"endRpc",data:{}})}),(0,u._)(this,"sendSocketIOMessage",e=>{var t;this.sendRunnerAction({type:"TestCase.RunnerAction",id:this.id,eventId:null==(t=this.collection)?void 0:t.id,typeAction:"sendSocketIOMessage",data:{message:e}})}),(0,u._)(this,"endSocketIO",()=>{var e;this.sendRunnerAction({type:"TestCase.RunnerAction",id:this.id,eventId:null==(e=this.collection)?void 0:e.id,typeAction:"endSocketIO",data:{}})}),(0,u._)(this,"onSocketIOEvent",e=>{var t;this.sendRunnerAction({type:"TestCase.RunnerAction",id:this.id,eventId:null==(t=this.collection)?void 0:t.id,typeAction:"onSocketIOEvent",data:e})}),(0,u._)(this,"offSocketIOEvent",e=>{var t;this.sendRunnerAction({type:"TestCase.RunnerAction",id:this.id,eventId:null==(t=this.collection)?void 0:t.id,typeAction:"offSocketIOEvent",data:e})}),(0,u._)(this,"run",function(e){var t;let a=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{Utils:l}=d.sdkContainer.getItemsSync(e=>[e.Utils]),r=new Promise(e=>e(!0)),s=!N.isUtilityProcessListening;s&&(N.isUtilityProcessListening=!0,r=new Promise(e=>{let t=!1;v.gc.on("TestCase.UtilityRunner",a=>{var n;let l=null==(n=a.ports)?void 0:n[0];l&&(l.onmessage=e=>{let{channel:t,eventId:i,data:a}=e.data||{};if("TestCase.UtilityRunner"!==t||!a)return;if((0,I.ys)(a)){console.error("\uD83D\uDE80 ~ runnerPort.onmessage ~ data:",(0,I.Me)(a)),N.handleRunnerResult(null,i,"fatalError");return}let{type:n,payload:l}=(0,I.Tp)(a);N.handleRunnerResult(null,i,n,l)},N.runnerPort&&N.runnerPort.close(),N.runnerPort=l,i.pendingAction.length>0&&(i.pendingAction.forEach(e=>{l.postMessage(e)}),i.pendingAction=[]),t||(t=!0,e(!0)),l.start())})})),a&&(i.hideLoading=g.Ay.loading((0,m.hw)({id:"apiTestCase.threadResources"})));let{runnerOptions:o}=i;i.saveGlobalCookie&&(o.returnCookieJar=!0),i.saveVariables&&(o.returnEnvironmentVariable=!0,o.returnGlobalsVariable=!0,o.returnTeamGlobalsVariable=!0,o.returnModuleVariablesMap=!0),i.consoleLog&&(o.returnConsole=!0),o.certificatesList=(0,p.i8)(),o.fastResponse=!0,o.responseSizeThreshold=0x3200000,o.currentProxyAgentId=(0,n.Ap)().getCurrentAgentId(),o.environmentAdvancedSettings=null==(t=o.environment)?void 0:t.advancedSettings;let c=new Promise(e=>{v.gc.send("TestCase.UtilityRunner",i.collection.id,l.PropertyBase.toJSON({collection:i.collection,options:o,portConnected:!s})),e(!0)});N.runnerHandler.set(i.collection.id,[i,e]),Promise.all([c,r]).then(()=>{})})}}async function k(e,t){await o.baseContainer.getItems(e=>Object.keys(e).map(t=>e[t])),await d.sdkContainer.getItems(e=>Object.keys(e).map(t=>e[t])),await c.utilsContainer.getItems(e=>Object.keys(e).map(t=>e[t]));let{default:a}=await Promise.all([i.e("4276"),i.e("47094"),i.e("38390"),i.e("53281"),i.e("8704"),i.e("30435"),i.e("17722")]).then(i.bind(i,8223));return window.app_agent_service_url=(0,r.i9)(),new a(e,t)}async function T(e,t){await o.baseContainer.getItems(e=>Object.keys(e).map(t=>e[t])),await d.sdkContainer.getItems(e=>Object.keys(e).map(t=>e[t])),await c.utilsContainer.getItems(e=>Object.keys(e).map(t=>e[t]));let{default:a}=await Promise.all([i.e("4276"),i.e("47094"),i.e("38390"),i.e("53281"),i.e("8704"),i.e("30435"),i.e("85381")]).then(i.bind(i,22884));return new a(e,t)}(0,u._)(N,"runnerHandler",new Map),(0,u._)(N,"runnerPort",null),(0,u._)(N,"isUtilityProcessListening",!1),(0,u._)(N,"handleRunnerResult",async(e,t,i,a)=>{var n,l,r,s,o,c,u,p,m,h,v,f,g,y,x,j,w,S,I,k,T,M,E,_,F,D,R,O;if(!N.runnerHandler.has(t))return;let{Http:P,WebSocket:L}=await d.sdkContainer.getItems(e=>[e.Http,e.WebSocket]),[$,B]=N.runnerHandler.get(t);if(null==(n=$.hideLoading)||n.call($),B)switch(i){case"done":B.done&&"end"!==$.status&&(await $.handleDoneBeforeError(a),A().unstable_batchedUpdates(()=>{B.done($.handleResult(a))})),$.status="end";break;case"sseStreamStart":null==(l=B.sseStreamStart)||l.call(B,a);break;case"sseStreamData":null==(r=B.sseStreamData)||r.call(B,a);break;case"asyncBeforeRequest":null==(s=B.asyncBeforeRequest)||s.call(B,a);break;case"asyncBeforeItem":null==(o=B.asyncBeforeItem)||o.call(B,a);break;case"beforeStep":A().unstable_batchedUpdates(()=>{var e;null==(e=B.beforeStep)||e.call(B,a)});break;case"step":null==(c=B.step)||c.call(B,$.handleStepResult(a));break;case"saveTestCaseReport":null==(u=B.saveTestCaseReport)||u.call(B,a);break;case"fatalError":N.runnerHandler.delete(t),null==(p=B.error)||p.call(B,(0,b.q)({code:"unknown error",message:""},{agentId:3}));break;case"beforeWebSocketOpen":null==(m=B.beforeWebSocketOpen)||m.call(B,new L.WebSocketRequest(a));break;case"webSocketOpen":null==(h=B.webSocketOpen)||h.call(B,new L.WebSocketResponse(a));break;case"webSocketMessage":null==(v=B.webSocketMessage)||v.call(B,a);break;case"webSocketMessageReturn":null==(f=B.webSocketMessageReturn)||f.call(B,a);break;case"webSocketClose":null==(g=B.webSocketClose)||g.call(B,a.code,a.reason);break;case"webSocketError":null==(y=B.webSocketError)||y.call(B,a);break;case"beforeRpcOpen":null==(x=B.beforeRpcOpen)||x.call(B,new P.HttpRequest(a));break;case"rpcOpen":null==(j=B.rpcOpen)||j.call(B,new P.HttpResponse(a));break;case"rpcMessage":null==(w=B.rpcMessage)||w.call(B,a);break;case"rpcMessageReturn":null==(S=B.rpcMessageReturn)||S.call(B,a);break;case"rpcClose":null==(I=B.rpcClose)||I.call(B,a.code,a.reason);break;case"rpcError":null==(k=B.rpcError)||k.call(B,a);break;case"rpcHeader":null==(T=B.rpcHeader)||T.call(B,{...a,metadata:new C.HeaderList(null,a.metadata)});break;case"rpcTrailer":null==(M=B.rpcTrailer)||M.call(B,{...a,metadata:new C.HeaderList(null,a.metadata)});break;case"socketIOConnect":null==(E=B.socketIOConnect)||E.call(B);break;case"socketIOMessage":null==(_=B.socketIOMessage)||_.call(B,a);break;case"socketIOClose":null==(F=B.socketIOClose)||F.call(B);break;case"socketIOError":null==(D=B.socketIOError)||D.call(B,a);break;case"socketIOAckCallback":null==(R=B.socketIOAckCallback)||R.call(B,...null!=a?a:[]);break;case"socketIOMessageSent":null==(O=B.socketIOMessageSent)||O.call(B,a);break;default:N.runnerHandler.delete(t)}}),(a||(a={})).createRunner=async function e(e,t){let{ipc:i,messagePort:a,isWebSocket:r,useUtilityProcessIfEnabled:u}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(await o.baseContainer.getItems(e=>Object.keys(e).map(t=>e[t])),await d.sdkContainer.getItems(e=>Object.keys(e).map(t=>e[t])),await c.utilsContainer.getItems(e=>Object.keys(e).map(t=>e[t])),!l.xl)if(5===(0,n.Ap)().getCurrentAgentId()||r)return T(e,t);else return k(e,t);return u&&"true"===localStorage.getItem(s.zI)?new N(e,t):a?new S(e,t,a):new w(e,t,i)}},857499:function(e,t,i){"use strict";i.d(t,{d:()=>r,e:()=>l});var a=i(551105),n=i(496411);let l=(0,i(325475).vt)((e,t)=>({datasetMap:new Map,activeDataMap:new Map,getActiveData:e=>t().activeDataMap.get(e),setActiveData(i,a){let n=new Map(t().activeDataMap);n.set(i,a),e({activeDataMap:n})},getDataset:e=>t().datasetMap.get(e),async fetchDataset(i){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,n.U3)(),r=new Map(t().datasetMap),{data:s}=await (0,a.P)(i,l);r.set(i,s),e({datasetMap:r})},clearActiveData(i){let a=new Map(t().activeDataMap);a.delete(i),e({activeDataMap:a})},clearDataset(i){let a=new Map(t().datasetMap),n=new Map(t().activeDataMap);a.delete(i),n.delete(i),e({datasetMap:a,activeDataMap:n})},async duplicateTestDataset(e,i){await (0,a.YW)(e,i),await t().fetchDataset(e)},async deleteTestDataset(e,i){await (0,a.TF)(e,i),await t().fetchDataset(e)},async reorderTestDataset(e,i){await (0,a.Yb)(e,i),await t().fetchDataset(e)}})),r=l.getState},957705:function(e,t,i){"use strict";i.d(t,{$V:()=>x,A7:()=>f,Ay:()=>b,Uo:()=>g,XJ:()=>A,bV:()=>h,cG:()=>y,dq:()=>m,eq:()=>j,xz:()=>v});var a=i(740565),n=i(203517),l=i(69712),r=i(929463),s=i(325475),o=i(515875),d=i(186689),c=i(781875);let u={docs:[],docMap:{},allDocTags:[]},p=(0,s.vt)((e,t)=>({...u,saveDocs:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=[],a={};t.forEach(e=>{a[e.id]=e,Array.isArray(e.tags)&&(i=i.concat(e.tags))}),e({docs:t,docMap:a,allDocTags:[...new Set(i)]})},saveUpsert:i=>{let{docMap:a,allDocTags:n}=t();if(null==i?void 0:i.id){let t={...a},l=[...n,...i.tags];t[i.id]=i,e({docMap:t,docs:Object.values(t),allDocTags:[...new Set(l)]})}},saveDeleted:i=>{if(i){let{docMap:a}=t(),n={...a};delete n[i],e({docMap:n,docs:Object.values(n)})}},reset:()=>e(u)})),m=async()=>{var e;let t=await (0,o.n_)();return p.getState().saveDocs(null!=(e=t.data)?e:[]),t},h=async(e,t)=>{let i=await (0,o.RD)(e,t);return p.getState().saveUpsert(i.data),i},v=async e=>{let t=await (0,o.vt)(e);return t.data&&p.getState().saveUpsert(t.data),t},f=async(e,t)=>{let i=await (0,o.yo)(e,t);return i.data&&(p.getState().saveUpsert(i.data),(e=>{let t=(0,l.Xr)();if(!t)return;let i=(0,n.v)("doc",e);t({type:c.yc,payload:i})})(i.data)),i},g=async e=>{let t=await (0,o.ot)(e);return t.data&&p.getState().saveUpsert(t.data),t},y=async e=>{let t="deleteDoc",i=r.Ay.loading({content:"Loading...",duration:0,key:t});try{let i=await (0,o.g5)(e);return p.getState().saveDeleted(e),r.Ay.success({content:(0,a.hw)({id:"message.movedToTrash"}),key:t}),(0,c.tX)(),i}catch(e){r.Ay.error({content:(0,a.hw)({id:"message.deleteFailure"}),key:t})}finally{i()}},x=async e=>{let t=r.Ay.loading({content:"Loading...",duration:0});try{let t=await (0,o.ru)(e);return r.Ay.success((0,a.hw)({id:"saved"})),(0,d.RV)({dataId:e.id}),h(e.id),(0,c.tX)(),t}catch(e){throw e}finally{t()}};function A(e){return e.sidebarTitle||e.name}let j=p.getState,b=p},291341:function(e,t,i){"use strict";i.d(t,{M:()=>a});let a=(0,i(325475).vt)((e,t)=>({activeMenuMap:new Map,activeCommentIdMap:new Map,getActiveMenu:e=>e?t().activeMenuMap.get(e):void 0,getActiveCommentId:e=>e?t().activeCommentIdMap.get(e):void 0,addActiveMenu(i,a){let n=new Map(t().activeMenuMap);n.set(i,a),e({activeMenuMap:n})},addActiveCommentId(i,a){let n=new Map(t().activeCommentIdMap);n.set(i,a),e({activeCommentIdMap:n})},removeActiveMenu(i){let a=new Map(t().activeMenuMap);a.delete(i),e({activeMenuMap:a})},removeActiveCommentId(i){let a=new Map(t().activeCommentIdMap);a.delete(i),e({activeCommentIdMap:a})}}))},405194:function(e,t,i){"use strict";i.d(t,{I:()=>n});var a=i(174177);let n=(0,i(325475).vt)((e,t)=>({teamProjectRoleMap:new Map,organizationProjectRoleMap:new Map,queryProjectRoleListByTeamId:async i=>{let n=await (0,a.xk)(i);if(n.success){let a=n.data||[];e({teamProjectRoleMap:new Map(t().teamProjectRoleMap).set(i,a)})}return n},queryProjectRoleListByOrganizationId:async i=>{let n=await (0,a.jA)(i);if(n.success){let a=n.data||[];e({organizationProjectRoleMap:new Map(t().organizationProjectRoleMap).set(i,a)})}return n}}))},427098:function(e,t,i){"use strict";i.d(t,{f:()=>l,n:()=>r});var a=i(747752),n=i(398380);let l=(0,i(325475).vt)(e=>({defaultCategoryId:void 0,list:[],map:{},queryList:async()=>{var t;let i=await (0,a.mY)().then(e=>e.data||[]);return e({list:i,map:(0,n.keyBy)(i,"id"),defaultCategoryId:null==(t=i[0])?void 0:t.id}),i}})),r=l.getState},982668:function(e,t,i){"use strict";i.d(t,{H:()=>r,J:()=>l});var a=i(981418),n=i(398380);let l=(0,i(325475).vt)(e=>({list:[],map:{},queryList:async()=>{let t=await (0,a.In)().then(e=>e.data||[]);return e({list:t,map:(0,n.keyBy)(t,"id")}),t}})),r=l.getState},622290:function(e,t,i){"use strict";i.d(t,{F:()=>s,s:()=>r});var a=i(843212),n=i(744283),l=i(850646);let r=(0,i(325475).vt)(e=>({treeList:void 0,loadTreeList:async()=>{let{hasPermission:t}=(0,a.Z)(n.o.ENDPOINT_REQUEST_READ);if(!t)return void e({treeList:[]});let i=await (0,l.Ay)("/api/v1/request-tree-list");e({treeList:(null==i?void 0:i.data)||[]})}})),s=r.getState},85212:function(e,t,i){"use strict";i.d(t,{LP:()=>d,WU:()=>o,ao:()=>c});var a=i(914149),n=i(61898),l=i(496411),r=i(850646),s=i(641486);let o=(0,i(325475).vt)((e,t)=>({disableForCall:!1,initialized:!1,data:[],setRequestProxyAgents:t=>{e({data:t,initialized:!0})},getRequestProxyAgents:async e=>{let{data:i,initialized:a}=t();if(a&&!e)return i;try{let e=await (0,n.Ee)();return t().setRequestProxyAgents(e),e}catch(e){return console.log("getRequestProxyAgents error:",e),[]}},getRequestProxyAgentMapForCall:async e=>{let i=(0,a.Ap)().getAgentId(),n=t().disableForCall?{}:Object.fromEntries((await t().getRequestProxyAgents(e)).map(e=>[e.id,{id:e.id,name:e.name,server:e.server,authorization:e.accessToken,originId:i}])),s=(0,a.Ap)().getCurrentAgentId(),o=(0,r.i9)();return o&&(n[0]={id:0,name:"Cloud Proxy",server:o,authorization:(0,l.iD)(),originId:i}),n[s]&&(n[2]=n[s]),n},setDisableForCall:t=>(e({disableForCall:t}),t)})),d=o.getState;function c(){let e=o(e=>e.getRequestProxyAgents),t=o(e=>e.initialized),i=o(e=>e.data);return(0,s.useEffect)(()=>{t||e()},[t]),[i,t]}},87120:function(e,t,i){"use strict";i.d(t,{O:()=>s});var a=i(961830),n=i(496411),l=i(325475);let r=(e,t)=>`${e||""}-${null!=t?t:0}`,s=(0,l.vt)((e,t)=>{var i,l;return{resourceUsageMap:new Map,fetchTeamResourceUsage:async function(l){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null!=(i=(0,n.Sy)())?i:0,o=t().getTeamResourceUsage(l,s);if(o)return o;let d=r(l,s),c=await (0,a.JE)(l,s);return e(e=>{let t=new Map(e.resourceUsageMap);return t.set(d,c),{resourceUsageMap:t}}),c},getTeamResourceUsage:function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null!=(l=(0,n.Sy)())?l:0,a=r(e,i);return t().resourceUsageMap.get(a)}}})},94222:function(e,t,i){"use strict";let a;i.d(t,{CH:()=>c,jV:()=>d});var n=i(341428),l=i(496411),r=i(402735),s=i(718180),o=i(325475);let d=()=>{let e;if(a)return a;return e={},a=(0,r.y)({persist:!1})((t,i)=>({...e,setStateFunc:e=>{t(t=>{Object.keys(e).forEach(i=>{t[i]=e[i]})})},querySeoInfoByProjectId:async()=>{let e=(0,l.MJ)()||0,i=await (0,n.P_)(e);t(e=>{e.records=i.data})}}))},c=()=>{let e=d();return(0,s.A)(()=>{e.getState().querySeoInfoByProjectId()}),(0,o.Pj)(e)}},414886:function(e,t,i){"use strict";i.d(t,{JI:()=>r,UC:()=>s,Z2:()=>o});var a=i(325475);let n={defaultSize:270,minSize:0,collapseSize:100,minExpandSize:240,maxSize:800};function l(e,t){let i=t;try{let t=localStorage.getItem(e);null!==t&&(i=JSON.parse(t))}catch{}return[i,t=>localStorage.setItem(e,JSON.stringify(t))]}let r=(0,a.vt)(e=>{let[t,i]=l("mainLayout.sideCollapsed",!1),[a,r]=l("mainLayout.sideWidth",n.defaultSize);return{sideLayoutOptions:n,sideCollapsed:t,sideExpandWidth:a,setSideCollapsed:t=>{e({sideCollapsed:t}),i(t)},setSideExpandWidth:t=>{e({sideExpandWidth:t}),r(t)}}}),s=r.getState;function o(){return r(e=>{let{sideCollapsed:t,sideExpandWidth:i}=e;return t?n.minSize:i})}},828597:function(e,t,i){"use strict";i.d(t,{i:()=>s,x:()=>o});var a=i(201951),n=i(496411),l=i(69712),r=i(398380);let s=(0,i(325475).vt)((e,t)=>({activeCiConfigMap:new Map,testCiConfigMap:new Map,getActiveCiConfig:e=>t().activeCiConfigMap.get(e),setActiveCiConfig(i,a){let n=new Map(t().activeCiConfigMap);n.set(i,a),e({activeCiConfigMap:n})},getTestCiConfigList(e){var i;return null==(i=t().testCiConfigMap.get(e))?void 0:i.list},getIsNewTestCiConfig(e){var i;return null==(i=t().testCiConfigMap.get(e))?void 0:i.isNew},setIsNewTestCiConfig(i,a){let n=new Map(t().testCiConfigMap),l=n.get(i);l&&(n.set(i,{list:l.list,isNew:a}),e({testCiConfigMap:n}))},clearCiConfig(i){let a=new Map(t().activeCiConfigMap),n=new Map(t().testCiConfigMap);a.delete(i),n.delete(i),e({activeCiConfigMap:a,testCiConfigMap:n})},async fetchCiConfigList(i){var s,o;let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,n.sI)(),{data:c}=await (0,a.P)(i,d),{environmentMap:u}=(0,l.Gu)().environment;c&&u&&c.forEach(e=>{var t;e.options||(e.options={});let{environmentId:i}=e.options;i&&(null==(t=u[i])?void 0:t.name)?e.options.environmentName=u[i].name:e.options.environmentDeleted=!0});let p=new Map(t().testCiConfigMap);p.set(i,{list:c,isNew:null!=(o=null==(s=p.get(i))?void 0:s.isNew)?o:(0,r.isEmpty)(c)}),e({testCiConfigMap:p})},async createCiConfig(e){let{data:i}=await (0,a.vt)(e);return i.isNew=!0,await t().fetchCiConfigList(e),i},async deleteCiConfig(e,i){await (0,a.TF)(i),await t().fetchCiConfigList(e)},async reorderCiConfig(e,i){await (0,a.Yb)(e,i),await t().fetchCiConfigList(e)}})),o=s.getState},375302:function(e,t,i){"use strict";i.d(t,{B:()=>r,M:()=>s});var a=i(325475);let n={visible:!0},l={visible:!1},r=(0,a.vt)(e=>({testScenarioFromModelData:l,openTestScenarioFromModel(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;t instanceof Event?e({testScenarioFromModelData:n}):e({testScenarioFromModelData:{...t,visible:!0}})},hideTestScenarioFromModel(){e({testScenarioFromModelData:l})},testSuiteFromModelData:l,openTestSuiteFromModal(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;e({testSuiteFromModelData:{...t,visible:!0}})},hideTestSuiteFromModal(){e({testSuiteFromModelData:l})},testDataFromModelData:l,testInstanceFromModelData:l,openTestInstanceFromModel(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;t instanceof Event?e({testInstanceFromModelData:n}):e({testInstanceFromModelData:{...t,visible:!0}})},hideTestInstanceFromModel(){e({testInstanceFromModelData:l})},renameFromModelData:l,openRenameModelFormModel(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;t instanceof Event?e({renameFromModelData:n}):e({renameFromModelData:{...t,visible:!0}})},hideRenameModelFormModel(){e({renameFromModelData:l})},moveToModalData:void 0,openMoveToModal(t){e({moveToModalData:t})},hideMoveToModal(){e({moveToModalData:void 0})},testScenarioExportModelData:void 0,openTestScenarioExportModel(t){e({testScenarioExportModelData:t})},hideTestScenarioExportModel(){e({testScenarioExportModelData:void 0})},environmentAssociationModalData:void 0,openEnvironmentAssociationModal(t){e({environmentAssociationModalData:t})},hideEnvironmentAssociationModal(){e({environmentAssociationModalData:void 0})},testScenarioForkModalData:l,openTestScenarioForkModal(){e({testScenarioForkModalData:n})},hideTestScenarioForkModal(){e({testScenarioForkModalData:l})},testScenarioMergeModalData:l,openTestScenarioMergeModal(t){e({testScenarioMergeModalData:{...t,visible:!0}})},hideTestScenarioMergeModal(t){e({testScenarioMergeModalData:{...t,visible:!1}})},curlImportModalData:void 0,openCurlImportModal(t){e({curlImportModalData:t})},hideCurlImportModal(){e({curlImportModalData:void 0})},blockBindModalData:void 0,openBlockBindModal(t){e({blockBindModalData:t})},hideBlockBindModal(){e({blockBindModalData:void 0})},apiImportModalData:void 0,openApiImportModal(t){e({apiImportModalData:t})},hideApiImportModal(){e({apiImportModalData:void 0})},testScenarioStepImportModalData:void 0,openTestScenarioStepImportModal(t){e({testScenarioStepImportModalData:t})},hideTestScenarioStepImportModal(){e({testScenarioStepImportModalData:void 0})},testScenarioImportModalData:void 0,openTestScenarioImportModal(t){e({testScenarioImportModalData:t})},hideTestScenarioImportModal(){e({testScenarioImportModalData:void 0})},folderCreateModalData:void 0,openFolderCreateModal(t){e({folderCreateModalData:t})},hideFolderCreateModal(){e({folderCreateModalData:void 0})},testScheduleTaskFormModalData:l,openTestScheduleTaskFormModal(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;e({testScheduleTaskFormModalData:{...t,visible:!0}})},hideTestScheduleTaskFormModal(){e({testScheduleTaskFormModalData:l})}})),s=r.getState},334821:function(e,t,i){"use strict";i.d(t,{Nw:()=>y,gK:()=>g});var a=i(871632),n=i(813347),l=i(642575),r=i(681081),s=i(78289),o=i(631890),d=i(864230),c=i(232821),u=i(496411),p=i(237887),m=i(398380),h=i(325475);function v(e){let t;return(0,d.y)(e,e=>{(0,p.m)(e.originalProjectId)&&(t="PROJECT")}),t}let f={id:0,name:"",description:"",folderId:0,priority:0,projectId:0,creatorId:0,createdAt:"",updatedAt:"",steps:[],preProcessors:[],postProcessors:[],tags:[],options:n.V,performanceTestOptions:a.W,notificationOptions:r.zk,editorId:0,needUpgrade:!1,initialized:!1,saving:!1,selectedIdSet:new Set,modifyingKeys:new Set,...(0,o.AM)([])},g=(0,h.vt)((e,t)=>{function i(i){let a=new Map(t().testScenarioStateMap);i(a),e({testScenarioStateMap:a})}return{testScenarioStateMap:new Map,hasTestScenarioState:e=>void 0!==e&&t().testScenarioStateMap.has(e),getTestScenarioState(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t().testScenarioStateMap.get(e)||f},getBlock:(e,i)=>t().getTestScenarioState(e).blockMap.get(i),initTestScenario(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{defaultSelectAll:!0},r={...f,...e,initialized:!0,needUpgrade:!1,selectedIdSet:new Set,modifyingKeys:new Set,options:{...n.V,...(0,m.omitBy)(e.options,m.isNil)},performanceTestOptions:{...a.W,...(0,m.omitBy)(e.performanceTestOptions,m.isNil)}};try{let{blockMap:t,blockRoot:i}=(0,o.AM)(e.steps,void 0,e.id);r.blockMap=t,r.blockRoot=i,(null==l?void 0:l.defaultSelectAll)&&i.containIds.forEach(e=>r.selectedIdSet.add(e)),r.externalAssociationType=v(e.steps)}catch(a){if((null==a?void 0:a.message)===o.oS){r.needUpgrade=!0,i(e=>e.set(r.id,r));return}if((null==a?void 0:a.message)===o._t){console.error(a),(0,d.E)(e.steps),t().initTestScenario(e,l);return}throw a}i(e=>e.set(r.id,r))},replaceTestScenarioById(e,r,s){let o=t().getTestScenarioState(e);if(o===f)return;let d={...o,...r};(null==s?void 0:s.replaceAllFields)&&(d.options=n.V,d.performanceTestOptions=a.W,d.notificationOptions=l.l),i(t=>t.set(e,d))},updateTestScenario(e,a){let n=t().getTestScenarioState(e.id);if(n===f)return;let l=e.options?{...n.options,...e.options}:n.options,r={...n,...e,options:l};if(a){let{blockMap:t,blockRoot:i}=(0,o.AM)(a,r.blockMap,e.id);r.blockMap=t,r.blockRoot=i,r.externalAssociationType=v(a)}i(e=>e.set(r.id,r))},refreshTestScenario(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,u.U3)();t().updateTestScenario({id:e,initialized:!1}),(0,c.xj)(e,i).then(e=>{t().initTestScenario(e.data)})},clearTestScenarioBlock(e){(0,m.isUndefined)(e)?i(e=>{e.forEach(e=>{let{blockMap:t}=e;return t.forEach(e=>e.clearBlock())}),e.clear()}):i(t=>{let i=t.get(e);i&&(i.blockMap.forEach(e=>e.clearBlock()),t.delete(e))})}}}),y=g.getState;s.A.initRenderer(function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];let e=arguments.length>1?arguments[1]:void 0,{updateTestScenario:t}=y();t({id:e.testScenarioId},e.getChildrenConfigs())})},743238:function(e,t,i){"use strict";i.d(t,{k:()=>o,v:()=>s});var a=i(813347),n=i(276764),l=i(325475);let r={id:-1,name:"",token:"",options:a.V,ordering:0,testScenarioId:-1,ciConfigId:-1},s=(0,l.vt)((e,t)=>{function i(i){let a=new Map(t().testScenarioInstanceStateMap);i(a),e({testScenarioInstanceStateMap:a})}return{testScenarioInstanceStateMap:new Map,getTestScenarioInstanceState:e=>t().testScenarioInstanceStateMap.get(e)||r,async updateTestScenarioInstance(e,a,l){let s=t().getTestScenarioInstanceState(a);await (0,n.yo)(e,a,l),s!==r&&i(e=>{e.set(a,{...s,...l})})},initTestScenarioInstance(e){i(t=>t.set(e.id,e))},clearTestScenarioInstance(e){i(t=>t.delete(e))}}}),o=s.getState},353748:function(e,t,i){"use strict";i.d(t,{HI:()=>u,g0:()=>p,j$:()=>c});var a,n=i(987016),l=i(603240),r=i.n(l),s=i(398380),o=i(325475),d=i(660464),c=((a={}).PIN="pin",a.RESIDENT="resident",a.UNSTABLE="unstable",a);let u=(0,o.vt)((e,t)=>({activeKey:"",tabPanes:[],moveTabs(i,a){let{tabPanes:n}=t(),l="pin"===n[i].state;l===("pin"===n[a].state)&&e({tabPanes:r()(n,i,a)})},setActiveKey(i){t().activeKey!==i&&(e({activeKey:i}),(0,d.ZF)().setSelectedKey([i],!0))},setTab(i){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[...t().tabPanes],l=n.findIndex(e=>e.key===i);!n[l]||(0,s.isMatch)(n[l],a)||(n[l]={...n[l],...a},e({tabPanes:n}))},getTab:e=>t().tabPanes.find(t=>t.key===e),replaceTab(i,a){let n=[...t().tabPanes],l=n.findIndex(e=>e.key===i);if(-1===l)return t().openTab(a);let{key:r,tab:s,content:o,state:d="unstable"}=a;n[l]={tab:s,content:o,key:r,state:d},e({tabPanes:n,activeKey:r})},openTab(i,a){var n;let{tabPanes:l,activeKey:r,setActiveKey:o}=t(),{appendToNext:d=!1}=null!=a?a:{},c=i.key,u=-1,p=-1,m=-1,h=-1;for(let e=0;e<l.length;e++){let t=l[e];t.key===r&&(m=e),t.key===c&&(p=e),"pin"===t.state&&(h=e),"unstable"===t.state&&(u=e)}let v=[...l],f={...v[p],...i,state:i.state||(null==(n=v[p])?void 0:n.state)||"unstable"};if(p>-1)return void o(c);if("unstable"===f.state&&u>-1)v.splice(u,1,f);else if(m>-1){let e=d?Math.max(h+1,m+1):l.length;v.splice(e,0,f)}else v.push(f);e({tabPanes:v.filter(e=>!(0,s.isNull)(e))}),o(c)},closeTab(i){let{activeKey:a,tabPanes:n,setActiveKey:l}=t(),r=n.findIndex(e=>e.key===i);if(-1!==r){if(a===i){var s,o;l((null==(s=n[r-1])?void 0:s.key)||(null==(o=n[r+1])?void 0:o.key)||"")}n.splice(r,1),e({tabPanes:[...n]})}},closeTabs(i){let{activeKey:a,tabPanes:n,setActiveKey:l}=t(),r=a,s=new Map;for(let e of(n.forEach((e,t)=>s.set(e.key,t)),i)){let t=s.get(e);if(void 0!==t){if(a===e){var o,d;r=(null==(o=n[t-1])?void 0:o.key)||(null==(d=n[t+1])?void 0:d.key)||""}n.splice(t,1)}}r!==a&&l(r),e({tabPanes:[...n]})},closeCurrentTab(){let{activeKey:e,closeTab:i}=t();i(e)},closeAllTab(){let{activeKey:i,tabPanes:a,setActiveKey:n}=t(),l=a.filter(e=>"pin"===e.state),r=l.some(e=>e.key===i)?i:l.length>0?l[l.length-1].key:"";e({tabPanes:l}),r!==i&&n(r)},closeAnotherAllTab(){var i;let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t().activeKey,{tabPanes:n}=t(),l=n.filter(e=>e.key===a||"pin"===e.state),r=null==(i=l.find(e=>e.key===a))?void 0:i.key;e({tabPanes:l}),r&&t().setActiveKey(r)},switchTabByFn(e){let{tabPanes:i,setActiveKey:a}=t(),n=i.length;0===n||(9===e?a(i[n-1].key):e in i&&a(i[e-1].key))},switchToNext(){let{activeKey:e,tabPanes:i,setActiveKey:a}=t(),n=i.findIndex(t=>t.key===e);if(!i[n])return;let l=(n+1)%i.length;a(i[l].key)},switchToPrevious(){let{activeKey:e,tabPanes:i,setActiveKey:a}=t(),n=i.findIndex(t=>t.key===e);if(!i[n])return;let l=(n+i.length-1)%i.length;a(i[l].key)},unstableTurnsResidentTab(){let{key:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{key:t().activeKey},i=t().tabPanes,a=i.findIndex(t=>t.key===e),n=i[a];!n||["resident","pin"].includes(n.state)||t().setTab(e,{state:"resident"})},togglePinTab(i){let{tabPanes:a}=t(),n=a.findIndex(e=>e.key===i),l=a[n];if(l)if("pin"!==l.state)l.state="pin",e({tabPanes:r()(a,n,0)});else{let t=a.findIndex(e=>"pin"!==e.state),i=-1===t?a.length-1:t-1;l.state="resident",e({tabPanes:r()(a,n,i)})}},setTestTabs(t){let{activeKey:i=""}=t;e(t),(0,d.ZF)().setSelectedKey([i],!0)}})),p=u.getState,{setActiveKey:m,setTabList:h}=(0,n.l1)();u.subscribe((e,t)=>{e.activeKey!==t.activeKey&&m(e.activeKey),e.tabPanes!==t.tabPanes&&h(e.tabPanes.map(e=>e.key))})},660464:function(e,t,i){"use strict";i.d(t,{TQ:()=>C,q5:()=>p.q5,wg:()=>T,Ck:()=>N,XS:()=>p.XS,Kk:()=>I,ZF:()=>k,sc:()=>p.sc,RO:()=>p.RO});var a,n=i(843212),l=i(744283),r=i(530940),s=i(2183),o=i(740565),d=i(622754);function c(e,t){var i;let{rootKey:a,folderType:n}=t,l=(0,d.d)((null==(i=e.find(e=>e.key===a))?void 0:i.children)||[],e=>n===e.type?{value:e.key,label:e.name,children:e.children}:void 0);return[{value:a,label:(0,o.hw)({id:"defaultFolder"}),children:l}]}var u=i(357603),p=i(449104),m=i(850646);async function h(e){let{projectId:t,projectModuleId:i,folderId:a}=e;return m.Ay.get(`/api/v1/projects/${t}/endpoint-statistics`,{params:{projectModuleId:i,folderId:a}})}var v=i(520787),f=i(934429),g=i(490401),y=i(496411),x=i(689368),A=i(69712),j=i(398380),b=i(325475),w=i(482106);let S="BREAK";function C(e,t){var i;t(e)!==S&&(null==(i=e.children)||i.forEach(e=>C(e,t)))}var I=((a={})[a.ALL=0]="ALL",a[a.SELF=1]="SELF",a);let N=(0,b.vt)((e,t)=>({treeNodeMap:new Map,treeData:[r.wk,r.Vw],testScenarios:[],testScenarioFolders:[],testScenarioFolderCascaderOptions:[],testSuiteFolderCascaderOptions:[],testEndpointFolderCascaderOptions:[],testDataFolderCascaderOptions:[],maxExternalAssociationTestScenarioCount:0,remainingExternalAssociationTestScenarioCount:0,treeReady:!1,hiddenTestScenarioInstance:!1,allTags:[],allTestSuiteTags:[],setTreeData(t){let i=new Map;(0,d.J)(t,e=>{i.set(e.key,e)}),e({treeData:(0,j.orderBy)(t,e=>e.ordering),treeNodeMap:i})},async fetchTree(){(0,u.buildTestTree)([r.wk,r.Vw],{},{enableForkAndMerge:(0,s.Lz)()});let{hasPermission:i}=(0,n.Z)(l.o.TEST_SCENARIO_READ_EXEC_FT);if(!i){t().setTreeData(t().treeData.filter(e=>e.key!==p.RO)),e({treeReady:!0});return}let{data:a}=await (0,v.vm)();if(!a)return;let{testScenarios:o,testScenarioFolders:d,testScenarioInstances:m,maxExternalAssociationTestScenarioCount:h,remainingExternalAssociationTestScenarioCount:f}=a||{};(0,u.buildTestTree)([r.EI],a,{enableForkAndMerge:(0,s.Lz)(),handleTestScenarioRootChildren:e=>Array.isArray(e)&&0===e.length?[(0,A.Go)(r.z1)]:e});let g=[];null==o||o.forEach(e=>{e.tags&&g.push(...e.tags)});let x=c([r.EI],{rootKey:p.RO,folderType:"testScenarioFolder"}),b=t().treeData.find(e=>"testScenarioRoot"===e.type)?[...t().treeData]:[...t().treeData,r.EI];t().setTreeData(b),e({testScenarioFolderCascaderOptions:x,treeReady:!0,hiddenTestScenarioInstance:0===m.length||!(0,y.SA)(),maxExternalAssociationTestScenarioCount:h,remainingExternalAssociationTestScenarioCount:f,allTags:(0,j.uniq)(g),testScenarios:o,testScenarioFolders:d})},async fetchEndpointTestTree(){if(!(0,y.SA)())return void t().setTreeData(t().treeData.filter(e=>e.key!==p.pg));let i=await h({projectId:(0,y.MJ)()||0}).then(e=>e.data).catch(()=>[]),a=w.IA.getState().projectModuleList||[],n=(0,x.DA)(e=>e.apiDetail.treeList)||[],l=[],c=[];(0,d.J)(n,e=>{"apiDetailFolder"===e.type?c.push((0,j.cloneDeep)(e.folder)):"apiDetail"===e.type&&l.push((0,j.cloneDeep)(e.api))}),(0,u.buildTestTree)([r.Iy],{endpoints:l,endpointFolders:c,modules:a,endpointStatistics:i},{enableForkAndMerge:(0,s.Lz)()});let m=function(e,t){let i=e.find(e=>e.key===t);if(!(null==i?void 0:i.children))return[];let a=(0,d.d)(i.children,e=>{if("projectModule"===e.type||"endpointFolder"===e.type)return{value:e.key,label:e.name,children:e.children}});return[{value:t,label:(0,o.hw)({id:"defaultFolder"}),children:a}]}([r.Iy],p.pg),v=t().treeData.find(e=>"endpointRoot"===e.type)?[...t().treeData]:[...t().treeData,r.Iy];t().setTreeData(v),e({testEndpointFolderCascaderOptions:m})},async fetchTestScheduledTaskTree(){(0,u.buildTestTree)([r.wk,r.Vw],{},{enableForkAndMerge:(0,s.Lz)()});let{hasPermission:e}=(0,n.Z)(l.o.TEST_SCENARIO_READ_EXEC_FT),{hasPermission:i}=(0,n.Z)(l.o.TEST_SCHEDULED_READ_EXEC);if(!e||!i||!(0,y.SA)())return void t().setTreeData(t().treeData.filter(e=>e.key!==p.q5));(0,u.buildTestTree)([r.tL],{testScheduledTasks:[],testScheduledTaskFolders:[]},{enableForkAndMerge:(0,s.Lz)()});let a=t().treeData.find(e=>"TEST_SCHEDULED_TASK_ROOT"===e.type)?[...t().treeData]:[...t().treeData,r.tL];t().setTreeData(a)},async fetchTestSuiteTree(){let{hasPermission:i}=(0,n.Z)(l.o.TEST_SCENARIO_READ_EXEC_FT),{hasPermission:a}=(0,n.Z)(l.o.TEST_SCHEDULED_READ_EXEC);if(!i||!a||!(0,y.SA)()){t().setTreeData(t().treeData.filter(e=>e.key!==p.XS)),e({testSuiteFolderCascaderOptions:[],allTestSuiteTags:[]});return}let{data:o}=await (0,f.z)();if(!o)return;let m=[],h=[];(0,d.J)(o,e=>{"TEST_SUITE"===e.type?m.push(e.data):"TEST_SUITE_FOLDER"===e.type&&h.push(e.data)});let v=[];m.forEach(e=>{var t;(null==(t=e.tags)?void 0:t.length)&&v.push(...e.tags)}),(0,u.buildTestTree)([r.qy],{testSuites:m,testSuiteFolders:h},{enableForkAndMerge:(0,s.Lz)(),handleTestSuiteRootChildren:e=>Array.isArray(e)&&0===e.length?[(0,A.Go)(r.mb)]:e});let g=c([r.qy],{rootKey:p.XS,folderType:"TEST_SUITE_FOLDER"}),x=t().treeData.find(e=>"TEST_SUITE_ROOT"===e.type)?[...t().treeData]:[...t().treeData,r.qy];t().setTreeData(x),e({testSuiteFolderCascaderOptions:g,allTestSuiteTags:(0,j.uniq)(v)})},async fetchTestDataTree(){let{hasPermission:i}=(0,n.Z)(l.o.TEST_SCENARIO_READ_EXEC_FT),{hasPermission:a}=(0,n.Z)(l.o.TEST_SCHEDULED_READ_EXEC);if(!i||!a||!(0,y.SA)()){t().setTreeData(t().treeData.filter(e=>e.key!==p.sc)),e({testDataFolderCascaderOptions:[]});return}let{data:o}=await (0,g.j)();if(!o)return;let m=[],h=[];(0,d.J)(o,e=>{"TEST_DATA_SET"===e.type?m.push(e.data):"TEST_DATA_SET_FOLDER"===e.type&&h.push(e.data)}),(0,u.buildTestTree)([r.EH],{testData:m,testDataFolders:h},{enableForkAndMerge:(0,s.Lz)(),handleTestDataRootChildren:e=>Array.isArray(e)&&0===e.length?[(0,A.Go)(r.wP)]:e});let v=t().treeData.find(e=>"TEST_DATA_SET_ROOT"===e.type)?[...t().treeData]:[...t().treeData,r.EH],f=c([r.EH],{rootKey:p.sc,folderType:"TEST_DATA_SET_FOLDER"});t().setTreeData(v),e({testDataFolderCascaderOptions:f})},getNode:e=>t().treeNodeMap.get(e),getLastNewOrdering(e){var i;let a=t().getNode(e);return(e===p.R1&&(a=t().getNode(p.q5)),null==a||null==(i=a.children)?void 0:i.length)?Math.max(...a.children.map(e=>{var t;return null!=(t=e.ordering)?t:0}))+10:0},expandedKeys:[p.RO,p.q5,p.XS,p.sc,p.pg],expandNode(e,i){let{expandedKeys:a,treeNodeMap:n,setExpandKeys:l}=t(),r=n.get(e);if(!r)return;let s=[...a,p.RO,p.XS];1===i?s.push(e):0===i&&C(r,e=>{e.children&&e.children.length>0&&s.push(e.key)});let o=[p.RO,p.XS,p.q5,p.sc,p.pg];for(;r&&r.parentKey&&!o.includes(r.parentKey);)(r=n.get(r.parentKey))&&s.push(r.key);l(s)},collapseNode(e){let{expandedKeys:i,treeNodeMap:a,setExpandKeys:n}=t();if(!a.has(e))return;let l=[];C(a.get(e),t=>{if(t.key!==e){if(t.disableActionExpandable)return S;t.children&&l.push(t.key)}}),n((0,j.without)(i,...l))},setExpandKeys(t){e({expandedKeys:(0,j.uniq)(t)})},selectedKey:"",setSelectedKey(t){let[i]=t,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(!0===a||i)&&e({selectedKey:i})},setFilterTreeData(i,a){t().filterTreeData!==i&&(e({filterTreeData:i}),a&&t().setExpandKeys(a))}})),k=N.getState;function T(){return new Promise(e=>{k().treeReady&&e();let t=N.subscribe(i=>{let{treeReady:a}=i;a&&(e(),t())})})}},558910:function(e,t,i){"use strict";i.d(t,{__:()=>n,hz:()=>l});var a=i(641486);let n=(0,a.createContext)({}),l=()=>{let e=(0,a.useContext)(n);if(void 0===e)throw Error("useAiChatContext must be used within a AiChatContextProvider");return e}},104459:function(e,t,i){"use strict";i.d(t,{A:()=>C});var a=i(838e3),n=i(740565);let l="chatSender-gwTeRs",r="chatInput__inputBox-A65lQz",s="chatSender__actions-e_Xl6X",o="chatInput-hiydrG",d="aiModelSelect-cme1VR";var c=i(838487),u=i.n(c),p=i(820182);let m="chatInput-ip7ek4",h="textArea-f0_pEe",v=e=>{let{inputRef:t,className:i,...n}=e;return(0,a.jsx)(p.A.TextArea,{className:u()(m,h,i),ref:t,...n})};var f=i(385458),g=i(966121),y=i(222757),x=i(297965),A=i(140049),j=i(641486),b=i(301370),w=i(445524),S=i(558910);let C=e=>{let{className:t,chatInputProps:i,aiModelSelectProps:c,onSend:p}=e,{onSend:m,onStop:h,isSending:C,inputText:I,setInputText:N}=(0,S.hz)(),{inputRef:k,...T}=i||{},{className:M,...E}=c||{},_=(0,y.y)(e=>e.endpointId),{models:F,modelId:D,setModelId:R,modelsProcessor:O,labelRender:P,iconRender:L,teamId:$}=(0,w.r)({llmNodeType:"GENERATE_SCHEMA_OPTIMIZATION",persist:!0}),B=(0,A.A)(()=>{null==h||h()}),z=(0,j.useMemo)(()=>null==I?void 0:I.trim(),[I]),U=(0,A.A)(()=>{if(C()||!z)return;null==N||N("");let e=p||m;null==e||e(z),(0,x.B)("ai_modify_start_result",{apiId:_})}),H=(0,A.A)(e=>{e.shiftKey||(e.preventDefault(),U())}),V=(0,A.A)(()=>{var e;null==k||null==(e=k.current)||e.focus()});return(0,j.useEffect)(()=>{V()},[V]),(0,a.jsxs)("div",{className:u()(l,t),children:[(0,a.jsx)("div",{className:r,children:(0,a.jsx)(v,{inputRef:k,rows:2,bordered:!1,className:o,value:I,onChange:e=>null==N?void 0:N(e.target.value),onPressEnter:H,placeholder:(0,n.hw)({id:"ai.chatPopover.instructAIHowToModify"}),...T})}),(0,a.jsxs)("div",{className:s,onClick:V,children:[(0,a.jsx)("div",{className:"truncate",children:(0,a.jsx)(b.A,{className:u()(d,M),models:F,teamId:$,value:null!=D?D:0,onChange:R,modelsProcessor:O,iconRender:L,labelRender:P,...E})}),(0,a.jsx)("div",{onClick:e=>e.stopPropagation(),children:C()?(0,a.jsx)(f.f,{onClick:B}):(0,a.jsx)(g.f,{disabled:!z,onClick:U})})]})]})}},829714:function(e,t,i){"use strict";i.d(t,{gL:()=>o});var a=i(740565),n=i(169508),l=i(81890);let r=["AddNameAndDescription","FillInNecessaryMockFields","TranslateAll"],s=["AddAllFieldsDescription","FillInNecessaryMockFields"],o=()=>{let e=(0,a.getUserLocale)(),t=![l.K4.ZH_CN,l.K4.ZH_TW].includes(e);return n.T0||t?s:r}},309994:function(e,t,i){"use strict";i.d(t,{A:()=>s});var a=i(838e3);let n={chatCommandBar:"chatCommandBar-UeOxSZ",disabled:"disabled-Y0Aj22",chatCommandBar_default:"chatCommandBar_default-wHMZqj",chatCommandBarDefault:"chatCommandBar_default-wHMZqj",chatCommandBar_primary:"chatCommandBar_primary-JfHHj0",chatCommandBarPrimary:"chatCommandBar_primary-JfHHj0",chatCommandBar_soft:"chatCommandBar_soft-kix6_V",chatCommandBarSoft:"chatCommandBar_soft-kix6_V","chatCommandBar_soft-primary":"chatCommandBar_soft-primary-bwD_j1",chatCommandBarSoftPrimary:"chatCommandBar_soft-primary-bwD_j1"};var l=i(838487),r=i.n(l);let s=e=>{let{theme:t,disabled:i,className:l,...s}=e;return(0,a.jsx)("div",{className:r()(n.chatCommandBar,n[`chatCommandBar_${t}`],i&&n.disabled,l),...s})}},722619:function(e,t,i){"use strict";i.d(t,{A:()=>a});let a=(0,i(641486).createContext)({})},209034:function(e,t,i){"use strict";i.d(t,{y:()=>n});var a=i(838e3);let n=e=>(0,a.jsxs)("svg",{version:"1.1",id:"L4",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 40 60 16","enable-background":"new 0 0 0 0",...e,children:[(0,a.jsx)("circle",{fill:"currentColor",stroke:"none",cx:"6",cy:"50",r:"6",children:(0,a.jsx)("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:"0.1"})}),(0,a.jsx)("circle",{fill:"currentColor",stroke:"none",cx:"26",cy:"50",r:"6",children:(0,a.jsx)("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:"0.2"})}),(0,a.jsx)("circle",{fill:"currentColor",stroke:"none",cx:"46",cy:"50",r:"6",children:(0,a.jsx)("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:"0.3"})})]})},868812:function(e,t,i){"use strict";i.d(t,{u:()=>f});var a=i(838e3),n=i(740565),l=i(941929),r=i(751455),s=i(140049),o=i(838487),d=i.n(o),c=i(458184),u=i(671466);let p="feedback-X63_oB",m="up-L6WxFN",h="down-sjQsyb";var v=i(203807);let f=e=>{let{title:t,className:i,onFeedback:o,recordId:f,...g}=e,[y,x]=(0,l.A)(g,{valuePropName:"feedbackType"}),{run:A}=(0,r.Ay)(e=>f?(0,v.jY)(f,e):Promise.resolve(),{manual:!0}),j="up"===y,b="down"===y,w=(0,s.A)(async e=>{e===y?(x(void 0),await A(0)):(x(e),await A("up"===e?1:-1)),null==o||o(e)});return(0,a.jsxs)("div",{className:d()(p,"truncate",i),children:[null!=t?t:(0,a.jsx)("div",{style:{fontSize:"var(--ui-font-size-sm)",fontWeight:"var(--ui-font-weight-400)",color:"var(--ui-text-color-secondary)"},children:(0,n.hw)({id:"ai.chatUI.feedback"})}),(0,a.jsxs)("div",{className:"flex items-center flex-shrink-0",children:[(0,a.jsx)(c.A,{type:"text",size:"small",icon:(0,a.jsx)(u.A,{type:j?"icon-LikeSolid":"icon-Like",size:12}),className:d()({[m]:j}),onClick:()=>w("up")}),(0,a.jsx)(c.A,{type:"text",size:"small",className:d()({[h]:b}),icon:(0,a.jsx)(u.A,{type:b?"icon-DislikeSolid":"icon-Dislike",size:12}),onClick:()=>w("down")})]})]})}},77448:function(e,t,i){"use strict";i.d(t,{A:()=>o});var a=i(838e3),n=i(838487),l=i.n(n),r=i(671466);i(641486);let s={solid:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfMTA2NV8yMTk5MDQpIj4KICAgIDxwYXRoCiAgICAgIGQ9Ik01LjI0MTIxIDMuMDYxNTJDNS40MjgyOCAyLjE0NjI4IDYuNzM1NzggMi4xNDYyOCA2LjkyMjg1IDMuMDYxNTJDNy4zMzYxIDUuMDgyODEgOC45MTYxNyA2LjY2MzAzIDEwLjkzNzUgNy4wNzYxN0MxMS44NTI3IDcuMjYzMjcgMTEuODUyNyA4LjU3MDc1IDEwLjkzNzUgOC43NTc4MUM4LjkxNjI0IDkuMTcxMDMgNy4zMzYwNiAxMC43NTAyIDYuOTIyODUgMTIuNzcxNUM2LjczNTY4IDEzLjY4NjUgNS40MjgzOCAxMy42ODY1IDUuMjQxMjEgMTIuNzcxNUM0LjgyNzk4IDEwLjc1MDQgMy4yNDg2MiA5LjE3MTEgMS4yMjc1NCA4Ljc1NzgxQzAuMzEyMzA1IDguNTcwNzUgMC4zMTIzMzQgNy4yNjMyNyAxLjIyNzU0IDcuMDc2MTdDMy4yNDg2OSA2LjY2Mjk1IDQuODI3OTQgNS4wODI2NSA1LjI0MTIxIDMuMDYxNTJaTTEwLjY2MTEgMS4yMzkyNkMxMC43MzAxIDAuOTAyMDYxIDExLjIxMjMgMC45MDIwNjEgMTEuMjgxMiAxLjIzOTI2QzExLjQzMzYgMS45ODM3MSAxMi4wMTUzIDIuNTY1NDcgMTIuNzU5OCAyLjcxNzc3QzEzLjA5NyAyLjc4NjY5IDEzLjA5NyAzLjI2ODk3IDEyLjc1OTggMy4zMzc4OUMxMi4wMTUzIDMuNDkwMjQgMTEuNDMzNSA0LjA3MTg0IDExLjI4MTIgNC44MTY0MUMxMS4yMTIzIDUuMTUzNiAxMC43MzAxIDUuMTUzNiAxMC42NjExIDQuODE2NDFDMTAuNTA4OSA0LjA3MTggOS45MjcyMSAzLjQ5MDE2IDkuMTgyNjIgMy4zMzc4OUM4Ljg0NTU0IDMuMjY4OTEgOC44NDU1NCAyLjc4Njc1IDkuMTgyNjIgMi43MTc3N0M5LjkyNzE1IDIuNTY1NTQgMTAuNTA4OCAxLjk4Mzc1IDEwLjY2MTEgMS4yMzkyNloiCiAgICAgIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcl8xMDY1XzIxOTkwNCkiIC8+CiAgPC9nPgogIDxkZWZzPgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDBfbGluZWFyXzEwNjVfMjE5OTA0IiB4MT0iMC41NDEwMTYiIHkxPSIzLjUzMTQ2IiB4Mj0iMTMuMTEwNSIgeTI9IjMuNzAxNzUiCiAgICAgIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI0U5NTZFOSIgLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIwLjcyIiBzdG9wLWNvbG9yPSIjRkY1ODVFIiAvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNGRkEzMDAiIC8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGNsaXBQYXRoIGlkPSJjbGlwMF8xMDY1XzIxOTkwNCI+CiAgICAgIDxyZWN0IHdpZHRoPSIxNCIgaGVpZ2h0PSIxNCIgZmlsbD0id2hpdGUiIC8+CiAgICA8L2NsaXBQYXRoPgogIDwvZGVmcz4KPC9zdmc+Cg==",line:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfNDg2MV85Njg5NjEpIj4KICAgIDxwYXRoCiAgICAgIGQ9Ik00Ljc5MTAyIDMuMzI0MjJDNS4xNzk5OSAyLjAxNjA1IDcuMTIwNTkgMi4wNTk4MSA3LjQwNjI1IDMuNDU1MDhMNy40Mzk0NSAzLjYwMjU0QzcuODA2OTIgNS4xMTEzNyA5LjAxMzY3IDYuMjggMTAuNTQzOSA2LjU5Mjc3TDEwLjY3NDggNi42MjVDMTEuOTQwOSA3LjAwMTQyIDExLjk0MDkgOC44MzE2MyAxMC42NzQ4IDkuMjA4MDFMMTAuNTQzOSA5LjI0MDIzQzkuMDEzNjMgOS41NTMwMyA3LjgwNjg4IDEwLjcyMTYgNy40Mzk0NSAxMi4yMzA1TDcuNDA2MjUgMTIuMzc3OUM3LjEyMDUgMTMuNzczIDUuMTgwMDcgMTMuODE2OCA0Ljc5MTAyIDEyLjUwODhMNC43NTg3OSAxMi4zNzc5QzQuNDQ2IDEwLjg0NzYgMy4yNzc0NSA5LjY0MDg2IDEuNzY4NTUgOS4yNzM0NEwxLjYyMjA3IDkuMjQwMjNDMC4xODEyMjMgOC45NDU2OCAwLjE4MTIyNSA2Ljg4NzM0IDEuNjIyMDcgNi41OTI3N0wxLjc2ODU1IDYuNTU5NTdDMy4yNzc0MyA2LjE5MjE3IDQuNDQ1OTUgNC45ODUzNSA0Ljc1ODc5IDMuNDU1MDhMNC43OTEwMiAzLjMyNDIyWk02LjA4MzAxIDMuNTQxOTlDNi4wMzI2OSAzLjU0MTk5IDUuOTkwNzkgMy41NTcwNCA1Ljk2Mzg3IDMuNTc3MTVDNS45NDc5MyAzLjU4OTE3IDUuOTI4MyAzLjYwODgyIDUuOTE0MDYgMy42NDU1MUw1LjkwMTM3IDMuNjg5NDVDNS40OTc3MyA1LjY2MzE2IDMuOTkxMDggNy4yMTk0OCAyLjA0NDkyIDcuNjkzMzZMMS44NTU0NyA3LjczNTM1QzEuNzg5IDcuNzQ4OTUgMS43NTkyMyA3Ljc3NjUyIDEuNzQzMTYgNy43OTc4NUMxLjcyMzE0IDcuODI0NzggMS43MDgwMSA3Ljg2NjgyIDEuNzA4MDEgNy45MTY5OUMxLjcwODE0IDcuOTY2OTMgMS43MjMxOSA4LjAwODM0IDEuNzQzMTYgOC4wMzUxNkMxLjc1OTI2IDguMDU2NDcgMS43ODkxMSA4LjA4NDA4IDEuODU1NDcgOC4wOTc2NkwyLjA0NDkyIDguMTM5NjVDMy45OTEwOSA4LjYxMzU2IDUuNDk3NzggMTAuMTY5OCA1LjkwMTM3IDEyLjE0MzZMNS45MTQwNiAxMi4xODc1QzUuOTI4MzIgMTIuMjI0MiA1Ljk0NzkzIDEyLjI0MzkgNS45NjM4NyAxMi4yNTU5QzUuOTkwNzkgMTIuMjc1OSA2LjAzMjc0IDEyLjI5MiA2LjA4MzAxIDEyLjI5MkM2LjEzMzMgMTIuMjkxOSA2LjE3NTMgMTIuMjc2IDYuMjAyMTUgMTIuMjU1OUM2LjIyMzQzIDEyLjIzOTggNi4yNTAwOSAxMi4yMDk3IDYuMjYzNjcgMTIuMTQzNkw2LjMwNTY2IDExLjk1NDFDNi43Nzk2MiAxMC4wMDc4IDguMzM2NjIgOC41MDExMiAxMC4zMTA1IDguMDk3NjZMMTAuMzUzNSA4LjA4NDk2QzEwLjM5MDIgOC4wNzA3MyAxMC40MDk4IDguMDUxMSAxMC40MjE5IDguMDM1MTZDMTAuNDQxOSA4LjAwODM0IDEwLjQ1NzkgNy45NjcwMSAxMC40NTggNy45MTY5OUMxMC40NTggNy44NjY3NSAxMC40NDE5IDcuODI0NzggMTAuNDIxOSA3Ljc5Nzg1QzEwLjQwOTkgNy43ODE5IDEwLjM5MDMgNy43NjIzMSAxMC4zNTM1IDcuNzQ4MDVMMTAuMzEwNSA3LjczNTM1QzguMzM2NjUgNy4zMzE5IDYuNzc5NjYgNS44MjUxMyA2LjMwNTY2IDMuODc4OTFMNi4yNjM2NyAzLjY4OTQ1QzYuMjUwMTIgMy42MjMyMyA2LjIyMzQ0IDMuNTkzMjYgNi4yMDIxNSAzLjU3NzE1QzYuMTc1MyAzLjU1Njk4IDYuMTMzMzUgMy41NDIwNyA2LjA4MzAxIDMuNTQxOTlaTTEwLjY2MTEgMS4yMzkyNkMxMC43MzAxIDAuOTAyMDYxIDExLjIxMjMgMC45MDIwNjEgMTEuMjgxMiAxLjIzOTI2QzExLjQzMzUgMS45ODM2NCAxMi4wMTU0IDIuNTY1MzkgMTIuNzU5OCAyLjcxNzc3QzEzLjA5NyAyLjc4NjY5IDEzLjA5NyAzLjI2ODk3IDEyLjc1OTggMy4zMzc4OUMxMi4wMTU0IDMuNDkwMzIgMTEuNDMzNCA0LjA3MTkgMTEuMjgxMiA0LjgxNjQxQzExLjIxMjMgNS4xNTM1OCAxMC43MzAxIDUuMTUzNiAxMC42NjExIDQuODE2NDFDMTAuNTA4OSA0LjA3MTc0IDkuOTI3MyAzLjQ5MDEgOS4xODI2MiAzLjMzNzg5QzguODQ1NjIgMy4yNjg4OCA4Ljg0NTY3IDIuNzg2ODQgOS4xODI2MiAyLjcxNzc3QzkuOTI3MTkgMi41NjU1OSAxMC41MDg4IDEuOTgzNzYgMTAuNjYxMSAxLjIzOTI2WiIKICAgICAgZmlsbD0idXJsKCNwYWludDBfbGluZWFyXzQ4NjFfOTY4OTYxKSIgLz4KICA8L2c+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXJfNDg2MV85Njg5NjEiIHgxPSIwLjU0MTAxNiIgeTE9IjMuNTMxNTMiIHgyPSIxMy4xMTA4IiB5Mj0iMy43MDE4MiIKICAgICAgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjRTk1NkU5IiAvPgogICAgICA8c3RvcCBvZmZzZXQ9IjAuNzIiIHN0b3AtY29sb3I9IiNGRjU4NUUiIC8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0ZGQTMwMCIgLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8Y2xpcFBhdGggaWQ9ImNsaXAwXzQ4NjFfOTY4OTYxIj4KICAgICAgPHJlY3Qgd2lkdGg9IjE0IiBoZWlnaHQ9IjE0IiBmaWxsPSJ3aGl0ZSIgLz4KICAgIDwvY2xpcFBhdGg+CiAgPC9kZWZzPgo8L3N2Zz4K"},o=e=>{let{className:t,size:i=14,colorful:n=!0,type:o="line",style:d,...c}=e;return n?(0,a.jsx)("img",{src:s[o],alt:"ai",className:l()("appicon app_icon",t),style:{...d,width:i,height:i}}):(0,a.jsx)(r.A,{type:"icon-AiStar",className:t,size:i,style:d,...c})}},445524:function(e,t,i){"use strict";let a;i.d(t,{r:()=>y});var n=i(838e3),l=i(641486),r=i(140049),s=i(751455),o=i(952811),d=i(649530),c=i(222618),u=i(930496),p=i(325475),m=i(385357),h=i(410054),v=i(674952);let f=(e,t)=>({modelIdRecord:{},getModelId:(e,i)=>{var a;return null!=(a=t().modelIdRecord[e])?a:i},setModelId:(t,i)=>{e(e=>({modelIdRecord:{...e.modelIdRecord,[t]:i}}))},reset:()=>{e({modelIdRecord:{}})}});function g(){return a?a:(a=(0,p.vt)((0,m.eh)((0,m.Zr)(f,{name:"ai.model.select"}))),h.A.on(v.e,()=>{null==a||a.getState().reset()}),a)}let y=e=>{let{llmNodeType:t,persist:i=!1}=e,{models:a,autoSelectedModelId:m,refresh:h,teamId:v}=(0,o.A)({llmNodeType:t}),{model:f,icon:y}=(0,d.S)({modelId:m,models:a}),[x,A]=(0,l.useState)(),j=(0,l.useMemo)(()=>v?`${t}-${v}`:t,[v,t]),b=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.b,i=g();return(0,p.Pj)(i,e,t)}(e=>e.getModelId(j)),w=i?b:x,S=null!=b?b:0,C=(0,r.A)(e=>{i?g().getState().setModelId(j,e):A(e)}),I=(0,l.useMemo)(()=>0===w?m:w,[w,m]),N=(0,r.A)(e=>Array.isArray(e)?[f].concat(e.filter(e=>e.enabled)):e),k=(0,r.A)((e,t)=>(null==t?void 0:t.isBackFill)?(0,n.jsx)("span",{className:"truncate",style:{color:"var(--ui-text-color-tertiary)",fontWeight:"var(--ui-font-weight-400)"},children:e.name}):(0,c.Sq)(e,t)),T=(0,r.A)((e,t)=>(null==t?void 0:t.isBackFill)?null:e.aiLlmModelId?(0,c.Rd)(e,t):(0,c.Rd)({...e,icon:y},t));return(0,s.Ay)(h,{cacheKey:`useAiModelSelect-${t}`,staleTime:(null==a?void 0:a.length)?6e4:1e3}),{models:a,modelId:w,finalModelId:I,setModelId:C,modelsProcessor:N,defaultModelId:S,autoSelectableIcon:y,autoSelectedModelId:m,labelRender:k,iconRender:T,teamId:v}}},797091:function(e,t,i){"use strict";i.d(t,{A:()=>I});var a=i(838e3),n=i(740565),l=i(262514),r=i(140049),s=i(838487),o=i.n(s),d=i(261024),c=i(671466),u=i(641486),p=i(923117),m=i(618487);let h=async()=>Promise.all([i.e("73034"),i.e("99484"),i.e("36243")]).then(i.bind(i,687476)),v=(0,m.dynamic)({loading:p.A,loader:async()=>{let{default:e}=await h();return e}}),f="pluginHeader-rOyFM6",g="pluginWrapper-USqCTP",y="content-M4HPMN",x="expandable-TgmtBf",A="thinking-dJh8Oy",j="collapseIcon-v1Cuep",b="collapseIconActive-sq3rOt",w="contentWrapper-r0U1pB",S="thinkingIcon-nfvMrR",C="thinking",I=e=>{let{scrollRef:t,wrapperClassName:i,wrapperStyle:s,headerClassName:p,contentClassName:m,contentStyle:h,className:I,reasoningContent:N,collapsed:k,onCollapseChange:T,autoCollapse:M=!0,autoScroll:E=!0,markdownRender:_}=e,{content:F,costTime:D,thinking:R}=N,[O,P]=(0,u.useState)(k?[]:[C]),L=(0,u.useRef)(!1),$=(0,u.useMemo)(()=>null==F?void 0:F.replace(/</g,"&lt;").replace(/>/g,"&gt;"),[F]),B=(0,r.A)(e=>{P(e),null==T||T(!(null==e?void 0:e.length))}),z=(0,r.A)(e=>{let{isActive:t}=e;return(0,a.jsx)(c.A,{size:12,className:o()(j,t&&b),type:"icon-down-md"})}),U=(0,u.useRef)(null);return(0,l.Rp)(null!=t?t:U,{auto:R&&!!F&&E}),(0,u.useEffect)(()=>{M&&!L.current&&(null==O?void 0:O.includes(C))&&!R&&F&&(B([]),L.current=!0)},[M,O,R,F,B]),(0,a.jsx)(d.A,{bordered:!1,expandIconPosition:"end",className:o()(g,i),style:s,activeKey:O,expandIcon:z,onChange:B,children:(0,a.jsx)(d.A.Panel,{className:o()(y,x,R&&A,I),showArrow:!0,header:(0,a.jsxs)("div",{className:o()(f,p),children:[(0,a.jsx)(c.A,{type:"icon-lightbulb",className:o()(S,R&&A)}),(0,a.jsx)("span",{children:R?(0,n.hw)({id:"ai.reasoning.thinking"}):(0,n.hw)({id:"ai.reasoning.complete"},{seconds:(D/1e3).toFixed()})})]}),children:(0,a.jsx)("div",{className:o()(w,m),ref:U,style:h,children:_?_($):(0,a.jsx)(v,{value:$})})},C)})}},966121:function(e,t,i){"use strict";i.d(t,{f:()=>d});var a=i(838e3),n=i(458184),l=i(671466),r=i(838487),s=i.n(r);let o="aiSendButton-uLnzM9",d=e=>{let{className:t,...i}=e;return(0,a.jsx)(n.A,{shape:"circle",type:"primary",className:s()(o,t),...i,icon:(0,a.jsx)(l.A,{type:"icon-Plain"})})}},385458:function(e,t,i){"use strict";i.d(t,{f:()=>d});var a=i(838e3);i(641486);let n=e=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"currentColor",viewBox:"0 0 24 24",...e,children:(0,a.jsx)("path",{d:"M4.5 7.5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-9a3 3 0 0 1-3-3z"})});var l=i(838487),r=i.n(l),s=i(458184);let o="aiStopButton-b9mv9h",d=e=>{let{className:t,...i}=e;return(0,a.jsx)(s.A,{shape:"circle",className:r()(o,t),...i,icon:(0,a.jsx)(n,{className:"w-4 h-4"})})}},807603:function(e,t,i){"use strict";i.d(t,{j:()=>s,o:()=>r});var a,n=i(526838),l=i(347496),r=((a={}).ThreadCreated="thread.created",a.ThreadMessageStart="thread.message.start",a.ThreadMessageDelta="thread.message.delta",a.ThreadMessageCompleted="thread.message.completed",a.ThreadToolStart="thread.tool.start",a.ThreadToolCompleted="thread.tool.completed",a.ThreadCompleted="thread.completed",a.ThreadError="thread.error",a);class s extends l.j3{onChatEvent(e){return this.chatEventCallback=e,this}setEventHandler(e,t){let i=this.eventHandlers.get(e)||new Set;i.add(t),this.eventHandlers.set(e,i)}handleMessage(e){let{event:t,data:i}=null!=e?e:{};if(!t)return;let a=this.eventHandlers.get(t),n=i;try{n=JSON.parse(i),a&&a.forEach(e=>{e(n)}),this.chatEventCallback&&this.chatEventCallback(t,n)}catch{}}on(e,t){return this.setEventHandler(e,t),this}constructor(...e){super(...e),(0,n._)(this,"eventHandlers",new Map),(0,n._)(this,"chatEventCallback",void 0)}}},347496:function(e,t,i){"use strict";i.d(t,{j3:()=>y,Np:()=>g});var a,n=i(526838),l=i(169508);function r(){return{id:"",event:"",data:"",retry:void 0}}async function s(e,t){let i,a=e.getReader();for(;!(i=await a.read()).done;)t(i.value)}let o="application/json",d="text/event-stream",c=d;async function u(e){let t=e.headers.get("content-type");if(!(null==t?void 0:t.startsWith(c)))throw Error(`Expected content-type to be ${c}, Actual: ${t}`)}async function p(e){}let m="last-event-id";var h=i(496411),v=i(483482),f=i(143290),g=((a={}).OPEN="open",a.CLOSE="close",a.ERROR="error",a.ABORT="abort",a);class y{isRunning(){return 1===this.state||2===this.state}open(){var e;let t,i,a;if(0!==this.state)return;this.state=1;let n=new AbortController;this.abortController=(e=[AbortSignal.timeout(6e5),n.signal],t=!1,i=new AbortController,a=()=>{t||i.abort()},e.forEach(e=>{e.addEventListener("abort",a)}),{signal:i.signal,cancel:()=>{t||(t=!0,e.forEach(e=>{e.removeEventListener("abort",a)}))},abort:a});let g={mode:"cors",credentials:"include",headers:(0,f.A)({"Content-Type":o,Accept:d,authorization:(0,h.iD)(),"x-device-id":(0,v.fL)(),"x-client-mode":l.bs,"x-client-version":"2.8.7-alpha.1"},e=>void 0===e||""===e),redirect:"follow",openWhenHidden:!0,method:"POST",signal:this.abortController.signal,...this.init};(function(e,t){let{headers:i,onmessage:a,...n}=t,l={...i};l.accept||(l.accept=c);let o=1e3;return function(e,t){let{signal:i,headers:a,onopen:n,onclose:l,onerror:r,onstream:s,openWhenHidden:o=!0,fetch:d,autoRetry:m=!1,getHeaders:h,getRetryInterval:v,...f}=t;return new Promise((t,g)=>{let y,x={...a};function A(){y.abort(),document.hidden||I()}x.accept||(x.accept=c),o||document.addEventListener("visibilitychange",A);let j=0;function b(){document.removeEventListener("visibilitychange",A),window.clearTimeout(j),y.abort()}null==i||i.addEventListener("abort",()=>{b(),t()});let w=null!=d?d:window.fetch,S=null!=n?n:u,C=null!=s?s:p;async function I(){y=new AbortController;try{let i=await w(e,{...f,headers:h?h():x,signal:y.signal});if(await S(i),!i.ok){g(Error([i.status,i.statusText].join(" "))),b();return}await C(i.body),null==l||l(),b(),t()}catch(e){if(m&&!y.signal.aborted)try{var i;let t=null!=(i=null==r?void 0:r(e))?i:v?v():1e3;window.clearTimeout(j),j=window.setTimeout(I,t)}catch(e){b(),g(e)}else null==r||r(e),b(),g(e)}}I()})}(e,{onstream:async e=>{var t,i,n,d;let c,u,p,h,v,f;return s(e,(d=(t=e=>{e?l[m]=e:delete l[m]},i=e=>{o=e},n=a,c=r(),u=new TextDecoder,function(e,a){if(0===e.length)null==n||n(c),c=r();else if(a>0){let n=u.decode(e.subarray(0,a)),l=a+(32===e[a+1]?2:1),r=u.decode(e.subarray(l));switch(n){case"data":c.data=c.data?c.data+"\n"+r:r;break;case"event":c.event=r;break;case"id":c.event="message",t(c.id=r);break;case"retry":let s=parseInt(r,10);isNaN(s)||i(c.retry=s)}}}),f=!1,function(e){void 0===p?(p=e,h=0,v=-1):p=function(e,t){let i=new Uint8Array(e.length+t.length);return i.set(e),i.set(t,e.length),i}(p,e);let t=p.length,i=0;for(;h<t;){f&&(10===p[h]&&(i=++h),f=!1);let e=-1;for(;h<t&&-1===e;++h)switch(p[h]){case 58:-1===v&&(v=h-i);break;case 13:f=!0;break;case 10:e=h}if(-1===e)break;d(p.subarray(i,e),v),i=h,v=-1}i===t?p=void 0:0!==i&&(p=p.subarray(i),h-=i)}))},getHeaders:()=>l,getRetryInterval:()=>o,...n})})(this.url,{onopen:async()=>{this.state=2,this.handleClientEvent("open")},onmessage:e=>{this.handleMessage(e)},onclose:()=>{this.handleClientEvent("close"),this.gc()},onerror:e=>{e instanceof Error&&"AbortError"===e.name?this.handleClientEvent("abort",void 0,e):this.handleClientEvent("error",e),this.gc()},...g}).catch(e=>{this.handleClientEvent("error",e),this.gc()})}abort(){var e;null==(e=this.abortController)||e.abort()}handleMessage(e){throw Error(`Not implemented for ${null==e?void 0:e.event}`)}onOpen(e){return this.setClientEventHandler("open",e),this}onClose(e){return this.setClientEventHandler("close",e),this}onError(e){return this.setClientEventHandler("error",e),this}onAbort(e){return this.setClientEventHandler("abort",e),this}handleClientEvent(e,t,i){let a=this.clientEventHandlers.get(e);a&&a.forEach(e=>{e(null!=t?t:i)})}gc(){this.state=3,this.clientEventHandlers=new Map}setClientEventHandler(e,t){let i=this.clientEventHandlers.get(e)||new Set;i.add(t),this.clientEventHandlers.set(e,i)}constructor(e,t){(0,n._)(this,"url",void 0),(0,n._)(this,"init",void 0),(0,n._)(this,"state",0),(0,n._)(this,"clientEventHandlers",new Map),(0,n._)(this,"abortController",void 0),this.url=e,this.init=t}}},340940:function(e,t,i){"use strict";i.d(t,{Ay:()=>v});var a=i(169508),n=i(526838);class l{get streamDone(){return!this._bufferOpen&&0===this._buffer.length&&0===this._chunkQueue.length&&null===this._chunkPending}appendBuffer(e){this._buffer+=e,this._firstRun&&this._skipTo(this._startPoint)&&(this._firstRun=!1),this._parseBuffer()}closeBuffer(){this._bufferOpen=!1,this._parseBuffer()}_parseBuffer(){let e=null;do if(this._skipTo("{"),null!==(e=this._getFullObject())){let t=this._simplifyObject(e);this._handleChunk(t)}while(null!==e);this._bufferOpen||(this._handleChunk(null),this._buffer="")}_skipTo(e){let t=this._buffer.indexOf(e);return!!(t>0)&&(this._buffer=this._buffer.slice(t),!0)}_getFullObject(){let e=null,t=0;for(;null===e&&this._buffer.length>t;){if(-1===(t=this._buffer.indexOf("}",t+1)))return null;try{let i=this._buffer.substring(0,t+1);e=JSON.parse(i),this._buffer=this._buffer.slice(t+1)}catch{}}return e}_simplifyObject(e){return e}_handleChunk(e){if(this._chunkPending){var t;null==(t=this._chunkResolution)||t.call(this,e),this._chunkPending=null}else this._chunkQueue.push(e)}async nextChunk(){return this._chunkQueue.length>0?this._chunkQueue.shift():(this._chunkPending=new Promise(e=>{this._chunkResolution=e}),this._chunkPending)}reset(){this._buffer="",this._chunkQueue=[],this._chunkPending=null,this._chunkResolution=void 0,this._firstRun=!0,this._bufferOpen=!0}isDone(){return!this._chunkQueue.length&&!this._chunkPending}constructor(){(0,n._)(this,"_startPoint","["),(0,n._)(this,"_buffer",""),(0,n._)(this,"_bufferOpen",!0),(0,n._)(this,"_firstRun",!0),(0,n._)(this,"_chunkResolution",void 0),(0,n._)(this,"_chunkPending",null),(0,n._)(this,"_chunkQueue",[])}}class r extends l{run(e){this.appendBuffer(e)}constructor(e,t="["){super(),this._startPoint=t,e&&this.run(e)}}var s=i(740565),o=i(807603),d=i(850646),c=i(704128),u=i(140049),p=i(729024),m=i(641486);i(347496);var h=i(221312);function v(e,t){let{manual:i=!1,defaultData:n,onOpen:l,onMessageDelta:v,onMessageCompleted:f,onChunk:g,onChunkValidate:y,onChunkError:x,onChunks:A,onPartialChunks:j,onReasoning:b,onReasoningCompleted:w,onSetup:S,onDone:C,onError:I,onEvent:N,startPoint:k="{",acceptCompletedChunk:T=!0,maxConcurrent:M=10,rpm:E=1/0,rpmKey:_="__[DEFAULT_RPM_KEY]__"}=t||{},[F,D]=(0,m.useState)(new Map),R=(0,m.useRef)(void 0),O=(0,m.useRef)(new Map),P=(0,m.useRef)(new Map),L=(0,m.useRef)(new Map),$=(0,m.useRef)(new Map),B=(0,m.useRef)([]),z=(0,m.useRef)(!1),U=(0,m.useRef)(new Map),H=(0,m.useRef)(null),V=(0,u.A)(e=>{z.current=!1;let t=L.current.get(e);t instanceof Map?t.forEach(e=>{e.reset()}):t instanceof r&&t.reset(),L.current.delete(e),P.current.delete(e),$.current.delete(e)}),K=(0,u.A)(async(e,t)=>{let{content:i,completed:n}=e;if(i)if("object"==typeof k&&null!==k){if(!L.current.has(t)){let e=new Map,i=new Map;Object.entries(k).forEach(t=>{let[a,n]=t;e.set(a,new r(null,n)),i.set(a,[])}),L.current.set(t,e),P.current.set(t,i)}let l=L.current.get(t),s=P.current.get(t);i&&(n&&V(t),l.forEach(e=>{e.run(i)}));let o=Array.from(l.entries()).map(async i=>{let[l,r]=i,o=s.get(l);for(;!r.isDone();){let i=await r.nextChunk(),s=!0;if(y&&(s=y(i,t,l)),i)if(s)o.push(i),(T||!n)&&(a.Cu&&console.log(`SSE chunk [${l}]:`,i),await (null==g?void 0:g(i,t,l)),await (null==j?void 0:j(o,t)));else{if(a.Cu){var d;console.log(`SSE chunk is not valid [${l}]:`,i,null==(d=O.current.get(e.messageId))?void 0:d.content,t)}await (null==x?void 0:x(i,t,l))}}});if(await Promise.allSettled(o),n){let e=[];s.forEach(t=>{e.push(...t)}),e.length>0&&await (null==A?void 0:A(e,t))}}else{L.current.has(t)||L.current.set(t,new r(null,k)),P.current.has(t)||P.current.set(t,[]);let s=L.current.get(t),o=P.current.get(t);for(i&&(n&&V(t),s.run(i));!s.isDone();){let i=await s.nextChunk(),r=!0;if(y&&(r=y(i,t)),i)if(r)o.push(i),(T||!n)&&(a.Cu&&console.log("SSE chunk:",i),await (null==g?void 0:g(i,t)),await (null==j?void 0:j(o,t)));else{if(a.Cu){var l;console.log("SSE chunk is not valid:",i,null==(l=O.current.get(e.messageId))?void 0:l.content,t)}await (null==x?void 0:x(i,t))}}o.length>0&&n&&(t&&P.current.set(t,o),await (null==A?void 0:A(o,t)))}}),q=(0,u.A)((e,t,i)=>{N&&N(e,t,i)}),G=(0,u.A)(async(e,t)=>{"string"==typeof(null==e?void 0:e.content)&&(g||A||j)&&await K(e,t);let i=O.current.get(e.messageId);if(null==i?void 0:i.reasoningContent){var a;null==b||b({content:i.reasoningContent,costTime:null!=(a=i.reasoningCostTime)?a:0,thinking:!i.reasoningCostTime},t),i.reasoningCostTime&&(null==w||w({content:i.reasoningContent,costTime:i.reasoningCostTime,thinking:!1},t))}}),W=(0,u.A)(async(e,t)=>{var i,a,n,l;O.current.set(e.messageId,{...e,content:null!=(i=e.content)?i:"",reasoningContent:null!=(a=e.reasoningContent)?a:"",reasoningCostTime:null!=(n=e.reasoningCostTime)?n:0}),null==v||v(null!=(l=e.content)?l:"",t),await G(e,t)}),J=(0,u.A)(async(e,t)=>{var i,a,n,l;let r=O.current.get(e.messageId);O.current.set(e.messageId,{...r,...e,content:(null==r?void 0:r.content)+(null!=(i=e.content)?i:""),reasoningContent:(null==r?void 0:r.reasoningContent)+(null!=(a=e.reasoningContent)?a:""),reasoningCostTime:null!=(l=null!=(n=e.reasoningCostTime)?n:null==r?void 0:r.reasoningCostTime)?l:0}),null==v||v(e.content,t),await G(e,t)}),Y=(0,u.A)(async(e,t)=>{let i=O.current.get(e.messageId);O.current.set(e.messageId,{...i,...e}),null==f||f(e.content,t),await G({...e,completed:!0},t)}),Z=(0,u.A)(e=>{let t=Date.now()-6e4,i=(U.current.get(e)||[]).filter(e=>e.timestamp>t);return U.current.set(e,i),i}),Q=(0,u.A)(e=>{let t=Z(e);if(t.length<E)return 0;let i=t[0],a=Date.now();return Math.max(0,i.timestamp+6e4-a)}),X=(0,u.A)((e,t)=>{let i=U.current.get(e)||[];i.push({timestamp:Date.now(),requestKey:t}),U.current.set(e,i)}),ee=(0,p.A)(async()=>{if(H.current&&(clearTimeout(H.current),H.current=null),B.current.length>0){let e=Q(_);if(e>0){H.current=setTimeout(()=>{H.current=null,ee()},e);return}}let e=M-Array.from($.current.values()).filter(e=>e.isRunning()).length;for(;!z.current&&B.current.length&&e>0&&!(0,h.VV)(R.current);){let t=B.current.shift();t&&(X(_,t.requestKey),t.client.open()),e--}}),et=(0,u.A)(t=>{var i,a,n;let r,u,p=null!=(i=null==t?void 0:t.uniqId)?i:(0,c.uR)();V(p),R.current=void 0;let m=(a=e,n=t,r=`${(0,d.hY)()}${a}`,u=r.includes("?")?"&":"?",new o.j(`${r}${u}locale=${(0,s.getUserLocale)()}`,n?{body:JSON.stringify(n)}:{}));return $.current.set(p,m),D(e=>new Map([...e,[p,!0]])),new Promise((e,i)=>{null==S||S(m,p),m.on("thread.message.start",async e=>{await W(e,p)}).on("thread.message.delta",async e=>{await J(e,p)}).on("thread.message.completed",async e=>{await Y(e,p)}).on("thread.error",async e=>{console.log("thread.error",e),i(e)}).onOpen(()=>{null==l||l(t,p)}).onAbort(e=>{D(e=>new Map([...e].filter(e=>{let[t]=e;return t!==p}))),i(e)}).onClose(async()=>{D(e=>new Map([...e].filter(e=>{let[t]=e;return t!==p}))),null==C||C(p);let t=P.current.get(p),i=[];t&&(t instanceof Map?t.forEach(e=>{i.push(...e)}):i=t),P.current.delete(p),e(i)}).onError(i).onChatEvent((e,t)=>{q(e,t,p)}),B.current.push({requestKey:p,client:m}),ee()}).then(e=>(ee(),e)).catch(e=>{ee();let t=e;throw!(0,h.Cj)(e)&&(console.log("SSE chat error",e),(0,h.TX)(e)&&(t=Error((0,s.hw)({id:"message.networkFailure"})))),U.current.set(_,(U.current.get(_)||[]).filter(e=>e.requestKey!==p)),D(e=>new Map([...e].filter(e=>{let[t]=e;return t!==p}))),R.current=t,null==I||I(t,p),t})}),ei=(0,u.A)(()=>et(n)),ea=(0,u.A)(e=>{if(z.current=!0,H.current&&(clearTimeout(H.current),H.current=null),!e){B.current=[],$.current.forEach(e=>{try{e.abort(),e.handleClientEvent("abort",void 0,Error("Manual AbortError"))}catch(t){e.handleClientEvent("abort",void 0,t),console.log("abort error",e,t)}}),$.current.clear();return}let t=$.current.get(e);if(t){B.current=B.current.filter(e=>e.client!==t);try{t.abort(),t.handleClientEvent("abort",void 0,Error("Manual AbortError"))}catch(t){R.current=t,null==I||I(t,e)}$.current.delete(e)}});return(0,m.useEffect)(()=>{i||ei()},[i,ei]),(0,m.useEffect)(()=>()=>{H.current&&(clearTimeout(H.current),H.current=null)},[]),{loading:Array.from(F.values()).some(e=>e),run:et,abort:ea}}},221312:function(e,t,i){"use strict";i.d(t,{Cj:()=>n,TX:()=>l,VV:()=>r});var a=i(868154);let n=e=>{let t=/aborted|AbortError/i;return t.test((null==e?void 0:e.name)||"")||t.test((null==e?void 0:e.message)||"")||t.test((null==e?void 0:e.stack)||"")},l=e=>{let t=/Failed to fetch|Load failed|network error/i;return t.test((null==e?void 0:e.name)||"")||t.test((null==e?void 0:e.message)||"")||t.test((null==e?void 0:e.stack)||"")},r=e=>{var t;return(null==e||null==(t=e.errorContext)?void 0:t.type)===a.V.RATE_LIMIT_EXCEEDED||(null==e?void 0:e.retryAfter)}},490045:function(e,t,i){"use strict";i.d(t,{A:()=>v});var a=i(838e3),n=i(740565),l=i(140049),r=i(764007),s=i(641486),o=i(689368),d=i(738952),c=i(16342),u=i(952811),p=i(331515),m=i(297965),h=i(687238);let v=()=>{let{providers:e}=(0,p.A)(),{models:t}=(0,u.A)(),{config:i,teamId:v}=(()=>{let e=(0,o.Ay)(e=>{var t;return null==(t=e.project.currentProject)?void 0:t.teamId}),t=(0,o.Ay)(t=>{var i,a;return null==(a=t.team.userTeams)||null==(i=a.find(t=>t.id===e))?void 0:i.organizationId}),{isInherited:i,orgConfig:a,teamConfig:n}=(0,c.L)(e),r=(0,l.A)(()=>Promise.allSettled([(0,d.k)().getState().fetchOrgAiConfig(t),(0,d.k)().getState().fetchTeamAiConfig(e)])),u=(0,s.useMemo)(()=>({aiFeatureEnabled:null==n?void 0:n.aiFeatureEnabled,aiFeatures:null==n?void 0:n.aiFeatures,defaultAiLlmModelId:(null==n?void 0:n.defaultAiLlmModelId)||(null==a?void 0:a.defaultAiLlmModelId),aiEntityLlmProviderConfigs:i?null==n?void 0:n.inheritedAiEntityLlmProviderConfigs:null==n?void 0:n.aiEntityLlmProviderConfigs}),[i,a,n]);return{refresh:r,orgConfig:a,teamConfig:n,teamId:e,orgId:t,config:u}})(),f=(0,s.useMemo)(()=>!!(null==e?void 0:e.length)&&e.some(e=>{var t,a;return(null==(a=i.aiEntityLlmProviderConfigs)||null==(t=a.find(t=>t.id===e.aiEntityLlmProviderConfigId))?void 0:t.enabled)!==!1}),[e,i]),g=(0,s.useMemo)(()=>!!(null==t?void 0:t.length)&&t.some(e=>e.enabled),[t]),y=(0,s.useMemo)(()=>f&&g,[f,g]),x=(0,l.A)(e=>{let{fromFeature:t,apiId:i}=e||{};(0,m.B)("ai_guide_config_configure",{fromFeature:t,apiId:i,reason:f?"llm":"provider"}),(0,h.H)(v)}),A=(0,l.A)((e,t,i)=>()=>{let{fromFeature:l,apiId:s}=t||{};if(!y){(0,m.B)("ai_guide_config_shown",{fromFeature:l,apiId:s,reason:f?"llm":"provider"}),r.Ay.confirm({icon:(0,a.jsx)(a.Fragment,{}),title:(0,n.hw)({id:"ai.features.notConfigured.notice"}),content:f?(0,n.hw)({id:"ai.features.notConfigured.notice.model"}):(0,n.hw)({id:"ai.features.notConfigured.notice.provider"}),onOk:()=>x({fromFeature:l,apiId:s}),okText:(0,n.hw)({id:"ai.features.notConfigured.action.configure"}),zIndex:2e3,mask:!1,...i});return}null==e||e()});return{provider:f,model:g,configured:y,ensureAiConfigured:A}}},348842:function(e,t,i){"use strict";i.d(t,{A:()=>r});var a=i(496411),n=i(738952),l=i(134597);let r=e=>{let t=(0,l.A)(),i=(0,n.n)(t=>{var i,n,l;return null==(l=null==(i=t.findTeamAiConfig(null!=(n=null!=e?e:(0,a.Sy)())?n:0))?void 0:i.aiFeatureEnabled)||l});return t&&i}},571905:function(e,t,i){"use strict";i.d(t,{Y:()=>n});var a=i(740565);i(641486);let n=(e,t)=>"403049"===e?(0,a.hw)({id:"ai.error.RESOURCE_USAGE_REACHED"}):t||""},335056:function(e,t,i){"use strict";i.d(t,{A:()=>s});var a=i(689368),n=i(738952),l=i(348842),r=i(565500);let s=e=>{var t,i,s,o,d,c;let u=(0,a.Ay)(e=>{var t;return null==(t=e.team.userTeams)?void 0:t.find(t=>{var i;return t.id===(null==(i=e.project.currentProject)?void 0:i.teamId)})}),p=null==u?void 0:u.organizationId,m=null==u?void 0:u.id,h=(0,n.n)(e=>e.findOrgAiConfig(p)),v=(0,n.n)(e=>e.findTeamAiConfig(m)),f=(0,l.A)(m),g=null!=(d=null==h||null==(i=h.aiFeatures)||null==(t=i.find(t=>t.featureType===e))?void 0:t.enabled)?d:!r.s.includes(e),y=null!=(c=null==v||null==(o=v.aiFeatures)||null==(s=o.find(t=>t.featureType===e))?void 0:s.enabled)?c:!r.s.includes(e);return f&&(!h||g)&&y}},952811:function(e,t,i){"use strict";i.d(t,{A:()=>c}),i(838e3),i(650197);var a=i(689368),n=i(140049),l=i(641486),r=i(738952),s=i(711870),o=i(331515),d=i(16342);let c=e=>{let{modelFilter:t,llmNodeType:i}=null!=e?e:{},{providers:c}=(0,o.A)(),u=(0,a.Ay)(e=>{var t;return null==(t=e.project.currentProject)?void 0:t.teamId}),p=(0,a.Ay)(e=>{var t,i;return null==(i=e.team.userTeams)||null==(t=i.find(e=>e.id===u))?void 0:t.organizationId}),m=(0,r.n)(e=>e.findOrgAiConfig(p)),h=(0,r.n)(e=>e.findTeamAiConfig(u)),{isInherited:v}=(0,d.L)(u),f=(0,s.I)(e=>e.getOrgAiModels(p,i)),g=(0,s.I)(e=>e.getTeamAiModels(u)),y=(0,l.useMemo)(()=>{let e=v?null==f?void 0:f.filter(e=>{var t,i;let a=null==(t=e.aiLlmProvider)?void 0:t.aiLlmProviderId,n=null!=(i=null==c?void 0:c.filter(e=>{var t,i;return(null==h||null==(i=h.inheritedAiEntityLlmProviderConfigs)||null==(t=i.find(t=>t.id===e.aiEntityLlmProviderConfigId))?void 0:t.enabled)!==!1}).map(e=>e.aiLlmProviderId))?i:[];return null==n?void 0:n.includes(a)}):g;return t?null==e?void 0:e.filter(t):e},[v,f,g,t,null==h?void 0:h.inheritedAiEntityLlmProviderConfigs,c]),x=(0,l.useMemo)(()=>{var e,t,a;let n=null==y?void 0:y.slice();if(i){let t=v?(0,s.j)().getState().orgAiModelAutoSelectedMap[i]:(0,s.j)().getState().teamAiModelAutoSelectedMap[i],a=null!=(e=null==y?void 0:y.findIndex(e=>e.aiLlmModelId===t))?e:-1;if(-1!==a){let e=null==y?void 0:y.map(e=>({...e,isAutoSelected:!1}));(null==e?void 0:e[a])&&(null==e||e.splice(a,1,{...null==e?void 0:e[a],isAutoSelected:!0})),n=e}}if((null==n?void 0:n.length)&&!(null==n?void 0:n.find(e=>e.isAutoSelected))){let e=null!=(t=null==n?void 0:n.findIndex(e=>e.isAutoSelected))?t:0;if(null==n?void 0:n[e])n.splice(e,1,{...n[e],isAutoSelected:!0});else{let e=null==n?void 0:n.filter(e=>e.enabled);if(null==e?void 0:e.length){let t=null!=(a=null==n?void 0:n.findIndex(t=>t.aiLlmModelId===e[0].aiLlmModelId))?a:0;n.splice(t,1,{...n[t],isAutoSelected:!0})}}}return n},[v,y,i]),A=(0,l.useMemo)(()=>{var e;let t=v?null==m?void 0:m.defaultAiLlmModelId:null==h?void 0:h.defaultAiLlmModelId;return null==x||null==(e=x.find(e=>e.id===t))?void 0:e.id},[v,x,m,h]),j=(0,l.useMemo)(()=>{var e;return null==x||null==(e=x.find(e=>e.isAutoSelected))?void 0:e.aiLlmModelId},[x]),b=(0,l.useMemo)(()=>{var e;return null!=(e=null==x?void 0:x.reduce((e,t)=>({...e,[t.id]:t}),{}))?e:{}},[x]);return{models:x,modelsMap:b,refresh:(0,n.A)(()=>v?(0,s.j)().getState().fetchOrgAiModels(p,i):(0,s.j)().getState().fetchTeamAiModels(u,i)),defaultModelId:A,autoSelectedModelId:j,teamId:u,orgId:p}}},331515:function(e,t,i){"use strict";i.d(t,{A:()=>d}),i(838e3),i(770837);var a=i(689368),n=i(140049),l=i(641486),r=i(254349),s=i(16342),o=i(738952);let d=e=>{let{providerFilter:t}=null!=e?e:{},i=(0,a.Ay)(e=>{var t;return null==(t=e.project.currentProject)?void 0:t.teamId}),d=(0,a.Ay)(e=>{var t,a;return null==(a=e.team.userTeams)||null==(t=a.find(e=>e.id===i))?void 0:t.organizationId}),{isInherited:c}=(0,s.L)(i),u=(0,o.n)(e=>e.findOrgAiConfig(d)),p=(0,r.Q)(e=>e.getOrgAiProviders(d)),m=(0,o.n)(e=>e.findTeamAiConfig(i)),h=(0,r.Q)(e=>e.getTeamAiProviders(i)),v=(0,l.useMemo)(()=>{let e=c?null==p?void 0:p.filter(e=>{var t,i,a,n;return!!((null==u||null==(i=u.aiEntityLlmProviderConfigs)||null==(t=i.find(t=>t.id===e.aiEntityLlmProviderConfigId))?void 0:t.enabled)&&(null==m||null==(n=m.inheritedAiEntityLlmProviderConfigs)||null==(a=n.find(t=>t.id===e.aiEntityLlmProviderConfigId))?void 0:a.enabled)!==!1)}):h;return t?null==e?void 0:e.filter(t):e},[c,p,h,t,null==u?void 0:u.aiEntityLlmProviderConfigs,null==m?void 0:m.inheritedAiEntityLlmProviderConfigs]),f=(0,l.useMemo)(()=>{var e;return null!=(e=null==v?void 0:v.reduce((e,t)=>({...e,[t.id]:t}),{}))?e:{}},[v]);return{providers:v,providersMap:f,refresh:(0,n.A)(()=>c?(0,r.R)().getState().fetchOrgAiProviders(d):(0,r.R)().getState().fetchTeamAiProviders(i)),teamId:i,orgId:d}}},16342:function(e,t,i){"use strict";i.d(t,{L:()=>l});var a=i(689368),n=i(738952);let l=(e,t)=>{let{isProvidersInherited:i}=null!=t?t:{},l=(0,a.Ay)(t=>{var i;return null==(i=t.team.teamMap)?void 0:i[e]}),r=null==l?void 0:l.organizationId,s=(0,n.n)(e=>e.findOrgAiConfig(r)),o=(0,n.n)(t=>t.findTeamAiConfig(e)),d=!!r||!!s;return{isInherited:d&&(null!=i?i:null==o?void 0:o.inheritAiEntityLlmProviderConfigsEnabled),underOrg:d,orgConfig:s,teamConfig:o}}},203807:function(e,t,i){"use strict";i.d(t,{TX:()=>r,VA:()=>l,jY:()=>n});var a=i(850646);async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,a.Ay)(`/api/v1/ai/generation-records/${e}/quality-rating`,{method:"PUT",data:{qualityRating:t}})}async function l(e,t){return(0,a.Ay)(`/api/v1/ai/generation-records/${e}/accept`,{method:"PUT",data:{acceptedStatus:t}})}async function r(e,t){return(0,a.Ay)("/api/v1/ai/generation-records/accept/batch",{method:"PUT",data:{records:e.map(e=>({recordId:e,acceptedStatus:t}))}})}},95837:function(e,t,i){"use strict";i.d(t,{e:()=>n});var a=i(340940);function n(e,t){return(0,a.Ay)(`/api/v1/ai/teams/${e}/chat`,t)}i(129867)},222757:function(e,t,i){"use strict";i.d(t,{l:()=>o,y:()=>s});var a=i(838e3),n=i(910155),l=i(641486);let{ContextProvider:r,useContextStore:s}=(0,n.B)({initMode:"useMemo"}),o=(0,l.memo)(e=>{let{children:t,value:i}=e,n=s(e=>e),o=(0,l.useMemo)(()=>({...n,...i}),[n,i]);return(0,a.jsx)(r,{value:o,children:t})})},868154:function(e,t,i){"use strict";i.d(t,{V:()=>r,x:()=>l});var a,n,l=((a={}).Image="IMAGE",a.Iconfont="ICONFONT",a.ReactNode="REACT_NODE",a),r=((n={}).INCORRECT_API_KEY="INCORRECT_API_KEY",n.EMPTY_API_KEY="EMPTY_API_KEY",n.INSUFFICIENT_PERMISSION="INSUFFICIENT_PERMISSION",n.MODEL_UNAVAILABLE="MODEL_UNAVAILABLE",n.INSUFFICIENT_QUOTA="INSUFFICIENT_QUOTA",n.RATE_LIMIT_EXCEEDED="RATE_LIMIT_EXCEEDED",n.INVALID_REQUEST="INVALID_REQUEST",n.NETWORK_ERROR="NETWORK_ERROR",n.TIMEOUT_ERROR="TIMEOUT_ERROR",n.SERVICE_UNAVAILABLE="SERVICE_UNAVAILABLE",n.INTERNAL_SERVER_ERROR="INTERNAL_SERVER_ERROR",n.UNKNOWN_ERROR="UNKNOWN_ERROR",n)},297965:function(e,t,i){"use strict";i.d(t,{B:()=>l});var a=i(170836),n=i(793594);let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var i=arguments.length,l=Array(i>2?i-2:0),r=2;r<i;r++)l[r-2]=arguments[r];return(0,n.IL)(e,(0,a.Oy)(t),...l)}},302523:function(e,t,i){"use strict";i.d(t,{R:()=>r});var a=i(269966),n=i(401146);let l=n.Ik({id:n.Yj().optional(),name:n.Yj().optional(),value:n.KC([n.Yj(),n.YO(n.Yj())]).optional(),enable:n.zM().optional(),type:n.fc(a.hG).optional(),description:n.Yj().optional()}),r=n.YO(l).optional().default([])},439082:function(e,t,i){"use strict";i.d(t,{A:()=>K});var a=i(838e3),n=i(182187),l=i(553047),r=i(325318),s=i(184406),o=i(744283),d=i(740565),c=i(161814),u=i(351885),p=i(793594),m=i(689368),h=i(458184),v=i(963227),f=i(554692),g=i(671466),y=i(641486),x=i.n(y),A=i(618487),j=i(306680),b=i(987295),w=i(364382),S=i(155084),C=i(31768),I=i(550478),N=i(736974),k=i(103492),T=i(2183),M=i(440270),E=i(496411),_=i(427183),F=i(838487),D=i.n(F),R=i(763233);let O={"copy-action":"copy-action-C4CkB1",copyAction:"copy-action-C4CkB1"};function P(e){let{data:t}=e,[i,n]=(0,y.useState)(!1),{parseUrl:l,customEndpointInfo:r}=function(e){var t;let{data:i}=e,a=(0,A.useModel)("clientConfig",e=>{var t;return(null==(t=e.data)?void 0:t.customEndpointUrlPath)||""}),n=null==(t=(0,T._$)(e=>e.projectCurrentBranch.isMain))||t,l=(0,y.useMemo)(()=>{let e=(0,_.Q)(a,{projectId:i.projectId,id:i.id,projectID:i.projectId,apiId:i.id});return n?e:`${e}?branchId=${(0,E.U3)()}`},[a,i.projectId,i.id,n]),r=(0,y.useMemo)(()=>`${i.name}
  ${i.protocol} ${i.path}
  ${(0,d.hw)({id:"api.info.id"})}${i.id}
  ${(0,d.hw)({id:"api.info.url"})}${l}`,[i.name,i.protocol,i.path,i.id,l]);return{parseUrl:l,customEndpointInfo:r}}({data:t});return(0,a.jsxs)(a.Fragment,{children:[t.id&&(0,a.jsx)(c.A,{text:(0,a.jsxs)("span",{className:D()(O.copyText,"ml-2 cursor-pointer"),children:["#",t.id]}),copyText:t.id.toString(),toolTip:(0,d.hw)({id:"copyApiId"})}),(0,a.jsx)(R.A,{children:(e,t)=>(0,a.jsx)(f.A,{overlay:(0,d.hw)({id:"copyAccessLink"}),children:(0,a.jsx)(h.A,{type:"text",size:"small",theme:"secondary",className:D()("ml-1",O["copy-action"]),onClick:()=>{n(!1),(0,M.e)({copyText:l,successTooltip:(0,d.hw)({id:"isCopied"})}),null==e||e(),(0,p.IL)("app_share_dropdown_click_collaboration",{index:"icon"})},icon:(0,a.jsx)(g.A,{size:14,type:"icon-link1",style:{visibility:i||t?"visible":void 0},className:"inline-flex"})})})}),(0,a.jsx)(f.A,{overlay:(0,d.hw)({id:"copyApiInfo"}),children:(0,a.jsx)(h.A,{type:"text",size:"small",theme:"secondary",onClick:()=>{(0,M.e)({copyText:r}),(0,p.IL)("app_share_dropdown_click_api_info")},className:D()("ml-1",O["copy-action"]),icon:(0,a.jsx)(g.A,{type:"icon-button-copy",size:14,className:"inline-flex"})})})]})}let L="container-A2s9cd",$="base-info-status-vu4m73",B="baseInfo-FkRvKi",z="baseInfo__copyText-mgVV7F";var U=i(567777),H=i(779861),V=i(217071);function K(e){var t;let{readonly:i,id:y,onEdit:T}=e,M=(0,m.Ay)(e=>e.customEndpoint.map[y]),E=(0,m.Ay)(e=>{let{projectSetting:t}=e;return t.projectSettingData}),_=(0,m.Ay)(e=>e.project.currentProject),{shouldPreventLinkDefault:F}=(0,b.A)(),{render:D,toggleWithKey:R,hide:O,visible:K}=(0,k.A)({modelType:"CUSTOM_ENDPOINT",id:null!=y?y:0}),q=x().useMemo(()=>["HISTORY","SEO"],[]);if(!M)return null;let G={HISTORY:{key:"HISTORY",title:(0,d.hw)({id:"version.history.title.http-api"}),icon:(0,a.jsx)(g.A,{type:"icon-revision-history1",size:16}),children:K&&y?(0,a.jsx)(U.A,{sidebarVisible:K,comparisonModel:"customEndpointComparison",currentData:M,queryHistories:H.rh,resetHistories:H._U,dataSelector:e=>{var t;return null!=(t=e.customEndpointHistory.store[y])?t:{}},onRevert:e=>{var t;return(0,H.N7)({projectId:null!=(t=null==_?void 0:_.id)?t:0,id:y,historyId:e},()=>{(0,A.dispatchFetchHttpApiTreeList)(),(0,A.dispatchFetchCustomEndpointList)(),(0,A.dispatchFetchCustomEndpoint)(y)})}}):null},SEO:{key:"SEO",icon:(0,a.jsx)(g.A,{type:"icon-Set",size:16}),title:(0,d.hw)({id:"seo.setting"}),children:y&&K?(0,a.jsx)(C.Ay,{projectId:(null==_?void 0:_.id)||0,relatedId:y,moduleId:M.moduleId,relatedType:"CUSTOM_ENDPOINT",resourceName:null!=(t=M.name)?t:"",projectName:(null==_?void 0:_.name)||"",parentFolderId:M.folderId}):null,onSelect:()=>{(0,p.IL)("app_sidebar_button_click_advanced")}}};return(0,a.jsxs)("div",{className:L,children:[(0,a.jsxs)("div",{className:"h-full py-4 flex-auto overflow-auto flex flex-col",children:[y&&!i&&(0,a.jsx)(V.A,{entityType:"CUSTOM_ENDPOINT",entityId:y}),(0,a.jsxs)("div",{className:"w-full flex items-center gap-2 justify-between flex-none px-4",children:[(0,a.jsxs)("div",{className:B,children:[(0,a.jsx)("div",{className:"flex items-center flex-shrink-1 overflow-auto",title:M.name,style:{fontWeight:500,fontSize:16},children:(0,a.jsx)(c.A,{text:M.name,className:"truncate"})}),(0,a.jsx)("div",{className:z,children:(0,a.jsx)(P,{data:M})})]}),!i&&(0,a.jsxs)("div",{className:"flex-none flex items-center gap-2",children:[(0,a.jsx)(r.y,{permission:o.o.ENDPOINT_ENDPOINT_CDU,hiddenToGuest:!0,children:(0,a.jsx)(h.A,{className:"mr-2",type:"default",size:"middle",onClick:T,children:(0,d.hw)({id:"doc.action.edit"})})}),(0,a.jsx)(I.A,{toggleRightSidebar:R,sideMenuKeys:q,isActive:K,relatedType:"CUSTOM_ENDPOINT"})]})]}),(0,a.jsxs)("div",{className:"w-full flex-auto overflow-auto px-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-3",children:[M.protocol&&(0,a.jsx)(l.w,{inverse:!0,protocol:M.protocol}),(0,a.jsx)("div",{className:"flex items-center flex-shrink-1 overflow-auto",style:{fontWeight:600},title:M.path,children:(0,a.jsx)(c.A,{text:M.path,className:"truncate"})}),(0,a.jsx)("div",{className:$,children:(0,a.jsx)(j.A,{readonly:i,value:M.status,onChange:e=>{(0,A.dispatchUpdateCustomEndpoint)({id:y,status:e})}})})]}),Array.isArray(M.tags)&&M.tags.length>0&&(0,a.jsx)("div",{className:"flex items-center gap-1 mt-3 ",children:M.tags.map(e=>(0,a.jsx)(v.A,{type:"soft",color:"primary",children:e},e))}),(0,a.jsxs)("div",{className:"flex items-center flex-wrap leading-5 select-text mt-3",children:[(0,a.jsxs)("div",{className:"mb-2 mr-6",children:[(0,a.jsx)("span",{className:"app-text-fg-low mr-1",children:(0,d.hw)({id:"time.created"})}),(0,a.jsx)(f.A,{title:(0,u.QP)(M.createdAt),children:(0,a.jsx)("span",{className:"app-text-fg-medium",style:{fontWeight:"var(--ui-font-weight-400)"},children:(0,u.HF)(M.createdAt)})})]}),(0,a.jsxs)("div",{className:"mb-2 mr-6",children:[(0,a.jsx)("span",{className:"app-text-fg-low mr-1",children:(0,d.hw)({id:"time.updated"})}),(0,a.jsx)(f.A,{title:(0,u.QP)(M.updatedAt),children:(0,a.jsx)("span",{className:"app-text-fg-medium",style:{fontWeight:"var(--ui-font-weight-400)"},children:(0,u.HF)(M.updatedAt)})})]}),(0,a.jsxs)("div",{className:"mb-2 mr-6",children:[(0,a.jsx)("span",{className:"app-text-fg-low mr-1",children:(0,d.hw)({id:"updatedBy"})}),(0,a.jsx)("span",{className:"app-text-fg-medium",style:{fontWeight:"var(--ui-font-weight-400)"},children:(0,a.jsx)(s.A,{id:M.updatedById})})]}),(0,a.jsxs)("div",{className:"mb-2 mr-6",children:[(0,a.jsx)("span",{className:"app-text-fg-low mr-1",children:(0,d.hw)({id:"creator"})}),(0,a.jsx)("span",{className:"app-text-fg-medium",style:{fontWeight:"var(--ui-font-weight-400)"},children:(0,a.jsx)(s.A,{id:M.createdById})})]}),(0,a.jsxs)("div",{className:"mb-2 mr-6",children:[(0,a.jsx)("span",{className:"app-text-fg-low mr-1",children:(0,d.hw)({id:"responsible"})}),(0,a.jsx)("span",{className:"app-text-fg-medium",style:{fontWeight:"var(--ui-font-weight-400)"},children:M.maintainerId?(0,a.jsx)(s.A,{id:M.maintainerId}):(0,d.hw)({id:"app.settings.hasNoSetting"})})]}),(0,a.jsxs)("div",{className:"mb-2 mr-6",children:[(0,a.jsx)("span",{className:"app-text-fg-low mr-1",children:(0,d.hw)({id:"folder"})}),(0,a.jsx)("span",{className:"app-text-fg-medium",style:{fontWeight:"var(--ui-font-weight-400)"},children:(0,a.jsx)(N.A,{id:M.folderId})})]})]}),(0,a.jsx)(w.R,{data:{...M,customApiFields:M.customEndpointFields}}),(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsx)(n.A,{value:M.content,shouldPreventLinkDefault:F,locale:null==E?void 0:E.language,slugIdPrefix:`docId${y}-`,inDocView:!0})})]})]}),(0,a.jsx)("div",{className:"h-full flex-none flex",children:D((0,a.jsx)(S.A,{visible:K,items:G,onClose:O}),!1)})]})}},559708:function(e,t,i){"use strict";i.d(t,{H:()=>n});var a=i(641486);let n=i.n(a)().createContext({activeKey:"view",setActiveKey:()=>{}})},279142:function(e,t,i){"use strict";i.d(t,{M2:()=>h,YN:()=>m,i8:()=>u});var a=i(954939),n=i(759300),l=i.n(n);let r={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,url:RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i")},s=e=>"string"==typeof e&&!!e.match(r.email)&&e.length<255,o=e=>"string"==typeof e&&!!e.match(r.url),d=[a.sS.Date,a.sS.SelectTag],c={[a.sS.Date]:e=>{if(l().isDayjs(e))return e.valueOf()},[a.sS.SelectTag]:e=>{if("string"==typeof e&&e.length>0)return[e]}};function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e)return e;let i={};return Object.keys(e).forEach(a=>{let n=t.findIndex(e=>{let{id:t}=e;return Number(a)===t});if(-1!==n){let l,r=t[n];void 0!==(l=d.includes(r.fieldType)?(0,c[r.fieldType])(e[a]):e[a])&&(i[a]=l)}}),i}let p=[a.sS.Text,a.sS.Email,a.sS.Link,a.sS.Person,a.sS.Number,a.sS.Date,a.sS.Select,a.sS.MultiSelect,a.sS.SelectTag,a.sS.MultiSelectTag],m={[a.sS.Text]:e=>{let t=typeof e;if("string"===t||"number"===t)return e},[a.sS.Email]:e=>{if("string"==typeof e&&s(e))return e},[a.sS.Link]:e=>{if("string"==typeof e&&o(e))return e},[a.sS.Person]:e=>{let t=typeof e;if("string"===t||"number"===t)return e},[a.sS.Number]:e=>"string"==typeof e&&Number(e)?Number(e):"number"==typeof e?e:void 0,[a.sS.Date]:(e,t,i)=>{try{let a=typeof e;if("string"===a||"number"===a){let a=l()(new Date(e));if(!a.isValid())return null;if(!t)return a;return a.format(i||"YYYY/MM/DD")}return null}catch(e){return null}},[a.sS.Select]:e=>{if((!Array.isArray(e)||!(e.length>1))&&"string"==typeof e)return e},[a.sS.SelectTag]:e=>{if(Array.isArray(e)){if(e.length>1)return;return e[0]}if("string"==typeof e)try{let t=JSON.parse(e);if(t.length>0)return;return t[0]}catch(e){}},[a.sS.MultiSelect]:e=>{if(Array.isArray(e))return e;if("string"==typeof e)try{return JSON.parse(e)}catch(e){}return[]},[a.sS.MultiSelectTag]:e=>{if(Array.isArray(e))return e;if("string"==typeof e)try{return JSON.parse(e)}catch(e){}return[]}},h=(e,t)=>{if(!e)return e;let i={...e},a=Object.keys(i);return Array.isArray(a)&&a.length>0&&a.forEach(e=>{let a=t.findIndex(t=>{let{id:i}=t;return Number(e)===i});if(-1!==a){let n=t[a];if(p.includes(n.fieldType)){let t=m[n.fieldType];t&&"function"==typeof t?i[e]=t(i[e]):i[e]=void 0}}}),i}},686263:function(e,t,i){"use strict";i.d(t,{X:()=>F,A:()=>D});var a=i(838e3),n=i(721537),l=i(740565),r=i(165311),s=i(954939),o=i(689368),d=i(202182),c=i(759300),u=i.n(c),p=i(554692),m=i(820182),h=i(622789),v=i(391363),f=i(138249),g=i(808306),y=i(649269),x=i(255529),A=i(671466),j=i(641486),b=i(618487),w=i(159347),S=i(715310),C=i(838062);let{Option:I}=C.A,N=e=>{let{options:t,...i}=e,{inputOption:n,handleChange:l}=(e=>{let[t,i]=(0,j.useState)([]);return(0,d.A)(()=>{i(e)},[e]),{inputOption:t,handleChange:t=>{t&&t.length>0?e.some(e=>e===t)?i(e):i(Array.from(new Set([t,...e]))):i(e)}}})(t);return(0,a.jsx)(C.A,{...i,onSearch:l,children:n&&n.map(e=>"string"==typeof e?(0,a.jsx)(I,{value:e,children:e},e):null)})};var k=i(398380);let T=e=>{let{isAsHttpApiIdentityPattern:t,httpApiIdentityPattern:i}=e,n=(0,o.Ay)(e=>e.externalURL);return(0,a.jsxs)(a.Fragment,{children:[(0,k.upperFirst)(s.HI.OperationId),t?(0,a.jsx)(r.A,{showTooltip:!0,httpApiIdentityPattern:i,placement:"topLeft"}):(0,a.jsx)(p.A,{className:"ml-1",overlayStyle:{maxWidth:550},title:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.n3,{id:"message.operationIdDescription"}),(0,a.jsx)("br",{}),(0,a.jsx)(l.n3,{id:"message.operationIdDescription.detail"}),(0,a.jsx)("a",{onClick:e=>(0,w.Mw)(e,n.assets.openApiDocOperation),children:(0,l.hw)({id:"message.detailedDescription"})})]}),children:(0,a.jsx)(A.A,{type:"icon-CircleInformation",size:14,color:"var(--ui-disabled-color)"})})]})},M=()=>(0,a.jsxs)(a.Fragment,{children:[(0,l.hw)({id:"api.label.sourceUrl"}),(0,a.jsx)(p.A,{className:"ml-1",title:(0,l.hw)({id:"message.origin.docLink"}),children:(0,a.jsx)(A.A,{type:"icon-CircleInformation",size:14,color:"var(--ui-disabled-color)"})})]}),E={[s.sS.Number]:[{message:(0,l.hw)({id:"project.label.apiCustomField.rules.number"}),type:"number"}],[s.sS.Link]:[{message:(0,l.hw)({id:"project.label.apiCustomField.rules.link"}),type:"url"}],[s.sS.Email]:[{message:(0,l.hw)({id:"project.label.apiCustomField.rules.email"}),type:"email"}]},_=e=>{let{id:t,fieldType:i,options:r,extra:o,...d}=e;switch(i){case s.sS.Text:case s.sS.Email:case s.sS.Link:return(0,a.jsx)(m.A,{className:"w-full",...d});case s.sS.Number:return(0,a.jsx)(h.A,{className:"w-full",...d});case s.sS.Date:{if(u().isDayjs(d.value)||void 0===d.value||null===d.value)return(0,a.jsx)(v.A,{...d,className:"w-full ui-input",showToday:!1,format:"YYYY/MM/DD"});let e=null==d?void 0:d.onChange;return"function"==typeof e&&e(void 0),null}case s.sS.Person:return(0,a.jsx)(n.A,{allowClear:!0,...d});case s.sS.Select:case s.sS.MultiSelect:var c;return(0,a.jsx)(f.A,{className:"w-full",mode:i===s.sS.MultiSelect?"multiple":void 0,allowClear:i===s.sS.Select,...d,children:(null==o||null==(c=o.options)?void 0:c.length)>0&&(null==o?void 0:o.options.map(e=>e&&e.value?(0,a.jsx)(f.A.Option,{children:(null==o?void 0:o.showInTree)?(0,a.jsx)(g.A,{color:e.color,text:e.value}):e.value},e.value):null))});case s.sS.MultiSelectTag:return(0,a.jsx)(f.A,{className:"w-full",mode:"tags",placeholder:(0,l.hw)({id:"message.customApiFields.label.tooltip.multipleTag"}),...d,children:r&&r[t]?r[t].map(e=>e?(0,a.jsx)(f.A.Option,{children:e},e):null):[]});case s.sS.SelectTag:return(0,a.jsx)(N,{...d,className:"w-full",options:r&&r[t]?r[t]:[],allowClear:!0});default:return null}},F=e=>{let{baseFormItemLayout:t,tailFormItemLayout:i}=e,n=(0,j.useContext)(S.c),r=(0,b.useModel)("projectCustomApiField",e=>{let{data:t}=e;return t}),[o,c,u,p]=(0,d.A)(()=>{let{type:e}=n,t=r.findIndex(e=>e.openApiField===s.HI.OperationId&&e.enable),i=[],a="operationId"===e,o=-1!==t||a;return a&&(t=0,i.push({validator:(e,t)=>{let i=null==t?void 0:t.replace(/\s*/g,"");return null==i||""===i?Promise.reject((0,l.hw)({id:"message.operationIdAsIdentityPattern"})):Promise.resolve()},warningOnly:!0})),[o,t,a,i]},[r,n]);return(0,a.jsx)(a.Fragment,{children:o&&(0,a.jsx)(y.A,{...t,style:{order:c},children:(0,a.jsx)(x.A.Item,{...i,className:"mb-0",name:"operationId",label:(0,a.jsx)(T,{isAsHttpApiIdentityPattern:u,httpApiIdentityPattern:n}),rules:p,children:(0,a.jsx)(m.A,{placeholder:(0,l.hw)({id:"message.openIdOfOpenApi"})})})})})},D=e=>{let{name:t="customApiFields",options:i,baseFormItemLayout:n,tailFormItemLayout:r,collapsedFieldIds:o}=e,d=(0,b.useModel)("projectCustomApiField",e=>{let{data:t}=e;return t}),c=d.findIndex(e=>e.openApiField===s.HI.SourceUrl&&e.enable);return(0,a.jsxs)(a.Fragment,{children:[-1!==c&&(0,a.jsx)(y.A,{...n,style:{order:c},children:(0,a.jsx)(x.A.Item,{...r,className:"mb-0",name:"sourceUrl",rules:E.link,label:(0,a.jsx)(M,{}),children:(0,a.jsx)(m.A,{placeholder:(0,l.hw)({id:"message.urlStartWithTips"})})})}),(0,a.jsx)(x.A.List,{name:t,children:()=>d.map((e,t)=>{let{id:s,fieldName:d,fieldType:c,tooltip:u,extra:m,enable:h}=e;return["api.label.sourceUrl","operationId","api.label.sampleCode"].includes(d)||!h||(null==o?void 0:o.includes(s))?null:(0,a.jsx)(y.A,{...n,style:{order:t},children:(0,a.jsx)(x.A.Item,{...r,className:"mb-0",name:`${s}`,rules:(null==m?void 0:m.required)?[...E[c]||[],{required:!0,message:(0,l.hw)({id:"project.label.apiCustomField.required.message"})}]:E[c]||[],label:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{children:d}),u&&(0,a.jsx)(p.A,{className:"ml-1",title:u,children:(0,a.jsx)(A.A,{type:"icon-CircleInformation",size:14,color:"var(--ui-disabled-color)"})})]}),children:(0,a.jsx)(_,{id:s,fieldType:c,options:i,extra:m})})},s)})})]})}},715310:function(e,t,i){"use strict";i.d(t,{c:()=>l});var a=i(967860),n=i(398380);let l=(0,i(641486).createContext)((0,n.cloneDeep)(a.JW.httpApi))},811471:function(e,t,i){"use strict";i.d(t,{Ez:()=>o,SW:()=>s,XW:()=>r,zr:()=>l});var a=i(740565),n=i(689368);function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=!(arguments.length>2)||void 0===arguments[2]||arguments[2];return e.name||e.oasKey||(i?`${t+1}`:"")}function r(e,t){let i=!(arguments.length>2)||void 0===arguments[2]||arguments[2];return e.map((e,t)=>({example:e,originIndex:t})).filter(e=>{let{example:i}=e;return i.mediaType===t}).map((e,t)=>{let{example:a,originIndex:n}=e;return{label:l(a,t,i),value:n,example:a}})}function s(e){var t,i;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e.mediaType||e.type;return(null==(i=e.examples)||null==(t=i.find(e=>e.mediaType===n))?void 0:t.value)||e.example||e.sampleValue||a}function o(e,t){let i=(0,n.DA)(e=>{var t;return null==(t=e.projectSetting.projectSettingData)?void 0:t.language}),l=t?e.filter(e=>e.mediaType===t).length+1:e.length+1;return`${(0,a.J$)(i,{descriptor:{id:"example"}})} ${l}`}},226487:function(e,t,i){"use strict";let a,n;i.d(t,{nS:()=>ey,MX:()=>ea,$R:()=>et,Wj:()=>ei,mt:()=>em,Vs:()=>ev,Hs:()=>ee,hF:()=>eu,Zd:()=>W,h:()=>eg,Gg:()=>eo,hv:()=>ef,ye:()=>eh,rH:()=>el,J9:()=>J,sX:()=>Z,LU:()=>X,Qo:()=>es,ax:()=>ed,tq:()=>ep,de:()=>er,aW:()=>ec});var l,r=i(838e3),s=i(600508),o=i(562887),d=i(913385),c=i(729968),u=i(740565),p=i(165311),m=i(153876),h=i(502974),v=i(730367),f=i(302783),g=i(586708),y=i(751527),x=i(200384),A=i(674984),j=i(435685),b=i(603683),w=i(269966),S=i(833774),C=i(506598),I=i(838487),N=i.n(I),k=i(969812),T=i(554692),M=i(257100),E=i(458184),_=i(131774),F=i(638224),D=i(671466),R=i(398380),O=i(641486),P=i.n(O),L=i(809697),$=i(960540);function B(e){let{cell:t,cellProps:i}=e,a=t.row.original,{value:n,onChange:l,className:s,indeterminate:o,disabled:d,style:c,onSubmit:u}=i,p=!!n,m=(0,h.Jt)(a),v=(0,$.X)(e=>e.config),f=m?(()=>{let e=a.name in v?v[a.name]:null;if(!e)return d;let i=e.checkable;return"function"==typeof i?!i(n,t.getContext()):!i})():d;return(0,r.jsx)(k.A,{className:N()(s,"ui-checkbox-variant-square"),checked:p,onChange:e=>{null==l||l(e.target.checked),null==u||u(e.target.checked)},indeterminate:o,disabled:d||f,color:"green",style:c})}function z(e){var t;let i={title:(0,u.hw)({id:"api.parameterLabel.enable"}),dataIndex:"enable",headerRender:function(e){var t,i,a;let n=(null==(t=e.options.meta)?void 0:t.props.mode)==="simple",l=null!=(a=null==(i=e.options.meta)?void 0:i.getTableOriginalValue().filter(e=>!(0,h.Jt)(e)))?a:[],s=l.every(e=>e.enable),o=l.some(e=>e.enable);return 0===l.length?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)(_.S,{className:`ui-editable-table${n?"-simple":""}__tool`,value:s,indeterminate:!s&&o,onChange:()=>{var t,i,a;let n=null!=(a=null==(t=e.options.meta)?void 0:t.getTableOriginalValue())?a:[],l=!s;null==(i=e.options.meta)||i.updateTableValue(n.map(e=>e.enable===l||(0,h.Jt)(e)?e:{...e,enable:l}))}})},width:32,align:"center",componentType:"circleCheckbox",cellRender:(e,t,i)=>(0,r.jsx)(B,{cellProps:i,cell:t}),bulkEditMode:["comma"],addRowVisibleCell:!1,hiddenCellBorder:!0,disableResize:!0};return null!=(t=null==e?void 0:e(i))?t:i}var U=i(731369);function H(e){var t;let i={title:(0,u.hw)({id:"api.parameterLabel.value"}),dataIndex:"example",width:.26,hiddenCellBorder:!0,bulkEditMode:["comma","colon"],bulkEditGetValueByType:e=>Array.isArray(e)?`["${e.join('","')}"]`:null==e?void 0:e.toString(),bulkEditIsCalcArray:e=>{let{type:t}=e;return!!t&&w.hG.Array===t||!1},placeholder:e=>e.row.getCanExpand()?(0,u.hw)({id:"api.parameterLabel.value"}):"",cellRender:function(e,t,i){var a,n,l;let{value:s,onSubmit:u,onChange:p,disabled:m,style:v,placeholder:f}=i,{row:g}=t,y=g.original,{type:x}=g.original,A=(0,h.Jt)(y),j=null==(l=t.getContext().table.options.meta)||null==(n=l.props)||null==(a=n.tableExtraProps)?void 0:a.moduleId;return(0,r.jsx)($.Eu,{selector:e=>e.recordCanBeOverwriteClassName,children:e=>{let t=e(y);return(0,h.Jt)(y)?(0,r.jsx)(U.G,{className:t,name:y.name}):w.hG.Array===x?(0,r.jsx)(o.z,{className:t,style:{width:"100%",...v},moduleId:j,renderInputAvailable:{conditions:{type:x,isSystemHeaderRecord:A,record:y,cell:g.original},renderInputProps:{value:s,onSubmit:u,onChange:p,autoCompleteList:b.pp}},defaultValue:s,placeholder:f,value:s,disabled:m,onChange:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];p(e),null==u||u(e)}}):(0,r.jsx)(c.A,{className:t,realtimeTrigger:!0,style:v,moduleId:j,disabled:m,placeholder:f,value:s,defaultValue:s,renderInput:(0,d.A)({type:x,isSystemHeaderRecord:A,record:y,cell:g.original},{value:s,onSubmit:u,onChange:p,autoCompleteList:b.pp}),onChange:e=>{try{p(e),null==u||u(e)}catch(e){}}})}})}};return null!=(t=null==e?void 0:e(i))?t:i}var V=i(24525),K=i(137486);function q(e){var t;let i="header",a={dataIndex:"name",title:(0,u.hw)({id:"api.parameterLabel.name"}),width:.2,placeholder:(e,t)=>t?(0,u.hw)({id:"commonParameter.title.addParameter"}):(0,u.hw)({id:"commonParameter.title.name"}),componentType:"autoComplete",componentExtraProps:e=>({options:b.li,filterOption:(e,t)=>-1!==t.value.toLowerCase().indexOf(e.toLowerCase()),onPaste:t=>(0,K.T)(e,t)}),bulkEditMode:["comma","colon"],cellRender:(e,t,i)=>{let a=t.row.original;return(0,h.Jt)(a)?(0,r.jsx)($.Eu,{selector:e=>e.config,children:e=>{let t=e[a.name];return(0,r.jsxs)("div",{className:"flex flex-1 items-center w-full overflow-hidden",style:{paddingLeft:"5px",paddingRight:"5px"},children:[(0,r.jsx)("div",{className:"flex-1",style:{color:"var(--ui-text-color-secondary)"},children:a.name}),t.tooltip?(0,r.jsx)(T.A,{overlayStyle:{width:"550px",maxWidth:"550px"},overlay:t.tooltip,children:(0,r.jsx)(V.A,{})}):null]})}}):e},rules:[{validator:(e,t)=>{let a=t.row.original;if((0,h.Jt)(a))return;if(!e)return{type:"error",message:(0,u.hw)({id:"commonParameter.title.nameNotNull.message"})};let{row:n,table:l}=t.getContext();if(i){var s,o,d,c;let t=null==(d=l.options.meta)||null==(o=d.props)||null==(s=o.tableExtraProps)?void 0:s.httpApiIdentityPattern;if(t&&(t.bodyType||t.type)===i&&(null==t||null==(c=t.fields)?void 0:c.includes(e)))return{type:"info",message:"",icon:(0,r.jsx)(p.A,{})}}let m=e.startsWith(" "),v=e.length>1&&e.endsWith(" ");if(m&&!v)return{type:"info",message:(0,y.a)({id:"containsSpacesAtBeginning"})};if(m&&v)return{type:"info",message:(0,y.a)({id:"containsSpacesAtBothEnds"})};if(!m&&v)return{type:"info",message:(0,y.a)({id:"containsSpacesAtEnd"})};let f=n.index;if(l.options.data.find((t,i)=>f!==i&&t.name===e&&!(0,h.Jt)(t)))return{type:"error",message:(0,u.hw)({id:"columnRepeated"})}}}],addRowVisibleCell:!0};return null!=(t=null==e?void 0:e(a))?t:a}let G="zh-CN"===(0,u.JK)()?42:72,W=()=>{let{utils:{generatorIdModule:{generatorId:e}}}=j.baseContainer.getItemsSync(e=>[e.utils]);return{required:!1,description:"",type:"string",id:e(),example:"",enable:!0,name:""}},J=e=>({dataIndex:"name",title:(0,u.hw)({id:"api.parameterLabel.name"}),width:.2,placeholder:(e,t)=>t?(0,u.hw)({id:"commonParameter.title.addParameter"}):(0,u.hw)({id:"commonParameter.title.name"}),componentType:"input",bulkEditMode:["comma","colon"],rules:[{validator:(t,i)=>{if(!t)return{type:"error",message:(0,u.hw)({id:"commonParameter.title.nameNotNull.message"})};let{row:a,table:n}=i.getContext();if(e){var l,s,o,d;let i=null==(o=n.options.meta)||null==(s=o.props)||null==(l=s.tableExtraProps)?void 0:l.httpApiIdentityPattern;if(i&&(i.bodyType||i.type)===e&&(null==i||null==(d=i.fields)?void 0:d.includes(t)))return{type:"info",message:"",icon:(0,r.jsx)(p.A,{})}}let c=t.startsWith(" "),m=t.length>1&&t.endsWith(" ");if(c&&!m)return{type:"info",message:(0,y.a)({id:"containsSpacesAtBeginning"})};if(c&&m)return{type:"info",message:(0,y.a)({id:"containsSpacesAtBothEnds"})};if(!c&&m)return{type:"info",message:(0,y.a)({id:"containsSpacesAtEnd"})};let h=a.index;if(n.options.data.find((e,i)=>h!==i&&e.name===t))return{type:"error",message:(0,u.hw)({id:"columnRepeated"})}}}],addRowVisibleCell:!0,componentExtraProps:e=>{var t,i;let{row:a}=e.getContext();return(null==(i=a.original)||null==(t=i.schema)?void 0:t.deprecated)===!0?{style:{textDecoration:"line-through"},className:"line-through-select",onPaste:t=>(0,K.T)(e,t)}:{onPaste:t=>(0,K.T)(e,t)}}});function Y(e){let{cell:t,cellProps:i,children:a,typeSelectOptions:n,stringBinaryToFile:l,disabledRequiredTooltip:s}=e,{row:o}=t.getContext(),{moduleId:d}=(0,O.useContext)(m.D),c=P().useMemo(()=>{let{jsonSchemaUtils:e}=C.utilsContainer.getItemsSync(e=>[e.jsonSchemaUtils]),{ParameterTypeSchema:t}=e;return t.parameterToSchema(o.original,l)},[o.original,l]),u=P().useMemo(()=>n.filter(e=>!e.disabled&&"string"==typeof e.value).map(e=>e.value),[n]);return(0,r.jsx)(A.hL,{children:(0,r.jsx)(x.aA.Provider,{value:{hiddenXmlOptions:!0,hiddenContentSchemaOptions:!0,showTitleInTable:!0,sampleValueUseMore:!0,containerSize:"normal",moduleId:d,actions:{changeEditorSchemaAction:e=>{var i,a,n,r,s,o,d;let c={};x.Vx.changeEditorSchemaAction(c,e);let{table:p,row:m}=t.getContext(),h=null!=(a=null==(i=p.options.meta)?void 0:i.getTableOriginalValue())?a:[];if(h[m.index]){let{jsonSchemaUtils:e}=C.utilsContainer.getItemsSync(e=>[e.jsonSchemaUtils]),{ParameterTypeSchema:t}=e,i=t.getOldTypeBySchema(c.data,u,l);h[m.index]={...h[m.index],type:i,schema:c.data},(null==(s=p.options.meta)||null==(r=s.props)||null==(n=r.columns)?void 0:n.some(e=>"defaultValue"===e.dataIndex))&&(h[m.index].defaultValue=null!=(d=h[m.index].schema.default)?d:""),null==(o=p.options.meta)||o.updateTableValue([...h])}}}},children:(0,r.jsx)(g.A,{prefix:[],schema:c,disabled:i.disabled,required:o.original.required,featureChangeRequire:e=>{var i,a,n;let{table:l,row:r}=t.getContext(),s=null!=(a=null==(i=l.options.meta)?void 0:i.getTableOriginalValue())?a:[];s[r.index]&&(s[r.index]={...s[r.index],required:e},null==(n=l.options.meta)||n.updateTableValue([...s]))},disabledRequired:s||i.disabled,disabledRequiredTooltip:s,isHiddenRequired:!1,isHiddenNullable:!0,rowRef:{},typeSelectRender:()=>a,getCustomAdvancedSettingsShow:()=>!0,getMoreTypeClassName:e=>e?"order-6":"ui-editable-table-body-cell-simple__wrapper__mergeHidden order-6",getRequiredClassName:e=>e?"order-4":"ui-editable-table-body-cell-simple__wrapper__mergeHidden order-4",getNullableClassName:e=>e?"order-5":"ui-editable-table-body-cell-simple__wrapper__mergeHidden order-5",onSelect:R.noop,enabledAdvSetting:!0,schemaTypeSelectOptions:n,moduleId:d,style:{...i.style,flex:0,padding:0}})})})}let Z=(e,t,i,a,n,l)=>({dataIndex:"type",title:(0,u.hw)({id:"api.parameterLabel.type"}),width:90,componentType:"select",bulkEditMode:["comma"],bulkEditInitType:(i,a)=>(null==e?void 0:e.some(e=>e.value===i))?i:Array.isArray(null==a?void 0:a[t])?w.hG.Array:w.hG.String,rules:[{validator:(e,t)=>{let{isIdentityPattern:i,type:a}=t.row.original;if(i&&("file"===a||"array"===a))return{type:"error",message:(0,u.hw)({id:"commonParameter.title.typeNotAllow.message"},{type:a})}}}],componentExtraProps:t=>{var n;let l=t.getValue();return{options:e.map(e=>({label:e.value,value:e.value,...e})),className:N()(null==i?void 0:i.className,null!=(n=S.q[l])?n:"text-purple-6"),onSelect:e=>{if(a){var i,n,l,r;let{row:a,table:s}=t.getContext(),o=null!=(n=null==(i=s.options.meta)?void 0:i.getTableOriginalValue())?n:[];if(o[a.index]){let{jsonSchemaUtils:t}=C.utilsContainer.getItemsSync(e=>[e.jsonSchemaUtils]),{ParameterTypeSchema:i}=t;o[a.index]={...o[a.index],type:e,schema:i.generateSchemaByType(e)},null==(r=s.options)||null==(l=r.meta)||l.updateTableValue([...o])}}},...i,bordered:!1,showArrow:!1}},defaultValue:"string",cellRender:(t,i,s)=>{var o,d;let{row:c,table:u}=i.getContext(),p=c.index,m=(null==(d=u.options.meta)||null==(o=d.props)?void 0:o.addable)&&u.options.data.length-1<=p;return!a||m?t:(0,r.jsx)(Y,{cell:i,cellProps:s,typeSelectOptions:e,stringBinaryToFile:n,disabledRequiredTooltip:l,children:t})}});function Q(e){var t,i;let{table:a}=e,[n,l]=P().useState(!1),s=null!=(i=null==(t=a.options.meta)?void 0:t.getTableOriginalValue())?i:[],o=!!s.length&&s.every(e=>e.required||void 0===e.required),d=s.some(e=>e.required);return(0,r.jsxs)("div",{onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),style:{width:"100%",height:"100%",textAlign:"center"},children:[n&&(0,r.jsx)(k.A,{checked:o,indeterminate:!o&&d,onChange:()=>{var e,t,i;let n=null!=(i=null==(e=a.options.meta)?void 0:e.getTableOriginalValue())?i:[],l=!o;null==(t=a.options.meta)||t.updateTableValue(n.map(e=>e.required===l?e:{...e,required:l}))}}),!n&&(0,r.jsx)("span",{children:(0,u.hw)({id:"api.parameterLabel.required"})})]})}function X(e){var t,i,a;let{table:n,column:l,undefinedIsNoRequired:s}=e,[o,d]=P().useState(!1),c=null!=(a=null==(t=n.options.meta)?void 0:t.getTableOriginalValue())?a:[],p=!!c.length&&c.every(e=>e.required||!s&&void 0===e.required);return(0,r.jsxs)("div",{onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),className:"w-full h-full flex",children:[null==(i=l.columnDef.meta)?void 0:i.title,(o||p)&&(0,r.jsx)(T.A,{overlay:(0,u.hw)({id:"api.parameterLabel.isAllRequired"}),children:(0,r.jsx)(F.Y,{style:{marginLeft:6},iconType:"icon-must",value:p,onChange:()=>{var e,t,i;let a=null!=(i=null==(e=n.options.meta)?void 0:e.getTableOriginalValue())?i:[],l=!p;null==(t=n.options.meta)||t.updateTableValue(a.map(e=>e.required===l?e:{...e,required:l}))}})})]})}let ee={dataIndex:"required",componentType:"checkbox",align:"center",hiddenCellBorder:!0,bulkEditMode:["comma"],title:(0,u.hw)({id:"api.parameterLabel.required"}),bulkEditComponentType:"checkbox",width:G,headerRender:e=>(0,r.jsx)(Q,{table:e}),cellRender:()=>(0,r.jsx)(r.Fragment,{})},et={title:(0,u.hw)({id:"api.parameterLabel.sampleValue"}),dataIndex:"example",width:.26,hiddenCellBorder:!0,bulkEditMode:["comma","colon"],bulkEditGetValueByType:e=>Array.isArray(e)?`["${e.join('","')}"]`:null==e?void 0:e.toString(),bulkEditIsCalcArray:e=>{let{type:t}=e;return!!t&&w.hG.Array===t||!1},placeholder:e=>e.getContext().row.getCanExpand()?(0,u.hw)({id:"api.parameterLabel.value"}):"",cellRender:function(e,t,i){var a,n,l;let{value:s,onSubmit:u,onChange:p,disabled:m,style:h,placeholder:v}=i,{row:f}=t,{type:g}=f.original,y=null==(l=t.getContext().table.options.meta)||null==(n=l.props)||null==(a=n.tableExtraProps)?void 0:a.moduleId;return w.hG.Array===g?(0,r.jsx)(o.z,{style:{width:"100%",...h},defaultValue:s,value:s,moduleId:y,placeholder:v,renderInputAvailable:{conditions:{type:g,cell:f.original},renderInputProps:{value:s,onSubmit:u,onChange:p}},disabled:m,onChange:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];p(e),null==u||u(e)}}):w.hG.File===g?(0,r.jsx)("div",{className:"w-full py-1",style:{paddingLeft:6,paddingRight:6},children:(0,r.jsx)(L.A,{buttonSize:"small",multiple:!0,disabled:m,defaultValue:s,value:s,onChange:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];p(e),null==u||u(e)}})}):(0,r.jsx)(c.A,{realtimeTrigger:!0,style:h,moduleId:y,disabled:m,placeholder:v,value:s,renderInput:(0,d.A)({type:g,cell:f.original},{value:s,onSubmit:u,onChange:p}),defaultValue:s,onChange:e=>{try{p(e),null==u||u(e)}catch(e){}}})}},ei={title:(0,u.hw)({id:"api.parameterLabel.description"}),dataIndex:"description",width:void 0,componentType:"textArea",bulkEditMode:["comma"],placeholder:e=>e.row.getCanExpand()?(0,u.hw)({id:"api.parameterLabel.description"}):"",componentExtraProps:e=>({autoSize:{minRows:1,maxRows:7}})},ea={title:(0,u.hw)({id:"api.parameterLabel.enable"}),dataIndex:"enable",headerRender:function(e){var t,i,a;let n=(null==(t=e.options.meta)?void 0:t.props.mode)==="simple",l=null!=(a=null==(i=e.options.meta)?void 0:i.getTableOriginalValue())?a:[],s=l.every(e=>e.enable),o=l.some(e=>e.enable);return 0===l.length?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)(_.S,{className:`ui-editable-table${n?"-simple":""}__tool`,value:s,indeterminate:!s&&o,onChange:()=>{var t,i,a;let n=null!=(a=null==(t=e.options.meta)?void 0:t.getTableOriginalValue())?a:[],l=!s;null==(i=e.options.meta)||i.updateTableValue(n.map(e=>e.enable===l?e:{...e,enable:l}))}})},width:32,align:"center",componentType:"circleCheckbox",bulkEditMode:["comma"],addRowVisibleCell:!1,hiddenCellBorder:!0,disableResize:!0},en={title:(0,u.hw)({id:"api.parameterLabel.fixedValue"}),dataIndex:"fixedValue",bulkEditMode:["comma"],enableHiding:!0,componentType:"switch",align:"left",hiddenCellBorder:!0,width:120,tip:(0,u.hw)({id:"api.parameter.pathColumns.fixedValueToolTips"})},el=(e,t)=>({title:"",dataIndex:"allowEmptyValue",componentType:"select",bulkEditMode:[],width:90,mergeDataIndex:"name",cellRender:(i,a)=>{var n,l;let{row:s,table:o}=a.getContext(),d=s.index,c=s.original[e];if((null==(l=o.options.meta)||null==(n=l.props)?void 0:n.addable)&&o.options.data.length-1<=d)return(0,r.jsx)(r.Fragment,{});if(null!=c&&""!==c)return(0,r.jsx)(T.A,{title:(0,u.hw)({id:"api.parameter.query.hasValue.true.tooltip"}),children:(0,r.jsx)("div",{className:"inline-flex justify-center items-center",style:{width:"24px",height:"24px",flexBasis:"24px",flexShrink:0},children:(0,r.jsx)(D.A,{type:"icon-equal",color:"var(--ui-disabled-color)"})})});let p=t=>{var i,a,n;let l=[...null!=(n=null==(i=o.options.meta)?void 0:i.getTableOriginalValue())?n:[]];l[d]={...l[d],[e]:t?"":void 0},null==(a=o.options.meta)||a.updateTableValue(l)};return(0,r.jsx)(T.A,{title:(0,u.hw)({id:"api.parameter.query.allowEmptyValue.tooltip"}),children:(0,r.jsx)(M.A,{trigger:["click"],menu:{items:[{key:"empty",label:(0,r.jsxs)("span",{children:[(0,r.jsx)(D.A,{type:"icon-equal-dashed",color:"var(--ui-text-color-secondary)",className:"mr-2"}),(0,u.hw)({id:"api.parameter.query.allowEmptyValue.false"})]}),onClick:()=>{p(!1)}},{key:"notEmpty",label:(0,r.jsxs)("span",{children:[(0,r.jsx)(D.A,{type:"icon-equal",color:"var(--ui-text-color-secondary)",className:"mr-2"}),(0,u.hw)({id:"api.parameter.query.allowEmptyValue.true"})]}),onClick:()=>{p(!0)}}]},children:(0,r.jsx)(E.A,{size:"small",type:"text",icon:"string"==typeof c?(0,r.jsx)(D.A,{type:"icon-equal",color:"var(--ui-text-color-secondary)"}):(0,r.jsx)(D.A,{type:"icon-equal-dashed",color:"var(--ui-text-color-secondary)"}),style:t,className:"flex-shrink-0"})})})}}),er={title:(0,u.hw)({id:"api.parameterLabel.contentType"}),dataIndex:"contentType",bulkEditMode:["comma"],enableHiding:!0,componentType:"autoComplete",align:"left",hiddenCellBorder:!1,width:227,placeholder:e=>e.row.getCanExpand()?(0,u.hw)({id:"api.parameterLabel.contentType.placeholder"}):"",tip:(0,u.hw)({id:"api.parameter.pathColumns.contentTypeToolTips"}),componentExtraProps:{options:b.pp,filterOption:(e,t)=>-1!==t.value.toLowerCase().indexOf(e.toLowerCase())}},es=[{...J(),cellRender:(0,f.v)({handleRepeat:!0})},{...Z(s.lf,"example",{style:{width:"unset"},showArrow:!1},!0),headerRender:(e,t)=>(0,r.jsx)(X,{table:e,column:t}),width:120},{...ee,componentType:"starCheckbox",mergeDataIndex:"type"},{...et},{...ei,cellRender:v.R}],eo=[{...ea},es[0],{...es[3],title:(0,u.hw)({id:"api.parameterLabel.value"})},{...es[1],enableExpand:!0,get expandFollowDataIndex(){return eo[1].dataIndex}},{...es[2],enableExpand:!0},{...es[4],enableExpand:!0,get expandFollowDataIndex(){return eo[2].dataIndex}}],ed=[{...J("query"),cellRender:(0,f.v)({handleRepeat:!0})},{...Z(s.eK,"example",{style:{width:"unset"},showArrow:!1},!0),headerRender:(e,t)=>(0,r.jsx)(X,{table:e,column:t}),width:120},{...ee,componentType:"starCheckbox",mergeDataIndex:"type"},{...et},{...en},{...ei,cellRender:v.R},el("example")],ec=[{...ea},ed[0],{...ed[3],title:(0,u.hw)({id:"api.parameterLabel.value"})},{...ed[1],enableExpand:!0,get expandFollowDataIndex(){return ec[1].dataIndex}},{...ed[2],enableExpand:!0},{...ed[4]},{...ed[5],width:void 0,enableExpand:!0,get expandFollowDataIndex(){return ec[2].dataIndex}},{...ed[6]}],eu=[(l=b.li,a=J("header"),{...a,componentType:"autoComplete",componentExtraProps:e=>{var t;return{..."function"==typeof a.componentExtraProps?a.componentExtraProps(e):null!=(t=a.componentExtraProps)?t:{},options:l,filterOption:(e,t)=>-1!==t.value.toLowerCase().indexOf(e.toLowerCase())}}}),{...Z(s.QC,"example",{style:{width:"unset"},showArrow:!1},!0),headerRender:(e,t)=>(0,r.jsx)(X,{table:e,column:t}),width:120},{...ee,componentType:"starCheckbox",mergeDataIndex:"type"},{...et,cellRender:function(e,t,i){var a,n,l;let{value:s,onSubmit:u,onChange:p,disabled:m,style:v,placeholder:f}=i,{row:g}=t,{type:y}=g.original,x=g.original,A=(0,h.Jt)(x),j=null==(l=t.getContext().table.options.meta)||null==(n=l.props)||null==(a=n.tableExtraProps)?void 0:a.moduleId;return w.hG.Array===y?(0,r.jsx)(o.z,{style:{width:"100%",...v},defaultValue:s,value:s,moduleId:j,renderInputAvailable:{conditions:{cell:g.original,isSystemHeaderRecord:A,record:x,type:y},renderInputProps:{value:s,onSubmit:u,onChange:p,autoCompleteList:b.pp}},placeholder:f,disabled:m,onChange:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];p(e),null==u||u(e)}}):w.hG.File===y?(0,r.jsx)("div",{className:"w-full py-1",style:{paddingLeft:6,paddingRight:6},children:(0,r.jsx)(L.A,{buttonSize:"small",multiple:!0,disabled:m,defaultValue:s,value:s,onChange:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];p(e),null==u||u(e)}})}):(0,r.jsx)(c.A,{realtimeTrigger:!0,style:v,moduleId:j,disabled:m,placeholder:f,renderInput:(0,d.A)({cell:g.original,isSystemHeaderRecord:A,record:x,type:y},{value:s,onSubmit:u,onChange:p,autoCompleteList:b.pp}),value:s,defaultValue:s,onChange:e=>{try{p(e),null==u||u(e)}catch(e){}}})}},{...ei,cellRender:v.R}],ep=[z(),q(),H(),{...eu[1],enableExpand:!0,get expandFollowDataIndex(){return ep[1].dataIndex},cellRender(e,t,i){var a,n,l;let s=t.row.original;return(0,h.Jt)(s)?(0,r.jsx)("div",{className:"w-full select-none pointer-events-none",style:{padding:"0px 5px",color:"var(--ui-text-color-secondary)"},children:s.type}):null!=(l=null==(n=eu[1])||null==(a=n.cellRender)?void 0:a.call(n,e,t,i))?l:e}},{...eu[2],enableExpand:!0},{...eu[4],enableExpand:!0,cellRender(e,t){let i=t.row.original;return(0,h.Jt)(i)?(0,r.jsx)("div",{className:"w-full pointer-events-none",style:{background:"var(--ui-table-row-hover-bg)"}}):e},get expandFollowDataIndex(){return ep[2].dataIndex}}];z(),q(),H(),eu[1],eu[2],eu[4];let em=[{...J("formdata"),cellRender:(0,f.v)({handleRepeat:!0})},{...Z(s.aq,"example",{style:{width:"unset"},showArrow:!1},!0,!0),headerRender:(e,t)=>(0,r.jsx)(X,{table:e,column:t}),width:120},{...ee,componentType:"starCheckbox",mergeDataIndex:"type"},{...et},{...er},{...ei,cellRender:v.R}],eh=[{...ea},em[0],{...em[3],title:(0,u.hw)({id:"api.parameterLabel.value"})},{...em[1],enableExpand:!0,expandFollowDataIndex:em[0].dataIndex},{...em[2],enableExpand:!0},{...em[4],enableExpand:!0,expandFollowDataIndex:em[3].dataIndex},{...em[5],enableExpand:!0,expandFollowDataIndex:em[0].dataIndex}],ev=[{...J("urlencoded"),cellRender:(0,f.v)({handleRepeat:!0})},{...Z(s.hW,"example",{style:{width:"unset"},showArrow:!1},!0),headerRender:(e,t)=>(0,r.jsx)(X,{table:e,column:t}),width:120},{...ee,componentType:"starCheckbox",mergeDataIndex:"type"},{...et},{...ei,cellRender:v.R}],ef=[{...ea},ev[0],{...ev[3],title:(0,u.hw)({id:"api.parameterLabel.value"})},{...ev[1],enableExpand:!0,expandFollowDataIndex:ev[0].dataIndex},{...ev[2],enableExpand:!0},{...ev[4],enableExpand:!0,expandFollowDataIndex:ev[3].dataIndex}],eg=[(n=J(),{...n,componentType:"text",disabled:!0,tooltip:(0,u.hw)({id:"api.parameter.pathColumns.nameToolTips"}),tooltipExtraProps:{overlayInnerStyle:{fontWeight:"var(--ui-font-weight-400)"}},componentExtraProps:e=>{var t,i;let a="function"==typeof n.componentExtraProps?n.componentExtraProps(e):null!=(t=n.componentExtraProps)?t:{};return{...a,style:{...null!=(i=a.style)?i:{},cursor:"not-allowed"}}}}),{...Z(s.Nn,"example",{style:{width:"unset"},showArrow:!1},!0,void 0,(0,u.hw)({id:"api.parameter.pathColumns.requiredToolTips"})),width:120},{...ee,disabled:!0,headerRender:void 0,componentType:"starCheckbox",mergeDataIndex:"type"},{...et},{...ei}],ey=[{...ea,headerRender:()=>(0,r.jsx)(r.Fragment,{}),disabled:!0,componentExtraProps:{checked:!0},tooltip:void 0},eg[0],{...eg[3],title:(0,u.hw)({id:"api.parameterLabel.value"})},{...eg[1],enableExpand:!0,expandFollowDataIndex:eg[0].dataIndex},{...eg[2],enableExpand:!0},{...eg[4],width:void 0,enableExpand:!0,expandFollowDataIndex:eg[3].dataIndex}]},229111:function(e,t,i){"use strict";i.d(t,{_:()=>a});let a={urlencoded:"application/x-www-form-urlencoded",formdata:"multipart/form-data",json:"application/json",xml:"application/xml",html:"text/html",raw:"text/plain",binary:"application/octet-stream",msgpack:"application/x-msgpack",text:"text/plain",eventStream:i(656502).Dz}},747120:function(e,t,i){"use strict";i.d(t,{q:()=>s});var a=i(838e3),n=i(294359),l=i(138249),r=i(187e3);function s(e){return(0,a.jsx)(l.A,{size:"small",options:n.Pw,defaultValue:"json",value:e.value,onChange:t=>{var i;return null==(i=e.onChange)?void 0:i.call(e,t)},style:{width:"auto",maxWidth:130},borderless:!0,className:r.A.borderless,dropdownMatchSelectWidth:!1})}},298033:function(e,t,i){"use strict";i.d(t,{Ay:()=>f,fe:()=>v,xj:()=>h});var a=i(838e3),n=i(838487),l=i.n(n),r=i(2409),s=i(641486),o=i(229111),d=i(943645),c=i(740565),u=i(554692),p=i(671466),m=i(3126);function h(e){let t=Number(e);return t>=100&&t<=199||"1XX"===e?{text:"var(--ui-blue-6)",background:"var(--ui-blue-1)",border:"var(--ui-blue-2)"}:t>=200&&t<=299||"2XX"===e?{text:"var(--ui-green-6)",background:"var(--ui-green-1)",border:"var(--ui-green-2)"}:t>=300&&t<=399||"3XX"===e?{text:"var(--ui-blue-6)",background:"var(--ui-blue-1)",border:"var(--ui-blue-2)"}:t>=400&&t<=499||"4XX"===e?{text:"var(--ui-gold-6)",background:"var(--ui-gold-1)",border:"var(--ui-gold-2)"}:t>=500&&t<=599||"5XX"===e?{text:"var(--ui-red-6)",background:"var(--ui-red-1)",border:"var(--ui-red-2)"}:{text:"var(--ui-blue-6)",background:"var(--ui-blue-1)",border:"var(--ui-blue-2)"}}function v(e,t,i,a){var n,l,r,s,d;let c=null!=(l=null!=(n=e.name)?n:null==t?void 0:t.name)?l:"";return c?c:(null!=(r=null==i?void 0:i.filter(e=>String(e)===String(a)))?r:[]).length<=1?"":(0,m.O)(e)?e.mediaType||o._[null!=(s=e.contentType)?s:""]||"":t&&(t.mediaType||o._[null!=(d=t.contentType)?d:""])||""}let f=function(e){let{referencedComponent:t,moduleId:i,response:n,allUsedResponseCodes:o}=e,f=(0,s.useMemo)(()=>{var e;return null!=(e=n.code)?e:null==t?void 0:t.code},[n,t]),g=(0,s.useMemo)(()=>v(n,t,o,f),[n,o,t,f]),{text:y}=(0,s.useMemo)(()=>h(String(null!=f?f:0)),[f]),x=(0,s.useMemo)(()=>{if((0,m.B)(n)&&t&&i&&i!==t.moduleId)return(0,a.jsx)(d.H,{moduleId:t.moduleId,className:"text-color-secondary",prefix:(0,a.jsx)("span",{className:"mr-1 text-color-tertiary",children:(0,c.hw)({id:"projectModule.from"})})})},[n,t,i]);return(0,a.jsx)(u.A,{placement:"top",title:x,children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:r.A.response__code,style:{color:y},children:f}),!!g&&(0,a.jsx)("span",{className:l()("truncate inline-block",r.A["response__tab-name"]),title:n.name,children:g}),t&&(0,a.jsx)(p.A,{type:"icon-response-component",color:"var(--ui-text-color-tertiary)"})]})})}},440781:function(e,t,i){"use strict";i.d(t,{T:()=>o});var a=i(838e3),n=i(452054),l=i(282066),r=i(325318);let s="httpStatusSelect-jR0aRm";function o(e){let t=(0,a.jsx)(l.A,{size:"small",onChange:t=>{e.onChange(t||200)},className:s,value:e.value,bordered:!1,placeholder:e.placeholder,disabled:e.readonly});return(0,a.jsx)(n.x,{size:"small",value:e.value,wrapperStyle:{minWidth:24,maxWidth:124,paddingRight:4},children:e.permission?(0,a.jsx)(r.y,{permission:e.permission,children:t}):t})}},661182:function(e,t,i){"use strict";i.d(t,{$e:()=>o,Ay:()=>c,DY:()=>d});var a=i(482106),n=i(689368),l=i(69712),r=i(169508),s=i(543013);function o(e){let t=(null==e?void 0:e.code)||200;return{code:t,contentType:(null==e?void 0:e.contentType)||"json",name:d(t),jsonSchema:{type:"object",properties:{}},itemSchema:s.SM}}function d(e){if(r.T0)return"";let t=(0,n.DA)(e=>{var t;return null==(t=e.projectSetting.projectSettingData)?void 0:t.language});return(0,l.jW)(e,t)}let c=function(e,t){var i,n;let r=(0,l.Go)(null==(i=(0,a.Jo)().projectModuleMap.get(e||(0,a.Jo)().firstProjectModuleId))?void 0:i.httpResponseTemplate),s="number"==typeof(null==r?void 0:r.code)?r:o(t);return s.tempId=null!=(n=null==t?void 0:t.tempId)?n:`${new Date().getTime()}`,[s]}},822302:function(e,t,i){"use strict";i.d(t,{A:()=>D,l:()=>_});var a=i(838e3),n=i(949695),l=i(182187),r=i(169508),s=i(511389),o=i(740565),d=i(689368),c=i(221675),u=i(308250),p=i(212168),m=i(412219),h=i(722238),v=i(208335),f=i(664283),g=i(506598),y=i(838487),x=i.n(y),A=i(554692),j=i(963227),b=i(458184),w=i(202130),S=i(637962),C=i(671466),I=i(183092),N=i(398380),k=i(641486),T=i(942034),M=i(389137),E=i(674984);let _=(e,t)=>{let i=`x-${r.A3}-orders`,a={type:"object",properties:{},required:[],[i]:[],definitions:t},{jsonSchemaUtils:{ParameterTypeSchema:n}}=g.utilsContainer.getItemsSync(e=>[e.jsonSchemaUtils]);return e.forEach(e=>{let{name:t,required:l}=e,r=n.parameterToDocViewSchema(e);if(l){var s;null==(s=a.required)||s.push(t)}a.properties&&!a[i].includes(t)&&(a.properties[t]=r,a[i].push(t))}),a},F=e=>{let{data:t,textMap:i={},mode:y,isForSelectors:E=!1,isClassicNarrow:F,readonly:D}=e,R={path:(0,o.hw)({id:"message.pathParameter"}),query:(0,o.hw)({id:"message.queryParameter"}),header:(0,o.hw)({id:"message.headerParameter"}),cookie:(0,o.hw)({id:"message.cookieParameter"}),body:(0,o.hw)({id:"message.bodyParameter"}),...i},O=(0,h.bq)(),{dataModelName:P}=(0,k.useContext)(p.h),{theme:L}=(0,k.useContext)(s.Ay),{locale:$}=(0,o.UX)(),B=(0,k.useMemo)(()=>{let e={};return t.forEach(t=>{var i,a;null!=(a=e[i=t.location])||(e[i]=[]),e[t.location].push(t)}),e},[t]),z=["path","query","header","cookie","body"].map(e=>({location:e,items:B[e]})).filter(e=>!(0,N.isEmpty)(e.items)),U=e=>{var t;return(null==e||null==(t=e.fragment)?void 0:t.isCommonParameter)?(0,a.jsx)(A.A,{title:(0,a.jsx)(T.A,{}),children:(0,a.jsx)(j.A,{color:"success",className:"cursor-pointer",children:(0,o.hw)({id:"global.tag"})})}):(0,a.jsx)(a.Fragment,{})},H=e=>{if(E)return(0,a.jsxs)("div",{className:"text-color-secondary flex items-center",children:[(0,a.jsxs)("div",{children:[(0,o.hw)({id:"description"}),":"]}),(0,a.jsx)(I.A,{style:{marginLeft:"4px",width:F?"30px":"80px",height:"12px"}})]});let t=(0,a.jsx)(l.A,{value:e,locale:(0,o.getUserLocale)()});return"CLASSIC"===y?(0,a.jsx)("div",{style:{"--md-color-bg":"transparent"},children:t}):t},V={enum:(e,t)=>(0,a.jsx)(w.A,{placement:"top",title:null,content:()=>{var e;let i=null!=(e=null==t?void 0:t.map(e=>({label:String(void 0!==e.value?e.value:""),name:e.name,value:void 0!==e.description?e.description:""})))?e:[];return(0,a.jsxs)("div",{className:x()("flex",M.A["enum-popover"]),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:M.A["enum-popover__title"],children:(0,o.hw)({id:"enumeratedValue"})}),i.map(e=>(0,a.jsx)("div",{className:M.A["enum-popover__content"],children:(0,a.jsx)(c.A,{text:e.label,copyText:e.label})},e.label))]}),i.some(e=>""!==e.name)&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:M.A["enum-popover__title"],children:(0,o.hw)({id:"name"})}),i.map(e=>(0,a.jsx)("div",{className:M.A["enum-popover__content"],children:e.name},e.label))]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:M.A["enum-popover__title"],children:(0,o.hw)({id:"description"})}),i.map(e=>(0,a.jsx)("div",{className:M.A["enum-popover__content"],children:e.value},e.label))]})]})},children:(0,a.jsx)("span",{className:"cursor-pointer",children:e})})},K=(0,d.Ay)(e=>e.apiSchema.dataSchemaDefinitions),{jsonSchemaUtils:q}=g.utilsContainer.getItemsSync(e=>[e.jsonSchemaUtils]),{AppJsonSchema2JsonSchemaStandard:G,removeUnnecessaryDefinitionsForJsonSchemaViewer:W}=q;return(0,a.jsx)(a.Fragment,{children:z.map(e=>{let t,i=W(G(_(e.items,K),[],{enableXAppEnum:!0,enableXAppMock:!0}));return(0,a.jsx)(m.A,{children:(0,a.jsx)(S.A,{size:"small",title:R[e.location],className:x()(M.A.parameters__card,{[M.A.parameters__classic]:"CLASSIC"===y,[M.A.parameters__classic__narrow]:"CLASSIC"===y&&F,[M.A.parameters__selector__card]:E,[M.A.parameters__selector__modern]:"MODERN"===y&&E}),extra:!E&&!D&&(t=i,(0,a.jsx)(b.A,{type:"soft",theme:"secondary",icon:(0,a.jsx)(C.A,{type:"icon-button-generate"}),onClick:e=>{O.show(v.G,{schema:t||{},schemaName:P||(null==t?void 0:t.title)||`${(0,f.fj)()}Model`,theme:L.background}),e.stopPropagation()},size:"small",children:(0,o.hw)({id:"codeGenerate"})})),children:((e,t)=>(0,a.jsx)(n.A,{schema:e,locale:$,disableCrumbs:!0,propertyNameRender:E?u.f:u.O,isStateRightAligned:!1,descriptionRender:H,expandedInfos:{typesRightRender:U},valueRenderMap:V,enableDescriptionShowInTitle:!E,viewMode:"write",displayMode:y,appNameLower:r.A3}))(i,e.location)},e.location)},e.location)})})},D=e=>(0,a.jsx)(E.hL,{children:(0,a.jsx)(F,{...e})})},942034:function(e,t,i){"use strict";i.d(t,{A:()=>s});var a=i(838e3),n=i(304984),l=i(740565),r=i(387752);i(641486);let s=()=>(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{children:(0,l.hw)({id:"message.parameterFormGlobal"})}),(0,a.jsx)("span",{className:"cursor-pointer app-text-primary-base",onClick:()=>{(0,r.Du)({activeItemId:n.N.CommonParameter})},children:(0,l.hw)({id:"api.debug.toModify"})})]})},413711:function(e,t,i){"use strict";i.d(t,{A:()=>o,w:()=>s});var a=i(838e3),n=i(910155),l=i(641486);let{ContextProvider:r,useContextStore:s}=(0,n.B)({initMode:"useMemo"}),o=e=>{let{value:t,children:i}=e,[n,s]=(0,l.useState)(null==t?void 0:t.value);return(0,l.useEffect)(()=>{s(null==t?void 0:t.value)},[null==t?void 0:t.value]),(0,a.jsx)(r,{value:{...t,tempValue:n,setTempValue:s},children:i})}},906641:function(e,t,i){"use strict";i.d(t,{I:()=>d});var a=i(838e3),n=i(458184),l=i(671466),r=i(740565),s=i(140049),o=i(511028);let d=e=>{let{modalRef:t,...i}=e,d=(0,o.k)(),c=(0,s.A)(()=>{d({onClose:()=>{var e;null==(e=t.current)||e.close()}})});return(0,a.jsx)(n.A,{type:"text",icon:(0,a.jsx)(l.A,{type:"icon-AiStarLine"}),onClick:c,...i,children:(0,r.hw)({id:"generateWithAI"})})}},40886:function(e,t,i){"use strict";i.d(t,{x:()=>s});var a=i(838e3),n=i(452267),l=i(740565),r=i(511028);let s=e=>{let{menus:t}=e,i=(0,r.k)();return(0,a.jsxs)(n.A,{children:[(0,a.jsx)(n.A.Item,{onClick:()=>{i({})},children:(0,l.hw)({id:"generateWithAI"})},"generateWithAI"),t]})}},511028:function(e,t,i){"use strict";i.d(t,{k:()=>eH});var a=i(838e3),n=i(740565),l=i(558910),r=i(77448),s=i(203807),o=i(222757),d=i(297965),c=i(392106),u=i(404297),p=i(250688),m=i(200384),h=i(674984),v=i(689368),f=i(722238),g=i(941929),y=i(140049),x=i(718180),A=i(764007),j=i(458184),b=i(671466),w=i(641486),S=i(413711);let C="aiChatModalRender-rxDvSX",I="aiChatModalRender__title-WzA7kM",N="aiChatModalRender__sider-kbMgHu",k="aiChatModalSider-o3xLbu",T="aiChatPane-Notwt0",M="aiChatUI-B2JvGH",E="chatMessageList-Zgceaf",_="chatBotMessage-GsU2Ao",F="chatUserMessage-aPJFm3",D="chatBubble-haM0pQ",R="chatBubbleContent-xO8Qlc",O="reasoningBoxContent-km_Qxg",P="chatBubble-N5a_iQ",L="chatBubbleBg-O5oCpv",$="content-YUbDJS";var B=i(838487),z=i.n(B),U=i(163808),H=i(209034);let V=e=>{let{className:t,children:i,contentClassName:n,loading:l,...r}=e;return(0,a.jsx)("div",{className:z()(P,t),...r,children:(0,a.jsx)("div",{className:L,children:(0,a.jsx)("div",{className:z()($,n),children:(0,a.jsxs)(U.A.Text,{children:[l&&(0,a.jsx)(H.y,{className:"appicon mr-1",style:{width:"1em",height:"1em",color:"var(--ui-primary-color)"}}),i]})})})})};var K=i(797091);let q="chatAlert-tYPYQF",G="warning-CQt_BA",W="error-q3faso",J=e=>{let{className:t,content:i,status:n,...l}=e;return(0,a.jsxs)("div",{className:z()(q,t,{[G]:"warning"===n,[W]:"error"===n}),...l,children:[(0,a.jsxs)("p",{className:"m-0",children:["warning"===n&&(0,a.jsx)(b.A,{className:"mr-1",type:"icon-warning-02",color:"var(--ui-warning-color)"}),"error"===n&&(0,a.jsx)(b.A,{className:"mr-1",type:"icon-info-solid",color:"var(--ui-error-color)"})]}),(0,a.jsx)("p",{className:"m-0",style:{wordBreak:"break-word"},children:i})]})},Y=e=>{let{className:t,content:i,reasoningContent:l,status:s}=e,o=["warning","error"].includes(s);return(0,a.jsxs)("div",{className:z()(_,t),children:[!o&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(r.A,{size:16}),(0,a.jsx)("span",{style:{fontWeight:"var(--ui-font-weight-semibold)"},children:(0,n.hw)({id:"ai.chatUI.assistant"})})]}),(null==l?void 0:l.content)&&(0,a.jsx)(K.A,{contentClassName:O,reasoningContent:l}),o&&(0,a.jsx)(J,{className:"w-full",status:s,content:i}),!o&&!(null==l?void 0:l.thinking)&&!!i&&(0,a.jsx)(V,{loading:"loading"===s,children:i})]})},Z=e=>{let{className:t,content:i}=e;return(0,a.jsx)("div",{className:z()(F,t),children:(0,a.jsx)(V,{className:D,contentClassName:R,children:i})})},Q=e=>{let{message:t}=e,i=(0,w.useMemo)(()=>"bot"===t.role?(0,a.jsx)(Y,{status:t.status,content:t.content,reasoningContent:t.reasoningContent}):(0,a.jsx)(Z,{content:t.content}),[t.content,t.role,t.status,t.reasoningContent]);return(0,a.jsx)("div",{children:i})};var X=i(722619),ee=i(331418);let et=e=>{let{className:t,onScrollToBottom:i}=e,{autoScrollToBottom:n}=(0,w.useContext)(X.A),{messages:r}=(0,l.hz)(),s=(0,w.useRef)(null),o=(0,ee.A)(s);return(0,w.useEffect)(()=>{n&&(null==o?void 0:o.height)&&s.current&&i&&i()},[n,null==o?void 0:o.height,i]),(0,a.jsx)("div",{className:z()(E,t),ref:s,children:null==r?void 0:r.map(e=>(0,a.jsx)(Q,{message:e},e.id))})};var ei=i(104459);let ea="aiChatUI-WbC1_8",en="chatSuggestionBox-B7ixk2",el="chatSuggestionBox__title-k5vytS",er="chatSuggestionBox__suggestions-KnjEgN";var es=i(829714),eo=i(309994);let ed=e=>{let{className:t,disabled:i,onCommandClick:l}=e,r=(0,es.gL)();return(0,a.jsxs)("div",{className:z()(en,t),children:[(0,a.jsx)("div",{className:el,children:(0,n.hw)({id:"ai.chatUI.toolbox.suggestionBox.title"})}),(0,a.jsx)("div",{className:er,children:r.map(e=>{let t=(0,n.hw)({id:`ai.chatUI.toolbox.suggestionBox.suggestion.${e}`});return(0,a.jsx)(eo.A,{disabled:i,onClick:()=>{var e;return e=t,void(!i&&(null==l||l(e)))},theme:"soft-primary",children:t},e)})})]})},ec={},eu=e=>{let{className:t}=e,{onCommandClick:i,isSending:n}=(0,l.hz)(),r=(0,y.A)(e=>{null==i||i(e)});return(0,a.jsx)("div",{className:z()(ec.chatToolbox,t),children:(0,a.jsx)(ed,{disabled:n(),onCommandClick:r})})},ep=e=>{let{className:t}=e,{topContent:i,bottomContent:n}=(0,w.useContext)(X.A),l=(0,w.useRef)(null),r=(0,y.A)(()=>{l.current&&l.current.scrollTo({top:l.current.scrollHeight})});return(0,a.jsxs)("div",{className:z()(ea,t),children:[(0,a.jsxs)("div",{className:"h-full overflow-auto flex flex-col relative",ref:l,children:[i,(0,a.jsx)(et,{className:"flex-shrink-0",onScrollToBottom:r}),n]}),(0,a.jsxs)("div",{className:"p-4 flex-shrink-0 flex flex-col gap-4",children:[(0,a.jsx)(eu,{}),(0,a.jsx)(ei.A,{})]})]})},em=e=>{let{className:t}=e;return(0,a.jsx)(ep,{className:z()(M,t)})},eh=e=>{let{className:t,style:i,width:n}=e;return(0,a.jsx)("div",{className:z()(k,t),style:{width:n,...i},children:(0,a.jsx)(em,{className:T})})},ev=e=>{let{...t}=e;return(0,a.jsx)(eh,{...t})},ef="aiGeneratorModalStatus-r8S8S_";var eg=i(743190),ey=i(868812);let ex={sending:{label:(0,n.hw)({id:"ai.chatUI.updating"}),bgColor:"var(--ui-blue-1)",icon:(0,a.jsx)(b.A,{type:"icon-loading-01",color:"var(--ui-blue-6)",spin:!0,size:16})},completed:{label:e=>(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{children:(0,n.hw)({id:"ai.chatUI.updateCompleted"})}),(0,a.jsx)(eg.A,{type:"vertical",className:"m-0"}),(0,a.jsx)(ey.u,{recordId:null==e?void 0:e.recordId})]}),bgColor:"var(--ui-alert-success-bg-color)",icon:(0,a.jsx)(b.A,{type:"icon-check-circle",color:"var(--ui-alert-success-icon-color)",size:16})},aborted:{label:(0,n.hw)({id:"ai.chatUI.updateStop"}),bgColor:"var(--ui-alert-warning-bg-color)",icon:(0,a.jsx)(b.A,{type:"icon-TriangleWarningSolid",color:"var(--ui-alert-warning-icon-color)",size:16})},error:{label:(0,n.hw)({id:"ai.chatUI.updateFailed"}),bgColor:"var(--ui-alert-error-bg-color)",icon:(0,a.jsx)(b.A,{type:"icon-CircleDeleteSolid",color:"var(--ui-alert-error-icon-color)",size:16})}},eA=e=>{let{className:t,actionsRender:i}=e,n=(0,l.hz)(),{status:r}=n,s=(0,w.useMemo)(()=>ex[null!=r?r:"completed"],[r]);return r?(0,a.jsxs)("div",{className:z()(ef,"px-4 py-2 truncate",t),style:{backgroundColor:s.bgColor},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[s.icon,(0,a.jsx)("div",{className:"truncate",children:"function"==typeof s.label?s.label(n):s.label})]}),null==i?void 0:i(r)]}):null};var ej=i(184319),eb=i(171882),ew=i(169508),eS=i(537890),eC=i(949695),eI=i(579159),eN=i(978052),ek=i(398380),eT=i(506598),eM=i(822302);let eE="diffContainer-TvHhD9",e_="diffWrapper-cvO5rQ",eF="diffHeader-ICIp0t",eD="diffNav-G9KqLh",eR="diffHeaderTitle-ifuQla",eO=[{label:(0,n.hw)({id:"ai.chatModal.preview"}),value:"preview"},{label:(0,n.hw)({id:"ai.chatModal.diff"}),value:"diff"},{label:(0,n.hw)({id:"ai.chatModal.editor"}),value:"editor"}];var eP=i(308250),eL=i(524095);let e$=e=>{var t,i;let{type:l,content:r,value:s,originalValue:o}=e,[d,c]=(0,w.useState)("preview"),{locale:u}=(0,n.UX)(),p=(0,w.useRef)(null),m="schema"===l,h=(0,w.useMemo)(()=>((e,t)=>{if("schema"===t){let t=null==e?void 0:e.jsonSchema;return!t||0===Object.keys(t).filter(e=>"type"!==e).length}return!e||Array.isArray(e)&&0===e.length})(s,l),[s,l]),f=(0,w.useMemo)(()=>(function(e,t){let i=(0,v.DA)(e=>e.apiSchema.dataSchemaDefinitions),{jsonSchemaUtils:a}=eT.utilsContainer.getItemsSync(e=>[e.jsonSchemaUtils]),{AppJsonSchema2JsonSchemaStandard:n,removeUnnecessaryDefinitionsForJsonSchemaViewer:l}=a;return l(n(t?{...e.jsonSchema,definitions:i}:(0,eM.l)(null!=e?e:[],i),[],{enableXAppEnum:!0,enableXAppMock:!0}))})((0,ek.cloneDeep)(s),m),[s,m]),{originalYaml:g,modifiedYaml:y}=(0,eb.A)({title:(0,n.hw)({id:"apiSchema.label.jsonSchema"}),original:m?null==o?void 0:o.jsonSchema:o,modified:m?null==s?void 0:s.jsonSchema:s}),x=null!=(i=null==(t=(0,ee.A)(p))?void 0:t.height)?i:0;return(0,a.jsxs)("div",{className:eE,children:[(0,a.jsx)("div",{className:eD,children:(0,a.jsx)(eI.A,{value:d,onChange:e=>c(e),options:eO})}),(0,a.jsxs)("div",{className:"h-full flex-shrink overflow-y-auto overflow-x-hidden",ref:p,children:["preview"===d&&(0,a.jsx)("div",{className:"w-full pl-2",children:h?(0,a.jsx)(eN.A,{image:eN.A.PRESENTED_IMAGE_SIMPLE}):(0,a.jsx)(eC.A,{schema:f,locale:u,appNameLower:ew.A3,disableCrumbs:!0,isMergeAllOf:!0,keyValueRenderMap:eL.n,propertyNameRender:eP.O})}),"diff"===d&&(0,a.jsxs)("div",{className:z()(e_,"w-full"),children:[(0,a.jsxs)("div",{className:eF,children:[(0,a.jsx)("div",{className:eR,children:(0,n.hw)({id:"before"})}),(0,a.jsx)("div",{className:eR,children:(0,n.hw)({id:"after"})})]}),(0,a.jsx)(eS.Ay,{language:"yaml",height:x-42,original:g,value:y,options:{unicodeHighlight:{nonBasicASCII:!1,invisibleCharacters:!1,ambiguousCharacters:!1,includeComments:!1,includeStrings:!1},readOnly:!0,enableSplitViewResizing:!1,lineNumbers:"on",automaticLayout:!0,scrollBeyondLastLine:!1,scrollbar:{alwaysConsumeMouseWheel:!1},renderIndicators:!1,renderFinalNewline:"off",renderOverviewRuler:!0,renderLineHighlight:"line",contextmenu:!1},editorWillUnmount:()=>{},editorDidMount:()=>{}})]}),"editor"===d&&(0,a.jsx)("div",{children:r})]})]})},eB=e=>{var t,i;let{type:n,value:l,tempValue:r}=(0,S.w)(e=>e);return(0,a.jsx)(ej.Ay,{comparisonProps:{comparisonType:"HISTORY",comparisonModel:"dataSchemaComparison",original:"schema"===n?null!=(t=null==l?void 0:l.jsonSchema)?t:{}:l,modified:"schema"===n?null!=(i=null==r?void 0:r.jsonSchema)?i:{}:r,isResolveConflictsMode:!0,onOriginalChange:()=>{},onModifiedChange:()=>{},historyStore:null},children:(0,a.jsx)(e$,{...e,originalValue:l,value:r,type:n})})},ez={type:"object"},eU=e=>{var t,i;let{onOk:f,onCancel:k,width:T=1360,...M}=e,[E,_]=(0,g.A)(M,{valuePropName:"visible",defaultValue:!1}),{type:F,value:D,valueType:R,onChange:O,modalTitle:P,schemaRootProps:L,bulkEditableTableProps:$,tempValue:B,setTempValue:z}=(0,S.w)(e=>e),{onStop:U,onSend:H,lastMessage:V,reset:K,recordId:q}=(0,l.hz)(),G=(0,w.useRef)(!1),W=(0,w.useMemo)(()=>c.N9[R]||[],[R]),{columns:J,...Y}=null!=$?$:{},Z=(0,w.useContext)(m.aA),Q=(0,o.y)(e=>e.endpointId),X=(0,v.Ay)(e=>{var t,i;return null==(i=e.apiDetail)||null==(t=i.apiDetailMap)?void 0:t[Q]}),ee=(0,y.A)(()=>{null==U||U()}),et=(0,y.A)(e=>{_(!1),null==k||k(e),ee(),null==K||K(),(0,d.B)("ai_modify_gen_cancel",{apiId:Q}),q&&(0,s.VA)(q,G.current?"ACCEPTED":"REJECTED"),G.current=!1}),ei=(0,y.A)(e=>{G.current=!0,null==O||O(B),null==f||f(e),et(e),(0,d.B)("ai_modify_gen_apply",{apiId:Q})}),ea=(0,y.A)(e=>{null==z||z(e)}),en=(0,y.A)(()=>{null==z||z(D)}),el=(0,y.A)(()=>{V&&(null==H||H(V))}),er=(0,y.A)(e=>{null==z||z(t=>({...t,jsonSchema:e}))});(0,x.A)(()=>{(0,d.B)("use_ai_modify_window",{apiId:Q})});let es=(0,w.useCallback)((e,t)=>t<4&&"ref"!==e,[]);return(0,w.useEffect)(()=>()=>en(),[en]),(0,a.jsx)(A.Ay,{open:E,centered:!0,width:T,closable:!1,size:"fullScreen",destroyOnClose:!0,maskClosable:!1,modalRender:e=>(0,a.jsxs)("div",{className:C,children:[(0,a.jsxs)("div",{className:I,children:[(0,a.jsxs)("div",{className:"flex items-center",style:{gap:6},children:[(0,a.jsx)(r.A,{size:16,type:"solid"}),(0,a.jsx)("div",{children:P})]}),(0,a.jsx)(j.A,{type:"text",onClick:et,icon:(0,a.jsx)(b.A,{type:"icon-x-close",size:16})})]}),(0,a.jsxs)("div",{className:"flex",style:{height:"calc(100% - 48px)"},children:[e,(0,a.jsx)(ev,{className:N,width:320})]})]}),title:null,onCancel:et,footer:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(j.A,{onClick:en,icon:(0,a.jsx)(b.A,{type:"icon-refresh-ccw-01"}),children:(0,n.hw)({id:"ai.chatModal.restore"})}),(0,a.jsxs)("div",{className:"flex justify-end",children:[(0,a.jsx)(j.A,{onClick:et,children:(0,n.hw)({id:"cancel"})}),(0,a.jsx)(j.A,{type:"primary",onClick:ei,children:(0,n.hw)({id:"ai.chatModal.apply"})})]})]}),...M,children:(0,a.jsx)(h.yl,{children:(0,a.jsx)(o.l,{value:{aiNamingEnabled:!1},children:(0,a.jsxs)("div",{className:"flex flex-col gap-5 h-full",children:[(0,a.jsx)(eA,{className:"flex-shrink-0",actionsRender:e=>"sending"===e?(0,a.jsx)(j.A,{type:"text",icon:(0,a.jsx)(b.A,{type:"icon-CircleStopSolid",size:12}),onClick:ee,children:(0,n.hw)({id:"stop"})}):(0,a.jsx)(j.A,{type:"text",icon:(0,a.jsx)(b.A,{type:"icon-refresh-ccw-01",size:12}),onClick:el,children:(0,n.hw)({id:"ai.chatModal.retry"})})}),(0,a.jsx)(eB,{content:(0,a.jsxs)(a.Fragment,{children:["parameters"===F&&(0,a.jsx)(u.f,{className:"ui-editable-table-simple__drag_in_main_layout--notCollapsed",onChange:ea,columns:null!=J?J:W,value:null!=B?B:[],...Y}),"schema"===F&&(0,a.jsx)(m.Ay,{...Z,moduleId:null==X?void 0:X.moduleId,value:null!=(t=null==B?void 0:B.jsonSchema)?t:ez,onChange:er,defaultExpanded:es,children:(0,a.jsx)(p.A,{className:"ui-editable-table-simple__drag_in_main_layout--notCollapsed",data:null!=(i=null==B?void 0:B.jsonSchema)?i:ez,indent:0,sortable:!1,...L})})]})})]})})})})},eH=()=>{let e=(0,f.bq)();return(0,y.A)(t=>e.show(eU,t))}},676951:function(e,t,i){"use strict";i.d(t,{A:()=>ea});var a=i(838e3),n=i(740565),l=i(838487),r=i.n(l),s=i(458184),o=i(671466);let d="aiChatButton-YzODZA",c=e=>{let{children:t,className:i,...n}=e;return(0,a.jsx)(s.A,{type:"text",size:"small",className:r()(d,i),icon:(0,a.jsx)(o.A,{type:"icon-AiStarLine",size:12}),...n,children:t})},u="aiChatPopover-ac9HcX",p="overlay-fMWnYI",m="content-tKiP3A",h="suggestions-XuoVaI";var v=i(829714),f=i(140049),g=i(202130),y=i(641486),x=i(309994),A=i(222757),j=i(297965),b=i(698879),w=i(718180),S=i(104459);let C=e=>{let{suggestionTypes:t,onCommandClick:i,onInputClick:l}=e,r=(0,b.A)({delay:500,focusOptions:{cursor:"end"}}),s=(0,A.y)(e=>e.endpointId);return(0,w.A)(()=>{(0,j.B)("use_ai_modify_popup",{apiId:s})}),(0,a.jsxs)("div",{className:m,children:[(0,a.jsx)("div",{className:h,children:null==t?void 0:t.map((e,t)=>{let l=`suggestion-${t}`,r=(0,n.hw)({id:`ai.chatUI.toolbox.suggestionBox.suggestion.${e}`});return(0,a.jsx)(x.A,{onClick:()=>null==i?void 0:i(r),theme:"soft-primary",children:(0,a.jsx)("div",{className:"flex",style:{gap:6},children:(0,a.jsx)("span",{style:{hyphens:"auto"},children:r})})},l)})}),(0,a.jsx)(S.A,{onSend:i,chatInputProps:{inputRef:r,placeholder:(0,n.hw)({id:"ai.chatPopover.instructAIHowToModify"}),onClick:l}})]})},I=e=>{let{className:t,onCommandClick:i,onInputClick:l,contentRender:d,...c}=e,m=(0,y.useMemo)(()=>(0,v.gL)(),[]),h=(0,f.A)(e=>{null==i||i(e)}),x=(0,f.A)(()=>{null==l||l()}),A=(0,y.useMemo)(()=>(0,a.jsx)(C,{suggestionTypes:m,onCommandClick:h,onInputClick:x}),[m,h,x]);return(0,a.jsx)(g.A,{showArrow:!1,className:r()(u,t),overlayClassName:p,title:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{children:(0,n.hw)({id:"ai.features.function.feature.PARAMETER_MODIFICATION.name"})}),(0,a.jsx)(s.A,{onClick:()=>{var e;return null==(e=c.onOpenChange)?void 0:e.call(c,!1)},size:"small",type:"text",icon:(0,a.jsx)(o.A,{type:"icon-x-close",size:12})})]}),content:"function"==typeof d?d(A):A,...c})};var N=i(558910),k=i(571905),T=i(402735),M=i(202182),E=i(242655),_=i.n(E),F=i(129867),D=i(325475),R=i(221312);let O={content:(0,n.hw)({id:"ai.chatUI.message.greetingText"}),role:"bot",timestamp:Date.now(),id:(0,F.Z0)()},P=e=>{let{children:t,handleSend:i,handleStop:l,storeApiRef:r}=e,s=(0,A.y)(e=>e.endpointId),o=(0,M.A)(()=>(0,T.y)({persist:!1})((e,t)=>({messages:[O],setMessages:t=>e({messages:t}),addMessage:i=>{e(e=>{e.messages=_()(t().messages,{$push:[i]})})},updateMessage:(i,a)=>{let n=t().messages.findIndex(e=>e.id===i);n>-1&&e({messages:_()(t().messages,{$splice:[[n,1,{...t().messages[n],...a}]]})})},isSending:()=>"sending"===t().status,lastMessage:"",taskId:(0,F.Z0)(),onSend:async a=>{e({lastMessage:a}),t().addMessage({content:a,role:"user",timestamp:Date.now(),id:(0,F.Z0)()}),e({status:"sending"});let l=(0,F.Z0)(),r=performance.now();try{t().addMessage({content:(0,n.hw)({id:"ai.chatUI.updatingWait"}),status:"loading",role:"bot",timestamp:Date.now(),id:l}),e({loadingMessageId:l}),await (null==i?void 0:i(a,l)),t().setMessageCompleted(l),(0,j.B)("ai_modify_gen_result",{apiId:s,result:1,reason:"finish",duration:Math.round(performance.now()-r)}),e({status:"completed"})}catch(d){var o;let i=(0,k.Y)(null==d?void 0:d.errorCode,null!=(o=null==d?void 0:d.errorExtra)?o:null==d?void 0:d.message),a="manualStop";(0,R.Cj)(d)?(t().setMessageAborted(l),e({status:"aborted"})):(t().setMessageError(l,i||(0,n.hw)({id:"ai.chatUI.changeError"})),a=i,e({status:"error"})),(0,j.B)("ai_modify_gen_result",{apiId:s,result:0,reason:a,duration:Math.round(performance.now()-r)})}finally{e({loadingMessageId:void 0})}},setMessageCompleted:e=>{t().updateMessage(e,{content:(0,n.hw)({id:"ai.chatUI.changeCompleted"}),status:"success"})},setMessageWarning:(e,i)=>{t().updateMessage(e,{content:i||(0,n.hw)({id:"ai.chatUI.changeAborted"}),status:"warning"})},setMessageError:(e,i)=>{t().updateMessage(e,{content:i||(0,n.hw)({id:"ai.chatUI.changeError"}),status:"error"})},setMessageAborted:e=>{t().setMessageWarning(e,(0,n.hw)({id:"ai.chatUI.changeAborted"}))},onStop:async()=>{await (null==l?void 0:l()),t().setMessageAborted(t().loadingMessageId)},onCommandClick:async e=>{await t().onSend(e)},inputText:"",setInputText:t=>e({inputText:t}),reset:()=>e({messages:[O],lastMessage:"",inputText:"",loadingMessageId:void 0,status:void 0,recordId:void 0,taskId:(0,F.Z0)()})})),[]);r.current=o;let d=(0,D.Pj)(o);return(0,a.jsx)(N.__.Provider,{value:d,children:t})};var L=i(722619),$=i(445524);i(807603);var B=i(490045),z=i(95837),U=i(302523);let H=i(401146).Ik({parameters:U.R});var V=i(511028),K=i(704128),q=i(496411),G=i(170836),W=i(689368),J=i(435685),Y=i(722238),Z=i(52367),Q=i(554692),X=i(315614),ee=i(413711),et=i(392106);let ei=()=>{let[e,t]=(0,y.useState)(!1),i=(0,V.k)(),l=(0,y.useRef)(),{onCommandClick:r}=(0,N.hz)(),{ensureAiConfigured:s,configured:o}=(0,B.A)(),d=(0,A.y)(e=>e.endpointId),u=(0,f.A)(e=>{(!e||o)&&t(e)}),p=(0,f.A)(s(e=>{null==e||e.stopPropagation(),(0,j.B)("ai_modify_gen_click",{apiId:d}),null==r||r(l.current),i({}),u(!1)},{fromFeature:"aiModifyModel",apiId:d})),m=(0,f.A)(e=>{l.current=e,p(),(0,j.B)("ai_modify_start_result",{apiId:d})});return(0,a.jsx)(I,{destroyTooltipOnHide:!0,open:e&&o,trigger:"click",onOpenChange:u,onCommandClick:m,children:(0,a.jsx)(Q.A,{destroyTooltipOnHide:!0,title:(0,n.hw)({id:"ai.features.function.feature.PARAMETER_MODIFICATION.tooltip"}),children:(0,a.jsx)("div",{children:(0,a.jsx)(c,{onClick:s(()=>{u(!0)})})})})})},ea=(0,y.memo)(e=>{let{children:t}=e,{type:i,valueType:l,tempValue:r,setTempValue:s}=(0,ee.w)(e=>({type:e.type,valueType:e.valueType,tempValue:e.tempValue,setTempValue:e.setTempValue})),o=(0,y.useMemo)(()=>(0,a.jsx)("div",{className:"w-full py-3"}),[]),d=(0,y.useMemo)(()=>(0,a.jsx)("div",{className:"h-full flex-shrink-1"}),[]),c=(0,A.y)(e=>e.endpointId),u=(0,y.useRef)(),p=(0,n.getUserLocale)(),m=(0,W.Ay)(e=>e.project.currentProject),{finalModelId:h}=(0,$.r)({llmNodeType:"GENERATE_SCHEMA_OPTIMIZATION",persist:!0}),v=(0,q.Sy)()||0,{run:g,flush:x}=(0,Z.A)((e,t)=>{var i,a,n;null==(a=u.current)||null==(i=(n=a.getState()).updateMessage)||i.call(n,t,{reasoningContent:e})},{wait:100,leading:!1,trailing:!0}),{run:j,abort:b}=(0,z.e)(v,{manual:!0,onReasoning:(e,t)=>{g(e,t)},onReasoningCompleted:(e,t)=>{g(e,t),x()},onChunk:async e=>{if("schema"===i)null==s||s(t=>({...t,jsonSchema:e}));else if("parameters"===i){var t;let{utils:{generatorIdModule:{generatorId:i}}}=await J.baseContainer.getItems(e=>[e.utils]),a=null!=(t=null==e?void 0:e.parameters)?t:[],n=U.R.safeParse(a);n.success?null==s||s(null==a?void 0:a.map(e=>({...e,id:e.id||i()}))):console.error(n.error)}},onEvent:(e,t)=>{if("thread.completed"===e){var i;null==(i=u.current)||i.setState({recordId:null==t?void 0:t.generationRecordId})}},onSetup:async e=>{e.onAbort(()=>{var e;let t=null==(e=u.current)?void 0:e.getState();t&&t.setMessageAborted(t.loadingMessageId)})},startPoint:""}),w=(0,y.useMemo)(()=>"schema"===i?null==r?void 0:r.jsonSchema:r,[i,r]),S=(0,f.A)(async()=>{b()}),C=(0,f.A)(async(e,t)=>{var a,n;let r=w;Array.isArray(w)?r={parameters:null==w?void 0:w.map(G.Oy)}:"object"!=typeof w&&(r={value:w});let s="schema"===i?w:(0,X.Ay)(H),o="schema"===i?w:r,d=JSON.stringify(o),v=JSON.stringify([o]),f=l?Object.keys(et.dM)[Object.values(et.dM).indexOf(l)]:(0,F.Z0)();await j({type:"GENERATE_SCHEMA_OPTIMIZATION",uniqId:t,projectId:(null==m?void 0:m.id)||0,aiLlmModelId:h,taskId:null==(a=u.current)?void 0:a.getState().taskId,parentId:null==(n=u.current)?void 0:n.getState().recordId,data:{EDIT_PROMPT:e,OUTPUT_LANGUAGE:p,SCHEMA:d,SCHEMAS:v,SCHEMA_SELECTION:d,MOCK_FIELD:K.EW},jsonSchema:{type:"json_schema",json_schema:{name:`api_${c}_${i}${f?"_"+f:""}`.toLowerCase(),schema:s}}})});return(0,a.jsx)(P,{storeApiRef:u,handleSend:C,handleStop:S,children:(0,a.jsx)(L.A.Provider,{value:{topContent:o,bottomContent:d,autoScrollToBottom:!0},children:(0,a.jsx)(Y.Vs,{children:t||(0,a.jsx)(ei,{})})})})})},392106:function(e,t,i){"use strict";i.d(t,{N9:()=>r,dM:()=>l});var a,n=i(226487),l=((a={}).Query="query",a.Path="path",a.Cookie="cookie",a.Header="header",a.XWwwFormUrlencoded="application/x-www-form-urlencoded",a.FormData="multipart/form-data",a.Json="application/json",a.Xml="application/xml",a.Raw="text/plain",a.Binary="application/octet-stream",a.GraphQL="graphql",a.MsgPack="application/x-msgpack",a.Schema="schema",a);let r={query:n.ax,path:n.h,header:n.hF,cookie:n.Qo,"multipart/form-data":n.mt,"application/x-www-form-urlencoded":n.Vs}},763233:function(e,t,i){"use strict";i.d(t,{A:()=>u});var a=i(838e3),n=i(622425),l=i(740565),r=i(689368),s=i(916858),o=i(458184),d=i(202130),c=i(641486);let u=e=>{let t,{children:i}=e,[u,p]=(0,c.useState)(!1),[m,h]=(0,c.useState)(!1),v=(0,r.Ay)(e=>{let{project:t}=e;return t.currentProject}),f=(0,r.Ay)(e=>{let{projectMember:t}=e;return t.currentProjectMembers}),g=null==f?void 0:f.filter(e=>e.roleType!==s._I.None),y=!(g&&g.length>1),x=v&&"private"===v.visibility;(0,c.useEffect)(()=>()=>{window.clearTimeout(t)},[t]);let A=()=>{p(!0),h(!1)};return x&&y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.A,{arrowPointAtCenter:!0,trigger:"click",placement:"bottomLeft",title:null,overlayStyle:{width:"360px"},content:()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h3",{children:(0,l.hw)({id:"teamMember.inviteMemberForm.copyLink.title"})}),(0,a.jsx)("p",{className:"text-xs",children:(0,l.hw)({id:"teamMember.inviteMemberForm.copyLink.intro"})}),(0,a.jsxs)("div",{className:"flex justify-end",children:[(0,a.jsx)(o.A,{onClick:()=>h(!1),children:(0,l.hw)({id:"cancel"})}),(0,a.jsx)(o.A,{type:"primary",className:"ml-2",onClick:A,children:(0,l.hw)({id:"invite"})})]})]}),visible:m,onVisibleChange:e=>h(e),children:(0,a.jsx)(a.Fragment,{children:i(()=>{t=window.setTimeout(()=>{h(!0)},100)},m)})}),u&&v?(0,a.jsx)(n.A,{autoSelectCurrentProject:!0,teamId:v.teamId,visible:u,onCancel:()=>p(!1)}):null]}):(0,a.jsx)(a.Fragment,{children:i()})}},159347:function(e,t,i){"use strict";i.d(t,{JF:()=>r,Mw:()=>s,QC:()=>o});var a=i(740565),n=i(169508),l=i(929463);function r(e){let t;e=e.replace(/[?#].*/,"");let i=[];try{let i=RegExp("{[^{}/]+}|/:([^\\d/][^/]*)","g");t=e.replace(/[?#].*/,"").replace(/\{\{[^{}/]+\}\}/g,"").match(i)}catch(e){console.log("err occurred",e)}return t&&t.forEach(e=>{e.startsWith("/:")?i.push(e.replace(/^\/:/,"")):i.push(e.replace(/^\{/,"").replace(/\}$/,""))}),i}let s=(e,t)=>{t&&(n.xl?window.require("electron").shell.openExternal(t).catch(()=>{l.Ay.error((0,a.hw)({id:"user.register.error.Url"},{url:t}))}):window.open(t))},o=(e,t)=>{let i=e;return t&&Object.keys(t).forEach(e=>{i=i.replaceAll(`{{${e}}}`,t[e].toString())}),i}},257712:function(e,t,i){"use strict";i.d(t,{A:()=>n});var a=i(923117);let n=(0,i(618487).dynamic)({loading:a.A,loader:async()=>{let{default:e}=await Promise.all([i.e("720"),i.e("73034"),i.e("4276"),i.e("48737"),i.e("87053"),i.e("80232"),i.e("33898"),i.e("67007"),i.e("72168"),i.e("90348"),i.e("47094"),i.e("34351"),i.e("38390"),i.e("59057"),i.e("53281"),i.e("44661"),i.e("48579"),i.e("8704"),i.e("16336"),i.e("71877"),i.e("51235"),i.e("13996"),i.e("75562"),i.e("37730"),i.e("73956"),i.e("8769"),i.e("60293"),i.e("67282"),i.e("86781"),i.e("15505"),i.e("21172"),i.e("24879"),i.e("2527"),i.e("26304"),i.e("59065"),i.e("33987"),i.e("25082"),i.e("38929"),i.e("14701"),i.e("73132"),i.e("44792"),i.e("90812"),i.e("37191"),i.e("70139"),i.e("79267"),i.e("27733")]).then(i.bind(i,321454));return e}})},80859:function(e,t,i){"use strict";i.d(t,{A:()=>d});var a=i(838e3),n=i(458184),l=i(554692),r=i(671466),s=i(618487);function o(e){let{collapse:t,text:i,collapseTooltip:r,...s}=e,o=(0,a.jsx)(n.A,{...s,children:t?"":i});return r&&t?(0,a.jsx)(l.A,{title:i,children:o}):o}function d(e){let{theme:t="primary",type:i="soft-highlight",collapse:n,handleShowInsertModal:l}=e,{formatMessage:d}=(0,s.useIntl)();return(0,a.jsx)(o,{type:i,theme:t,size:"small",onClick:l,icon:(0,a.jsx)(r.A,{type:"icon-operate-magic-wand"}),collapse:n,text:d({id:"dynamicValue"}),collapseTooltip:!0},"templateTextAreaModalInsert")}},809697:function(e,t,i){"use strict";i.d(t,{A:()=>v});var a=i(838e3),n=i(169508),l=i(713781),r=i(740565),s=i(276831),o=i(718180),d=i(662387),c=i(586587),u=i(458184),p=i(322057),m=i(641486);function h(e){let t=[];return e&&(t=(Array.isArray(e)?e:[e]).map((e,t)=>({uid:`${t}`,name:e.replace(/^.*[\/\\]/,""),status:"done",originFileObj:{path:e.replace(/^file:\/\//,"")}}))),t}function v(e){let{value:t,defaultValue:i,multiple:v,buttonStyle:f,onChange:g,buttonSize:y}=e,[x,A]=(0,m.useState)([]);return(0,o.A)(()=>{A(h(t||i))}),(0,d.A)(()=>{A(h(t))},[t]),(0,a.jsx)(c.A,{...e,fileList:x,customRequest:e=>{var t;null==e||null==(t=e.onSuccess)||t.call(e,{})},onChange:e=>{let t=[...e.fileList];if(v||(t=t.slice(-1)),A(t),g){let e="";if(!n.xl){if(1===t.length){var i,a;e=`${p.Base64.encode(null==(i=t[0])?void 0:i.uid)}/${null==(a=t[0])?void 0:a.name}`,l.N.set(e,t[0].originFileObj)}else t.length>1&&(e=t.map(e=>{let t=`${p.Base64.encode(null==e?void 0:e.uid)}/${null==e?void 0:e.name}`;return e.originFileObj&&l.N.set(t,e.originFileObj),t}));g(e);return}1===t.length?e=`file://${t[0].originFileObj.path}`:t.length>1&&(e=t.map(e=>`file://${e.originFileObj.path}`)),g(e)}},children:(0,a.jsx)(u.A,{block:!0,style:f,icon:(0,a.jsx)(s.A,{}),size:y,children:(0,r.hw)({id:"upload"})})})}},345447:function(e,t,i){"use strict";i.d(t,{D5:()=>N,NG:()=>C,Q3:()=>x,Rv:()=>f,TC:()=>n.TC,Wq:()=>w,_l:()=>j,bn:()=>k,nf:()=>y,uK:()=>S,vw:()=>h,y_:()=>g});var a=i(740565),n=i(970591),l=i(435685),r=i(269966),s=i(929463),o=i(398380),d=i(620148),c=i(159347),u=i(706046);let p=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return(function(){let{utils:e}=l.baseContainer.getItemsSync(e=>[e.utils]);return e.generatorIdModule.generatorId})()(...t)};function m(){return(0,o.omit)(this,n.TC)}function h(e){var t,i,a,l;return e[n.TC]&&(null!=(a=(i=e[n.TC]).type)||(i.type=r.hG.String)),e.relatedName=null!=(l=null==(t=e[n.TC])?void 0:t.name)?l:e.name,e.toJSON=m,e.type===r.hG.Array&&(e.value=(e=>{if(Array.isArray(e)){let t=e.map(e=>{if("string"==typeof e)return e;try{return String(e)}catch(e){return null}}).filter(e=>null!==e);return 0===t.length?[]:t}try{var t;return[null!=(t=String(e))?t:""]}catch(e){return[""]}})(e.value)),e}function v(e,t,i,a){var l,s;let o=null!=(l=e.type)?l:r.hG.String;return h({id:p(t),relatedId:e.id,name:e.name,value:i&&e&&e.example?e.example:o===r.hG.Array?[""]:"query"===a?e.example:"",type:o,description:null!=(s=e.description)?s:"",enable:!0,isDelete:!1,contentType:e.contentType,[n.TC]:e})}function f(e,t){var i;let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!t,l=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,{idMap:o,nameMap:d}=(0,u.by)(e),c=new Set,p=new Map,m=new Map;null==t||null==(i=t.forEach)||i.call(t,e=>{var t,i,a,l,u,v,f,g,y,x,A,j,b,w;let S,{relatedId:C,relatedName:I,name:N}=e;if(N&&d.has(N)?S=d.get(N):C&&o.has(C)?S=o.get(C):I&&d.has(I)&&(S=d.get(I)),!N&&!S)return;let k={id:e.id,relatedId:null==S?void 0:S.id,relatedName:null!=(i=null!=(t=null==S?void 0:S.name)?t:e.name)?i:"",name:null!=(l=null!=(a=e.name)?a:null==S?void 0:S.name)?l:"",value:null!=(u=e.value)?u:"query"===s?e.value:null==S?void 0:S.example,type:null!=(f=null!=(v=e.type)?v:null==S?void 0:S.type)?f:r.hG.String,description:null!=(y=null!=(g=e.description)?g:null==S?void 0:S.description)?y:"",enable:null==(A=null!=(x=e.enable)?x:null==S?void 0:S.required)||A,isDelete:null!=(j=e.isDelete)&&j,contentType:"body"===s?null!=(b=e.contentType)?b:null==S?void 0:S.contentType:void 0,[n.TC]:S};if(S&&(m.has(S.id)?m.get(S.id)!==S.name&&k.name===S.name&&m.set(S.id,k.name):m.set(S.id,k.name)),k.name){c.add(k.name);let e=null!=(w=p.get(k.name))?w:[];e.push(h(k)),p.set(k.name,e)}});let f=[];c.forEach(e=>{var t,i,a;let s,c=null!=(t=p.get(e))?t:[];if(0===c.length)return;if(1===c.length){let e=c[0],{relatedId:t}=e;t&&m.has(t)&&m.get(t)!==e.name&&(delete e.relatedId,delete e[n.TC]);let i=e[n.TC];i&&(o.delete(i.id),d.delete(i.name)),l===r.yA.XWwwFormUrlencoded&&e.type===r.hG.File&&(Array.isArray(e.value)?e.type=r.hG.Array:e.type=r.hG.String),Array.isArray(e.value)?e.type!==r.hG.Array&&e.type!==r.hG.File&&(e.value=e.value.filter(e=>"string"==typeof e).join(",")):e.type===r.hG.Array&&(e.value=[String(e.value)]),f.push(e);return}let u=0!==(c=c.map(t=>{let i={...t},{relatedId:a}=i;return a&&m.has(a)&&m.get(a)!==e&&(delete i.relatedId,delete i[n.TC]),t})).filter(e=>!0===e.enable).length,h=null!=(a=null!=(i=c.find(e=>e.relatedId))?i:c.find(e=>e.id))?a:c[0],v=c.reduce((e,t)=>{let{value:i}=t;return Array.isArray(i)?e.push(...i.filter(e=>void 0!==e)):void 0!==i&&e.push(i),e},[]);h.enable=u,h.value=v;s=Array.isArray(h.value)?r.hG.Array:r.hG.String,(Array.isArray(h.value)?h.value:[h.value]).some(e=>"string"==typeof e&&e.startsWith("file://"))&&(s=r.hG.File),h.type=s,b(h);let g=h.relatedId?o.get(h.relatedId):void 0;g&&(o.delete(g.id),d.delete(g.name)),f.push(h)});let g=new Set(f.map(e=>e.id));return d.forEach((e,t)=>{if(!c.has(t)){let t=v(e,g,a,s);b(t),f.push(t)}}),p.clear(),f}function g(e,t,i,a){let l=e.pendingUrl,s=(0,c.JF)(l),o={},d=new Map;t.forEach(e=>{var t,i;e.name&&(null!=(i=o[t=e.name])||(o[t]=0),e.id=`${e.name}#${o[e.name]}`,o[e.name]+=1,d.set(e.id,e))});let u={},p=new Map;i.forEach(e=>{var t,i;if(!e.name)return;let a={...e};null!=(i=u[t=e.name])||(u[t]=0),a.id=`${e.name}#${u[e.name]}`,u[e.name]+=1,a.relatedName=e.name,a.relatedId=d.has(a.id)?a.id:void 0,a[n.TC]=d.get(a.id),p.set(a.id,a)});let m={},v=s.map(e=>{var t,i,l,s,o,c;null!=(t=m[e])||(m[e]=0);let u=`${e}#${m[e]}`;m[e]+=1;let v=p.get(u),f=d.get(u);return h({id:u,name:e,relatedId:null==f?void 0:f.id,value:a&&f&&f.example?f.example:null!=(c=null==v?void 0:v.value)?c:"",type:null!=(l=null!=(i=null==v?void 0:v.type)?i:null==f?void 0:f.type)?l:r.hG.String,description:null!=(o=null!=(s=null==v?void 0:v.description)?s:null==f?void 0:f.description)?o:"",enable:!0,isDelete:!1,[n.TC]:f})});return d.clear(),p.clear(),v}function y(e){let{prev:t,beforeCommit:i,pending:a,next:l}=e,r=new Map,s=new Map,c=new Map;l.forEach(e=>{e.id&&r.set(e.id,e),e.name&&s.set(e.name,e),e.relatedId&&c.set(e.relatedId,e)});let u=new Map(a.map(e=>[{...e},null])),p=new Map(t.map(e=>[e.id,e]));function m(e,t){t&&(t.id&&r.delete(t.id),t.name&&s.delete(t.name),t.relatedId&&c.delete(t.relatedId),u.set(e,t))}u.forEach((e,t)=>{let{name:i}=t;m(t,i?s.get(i):void 0)}),u.forEach((e,t)=>{if(e)return;let{relatedId:i}=t;m(t,i?c.get(i):void 0)}),u.forEach((e,t)=>{if(e)return;let i=t.id?r.get(t.id):void 0;m(t,i)}),u.forEach((e,t)=>{if(e)return;let{id:i}=t,a=p.get(i);!a||(0,d.createPatch)(a,t).length>0?(delete t.relatedId,delete t[n.TC],t.relatedName=t.name):u.delete(t)});let h=new Map(i.map(e=>[e.id,e])),v=[];return u.forEach((e,t)=>{if(!e){t.isDelete||v.push(t);return}let{id:i}=t,a=h.get(i),n=p.get(i),l=n&&a?(0,d.createPatch)(n,a):[],r=a?(0,d.createPatch)(a,t):[],s=n?(0,d.createPatch)(n,t):[];if(!n||0===s.length)return void v.push((0,o.cloneDeep)(e));let c=(0,o.cloneDeep)(e);if(0===l.length||0===(0,d.createPatch)(a,e).length){r.length>0&&(0,d.applyPatch)(c,r),v.push(c);return}(0,d.applyPatch)(c,l),r.length>0&&(0,d.applyPatch)(c,r),v.push(c)}),r.forEach(e=>{v.push(e)}),r.clear(),s.clear(),c.clear(),u.clear(),v}function x(e){var t,i;let{prev:a,pending:l,next:s}=e,o=s.pathState.initUrl,d=a.pathState.initUrl!==l.pendingUrl?l.pendingUrl:o,u=(0,c.JF)(d),p=new Map(null==(t=s.apiParamList)?void 0:t.map(e=>[e.id,e])),m=new Map(null==(i=s.caseParamList)?void 0:i.map(e=>[e.id,e])),v=new Map(a.paramList.map(e=>[e.id,e])),f=new Map(l.paramList.map(e=>[e.id,e])),g={};return u.map(e=>{var t,i,a,l,s,o,d,c,u,y,x,A;null!=(t=g[e])||(g[e]=0);let j=`${e}#${g[e]}`;g[e]+=1;let b=p.get(j),w=m.get(j),S=v.get(j),C=f.get(j),I={};return S&&C?(C.value!==S.value&&(I.value=C.value),C.type!==S.type&&(I.type=C.type),C.description!==S.description&&(I.description=C.description)):C&&(C.type&&(I.type=C.type),C.description&&(I.description=C.description),C.value&&(I.value=C.value)),h({id:j,name:e,relatedId:b?j:void 0,enable:!0,isDelete:!1,[n.TC]:b,value:null!=(l=null!=(a=null!=(i=null==w?void 0:w.value)?i:null==C?void 0:C.value)?a:null==S?void 0:S.value)?l:"",type:null!=(c=null!=(d=null!=(o=null!=(s=null==w?void 0:w.type)?s:null==b?void 0:b.type)?o:null==C?void 0:C.type)?d:null==S?void 0:S.type)?c:r.hG.String,description:null!=(A=null!=(x=null!=(y=null!=(u=null==w?void 0:w.description)?u:null==b?void 0:b.description)?y:null==C?void 0:C.description)?x:null==S?void 0:S.description)?A:"",...I})})}function A(e,t){let{mergeType:i,mergeValue:a}=t,n=void 0!==a?(Array.isArray(e.value)?e.value:[e.value]).concat(a):e.value,l="file"===i?r.hG.File:(Array.isArray(n),r.hG.Array);return{value:n,type:l}}function j(e,t,i,a){let n=[],l=new Map(e.map(e=>[e.id,e])),r=new Map(t.map(e=>[e.id,e]));return(t.forEach(e=>{if(l.has(e.id)){let t=l.get(e.id);if(!(0,o.isEqual)(t,e))if(""===t.name&&""!==e.name)n.push({op:"delete",value:{id:t.id}}),n.push({op:"create",value:e});else{if(""===e.name&&(e.name=t.name),(0,o.isEqual)(t,e))return;n.push({op:"update",value:e})}}else n.push({op:"create",value:e})}),e.forEach(e=>{r.has(e.id)||n.push({op:"delete",value:{id:e.id}})}),l.clear(),r.clear(),0===n.length)?t:w(e,n,i,a)}function b(e){return e.type!==r.hG.Array&&e.type!==r.hG.File&&Array.isArray(e.value)?e.value=e.value.join(","):e.type!==r.hG.Array||Array.isArray(e.value)||(e.value=[e.value]),e}function w(e,t){let i=!(arguments.length>2)||void 0===arguments[2]||arguments[2],l=arguments.length>3?arguments[3]:void 0,o=!1,d=new Map;e.forEach(e=>{let t=e[n.TC];t&&d.set(t.name,t)});let c=new Map(e.map(e=>[e.id,e])),u=new Map(e.map(e=>[e.name,e])),m=new Set(e.map(e=>e.id)),f=new Set;if(t.forEach(e=>{var t,a,l,s;let{op:v,value:g}=e;if("delete"===v&&i){let e=g.id?c.get(g.id):null;if((null==e?void 0:e[n.TC])&&e.isDelete)return;if((null==e?void 0:e[n.TC])&&!e.isDelete){let t={...e};t.isDelete=!0,c.set(t.id,t),u.set(t.name,t)}else e&&(c.delete(e.id),u.delete(e.name))}else if("delete"!==v||i){if("create"===v){let{name:e}=g,i=u.get(e);if(d.has(e)&&f.add(e),i){o=!0;let t={...i,...A(i,{mergeType:i.type,mergeValue:g.value}),isDelete:!1};b(t),c.set(t.id,t),u.set(e,t)}else{let i=d.get(e),{id:l,value:s,type:o=null!=(t=null==i?void 0:i.type)?t:r.hG.String,description:v=null!=(a=null==i?void 0:i.description)?a:"",enable:f=!0,isDelete:y=!1,contentType:x}=g,A=l&&!m.has(l)?l:p(m),j=h({id:A,name:e,value:s,type:o,description:v,enable:f,isDelete:y,relatedId:null==i?void 0:i.id,contentType:x,[n.TC]:i});b(j),c.set(A,j),u.set(e,j)}}else if("update"===v){let{id:e}=g,t=c.get(e);if(t){let e={...t,...g};b(e);let i=u.get(e.name);if(e.name===t.name)c.set(e.id,e),u.set(e.name,e);else if(i){i&&(o=!0),f.add(e.name);let t=function(e,t){var i,a;let[l,s]=(null==(i=e[n.TC])?void 0:i.name)===e.name?[e,t]:(null==(a=t[n.TC])?void 0:a.name)===t.name?[t,e]:e[n.TC]?[e,t]:t[n.TC]?[t,e]:[e,t];return{...l,...A(l,{mergeType:e.type===r.hG.File&&t.type===r.hG.File?r.hG.File:r.hG.Array,mergeValue:s.value})}}(i,e);t.isDelete=!1,c.set(t.id,t),u.set(t.name,t);let a=t.id!==i.id?i:e;if(a[n.TC]){let e={...a,id:a.id,relatedName:a[n.TC].name,name:a[n.TC].name,value:a.type===r.hG.Array?[]:void 0,type:null!=(l=a.type)?l:a[n.TC].type,description:null!=(s=a.description)?s:a[n.TC].description,isDelete:!0};c.set(a.id,e),u.set(e.name,e)}else c.delete(a.id)}else d.has(e.name)&&f.add(e.name),c.set(e.id,e),u.set(e.name,e)}}}else{let e=g.id?c.get(g.id):null;e&&(c.delete(e.id),u.delete(e.name))}}),f.size>0){let e=new Set;c.forEach(t=>{if(d.has(t.name)){var i;let a={...t};a[n.TC]=d.get(t.name),a.relatedId=null==(i=t[n.TC])?void 0:i.id,c.set(t.id,a),e.add(t.relatedId),d.delete(t.name)}}),c.forEach(t=>{let i=t[n.TC];if(i&&i.name!==t.name){if(e.has(i.id)){let e={...t};delete e.relatedId,e[n.TC]=void 0,c.set(t.id,e)}d.has(i.name)&&d.delete(i.name)}}),d.forEach(e=>{let t=v(e,m,!1,l);t.isDelete=!0,c.set(t.id,t),u.set(t.name,t)})}return o&&s.Ay.info((0,a.hw)({id:"apiCase.message.mergeIntoArray"})),d.clear(),[...c.values()]}function S(e,t,i){let a=(0,c.JF)(i),l=new Map(e.map(e=>[e.id,e])),s=new Map(null==t?void 0:t.map(e=>[e.id,e])),o={};return a.map(e=>{var t,i,a;null!=(t=o[e])||(o[e]=0);let d=`${e}#${o[e]}`;o[e]+=1;let c=l.get(d),u=s.get(d);return c?c:h({id:d,name:e,relatedId:u?d:void 0,enable:!0,isDelete:!1,[n.TC]:u,value:"",type:null!=(i=null==u?void 0:u.type)?i:r.hG.String,description:null!=(a=null==u?void 0:u.description)?a:""})})}function C(e,t){if(t&&e){if(t.length===e.length){let i=new Map,a=new Map;return e.forEach(e=>{e.relatedId?i.set(e.relatedId,e):a.set(e.id,e)}),t.every(e=>{if(e.relatedId){let t=i.get(e.relatedId);return 0===(0,d.createPatch)((0,o.omit)(t,"id"),(0,o.omit)(e,"id")).length||!1}let t=a.get(e.id);return 0===(0,d.createPatch)(t,e).length||!1})}return!1}return t===e}let I=["name","description","type","contentType"];function N(e,t,i){let a=[],n=t.reduce((e,t)=>(t&&e.set(t.id,t),e),new Map),l=new Set(e.map(e=>e.id));return e.forEach(e=>{let r,s={...e};if(!s.id){let e=p(e=>l.has(e));l.add(e),s.id=e}let o=(s.relatedId&&(r=n.get(s.relatedId)),"path"===i||r||(r=t.find(e=>e.name===s.name)),r);if(o){s.relatedId=o.id,s.relatedName=o.name;let e={...s};I.filter(e=>"path"!==i||"name"!==e).forEach(t=>{void 0!==e[t]&&e[t]===o[t]&&delete e[t]}),a.push(e)}else delete s.relatedId,s.relatedName=s.name,a.push(s)}),n.clear(),a}let k={addNewLine(e){var t;let{apiParams:i,apiCaseParams:a,target:n}=e,l=p(new Set(i.map(e=>e.id))),r=i.concat([{id:l,name:n.name,type:n.type,example:n.value,required:!!n.enable,description:null!=(t=n.description)?t:""}]),s=n.id,o=!1;return{calcParams:e=>e.map(e=>(e.id===n.id&&(e.relatedId=l),e)),apiParams:r,apiCaseParams:(a||[]).map(e=>e.id===s?(o=!0,{id:n.id,relatedId:l,relatedName:n.name,enable:n.enable,name:void 0,type:void 0,description:void 0,value:n.value,isDelete:!1}):e).concat(!1===o?[{id:n.id,relatedId:l,relatedName:n.name,enable:n.enable,name:void 0,type:void 0,description:void 0,value:n.value,isDelete:!1}]:[])}},deleteOneLine(e){let{apiParams:t,apiCaseParams:i,target:a}=e,n=t.filter(e=>e.id!==a.relatedId);return{calcParams:e=>e.filter(e=>e.id!==a.id),apiParams:n,apiCaseParams:null==i?void 0:i.filter(e=>e.id!==a.id)}},saveOneField(e){let{apiParams:t,apiCaseParams:i,target:a,dataIndex:n}=e,l=a[n],s=t.map(e=>{if(a.relatedId===e.id){if("type"===n){if(l===r.hG.Array&&!Array.isArray(e.example))return{...e,example:void 0!==e.example?[String(e.example)]:[],[n]:l};if(l!==r.hG.Array&&l!==r.hG.File&&Array.isArray(e.example))return{...e,example:e.example.filter(e=>"string"==typeof e).join(","),[n]:l}}return{...e,[n]:l}}return e});return{calcParams:e=>e.map(e=>{if(e.id===a.id){if("type"===n){if(l===r.hG.Array&&!Array.isArray(e.value))return{...e,value:void 0!==e.value?[String(e.value)]:[],[n]:l};if(l!==r.hG.Array&&l!==r.hG.File&&Array.isArray(e.value))return{...e,value:e.value.filter(e=>"string"==typeof e).join(","),[n]:l}}return"name"===n?{...e,name:a[n],relatedName:a[n]}:{...e,[n]:a[n]}}return e}),apiParams:s,apiCaseParams:null==i?void 0:i.map(e=>{if(a.id===e.id){if("type"===n){if(l===r.hG.Array&&!Array.isArray(e.value))return{...e,value:void 0!==e.value?[String(e.value)]:[],[n]:l};if(l!==r.hG.Array&&l!==r.hG.File&&Array.isArray(e.value))return{...e,value:e.value.filter(e=>"string"==typeof e).join(","),[n]:l}}return"name"===n?{...e,name:void 0,relatedName:l}:{...e,[n]:l}}return e})}},saveAll(e){let{self:t,apiParams:i,type:a}=e,l=new Map(null==i?void 0:i.map(e=>[e.id,e])),r=new Set(null==i?void 0:i.map(e=>e.id)),s=t.filter(e=>!e.isDelete).map(e=>{let{relatedId:t}=e;return t&&l.has(t)?{...l.get(t),id:e.relatedId,name:e.name,description:e.description,type:e.type,contentType:e.contentType}:(e.relatedId="path"!==a?p(r):e.id,{id:e.relatedId,name:e.name,required:e.enable,description:e.description,example:e.value,type:e.type,contentType:e.contentType})}),o=t.filter(e=>!e.isDelete).map(e=>({...e,id:e.id,relatedId:e.relatedId,relatedName:e.name,name:void 0,description:void 0,type:void 0,isDelete:!1})),d=new Map(s.map(e=>[e.id,e]));return{apiDetail:s,apiCase:o,apiCaseState:t.map(e=>({...e,relatedName:e.name,relatedId:e.relatedId,[n.TC]:e.relatedId?d.get(e.relatedId):null}))}}}},706046:function(e,t,i){"use strict";i.d(t,{by:()=>n,mW:()=>l});var a=i(159347);function n(e){let t=new Map(e.map(e=>[e.id,e])),i=new Map(e.map(e=>[e.name,e]));return{idMap:t,nameMap:i,uniSet:new Set(e)}}function l(e,t){return e===t||function(e,t){if(e.length!==t.length)return!1;let i={};e.forEach(e=>{var t;null!=(t=i[e])||(i[e]=0),i[e]+=1});for(let e=0;e<t.length;e+=1){let a=t[e];if(!(a in i))return!1;i[a]-=1,0===i[a]&&delete i[a]}return!0}((0,a.JF)(e),(0,a.JF)(t))}},736974:function(e,t,i){"use strict";i.d(t,{A:()=>u});var a=i(526838),n=i(300367),l=i(838e3),r=i(740565),s=i(929063),o=i(641486),d=i.n(o),c=i(618487);class u extends d().Component{render(){let{apiDetailFolderMap:e,id:t}=this.props;if(0===t)return(0,l.jsxs)("span",{children:[(0,r.hw)({id:"defaultFolder"})," "]});if(!e||!e[t]||!t)return null;let i=e[t];return(0,l.jsxs)("span",{children:[i.name," "]})}constructor(...e){super(...e),(0,a._)(this,"componentDidMount",()=>{let{id:e,apiDetailFolderMap:t}=this.props;!e||t&&t[e]||(0,s.JT)()})}}u=(0,n.__decorate)([(0,c.connect)(e=>{let{apiDetailFolder:t}=e;return{apiDetailFolderMap:t.apiDetailFolderMap}})],u)},348241:function(e,t,i){"use strict";i.d(t,{Hl:()=>o,KX:()=>c,RG:()=>d,hE:()=>r,oA:()=>s});var a=i(171406),n=i(140049);let l={status:{},tags:{},responsible:{}},r=(e,t)=>{if(!(null==e?void 0:e.length))return[];let i=[],a=[...e],n=a.shift();for(;n;)t.includes(n.type)&&i.push(n),n.children&&a.push(...n.children),n=a.shift();return i},s=e=>e.reduce((e,t)=>(e[t.value]=0,e),{}),o=(e,t,i,a)=>{let n=t.map(t=>({...t,count:e.status[t.value]||0})),l=i.map(t=>({...t,count:e.tags[t.value]||0}));return{statusList:n,tagList:l,responsibleList:a.map(t=>({...t,count:e.responsible[t.value]||0}))}},d=(e,t,i,a,n)=>{let l=s(t||[]),o=s(i||[]),d=s(a||[]);return r(e||[],n).forEach(e=>{if(null==e?void 0:e.api){let{responsibleId:t,status:i,tags:a}=e.api;l.hasOwnProperty(i)&&(l[i]+=1),d.hasOwnProperty(t)&&(d[t]+=1),(a||[]).forEach(e=>{o.hasOwnProperty(e)&&(o[e]+=1)})}if(null==e?void 0:e.doc){let{tags:t=[]}=e.doc;(null==t?void 0:t.length)&&t.forEach(e=>{o.hasOwnProperty(e)&&(o[e]+=1)})}}),{status:l,tags:o,responsible:d}},c=()=>{let[e,t]=(0,a.A)(l);return{apiStatistic:e,buildApiStatistic:(0,n.A)(function(){for(var e=arguments.length,i=Array(e),a=0;a<e;a++)i[a]=arguments[a];t(d(...i))})}}},792093:function(e,t,i){"use strict";i.d(t,{NH:()=>n,vx:()=>l});var a=i(637899);function n(){return(0,a.I)().open()}function l(){return(0,a.I)().open(void 0,!1)}},252291:function(e,t,i){"use strict";i.d(t,{c:()=>d});var a=i(740565),n=i(307528),l=i(140049),r=i(618487),s=i(895998),o=i(443401);function d(e){let t=(0,o.A)();return(0,l.A)(i=>{t({title:(0,a.hw)({id:"branch.action.pickFromMain"}),dispatchLatestMainBranchTreeData:s.js,onSubmit:async e=>{let{ids:t,...i}=e;await (0,n.aC)({...i,pickIds:{dataSchemaFolderIds:t}}),await (0,r.dispatchFetchDataSchemaFolderList)(),(0,r.dispatchFetchDataSchemaTreeList)()},onForked:e,moduleId:i})})}},863436:function(e,t,i){"use strict";i.d(t,{A:()=>l});var a=i(838e3),n=i(471504);let l=e=>{let{icon:t,title:i,...l}=e,r=t?(0,a.jsxs)("div",{className:"flex items-center truncate",children:[(0,a.jsx)("span",{className:"ui-tree-iconEle ui-tree-icon__customize",children:t}),(0,a.jsx)("div",{className:"w-full truncate",children:i})]}):i;return(0,a.jsx)(n.Gq.TreeTitle,{...l,title:r})}},57379:function(e,t,i){"use strict";i.d(t,{c:()=>r});var a=i(838e3),n=i(740565),l=i(863436);function r(e){let{action:t,title:i,icon:r}=e;return(0,a.jsx)(l.A,{icon:r,title:i||(0,n.hw)({id:"new"}),onClick:e=>{e.stopPropagation(),e.preventDefault(),t()}})}},985518:function(e,t,i){"use strict";i.d(t,{A:()=>c});var a=i(838e3),n=i(740565),l=i(348241),r=i(689368),s=i(269966),o=i(808306),d=i(618487);let c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(0,r.DA)(e=>e.projectMember.currentProjectMembers),i=(null==t?void 0:t.map(e=>{let{userId:t,nickname:i,user:a}=e;return{name:i||(null==a?void 0:a.username)||(null==a?void 0:a.name),value:t}}))||[],{allApiTags:c,allApiStatuses:u}=(0,d.getAllTagsAndStatuses)(null!=e?e:[]),p=c.map(e=>({name:e,value:e})),m=u.map(e=>{let{color:t,value:i,labelLocale:l}=s.zj[e];return{name:(0,n.hw)({id:l}),value:i,render:()=>(0,a.jsx)(o.A,{color:t,text:(0,n.hw)({id:l})})}}),h=(0,l.RG)(null!=e?e:[],m,p,i,["apiDetail","doc"]),{statusList:v,tagList:f,responsibleList:g}=(0,l.Hl)(h,m,p,i),y=[{name:(0,n.hw)({id:"branch.info.sprintAdd.tag"}),value:"INSERT"},{name:(0,n.hw)({id:"branch.info.sprintUpdate.tag"}),value:"UPDATE"}];return[{label:(0,n.hw)({id:"status"}),type:"apiStatuses",data:v},{label:(0,n.hw)({id:"tags"}),type:"tags",data:f},{label:(0,n.hw)({id:"responsible"}),type:"responsibleIds",data:g},{label:(0,n.hw)({id:"updatedBy"}),type:"updatedByIds",data:i},{label:(0,n.hw)({id:"branch.mergeTree.filter.label.changeType"}),type:"changeType",data:y}]}},960454:function(e,t,i){"use strict";i.d(t,{Ay:()=>d,Vi:()=>o});var a=i(838e3),n=i(689368),l=i(671466);i(641486);var r=i(52940);let s=(e,t,i)=>(0,n.Ay)(a=>{var n,l;let{apiDetailFolder:s}=a;return e?"INTERNAL"===(null==(l=s.apiDetailFolderMap)||null==(n=l[String(e)])?void 0:n.visibility)||"INTERNAL"===(0,r.R9)({entityId:e,entityType:"API_FOLDER",parentId:t,moduleId:i,apiFolderMap:s.apiDetailFolderMap,apiRootFolderMap:s.rootFolderMap}):void 0}),o=e=>{var t,i;let{item:n,children:r}=e;return s(n.id,null!=(i=null==(t=n.parent)?void 0:t.id)?i:n.parentId,n.moduleId)||"INTERNAL"===n.effectiveVisibility?(0,a.jsxs)("div",{className:"relative inline-block mr-1",children:[r,(0,a.jsx)("div",{style:{position:"absolute",right:"-2px",bottom:"-2px",display:"flex",alignItems:"center",justifyContent:"center",width:"10px",height:"10px",background:"var(--ui-component-background)",borderRadius:"3px",boxShadow:"0 1px 2px 0 rgba(14, 24, 41, 0.04)"},children:(0,a.jsx)(l.A,{type:"icon-users-teams",color:"var(--ui-blue-6)",size:10})})]}):(0,a.jsx)("span",{className:"mr-1",children:r})},d=e=>{var t,i;let{item:n,children:r}=e;return s(n.id,null!=(i=null==(t=n.parent)?void 0:t.id)?i:n.parentId,n.moduleId)||"INTERNAL"===n.effectiveVisibility?(0,a.jsxs)(a.Fragment,{children:[r,(0,a.jsx)("div",{className:"ui-tree-iconEle-internal",children:(0,a.jsx)(l.A,{type:"icon-users-teams",color:"var(--ui-blue-6)",size:10})})]}):(0,a.jsx)(a.Fragment,{children:r})}},30868:function(e,t,i){"use strict";i.d(t,{Ay:()=>u,Rn:()=>c});var a=i(838e3),n=i(957705),l=i(671466),r=i(641486),s=i(52940),o=i(689368);let d=(e,t,i)=>{let a=(0,o.Ay)(e=>e.apiDetailFolder.rootFolderMap),l=(0,o.Ay)(e=>e.apiDetailFolder.apiDetailFolderMap),d=(0,n.Ay)(e=>e.docMap);return(0,r.useMemo)(()=>{var n;return e?"INTERNAL"===(null==d||null==(n=d[e])?void 0:n.visibility)||"INTERNAL"===(0,s.R9)({entityId:e,entityType:"DOC",parentId:t,moduleId:i,apiFolderMap:l,apiRootFolderMap:a}):void 0},[e,t,i,a,l,d])},c=e=>{var t,i;let{item:n,children:r}=e;return d(n.id,null!=(i=null==(t=n.parent)?void 0:t.id)?i:n.parentId,n.moduleId)||"INTERNAL"===n.effectiveVisibility?(0,a.jsxs)("div",{className:"relative inline-block mr-1",children:[r,(0,a.jsx)("div",{style:{position:"absolute",right:"-2px",bottom:"-2px",display:"flex",alignItems:"center",justifyContent:"center",width:"10px",height:"10px",background:"var(--ui-component-background)",borderRadius:"3px",boxShadow:"0 1px 2px 0 rgba(14, 24, 41, 0.04)"},children:(0,a.jsx)(l.A,{type:"icon-users-teams",color:"var(--ui-blue-6)",size:10})})]}):(0,a.jsx)("span",{className:"mr-1",children:r})},u=e=>{var t,i;let{item:n,children:r}=e;return d(n.id,null!=(i=null==(t=n.parent)?void 0:t.id)?i:n.parentId,n.moduleId)||"INTERNAL"===n.effectiveVisibility?(0,a.jsxs)(a.Fragment,{children:[r,(0,a.jsx)("div",{className:"ui-tree-iconEle-internal",children:(0,a.jsx)(l.A,{type:"icon-users-teams",color:"var(--ui-blue-6)",size:10})})]}):(0,a.jsx)(a.Fragment,{children:r})}},404529:function(e,t,i){"use strict";i.d(t,{Ay:()=>d,Qk:()=>o});var a=i(838e3),n=i(689368),l=i(671466);i(641486);var r=i(52940);let s=(e,t,i,a)=>(0,n.Ay)(n=>{var l,s,o,d;let{apiDetail:c,apiDetailFolder:u,apiCase:p}=n;return e?"INTERNAL"===(i?null==(s=p.apiCaseMap)||null==(l=s[e])?void 0:l.visibility:null==(d=c.apiDetailMap)||null==(o=d[e])?void 0:o.visibility)||"INTERNAL"===(0,r.R9)({entityId:e,entityType:i?"HTTP_API_CASE":"HTTP_API",parentId:t,moduleId:a,endpointMap:c.apiDetailMap,apiFolderMap:u.apiDetailFolderMap,apiRootFolderMap:u.rootFolderMap}):void 0}),o=e=>{var t,i;let{item:n,children:r,isEndpointCase:o}=e;return s(n.id,null!=(i=null==(t=n.parent)?void 0:t.id)?i:n.parentId,o,n.moduleId)||"INTERNAL"===n.effectiveVisibility?(0,a.jsxs)("div",{className:"relative inline-block mr-1",children:[r,(0,a.jsx)("div",{style:{position:"absolute",right:"-2px",bottom:o?"-2px":"1px",display:"flex",alignItems:"center",justifyContent:"center",width:"10px",height:"10px",background:"var(--ui-component-background)",borderRadius:"3px",boxShadow:"0 1px 2px 0 rgba(14, 24, 41, 0.04)"},children:(0,a.jsx)(l.A,{type:"icon-users-teams",color:"var(--ui-blue-6)",size:10})})]}):(0,a.jsx)("span",{className:"mr-1",children:r})},d=e=>{var t,i;let{item:n,children:r,isEndpointCase:o}=e;return s(n.id,null!=(i=null==(t=n.parent)?void 0:t.id)?i:n.parentId,o,n.moduleId)||"INTERNAL"===n.effectiveVisibility?(0,a.jsxs)(a.Fragment,{children:[r,(0,a.jsx)("div",{className:"ui-tree-iconEle-internal",children:(0,a.jsx)(l.A,{type:"icon-users-teams",color:"var(--ui-blue-6)",size:10})})]}):(0,a.jsx)(a.Fragment,{children:r})}},984999:function(e,t,i){"use strict";i.d(t,{Ay:()=>d,MZ:()=>o});var a=i(838e3),n=i(689368),l=i(671466);i(641486);var r=i(52940);let s=(e,t)=>(0,n.Ay)(i=>{var a,n;let{apiSchemaFolder:l}=i;return e?"INTERNAL"===(null==(n=l.apiSchemaFolderMap)||null==(a=n[e])?void 0:a.visibility)||"INTERNAL"===(0,r.R9)({entityId:e,entityType:"DATA_SCHEMA_FOLDER",parentId:t,dataSchemaFolderMap:l.apiSchemaFolderMap}):void 0}),o=e=>{var t,i;let{item:n,children:r}=e;return s(n.id,null!=(i=null==(t=n.parent)?void 0:t.id)?i:n.parentId)||"INTERNAL"===n.effectiveVisibility?(0,a.jsxs)("div",{className:"relative inline-block mr-1",children:[r,(0,a.jsx)("div",{style:{position:"absolute",right:"-2px",bottom:"-2px",display:"flex",alignItems:"center",justifyContent:"center",width:"10px",height:"10px",background:"var(--ui-component-background)",borderRadius:"3px",boxShadow:"0 1px 2px 0 rgba(14, 24, 41, 0.04)"},children:(0,a.jsx)(l.A,{type:"icon-users-teams",color:"var(--ui-blue-6)",size:10})})]}):(0,a.jsx)("span",{className:"mr-1",children:r})},d=e=>{var t,i;let{item:n,children:r}=e;return s(n.id,null!=(i=null==(t=n.parent)?void 0:t.id)?i:n.parentId)||"INTERNAL"===n.effectiveVisibility?(0,a.jsxs)(a.Fragment,{children:[r,(0,a.jsx)("div",{className:"ui-tree-iconEle-internal",children:(0,a.jsx)(l.A,{type:"icon-users-teams",color:"var(--ui-blue-6)",size:10})})]}):(0,a.jsx)(a.Fragment,{children:r})}},381711:function(e,t,i){"use strict";i.d(t,{Ay:()=>d,iO:()=>o});var a=i(838e3),n=i(689368),l=i(671466);i(641486);var r=i(52940);let s=(e,t)=>(0,n.Ay)(i=>{var a,n;let{apiSchema:l,apiSchemaFolder:s}=i;return e?"INTERNAL"===(null==(n=l.map)||null==(a=n[e])?void 0:a.visibility)||"INTERNAL"===(0,r.R9)({entityId:e,entityType:"DATA_SCHEMA",parentId:t,dataSchemaFolderMap:s.apiSchemaFolderMap}):void 0}),o=e=>{var t,i;let{item:n,children:r}=e;return s(n.id,null!=(i=null==(t=n.parent)?void 0:t.id)?i:n.parentId)||"INTERNAL"===n.effectiveVisibility?(0,a.jsxs)("div",{className:"relative inline-block mr-1",children:[r,(0,a.jsx)("div",{style:{position:"absolute",right:"-2px",bottom:"-2px",display:"flex",alignItems:"center",justifyContent:"center",width:"10px",height:"10px",background:"var(--ui-component-background)",borderRadius:"3px",boxShadow:"0 1px 2px 0 rgba(14, 24, 41, 0.04)"},children:(0,a.jsx)(l.A,{type:"icon-users-teams",color:"var(--ui-blue-6)",size:10})})]}):(0,a.jsx)("span",{className:"mr-1",children:r})},d=e=>{var t,i;let{item:n,children:r}=e;return s(n.id,null!=(i=null==(t=n.parent)?void 0:t.id)?i:n.parentId)||"INTERNAL"===n.effectiveVisibility?(0,a.jsxs)(a.Fragment,{children:[r,(0,a.jsx)("div",{className:"ui-tree-iconEle-internal",children:(0,a.jsx)(l.A,{type:"icon-users-teams",color:"var(--ui-blue-6)",size:10})})]}):(0,a.jsx)(a.Fragment,{children:r})}},316620:function(e,t,i){"use strict";i.d(t,{A:()=>f});var a=i(838e3),n=i(740565),l=i(69712),r=i(471504),s=i(257100),o=i(458184),d=i(671466),c=i(641486),u=i(133150),p=i(2183);let m="dropdown-jxKv_e",h="title-Bz7kZJ";var v=i(553047);let f=function(e){let{data:t={name:""},resourceType:i,...f}=e,g=(0,p._$)(e=>e.projectBaseBranch),y=(0,c.useMemo)(()=>({apiDetail:(0,a.jsxs)("span",{className:"truncate flex items-center",children:[(0,a.jsx)(r.mn,{abbr:!0,method:t.method,title:t.name,className:"mr-1"}),(0,a.jsx)("span",{className:"truncate",children:t.name})]}),CUSTOM_ENDPOINT:(0,a.jsxs)("span",{className:"truncate flex items-center",children:[(0,a.jsx)(v.w,{abbr:!0,protocol:t.protocol,title:t.name,className:"mr-1"}),(0,a.jsx)("span",{className:"truncate",children:t.name})]}),doc:(0,a.jsxs)("span",{className:"truncate flex items-center",children:[(0,a.jsx)(d.A,{type:"icon-file-docs",className:"mr-1"}),(0,a.jsx)("span",{className:"truncate",children:t.displayName||t.name})]}),httpResponse:(0,a.jsxs)("span",{className:"truncate flex items-center",children:[(0,a.jsx)(d.A,{color:"var(--ui-purple-6)",type:"icon-response-component",className:"mr-1"}),(0,a.jsx)("span",{className:"truncate",children:t.name})]}),SECURITY_SCHEME:(0,a.jsxs)("span",{className:"truncate flex items-center",children:[(0,a.jsx)(d.A,{color:"var(--ui-blue-6)",type:"icon-ShieldKeyhole",className:"mr-1"}),(0,a.jsx)("span",{className:"truncate",children:t.name})]}),apiSchema:(0,a.jsxs)("span",{className:"truncate flex items-center",children:[(0,a.jsx)(d.A,{type:"icon-button-mockup",className:"mr-1",color:"var(--ui-magenta-6)"}),(0,a.jsx)("span",{className:"truncate",children:t.displayName||t.name})]}),apiCase:(0,a.jsxs)("span",{className:"truncate flex items-center",children:[(0,a.jsx)(r.a9,{}),(0,a.jsx)("span",{className:"truncate",children:t.name})]}),testScenario:(0,a.jsxs)("span",{className:"truncate flex items-center",children:[(0,a.jsx)(d.A,{type:"icon-task-scenario",color:"var(--ui-purple-6)",size:16,className:"mr-1"}),(0,a.jsx)("span",{className:"truncate",children:t.name})]})}),[t]),x=(0,c.useMemo)(()=>{var e;if(g)return(0,a.jsxs)("div",{className:m,onClick:l.dG,onDoubleClick:l.dG,children:[(0,a.jsxs)("div",{className:h,children:[(0,a.jsx)(d.A,{type:"icon-link2",className:"mr-1"}),(0,a.jsx)("span",{className:"flex-shrink-0",children:(0,a.jsx)(n.sA,{id:"branch.resource.reference1"})}),(0,a.jsx)(u.A,{title:g.name,type:g.type,size:12,style:{margin:"0 2px"}}),(0,a.jsx)("span",{className:"truncate mr-1",title:g.name,children:g.name}),(0,a.jsx)("span",{className:"flex-shrink-0",children:(0,a.jsx)(n.sA,{id:"branch.resource.reference2"})})]}),(0,a.jsx)("div",{className:"mt-1",style:{maxWidth:"100%"},title:t.name,children:null!=(e=y[i])?e:(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(d.A,{type:"icon-FolderDefault",className:"mr-1"}),(0,a.jsx)("span",{className:"truncate",children:t.name})]})})]})},[g,y,i,t.name]);return g?(0,a.jsx)(s.A,{placement:"bottomLeft",overlay:x,children:(0,a.jsx)(o.A,{className:"ml-auto flex-shrink-0",type:"text",icon:(0,a.jsx)(d.A,{type:"icon-link",color:"var(--ui-disabled-color)"}),size:"small",...f})}):null}},4584:function(e,t,i){"use strict";i.d(t,{$D:()=>u,O8:()=>d,d4:()=>o,sw:()=>p});var a=i(496411),n=i(140049),l=i(325475),r=i(179574);function s(e,t){var i;let n=r.L.getState().apiNameModeMap,l=String(null!=(i=(0,a.MJ)())?i:0),s=[l,e].filter(Boolean).join("-");return s in n?s:t&&l in n?l:s}function o(e){return(0,l.Pj)(r.L,t=>t.apiNameModeMap[s(e)]||"name")}function d(e){let t=o(e),i=(0,l.Pj)(r.L,e=>e.setApiNameMode);return{apiNameMode:t,setApiNameMode:(0,n.A)(t=>{i(s(e,!1),t)})}}function c(e){var t;let{name:i,path:a,apiNameMode:n}=e;return null!=(t=({name:i,path:a||i})[n])?t:""}function u(e,t){let{apiNameMode:i}=d(t);return c({name:null==e?void 0:e.name,path:null==e?void 0:e.path,apiNameMode:i})}function p(e){var t;let i=r.L.getState().apiNameModeMap[null!=(t=(0,a.MJ)())?t:0]||"name";return c({name:null==e?void 0:e.name,path:null==e?void 0:e.path,apiNameMode:i})}},895998:function(e,t,i){"use strict";i.d(t,{K5:()=>m,ZV:()=>u,cy:()=>d,js:()=>c,vO:()=>o,xY:()=>p});var a=i(838e3),n=i(81319),l=i(689368),r=i(622754),s=i(671466);function o(e){return e.expanded?(0,a.jsx)(s.A,{type:"icon-folder-open",size:16}):(0,a.jsx)(s.A,{type:"icon-FolderDefault",size:16})}let d=async()=>{await (0,n.in)();let e=(0,n.Ky)().branchHttpFolderMap,t=(0,n.Ky)().baseApiTreeList;return(0,r.d)(t,t=>{var i;if("apiDetailFolder"!==t.type)return null;let n=e&&!!e[t.folder.id];return{...t,title:t.name,disabled:n,icon:(null==(i=t.children)?void 0:i.length)?o:(0,a.jsx)(s.A,{type:"icon-FolderDefault",size:16})}})},c=async()=>{var e;await (0,n.p8)();let t=null!=(e=(0,l.DA)(e=>e.apiSchemaFolder.apiSchemaFolderMap))?e:{},i=(0,n.Ky)().baseDataSchemaTreeList;return(0,r.d)(i,e=>{var i;if("apiSchemaFolder"!==e.type)return null;let n=!!t[e.folder.id];return{...e,title:e.name,disabled:n,icon:(null==(i=e.children)?void 0:i.length)?o:(0,a.jsx)(s.A,{type:"icon-FolderDefault",size:16})}})},u=async()=>{var e;await (0,n.bL)();let t=null!=(e=(0,l.DA)(e=>e.httpResponseFolder.map))?e:{},i=(0,n.Ky)().baseResponseComponentTreeList;return(0,r.d)(i,e=>{var i;if("responseFolder"!==e.type)return null;let n=!!t[e.folder.id];return{...e,title:e.name,disabled:n,icon:(null==(i=e.children)?void 0:i.length)?o:(0,a.jsx)(s.A,{type:"icon-FolderDefault",size:16})}})},p=async()=>{var e;await (0,n.tr)();let t=null!=(e=(0,l.DA)(e=>e.securitySchemeFolder.map))?e:{},i=(0,n.Ky)().baseSecuritySchemeTreeList;return(0,r.d)(i,e=>{var i;if("SECURITY_SCHEME_FOLDER"!==e.type)return null;let n=!!t[e.folder.id];return{...e,title:e.name,disabled:n,icon:(null==(i=e.children)?void 0:i.length)?o:(0,a.jsx)(s.A,{type:"icon-FolderDefault",size:16})}})},m=async()=>{var e;await (0,n.Yo)();let t=null!=(e=(0,l.DA)(e=>e.oasComponentFolder.map))?e:{},i=Object.values((0,n.Ky)().baseOasComponentTreeList||{}).flat();return(0,r.d)(i,e=>{var i;if("OAS_COMPONENT_FOLDER"!==e.type)return null;let n=!!t[e.folder.id];return{...e,title:e.name,disabled:n,icon:(null==(i=e.children)?void 0:i.length)?o:(0,a.jsx)(s.A,{type:"icon-FolderDefault",size:16})}})}},925543:function(e,t,i){"use strict";i.d(t,{A:()=>w});var a=i(140049),n=i(838e3),l=i(182187),r=i(740565),s=i(135400),o=i(709372),d=i(941929),c=i(751455),u=i(838487),p=i.n(u),m=i(764007),h=i(458184),v=i(794397),f=i(671466),g=i(641486),y=i(949760);let x={tempItem:"tempItem-bhgCpE",tempDescription:"tempDescription-YLcw8e",header:"header-boHakE",headerTitle:"headerTitle-fZhdYM",back:"back-zsalJ8",clickArea:"clickArea-KEDEjC"},A=e=>{let{title:t,hideBackBtn:i,onBack:a,onClose:l}=e;return(0,n.jsx)("div",{className:x.header,children:(0,n.jsx)(y.A,{className:i?void 0:x.clickArea,style:{borderBottom:"none"},onBack:i?void 0:a,renderLeft:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:x.headerTitle,children:t}),i?void 0:(0,n.jsx)("div",{className:x.back,onClick:i?void 0:a,children:(0,r.hw)({id:"back"})})]}),onClick:i?void 0:a,type:"modal",renderRight:(0,n.jsx)(h.A,{type:"text",onClick:l,icon:(0,n.jsx)(f.A,{type:"icon-x-close"})})})})},j=e=>{let{onCancel:t,...i}=e,[u,y]=(0,d.A)(i,{defaultValue:!1,valuePropName:"visible"}),j=(0,s.Qm)().openEndpointDesignGuideline,b=(0,o.k)(e=>e.fetchPresetGuidelines),{loading:w,data:S}=(0,c.Ay)(b),C=(0,g.useMemo)(()=>{var e,t;let i=null==S?void 0:S.find(e=>"COMPLETE"===e.type),a=null==S?void 0:S.find(e=>"SIMPLE"===e.type);return[{key:"COMPLETE",icon:(0,n.jsx)("div",{className:"flex justify-center items-center",style:{width:44,height:44,borderRadius:10,background:"var(--ui-green-1)"},children:(0,n.jsx)(f.A,{type:"icon-documentlinea",size:20,color:"var(--ui-green-6)"})}),title:(0,r.hw)({id:"api.designGuideline.template.complete.title"}),description:(0,r.hw)({id:"api.designGuideline.template.complete.description"}),content:null!=(e=null==i?void 0:i.content)?e:""},{key:"SIMPLE",icon:(0,n.jsx)("div",{className:"flex justify-center items-center",style:{width:44,height:44,borderRadius:10,border:"1px dashed var(--ui-border-color-split)",background:"var(--ui-component-background)"},children:(0,n.jsx)(f.A,{type:"icon-plus",size:20,color:"var(--ui-text-color-secondary)"})}),title:(0,r.hw)({id:"api.designGuideline.template.blank.title"}),description:(0,r.hw)({id:"api.designGuideline.template.blank.description"}),content:null!=(t=null==a?void 0:a.content)?t:""}]},[S]),[I,N]=(0,g.useState)(),k=(0,g.useMemo)(()=>C.find(e=>e.key===I),[I,C]),T=(0,a.A)(e=>{y(!1),null==t||t(e)}),M=(0,a.A)(e=>{null==j||j({template:null!=e?e:null==k?void 0:k.content,moduleId:0,type:"create"}),T()}),E=(0,a.A)(e=>{N(e)});return(0,n.jsxs)(m.Ay,{destroyOnClose:!0,maskClosable:!1,...i,width:k?960:480,centered:!!k,bodyStyle:{padding:0,minHeight:200},closable:!1,title:!1,open:u,onCancel:T,footer:k?(0,n.jsx)("div",{style:{paddingTop:8},children:(0,n.jsx)(h.A,{type:"primary",onClick:()=>M(null==k?void 0:k.content),children:(0,r.hw)({id:"api.designGuideline.add.useTheTemplate"})})}):null,children:[(0,n.jsx)(A,{hideBackBtn:!k,onClose:T,onBack:()=>N(void 0),title:k?k.title:(0,r.hw)({id:"api.designGuideline.add.modalTitle"})}),w?(0,n.jsx)("div",{className:"h-full flex justify-center items-center",children:(0,n.jsx)(v.A,{})}):(0,n.jsx)("div",{style:{padding:20,maxHeight:683,overflow:"auto"},children:k?(0,n.jsx)("div",{className:"w-full",style:{minHeight:643},children:(0,n.jsx)(l.A,{value:null==k?void 0:k.content})}):(0,n.jsx)("div",{className:"flex flex-col",style:{gap:10},children:C.map(e=>(0,n.jsxs)("div",{className:x.tempItem,onClick:()=>E(e.key),children:[(0,n.jsx)("div",{className:"flex-shrink-0",children:e.icon}),(0,n.jsxs)("div",{className:"flex flex-col",style:{gap:2},children:[(0,n.jsx)("div",{className:p()(x.tempTitle),children:e.title}),(0,n.jsx)("div",{className:p()(x.tempDescription),children:e.description})]})]},e.key))})})]})};var b=i(722238);let w=()=>{let e=(0,b.bq)();return(0,a.A)(t=>e.show(j,null!=t?t:{}))}},443401:function(e,t,i){"use strict";i.d(t,{A:()=>T});var a=i(843212),n=i(744283),l=i(523845),r=i(722238),s=i(140049),o=i(838e3),d=i(117464),c=i(351141),u=i(307355),p=i(740565),m=i(2183),h=i(850050),v=i(496411),f=i(471504),g=i(751455),y=i(662387),x=i(838487),A=i.n(x),j=i(554692),b=i(764007),w=i(524381),S=i(458184),C=i(794397),I=i(671466),N=i(641486);let k=e=>{let{moduleId:t,componentType:i,onSubmit:a,dispatchLatestMainBranchTreeData:n,onCancel:l,onForked:r,...x}=e,[k,T]=(0,N.useState)(!1),[M,E]=(0,N.useState)([]),_=(0,N.useRef)(),F=(0,N.useRef)([]),[D,R]=(0,N.useState)(!!_.current);(0,N.useEffect)(()=>{x.visible&&(T(!0),n().then(e=>{let a=e;t&&(a=e.filter(e=>e.moduleId===t)),i&&(a=(0,u.A)(a,[e=>{var t;return(null==(t=e.folder)?void 0:t.componentType)===i}])),F.current=a,E(a),T(!1)}))},[n,x.visible,t,i]);let O=(0,m._$)(e=>e.projectCurrentBranch.id),P=(0,s.A)(e=>e.disabled?(0,o.jsx)(j.A,{className:"flex-1",title:(0,p.hw)({id:"branch.forked.disabled.tip"},{type:(0,p.hw)({id:"folder"})}),children:e.name}):e.name),L=(0,s.A)((e,t)=>{var i;let{nativeEvent:a}=t;a.stopPropagation(),_.current=parseInt(null==(i=e[0])?void 0:i.replace(/\w+./,""),10),R(!!e[0])}),{run:$,loading:B}=(0,g.Ay)(()=>a({ids:[_.current],sourceBranchId:(0,v.sI)(),targetBranchId:(0,v.U3)()}),{manual:!0,onSuccess(){null==r||r(_.current),null==l||l()}}),[z,U]=(0,N.useState)({searchKeyWord:""});(0,y.A)(()=>{E((0,u.A)(F.current,[e=>{var t;return(!i||(null==(t=e.folder)?void 0:t.componentType)===i)&&e.name.toLowerCase().includes(z.searchKeyWord.toLowerCase())}]))},[z.searchKeyWord,i]);let H=(0,N.useMemo)(()=>!M.length,[M.length]);return(0,o.jsxs)(b.Ay,{...x,maskClosable:!1,width:600,onOk:$,onCancel:l,okButtonProps:{disabled:!D},footer:(0,o.jsxs)("div",{className:"flex items-center text-secondary",children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)(I.A,{className:"mr-1 flex-shrink-0",type:"icon-info1"}),(0,o.jsx)("span",{className:"text-left ",style:{lineHeight:"18px"},children:(0,o.jsx)(p.sA,{id:"branch.forkFolder.tip"})})]}),(0,o.jsxs)(w.A,{className:"ml-auto flex-shrink-0",children:[(0,o.jsx)(S.A,{onClick:l,children:(0,o.jsx)(p.sA,{id:"cancel"})}),(0,o.jsx)(S.A,{disabled:!D,type:"primary",onClick:$,loading:B,children:(0,o.jsx)(p.sA,{id:"confirm"})})]})]}),children:[(0,o.jsx)(c.A,{defaultTargetBranchId:O,className:"mb-3"}),(0,o.jsx)(h.A,{isEnableOptionsFilter:!1,value:z,onChange:e=>{U(e)}}),(0,o.jsx)(C.A,{spinning:k,children:(0,o.jsx)("div",{className:A()({"flex flex-col justify-center":H}),style:{height:360},children:H?(0,o.jsx)(d.A,{}):(0,o.jsx)(f.Gq,{virtual:!0,selectable:!0,titleRender:P,className:"mt-2",treeData:M,onSelect:L,height:360,defaultExpandAll:!0})})})]})},T=function(){let e=(0,r.bq)(),{hasPermission:t}=(0,a.w)(n.o.ENDPOINT_ENDPOINT_CDU);return(0,s.A)(i=>{if(t){if((0,l.HB)())return void(0,l.op)();e.show(k,i)}})}},690391:function(e,t,i){"use strict";i.d(t,{A:()=>r});var a=i(647146),n=i(722238),l=i(140049);let r=function(){let e=(0,n.bq)();return(0,l.A)(t=>{e.show(a.A,null!=t?t:{})})}},637899:function(e,t,i){"use strict";i.d(t,{I:()=>n,n:()=>a});let a=(0,i(325475).vt)((e,t)=>({visible:!1,open:(t,i)=>e({visible:!0,moduleId:t,openAfterCreate:i}),close:()=>e({visible:!1,moduleId:void 0,openAfterCreate:void 0})})),n=a.getState},356928:function(e,t,i){"use strict";i.d(t,{N:()=>p});var a=i(622425),n=i(740565),l=i(793594),r=i(689368),s=i(916858),o=i(722238),d=i(140049),c=i(764007),u=i(641486);function p(){var e;let t,i,p=(0,o.bq)(),{canShare:m,teamId:h}=(t=(0,r.Ay)(e=>e.project.currentProject),i=(0,r.Ay)(e=>e.projectMember.currentProjectMembers),{canShare:(0,u.useMemo)(()=>!t||"private"!==t.visibility||!!(null==t?void 0:t.teamId)&&!!i&&!(i.length<=1)&&i.filter(e=>e.roleType!==s._I.None).length>1,[t,i]),teamId:null!=(e=null==t?void 0:t.teamId)?e:0});return(0,d.A)(e=>{let{onCopy:t}=e;null==t||t(),(0,l.IL)("app_share_dropdown_click_collaboration",{index:"tree"}),m||c.Ay.confirm({title:(0,n.hw)({id:"teamMember.inviteMemberForm.copyLink.title"}),icon:null,content:(0,n.hw)({id:"teamMember.inviteMemberForm.copyLink.intro"}),mask:!1,maskClosable:!0,okText:(0,n.hw)({id:"invite"}),onOk:()=>{p.show(a.A,{teamId:h,autoSelectCurrentProject:!0})}})})}},671345:function(e,t,i){"use strict";i.d(t,{A:()=>n});var a=i(923117);let n=(0,i(618487).dynamic)({loading:a.A,loader:async()=>{let{default:e}=await Promise.all([i.e("720"),i.e("73034"),i.e("48737"),i.e("87053"),i.e("80232"),i.e("33898"),i.e("67007"),i.e("72168"),i.e("59057"),i.e("36943"),i.e("91192"),i.e("48579"),i.e("16336"),i.e("71877"),i.e("51235"),i.e("13996"),i.e("75562"),i.e("37730"),i.e("60293"),i.e("86781"),i.e("39622"),i.e("15505"),i.e("31766"),i.e("21172"),i.e("24879"),i.e("4720"),i.e("26304"),i.e("14701"),i.e("10750"),i.e("37191"),i.e("34687"),i.e("81619")]).then(i.bind(i,660640));return e}})},407153:function(e,t,i){"use strict";i.d(t,{A:()=>o});var a=i(838e3),n=i(740565),l=i(255529),r=i(747120),s=i(543013);let o=function(){let e=l.A.useFormInstance();return(0,a.jsxs)("div",{className:"flex items-center justify-start flex-none",children:[(0,a.jsxs)("label",{className:"mr-1 font-size-sm whitespace-no-wrap",children:[(0,n.hw)({id:"response.label.contentType"}),":"]}),(0,a.jsx)(l.A.Item,{name:"contentType",noStyle:!0,children:(0,a.jsx)(r.q,{onChange:t=>{if(e.setFieldValue("mediaType",""),"eventStream"===t){let t=e.getFieldValue("itemSchema");t&&("object"!=typeof t||0!==Object.keys(t).length)||e.setFieldValue("itemSchema",s.SM)}}})})]})}},172713:function(e,t,i){"use strict";i.d(t,{A:()=>s});var a=i(838e3),n=i(99608),l=i(740565),r=i(255529);let s=function(e){let{disabled:t,autoFocus:i=!1}=e;return(0,a.jsx)(r.A.Item,{name:"name",className:"mb-0 truncate",rules:[{required:!0,message:(0,l.hw)({id:"response.label.name.required"})}],children:(0,a.jsx)(n.t,{bold:!0,autoFocus:!t&&i,autoComplete:"off",disabled:t,placeholder:(0,l.hw)({id:"response.placeholder.name"})})})}},562855:function(e,t,i){"use strict";i.d(t,{A:()=>j});var a=i(838e3),n=i(355469),l=i(335056),r=i(7039),s=i(106149),o=i(506598),d=i(140049),c=i(272164),u=i(255529),p=i(641486),m=i.n(p),h=i(618487),v=i(676951),f=i(413711),g=i(906641),y=i(40886);i(392106);var x=i(811471);let A="label-cxHDR3",j=function(e){var t;let{contentType:i,schemaFieldName:j,form:b,response:w,includeExamples:S=!0,moduleId:C}=e,[I,N]=(0,p.useState)(""),k=(0,l.A)(r.nM.ParameterModification),T=u.A.useFormSelector(e=>e,b),M=(0,d.A)(e=>(0,a.jsx)(y.x,{menus:e})),E=(0,d.A)(e=>(0,a.jsx)(v.A,{children:e})),_=(0,d.A)((e,t,i)=>({name:(0,x.Ez)(e),data:t,responseId:null==w?void 0:w.id,tempId:new Date().getTime(),ordering:i})),{run:F}=(0,c.A)(async(e,t)=>{if(!S)return;let i=b.getFieldValue("responseExamples")||[],{code:a,saveAsExample:n}=t;if(n){let{jsoncUtils:{JSONC:e}}=await o.utilsContainer.items.jsonSerializationUtils,t=e.is(a)?e.toJSON(a):a;if(1===i.length){let[e]=i;b.setFieldValue("responseExamples",[{...e,data:t}])}else{let e=Math.max(...i.map(e=>e.ordering||0))+1,a=_(i,t,e);b.setFieldValue("responseExamples",[...i,a])}}},{wait:100}),[D,R]=(0,p.useState)(h.SaveAsExampleStatus.HIDDEN),O=m().useMemo(()=>{let{jsonSchema:e,itemSchema:t,...i}=T;return{...i,jsonSchema:(0,s.qV)(T)}},[T]);return(0,a.jsx)(f.A,{value:{value:O,onChange:e=>{b.setFieldValue(j,e.jsonSchema)},valueType:i,type:"schema",modalTitle:null!=(t=null==T?void 0:T.name)?t:null==w?void 0:w.name},children:(0,a.jsx)(n.ue,{children:(0,a.jsx)(u.A.Item,{className:"rounded-lg mb-3",name:j,children:(0,a.jsx)(n.Ay,{contentType:"xml"===i?"xml":"json",onChange:F,saveAsExampleStatus:D,onImportJsonModalOpen:()=>{var e;let[t]=null!=(e=b.getFieldValue("responseExamples"))?e:[];R(()=>t?h.SaveAsExampleStatus.UNCHECKED:h.SaveAsExampleStatus.CHECKED),N(()=>null==t?void 0:t.data)},importJsonDefaultValue:I,moduleId:C,generateMenuRender:k?M:void 0,generateButtonRender:k?E:void 0,getGenerateModalTabProps:e=>{let{modalRef:t}=e;return{tabBarExtraContent:(0,a.jsx)(v.A,{children:(0,a.jsx)(g.I,{modalRef:t})})}},sceneId:`responseComponent-${(null==w?void 0:w.id)||(null==w?void 0:w.tempId)}`,extraRightActions:k?{left:[(0,a.jsx)(v.A,{},"ai")]}:void 0,showTopActions:{left:[(0,a.jsx)("div",{className:A,children:"Body"})],right:["preview","code_generate","JSON Schema","import_json"]}})})})})}},112967:function(e,t,i){"use strict";i.d(t,{A:()=>o});var a=i(838e3),n=i(740565),l=i(255529),r=i(641486),s=i(440781);let o=function(e){let{disabled:t}=e,i=l.A.useFormInstance(),o=i.getFieldValue("contentType"),d=i.getFieldValue("code"),c=(0,r.useRef)(o&&"noContent"!==o?o:"json"),u=(0,r.useRef)(d);return(0,a.jsxs)("div",{className:"flex items-center justify-start flex-none",children:[(0,a.jsxs)("label",{className:"mr-1 font-size-sm whitespace-no-wrap",children:[(0,n.hw)({id:"response.label.code"}),":"]}),(0,a.jsx)("div",{style:{paddingLeft:"var(--ui-input-padding-horizontal-sm)",paddingRight:"var(--ui-input-padding-horizontal-sm)"},children:(0,a.jsx)(l.A.Item,{name:"code",noStyle:!0,children:(0,a.jsx)(s.T,{readonly:t,placeholder:(0,n.hw)({id:"response.label.code"}),onChange:e=>{let t=i.getFieldValue("contentType");t&&"noContent"!==t&&(c.current=t);let a="204"===String(u.current),n="204"===String(e);!a&&n?i.setFieldsValue({contentType:"noContent",mediaType:""}):a&&!n&&i.setFieldsValue({contentType:c.current}),u.current=e}})})})]})}},748537:function(e,t,i){"use strict";i.d(t,{D0:()=>r,bw:()=>l,u3:()=>n});var a=i(740565);let n={apikey:"API Key",bearer:"Bearer Token",jwt:"JWT Bearer",basic:"Basic Auth",digest:"Digest Auth",oauth2:"OAuth 2.0",oauth1:"OAuth 1.0",hawk:"Hawk Authentication",awsv4:"AWS Signature",kerberos1:"Kerberos",ntlm:"NTLM Authentication",edgegrid:"Akamai Edgegrid",combination:(0,a.hw)({id:"component.securitySchemeType.combination.name"}),customize:(0,a.hw)({id:"others"})},l=[{name:n.apikey,type:"apikey",icon:"icon-ShieldKeyhole",iconColor:"var(--ui-blue-6)",iconBgColor:"var(--ui-blue-1)"},{name:n.bearer,type:"bearer",icon:"icon-ShieldKeyhole",iconColor:"var(--ui-purple-6)",iconBgColor:"var(--ui-purple-1)"},{name:n.jwt,type:"jwt",icon:"icon-ShieldKeyhole",iconColor:"var(--ui-cyan-6)",iconBgColor:"var(--ui-cyan-1)"},{name:n.basic,type:"basic",icon:"icon-ShieldKeyhole",iconColor:"var(--ui-green-6)",iconBgColor:"var(--ui-green-1)"},{name:n.digest,type:"digest",icon:"icon-ShieldKeyhole",iconColor:"var(--ui-magenta-6)",iconBgColor:"var(--ui-magenta-1)"},{name:n.oauth2,type:"oauth2",icon:"icon-ShieldKeyhole",iconColor:"var(--ui-geekblue-6)",iconBgColor:"var(--ui-geekblue-1)"},{name:n.oauth1,type:"oauth1",icon:"icon-ShieldKeyhole",iconColor:"var(--ui-geekblue-6)",iconBgColor:"var(--ui-geekblue-1)"},{name:n.hawk,type:"hawk",icon:"icon-ShieldKeyhole",iconColor:"var(--ui-orange-6)",iconBgColor:"var(--ui-orange-1)"},{name:n.awsv4,type:"awsv4",icon:"icon-ShieldKeyhole",iconColor:"var(--ui-yellow-6)",iconBgColor:"var(--ui-yellow-1)"},{name:n.kerberos1,type:"kerberos1",icon:"icon-ShieldKeyhole",iconColor:"var(--ui-red-5)",iconBgColor:"var(--ui-red-1)"},{name:n.ntlm,type:"ntlm",icon:"icon-ShieldKeyhole",iconColor:"var(--ui-lime-6)",iconBgColor:"var(--ui-lime-1)"},{name:n.edgegrid,type:"edgegrid",icon:"icon-ShieldKeyhole",iconColor:"var(--ui-blue-6)",iconBgColor:"var(--ui-blue-1)"}],r=[{name:n.combination,type:"combination",icon:"icon-ShieldKeyholeGroup",iconColor:"var(--ui-cyan-6)",iconBgColor:"var(--ui-cyan-1)",desc:(0,a.hw)({id:"component.securitySchemeType.combination.desc"}),hideInSelect:!0},{name:n.customize,type:"customize",icon:"icon-ShieldKeyholeCode",iconColor:"var(--ui-blue-6)",iconBgColor:"var(--ui-blue-1)",desc:(0,a.hw)({id:"component.securitySchemeType.customize.desc"})}]},207202:function(e,t,i){"use strict";i.d(t,{A:()=>n});var a=i(923117);let n=(0,i(618487).dynamic)({loading:a.A,loader:async()=>{let{default:e}=await i.e("86198").then(i.bind(i,333166));return e}})},559490:function(e,t,i){"use strict";i.d(t,{A:()=>n});var a=i(923117);let n=(0,i(618487).dynamic)({loading:a.A,loader:async()=>{let{default:e}=await Promise.all([i.e("720"),i.e("73034"),i.e("4276"),i.e("48737"),i.e("87053"),i.e("80232"),i.e("33898"),i.e("67007"),i.e("72168"),i.e("90348"),i.e("47094"),i.e("75931"),i.e("34351"),i.e("38390"),i.e("59057"),i.e("53281"),i.e("36943"),i.e("21583"),i.e("91192"),i.e("18261"),i.e("12175"),i.e("52101"),i.e("48579"),i.e("8704"),i.e("16336"),i.e("71877"),i.e("51235"),i.e("13996"),i.e("75562"),i.e("37730"),i.e("73956"),i.e("8769"),i.e("60293"),i.e("67282"),i.e("86781"),i.e("39622"),i.e("15505"),i.e("31766"),i.e("21172"),i.e("24879"),i.e("4720"),i.e("2527"),i.e("26304"),i.e("59065"),i.e("33987"),i.e("8147"),i.e("25082"),i.e("38929"),i.e("14701"),i.e("10750"),i.e("60070"),i.e("97856"),i.e("73132"),i.e("79800"),i.e("44792"),i.e("33689"),i.e("90812"),i.e("99857"),i.e("14937"),i.e("42043"),i.e("80331"),i.e("59063")]).then(i.bind(i,674248));return e}})},117583:function(e,t,i){"use strict";i.d(t,{B:()=>s,u:()=>o});var a=i(600557),n=i(689368),l=i(641486),r=i.n(l);function s(){let e=(0,n.Ay)(e=>{var t,i,n,l;return null!=(l=null==(n=e.projectSetting.projectSettingData)||null==(i=n.advancedSettings)||null==(t=i.preferredHttpVersion)?void 0:t.https)?l:a.Ez.https}),t=(0,n.Ay)(e=>{var t,i,n,l;return null!=(l=null==(n=e.projectSetting.projectSettingData)||null==(i=n.advancedSettings)||null==(t=i.preferredHttpVersion)?void 0:t.http)?l:a.Ez.http}),i=(0,n.Ay)(e=>{var t,i;return null==(i=e.projectSetting.projectSettingData)||null==(t=i.advancedSettings)?void 0:t.request2});return r().useMemo(()=>({request2:i,preferredHttpVersion:{http:t,https:e}}),[i,t,e])}function o(e){var t,i,n,l,r,s,o;let d=null!=(s=null==e||null==(i=e.advancedSettings)||null==(t=i.preferredHttpVersion)?void 0:t.https)?s:a.Ez.https,c=null!=(o=null==e||null==(l=e.advancedSettings)||null==(n=l.preferredHttpVersion)?void 0:n.http)?o:a.Ez.http;return{request2:null==e||null==(r=e.advancedSettings)?void 0:r.request2,preferredHttpVersion:{http:c,https:d}}}},223233:function(e,t,i){"use strict";i.d(t,{$F:()=>o,ZE:()=>r,fF:()=>d,yz:()=>s});var a=i(689368),n=i(641486),l=i.n(n);function r(){let e=(0,a.Ay)(e=>{var t,i,a;return null==(a=null==(i=e.projectSetting.projectSettingData)||null==(t=i.advancedSettings)?void 0:t.validateHttpStatusCode)||a}),t=(0,a.Ay)(e=>{var t,i,a;return null==(a=null==(i=e.projectSetting.projectSettingData)||null==(t=i.advancedSettings)?void 0:t.validateBodyDataStructure)||a}),i=(0,a.Ay)(e=>{var t,i,a;return null==(a=null==(i=e.projectSetting.projectSettingData)||null==(t=i.advancedSettings)?void 0:t.validateObjectAllowAdditionalProperties)||a});return l().useMemo(()=>({responseDefinition:{validateHttpStatusCode:e,validateBodyDataStructure:t,validateObjectAllowAdditionalProperties:i}}),[e,t,i])}function s(e){var t,i,a,n,l,r;let s=null==(n=null==e||null==(t=e.advancedSettings)?void 0:t.validateHttpStatusCode)||n,o=null==(l=null==e||null==(i=e.advancedSettings)?void 0:i.validateBodyDataStructure)||l;return{responseDefinition:{validateHttpStatusCode:s,validateBodyDataStructure:o,validateObjectAllowAdditionalProperties:null==(r=null==e||null==(a=e.advancedSettings)?void 0:a.validateObjectAllowAdditionalProperties)||r}}}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ApiManage",t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=!(arguments.length>2)||void 0===arguments[2]||arguments[2],a=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return"ApiTest"===e?i:"ApiManageTestCase"===e?a:t}function d(){var e,t,i;let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ApiManage",n=arguments.length>1?arguments[1]:void 0;return!o(a,null==n||null==(e=n.advancedSettings)?void 0:e.responseValidate,null==n||null==(t=n.advancedSettings)?void 0:t.responseValidateApiTest,null==n||null==(i=n.advancedSettings)?void 0:i.responseValidateTestCase)}},91455:function(e,t,i){"use strict";i.d(t,{A:()=>l});var a=i(923117);let n=(0,i(618487).dynamic)({loading:a.A,loader:async()=>{let{default:e}=await Promise.all([i.e("720"),i.e("73034"),i.e("4276"),i.e("48737"),i.e("87053"),i.e("80232"),i.e("33898"),i.e("67007"),i.e("72168"),i.e("90348"),i.e("47094"),i.e("75931"),i.e("34351"),i.e("38390"),i.e("59057"),i.e("53281"),i.e("36943"),i.e("21583"),i.e("91192"),i.e("18261"),i.e("44661"),i.e("73486"),i.e("48579"),i.e("8704"),i.e("16336"),i.e("71877"),i.e("51235"),i.e("13996"),i.e("75562"),i.e("37730"),i.e("73956"),i.e("8769"),i.e("60293"),i.e("67282"),i.e("86781"),i.e("39622"),i.e("15505"),i.e("31766"),i.e("21172"),i.e("24879"),i.e("4720"),i.e("2527"),i.e("26304"),i.e("59065"),i.e("33987"),i.e("8147"),i.e("25082"),i.e("38929"),i.e("14701"),i.e("10750"),i.e("60070"),i.e("97856"),i.e("73132"),i.e("79800"),i.e("44792"),i.e("33689"),i.e("90812"),i.e("37191"),i.e("99857"),i.e("14937"),i.e("13397"),i.e("42043"),i.e("70139"),i.e("2263"),i.e("82275")]).then(i.bind(i,625783));return e}});n.displayName="AsyncAiGenerateEndpointTestCase";let l=n},865458:function(e,t,i){"use strict";i.d(t,{A:()=>d});var a=i(838e3),n=i(740565),l=i(842765),r=i(554692),s=i(963227),o=i(641486);let d=function(e){if(!e)return(0,a.jsx)("span",{children:"-"});let t=Array.isArray(e)?e:[e];return(null==t?void 0:t.length)>0?t.length>2?(0,a.jsx)(c,{tags:t}):(0,a.jsx)("div",{className:"w-full flex item-center justify-start overflow-auto",style:{flexWrap:"nowrap"},children:t.map(e=>(0,a.jsx)(u,{tag:e},e))}):(0,a.jsx)("span",{children:"-"})};function c(e){let{tags:t}=e,{previewTags:i,tooltipForOmitTags:l,omitCount:d}=(0,o.useMemo)(()=>({previewTags:[...t.slice(0,2)],omitCount:t.length-2,tooltipForOmitTags:t.slice(2).join((0,n.hw)({id:"enumeratedValueSplit"}))}),[t]);return(0,a.jsxs)("div",{className:"w-full flex item-center justify-start overflow-hidden",style:{flexWrap:"nowrap"},children:[i.map(e=>(0,a.jsx)(u,{tag:e},e)),(0,a.jsx)(r.A,{title:l,children:(0,a.jsx)(s.A,{size:"sm",style:{border:"1px solid var(--ui-border-color-split)",lineHeight:"22px"},children:`+${d}`})})]})}function u(e){let{tag:t}=e;return(0,a.jsx)(s.A,{size:"sm",style:{border:"1px solid var(--ui-border-color-split)"},children:(0,a.jsx)(l.A,{style:{maxWidth:62,lineHeight:"22px"},title:t,children:t})},t)}},19275:function(e,t,i){"use strict";i.d(t,{Xi:()=>D,me:()=>R,Np:()=>P,Av:()=>O,WG:()=>F});var a,n=i(838e3),l=i(842765),r=i(140049),s=i(838487),o=i.n(s),d=i(671466),c=i(641486),u=i(344580);let p="detailLink-o5Htff";function m(e){let{value:t,record:i}=e,{openHttpApi:a,openWebSocketApi:s,pinCurrentFolderTab:m,openCustomEndpointTab:h,openSocketIOApi:v,openMcpClient:f}=(0,c.useContext)(u.T),g=(0,r.A)(()=>{switch(m(),i.type){case"apiDetail":a(i);break;case"SOCKET_IO_API":v(i);break;case"MCP_CLIENT":f(i);break;case"CUSTOM_ENDPOINT":h(i);break;case"webSocketApi":s(i)}});return(0,n.jsxs)("div",{className:o()("cursor-pointer flex items-center justify-start",p),onClick:g,children:[(0,n.jsx)(l.A,{children:t}),(0,n.jsx)(d.A,{type:"icon-link-external",className:"ml-1",style:{marginTop:2},size:12})]})}let h=(e,t)=>(0,n.jsx)(m,{value:e,record:t});var v=i(483482),f=i(553047),g=i(372178),y=i(86456),x=i(471504),A=i(740565),j=i(269966),b=i(808306),w=i(865458);let S=function(e){return(0,n.jsx)(l.A,{className:"w-full",children:e||"-"})};var C=i(351885),I=i(759300),N=i.n(I),k=i(554692);let T=function(e){return(0,n.jsx)(k.A,{title:!!e&&(0,C.QP)(e),children:(0,n.jsx)(l.A,{title:(0,C.QP)(e),children:e?N()(e).format("YYYY-MM-DD"):"-"})})};var M=i(184406);function E(e){let{value:t}=e,i=(0,c.useMemo)(()=>t?Array.isArray(t)?t:[t]:[],[t]);return 0===i.length?(0,n.jsx)("span",{children:"-"}):(0,n.jsx)("div",{className:"w-full flex items-center justify-start flex-wrap overflow-auto",children:i.map(e=>(0,n.jsx)("div",{className:"m-1",children:(0,n.jsx)(M.A,{id:e})},e))})}let _=e=>(0,n.jsx)(E,{value:e}),F={name:h,method:function(e,t){return"webSocket"===e?(0,n.jsx)(d.A,{type:"icon-websocket",size:16,color:"var(--ui-orange-6)"}):(null==t?void 0:t.type)==="CUSTOM_ENDPOINT"?(0,n.jsx)(f.w,{protocol:e}):(null==t?void 0:t.type)==="SOCKET_IO_API"?(0,n.jsx)(g.A,{}):(null==t?void 0:t.type)==="MCP_CLIENT"?(0,n.jsx)(y.A,{}):(0,n.jsx)(x.mn,{method:e,apiType:null==t?void 0:t.apiType})},path:h,group:S,status:function(e){let{value:t,color:i,labelLocale:a}=j.zj[e];return(0,n.jsx)(b.A,{color:i,status:t===j.pQ.released?"processing":"default",text:(0,n.jsx)(A.sA,{id:a})})},tags:w.A,createdAt:T,updatedAt:T,editorId:_,creatorId:_,responsibleId:_},D={text:S,number:S,select:w.A,multiSelect:w.A,selectTag:w.A,multiSelectTag:w.A,date:T,person:_,link:function(e){return e?(0,n.jsx)(l.A,{children:(0,n.jsx)("a",{title:e,className:"block text-ellipsis",onClick:()=>(0,v.kK)(e),children:e})}):(0,n.jsx)("span",{children:"-"})},email:function(e){return e?(0,n.jsx)(l.A,{children:(0,n.jsx)("a",{title:e,className:"block text-ellipsis",onClick:()=>(0,v.kK)(`mailto:${e}`),children:e})}):(0,n.jsx)("span",{children:"-"})}},R={name:200,method:104,path:160,group:160,status:135,tags:260,createdAt:160,updatedAt:160,editorId:160,creatorId:160,responsibleId:160},O="CUSTOMIZED_FIELD_";var P=((a={}).DELETE="DELETE",a.ADD_TAGS="ADD_TAGS",a.DELETE_TAGS="DELETE_TAGS",a.UPDATE_STATUS="UPDATE_STATUS",a.CHANGE_MAINTAINER="CHANGE_MAINTAINER",a.CHANGE_FOLDER="CHANGE_FOLDER",a.ADD_RESPONSE_COMPONENTS="ADD_RESPONSE_COMPONENTS",a.ADD_RESPONSE_COMPONENTS_TO_ALL="ADD_RESPONSE_COMPONENTS_TO_ALL",a.DELETE_RESPONSE_COMPONENTS="DELETE_RESPONSE_COMPONENTS",a.DELETE_RESPONSE_COMPONENTS_FROM_ALL="DELETE_RESPONSE_COMPONENTS_FROM_ALL",a)},344580:function(e,t,i){"use strict";i.d(t,{T:()=>n});var a=i(641486);let n=i.n(a)().createContext({})},567777:function(e,t,i){"use strict";i.d(t,{A:()=>P});var a=i(838e3),n=i(740565),l=i(405114),r=i(689368),s=i(759345),o=i(140049),d=i(794397),c=i(978052),u=i(641486),p=i(417162),m=i(618487),h=i(184406),v=i(866146),f=i(838487),g=i.n(f),y=i(759300),x=i.n(y),A=i(225622),j=i(554692),b=i(458184),w=i(671466),S=i(926669);let C="historyGroup-UyAOzf",I="compareBtn-qyn3yb",N="updateTime-HkGkEG",k="switcherIcon-Dde5If",T="compareIcon-gkrjM2",M="cursorNotAllowed-hdF6Pv";function E(e){return x()(e||void 0).format("YYYY-MM-DD")}function _(e){let t=E(e.createdAt);return`${t}-${e.creatorId}-${e.id}`}let F=e=>{var t,i;let[l,s]=(0,v.A)(e.historyGroup.reduce((e,t)=>{if(!t.length)return e;let[i]=t;return e.push(_(i)),e},[])),d=(0,u.useRef)(null!=(i=null==(t=e.historyGroup[e.historyGroup.length-1])?void 0:t.length)?i:0);(0,u.useEffect)(()=>{var t,i;let a=null!=(i=null==(t=e.historyGroup[e.historyGroup.length-1])?void 0:t.length)?i:0;d.current!==a&&s(t=>{var i;let a=null==(i=e.historyGroup[e.historyGroup.length-1])?void 0:i[0];if(!a)return t;let n=_(a);return t.includes(n)?t:t.concat(n)}),d.current=a},[e.historyGroup]);let c=(0,r.Ay)(e=>{let{user:t}=e;return t.currentUser}),p=E(),m=e.historyGroup.reduce((e,t)=>{var i;if(!t.length)return e;let[a,...n]=t,l=E(a.createdAt);return e.push({key:_(a),title:null!=(i=a.description)?i:"",data:a,level:0,selectable:!1,children:n.map(e=>{var t;return{key:`${l}-${a.creatorId}-${e.id}`,title:null!=(t=e.description)?t:"",data:e,level:1,selectable:!1,children:[]}})}),e},[]),f=(0,o.A)(t=>{var i;if(!e.isLastGroup)return!1;let a=m[m.length-1];if(0===t.level){let e=t.key===(null==a?void 0:a.key),i=!l.includes(t.key),n=!t.children.length;return e&&(i||n)}let n=null==a||null==(i=a.children)?void 0:i[a.children.length-1];return t.key===(null==n?void 0:n.key)});return(0,a.jsxs)("div",{className:g()("py-3","relative",C),children:[(0,a.jsx)("div",{className:"app-text-fg-low mb-1 capitalize",children:e.date===p?(0,n.hw)({id:"today"}):e.date}),(0,a.jsx)(A.A,{expandedKeys:l,blockNode:!0,showIcon:!1,switcherIcon:(0,a.jsx)(w.A,{type:"icon-nav-keyboard-arrow-down",size:18,className:k}),treeData:m,onExpand:e=>s(e),titleRender:t=>{let i=t.data,r=f(t),s=l.includes(t.key),o=!!t.children.length,{creatorId:d}=t.data,u=o&&!s,p=t.data.action;return(0,a.jsxs)("div",{className:g()("flex h-10 items-center",{[M]:r}),onClick:()=>{var t;r||null==(t=e.onItemClick)||t.call(e,i,u)},children:[(0,a.jsx)(h.A,{id:d,mode:"EXTENSIVE",render:e=>{var i,l;let s=null!=(l=null!=(i=null==e?void 0:e.nickname)?i:null==e?void 0:e.name)?l:null==e?void 0:e.username;return e||(s=`${(0,n.hw)({id:"team.member.alreadyLeaf"})} (${d})`),(0,a.jsxs)("div",{className:g()("flex-1 truncate app-text-fg-medium",{invisible:1===t.level,"app-text-fg-disabled":r}),title:`@${s}`,children:[s," ",t.data.creatorId==c.id&&(0,n.hw)({id:"version.history.changeByYourself"})]})}}),(0,a.jsx)(S.A,{action:p,mergeFromBranchId:t.data.mergeFromBranchId}),(0,a.jsx)("div",{className:g()(N,{"app-text-fg-disabled":r}),children:x()(i.createdAt).format("HH:mm:ss")}),!r&&(0,a.jsx)(j.A,{placement:"top",mouseEnterDelay:.3,trigger:r?"":"hover",title:(0,n.hw)({id:"version.history.item.tooltip"}),children:(0,a.jsx)(b.A,{type:"text",className:g()("ml-2",I),icon:(0,a.jsx)(w.A,{type:"icon-compared",className:T})})})]})}})]})},D="loadMore-c1eYWd",R="loading-aHp5AB",O=function(e){return(0,a.jsx)("div",{className:g()("w-100 mb-5 cursor-pointer",D,{"animation-line-of-dots":e.isLoadingMore,[R]:e.isLoadingMore}),onClick:e.onClick,children:!e.isLoadingMore&&(0,n.hw)({id:"loadMore"})})},P=function(e){let{showHistories:t,setHistoryStore:i,hide:h}=(0,m.useModel)(e.comparisonModel),{isLoading:v=!1,isLoadingMore:f=!1,groupedHistories:g={},histories:y=[],pageNum:x=0,total:A=0,pageSize:j=0}=(0,r.Ay)(e.dataSelector),b=(0,u.useRef)(`data-histories-${Math.random().toString(36).slice(2)}`),{currentProject:w}=(0,r.Ay)(e=>{let{project:t}=e;return{currentProject:t.currentProject}});(0,u.useEffect)(()=>{if(e.sidebarVisible){var t;e.queryHistories({projectId:null!=(t=null==w?void 0:w.id)?t:0,dataId:e.currentData.id})}},[e.sidebarVisible,null==w?void 0:w.id]),(0,s.A)(()=>{e.resetHistories(e.currentData.id)});let S=A>y.length,C=(0,o.A)(async()=>{if(S){var t;e.queryHistories({projectId:null!=(t=null==w?void 0:w.id)?t:0,dataId:e.currentData.id,page:x+1,pageSize:j},e=>{(null==e?void 0:e.length)&&i(t=>{if(!t)return null;let i=[...t.histories,...null!=e?e:[]];return{...t,histories:i,loadMoreHistories:A>i.length?C:null}})})}else i(e=>e?{...e,loadMoreHistories:null}:null)});return v?(0,a.jsx)(d.A,{className:"w-full mt-64"}):y.length?(0,a.jsxs)("div",{id:b.current,className:"h-full overflow-auto px-3 w-full",children:[(0,a.jsx)(p.A,{dataLength:y.length,next:()=>{var t;e.queryHistories({projectId:null!=(t=null==w?void 0:w.id)?t:0,dataId:e.currentData.id,page:x+1,pageSize:j})},hasMore:A>y.length,loader:null,scrollableTarget:b.current,children:Object.keys(g).map((i,n)=>{let r=g[i];return(0,a.jsx)(F,{date:i,historyGroup:r,currentData:e.currentData,isLastGroup:n>=Object.keys(g).length-1,onItemClick:(i,a)=>{let n=function(e,t){let i=null;for(let a=0;a<t.length;a++){let n=t[a],l=!1;for(let t=0;t<n.length;t++)if(n[t].id===e){l=!0;break}if(l){i=n[n.length-1];break}}return i}(i.id,r),s=a&&n?n.id:i.id,o=s===l.cJ?y[0]:function(e,t){for(let i=0;i<t.length-1;i++)if(t[i].id===e)return t[i+1];return null}(s,y);o&&t({historyStore:{currentVersion:e.currentData,histories:y,loadMoreHistories:S?C:null},onRevert:async t=>{var i;await (null==(i=e.onRevert)?void 0:i.call(e,t)),h()},dataId:e.currentData.id,original:o.id,modified:i.id===l.cJ?e.currentData:i.id})}},i)})}),S&&(0,a.jsx)(O,{isLoadingMore:f,onClick:C})]}):(0,a.jsx)("div",{className:"h-full flex justify-center items-center",children:(0,a.jsx)(c.A,{className:"app-text-fg-low",image:c.A.PRESENTED_IMAGE_SIMPLE,imageStyle:{height:48},description:(0,n.hw)({id:"version.history.empty"})})})}},987295:function(e,t,i){"use strict";i.d(t,{A:()=>A});var a=i(775803),n=i(253041),l=i(957705),r=i(496411),s=i(483482),o=i(689368),d=i(718180),c=i(140049),u=i(641486),p=i(137361);i(559708);var m=i(373365),h=i(81319),v=i(2183);let f=e=>{if(!(0,v.IF)())return{folder:(0,o.DA)(t=>t.apiDetailFolder.apiDetailFolderMap[e]),existedInCurrentBranch:!0};let{branchHttpFolderMap:t,baseHttpFolderMap:i}=(0,h.Ky)();return t[e]?{folder:t[e],existedInCurrentBranch:!0}:{folder:i[e],existedInCurrentBranch:!1}};var g=i(740565),y=i(764007);let x=()=>y.Ay.warning({title:(0,g.hw)({id:"doc.referenceResource.notExisted"})});function A(){let{openHttpApi:e,openWebSocketApi:t,openSocketIOApi:i,openDoc:g,openRpcMethod:y,openHttpFolder:A,openCustomEndpointTab:j}=(0,u.useContext)(p.i),{menu:b,setMenuByPathname:w}=(0,u.useContext)(a.Ay),S=(0,l.Ay)(e=>e.docs),{openMainBranchHttpApi:C,openMainBranchApiFolder:I,openMainBranchDoc:N,openMainBranchWebSocketApi:k,openMainBranchSocketIOApi:T,openMainBranchCustomEndpoint:M}=(0,n.A)();(0,d.A)(()=>{S||(0,l.dq)()});let E=(0,c.A)(a=>{if(!(0,m.Nm)(a))return!1;let{webSocketApiMap:n,rpcMethodMap:s,socketIOApiMap:d}=(0,o.DA)(e=>({webSocketApiMap:e.webSocketApiDetail.apiDetailMap,socketIOApiMap:e.socketIOApi.map,rpcMethodMap:e.rpcMethodDetail.apiDetailMap}));"/api-manage/"!==b.path&&(null==w||w("/api-manage/"));let{itemType:c,itemId:u}=(0,m.Z4)(a);switch(c){case m.EN.apiDetail:case m.PJ.apiDetail:{let{httpApi:t,existedInCurrentBranch:i}=(e=>{if(!(0,v.IF)())return{httpApi:(0,o.DA)(t=>{var i;return null==(i=t.apiDetail.apiDetailMap)?void 0:i[e]}),existedInCurrentBranch:!0};let{branchHttpApiMap:t,baseHttpApiMap:i}=(0,h.Ky)();return t[e]?{httpApi:t[e],existedInCurrentBranch:!0}:{httpApi:i[e],existedInCurrentBranch:!1}})(+u);if(t){let a=()=>e({id:t.id,method:t.method,name:t.name,pinned:!0,showTabType:"view"});i?a():C({httpApi:t,onOk:a})}else x()}break;case m.EN.CUSTOM_ENDPOINT:{let{customEndpoint:e,existedInCurrentBranch:t}=(e=>{if(!(0,v.IF)())return{customEndpoint:(0,o.DA)(t=>{var i;return null==(i=t.customEndpoint.map)?void 0:i[e]}),existedInCurrentBranch:!0};let{branchCustomEndpointMap:t,baseCustomEndpointMap:i}=(0,h.Ky)();return t[e]?{customEndpoint:t[e],existedInCurrentBranch:!0}:{customEndpoint:i[e],existedInCurrentBranch:!1}})(+u);if(e){let i=()=>j({id:e.id},!0);t?i():M({id:e.id,customEndpoint:e,onOk:i})}else x()}break;case m.EN.webSocketApi:{let e=null==n?void 0:n[+u];if(e){let i=()=>t({id:e.id,name:e.name,pinned:!0,showTabType:"view"});(0,r.SA)()?i():k({webSocketApi:e,onOk:i})}else x()}break;case m.EN.SOCKET_IO_API:{let e=null==d?void 0:d[+u];if(e){let t=()=>i({id:e.id,name:e.name},!0);(0,r.SA)()?t():T({socketIOApi:e,onOk:t})}else x()}break;case m.EN.rpcMethod:{let e=null==s?void 0:s[+u];e?y({id:e.id,name:e.name,pinned:!0,showTabType:"view",kind:e.kind}):x()}break;case m.EN.doc:{var p;let e,{doc:t,existedInCurrentBranch:i}=(p=+u,e=(0,l.eq)().docMap[p],!(0,v.IF)()||e?{doc:e,existedInCurrentBranch:!0}:{doc:(0,h.Ky)().baseDocMap[p],existedInCurrentBranch:!1});if(t){if("folder"===t.type){let{folder:e,existedInCurrentBranch:a}=f(t.folderId);if(e){let t=()=>A({id:e.id,name:e.name,moduleId:e.moduleId,pinned:!0,showFolderTabType:"Doc"});if(!a&&i){x();break}a&&i?t():I({apiFolder:e,onOk:t})}else x();break}let e=()=>g({id:t.id,name:t.name,pinned:!0,folderId:t.folderId,moduleId:t.moduleId});i?e():N({doc:t,onOk:e})}else x()}break;case m.EN.apiDetailFolder:{let{folder:e,existedInCurrentBranch:t}=f(+u);if(e){let i=()=>{A({id:e.id,name:e.name,moduleId:e.moduleId,pinned:!0})};t?i():I({apiFolder:e,onOk:i})}else x()}}return!0}),_=(0,c.A)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E;return t=>{(null==e?void 0:e(t))||t.startsWith("//")||(t.startsWith("/")||t.startsWith("http://")||t.startsWith("https://"))&&(0,s.kK)(t)}});return{renderExternalLink:m.of,handleOnExternalClick:_,shouldPreventLinkDefault:E}}},364382:function(e,t,i){"use strict";i.d(t,{R:()=>C});var a=i(838e3),n=i(184406),l=i(740565),r=i(954939),s=i(666120),o=i.n(s),d=i(838487),c=i.n(d),u=i(963227),p=i(524381),m=i(364099),h=i(554692),v=i(398380),f=i(641486),g=i(618487),y=i(279142),x=i(159347);let A="table-qoowP8",j="item-kp9Xha",b="label-EQyHYA",w="value-PzpEnz",S="overlay-vBxvFC";function C(e){let{data:t}=e,i=(0,g.useModel)("projectCustomApiField",e=>e.data),s=null==t?void 0:t.oasExtensions,d=null==t?void 0:t.customApiFields,c=(0,f.useMemo)(()=>{let e={},c=[];i.length>0&&i.forEach(i=>{if(e[i.id]=i,i.openApiField===r.HI.SourceUrl){let{id:e,openApiField:a,fieldName:n,fieldType:r,enable:s,ordering:o}=i;c.push({id:Number(e),openApiField:a,fieldName:(0,l.hw)({id:n}),fieldType:r,enable:s,ordering:o,value:(null==t?void 0:t.sourceUrl)||""})}if(i.openApiField===r.HI.OperationId){let{id:e,openApiField:a,fieldName:n,fieldType:l,enable:r,ordering:s}=i;c.push({id:Number(e),openApiField:a,fieldName:n,fieldType:l,enable:r,ordering:s,value:(null==t?void 0:t.operationId)||""})}});let p=new Set;if(d){let t=d||{},i=Object.keys(t);i.length>0&&i.forEach(i=>{if(e[i]){let a,{fieldName:n,openApiField:l,fieldType:s,enable:o,ordering:d}=e[i];l&&p.add(l),a=s===r.sS.Date?(0,y.YN[s])(t[i],!0,"YYYY/MM/DD"):(0,y.YN[s])(t[i]),c.push({id:Number(i),openApiField:l,fieldName:n,fieldType:s,enable:o,value:a,ordering:d})}})}let m=c.sort((e,t)=>e.ordering-t.ordering).map(e=>({label:e.fieldName,node:function(e){if(!e.enable||!(null==e?void 0:e.value))return null;let t=null;switch(e.fieldType){case r.sS.Person:{let i=e.value;t=(0,a.jsx)(n.A,{id:i});break}case r.sS.Link:t=(0,a.jsx)("a",{onClick:t=>(0,x.Mw)(t,e.value),children:e.value});break;case r.sS.SelectTag:{let i=typeof e.value;("string"===i||"number"===i)&&(t=(0,a.jsx)(u.A,{type:"soft",compact:!0,children:(0,a.jsx)("span",{className:w,title:e.value,children:e.value})}));break}case r.sS.MultiSelect:case r.sS.MultiSelectTag:try{let i=[];if(!Array.isArray(e.value)||!(e.value.length>0))return null;t=(i=e.value).map(e=>"string"==typeof e?(0,a.jsx)(u.A,{type:"soft",compact:!0,children:(0,a.jsx)("span",{className:w,title:e,children:e})},e):null)}catch(e){return null}break;default:{let i=typeof e.value;("string"===i||"number"===i)&&(t=(0,a.jsx)("span",{className:w,title:e.value,children:e.value}))}}return t||null}(e)}));if(s)try{let e=o().parse(s);for(let t in e)p.has(t)||m.push({label:t,node:(0,a.jsx)(N,{label:t,value:e[t]})})}catch{}return m.filter(e=>{let{node:t}=e;return null!==t})},[d,s,null==t?void 0:t.operationId,null==t?void 0:t.sourceUrl,i]);return(0,v.isEmpty)(c)?null:c.length<=2?(0,a.jsx)(p.A,{direction:"vertical",size:8,className:"w-full",children:c.map((e,t)=>{let{label:i,node:n}=e;return(0,a.jsxs)(m.A,{className:"leading-5 select-text ",style:{fontWeight:400},children:[(0,a.jsxs)("div",{className:"app-text-fg-low",children:[i,"\xa0\xa0"]}),(0,a.jsx)("div",{className:"break-all w-3/5 app-text-fg-medium",children:n})]},t)})}):(0,a.jsx)(I,{columnCount:2,nodes:c})}function I(e){let{nodes:t,columnCount:i}=e,n=(0,f.useMemo)(()=>{let e=[],n=i-1,l=Math.ceil(t.length/i)*i-i;for(let r=0;r<t.length;r+=i)for(let s=0;s<i;s++){let i=r+s,{label:o,node:d}=t[i]||{label:"",node:(0,a.jsx)(a.Fragment,{})},u=0===r,p=r===l,m=0===s,h=s===n;e.push((0,a.jsx)("div",{className:c()(b,j,{topLeft:u&&m,bottomLeft:p&&m,bottom:p}),children:o},`label${i}`),(0,a.jsx)("div",{className:c()(j,{right:h,topRight:u&&h,bottomRight:p&&h,bottom:p}),children:d},`node${i}`))}return e},[t]);return(0,a.jsx)("div",{className:c()(A,"grid"),style:{gridTemplateColumns:`repeat(${2*i}, minmax(0, 1fr))`},children:n})}function N(e){let{label:t,value:i}=e,n=(0,f.useMemo)(()=>{if((0,v.isObject)(i))try{return o().stringify(i,null,4)}catch(e){return console.log("format value by JSON error",e),""}try{return String(i)}catch(e){return console.log("format value by String error",e),""}},[i]),l=(0,f.useMemo)(()=>(0,v.isObject)(i)?`"${t}": ${n}`:n.length>100?n:void 0,[t,i,n]);return(0,a.jsx)(h.A,{title:l,className:w,overlayClassName:S,children:n})}},52940:function(e,t,i){"use strict";i.d(t,{R9:()=>M,Ay:()=>F,ig:()=>k});var a=i(838e3),n=i(641486),l=i.n(n);let r=e=>(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",...e,children:[(0,a.jsx)("path",{fill:"currentColor",d:"M6.346 6.486a5.067 5.067 0 0 1 7.169 0 5.076 5.076 0 0 1 0 7.175l-1.43 1.431a1 1 0 0 0 1.414 1.414l1.43-1.431a7.076 7.076 0 0 0 0-10.003 7.067 7.067 0 0 0-9.997 0L2.07 7.935a7.076 7.076 0 0 0 4.606 12.064 1 1 0 0 0 .111-1.997 5.076 5.076 0 0 1-3.302-8.653z"}),(0,a.jsx)("path",{fill:"currentColor",d:"M17.324 4.002a1 1 0 1 0-.111 1.996 5.076 5.076 0 0 1 3.302 8.653l-2.861 2.863a5.067 5.067 0 0 1-7.169 0 5.076 5.076 0 0 1 0-7.175l1.43-1.431a1 1 0 1 0-1.414-1.414L9.07 8.925a7.076 7.076 0 0 0 0 10.003 7.067 7.067 0 0 0 9.998 0l2.86-2.863a7.076 7.076 0 0 0-4.605-12.063"})]});var s=i(740565),o=i(957705),d=i(730362),c=i(755694),u=i(167223),p=i(187633),m=i(5233),h=i(793594),v=i(689368),f=i(667754),g=i(967860),y=i(140049),x=i(838487),A=i.n(x),j=i(138249),b=i(554692),w=i(671466),S=i(618487);let C={select:"select-jdMkJn",select__without_dropdown_icon:"select__without_dropdown_icon-IZDyfw",selectWithoutDropdownIcon:"select__without_dropdown_icon-IZDyfw",select__with_border_right:"select__with_border_right-Iyx8oz",selectWithBorderRight:"select__with_border_right-Iyx8oz",select__is_label_icon_without_text:"select__is_label_icon_without_text-kWMhBq",selectIsLabelIconWithoutText:"select__is_label_icon_without_text-kWMhBq",popup:"popup-mAkk4u",popup__visibility__icon_square:"popup__visibility__icon_square-dFaOlW",popupVisibilityIconSquare:"popup__visibility__icon_square-dFaOlW",popup__visibility__icon_inherit:"popup__visibility__icon_inherit-gFLmlO",popupVisibilityIconInherit:"popup__visibility__icon_inherit-gFLmlO"},{Option:I,OptGroup:N}=j.A,k=(e,t)=>e||t?"INTERNAL"===e||"INTERNAL"===t?"INTERNAL":"SHARED":"SHARED",T=e=>{var t;return null!=(t=({API_FOLDER:"folder",DATA_SCHEMA_FOLDER:"folder",DATA_SCHEMA:"schema",HTTP_API:"endpoint",HTTP_API_CASE:"endpoint_case",DOC:"markdown"})[e])?t:"unknown"},M=e=>{let t=e.entityType,i=["DATA_SCHEMA","DATA_SCHEMA_FOLDER"].includes(t);return"HTTP_API_CASE"===t?function(e){let{parentId:t,endpointMap:i}=e,a=null==i?void 0:i[t];return a&&"INTERNAL"===a.visibility?a.visibility:E(e)}(e):i?function(e){return _(e.parentId,e.moduleId,e.dataSchemaFolderMap)}(e):E(e)};function E(e){return _(e.parentId,e.moduleId,e.apiFolderMap,e.apiRootFolderMap)}function _(e,t){var i,a,n;let l,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(void 0===e)return"SHARED";let o=e,d=new Set;for(;o===g.Kj&&s&&t&&(o=null!=(a=null==(i=s[t])?void 0:i.id)?a:o),!d.has(o);){;d.add(o);let e=r[o];if(!e)break;if("INTERNAL"===e.visibility){l=e;break}o=e.parentId}return null!=(n=null==l?void 0:l.visibility)?n:"SHARED"}let F=e=>{let{excludeInheritOption:t,value:i,parentId:n,entityId:g,entityType:x,moduleId:E,isLabelIconWithoutText:_,className:F,isHideDropdownIcon:D,isShowBorderRight:R,requestSaveAfterChange:O,iconSize:P=14,...L}=e,$=(0,v.Ay)(e=>{let{apiDetailFolder:t,apiDetail:i,apiSchemaFolder:a}=e;return M({entityId:g,entityType:x,parentId:n,moduleId:E,endpointMap:i.apiDetailMap,apiFolderMap:t.apiDetailFolderMap,apiRootFolderMap:t.rootFolderMap,dataSchemaFolderMap:a.apiSchemaFolderMap})}),B="INTERNAL"===$,z=l().useMemo(()=>{let e=(0,a.jsxs)("div",{className:A()(C.popup__visibility__icon,"flex flex-row items-start w-full relative"),children:[(0,a.jsx)("div",{className:A()(C.popup__visibility__icon_square),children:(0,a.jsx)(w.A,{type:"icon-globe1",size:24})}),(0,a.jsxs)("div",{className:"flex-1 w-0 whitespace-normal px-1",children:[(0,a.jsx)("p",{className:"mb-0",children:(0,s.hw)({id:"api.management.tabTitle.documentation.settings.visibility.shared"})}),(0,a.jsx)("p",{className:A()("mb-0",{"text-secondary":!B}),children:(0,s.hw)({id:"api.management.tabTitle.documentation.settings.visibility.shared-description"})})]}),"SHARED"===i&&(0,a.jsx)(w.A,{type:"icon-check",color:"var(--ui-primary-color)",size:16,className:A()("hidden absolute",C.popup__visibility__icon_check),style:{top:"3px",right:"0px"}})]});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I,{value:"SHARED",label:(0,a.jsxs)("div",{className:"flex items-center w-full relative h-full",children:[(0,a.jsx)(w.A,{type:"icon-globe1",size:P}),!_&&(0,a.jsx)("span",{className:"ml-2",children:(0,s.hw)({id:"api.management.tabTitle.documentation.settings.visibility.shared"})})]}),disabled:B,children:B?(0,a.jsx)(b.A,{title:(0,s.hw)({id:"api.management.tabTitle.documentation.settings.visibility.shared-restricted"}),placement:"right",children:e}):e},"SHARED"),(0,a.jsx)(I,{value:"INTERNAL",label:(0,a.jsxs)("div",{className:"flex items-center w-full relative h-full",children:[(0,a.jsx)(w.A,{type:"icon-users-teams",color:"var(--ui-blue-6)",size:P}),!_&&(0,a.jsx)("span",{className:"ml-2",children:(0,s.hw)({id:"api.management.tabTitle.documentation.settings.visibility.internal"})})]}),children:(0,a.jsxs)("div",{className:A()(C.popup__visibility__icon,"flex flex-row items-start w-full relative"),children:[(0,a.jsx)("div",{className:A()(C.popup__visibility__icon_square),children:(0,a.jsx)(w.A,{type:"icon-users-teams",color:"var(--ui-blue-6)",size:24})}),(0,a.jsxs)("div",{className:"flex-1 w-0 whitespace-normal px-1",children:[(0,a.jsx)("p",{className:"mb-0",children:(0,s.hw)({id:"api.management.tabTitle.documentation.settings.visibility.internal"})}),(0,a.jsx)("p",{className:"mb-0 text-secondary",children:(0,s.hw)({id:"api.management.tabTitle.documentation.settings.visibility.internal-description"})})]})]})},"INTERNAL")]})},[B,i,_]),U=l().useMemo(()=>k(i,$),[i,$]),H=l().useMemo(()=>"SHARED"===i&&"INTERNAL"===U?"INHERITED":i,[i,U]),V=l().useMemo(()=>"INTERNAL"===U?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.A,{type:"icon-users-teams",color:"var(--ui-blue-6)",size:P}),!_&&(0,a.jsx)("span",{className:"ml-2",children:(0,s.hw)({id:"api.management.tabTitle.documentation.settings.visibility.internal"})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.A,{type:"icon-globe1",size:P}),!_&&(0,a.jsx)("span",{className:"ml-2",children:(0,s.hw)({id:"api.management.tabTitle.documentation.settings.visibility.shared"})})]}),[U,_]),K=(0,y.A)(e=>{var t;null==L||null==(t=L.onClick)||t.call(L,e),(0,h.IL)("app_button_click_visibility",{page_category:T(x)})}),{run:q}=(0,f.eB)(async e=>{if(g){if("DOC"===x)return await (0,o.A7)(g,{visibility:e});else if("HTTP_API"===x)return await (0,u.yo)(g,{visibility:e});else if("HTTP_API_CASE"===x)return await (0,p.yo)(g,{visibility:e});else if("API_FOLDER"===x)return await (0,m.yo)(g,{visibility:e});else if("DATA_SCHEMA"===x)return await (0,c.yo)(g,{visibility:e});else if("DATA_SCHEMA_FOLDER"===x)return await (0,d.yo)(g,{visibility:e})}},async()=>{if("DATA_SCHEMA"===x)return(0,S.dispatchFetchDataSchemaList)();if("DATA_SCHEMA_FOLDER"===x)return(0,S.dispatchFetchDataSchemaFolderList)();if("HTTP_API"===x)return(0,S.dispatchFetchHttpApiList)();else if("HTTP_API_CASE"===x)return(0,S.dispatchFetchHttpApiCaseList)();else if("API_FOLDER"===x)return(0,S.dispatchFetchApiFolderList)()},void 0,{isReturnAll:!0,showLoading:!1,isHideSuccessMsg:!0,debounceInterval:100}),G=(0,y.A)((e,t)=>{var i,a;null==L||null==(i=L.onChange)||i.call(L,e,t),(0,h.IL)("app_button_click_visibility_setting",{page_category:T(x),title:null==e||null==(a=e.toLowerCase)?void 0:a.call(e)}),O&&q(e)});return(0,a.jsx)(j.A,{placement:"bottomLeft",dropdownMatchSelectWidth:!1,menuItemSelectedIcon:(0,a.jsx)(w.A,{type:"icon-check",color:"var(--ui-primary-color)",size:16,className:A()(C.popup__visibility__icon_check)}),showSearch:!1,listHeight:340,optionLabelProp:"label",...L,onClick:K,onChange:G,className:A()(F,C.select,{[C.select__without_dropdown_icon]:D,[C.select__with_border_right]:R,[C.select__is_label_icon_without_text]:_}),value:H,popupClassName:C.popup,children:t?z:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(N,{label:(0,s.hw)({id:"message.defaultSetting"}),children:(0,a.jsx)(I,{value:"INHERITED",label:(0,a.jsx)("div",{className:"flex items-center w-full relative h-full",children:V}),children:(0,a.jsxs)("div",{className:A()(C.popup__visibility__icon,C.popup__visibility__icon_inherit,"flex flex-row items-center w-full relative"),children:[(0,a.jsx)("div",{className:A()(C.popup__visibility__icon_square),children:(0,a.jsx)(r,{color:"var(--ui-text-color-secondary)",width:24,height:24})}),(0,a.jsxs)("div",{className:"flex-1 w-0 whitespace-normal px-1",children:[(0,a.jsx)("p",{className:"mb-0",children:(0,s.hw)({id:"message.inheritParent"})}),(0,a.jsx)("p",{className:"mb-0 text-secondary",children:(0,s.hw)({id:"INTERNAL"===$?"api.management.tabTitle.documentation.settings.visibility.parent-internal":"api.management.tabTitle.documentation.settings.visibility.parent-shared"})})]})]})},"INHERITED")}),(0,a.jsx)(N,{label:(0,s.hw)({id:"message.specifyManually"}),children:z})]})})}},926669:function(e,t,i){"use strict";i.d(t,{A:()=>u});var a=i(838e3),n=i(740565),l=i(689368),r=i(838487),s=i.n(r),o=i(554692),d=i(963227);let c=new Map([["HISTORICAL",(0,n.hw)({id:"version.record.action.historical"})],["INSERT",(0,n.hw)({id:"version.record.action.insert"})],["UPDATE",(0,n.hw)({id:"version.record.action.update"})],["DELETE",(0,n.hw)({id:"version.record.action.delete"})],["REVERT",(0,n.hw)({id:"version.record.action.revert"})],["IMPORT",(0,n.hw)({id:"version.record.action.importCreate"})],["OVERRIDE",(0,n.hw)({id:"version.record.action.importOverride"})],["FORK",(0,n.hw)({id:"version.record.action.fork"})],["MERGE",(0,n.hw)({id:"version.record.action.merge"})],["PICK",(0,n.hw)({id:"version.record.action.pick"})]]),u=e=>{let{action:t,mergeFromBranchId:i,className:r,...u}=e,p=(0,l.Ay)(e=>e.projectBranch.map);return t?["MERGE","PICK"].includes(t)&&i?(0,a.jsx)(o.A,{title:(0,n.hw)({id:"version.record.mergeForm"},{branchName:p[i]?p[i].name||"":(0,a.jsx)(n.n3,{id:"version.record.deletedBranch"})}),mouseEnterDelay:.3,children:(0,a.jsx)(d.A,{className:s()("text-color-secondary",r),...u,children:c.get(t)})}):(0,a.jsx)(d.A,{className:s()("text-color-secondary",r),...u,children:c.get(t)}):null}},165311:function(e,t,i){"use strict";i.d(t,{A:()=>m});var a=i(838e3),n=i(740565),l=i(196509),r=i(674984),s=i(435685),o=i(838487),d=i.n(o),c=i(554692),u=i(671466);let p=e=>{let{utils:{httpApiIdentityPatternModule:t}}=s.baseContainer.getItemsSync(e=>[e.utils]),{httpApiIdentityPattern:i,showTooltip:r=!1,placement:o="top",className:p="",fieldName:m}=e,{httpApiIdentityPatternText:h}=i?t.getIdentityPatternAndText({httpApiIdentityPattern:i,identityPatternTypeMap:l.XO,fieldName:m,label:(0,n.hw)({id:"api.folder.icon.label.identification"})}):{httpApiIdentityPatternText:""},v=(0,a.jsx)(u.A,{type:"icon-uniquely-identifies",color:"var(--ui-primary-base)"});return(0,a.jsx)("div",{className:d()(p,"ml-1"),children:r?(0,a.jsx)(c.A,{title:h,placement:o,children:v}):v})};function m(e){return(0,a.jsx)(r.Ae,{children:(0,a.jsx)(p,{...e})})}},196509:function(e,t,i){"use strict";i.d(t,{L4:()=>c,XO:()=>s,gW:()=>u,lb:()=>r,rv:()=>o,yS:()=>d});var a=i(838e3),n=i(740565),l=i(269966);let r={MethodAndPath:"Method & Path",OperationId:"OperationId",Query:(0,n.hw)({id:"api.folder.setting.query.identification"}),Body:(0,n.hw)({id:"api.folder.setting.body.identification"}),Header:(0,n.hw)({id:"api.folder.setting.header.identification"})},s={methodAndPath:r.MethodAndPath,operationId:r.OperationId,query:r.Query,body:r.Body,header:r.Header},o=["query","body","header"],d=[{label:r.MethodAndPath,value:"methodAndPath"},{label:r.OperationId,value:"operationId"},{label:r.Query,value:"query"},{label:r.Body,value:"body"},{label:r.Header,value:"header"}],c=[{label:(0,a.jsx)(n.sA,{id:"message.inheritParent"}),value:"inherit"},...d],u=[{label:l.yA.FormData,value:"formdata"},{label:l.yA.XWwwFormUrlencoded,value:"urlencoded"}]},241421:function(e,t,i){"use strict";i.d(t,{A:()=>f});var a=i(838e3),n=i(740565),l=i(140049),r=i(838487),s=i.n(r),o=i(969812),d=i(257100),c=i(458184),u=i(671466),p=i(641486),m=i(566926);let h="filtered-blDwpt",v=["OPENING"],f=e=>{let{className:t}=e,i=(0,m.A4)(e=>e.filterStatus),r=(0,m.A4)(e=>e.setFilterStatus),[f,g]=(0,p.useState)(!1),y=(0,l.A)(e=>{if(1===i.length&&i[0]===e)return;let t=v;t=i.includes(e)?i.filter(t=>t!==e):[...i,e],null==r||r(t)}),x=(0,l.A)(()=>{null==r||r(v)}),A=(0,p.useMemo)(()=>[{key:"unresolved",icon:(0,a.jsx)(o.A,{checked:i.includes("OPENING")}),label:(0,n.hw)({id:"comments.status.unresolved"}),onClick:()=>y("OPENING")},{key:"resolved",icon:(0,a.jsx)(o.A,{checked:i.includes("RESOLVED")}),label:(0,n.hw)({id:"comments.status.resolved"}),onClick:()=>y("RESOLVED")},{type:"divider",key:"divider"},{key:"reset",icon:(0,a.jsx)(u.A,{type:"icon-refresh-ccw-01"}),label:(0,n.hw)({id:"reset"}),onClick:x}],[x,y,i]);return(0,a.jsx)(d.A,{menu:{items:A},open:f,onOpenChange:g,className:t,children:(0,a.jsx)(c.A,{className:s()("relative",{[h]:i.includes("RESOLVED")}),type:"text",icon:(0,a.jsx)(u.A,{type:"icon-FiltersLines"})})})}},428301:function(e,t,i){"use strict";i.d(t,{A:()=>eU});var a=i(838e3),n=i(662387),l=i(838487),r=i.n(l),s=i(764007),o=i(458184),d=i(743190),c=i(671466),u=i(641486);let p="container-5_vkkF",m="title-n5bU9k",h="index-lehiq3",v="scale-pNDYzc",f="indexNumber-XlAvre",g=e=>{let{imageUrls:t,activeIndex:i,onClose:l,className:g,title:y,...x}=e,[A,j]=(0,u.useState)(i),[b,w]=(0,u.useState)(1),[S,C]=(0,u.useState)({x:0,y:0}),[I,N]=(0,u.useState)(!1),k=(0,u.useRef)(!1),T=(0,u.useRef)({x:0,y:0}),M=(0,u.useRef)({x:0,y:0}),E=()=>{k.current=!1};return(0,n.A)(()=>{x.open&&(j(i),w(1),C({x:0,y:0}),N(!1))},[x.open]),(0,a.jsx)(s.Ay,{size:"960",className:r()(p,g),...x,footer:null,onCancel:l,title:(0,a.jsxs)("div",{className:"flex items-center justify-end",children:[(0,a.jsx)("span",{className:r()(m,"pl-2"),children:y}),(0,a.jsxs)("div",{className:"ml-auto flex items-center",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(o.A,{disabled:0===A,size:"small",type:"text",icon:(0,a.jsx)(c.A,{type:"icon-left-md",onClick:()=>{j(A-1),w(1),C({x:0,y:0})}})}),(0,a.jsxs)("span",{className:r()(h,"mx-1 flex items-center"),children:[(0,a.jsx)("span",{className:f,children:A+1}),(0,a.jsx)("span",{className:"mx-1",children:"/"}),(0,a.jsx)("span",{children:t.length})]}),(0,a.jsx)(o.A,{disabled:A===t.length-1,size:"small",type:"text",icon:(0,a.jsx)(c.A,{type:"icon-right-md",onClick:()=>{j(A+1),w(1),C({x:0,y:0})}})})]}),(0,a.jsx)(d.A,{type:"vertical"}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(o.A,{disabled:b<=.01,size:"small",type:"text",icon:(0,a.jsx)(c.A,{type:"icon-ZoomOut"}),onClick:()=>w(Math.max(.01,b-.1*b))}),(0,a.jsxs)("span",{className:r()(v,"mx-1 w-12 text-center"),children:[Math.round(100*b),"%"]}),(0,a.jsx)(o.A,{disabled:b>=5,size:"small",type:"text",icon:(0,a.jsx)(c.A,{type:"icon-ZoomIn"}),onClick:()=>w(Math.min(5,b+.1*b))})]}),(0,a.jsx)(d.A,{type:"vertical"}),(0,a.jsx)(o.A,{size:"small",type:"text",icon:(0,a.jsx)(c.A,{type:I?"icon-Auto":"icon-RelationOneToOne"}),onClick:()=>{w(1),C({x:0,y:0}),N(!I)}}),(0,a.jsx)(d.A,{type:"vertical"}),(0,a.jsx)(o.A,{onClick:l,size:"small",type:"text",icon:(0,a.jsx)(c.A,{type:"icon-x-close"})})]})]}),children:(0,a.jsx)("div",{className:"flex flex-col justify-center items-center h-full w-full overflow-hidden",onWheel:e=>{let t=e.deltaY;w(e=>Math.min(Math.max(.01,t>0?e/1.1:1.1*e),5))},onMouseDown:e=>{k.current=!0,M.current={x:e.clientX,y:e.clientY},T.current=S},onMouseMove:e=>{if(!k.current)return;let t=e.clientX-M.current.x,i=e.clientY-M.current.y;C({x:T.current.x+t,y:T.current.y+i})},onMouseUp:E,onMouseLeave:E,children:(0,a.jsx)("img",{src:t[A],className:r()({"w-full h-full":!I}),style:{transform:`translate(${S.x}px, ${S.y}px) scale(${b})`,transition:k.current?"none":"transform 0.2s ease-in-out",userSelect:"none"},draggable:!1})})})};var y=i(858534),x=i(666804),A=i(161178),j=i(740565),b=i(291341),w=i(808611),S=i(869704),C=i(689368),I=i(190183),N=i(140049),k=i(718180),T=i(571202),M=i(392819),E=i(819463),_=i(861418),F=i.n(_),D=i(539307),R=i(712278),O=i(850526),P=i(472978),L=i(202130);let $="container-p6tr2p",B="overlay-E8itxn";function z(e){let{attributes:t,children:i,element:n,renderCard:l}=e,s=(0,O.f7)(),o=(0,O.zL)(),[d,c]=(0,u.useState)(!1);return(0,a.jsx)(L.A,{open:d,autoAdjustOverflow:!0,destroyTooltipOnHide:!0,showArrow:!1,content:null==l?void 0:l(n.data),trigger:["click"],onOpenChange:c,overlayClassName:B,children:(0,a.jsx)("span",{...t,contentEditable:!1,className:r()($,{active:s&&o||d}),children:(0,a.jsx)("div",{contentEditable:!1,children:P.U0?(0,a.jsxs)(a.Fragment,{children:[i,"@",n.data.name]}):(0,a.jsxs)(a.Fragment,{children:["@",n.data.name,i]})})})})}let U="container-yJLfVS",H="option-AxKOfQ",V="empty-_oEJVy";function K(e){let{style:t,emptyText:i,selectedKey:n,options:l,onSelect:s,renderOption:o}=e;return(0,a.jsx)("div",{style:t,className:U,children:l&&l.length>0?l.map(e=>(0,a.jsx)("div",{className:r()(H,{selected:n===e.id}),onClick:t=>{t.preventDefault(),null==s||s(e)},children:(null==o?void 0:o(e))||e.name},e.id)):(0,a.jsx)("div",{className:V,children:i||(0,j.hw)({id:"noData"})})})}let q="container-ZXLEcB",G="input-mUDLxY",W="overlay-nG60R2",J=(0,u.forwardRef)((e,t)=>{var i,n,l;let{placeholder:s,value:o,className:d,options:c=[],autoFocus:p=!1,readOnly:m=!1,borderless:h=!1,emptyText:v,onChange:f,onSubmit:g,onPaste:y,onFilter:x,renderOption:A,renderCard:j,...b}=e,w=(0,u.useMemo)(()=>((e,t)=>{let{insertData:i}=e;return e.insertData=e=>{var a;t.readOnly||(null==(a=t.onPaste)||a.call(t,e),null==i||i(e))},e})((e=>{let{isInline:t,isVoid:i}=e;return e.isInline=e=>"MENTION"===e.type||t(e),e.isVoid=e=>"MENTION"===e.type||i(e),e})((0,O.o$)((0,R.$k)((0,D.ie)()))),{readOnly:m,onPaste:y}),[m,y]),[S,C]=(0,u.useState)(null),[I,N]=(0,u.useState)(0),[T,M]=(0,u.useState)(""),_=(0,u.useRef)(!1),P=(0,u.useRef)(""),[L,$]=(0,u.useState)(),B=(0,u.useRef)(null),U=(0,u.useRef)(null),H=(0,u.useMemo)(()=>x?x(c,T):c.filter(e=>String(e.name).toLowerCase().includes(String(T).toLowerCase())),[c,T,x]),V=(0,u.useMemo)(()=>[{type:"PARAGRAPH",children:[{text:""}]}],[]),J="string"==typeof o?o:"",Y=null==(i=H[I])?void 0:i.id;(0,u.useEffect)(()=>{if(P.current!==J){P.current=J;let e=(e=>{if(!e)return[{type:"PARAGRAPH",children:[{text:""}]}];let t=e.trim().split("\n").filter(e=>e.length>0);return 0===t.length?[{type:"PARAGRAPH",children:[{text:""}]}]:t.map(e=>{let t,i={type:"PARAGRAPH",children:[]},a=/<at id="([^"]+)">@([^<]+)<\/at>/g,n=0;for(;null!==(t=a.exec(e));){let l=e.slice(n,t.index);l&&i.children.push({text:l});let[,r,s]=t;i.children.push({type:"MENTION",data:{id:Number(r),name:s},children:[{text:s}]}),n=a.lastIndex}let l=e.slice(n);return l&&i.children.push({text:l}),i})})(J);D.gB.insertNodes(w,e,{at:[0]});for(let t=w.children.length-1;t>=e.length;t--)D.gB.removeNodes(w,{at:[t],mode:"highest"})}},[w,J]),(0,k.A)(()=>{p&&setTimeout(()=>{O.rL.focus(w);let e=D.KE.end(w,[]);D.gB.select(w,{anchor:e,focus:e})},100)});let Z=(0,u.useCallback)(e=>{var t,i;let a;S&&D.gB.select(w,S);t=w,a={type:"MENTION",data:i=e,children:[{text:i.name}]},D.gB.insertNodes(t,a),D.gB.move(w),O.rL.focus(w),C(null)},[w,S]),Q=(0,u.useCallback)(e=>{let{attributes:t,children:i,element:n}=e;return"MENTION"===n.type?(0,a.jsx)(z,{...e,element:n,renderCard:j}):(0,a.jsx)("div",{...t,children:i})},[j]),X=(0,u.useCallback)(e=>{let{attributes:t,children:i}=e;return(0,a.jsx)("span",{...t,children:i})},[]),ee=(0,u.useCallback)(e=>{let{attributes:t,children:i}=e;return(0,a.jsx)("span",{...t,style:{...t.style,opacity:1,color:"var(--ui-input-placeholder-color)"},children:i})},[]),et=(0,u.useCallback)(e=>{if(!m){if(!_.current){if((e.metaKey||e.ctrlKey)&&"a"===e.key){e.preventDefault();let t=D.KE.start(w,[]),i=D.KE.end(w,[]);D.gB.select(w,{anchor:t,focus:i});return}if(S)switch(e.key){case"ArrowDown":e.preventDefault(),N(I>=H.length-1?0:I+1);break;case"ArrowUp":e.preventDefault(),N(I<=0?H.length-1:I-1);break;case"Tab":case"Enter":e.preventDefault(),Z(H[I]);break;case"Escape":e.preventDefault(),C(null)}else"Enter"!==e.key||e.shiftKey||null==g||g(P.current||"")}}},[S,H,I,w,Z,g,m]),ei=(0,u.useCallback)(e=>{if(e)try{var t;let i=O.rL.toDOMRange(w,e).getBoundingClientRect(),a=window.innerWidth,n=window.innerHeight,l=null==(t=B.current)?void 0:t.getBoundingClientRect();if(!l)return;let r=i.bottom+4,s=i.left;s+l.width>a-16&&(s=a-l.width-16),s=Math.max(16,s),r+l.height>n-16&&(r=i.top-l.height-4),r=Math.max(16,r),$({top:r,left:s})}catch(e){console.error(e)}},[w]),ea=(0,u.useCallback)(e=>{if(m)return;let t=(e=>{let{selection:t}=e;if(t&&D.Q6.isCollapsed(t)){let[i]=D.Q6.edges(t),a=D.KE.before(e,i,{unit:"character"});if(!a)return;let n=D.KE.range(e,a,i);if("@"===D.KE.string(e,n))return{range:n,search:""};let l=D.KE.before(e,i,{unit:"word"}),r=l&&D.KE.before(e,l),s=r&&D.KE.range(e,r,i),o=s&&D.KE.string(e,s),d=o&&o.match(RegExp("^@([\\p{L}\\p{N}]+)$","u")),c=D.KE.after(e,i),u=D.KE.range(e,i,c),p=D.KE.string(e,u).match(/^(\s|$)/);if(d&&p)return{range:s,search:d[1]}}})(w);t?(C(t.range),M(t.search),N(0),requestAnimationFrame(()=>{ei(t.range)})):(C(null),M(""),$(void 0));let i=e.map(e=>D.Hg.isElement(e)&&"PARAGRAPH"===e.type?e.children.map(e=>D.Hg.isElement(e)&&"MENTION"===e.type?`<at id="${e.data.id}">@${e.data.name}</at>`:D.EY.isText(e)?e.text:"").join(""):D.Hg.isElement(e)&&"MENTION"===e.type?`<at id="${e.data.id}">@${e.data.name}</at>`:!D.Hg.isElement(e)&&D.EY.isText(e)?e.text:"").join("\n");P.current=i,null==f||f(i)},[w,f,m]),en=(0,u.useCallback)(()=>{_.current=!0},[]),el=(0,u.useCallback)(()=>{_.current=!1},[]);return(0,u.useImperativeHandle)(t,()=>({focus:()=>{O.rL.focus(w)},blur:()=>{O.rL.blur(w)}})),(0,u.useEffect)(()=>{S&&(U.current=S,requestAnimationFrame(()=>{U.current&&ei(U.current)}))},[S,ei]),(0,E.A)(()=>{C(null)},B),(0,a.jsx)("div",{...b,className:r()(q,d,{readOnly:m,borderless:h}),children:(0,a.jsxs)(O.A,{editor:w,initialValue:V,onChange:ea,children:[(0,a.jsx)(O.Fo,{className:G,placeholder:m?void 0:s,renderElement:Q,renderLeaf:X,renderPlaceholder:ee,onKeyDown:et,onCompositionStart:en,onCompositionEnd:el,readOnly:m}),!m&&S&&F().createPortal((0,a.jsx)("div",{ref:B,style:{top:null!=(n=null==L?void 0:L.top)?n:-9999,left:null!=(l=null==L?void 0:L.left)?l:-9999},className:W,children:(0,a.jsx)(K,{style:{width:"100%"},emptyText:v,selectedKey:Y,options:H,onSelect:Z,renderOption:A})}),document.body)]})})});var Y=i(325318),Z=i(169508),Q=i(744283),X=i(496411),ee=i(483482),et=i(850646),ei=i(929463),ea=i(586587),en=i(554692),el=i(179048),er=i(161814),es=i(398380);let eo=()=>{let e=(0,C.Ay)(e=>e.projectMember.currentProjectMembers)||[],t=(0,u.useMemo)(()=>(0,es.keyBy)(e,"userId"),[e]),i=(0,u.useMemo)(()=>e.filter(e=>e.roleType!==A._I.None).map(e=>{var t,i,a;return{name:e.nickname||(null==(t=e.user)?void 0:t.name)||(null==(i=e.user)?void 0:i.username),id:e.userId,avatar:null==(a=e.user)?void 0:a.avatar}}),[e]),n=(0,u.useCallback)(e=>{var i,n,l,r;let s=t[e.id];return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(T.A,{className:"flex-none",size:40,src:null==(i=s.user)?void 0:i.avatar}),(0,a.jsxs)("div",{className:"flex-auto truncate",children:[(0,a.jsx)("div",{className:"truncate",children:s.nickname||(null==(n=s.user)?void 0:n.name)||(null==(l=s.user)?void 0:l.username)}),(0,a.jsx)("div",{style:{color:"var(--ui-text-color-tertiary)",fontSize:"var(--ui-font-size-sm)",fontWeight:"var(--ui-font-weight-400)"},className:"truncate",children:null==(r=s.user)?void 0:r.email})]})]})},[t]),l=(0,u.useCallback)(e=>{var i,n,l,r,s,o,d;let c=e?t[e.id]:void 0;return c?(0,a.jsxs)("div",{style:{minWidth:200},className:"flex items-center gap-3",children:[(0,a.jsx)(T.A,{size:56,src:null==(i=c.user)?void 0:i.avatar}),(0,a.jsxs)("div",{style:{height:56},className:"flex flex-col justify-between py-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",style:{fontSize:"var(--ui-font-size-lg)"},children:[(0,a.jsx)("div",{style:{fontWeight:"var(--ui-font-weight-semibold)"},children:c.nickname||(null==(n=c.user)?void 0:n.name)||(null==(l=c.user)?void 0:l.username)||""}),(0,a.jsx)("div",{style:{fontWeight:"var(--ui-font-weight-400)",color:"var(--ui-text-color-secondary)"},children:(null==(r=c.user)?void 0:r.username)||""})]}),!!(null==(s=c.user)?void 0:s.email)&&(0,a.jsx)("div",{style:{color:"var(--ui-text-color-tertiary)",fontSize:"var(--ui-font-size-sm)",fontWeight:"var(--ui-font-weight-400)"},className:"truncate",children:(0,a.jsx)(er.A,{placement:"bottom",className:"truncate",text:null==(o=c.user)?void 0:o.email,copyText:null==(d=c.user)?void 0:d.email})})]})]}):(0,a.jsx)("div",{style:{minWidth:296},className:"p-2 text-center",children:(0,a.jsx)("div",{style:{color:"var(--ui-disabled-color)",fontWeight:"var(--ui-font-weight-400)"},children:(0,j.hw)({id:"projectMember.theUserHasLeftTheTeam"})})})},[t]);return{options:i,renderOption:n,renderCard:l,onFilter:(0,u.useCallback)((e,i)=>i?e.filter(e=>{var a,n,l,r,s,o,d;let c=t[e.id];return(null==(a=c.nickname)?void 0:a.toLowerCase().includes(i.toLowerCase()))||(null==(l=c.user)||null==(n=l.name)?void 0:n.toLowerCase().includes(i.toLowerCase()))||(null==(s=c.user)||null==(r=s.username)?void 0:r.toLowerCase().includes(i.toLowerCase()))||(null==(d=c.user)||null==(o=d.email)?void 0:o.toLowerCase().includes(i.toLowerCase()))}):e,[t])}};var ed=i(526838);class ec{constructor(e,t){var i;(0,ed._)(this,"uid",void 0),(0,ed._)(this,"size",void 0),(0,ed._)(this,"name",void 0),(0,ed._)(this,"fileName",void 0),(0,ed._)(this,"lastModified",void 0),(0,ed._)(this,"lastModifiedDate",void 0),(0,ed._)(this,"url",void 0),(0,ed._)(this,"status",void 0),(0,ed._)(this,"percent",void 0),(0,ed._)(this,"thumbUrl",void 0),(0,ed._)(this,"crossOrigin",void 0),(0,ed._)(this,"originFileObj",void 0),(0,ed._)(this,"response",void 0),(0,ed._)(this,"error",void 0),(0,ed._)(this,"linkProps",void 0),(0,ed._)(this,"type",void 0),(0,ed._)(this,"xhr",void 0),(0,ed._)(this,"preview",void 0),this.uid=e,this.size=t.size,this.name=null!=(i=t.name.split(".").at(0))?i:t.name,this.fileName=t.name,this.lastModified=t.lastModified,this.lastModifiedDate=new Date(t.lastModified),this.originFileObj=t,this.status="uploading",this.percent=0}}let eu=(0,i(325475).vt)(e=>({data:{open:!1,imageUrls:[],activeIndex:0},openModal:function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e({data:{open:!0,imageUrls:t,activeIndex:i}})},closeModal:()=>e({data:{open:!1,imageUrls:[],activeIndex:0}})}));var ep=i(348154);async function em(e){let t=new FileReader;return t.readAsDataURL(e),new Promise((e,i)=>{t.onloadend=()=>{e(t.result)},t.onerror=()=>{i(Error("Failed to read file"))}})}let eh="imageContainer-aXBLl4",ev="mask-MdrpJn",ef="suspense-nh9w8V",eg="closedIcon-_unjy3",ey=e=>{let{children:t,className:i,onDelete:n,onClick:l}=e;return(0,a.jsxs)("div",{className:r()(eh,i,"relative"),onClick:l,children:[t,(0,a.jsx)("div",{className:r()(eg,"flex items-center flex-col justify-center absolute w-6 h-6 cursor-pointer "),onClick:e=>{e.stopPropagation(),n()},children:(0,a.jsx)(c.A,{type:"icon-x-close",size:16})})]})},ex=e=>{let{file:t,onDelete:i,onClick:n}=e,[l,s]=(0,u.useState)();if((0,k.A)(()=>{try{"done"!==t.status&&em(t.originFileObj).then(e=>{s(e)})}catch(e){console.error("Failed to load image:",e)}}),"error"===t.status)return(0,a.jsx)(ey,{className:r()(eh),onDelete:i,children:(0,a.jsx)(c.A,{type:"icon-error1",color:"var(--ui-error-color)",size:24})});if("done"===t.status){var o;return(0,a.jsx)(ey,{onDelete:i,onClick:n,children:(0,a.jsx)("img",{src:(0,et.hY)()+(null==(o=t.response)?void 0:o.data),alt:"image",className:"cursor-pointer"})})}return l?(0,a.jsxs)("div",{className:r()(eh,"relative"),children:[(0,a.jsx)("img",{src:l,alt:"image"}),(0,a.jsx)("div",{className:r()(ev,eh,"absolute px-1 flex items-center flex-col justify-center"),children:(0,a.jsx)(ep.A,{size:"small",strokeColor:"var(--ui-primary-color)",showInfo:!1,percent:t.percent,className:"w-full"})})]}):(0,a.jsx)("div",{className:r()(eh,ef)})},eA="commentContainer-xaKK7X",ej="actionBar-Et4L2i",eb="hidden-WFbNPy",ew=(0,u.forwardRef)((e,t)=>{let{mode:i="CREATE",autoFocus:n,className:l,onBlur:s,initialValues:d,onSubmit:p,onEditCancel:m,submitText:h,placeholder:v}=e,[f,g]=(0,u.useState)(null!=d?d:{}),[y,x]=(0,u.useState)([]),A=(0,N.A)(e=>{x(t=>t.filter(t=>t.uid!==e))}),b=(0,N.A)(e=>{g(t=>{var i;return{...t,imageUrls:null==(i=t.imageUrls)?void 0:i.filter(t=>t!==e)}})}),S=(0,u.useMemo)(()=>y.some(e=>"uploading"===e.status),[y]),[C,I]=(0,u.useState)(!1),[k,T]=(0,u.useState)("EDIT"===i),M=async()=>{if(S||C)return;let e=y.filter(e=>"done"===e.status).map(e=>{var t;return`${(0,et.hY)()}${null==(t=e.response)?void 0:t.data}`});try{var t,a;I(!0),await (null==p?void 0:p({imageUrls:"CREATE"===i?e:[...null!=(t=f.imageUrls)?t:[],...e],content:null!=(a=f.content)?a:""})),x([]),g({}),T(!1)}finally{I(!1)}},E=e=>{let t=["image/png","image/jpeg","image/jpg","image/gif"].includes(e.type);t||ei.Ay.error((0,j.hw)({id:"comments.imageTypeLimit"}));let i=e.size/1024/1024<5;return i||ei.Ay.error((0,j.hw)({id:"comments.imageSizeLimit"})),t&&i},_=(0,N.A)(async e=>{let t=e.items,i=[];for(let e=0;e<t.length;e++)if(t[e].type.startsWith("image")){if(e>=8-y.length)break;let a=t[e].getAsFile();a&&E(a)&&i.push(a)}if(0===i.length)return;let a=i.map(e=>new ec((0,el.A)(),e));x(e=>[...e,...a]);let n=await Promise.allSettled(a.map(async e=>{try{let t=await (0,w.wU)(e.originFileObj,t=>{x(i=>{let a=[...i],n=a.find(t=>t.uid===e.uid);return n&&(n.percent=t),a})});return{uid:e.uid,response:t.data,status:"done"}}catch(t){return ei.Ay.error((0,j.hw)({id:"doc.editor.uploadImage.label.error"})),{uid:e.uid,status:"error"}}}));x(e=>{let t=[...e];return n.forEach(e=>{if("fulfilled"===e.status){let{uid:i,response:a,status:n}=e.value,l=t.find(e=>e.uid===i);l&&(l.response=a,l.status=n)}}),t})}),F=(0,N.A)(()=>{"CREATE"===i&&T(!0)}),D=(0,u.useRef)(null),R=(0,u.useMemo)(()=>{var e;return!S&&(f.content||!![...y,...null!=(e=f.imageUrls)?e:[]].length)},[S,f.content,y,f.imageUrls]),O=(0,N.A)(e=>{D.current&&e.target&&!D.current.contains(e.target)&&("CREATE"!==i||R||C||(T(!1),null==s||s()))});(0,u.useEffect)(()=>(document.addEventListener("mousedown",O),()=>{document.removeEventListener("mousedown",O)}),[O]);let{options:P,renderOption:L,renderCard:$,onFilter:B}=eo(),z=(0,u.useRef)(null),U=eu(e=>e.openModal),H=(0,N.A)(e=>{let t=y.filter(e=>"done"===e.status).map(e=>{var t;return`${(0,et.hY)()}${null==(t=e.response)?void 0:t.data}`});if("CREATE"===i)U(t,e);else{var a;U([...null!=(a=f.imageUrls)?a:[],...t],e)}}),V=(0,u.useMemo)(()=>{var e,t;return y.length+(null!=(t=null==(e=f.imageUrls)?void 0:e.length)?t:0)>=8},[y,f.imageUrls]);return(0,u.useImperativeHandle)(t,()=>({handleFocus:()=>{var e,t;null==(t=z.current)||null==(e=t.focus)||e.call(t)}})),(0,a.jsxs)("div",{ref:D,className:r()(eA,l),children:[(0,a.jsx)(J,{borderless:!0,autoFocus:n,placeholder:v,emptyText:(0,j.hw)({id:"projectMember.noProjectMemberFound"}),ref:z,options:P,value:null==f?void 0:f.content,renderOption:L,renderCard:$,onChange:e=>{g({...f,content:e})},onFocus:F,onSubmit:()=>{var e,t;M(),null==(t=z.current)||null==(e=t.blur)||e.call(t)},onPaste:_,onFilter:B}),(((null==f?void 0:f.imageUrls)||[]).length>0||y.length>0)&&(0,a.jsxs)("div",{className:"flex flex-wrap px-2 gap-1 mt-1",children:[((null==f?void 0:f.imageUrls)||[]).map((e,t)=>(0,a.jsx)(ey,{onDelete:()=>b(e),onClick:()=>H(t),children:(0,a.jsx)("img",{src:e,alt:"image",className:"w-full h-full"})},e)),y.map((e,t)=>(0,a.jsx)(ex,{file:e,onDelete:()=>A(e.uid),onClick:()=>{if("CREATE"===i)H(t);else{var e,a;H((null!=(a=null==(e=f.imageUrls)?void 0:e.length)?a:0)+t)}}},e.uid))]}),(0,a.jsxs)("div",{className:r()(ej,{[eb]:!k}),children:[(0,a.jsx)(ea.A,{accept:"image/*",beforeUpload:E,disabled:V,fileList:y,maxCount:8,multiple:!0,action:`${(0,et.hY)()}/api/v1/project-images`,data:{type:"projectComment"},headers:(0,es.omitBy)({Authorization:(0,X.iD)(),"X-Project-Id":`${(0,X.MJ)()}`,"X-Device-Id":`${(0,ee.fL)()}`,"Access-Control-Allow-Origin":"*","Accept-Language":Z.O1},e=>void 0===e||""===e),onChange:e=>{let{file:t,fileList:i}=e;t.status&&("error"===t.status&&ei.Ay.error((0,j.hw)({id:"doc.editor.uploadImage.label.error"})),x(i))},itemRender:()=>null,className:"ml-auto",withCredentials:!0,children:V?(0,a.jsx)(en.A,{title:(0,j.hw)({id:"comments.imageLimit"}),children:(0,a.jsx)(o.A,{disabled:!0,type:"text",icon:(0,a.jsx)(c.A,{type:"icon-Pic"})})}):(0,a.jsx)(o.A,{type:"text",icon:(0,a.jsx)(c.A,{type:"icon-Pic"})})}),"EDIT"===i&&(0,a.jsx)(o.A,{className:"ml-2",disabled:S,onClick:m,children:(0,j.hw)({id:"cancel"})}),(0,a.jsx)(Y.y,{permission:Q.o.SETTING_BASIC_READ,children:(0,a.jsx)(o.A,{loading:C,type:"primary",className:"ml-2",disabled:!R,onClick:M,children:h})})]})]})}),eS={container:"container-vhatQ1",disabledColor:"disabledColor-W7UK1X",replyBtn:"replyBtn-HHLpeV",time:"time-IDiYZo",actions:"actions-ruf0nb",listItem:"listItem-NchUfT",replies:"replies-rJrSIA",repliesContainer:"repliesContainer-PPKHaW",repliesExpanded:"repliesExpanded-Bhm7U0",expandReplies:"expandReplies-Niuvjk",repliesCollapsed:"repliesCollapsed-VwqfqJ",collapseReplies:"collapseReplies-vgLsBz"};var eC=i(184406),eI=i(751455),eN=i(759300),ek=i.n(eN),eT=i(95470),eM=i(524381),eE=i(257100),e_=i(452267),eF=i(653814);let eD="imageList-EQRD6D",eR="imageContainer-Tg6V9k",eO=e=>{let{imageUrls:t,content:i}=e,{options:n,renderOption:l,renderCard:s,onFilter:o}=eo(),d=eu(e=>e.openModal);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(J,{readOnly:!0,borderless:!0,style:{padding:0},value:i,options:n,renderOption:l,renderCard:s,onFilter:o}),!!(null==t?void 0:t.length)&&(0,a.jsx)("div",{className:r()(eD,"flex flex-wrap gap-1"),children:t.map((e,i)=>(0,a.jsx)("div",{className:eR,onClick:()=>{d(null!=t?t:[],i)},children:(0,a.jsx)("img",{src:e,alt:"image"})},e))})]})};var eP=i(566926),eL=i(159347),e$=i(440270),eB=i(618487);let ez=e=>{var t,i;let n,l,{item:s,getAvatarUrl:d,loading:p,isAdmin:m,ctx:h,configs:v={},expanded:f=!1,onExpand:g,onCollapse:y}=e,{showResolve:x=!0,showReply:A=!0}=v,b=(0,eP.A4)(e=>e.map),w=(0,eP.A4)(e=>e.createProjectComment),S=(0,eP.A4)(e=>e.updateProjectComment),k=(0,eP.A4)(e=>e.resolveProjectComment),E=(0,eP.A4)(e=>e.deleteProjectComment),_=(0,eP.A4)(e=>e.fetchReplies),F=null==(t=b[s.id])?void 0:t.children,D=(0,C.Ay)(e=>e.user.currentUser),{run:R,loading:O}=(0,eI.Ay)(()=>_(h.entityType,h.originEntityId,s.id),{manual:!0}),P=(0,u.useRef)(null),L=(0,u.useMemo)(()=>O?[...[,].fill({})]:(null==F?void 0:F.length)?s.replyCount?[...F,{id:-1,parentId:s.id,ref:P}]:F:[],[F,s.id,s.replyCount,O]),$=async()=>{(null==F?void 0:F.length)||await R(),f?null==y||y():null==g||g()},[B,z]=(0,u.useState)(!1),U=async e=>{var t;(e.content||(null==(t=e.imageUrls)?void 0:t.length))&&(await w(h.entityType,h.originEntityId,{...e,parentId:-1===s.id?s.parentId:s.id}),z(!1),null==g||g())},[H,V]=(0,u.useState)(!1),K=async e=>{var t;(e.content||(null==(t=e.imageUrls)?void 0:t.length))&&(await S(h.entityType,h.originEntityId,s.id,e),V(!1))},{run:q,loading:G}=(0,eI.Ay)(()=>k(h.entityType,h.originEntityId,s.id),{manual:!0}),W=(n=(0,eB.useModel)("clientConfig",e=>{let{data:t}=e;return t}),(0,N.A)(e=>{let{entityType:t,...i}=e,a={...i,entityType:I.xO[t]},l=(0,eL.QC)((null==n?void 0:n.commentInfoUrlPath)||"",a);(0,e$.e)({copyText:l+`?branchId=${(0,X.U3)()}`})}));if(-1===s.id)return(0,a.jsx)("div",{className:"px-3 pt-3 pb-0",children:(0,a.jsxs)("div",{className:r()("flex pb-3",eS.createComment),children:[(0,a.jsx)("div",{className:"mr-3 h-8 flex flex-col items-center justify-center",children:(0,a.jsx)(T.A,{size:24,src:d(null!=(i=D.id)?i:0)})}),(0,a.jsx)(ew,{ref:s.ref,mode:"CREATE",onSubmit:U,submitText:(0,j.hw)({id:"comments.reply"}),placeholder:(0,j.hw)({id:"comments.addReply"})})]})});return(0,a.jsx)(M.Ay.Item,{id:`comment-${s.id}`,className:r()(eS.listItem,"px-3 py-2"),children:(0,a.jsxs)(eT.A,{active:!0,avatar:{size:24},loading:p,children:[(0,a.jsx)(M.Ay.Item.Meta,{avatar:(0,a.jsx)(T.A,{size:24,src:d(s.createdById)}),title:(0,a.jsxs)("div",{className:"flex items-center h-6",children:[(0,a.jsx)(eC.A,{id:s.createdById}),(0,a.jsxs)("div",{className:"flex items-center ml-auto flex-shrink-0",children:[(0,a.jsxs)("span",{className:r()(eS.time,eS.disabledColor,"flex items-center"),children:[(l=s.updatedAt,ek()(l).format("YYYY/MM/DD HH:mm:ss")),x&&"RESOLVED"===s.status&&(0,a.jsx)(c.A,{size:12,color:"var(--ui-green-6)",type:"icon-CircleCompleteSolid",className:"ml-2"})]}),(0,a.jsxs)(eM.A.Compact,{size:"small",className:eS.actions,children:[(0,a.jsx)(en.A,{title:(0,j.hw)({id:"copyAccessLink"}),children:(0,a.jsx)(o.A,{type:"text",icon:(0,a.jsx)(c.A,{type:"icon-link1"}),onClick:()=>W({commentId:s.id,projectId:s.projectId,entityId:h.originEntityId,entityType:h.entityType})})}),D.id===s.createdById&&"RESOLVED"!==s.status&&(0,a.jsx)(en.A,{title:(0,j.hw)({id:"edit"}),children:(0,a.jsx)(o.A,{type:"text",icon:(0,a.jsx)(c.A,{type:"icon-Edit"}),onClick:()=>{V(!0)}})}),x&&("OPENING"===s.status?(0,a.jsx)(Y.y,{permission:h.permission,children:(0,a.jsx)(en.A,{title:(0,j.hw)({id:"comments.resolve.tip"}),children:(0,a.jsx)(o.A,{type:"text",size:"small",loading:G?{delay:200}:G,onClick:q,icon:(0,a.jsx)(c.A,{size:12,type:"icon-CircleComplete"})})})}):(0,a.jsx)(en.A,{title:(0,j.hw)({id:"comments.status.resolved"}),children:(0,a.jsx)(o.A,{type:"text",size:"small",disabled:!0,icon:(0,a.jsx)(c.A,{size:12,color:"var(--ui-green-6)",type:"icon-CircleCompleteSolid"})})})),(D.id===s.createdById||m)&&(0,a.jsx)(eE.A,{overlay:(0,a.jsx)(e_.A,{children:(0,a.jsx)(eF.A,{title:(0,j.hw)({id:"confirm.delete"}),onConfirm:()=>E(h.entityType,h.originEntityId,s.id,s.parentId),children:(0,a.jsx)(e_.A.Item,{icon:(0,a.jsx)(c.A,{type:"icon-trash-04"}),danger:!0,children:(0,j.hw)({id:"delete"})})})}),children:(0,a.jsx)(o.A,{size:"small",type:"text",icon:(0,a.jsx)(c.A,{size:12,type:"icon-dots-horizontal"})})})]})]})]}),description:H?(0,a.jsx)(ew,{autoFocus:!0,mode:"EDIT",initialValues:{content:s.content,imageUrls:s.imageUrls},onEditCancel:()=>V(!1),onSubmit:K,submitText:(0,j.hw)({id:"save"}),placeholder:(0,j.hw)({id:s.parentId?"comments.addReply":"comments.addComment"})}):(0,a.jsx)(eO,{imageUrls:s.imageUrls,content:s.content})}),(0,a.jsxs)("div",{className:"ml-6",children:[!!s.replyCount&&(0,a.jsxs)(o.A,{className:eS.replyBtn,size:"small",loading:O?{delay:200}:O,type:"text",onClick:$,children:[(0,a.jsx)("span",{children:s.replyCount>1?(0,j.hw)({id:"comments.reply.count"},{count:s.replyCount}):(0,j.hw)({id:"comments.reply.count.one"})}),(0,a.jsx)("span",{className:"ml-1",children:(0,j.hw)({id:f?"component.tagSelect.collapse":"component.tagSelect.expand"})}),(0,a.jsx)(c.A,{size:12,type:"icon-chevron-up-double",style:{transform:f?"rotate(0deg)":"rotate(180deg)"}})]}),(0,a.jsx)("div",{className:r()(eS.repliesWrapper,f?eS.repliesExpanded:eS.repliesCollapsed),children:(0,a.jsx)("ul",{className:r()(eS.replies,"p-0"),children:(null!=L?L:[]).map(e=>{var t;return(0,a.jsx)(ez,{loading:O,item:e,getAvatarUrl:d,isAdmin:m,ctx:h,configs:{showReply:!(null==(t=s.children)?void 0:t.length),showResolve:!1}},e.id)})})}),!s.replyCount&&A&&!s.replyCount&&(B?(0,a.jsx)(ew,{className:"mt-3 ml-3",placeholder:(0,j.hw)({id:"comments.addReply"}),submitText:(0,j.hw)({id:"comments.reply"}),onBlur:()=>z(!1),autoFocus:!0,mode:"CREATE",onSubmit:U}):(0,a.jsx)(Y.y,{permission:Q.o.SETTING_BASIC_READ,children:(0,a.jsx)(o.A,{className:eS.replyBtn,size:"small",type:"text",onClick:()=>z(!0),children:(0,j.hw)({id:"comments.reply"})})}))]})]})})},eU=e=>{var t;let i=(0,b.M)(t=>t.getActiveCommentId(`${I.XV[e.entityType]}.${e.originEntityId}`)),l=(0,b.M)(e=>e.removeActiveCommentId),[o,p]=(0,u.useState)(new Set),m=(0,eP.A4)(e=>e.list),h=(0,eP.A4)(e=>e.fetchProjectComments),v=(0,eP.A4)(e=>e.setFilterStatus),f=(0,eP.A4)(e=>e.filterStatus),E=(0,eP.A4)(e=>e.createProjectComment),_=(0,eP.A4)(e=>e.fetchReplies),F=(0,C.Ay)(e=>e.projectMember.currentProjectMembers),D=(0,u.useMemo)(()=>{var e;return null!=(e=null==F?void 0:F.reduce((e,t)=>(e[t.userId]=t,e),{}))?e:{}},[F]),R=(0,N.A)(function(){var e,t;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=(t=null==(e=D[i])?void 0:e.user.avatar)?t:""}),O=(0,C.Ay)(e=>e.user.currentUser),P=(0,u.useMemo)(()=>{var e;return!!O.id&&((0,S.rp)({superAdminRoleType:O.superAdminRoleType})||(null==(e=D[O.id])?void 0:e.roleType)===A._I.Admin)},[O.id,O.superAdminRoleType,D]),L=(0,C.Ay)(e=>{var t;let{project:i}=e;return(null==(t=i.currentProject)?void 0:t.visibility)==="public"&&i.currentProject.roleType===A._I.Guest}),[$,B]=(0,u.useState)(!1),z=(0,u.useMemo)(()=>$?[,,,,].fill({}):m,[$,m]),U=(0,N.A)(async()=>{B(!0),await h(e.entityType,e.originEntityId,{status:f}),B(!1)}),H=(0,N.A)(async t=>{let{data:i}=await (0,w.OK)(e.entityType,e.originEntityId,t);if(i)if(i.parentId){let{data:t}=await (0,w.OK)(e.entityType,e.originEntityId,i.parentId);if(!t)return;f.includes(t.status)?await U():v([...f,t.status]),await _(e.entityType,e.originEntityId,i.parentId),p(e=>{var t;let a=new Set(e);return a.add(null!=(t=i.parentId)?t:0),a})}else f.includes(i.status)?await U():v([...f,i.status])});(0,k.A)(()=>{L||i||U()}),(0,u.useEffect)(()=>{if(!L&&i){l(`${I.XV[e.entityType]}.${e.originEntityId}`);H(i).then(()=>{requestAnimationFrame(()=>{let e=0,t=window.setInterval(()=>{let a;a=document.getElementById(`comment-${i}`),(a&&(a.scrollIntoView({behavior:"smooth",block:"center"}),a.classList.add("active"),window.setTimeout(()=>{a.classList.remove("active")},5e3),1)||++e>10)&&window.clearInterval(t)},300)})})}},[i,l]),(0,n.A)(()=>{U()},[f]);let V=(0,N.A)(t=>(0,a.jsx)(ez,{loading:$,item:t,getAvatarUrl:R,isAdmin:P,ctx:e,expanded:o.has(t.id),onExpand:()=>p(e=>{let i=new Set(e);return i.add(t.id),i}),onCollapse:()=>p(e=>{let i=new Set(e);return i.delete(t.id),i})})),K=eu(e=>e.data),q=eu(e=>e.closeModal),G=(0,C.Ay)(e=>{var t;return(null==(t=e.project.currentProject)?void 0:t.teamId)||0}),W=async t=>{var i,n,l;if(t.content||(null==(i=t.imageUrls)?void 0:i.length))try{await E(e.entityType,e.originEntityId,t)}catch(t){let e=t.meta;e.limitExceeded&&s.Ay.confirm({icon:(0,a.jsx)(c.A,{type:"icon-info-1",color:"var(--ui-primary-color)"}),title:(0,j.hw)({id:"comments.limitExceeded.title"}),content:(0,j.hw)({id:"comments.limitExceeded.content"},{count:null!=(n=e.limitQuantity)?n:1,comment:(null!=(l=e.limitQuantity)?l:1)>1?(0,j.hw)({id:"comments.comments"}):(0,j.hw)({id:"comments.comment"})}),okText:(0,j.hw)({id:"payment.Upgrade"}),cancelText:(0,j.hw)({id:"branch.operation.limit.cancelText"}),onOk:()=>(0,x.Nu)({entityId:G,showUpgradeModal:!0})})}};return L?(0,a.jsx)(y.v,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:r()(eS.container,"flex flex-col h-full p-3 pr-0"),children:[(0,a.jsxs)("div",{className:"pr-3",children:[(0,a.jsxs)("div",{className:r()("flex p-3",eS.createComment),children:[(0,a.jsx)("div",{className:"mr-3 h-8 flex flex-col items-center justify-center",children:(0,a.jsx)(T.A,{size:24,src:R(null!=(t=O.id)?t:0)})}),(0,a.jsx)(ew,{mode:"CREATE",onSubmit:W,submitText:(0,j.hw)({id:"comments.comment"}),placeholder:(0,j.hw)({id:"comments.addComment"})})]}),(0,a.jsx)(d.A,{className:"mt-3 mb-1"})]}),(0,a.jsx)(M.Ay,{className:"overflow-y-auto h-full pr-3",itemLayout:"vertical",dataSource:z,rowKey:"id",renderItem:V})]}),(0,a.jsx)(g,{title:(0,j.hw)({id:"comments.imagePreview"}),open:K.open,imageUrls:K.imageUrls,activeIndex:K.activeIndex,onClose:q})]})}},566926:function(e,t,i){"use strict";i.d(t,{A4:()=>m,EO:()=>h});var a=i(838e3),n=i(808611),l=i(910155),r=i(140049),s=i(929463),o=i(641486);let d={filterStatus:["OPENING"],list:[],map:{}};function c(e,t){var i,a,n,l,r,s,o,c;switch(t.type){case"SET_FILTER_STATUS":return{...e,filterStatus:t.payload};case"SET_LIST":{let i={};return t.payload.forEach(e=>{i[e.id]=e}),{...e,list:t.payload,map:i}}case"SET_REPLIES":{let{commentId:i,replies:a}=t.payload,n={...e.map};return n[i]&&(n[i].children=a),{...e,map:n}}case"UPSERT_COMMENT":{let i=t.payload;if(e.filterStatus.includes("OPENING")){let t={...e.map,[i.id]:i},a=[i,...e.list];return{...e,map:t,list:a}}return e}case"UPSERT_REPLIES":{let n=t.payload,l={...e.map},r=l[n.parentId];if(r)return r.children=[...null!=(i=r.children)?i:[],n],r.replyCount=(null!=(a=r.replyCount)?a:0)+1,{...e,map:l};return e}case"SAVE_UPDATE_COMMENT":{let i=t.payload,a={...e.map},r=[...e.list],s=r.findIndex(e=>e.id===i.id);if(s>-1){let t={...i,replyCount:null!=(n=a[i.id].replyCount)?n:0,children:null!=(l=a[i.id].children)?l:[]};return r[s]=t,a[i.id]=t,{...e,map:a,list:r}}return e}case"RESOLVE_COMMENT":{let i=t.payload,a={...e.map},n=[...e.list],l=n.findIndex(e=>e.id===i.id);if(l>-1)if(!e.filterStatus.includes("RESOLVED"))return n.splice(l,1),delete a[i.id],{...e,map:a,list:n};else{let t={...i,replyCount:null!=(r=a[i.id].replyCount)?r:0,children:null!=(s=a[i.id].children)?s:[]};return n[l]=t,a[i.id]=t,{...e,map:a,list:n}}return e}case"SAVE_UPDATE_REPLY":{let i=t.payload,a={...e.map},n=a[i.parentId];if(n)return n.children=null==(o=n.children)?void 0:o.map(e=>e.id===i.id?i:e),{...e,map:a};return e}case"DELETE_COMMENT":{let i=t.payload,a=e.list.filter(e=>e.id!==i),n={...e.map};return delete n[i],{...e,list:a,map:n}}case"DELETE_REPLY":{let{commentId:i,parentId:a}=t.payload,n={...e.map},l=n[a];if(l)return l.children=null==(c=l.children)?void 0:c.filter(e=>e.id!==i),l.replyCount&&(l.replyCount=l.replyCount-1),{...e,map:n};return e}case"RESET":return d;default:return e}}let{ContextProvider:u,useContextStore:p}=(0,l.B)(),m=p;function h(e){let{children:t}=e,i=function(){let[e,t]=(0,o.useReducer)(c,d);return{...e,setFilterStatus:(0,r.A)(e=>{t({type:"SET_FILTER_STATUS",payload:e})}),fetchProjectComments:(0,r.A)(async(e,i,a)=>{let l=await (0,n.n_)(e,i,a);if(l.success){var r;t({type:"SET_LIST",payload:null!=(r=l.data)?r:[]})}return l}),createProjectComment:(0,r.A)(async(e,i,a)=>{try{let l=await (0,n.vt)(e,i,a);return l.success&&l.data&&(l.data.parentId?t({type:"UPSERT_REPLIES",payload:l.data}):t({type:"UPSERT_COMMENT",payload:l.data})),l}catch(e){throw e}}),updateProjectComment:(0,r.A)(async(e,i,a,l)=>{try{let r=await (0,n.yo)(e,i,a,l);return r.success&&r.data&&(r.data.parentId?t({type:"SAVE_UPDATE_REPLY",payload:r.data}):t({type:"SAVE_UPDATE_COMMENT",payload:r.data})),r}catch(e){throw e}}),resolveProjectComment:(0,r.A)(async(e,i,a)=>{let l=await (0,n.yo)(e,i,a,{status:"RESOLVED"});return l.success&&l.data&&t({type:"RESOLVE_COMMENT",payload:l.data}),l}),deleteProjectComment:(0,r.A)(async(e,i,a,l)=>{try{let r=await (0,n.Tu)(e,i,a);return r.success&&(l?t({type:"DELETE_REPLY",payload:{commentId:a,parentId:l}}):t({type:"DELETE_COMMENT",payload:a})),r}catch(e){throw e}}),fetchReplies:(0,r.A)(async(e,i,a)=>{let l=s.Ay.loading("Loading...");try{let l=await (0,n.E6)(e,i,a);if(l.success){var r;t({type:"SET_REPLIES",payload:{commentId:a,replies:null!=(r=l.data)?r:[]}})}return l}finally{l()}})}}();return(0,a.jsx)(u,{value:i,children:t})}},155084:function(e,t,i){"use strict";i.d(t,{A:()=>p});var a=i(838e3),n=i(838487),l=i.n(n),r=i(163808),s=i(276869),o=i(641486),d=i.n(o);let c={"right-side":"right-side-O_nE2p",rightSide:"right-side-O_nE2p","right-side-tab-nav":"right-side-tab-nav-iZmKCZ",rightSideTabNav:"right-side-tab-nav-iZmKCZ","right-side-panel":"right-side-panel-nmQpiF",rightSidePanel:"right-side-panel-nmQpiF"},{Text:u}=r.A,p=e=>{var t,i;let{visible:n,items:r,rightSidebarTabKey:p}=e,[m,h]=(0,o.useState)(null==(t=Object.values(r)[0])?void 0:t.key);return(0,o.useEffect)(()=>{p&&h(p)},[p]),(0,a.jsxs)("div",{className:l()(c["right-side"],{flex:n,hidden:!n}),children:[(0,a.jsx)(s.A,{className:l()(c["right-side-tab-nav"]),animated:!1,simpleTab:!0,borderPane:!0,size:"small",tabBarExtraContent:(0,a.jsx)(u,{className:"font-size-base font-weight-400 text-right",style:{color:"var(--ui-disabled-color)"},children:null==(i=r[m])?void 0:i.title}),onTabClick:e=>{var t,i;h(e),null==(t=(i=r[e]).onSelect)||t.call(i)},activeKey:m,items:Object.keys(r).filter(e=>!0!==r[e].hidden).map(e=>({label:r[e].icon,key:e,children:null}))}),(0,a.jsx)("div",{className:l()(c["right-side-panel"],c["right-side-panel-content"],"flex-1 w-full"),children:d().isValidElement(r[m].children)?d().cloneElement(r[m].children,{sidebarVisible:n}):r[m].children})]})}},31768:function(e,t,i){"use strict";i.d(t,{cD:()=>ey,yv:()=>eg,Ay:()=>eA});var a=i(838e3),n=i(641486);let l=e=>(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:17,fill:"none",viewBox:"0 0 16 17",...e,children:[(0,a.jsxs)("g",{clipPath:"url(#facebook-ico_svg__a)",children:[(0,a.jsx)("path",{fill:"url(#facebook-ico_svg__b)",d:"M.666 8.5c0-2.488 0-3.732.462-4.691a4.67 4.67 0 0 1 2.18-2.18c.96-.462 2.203-.462 4.691-.462s3.732 0 4.692.462a4.67 4.67 0 0 1 2.18 2.18c.462.96.462 2.203.462 4.691s0 3.732-.463 4.692a4.67 4.67 0 0 1-2.18 2.18c-.959.461-2.203.461-4.69.461-2.489 0-3.732 0-4.692-.462a4.67 4.67 0 0 1-2.18-2.18c-.462-.96-.462-2.203-.462-4.69"}),(0,a.jsx)("path",{fill:"#fff",d:"m10.54 10.933.326-2.07H8.828V7.521c0-.567.284-1.119 1.197-1.119h.927V4.64s-.841-.14-1.645-.14c-1.679 0-2.775.992-2.775 2.786v1.577H4.666v2.07h1.866v5.004a7.6 7.6 0 0 0 2.296 0v-5.004z",style:{fill:"#fff",fillOpacity:1}})]}),(0,a.jsxs)("defs",{children:[(0,a.jsxs)("linearGradient",{id:"facebook-ico_svg__b",x1:7.999,x2:7.999,y1:1.167,y2:15.79,gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:"#18ACFE",style:{stopColor:"#18acfe",stopColor:"color(display-p3 .0941 .6745 .9961)",stopOpacity:1}}),(0,a.jsx)("stop",{offset:1,stopColor:"#0163E0",style:{stopColor:"#0163e0",stopColor:"color(display-p3 .0039 .3882 .8784)",stopOpacity:1}})]}),(0,a.jsx)("clipPath",{id:"facebook-ico_svg__a",children:(0,a.jsx)("path",{fill:"#fff",d:"M0 0h16v16H0z",style:{fill:"#fff",fillOpacity:1},transform:"translate(0 .5)"})})]})]}),r=e=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:14,height:14,fill:"none",viewBox:"0 0 14 14",...e,children:(0,a.jsx)("path",{fill:"#667085",fillRule:"evenodd",d:"M4.065 1.75h5.87c.256 0 .477 0 .66.012.192.014.385.042.575.121.428.178.77.519.947.947.078.19.107.383.12.575.013.183.013.404.013.66v.018a.583.583 0 0 1-1.167 0c0-.28 0-.46-.01-.598a.7.7 0 0 0-.034-.208.58.58 0 0 0-.316-.316.7.7 0 0 0-.208-.035 10 10 0 0 0-.598-.01H8.604v8.167h.73a.583.583 0 0 1 0 1.167H4.666a.583.583 0 0 1 0-1.167h.729V2.917H4.083c-.28 0-.46 0-.598.01a.7.7 0 0 0-.208.034.58.58 0 0 0-.316.316.7.7 0 0 0-.035.208c-.009.138-.01.319-.01.598a.583.583 0 1 1-1.166 0v-.018c0-.256 0-.477.012-.66a1.8 1.8 0 0 1 .121-.575 1.75 1.75 0 0 1 .947-.947 1.8 1.8 0 0 1 .575-.12 10 10 0 0 1 .66-.013m2.497 1.167v8.166h.875V2.917z",clipRule:"evenodd",style:{fill:"#667085",fill:"color(display-p3 .4 .4392 .5216)",fillOpacity:1}})}),s=e=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:17,fill:"none",viewBox:"0 0 16 17",...e,children:(0,a.jsx)("path",{fill:"#0C111D",fillRule:"evenodd",d:"M6.329 8.618 1.334 2.264H5.29L8.374 6.19l3.294-3.91h2.179l-4.42 5.252 5.24 6.675h-3.944L7.384 9.961 3.82 14.196H1.63zm4.969 4.413L3.76 3.44h.955l7.528 9.59z",clipRule:"evenodd",style:{fill:"#0c111d",fill:"color(display-p3 .0471 .0667 .1137)",fillOpacity:1}})}),o=i.p+"static/image/x-sharing-preview.ccc43bd9.png";var d=i(325318),c=i(740565),u=i(838487),p=i.n(u),m=i(458184),h=i(671466);let v=e=>{let{formItemName:t,disableRestore:i,onRetry:n,onRestore:l}=e;return(0,a.jsxs)("div",{className:"w-full flex items-start justify-between",children:[(0,a.jsx)("span",{className:"font-size-sm font-weight-400 mt-1",style:{color:"var(--ui-error-color)",lineHeight:"20px"},children:(0,c.hw)({id:"seo.save-failed-and-retry"},{link:(0,a.jsx)("a",{onClick:()=>null==n?void 0:n(t),children:(0,c.hw)({id:"seo.save-failed-and-retry__link"})})})}),(0,a.jsx)(m.A,{type:"text",size:"small",className:p()("font-size-sm font-weight-400 mt-1",{"text-color-secondary":!i}),icon:(0,a.jsx)(h.A,{type:"icon-refresh-ccw-01"}),style:{height:"20px",lineHeight:"20px",padding:"0 4px"},disabled:i,onClick:()=>null==l?void 0:l(t),children:(0,c.hw)({id:"seo.restore"})})]})};var f=i(169508),g=i(744283),y=i(957705),x=i(94222),A=i(835689),j=i(341428),b=i(793594),w=i(689368),S=i(667754),C=i(718180),I=i(140049),N=i(637962),k=i(255529),T=i(554692),M=i(820182),E=i(571202),_=i(618487);let F=e=>(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:14,height:14,fill:"none",viewBox:"0 0 14 14",...e,children:[(0,a.jsx)("path",{fill:"#667085",fillRule:"evenodd",d:"M4.083 5.542a2.917 2.917 0 1 1 5.833 0 2.917 2.917 0 0 1-5.833 0M7 3.792a1.75 1.75 0 1 0 0 3.5 1.75 1.75 0 0 0 0-3.5",clipRule:"evenodd",style:{fill:"#667085",fill:"color(display-p3 .4 .4392 .5216)",fillOpacity:1}}),(0,a.jsx)("path",{fill:"#667085",fillRule:"evenodd",d:"m2.7 11.764.021.018A6.4 6.4 0 0 0 7 13.417a6.4 6.4 0 0 0 4.299-1.653 6.417 6.417 0 1 0-8.599 0M1.75 7a5.25 5.25 0 1 1 9.252 3.398A2.91 2.91 0 0 0 8.75 9.334h-3.5a2.91 2.91 0 0 0-2.253 1.064A5.23 5.23 0 0 1 1.75 7m8.4 4.2A5.23 5.23 0 0 1 7 12.25a5.23 5.23 0 0 1-3.15-1.05c.319-.425.828-.7 1.4-.7h3.5c.572 0 1.08.275 1.4.7",clipRule:"evenodd",style:{fill:"#667085",fill:"color(display-p3 .4 .4392 .5216)",fillOpacity:1}})]});var D=i(184406),R=i(351885);let O="doc-info-jJucGs",P="doc-info-title-LJheDj",L="doc-info-list-dd3EJY",$="doc-info-list-icon-pOYbCv",B="doc-info-list-label-VzyFbw",z="doc-info-list-label__text-q5XbEA",U="doc-info-list-value-YzMZAo",H="doc-info-divider-YCneAy",V=e=>{let{relatedId:t,relatedType:i}=e,l=(0,y.Ay)(e=>"DOC"===i?e.docMap[t]:null),r=(0,w.Ay)(e=>"CUSTOM_ENDPOINT"===i?e.customEndpoint.map[t]:null),{content:s="",createdAt:o="",updatedAt:d="",creatorId:u,editorId:m}=(0,n.useMemo)(()=>"CUSTOM_ENDPOINT"===i?{content:null==r?void 0:r.content,createdAt:null==r?void 0:r.createdAt,updatedAt:null==r?void 0:r.updatedAt,creatorId:null==r?void 0:r.createdById,editorId:null==r?void 0:r.updatedById}:l||{},[l,r,i]),v=(0,n.useMemo)(()=>[{icon:(0,a.jsx)(h.A,{type:"icon-clock",size:14,className:$}),label:(0,c.hw)({id:"createdAt"}),value:(0,R.HF)(o)},{icon:(0,a.jsx)(h.A,{type:"icon-revision-history1",size:14,className:$}),label:(0,c.hw)({id:"updatedAt"}),value:(0,R.HF)(d)},{icon:(0,a.jsx)(F,{width:"14",height:"14",className:$}),label:(0,c.hw)({id:"createdBy"}),value:u?(0,a.jsx)(D.A,{id:u}):null},{icon:(0,a.jsx)(h.A,{type:"icon-user-edit1",size:14,className:$}),label:(0,c.hw)({id:"updatedBy"}),value:m?(0,a.jsx)(D.A,{id:m}):null},{icon:(0,a.jsx)(h.A,{type:"icon-type-01",size:14,className:$}),label:(0,c.hw)({id:"seo.doc.wordCount"}),value:(e=>{let t=e.match(/[a-zA-Z0-9_\u0392-\u03c9\u00c0-\u00ff\u0600-\u06ff\u0400-\u04ff]+|[\u4e00-\u9fff\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g),i=0;if(!t)return 0;for(let e=0;e<t.length;e++)t[e].charCodeAt(0)>=19968?i+=t[e].length:i+=1;return i})(s)}],[s,o,u,m,d]);return["DOC","CUSTOM_ENDPOINT"].includes(i)?(0,a.jsxs)("div",{className:p()(O,"w-full"),children:[(0,a.jsx)("div",{className:p()(P,"mb-2"),children:(0,c.hw)({id:"baseInfo"})}),v.map(e=>{let{icon:t,label:i,value:n}=e;return(0,a.jsxs)("div",{className:p()("flex justify-between items-center",L),children:[(0,a.jsxs)("div",{className:p()("flex items-center",B),children:[t,(0,a.jsx)("span",{className:z,children:i})]}),(0,a.jsx)("span",{className:p()("flex-1",U),children:n})]},i)}),(0,a.jsx)("div",{className:p()(H)})]}):null};var K=i(877789),q=i(52940);let G={"basic-settings":"basic-settings-BCcThc",basicSettings:"basic-settings-BCcThc","basic-settings-title":"basic-settings-title-aUuJhy",basicSettingsTitle:"basic-settings-title-aUuJhy","basic-settings-list":"basic-settings-list-n22A0O",basicSettingsList:"basic-settings-list-n22A0O","basic-settings-list-icon":"basic-settings-list-icon-KlxCus",basicSettingsListIcon:"basic-settings-list-icon-KlxCus","basic-settings-list-label":"basic-settings-list-label-uRf66F",basicSettingsListLabel:"basic-settings-list-label-uRf66F","basic-settings-list-label__text":"basic-settings-list-label__text-QxqHND",basicSettingsListLabelText:"basic-settings-list-label__text-QxqHND","basic-settings-list-value":"basic-settings-list-value-qLkXm9",basicSettingsListValue:"basic-settings-list-value-qLkXm9","basic-settings-divider":"basic-settings-divider-Wa4rIm",basicSettingsDivider:"basic-settings-divider-Wa4rIm"},W=e=>{let{moduleId:t,relatedId:i,relatedType:l,parentFolderId:r,fieldValidator:s}=e,o=["DOC","API_FOLDER","HTTP_API"].includes(l),u=["DOC","HTTP_API","CUSTOM_ENDPOINT","WEB_SOCKET_API"].includes(l),m=(0,n.useMemo)(()=>({DOC:"DOC",API_FOLDER:"API_FOLDER",HTTP_API:"HTTP_API"})[l],[l]);return(0,a.jsxs)("div",{className:p()(G["basic-settings"],"w-full"),children:[(0,a.jsx)("div",{className:p()(G["basic-settings-title"],"mb-2"),children:(0,c.hw)({id:"seo.basicSetting"})}),o&&(0,a.jsxs)("div",{className:p()("flex justify-between items-center",G["basic-settings-list"]),children:[(0,a.jsxs)("div",{className:p()("flex items-center",G["basic-settings-list-label"]),children:[(0,a.jsx)(h.A,{type:"icon-eye",size:14,color:"var(--ui-text-color-secondary)"}),(0,a.jsx)("span",{className:G["basic-settings-list-label__text"],children:(0,c.hw)({id:"api.management.tabTitle.documentation.settings.visibility.title"})})]}),(0,a.jsx)("div",{className:p()("flex-1",G["basic-settings-list-value"]),children:(0,a.jsx)(k.A.Item,{className:"w-full",name:"visibility",validateTrigger:["onChange","onSubmit"],rules:[{validateTrigger:["onChange","onSubmit"],validator:s}],children:(0,a.jsx)(d.y,{permission:g.o.ENDPOINT_ENDPOINT_CDU,children:(0,a.jsx)(q.Ay,{className:G["overview-header__visibility"],entityId:i,entityType:m,parentId:r,moduleId:t,variant:"text",suffixIcon:null})})})})]},"visibility"),u&&(0,a.jsxs)("div",{className:p()("flex justify-between items-center",G["basic-settings-list"]),children:[(0,a.jsxs)("div",{className:p()("flex items-center",G["basic-settings-list-label"]),children:[(0,a.jsx)(h.A,{type:"icon-tag",size:14,color:"var(--ui-text-color-secondary)"}),(0,a.jsx)("span",{className:G["basic-settings-list-label__text"],children:(0,c.hw)({id:"api.label.tags"})})]}),(0,a.jsx)("div",{className:p()("flex-1",G["basic-settings-list-value"]),children:(0,a.jsx)(k.A.Item,{className:"w-full",name:"tags",validateTrigger:["onChange","onSubmit"],rules:[{validateTrigger:["onChange","onSubmit"],validator:s}],children:(0,a.jsx)(d.y,{permission:g.o.ENDPOINT_ENDPOINT_CDU,children:(0,a.jsx)(K.$,{className:"w-full",placeholder:(0,c.hw)({id:"message.customApiFields.label.tooltip.multipleTag"}),variant:"text",suffixIcon:null})})})})]},"tags"),(0,a.jsx)("div",{className:p()(G["basic-settings-divider"])})]})},J={"seo-settings":"seo-settings-zUUa61",seoSettings:"seo-settings-zUUa61","seo-settings-content":"seo-settings-content-d9DF2A",seoSettingsContent:"seo-settings-content-d9DF2A","seo-settings-url":"seo-settings-url-huIfLF",seoSettingsUrl:"seo-settings-url-huIfLF","seo-settings-url-preview":"seo-settings-url-preview-Soz_Yv",seoSettingsUrlPreview:"seo-settings-url-preview-Soz_Yv","seo-settings-meta-title":"seo-settings-meta-title-rb08Pq",seoSettingsMetaTitle:"seo-settings-meta-title-rb08Pq","seo-settings-block":"seo-settings-block-dtjTUF",seoSettingsBlock:"seo-settings-block-dtjTUF","seo-settings-block-title":"seo-settings-block-title-nB0_Yy",seoSettingsBlockTitle:"seo-settings-block-title-nB0_Yy","seo-settings-block-list":"seo-settings-block-list-UIzbVt",seoSettingsBlockList:"seo-settings-block-list-UIzbVt","seo-settings-block-list-icon":"seo-settings-block-list-icon-ON3p8D",seoSettingsBlockListIcon:"seo-settings-block-list-icon-ON3p8D","seo-settings-block-list-label":"seo-settings-block-list-label-eRlfVm",seoSettingsBlockListLabel:"seo-settings-block-list-label-eRlfVm","seo-settings-block-list-label__text":"seo-settings-block-list-label__text-N9MmX_",seoSettingsBlockListLabelText:"seo-settings-block-list-label__text-N9MmX_","seo-settings-block-list-label__note":"seo-settings-block-list-label__note-lmv1yu",seoSettingsBlockListLabelNote:"seo-settings-block-list-label__note-lmv1yu","seo-settings-block-list-value":"seo-settings-block-list-value-BNErY3",seoSettingsBlockListValue:"seo-settings-block-list-value-BNErY3","seo-settings-block-divider":"seo-settings-block-divider-T87LnB",seoSettingsBlockDivider:"seo-settings-block-divider-T87LnB","seo-settings-preview-card-favicon":"seo-settings-preview-card-favicon-QXsHZp",seoSettingsPreviewCardFavicon:"seo-settings-preview-card-favicon-QXsHZp","seo-settings-preview-card-url":"seo-settings-preview-card-url-bBZXjq",seoSettingsPreviewCardUrl:"seo-settings-preview-card-url-bBZXjq","seo-settings-preview-card-meta-title":"seo-settings-preview-card-meta-title-rfTUYD",seoSettingsPreviewCardMetaTitle:"seo-settings-preview-card-meta-title-rfTUYD","seo-settings-preview-card-meta-description":"seo-settings-preview-card-meta-description-uDHjDx",seoSettingsPreviewCardMetaDescription:"seo-settings-preview-card-meta-description-uDHjDx","seo-settings-preview-card":"seo-settings-preview-card-NIgsWn",seoSettingsPreviewCard:"seo-settings-preview-card-NIgsWn","seo-settings-meta-social-card":"seo-settings-meta-social-card-bVce7Q",seoSettingsMetaSocialCard:"seo-settings-meta-social-card-bVce7Q","seo-settings-meta-social-card-content-title":"seo-settings-meta-social-card-content-title-W951J3",seoSettingsMetaSocialCardContentTitle:"seo-settings-meta-social-card-content-title-W951J3","seo-settings-meta-social-card-content-description":"seo-settings-meta-social-card-content-description-lTtclf",seoSettingsMetaSocialCardContentDescription:"seo-settings-meta-social-card-content-description-lTtclf","seo-settings-bottom":"seo-settings-bottom-JQ5Dt3",seoSettingsBottom:"seo-settings-bottom-JQ5Dt3","mb-4":"mb-4-kQd4Ps",mb4:"mb-4-kQd4Ps","slug-form-item-conflict":"slug-form-item-conflict-zW1XOa",slugFormItemConflict:"slug-form-item-conflict-zW1XOa"};var Y=i(632240),Z=i(743190),Q=i(296147),X=i(398380);let ee="secondary-pane-cnSTN1",et="secondary-pane-nav-OD4Tl9",ei="secondary-pane-nav__text-CWmSvs",ea="secondary-pane-block-lJR6K_",en="secondary-pane-block-title-C0Jozh",el="secondary-pane-block-list-nUEI4_",er="secondary-pane-block-list-label-H3gkdA",es="secondary-pane-block-list-label__text-k7rTPI",eo="secondary-pane-block-list-value-bFprRT",ed="secondary-pane-block-divider-OojZyy",ec="secondary-pane-upload-selector-upload-X2bsxN",eu="secondary-pane-upload-selector-upload-button-DXxFlr",ep="secondary-pane-upload-selector-preview-owWBLV",em="secondary-pane-upload-selector-preview-trash-puwuRv",eh="secondary-pane-preview-card-hd6rjI",ev=e=>{let{value:t,onChange:i,secondaryPaneKey:n}=e;return(0,a.jsx)(a.Fragment,{children:t?(0,a.jsxs)("div",{className:ep,children:[(0,a.jsx)("img",{src:t,alt:""}),(0,a.jsx)(m.A,{className:em,icon:(0,a.jsx)(h.A,{type:"icon-trash-04",size:16}),onClick:()=>{null==i||i("")}})]}):(0,a.jsx)("div",{className:ec,children:(0,a.jsx)(d.y,{permission:g.o.ENDPOINT_ENDPOINT_CDU,children:(0,a.jsx)(Y.A,{uploadType:"apidoc",content:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)("div",{className:"mb-3",children:(0,c.hw)({id:"upload.instruction"})}),(0,a.jsxs)(m.A,{className:eu,icon:(0,a.jsx)(h.A,{type:"icon-plus",size:16}),children:["TWITTER"===n&&(0,a.jsx)(a.Fragment,{children:(0,c.hw)({id:"seo.metaSocial.twitter.image"})}),"FACEBOOK"===n&&(0,a.jsx)(a.Fragment,{children:(0,c.hw)({id:"seo.metaSocial.facebook.image"})})]})]}),onSuccess:e=>{null==i||i(e)}})})})})},ef=e=>{let{form:t,secondaryPaneKey:i,setSecondaryPaneKey:l,placeholderData:r,fieldValidator:s}=e,o=k.A.useWatch(["metaSocial",eg.TWITTER.key],t),u=k.A.useWatch(["metaSocial",eg.FACEBOOK.key],t),v=(0,n.useMemo)(()=>"TWITTER"===i?o:u,[i,o,u]),f=(0,X.upperFirst)(eg[i].title);return(0,a.jsxs)("div",{className:ee,children:[(0,a.jsxs)("div",{onClick:()=>l(null),className:p()(et,"w-full cursor-pointer"),children:[(0,a.jsx)(m.A,{className:"mr-2",type:"text",icon:(0,a.jsx)(h.A,{type:"icon-left-md",size:16})}),(0,a.jsx)("span",{className:ei,children:f})]}),(0,a.jsx)(Z.A,{className:"my-0"}),(0,a.jsxs)("div",{className:p()(ea,"w-full"),children:[(0,a.jsx)("div",{className:p()(en,"mb-2"),children:(0,c.hw)({id:"setting"})}),(0,a.jsx)(k.A.Item,{name:["metaSocial",eg[i].key,"image"],className:"w-full",validateTrigger:["onChange","onSubmit"],rules:[{validateTrigger:["onChange","onSubmit"],validator:s}],children:(0,a.jsx)(ev,{form:t,secondaryPaneKey:i,fieldValidator:s})}),(0,a.jsxs)("div",{className:p()("flex justify-between items-center mt-5",el),children:[(0,a.jsx)("div",{className:p()("flex items-center",er),children:(0,a.jsx)("span",{className:es,children:`${f} title`})}),(0,a.jsx)("div",{className:p()("flex-1",eo),children:(0,a.jsx)(k.A.Item,{name:["metaSocial",eg[i].key,"title"],className:"w-full",validateTrigger:["onBlur","onSubmit"],rules:[{validateTrigger:["onBlur","onSubmit"],validator:s}],children:(0,a.jsx)(d.y,{permission:g.o.ENDPOINT_ENDPOINT_CDU,children:(0,a.jsx)(M.A,{className:"w-full",placeholder:r.title,variant:"text",onClick:()=>{(0,b.IL)("app_sidebar_button_click_input",{index:`${f} title`})}})})})})]}),(0,a.jsxs)("div",{className:p()("flex justify-between items-center",el),children:[(0,a.jsx)("div",{className:p()("flex items-center",er),children:(0,a.jsx)("span",{className:es,children:`${f} description`})}),(0,a.jsx)("div",{className:p()("flex-1",eo),children:(0,a.jsx)(k.A.Item,{name:["metaSocial",eg[i].key,"description"],className:"w-full",validateTrigger:["onBlur","onSubmit"],rules:[{validateTrigger:["onBlur","onSubmit"],validator:s}],children:(0,a.jsx)(d.y,{permission:g.o.ENDPOINT_ENDPOINT_CDU,children:(0,a.jsx)(M.A.TextArea,{className:"w-full",autoSize:{minRows:1,maxRows:5},rows:1,autoComplete:"off",size:"middle",placeholder:r.description,onClick:()=>{(0,b.IL)("app_sidebar_button_click_input",{index:`${f} description`})}})})})})]}),(0,a.jsx)("div",{className:p()(ed)})]}),(0,a.jsxs)("div",{className:p()(ea,"w-full"),children:[(0,a.jsx)("div",{className:p()(en,"mb-2"),children:(0,c.hw)({id:"apiDoc.preview"})}),(0,a.jsx)(N.A,{className:eh,cover:(0,a.jsx)(Q.A,{width:"100%",height:"TWITTER"===i?140:void 0,src:(null==v?void 0:v.image)||r["TWITTER"===i?"twitterImage":"facebookImage"],preview:!1,placeholder:!0}),children:eg[i].previewContentRender({path:t.getFieldValue("path"),placeholderData:r,...v})})]})]})},eg={TWITTER:{key:"twitter",icon:()=>(0,a.jsx)(s,{}),title:"X/Twitter",description:(0,c.hw)({id:"seo.metaSocial.twitter.tip"}),img:"",previewContentRender:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{title:"",description:"",path:"",placeholderData:{title:"",description:""}},{title:t,description:i,placeholderData:n}=e;return(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:J["seo-settings-preview-card-meta-title"],children:t||n.title}),(0,a.jsx)("span",{className:J["seo-settings-preview-card-meta-description"],children:i||n.description})]})}},FACEBOOK:{key:"facebook",icon:()=>(0,a.jsx)(l,{}),title:"Facebook",description:(0,c.hw)({id:"seo.metaSocial.facebook.tip"}),img:"",previewContentRender:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{title:"",description:"",path:"",placeholderData:{title:"",description:""}},{title:t,description:i,placeholderData:n}=e;return(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:p()(J["seo-settings-preview-card-meta-title"],"truncate"),children:t||n.title}),(0,a.jsx)("span",{className:p()(J["seo-settings-preview-card-meta-description"],"truncate"),children:i||n.description})]})}}},ey=e=>{if(!e)return"";let t=e.replace(/\/+/g,"/");return"/"===t.charAt(0)&&(t=t.slice(1)),t},ex=e=>{let{icon:t,title:i,description:n,onClick:l}=e;return(0,a.jsxs)(N.A,{className:p()(J["seo-settings-meta-social-card"],"cursor-pointer"),onClick:l,children:[(0,a.jsxs)("div",{className:J["seo-settings-meta-social-card-content"],children:[(0,a.jsxs)("div",{className:p()(J["seo-settings-meta-social-card-content-title"],"flex justify-start items-center"),children:[t(),(0,a.jsx)("span",{className:"flex-1 truncate",style:{marginLeft:6},children:i})]}),(0,a.jsx)("p",{className:J["seo-settings-meta-social-card-content-description"],children:n})]}),(0,a.jsx)("div",{className:"flex justify-center items-center",children:(0,a.jsx)(h.A,{type:"icon-right-md1",size:16})})]})},eA=e=>{let{projectId:t,relatedId:i,relatedType:l,resourceName:s,projectName:u,parentFolderId:m,moduleId:F}=e,[D]=k.A.useForm(),R=k.A.useWatch("path",D),O=k.A.useWatch("title",D),P=k.A.useWatch("description",D),L="DOC"===l,$="API_FOLDER"===l,B="HTTP_API"===l,z="WEB_SOCKET_API"===l,U="CUSTOM_ENDPOINT"===l,H=(0,w.Ay)(e=>{var t;let{project:i}=e;return null==(t=i.currentProject)?void 0:t.icon}),K=(0,_.useModel)("apiDoc",e=>{var t;let{publishedProject:i}=e;return null==i||null==(t=i.advancedSettings)?void 0:t.favicon}),q=(0,w.Ay)(e=>{var t;let{apiDetail:a}=e;return B&&(null==(t=a.apiDetailMap)?void 0:t[i])}),G=(0,w.Ay)(e=>{var t;let{webSocketApiDetail:a}=e;return z&&(null==(t=a.apiDetailMap)?void 0:t[i])}),Y=(0,w.Ay)(e=>{var t;let{customEndpoint:a}=e;return U&&(null==(t=a.map)?void 0:t[i])}),Z=(0,y.Ay)(e=>{var t;return L&&(null==(t=e.docMap)?void 0:t[i])}),Q=(0,w.Ay)(e=>{var t;let{apiDetailFolder:a}=e;return $&&(null==(t=a.apiDetailFolderMap)?void 0:t[i])}),X=(0,n.useMemo)(()=>$&&Q?{visibility:Q.visibility||"INHERITED",parentFolderId:Q.parentId}:B&&q?{tags:q.tags,visibility:q.visibility||"INHERITED",parentFolderId:q.folderId}:L&&Z?{tags:Z.tags,visibility:Z.visibility||"INHERITED",parentFolderId:Z.folderId}:z&&G?{tags:G.tags,parentFolderId:G.folderId}:U&&Y?{tags:Y.tags,parentFolderId:Y.folderId}:void 0,[$,Q,B,q,L,Z,z,G,U,Y]),ee=(0,_.useModel)("clientConfig",e=>{let{dynamicConfig:t}=e;return(null==t?void 0:t.apidocBuiltinPrefixPath)||{}}),[et,ei]=(0,n.useState)(null),ea={path:"",title:"",description:"",keywords:"",customMeta:"",metaSocial:{twitter:{title:"",description:"",image:""},facebook:{title:"",description:"",image:""}},tags:null==X?void 0:X.tags,visibility:(null==X?void 0:X.visibility)||"INHERITED"},[en,el]=(0,n.useState)(ea);(0,x.CH)();let er=(0,_.useModel)("apiDoc",e=>{var t;return null==(t=e.publishedProject)?void 0:t.docRedirectRules}),es=(0,n.useMemo)(()=>er||[],[er]),eo=(0,n.useMemo)(()=>{var e,t;return{title:`${s} - ${u}`,description:`${s} - ${u}`,keywords:(e=u,t=s,({CN:{keywords:`${t?`${t},`:""}${e},,API,`},GLOBAL:{keywords:`${t?`${t},`:""}${e},API Design, API Specification, API Test, API Documentation, API Mock`}})[f.Gi].keywords),twitterImage:o,facebookImage:`${ee}/facebook.png`,customMeta:`e.g.
[
      {"name": "robots", "content": "noindex"}
]`}},[ee,u,s]),{run:ed}=(0,S.dy)(j.k3,{manual:!0,onSuccess(e){e&&(el(t=>({...t,...e})),D.setFieldsValue({...e,...X}))}}),{run:ec}=(0,S.eB)(async e=>{if(i){if("DOC"===l)return await (0,y.A7)(i,e);else if("HTTP_API"===l)return await (0,_.updateHttpApi)({...e,id:i});else if("API_FOLDER"===l)return await (0,_.dispatchUpdateHttpFolder)({...e,id:i});else if("WEB_SOCKET_API"===l)return await (0,_.dispatchUpdateWebSocketApi)({...e,id:i},void 0,{isHideLoading:!0,isHideSuccessMessage:!0});else if("CUSTOM_ENDPOINT"===l)return await (0,_.dispatchUpdateCustomEndpoint)({...e,id:i},void 0,{isHideLoading:!0,isHideSuccessMessage:!0})}},async()=>{if("HTTP_API"===l)return(0,_.dispatchFetchHttpApiList)();if("API_FOLDER"===l)return(0,_.dispatchFetchApiFolderList)();if("WEB_SOCKET_API"===l)return(0,_.dispatchFetchWebSocketApiList)();else if("CUSTOM_ENDPOINT"===l)return(0,_.dispatchFetchCustomEndpointList)()},void 0,{isReturnAll:!0,showLoading:!1,isHideSuccessMsg:!0,throwOnError:!0}),{run:eu}=(0,S.ZO)(j.cq,()=>ed({projectId:t,relatedId:i,relatedType:l}),void 0,{isReturnAll:!0,showLoading:!1,isHideSuccessMsg:!0,throwOnError:!0}),{run:ep}=(0,S.eB)(j.v7,()=>ed({projectId:t,relatedId:i,relatedType:l}),void 0,{isReturnAll:!0,showLoading:!1,isHideSuccessMsg:!0,throwOnError:!0});(0,C.A)(()=>{ed({projectId:t,relatedId:i,relatedType:l}),X&&D.setFieldsValue(X)}),(0,n.useEffect)(()=>{X&&el(e=>({...e,...X}))},[X,D]);let em=async e=>{if(Array.isArray(e)&&0===e.length)return;let a=D.getFieldValue(e),n={},r=null!=en?en:{};if(Array.isArray(e)){var s,o;let t,i,a=null!=(s=r[e[0]])?s:{};for(let l=0;l<e.length;l++){let r=e[l];0===l&&(n[e[0]]=a),t=0===l?a:null!=(o=null==t?void 0:t[r])?o:{},l<e.length-1&&(i=t)}let l=D.getFieldValue(e);if(t===l)return;i[e[e.length-1]]=l}else if((n={[e]:a})[e]===r[e])return;let d="tags"!==e&&"visibility"!==e,c={...n,id:en.id,projectId:t,relatedId:i,relatedType:l};if(d)if(en.id)return await ep(c);else return await eu(c);return await ec(n)},eh=(0,I.A)(e=>{e&&D.resetFields([e])}),ev=(0,I.A)(e=>{D.validateFields([e])}),eA=(0,I.A)(async(e,t)=>{let n=ey(t);if(n){if(n&&!n.match(/^[a-z0-9\/_-]*$/))throw Error((0,c.hw)({id:"seo.custom.url.rule.tip"}));if(es.find(e=>e.sourceSlug===n))throw Error((0,c.hw)({id:"seo.custom.url.exists-in-docs-redirect-rules.tip"}));let e=(0,A.c)(n,{relatedId:i,relatedType:l});if(e)throw(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(A.A,{className:"mt-1 w-full",conflictItem:e,verticalMode:!0,style:{maxWidth:"219px"}})})}D.setFieldValue(["path"],n);try{await em("path")}catch(e){if((null==e?void 0:e.errorCode)==="400301")throw Error((0,c.hw)({id:"seo.custom.url.exists.tip"}));throw(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(v,{formItemName:"path",onRestore:eh,onRetry:ev})})}return Promise.resolve()}),ej=(0,I.A)(async(e,t)=>{if(t)try{JSON.parse(t)}catch(e){throw Error()}try{await em("customMeta")}catch(e){throw(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(v,{formItemName:"customMeta",onRestore:eh,onRetry:ev})})}return Promise.resolve()}),eb=(0,I.A)(async(e,t)=>{var i;let n=null!=(i=e.fullField.split("."))?i:e.field.split("."),l=1===n.length?n[0]:n;try{await em(l)}catch(e){throw(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(v,{formItemName:l,onRestore:eh,onRetry:ev})})}return Promise.resolve()}),ew=(0,n.useMemo)(()=>"GLOBAL"===f.Gi||f.Cu,[]),eS=(0,n.useMemo)(()=>({...en}),[en]);return(0,a.jsx)("div",{className:p()("flex flex-col w-full h-full justify-between overflow-y-auto",J["seo-settings"]),children:(0,a.jsxs)(k.A,{name:"seoForm",initialValues:eS,form:D,layout:"vertical",className:"h-full pb-4",children:[!et&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(V,{relatedId:i,relatedType:l}),(0,a.jsx)(W,{moduleId:F,relatedId:i,relatedType:l,parentFolderId:null!=m?m:null==X?void 0:X.parentFolderId,fieldValidator:eb}),(0,a.jsxs)("div",{className:p()(J["seo-settings-block"],"w-full"),children:[(0,a.jsx)("div",{className:p()(J["seo-settings-block-title"],"mb-2"),children:(0,c.hw)({id:"seo.setting"})}),(0,a.jsxs)("div",{className:p()("flex justify-between items-center",J["seo-settings-block-list"]),children:[(0,a.jsxs)("div",{className:p()("whitespace-pre",J["seo-settings-block-list-label"]),children:[(0,a.jsx)(h.A,{type:"icon-slash-divider",size:12,color:"var(--ui-text-color-secondary)"}),(0,a.jsx)("span",{className:p()("whitespace-normal",J["seo-settings-block-list-label__text"]),children:(0,c.hw)({id:"seo.custom.url"})}),(0,a.jsx)(T.A,{title:(0,c.hw)({id:"seo.url.slug.note"}),children:(0,a.jsx)(h.A,{className:J["seo-settings-block-list-label__note"],type:"icon-Info2",size:12,color:"var(--ui-text-color-secondary)"})})]}),(0,a.jsx)("div",{className:p()("flex-1",J["seo-settings-block-list-value"]),children:(0,a.jsx)(k.A.Item,{className:"w-full",name:"path",validateTrigger:["onBlur","onSubmit"],rules:[{validateTrigger:["onBlur","onSubmit"],validator:eA}],children:(0,a.jsx)(d.y,{permission:g.o.ENDPOINT_ENDPOINT_CDU,children:(0,a.jsx)(M.A,{placeholder:"-",onClick:()=>{(0,b.IL)("app_sidebar_button_click_input",{index:"Custom URL"})},variant:"text"})})})})]}),(0,a.jsxs)("div",{className:p()("flex justify-between items-center",J["seo-settings-block-list"]),children:[(0,a.jsxs)("div",{className:p()("flex items-center",J["seo-settings-block-list-label"]),children:[(0,a.jsx)(r,{width:"14",height:"14",color:"var(--ui-text-color-secondary)"}),(0,a.jsx)("span",{className:J["seo-settings-block-list-label__text"],children:(0,c.hw)({id:"seo.setting.meta.title"})})]}),(0,a.jsx)("div",{className:p()("flex-1",J["seo-settings-block-list-value"]),children:(0,a.jsx)(k.A.Item,{className:"w-full",name:"title",validateTrigger:["onBlur","onSubmit"],rules:[{validateTrigger:["onBlur","onSubmit"],validator:eb}],children:(0,a.jsx)(d.y,{permission:g.o.ENDPOINT_ENDPOINT_CDU,children:(0,a.jsx)(M.A,{placeholder:eo.title,variant:"text",onClick:()=>{(0,b.IL)("app_sidebar_button_click_input",{index:"Meta Title"})}})})})})]}),(0,a.jsxs)("div",{className:p()("flex justify-between items-center",J["seo-settings-block-list"]),children:[(0,a.jsxs)("div",{className:p()("flex items-center",J["seo-settings-block-list-label"]),children:[(0,a.jsx)(h.A,{type:"icon-file1",size:14,color:"var(--ui-text-color-secondary)"}),(0,a.jsx)("span",{className:J["seo-settings-block-list-label__text"],children:(0,c.hw)({id:"seo.setting.meta.description"})})]}),(0,a.jsx)("div",{className:p()("flex-1",J["seo-settings-block-list-value"]),children:(0,a.jsx)(k.A.Item,{className:"w-full",name:"description",validateTrigger:["onBlur","onSubmit"],rules:[{validateTrigger:["onBlur","onSubmit"],validator:eb}],children:(0,a.jsx)(d.y,{permission:g.o.ENDPOINT_ENDPOINT_CDU,children:(0,a.jsx)(M.A.TextArea,{autoSize:{minRows:1,maxRows:5},rows:1,autoComplete:"off",size:"middle",placeholder:eo.description,onClick:()=>{(0,b.IL)("app_sidebar_button_click_input",{index:"Meta Description"})}})})})})]}),(0,a.jsxs)("div",{className:p()("flex justify-between items-center",J["seo-settings-block-list"]),children:[(0,a.jsxs)("div",{className:p()("flex items-center",J["seo-settings-block-list-label"]),children:[(0,a.jsx)(h.A,{type:"icon-cursor-click",size:14,color:"var(--ui-text-color-secondary)"}),(0,a.jsx)("span",{className:J["seo-settings-block-list-label__text"],children:(0,c.hw)({id:"seo.setting.keywords"})})]}),(0,a.jsx)("div",{className:p()("flex-1",J["seo-settings-block-list-value"]),children:(0,a.jsx)(k.A.Item,{name:"keywords",className:"w-full",validateTrigger:["onBlur","onSubmit"],rules:[{validateTrigger:["onBlur","onSubmit"],validator:eb}],children:(0,a.jsx)(d.y,{permission:g.o.ENDPOINT_ENDPOINT_CDU,children:(0,a.jsx)(M.A,{className:"w-full",placeholder:eo.keywords,variant:"text",onClick:()=>{(0,b.IL)("app_sidebar_button_click_input",{index:"keywords"})}})})})})]}),(0,a.jsxs)("div",{className:p()("flex justify-between items-center",J["seo-settings-block-list"]),children:[(0,a.jsxs)("div",{className:p()("flex items-center",J["seo-settings-block-list-label"]),children:[(0,a.jsx)(h.A,{type:"icon-Meta",size:14,color:"var(--ui-text-color-secondary)"}),(0,a.jsx)("span",{className:J["seo-settings-block-list-label__text"],children:(0,c.hw)({id:"seo.custom.meta"})})]}),(0,a.jsx)("div",{className:p()("flex-1",J["seo-settings-block-list-value"]),children:(0,a.jsx)(k.A.Item,{className:"w-full",name:"customMeta",validateTrigger:["onBlur","onSubmit"],rules:[{validateTrigger:["onBlur","onSubmit"],validator:ej}],children:(0,a.jsx)(d.y,{permission:g.o.ENDPOINT_ENDPOINT_CDU,children:(0,a.jsx)(M.A.TextArea,{rows:1,autoComplete:"off",size:"middle",placeholder:eo.customMeta})})})})]}),(0,a.jsx)("div",{className:p()(J["seo-settings-block-divider"])})]}),(0,a.jsxs)("div",{className:p()(J["seo-settings-block"],"w-full"),children:[(0,a.jsx)("div",{className:p()(J["seo-settings-block-title"],"mb-2"),children:(0,c.hw)({id:"seo.search.engine.result.preview"})}),(0,a.jsxs)(N.A,{className:J["seo-settings-preview-card"],children:[(0,a.jsxs)("div",{className:p()(J["seo-settings-preview-card-url"],"flex justify-start items-center"),children:[(0,a.jsx)(E.A,{className:J["seo-settings-preview-card-favicon"],shape:"square",size:16,src:K||H}),(0,a.jsx)("span",{className:"flex-1 truncate",children:`https://{{BASE_URL}}/${R}`})]}),(0,a.jsx)("p",{className:p()(J["seo-settings-preview-card-meta-title"],"truncate"),children:O||eo.title}),(0,a.jsx)("p",{className:p()(J["seo-settings-preview-card-meta-description"],"truncate"),children:P||eo.description})]}),ew&&(0,a.jsx)("div",{className:p()(J["seo-settings-block-divider"])})]}),ew&&(0,a.jsxs)("div",{className:p()(J["seo-settings-block"],"w-full"),children:[(0,a.jsx)("div",{className:p()(J["seo-settings-block-title"],"mb-2"),children:(0,c.hw)({id:"seo.metaSocial"})}),Object.entries(eg).map(e=>{let[t,i]=e;return(0,a.jsx)(ex,{icon:i.icon,title:i.title,description:i.description,onClick:()=>ei(t)},t)})]})]}),et&&(0,a.jsx)(ef,{form:D,secondaryPaneKey:et,setSecondaryPaneKey:ei,placeholderData:eo,fieldValidator:eb})]})})}},324565:function(e,t,i){"use strict";i.d(t,{A:()=>A,Z:()=>x});var a=i(838e3),n=i(760912),l=i(740565),r=i(929063),s=i(842765),o=i(674984),d=i(791027),c=i(689368),u=i(662387),p=i(718180),m=i(140049),h=i(138249),v=i(641486),f=i(435685);let{Option:g,OptGroup:y}=h.A,x=o.IE,A=e=>{let{defaultOptionName:t,defaultLabel:i,folderId:o,moduleId:x,value:A,protocol:j="http",...b}=e,{currentEnvironment:w,folderList:S,httpFolderMap:C,rootFolderMap:I}=(0,c.Ay)(e=>{let{environment:t,apiDetailFolder:i}=e;return{currentEnvironment:t.currentEnvironment,folderList:i.list,httpFolderMap:i.apiDetailFolderMap,rootFolderMap:i.rootFolderMap}}),N=(0,d.JV)(x),[k,T]=(0,v.useState)(""),[M,E]=(0,v.useState)(A);(0,u.A)(()=>{E(A)},[A]);let _=(0,v.useMemo)(()=>""===M||N.find(e=>{let{id:t}=e;return t===M})?M:"",[M,N]);(0,p.A)(()=>{S||(0,r.JT)()});let F=(0,v.useMemo)(()=>(function(e){let{servers:t,protocol:i,folderId:a,httpFolderMap:n,rootFolderMap:l,moduleId:r,currentEnvironment:s}=e,{utils:{getRequestBaseUrlModule:{getRequestBaseUrl:o,getSocketioRequestBaseUrl:d,getWebsocketRequestBaseUrl:c}}}=f.baseContainer.getItemsSync(e=>[e.utils]),u={};return t.forEach(e=>{let{id:p}=e;"http"===i?u[p]=o({serverId:p,servers:t,environment:s,folderId:a,folderMap:n||{},rootFolderMap:l||{},moduleId:r}):"socketio"===i?u[p]=d({serverId:p,folderId:a,folderMap:n,rootFolderMap:l||{},moduleId:r,environment:s,servers:t}):u[p]=c({serverId:p,folderId:a,folderMap:n,rootFolderMap:l||{},moduleId:r,environment:s,servers:t})}),u})({servers:N,protocol:j,folderId:o,httpFolderMap:C,rootFolderMap:I,moduleId:x,currentEnvironment:w}),[C,o,x,w,N,I,j]),D=(0,v.useMemo)(()=>(function(e){let{protocol:t,folderId:i,httpFolderMap:a,rootFolderMap:n,moduleId:l,currentEnvironment:r,servers:s}=e,{utils:{getRequestBaseUrlModule:{getRequestBaseUrl:o,getSocketioRequestBaseUrl:d,getWebsocketRequestBaseUrl:c}}}=f.baseContainer.getItemsSync(e=>[e.utils]);return"http"===t?o({serverId:"",servers:s,environment:r,folderId:i,folderMap:a||{},rootFolderMap:n||{},moduleId:l}):"socketio"===t?d({serverId:"",folderId:i,folderMap:a,rootFolderMap:n||{},moduleId:l,environment:r,servers:s}):c({serverId:"",folderId:i,folderMap:a,rootFolderMap:n||{},moduleId:l,environment:r,servers:s})})({protocol:j,folderId:o,httpFolderMap:C,rootFolderMap:I,moduleId:x,currentEnvironment:w,servers:N}),[C,o,x,w,N,I,j]),R=(0,m.A)((e,t)=>{try{var i,a,n;if(!(null==t||null==(i=t.children)?void 0:i.props))return!1;return null==(n=t.children.props["data-name"])||null==(a=n.toLocaleLowerCase)?void 0:a.call(n).includes(e.toLocaleLowerCase())}catch{return!1}}),O=(0,m.A)(e=>{T(e)}),P=(0,m.A)(e=>{E(e),T("")});return(0,a.jsxs)(h.A,{...b,value:_,dropdownMatchSelectWidth:!1,placement:"bottomRight",showSearch:!0,filterOption:R,onSearch:O,onSelect:P,children:[(0,a.jsx)(y,{label:(0,l.hw)({id:"message.defaultSetting"}),children:(0,a.jsx)(g,{value:"",children:i||(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{children:t||(0,a.jsx)(l.sA,{id:"message.inheritParent"})}),(0,a.jsx)("div",{className:"opacity-50 ml-10 truncate",children:D?(0,a.jsxs)(s.A,{children:[D,(null==w?void 0:w.name)?`${null==w?void 0:w.name}`:""]}):(0,a.jsx)(l.sA,{id:"message.inheritParentGroupingSetting"})})]})})},"inherit")}),(0,a.jsx)(y,{label:(0,a.jsx)(l.sA,{id:"message.specifyManually"}),children:N.map(e=>{let{name:t,id:i}=e,l=`${F[i]}${(null==w?void 0:w.name)?`${null==w?void 0:w.name}`:""}`;return(0,a.jsx)(g,{value:i,children:(0,a.jsxs)("div",{className:"flex justify-between max-w-3xl",style:{},"data-name":t,children:[(0,a.jsx)("div",{className:"truncate flex-shrink-0 w-1/3",children:(0,n.Zt)(t,k)}),(0,a.jsx)(s.A,{className:"opacity-50 ml-10",children:l})]})},i)})})]})}},550478:function(e,t,i){"use strict";i.d(t,{A:()=>m});var a=i(838e3),n=i(740565),l=i(793594),r=i(838487),s=i.n(r),o=i(554692),d=i(458184),c=i(743190),u=i(671466);let p=e=>{let{tooltipLabel:t,tooltipAlign:i,tooltipPlacement:n="topRight",tooltipPopupContainer:l,children:r}=e;return(0,a.jsx)(o.A,{placement:n,title:(0,a.jsx)("span",{className:"font-normal",children:t}),getPopupContainer:l,align:i,overlayStyle:{minWidth:"fit-content"},children:r})},m=e=>{let{sideMenuKeys:t=[],toggleRightSidebar:i,isActive:r,relatedType:o,restClassName:m={},renderCollapsibleButtonOnly:h,tooltipPlacement:v,tooltipAlign:f={offset:[10,4]},tooltipPopupContainer:g,...y}=e;if(h)return(0,a.jsx)(p,{tooltipLabel:"HTTP_API"===o?(0,n.hw)({id:"seo.sider.menu"}):(0,n.hw)({id:"seo.sider.menu.doc"}),tooltipAlign:f,tooltipPlacement:v,tooltipPopupContainer:g,relatedType:o,children:(0,a.jsx)(d.A,{type:"text",className:s()("app-text-fg-low",{"app-text-fg-low":!r,...m}),icon:(0,a.jsx)(u.A,{type:"icon-layout-bottom",size:14,color:"var(--ui-disabled-color)"}),onClick:()=>{i("HISTORY"),(0,l.IL)("app_sidebar_button_click")},...y},"SEO-btn")},"SEO");if(!["HTTP_API","DOC"].includes(o),!r){let e={SEO:"icon-Set",HISTORY:"icon-revision-history1",COMMENTS:"icon-Messages",REFERENCE:"icon-route"},h={SEO:"DOC"===o?(0,n.hw)({id:"seo.sider.menu.doc"}):(0,n.hw)({id:"seo.sider.menu.seo-settings"}),HISTORY:(0,n.hw)({id:"seo.sider.menu.change-history"}),REFERENCE:(0,n.hw)({id:"DATA_SCHEMA"===o?"apiSchema.references":"HTTP_API_CASE"===o?"testScenario.association.referencedTestScenarios":"testScenario.association.associatedTestScenarios"}),COMMENTS:(0,n.hw)({id:"comments.comments"})};return(0,a.jsxs)("div",{className:"inline-flex items-center justify-start",children:[(0,a.jsx)(c.A,{type:"vertical",className:"h-6 mx-3"}),t.map(t=>(0,a.jsx)(p,{tooltipLabel:h[t],tooltipAlign:f,tooltipPlacement:v,tooltipPopupContainer:g,relatedType:o,children:(0,a.jsx)(d.A,{type:"text",className:s()("app-text-fg-low",{"app-text-fg-low":!r,...m}),icon:(0,a.jsx)(u.A,{type:e[t],size:16,color:"var(--ui-disabled-color)"}),onClick:()=>{i(t),(0,l.IL)("app_sidebar_button_click")},...y},`${t}-btn`)},t))]})}return(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)(d.A,{type:"text",className:s()(m),icon:(0,a.jsx)(u.A,{type:"icon-arrow-bar-left",size:16,color:"var(--ui-disabled-color)"}),onClick:()=>{i(null)},...y})})}},153876:function(e,t,i){"use strict";i.d(t,{D:()=>n});var a=i(641486);let n=i.n(a)().createContext({gotoAuthorization:null,gotoSettings:null,gotoCookies:null,gotoBody:null})},502974:function(e,t,i){"use strict";i.d(t,{uj:()=>O,$3:()=>_,hG:()=>D,e9:()=>L,f5:()=>F,Cx:()=>U,Jt:()=>V,Av:()=>z,DK:()=>$,Hd:()=>H});var a=i(838e3),n=i(169508),l=i(740565),r=i(83691),s=i(641486),o=i.n(s);let d=o().memo(function(){return(0,a.jsx)(a.Fragment,{children:"gzip, deflate, br"})}),c=o().memo(function(){return(0,a.jsx)(a.Fragment,{children:"*/*"})});var u=i(618487);let p=o().memo(function(){return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(u.FormattedMessage,{id:"api.parameter.systemHeader.calcInRuntime"})})}),m=o().memo(function(){return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(p,{})})}),h=o().memo(function(){return(0,a.jsx)(l.sA,{id:"api.parameter.systemHeader.calcInRuntime"})}),v=o().memo(function(){return(0,a.jsx)(a.Fragment,{children:"keep-alive"})}),f=o().memo(function(){return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(p,{})})});var g=i(269966),y=i(255529),x=i(817106);let A=(0,a.jsxs)(a.Fragment,{children:["multipart/form-data; boundary=",(0,a.jsx)(p,{})]}),j="text/plain",b="application/json",w="application/x-msgpack",S="application/xml",C=o().memo(function(){let e=y.A.useFormInstance(),t=y.A.useFormSelector(e=>("parameterGroup"in e?e.parameterGroup.requestBody:e.mergedParameterGroup.requestBody).type,e),i=y.A.useFormSelector(e=>{let t="parameterGroup"in e?e.parameterGroup.requestBody:e.mergedParameterGroup.requestBody;if(t.type===g.yA.Binary){var i;return t.data&&Array.isArray(t.data)?g.yA.Binary:(0,x.lookup)(null!=(i=t.data)?i:"")}return""},e);switch(t){case g.yA.Raw:return(0,a.jsx)(a.Fragment,{children:j});case g.yA.XWwwFormUrlencoded:return(0,a.jsx)(a.Fragment,{children:"application/x-www-form-urlencoded"});case g.yA.FormData:return(0,a.jsx)(a.Fragment,{children:A});case g.yA.GraphQL:case g.yA.Json:return(0,a.jsx)(a.Fragment,{children:b});case g.yA.Xml:return(0,a.jsx)(a.Fragment,{children:S});case g.yA.MsgPack:return(0,a.jsx)(a.Fragment,{children:w});case g.yA.Binary:return(0,a.jsx)(a.Fragment,{children:i||"application/octet-stream"});default:return(0,a.jsx)(a.Fragment,{children:t})}}),I=o().memo(function(){return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(p,{})})}),N=o().memo(function(){let e=y.A.useFormInstance(),t=y.A.useFormSelector(e=>{let t=e.url;if(!t)return"";try{return new URL(t).host}catch(e){return""}},e);return(0,a.jsx)(a.Fragment,{children:t||(0,a.jsx)(p,{})})});var k=i(543545);let T=o().memo(function(){return(0,a.jsx)(a.Fragment,{children:(0,k.Hy)()})}),M=(0,r.Ak)(),E=()=>`${M}_${(0,r.Ak)()}`,_="Authorization",F="Content-Type",D="Content-Length",R=Symbol("SystemHeaderSymbol"),O={[_]:{id:E(),checkable:!1,overwrite:!1,[R]:!0,tooltip:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h4",{style:{fontWeight:600},children:(0,a.jsx)(l.sA,{id:"api.parameter.systemHeader.tooltip.autoAdd"})}),(0,a.jsx)("div",{children:(0,a.jsx)(l.n3,{id:"api.parameter.systemHeader.http.Authorization"})})]}),value:(0,a.jsx)(m,{}),linkTitle:{methodName:"gotoAuthorization",title:(0,a.jsx)(l.sA,{id:"api.parameter.systemHeader.Go to Auth"})}},"Cache-Control":{id:E(),checkable:!1,overwrite:!0,[R]:!0,tooltip:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h4",{style:{fontWeight:600},children:(0,a.jsx)(l.sA,{id:"api.parameter.systemHeader.tooltip.suggest"})}),(0,a.jsx)("div",{children:(0,a.jsx)(l.n3,{id:"api.parameter.systemHeader.http.Cache-Control",values:{platform:n.JB}})})]}),value:(0,a.jsx)(h,{}),linkTitle:{methodName:"gotoSettings",title:(0,a.jsx)(l.sA,{id:"api.parameter.systemHeader.Go to Settings"})}},[F]:{id:E(),checkable:!0,overwrite:!0,[R]:!0,tooltip:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h4",{style:{fontWeight:600},children:(0,a.jsx)(l.sA,{id:"api.parameter.systemHeader.tooltip.autoAdd"})}),(0,a.jsx)("div",{children:(0,a.jsx)(l.n3,{id:"api.parameter.systemHeader.http.Content-Type"})})]}),value:(0,a.jsx)(C,{}),linkTitle:{title:(0,a.jsx)(l.sA,{id:"api.parameter.systemHeader.Go to Body"}),methodName:"gotoBody"}},[D]:{id:E(),checkable:!1,overwrite:!0,[R]:!0,tooltip:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h4",{style:{fontWeight:600},children:(0,a.jsx)(l.sA,{id:"api.parameter.systemHeader.tooltip.autoAdd"})}),(0,a.jsx)("div",{children:(0,a.jsx)(l.n3,{id:"api.parameter.systemHeader.http.Content-Length"})})]}),value:(0,a.jsx)(f,{}),linkTitle:{title:(0,a.jsx)(l.sA,{id:"api.parameter.systemHeader.Go to Body"}),methodName:"gotoBody"}},Cookie:{id:E(),checkable:!0,overwrite:"both",[R]:!0,tooltip:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h4",{style:{fontWeight:600},children:(0,a.jsx)(l.sA,{id:"api.parameter.systemHeader.tooltip.autoAdd"})}),(0,a.jsx)("div",{children:(0,a.jsx)(l.n3,{id:"api.parameter.systemHeader.http.Cookie"})})]}),value:(0,a.jsx)(I,{}),linkTitle:{title:(0,a.jsx)(l.sA,{id:"api.parameter.systemHeader.Go to Cookies"}),methodName:"gotoCookies"}},Host:{id:E(),checkable:!0,overwrite:!0,[R]:!0,tooltip:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h4",{style:{fontWeight:600},children:(0,a.jsx)(l.sA,{id:"api.parameter.systemHeader.tooltip.suggest"})}),(0,a.jsx)("div",{children:(0,a.jsx)(l.n3,{id:"api.parameter.systemHeader.http.Host"})})]}),value:(0,a.jsx)(N,{})},"User-Agent":{id:E(),checkable:!0,overwrite:!0,[R]:!0,tooltip:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h4",{style:{fontWeight:600},children:(0,a.jsx)(l.sA,{id:"api.parameter.systemHeader.tooltip.suggest"})}),(0,a.jsx)("div",{children:(0,a.jsx)(l.n3,{id:"api.parameter.systemHeader.http.User-Agent",values:{platform:n.JB}})})]}),value:(0,a.jsx)(T,{})},Accept:{id:E(),checkable:!0,overwrite:!0,[R]:!0,tooltip:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h4",{style:{fontWeight:600},children:(0,a.jsx)(l.sA,{id:"api.parameter.systemHeader.tooltip.suggest"})}),(0,a.jsx)("div",{children:(0,a.jsx)(l.n3,{id:"api.parameter.systemHeader.http.Accept",values:{platform:n.JB}})})]}),value:(0,a.jsx)(c,{})},"Accept-Encoding":{id:E(),checkable:!0,overwrite:!0,[R]:!0,tooltip:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h4",{style:{fontWeight:600},children:(0,a.jsx)(l.sA,{id:"api.parameter.systemHeader.tooltip.suggest"})}),(0,a.jsx)("div",{children:(0,a.jsx)(l.n3,{id:"api.parameter.systemHeader.http.Accept-Encoding",values:{platform:n.JB}})})]}),value:(0,a.jsx)(d,{})},Connection:{id:E(),checkable:!0,overwrite:!0,[R]:!0,tooltip:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h4",{style:{fontWeight:600},children:(0,a.jsx)(l.sA,{id:"api.parameter.systemHeader.tooltip.suggest"})}),(0,a.jsx)("div",{children:(0,a.jsx)(l.n3,{id:"api.parameter.systemHeader.http.Connection",values:{platform:n.JB}})})]}),value:(0,a.jsx)(v,{})}},P=["Host","Connection","Upgrade","Sec-WebSocket-Key","Sec-WebSocket-Version","Sec-WebSocket-Extensions"],L={Host:{id:E(),checkable:!1,overwrite:!0,[R]:!0,tooltip:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h4",{style:{fontWeight:600},children:(0,a.jsx)(l.sA,{id:"api.parameter.systemHeader.tooltip.autoAdd"})}),(0,a.jsx)("div",{children:(0,a.jsx)(l.n3,{id:"api.parameter.systemHeader.ws.Host"})})]}),value:(0,a.jsx)(p,{})},Connection:{id:E(),checkable:!1,overwrite:!0,[R]:!0,tooltip:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h4",{style:{fontWeight:600},children:(0,a.jsx)(l.sA,{id:"api.parameter.systemHeader.tooltip.autoAdd"})}),(0,a.jsx)("div",{children:(0,a.jsx)(l.n3,{id:"api.parameter.systemHeader.ws.Connection"})})]}),value:"Upgrade"},Upgrade:{id:E(),checkable:!1,overwrite:!0,[R]:!0,tooltip:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h4",{style:{fontWeight:600},children:(0,a.jsx)(l.sA,{id:"api.parameter.systemHeader.tooltip.autoAdd"})}),(0,a.jsx)("div",{children:(0,a.jsx)(l.n3,{id:"api.parameter.systemHeader.ws.Upgrade"})})]}),value:"websocket"},"Sec-WebSocket-Key":{id:E(),checkable:!1,overwrite:!0,[R]:!0,tooltip:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h4",{style:{fontWeight:600},children:(0,a.jsx)(l.sA,{id:"api.parameter.systemHeader.tooltip.autoAdd"})}),(0,a.jsx)("div",{children:(0,a.jsx)(l.n3,{id:"api.parameter.systemHeader.ws.Sec-WebSocket-Key"})})]}),value:(0,a.jsx)(p,{})},"Sec-WebSocket-Version":{id:E(),checkable:!1,overwrite:!0,[R]:!0,tooltip:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h4",{style:{fontWeight:600},children:(0,a.jsx)(l.sA,{id:"api.parameter.systemHeader.tooltip.autoAdd"})}),(0,a.jsx)("div",{children:(0,a.jsx)(l.n3,{id:"api.parameter.systemHeader.ws.Sec-WebSocket-Version"})})]}),value:"13"},"Sec-WebSocket-Extensions":{id:E(),checkable:!1,overwrite:!1,[R]:!0,tooltip:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h4",{style:{fontWeight:600},children:(0,a.jsx)(l.sA,{id:"api.parameter.systemHeader.tooltip.autoAdd"})}),(0,a.jsx)("div",{children:(0,a.jsx)(l.n3,{id:"api.parameter.systemHeader.ws.Sec-WebSocket-Extensions"})})]}),value:"permessage-deflate; client_max_window_bits"}},$={...L},B={...L},z=[_,"Cache-Control",F,D,"Cookie","Host","User-Agent","Accept","Accept-Encoding","Connection"].map(e=>({...O[e],name:e})),U=P.map(e=>({...L[e],name:e})),H=P.map(e=>({...$[e],name:e}));P.map(e=>({...B[e],name:e}));let V=e=>"object"==typeof e&&(void 0!==e[R]||"id"in e&&"string"==typeof e.id&&e.id.startsWith(M))},731369:function(e,t,i){"use strict";i.d(t,{G:()=>s});var a=i(838e3),n=i(838487),l=i.n(n),r=i(960540);function s(e){let{name:t,className:i}=e,n=(0,r.X)(e=>e.config)[t];return(0,a.jsx)("div",{className:l()("w-full overflow-hidden",i),style:{padding:"0px 5px",color:"var(--ui-text-color-secondary)"},children:n.value})}},960540:function(e,t,i){"use strict";i.d(t,{Eu:()=>v,Iv:()=>m,Vv:()=>u,X:()=>h});var a=i(838e3),n=i(269966),l=i(140049),r=i(255529),s=i(641486),o=i(325475),d=i(502974);let c=(0,s.createContext)(null);function u(e){let t=function(e,t,i,a,c){let u=(0,l.A)(a),p=r.A.useFormInstance(),m=r.A.useFormSelector(e=>{let t=null==c?void 0:c(e);return t===n.yA.FormData||t===n.yA.XWwwFormUrlencoded},p),h=(0,s.useMemo)(()=>new Set(t.filter(e=>u(e).name&&u(e).enable).map(e=>u(e).name.toLowerCase())),[u,t]),v=(0,s.useMemo)(()=>i.map(e=>({...e,name:e.name.toLowerCase()})),[i]),f=(0,s.useCallback)(function(t){let i="line-through",a=u(t);if(!a.name)return"";if((0,d.Jt)(t)){let t=e[a.name];return"content-type"===a.name.toLowerCase()&&m?"":!0===t.overwrite&&h.has(a.name.toLowerCase())?i:""}let n=v.find(e=>e.name===a.name.toLowerCase());return a.enable?"content-type"===a.name.toLowerCase()&&m||(null==n?void 0:n.overwrite)===!1?i:"":""},[u,v,e,h,m]),[g]=(0,s.useState)(()=>(0,o.vt)(()=>({config:e,recordCanBeOverwriteClassName:f})));return(0,s.useEffect)(()=>{g.getState().recordCanBeOverwriteClassName!==f&&g.setState({recordCanBeOverwriteClassName:f})},[f,g]),g}(e.configMap,e.value,e.visibleSystemHeaderList,e.getRecord,e.getBodyType);return(0,a.jsx)(c.Provider,{value:t,children:e.children})}let p=(0,o.vt)(()=>({config:{},recordCanBeOverwriteClassName:()=>""}));function m(e){return(0,a.jsx)(c.Provider,{value:p,children:e.children})}function h(e){let t=(0,s.useContext)(c);return t||console.error("missing SystemHeaderRewriteCtx"),(0,o.Pj)(null!=t?t:p,e)}function v(e){let t=h(e.selector);return e.children(t)}},306680:function(e,t,i){"use strict";i.d(t,{A:()=>f});var a=i(838e3),n=i(740565),l=i(103058),r=i(995829),s=i(689368),o=i(269966),d=i(808306),c=i(743190),u=i(671466),p=i(641486);let m="apiStatusSelect-ch7N3e",h="dropdownRenderWrapper-gAcjcR",v=e=>{var t;return null!=(t=e.label)?t:e.value},f=e=>{var t,i;let f,{value:g,readonly:y}=e,x=(0,s.Ay)(e=>{var t;let{projectSetting:i}=e;return(null==(t=i.projectSettingData)?void 0:t.apiStatuses)||[]}),{Link:A}=(0,p.useContext)(l.A),j=(t=x,i=o.hm,f=[],i.forEach(e=>{t.forEach(t=>{e.value===t&&f.push(e)})}),f),b=o.hm.find(e=>e.value===g)||o.zj[o.pQ.released],w=(0,a.jsx)(d.A,{color:b.color,status:b.value===o.pQ.released?"processing":"default",text:(0,a.jsx)(n.sA,{id:b.labelLocale}),style:{paddingLeft:3}});if(y)return w;let S=o.hm.map(e=>({label:(0,a.jsx)(d.A,{color:e.color,status:e.value===o.pQ.released?"processing":"default",text:(0,a.jsx)(n.sA,{id:e.labelLocale}),style:{paddingLeft:3}}),value:e.value,disabled:!j.includes(e)})),C=g?v:void 0;return(0,a.jsx)(r.A,{...e,className:m,options:S,tagRender:C,value:g,defaultValue:w,dropdownMatchSelectWidth:!1,dropdownRender:t=>(0,a.jsxs)("div",{className:h,children:[t,!e.hideDropdownAction&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.A,{style:{margin:"4px 0"}}),(0,a.jsx)("div",{className:"flex flex-no-wrap",children:(0,a.jsxs)(A,{to:"/project-settings/common/feature-setting/api-status-setting/",className:"display-block w-full p-2",children:[(0,a.jsx)(u.A,{type:"icon-nav-drag"})," ",(0,a.jsx)(n.sA,{id:"apiTestCase.apiStatusManagement"})]})})]})]})})}},877789:function(e,t,i){"use strict";i.d(t,{$:()=>r});var a=i(838e3),n=i(79136),l=i(138249);function r(e){let t=(0,n.S)();return(0,a.jsx)(l.A,{...e,mode:"tags",options:null==t?void 0:t.map(e=>({label:e,value:e}))})}},137361:function(e,t,i){"use strict";i.d(t,{i:()=>a.Ay});var a=i(135400)},943975:function(e,t,i){"use strict";i.d(t,{J:()=>r});var a=i(689368),n=i(482106),l=i(202182);function r(e){let t=(0,n.IA)(e=>e.defaultProjectModuleId),i=(0,a.Ay)(e=>{var t;return null==(t=e.projectSetting.projectSettingData)?void 0:t.servers})||[];return(0,l.A)(()=>{if(!e)return!0;for(let a=0,n=0;a<i.length;a++)if((i[a].moduleId||t)===e&&++n>1)return!0;return!1},[t,e,i])}},622521:function(e,t,i){"use strict";i.d(t,{A:()=>o});var a=i(838e3),n=i(202182),l=i(140049),r=i(838487),s=i.n(r);let o=e=>{let{content:t,icon:i,onMouseMiddleDown:r,extraPreTitle:o,data:d,className:c,style:u}=e,{tabContent:p,icon:m,title:h}=(0,n.A)(()=>({tabContent:t,icon:i,title:null==d?void 0:d.name}),[t,d,i]),v=(0,l.A)(e=>{1===e.button&&(null==r||r(e))});return(0,a.jsxs)("div",{className:s()(c,"flex flex-row items-center justify-start w-full"),onMouseDown:v,title:h,style:{maxWidth:"fit-content",minHeight:22,...u},children:[o,m,(0,a.jsx)("div",{className:"truncate flex-1",children:p}),(0,a.jsx)("span",{dangerouslySetInnerHTML:{__html:"&nbsp;"}})]})}},179574:function(e,t,i){"use strict";i.d(t,{L:()=>ny,A:()=>nj});var a=i(838e3),n=i(641486),l=i.n(n);let r=e=>(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:12,height:12,fill:"none",viewBox:"0 0 12 12",...e,children:[(0,a.jsxs)("g",{clipPath:"url(#ai-stars_chat_svg__a)",children:[(0,a.jsx)("path",{fill:"url(#ai-stars_chat_svg__b)",d:"M5.225 11.5a.25.25 0 0 1-.24-.178L4.597 9.97a3.7 3.7 0 0 0-2.56-2.556L.682 7.026a.25.25 0 0 1-.173-.304.25.25 0 0 1 .173-.173l1.355-.388a3.7 3.7 0 0 0 2.56-2.556l.388-1.352a.25.25 0 0 1 .308-.173.26.26 0 0 1 .173.173l.387 1.352a3.7 3.7 0 0 0 2.56 2.556l1.356.388c.13.052.193.204.141.335a.27.27 0 0 1-.141.142l-1.356.388a3.71 3.71 0 0 0-2.56 2.556l-.387 1.352a.25.25 0 0 1-.24.178"}),(0,a.jsx)("path",{fill:"url(#ai-stars_chat_svg__c)",d:"M9.41 4.69a.11.11 0 0 1-.107-.079l-.172-.6a1.65 1.65 0 0 0-1.138-1.137l-.603-.172a.11.11 0 0 1-.076-.135.11.11 0 0 1 .076-.077l.603-.172A1.65 1.65 0 0 0 9.13 1.182L9.303.58A.11.11 0 0 1 9.44.504q.057.02.077.077l.172.6c.156.552.586.98 1.137 1.137l.603.172a.115.115 0 0 1 0 .212l-.603.172A1.65 1.65 0 0 0 9.69 4.011l-.172.6a.11.11 0 0 1-.107.08"})]}),(0,a.jsxs)("defs",{children:[(0,a.jsxs)("linearGradient",{id:"ai-stars_chat_svg__b",x1:.5,x2:10.003,y1:3.995,y2:4.124,gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:"#48C2FF",style:{stopColor:"#48c2ff",stopColor:"color(display-p3 .2824 .7608 1)",stopOpacity:1}}),(0,a.jsx)("stop",{offset:.198,stopColor:"#5D9EFF",style:{stopColor:"#5d9eff",stopColor:"color(display-p3 .3641 .6185 1)",stopOpacity:1}}),(0,a.jsx)("stop",{offset:.404,stopColor:"#D860E2",style:{stopColor:"#d860e2",stopColor:"color(display-p3 .8471 .3765 .8863)",stopOpacity:1}}),(0,a.jsx)("stop",{offset:.652,stopColor:"#FA6664",style:{stopColor:"#fa6664",stopColor:"color(display-p3 .9804 .4 .3922)",stopOpacity:1}}),(0,a.jsx)("stop",{offset:1,stopColor:"#FEA808",style:{stopColor:"#fea808",stopColor:"color(display-p3 .9961 .6588 .0314)",stopOpacity:1}})]}),(0,a.jsxs)("linearGradient",{id:"ai-stars_chat_svg__c",x1:7.31,x2:11.533,y1:1.355,y2:1.412,gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:"#48C2FF",style:{stopColor:"#48c2ff",stopColor:"color(display-p3 .2824 .7608 1)",stopOpacity:1}}),(0,a.jsx)("stop",{offset:.198,stopColor:"#5D9EFF",style:{stopColor:"#5d9eff",stopColor:"color(display-p3 .3641 .6185 1)",stopOpacity:1}}),(0,a.jsx)("stop",{offset:.404,stopColor:"#D860E2",style:{stopColor:"#d860e2",stopColor:"color(display-p3 .8471 .3765 .8863)",stopOpacity:1}}),(0,a.jsx)("stop",{offset:.652,stopColor:"#FA6664",style:{stopColor:"#fa6664",stopColor:"color(display-p3 .9804 .4 .3922)",stopOpacity:1}}),(0,a.jsx)("stop",{offset:1,stopColor:"#FEA808",style:{stopColor:"#fea808",stopColor:"color(display-p3 .9961 .6588 .0314)",stopOpacity:1}})]}),(0,a.jsx)("clipPath",{id:"ai-stars_chat_svg__a",children:(0,a.jsx)("path",{fill:"#fff",d:"M0 0h12v12H0z",style:{fill:"#fff",fillOpacity:1}})})]})]});var s=i(720087),o=i(322148),d=i(987016),c=i(740565),u=i(238504),p=i(957705),m=i(781875),h=i(970591),v=i(482106),f=i(622290),g=i(505508),y=i(38368),x=i(119075),A=i(184539),j=i(493914),b=i(77448),w=i(222757),S=i(923117),C=i(618487);let I=(0,C.dynamic)({loading:S.A,loader:async()=>{let{default:e}=await Promise.all([i.e("720"),i.e("73034"),i.e("4276"),i.e("48737"),i.e("87053"),i.e("80232"),i.e("33898"),i.e("67007"),i.e("72168"),i.e("90348"),i.e("47094"),i.e("75931"),i.e("34351"),i.e("38390"),i.e("59057"),i.e("53281"),i.e("36943"),i.e("21583"),i.e("91192"),i.e("18261"),i.e("44661"),i.e("48579"),i.e("8704"),i.e("16336"),i.e("71877"),i.e("51235"),i.e("13996"),i.e("75562"),i.e("37730"),i.e("73956"),i.e("8769"),i.e("60293"),i.e("67282"),i.e("86781"),i.e("39622"),i.e("15505"),i.e("31766"),i.e("21172"),i.e("24879"),i.e("4720"),i.e("2527"),i.e("26304"),i.e("59065"),i.e("33987"),i.e("8147"),i.e("25082"),i.e("38929"),i.e("14701"),i.e("10750"),i.e("60070"),i.e("97856"),i.e("73132"),i.e("79800"),i.e("44792"),i.e("33689"),i.e("90812"),i.e("37191"),i.e("99857"),i.e("14937"),i.e("42043"),i.e("70139"),i.e("2263"),i.e("79267"),i.e("82962"),i.e("90670")]).then(i.bind(i,401314));return e}});var N=i(257712);let k=(0,C.dynamic)({loading:S.A,loader:async()=>{let{default:e}=await Promise.all([i.e("720"),i.e("73034"),i.e("4276"),i.e("48737"),i.e("87053"),i.e("80232"),i.e("33898"),i.e("67007"),i.e("72168"),i.e("34351"),i.e("23240"),i.e("48579"),i.e("8704"),i.e("16336"),i.e("71877"),i.e("51235"),i.e("13996"),i.e("75562"),i.e("37730"),i.e("60293"),i.e("86781"),i.e("39622"),i.e("15505"),i.e("31766"),i.e("21172"),i.e("24879"),i.e("4720"),i.e("22483"),i.e("82361"),i.e("492")]).then(i.bind(i,807443));return e}}),T=(0,C.dynamic)({loading:S.A,loader:async()=>{let{MergeRequestManage:e}=await i.e("12199").then(i.bind(i,282683));return e}}),M=(0,C.dynamic)({loading:S.A,loader:async()=>{let{default:e}=await Promise.all([i.e("4276"),i.e("67007"),i.e("90348"),i.e("72646"),i.e("8704"),i.e("73956"),i.e("8769"),i.e("60293"),i.e("67282"),i.e("86781"),i.e("39622"),i.e("31766"),i.e("21172"),i.e("24879"),i.e("88892"),i.e("37871"),i.e("32765"),i.e("32636")]).then(i.bind(i,550544));return e}});var E=i(755694),_=i(515875),F=i(167223),D=i(187633),R=i(371122),O=i(523844),P=i(739452),L=i(721839),$=i(342392),B=i(338789),z=i(486833),U=i(663024),H=i(496411),V=i(689368),K=i(69712),q=i(452577),G=i(176481),W=i(872446),J=i(191820),Y=i(140049),Z=i(603240),Q=i.n(Z),X=i(764007),ee=i(398380),et=i(526638),ei=i(387327);let ea=J.default.Provider,{confirm:en}=X.Ay,el=(e,t)=>t.findIndex(t=>t.key===e),er=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return e=>{let i;if(!t)return e;let{tabPanes:a}=e,n=[...a];for(let e of t){let{key:t,tab:a,content:l,state:r="unstable",extraInfo:s}=e;i=t;let o={tab:a,content:l,key:t,state:r,extraInfo:s},d=n.findIndex(e=>e.key===t);if("unstable"===r){if(-1===d){let e=n.findIndex(e=>"unstable"===e.state);-1===e?n.push(o):n[e]=o}}else -1===d?n.push(o):"unstable"===n[d].state&&(n[d]=o)}return{tabPanes:n,activeKey:i}}},es=(e,t)=>i=>{let{tabPanes:a}=i,n=el(e,a);if(-1===n)return er(t)(i);let{key:l,tab:r,content:s,state:o="unstable",extraInfo:d}=t,c=[...a],u={tab:r,content:s,key:l,state:o,extraInfo:d},p=c.findIndex(e=>e.key===l);if("unstable"===o){if(-1===p){let t=c.findIndex(e=>"unstable"===e.state);-1!==t&&c.splice(t,1);let i=el(e,a);c.splice(i+1,0,u)}}else -1===p?c.splice(n+1,0,u):"unstable"===c[p].state&&(c[p]=u);return{tabPanes:c,activeKey:t.key}},eo=function(e,t){let{silent:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a=>{let{tabPanes:n}=a,l=el(e,n);if(-1===l)return er(t)(a);let{key:r,tab:s,content:o,state:d="unstable",extraInfo:c}=t,u=[...n];return u[l]={tab:s,content:o,key:r,state:d,extraInfo:c},{tabPanes:u,activeKey:i?a.activeKey:r}}},ed=e=>t=>{let{tabPanes:i}=t,a=[...i];return e.forEach(e=>{let t=a.findIndex(t=>t.key===e.key);-1!==t&&(a[t].tab=e.tabTitle)}),{...t,tabPanes:a}},ec=(e,t)=>i=>{let{tabPanes:a}=i,n=el(e,a);if(-1===n)return i;let l=[...a];return l.splice(n,1,{...a[n],tab:t}),{...i,tabPanes:l}},eu=e=>t=>{let i=e,{tabPanes:a}=t;return(9===i&&(i=a.length),a.length>0&&i<=a.length)?{...t,activeKey:a[i-1].key}:t},ep=e=>t=>{let{tabPanes:i}=t,a=null;return i.forEach((t,i)=>{t.key===e&&(a=i)}),a},em=()=>e=>{let{tabPanes:t,activeKey:i}=e;if(i){let a=(ep(i)(e)+1)%t.length;return{...e,activeKey:t[a].key}}return e},eh=()=>e=>{let{tabPanes:t,activeKey:i}=e;if(i){let a=ep(i)(e),n=a>0?a-1:t.length-1;return{...e,activeKey:t[n].key}}return e},ev=e=>{let{getter:t,setter:i}=e;return function(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],l=t(),r=ep(e)(l);if(null!==r){var s,o,d,c,u;let t=()=>{i(t=>{let{tabPanes:i,activeKey:a}=t,n=[...i],l=ep(e)(t);if(null===l)return t;if(a===e){var r,s;let e;return e=1===n.length?void 0:l>=1?null==(r=n[l-1])?void 0:r.key:null==(s=n[l+1])?void 0:s.key,n.splice(l,1),{tabPanes:n,activeKey:e}}return n.splice(l,1),{...t,tabPanes:n}})},p=l.tabPanes[r];!n&&(p.modifying||(null==(s=p.extraInfo)?void 0:s.closeConfirm))?en({width:400,maskClosable:!0,title:null!=(c=null==(o=p.extraInfo)?void 0:o.message)?c:(0,ei.a)({id:"userLayout.title.notSave"}),icon:(0,a.jsx)(ea,{value:{prefixCls:"appicon"},children:(0,a.jsx)(W.A,{})}),content:null!=(u=null==(d=p.extraInfo)?void 0:d.content)?u:(0,ei.a)({id:"confirm.close"}),onOk(){t()}}):t()}}},ef=(e,t)=>i=>{let{tabPanes:a}=i,n=[...a];return n[e]&&t!==n[e].modifying?(n[e]={...n[e],modifying:t},{...i,tabPanes:n}):i},eg=(e,t)=>i=>{let{tabPanes:a}=i,n=el(e,a);if(n<0)return i;let l=a[n],r=(0,ee.pick)(l,(0,ee.keys)(t));if((0,ee.isEqual)(r,t))return i;let s=[...a];return s[n]={...s[n],...t},{...i,tabPanes:s}},ey=(e,t,i)=>a=>{let{tabPanes:n}=a;if(!e)return a;let l=n.find(t=>t.key===e);if(!l)return a;let r={modifying:t};return i&&(r.extraInfo=i),"unstable"===l.state&&(r.state="resident"),eg(e,r)(a)},ex=(e,t)=>i=>e?ey(e,!0,t)(i):i,eA=e=>t=>e?ey(e,!1)(t):t,ej=e=>t=>{var i;let{tabPanes:a,activeKey:n}=t,l=e||n,r=a.filter(e=>e.key===l||"pin"===e.state),s=null==(i=r.find(e=>e.key===l))?void 0:i.key;return{...t,tabPanes:r,activeKey:s}},eb=e=>t=>{let{tabPanes:i}=t,a=[];for(let t=0;t<i.length;t+=1){let n=i[t];if(n.key===e){a.push(n);break}}return{...t,tabPanes:a,activeKey:e}},ew=()=>e=>{let{tabPanes:t,activeKey:i}=e,a=t.filter(e=>"pin"===e.state),n=a.some(e=>e.key===i)?i:a.length>0?a[a.length-1].key:void 0;return{...e,tabPanes:a,activeKey:n}},eS=(e,t)=>i=>t?eo(t,e)(i):er(e)(i),eC=e=>t=>{var i;let{tabPanes:a}=t;return"unstable"!==(null==(i=a.find(t=>t.key===e))?void 0:i.state)?t:eg(e,{state:"resident"})(t)},eI=e=>t=>{let{tabPanes:i}=t,a=i.findIndex(t=>t.key===e);if(-1===a)return t;let n=[...i];if("pin"!==n[a].state)return n[a].state="pin",{...t,tabPanes:Q()(n,a,0)};let l=n.findIndex(e=>"pin"!==e.state),r=-1===l?n.length-1:l-1;return n[a].state="resident",{...t,tabPanes:Q()(n,a,r)}},eN=(e,t)=>i=>({...i,tabPanes:Q()([...i.tabPanes],e,t)});function ek(e){let t,i=(0,n.useCallback)((0,et.L)(er,e.store.setter),[e.store]),a=(0,n.useCallback)((0,et.L)(es,e.store.setter),[e.store]),l=(0,n.useCallback)((0,et.L)(eg,e.store.setter),[e.store]),r=(0,n.useCallback)((0,et.L)(eo,e.store.setter),[e.store]),s=(0,n.useCallback)((0,et.L)(ed,e.store.setter),[e.store]),o=(0,Y.A)((0,et.L)(ec,e.store.setter)),d=(0,Y.A)((0,et.L)(eu,e.store.setter)),c=(0,Y.A)((0,et.L)(em,e.store.setter)),u=(0,Y.A)((0,et.L)(eh,e.store.setter)),p=(0,Y.A)(ev(e.store)),m=(0,Y.A)((t=e.store,function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{activeKey:i}=t.getter();i&&ev(t)(i,e)})),h=(0,Y.A)((e=>{let{setter:t}=e;return e=>{t(t=>({...t,activeKey:e}))}})(e.store)),v=(0,Y.A)((e=>{let{getter:t}=e;return()=>t().tabPanes.filter(e=>e.modifying).length})(e.store)),f=(0,Y.A)((0,et.L)(ef,e.store.setter)),g=(0,Y.A)((0,et.L)(ex,e.store.setter)),y=(0,Y.A)((0,et.L)(eA,e.store.setter)),x=(0,Y.A)((0,et.L)(ej,e.store.setter)),A=(0,Y.A)((0,et.L)(eb,e.store.setter)),j=(0,Y.A)((0,et.L)(ew,e.store.setter)),b=(0,Y.A)((0,et.L)(eS,e.store.setter)),w=(0,Y.A)((0,et.L)(eC,e.store.setter)),S=(0,Y.A)((0,et.L)(eI,e.store.setter)),C=(0,Y.A)((0,et.L)(eN,e.store.setter));return(0,n.useMemo)(()=>({onChange:h,openTab:i,openTabAfter:a,changeTab:l,replaceTab:r,closeTab:p,closeCurrentTab:m,closeAllTab:j,closeAnotherAllTab:x,closeAnotherAllTabBySelectKey:A,onModifying:g,onModified:y,getModifyingCount:v,changeTabTitle:o,setModifying:f,switchTo:d,switchToNext:c,switchToPrevious:u,replaceOrOpenTab:b,batchChangeTabTitle:s,unstableTurnsResidentTab:w,togglePinTab:S,moveTabs:C}),[])}var eT=i(667754),eM=i(106380),eE=i(759345),e_=i(662387),eF=i(718180),eD=i(929463),eR=i(671466),eO=i(325475),eP=i(207202),eL=i(559490),e$=i(182187),eB=i(797091);i(807603);var ez=i(952811),eU=i(95837),eH=i(221312),eV=i(262514),eK=i(724675),eq=i(170836),eG=i(180127),eW=i(52367),eJ=i(838487),eY=i.n(eJ),eZ=i(554692),eQ=i(458184),eX=i(174972),e0=i(95470),e1=i(129867),e4=i(135400),e3=i(868812),e8=i(567108),e6=i(471504),e2=i(759300),e5=i.n(e2),e7=i(743190);let e9="endpointInfo-qcISc7",te="header-ts1qWP",tt="title-SHTw_5",ti=e=>{let{endpoint:t,className:i,aiModel:l,done:r,recordId:s,finishedAt:o}=e,d=(0,n.useMemo)(()=>r?e5()(o).format("YYYY/MM/DD HH:mm:ss"):void 0,[r,o]),u=(0,n.useMemo)(()=>{if(t)return(0,a.jsx)("span",{className:"truncate",style:{fontWeight:"var(--ui-font-weight-400)",color:"var(--ui-text-color-secondary)",fontSize:"var(--ui-font-size-sm)"},children:(0,c.hw)({id:"ai.feedback.quality.notice"})})},[t]),p=(0,Y.A)(()=>{t&&e4.Qm.getState().openHttpApi(t)});return t?(0,a.jsxs)("div",{className:eY()(e9,i),children:[(0,a.jsxs)("div",{className:eY()(te,"flex-shrink-0"),children:[(0,a.jsx)("div",{className:eY()(tt,"truncate"),onClick:p,children:null==t?void 0:t.name}),!!r&&!!s&&(0,a.jsx)(e3.u,{className:"flex-shrink-0",recordId:s})]}),(0,a.jsxs)("div",{className:"max-w-full mt-2 flex items-center truncate gap-1 flex-shrink-0 cursor-pointer",onClick:p,children:[(0,a.jsx)(e6.mn,{method:null==t?void 0:t.method,className:"flex items-center",style:{height:"auto"}}),(0,a.jsx)("span",{className:"truncate w-auto",children:null==t?void 0:t.path})]}),(!!l||!!d)&&(0,a.jsxs)("div",{className:"w-full mt-3 pt-3 flex items-center justify-between gap-2",style:{borderTop:"1px dashed var(--ui-border-color-base)",fontSize:"var(--ui-font-size-sm)",fontWeight:"var(--ui-font-weight-400)"},children:[l&&(0,a.jsxs)("div",{className:"flex items-center truncate flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 truncate",children:[(0,a.jsx)(e8.A,{icon:l.icon,size:16}),(0,a.jsx)("span",{className:"truncate",children:l.name})]}),(0,a.jsx)(e7.A,{type:"vertical",className:"mx-2"}),(0,a.jsx)("div",{className:"flex-shrink-0",children:u})]}),!!d&&(0,a.jsx)("div",{className:"flex-shrink-0",style:{color:"var(--ui-disabled-color)"},children:d})]})]}):null},ta="documentCompletenessReport-gYFRWp",tn="generating-N0xGEQ",tl="body-Hnom1a",tr="actions-N25z34",ts="header-ct_I2d",to="title-KVk27d",td="reasoningBox-_4Loqt",tc="reasoningBoxHeader-yy8LYp",tu=(0,n.memo)(e=>{let{value:t}=e,i=(0,eG.A)(t,{wait:100});return(0,a.jsx)(e$.A,{value:i})},(e,t)=>e.value===t.value),tp=e=>{let{endpointId:t,moduleId:i,language:l,prompt:r,modelId:s,checkTime:o,tabKey:d}=e,u=(0,V.Ay)(e=>{var i;return null==(i=e.apiDetail.apiDetailMap)?void 0:i[t]}),p=(0,V.Ay)(e=>e.project.currentProject),m=(0,n.useRef)(!1),[h,v]=(0,n.useState)(),f=(0,e4.Qm)().openAiCheckDocumentCompletenessReport,g=(null==p?void 0:p.teamId)||0,[y,x]=(0,n.useState)(""),A=!!y,[j,b]=(0,n.useState)(),[w,S]=(0,n.useState)(),[C,I]=(0,n.useState)(void 0),N=(0,n.useRef)(null),{models:k=[]}=(0,ez.A)({llmNodeType:"DOCUMENTATION_COMPLETENESS_CHECK"}),T=(0,n.useMemo)(()=>k.find(e=>e.aiLlmModelId===s),[k,s]),{run:M}=(0,eW.A)(e=>{S(e)},{wait:100,leading:!1,trailing:!0}),E=(0,Y.A)(()=>({type:"DOCUMENTATION_COMPLETENESS_CHECK",uniqId:(0,e1.Z0)(),projectId:(null==p?void 0:p.id)||0,aiLlmModelId:s,data:(0,eq.Oy)({apiDetailId:[t],moduleId:i,USER_INPUT_MESSAGE:r,OUTPUT_LANGUAGE:l})})),_=(0,n.useMemo)(()=>e=>(0,a.jsx)(tu,{value:e}),[]),F=(0,Y.A)(()=>{x(""),b(void 0),I(void 0),S(void 0),m.current=!1}),D=(0,Y.A)(e=>{f({endpointId:t,moduleId:i,language:l,modelId:s,prompt:r,loading:e,tabKey:d,silent:!0})}),{run:R,abort:O,loading:P}=(0,eU.e)(g,{manual:!0,defaultData:E(),onSetup:async()=>{F()},onReasoning:e=>{M(e)},onReasoningCompleted:e=>{M(e)},onMessageDelta:async e=>{x(t=>t+(null!=e?e:""))},onMessageCompleted:async e=>{x(null!=e?e:""),D(!1)},onError:e=>{D(!1),(0,eH.Cj)(e)||I((null==e?void 0:e.message)||(null==e?void 0:e.errorExtra)||(0,c.hw)({id:"fail"}))},onEvent:(e,t)=>{"thread.completed"===e&&b(null==t?void 0:t.generationRecordId)}}),L=(0,Y.A)(()=>{let e=new Blob([y],{type:"text/markdown"});(0,eK.jN)(e,{filename:`${(null==u?void 0:u.name)?`${null==u?void 0:u.name}_`:""}${(0,c.hw)({id:"ai.workbench.documentationCompletenessCheck.report"})}.md`})}),$=(0,Y.A)(()=>{m.current=!0,O()}),B=(0,Y.A)(async()=>{try{O()}catch{}F(),D(!0),await R(E())}),z=(0,Y.A)(()=>{P?$():B()});return(0,eV.Rp)(N,{auto:P}),(0,n.useEffect)(()=>{o&&(h===o||P||B(),v(o))},[h,o,B,P]),(0,eF.A)(()=>{}),(0,a.jsx)("div",{className:eY()(ta,{[tn]:P}),ref:N,children:(0,a.jsxs)("div",{className:"flex flex-col w-full",children:[(0,a.jsxs)("div",{className:eY()(tr,"flex items-center gap-3"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(eZ.A,{title:(0,c.hw)({id:"share"}),children:(0,a.jsx)(eQ.A,{disabled:!0,type:"text",icon:(0,a.jsx)(eR.A,{type:"icon-share-01"})})}),(0,a.jsx)(eZ.A,{title:(0,c.hw)({id:"download"}),children:(0,a.jsx)(eQ.A,{onClick:L,disabled:P||!A,type:"text",icon:(0,a.jsx)(eR.A,{type:"icon-download1"})})})]}),(0,a.jsx)(eQ.A,{icon:(0,a.jsx)(eR.A,{type:P?"icon-CircleStopSolid":"icon-refresh-ccw-01"}),onClick:z,children:(0,c.hw)({id:P?"stop":"ai.workbench.documentationCompletenessCheck.recheck"})})]}),(0,a.jsxs)("div",{className:ts,children:[(0,a.jsx)("div",{className:to,children:(0,c.hw)({id:"ai.workbench.documentationCompletenessCheck.report"})}),u&&(0,a.jsx)(ti,{endpoint:u,aiModel:T,done:A&&!P,recordId:j})]}),C&&(0,a.jsx)("div",{className:tl,children:(0,a.jsx)(eX.A,{showIcon:!0,type:"error",message:C})}),w&&(0,a.jsx)("div",{className:tl,children:(0,a.jsx)(eB.A,{className:td,headerClassName:tc,reasoningContent:w,wrapperClassName:"w-full",autoScroll:!1,markdownRender:_})}),A&&(0,a.jsx)("div",{className:tl,children:(0,a.jsx)(tu,{value:y})}),P&&!A&&!w&&(0,a.jsx)("div",{className:tl,children:(0,a.jsx)(e0.A,{active:!0})})]})})};var tm=i(297965);let th="endpointInfo-GKuPqw",tv="header-oYRPiP",tf="title-XbSH0d",tg=e=>{let{endpoint:t,className:i,aiModel:l,done:r,recordId:s,finishedAt:o}=e,d=(0,n.useMemo)(()=>r?e5()(o).format("YYYY/MM/DD HH:mm:ss"):void 0,[r,o]),u=(0,n.useMemo)(()=>{if(t)return(0,a.jsx)("span",{className:"truncate",style:{fontWeight:"var(--ui-font-weight-400)",color:"var(--ui-text-color-secondary)",fontSize:"var(--ui-font-size-sm)"},children:(0,c.hw)({id:"ai.feedback.quality.notice"})})},[t]),p=(0,Y.A)(()=>{t&&e4.Qm.getState().openHttpApi(t)});return t?(0,a.jsxs)("div",{className:eY()(th,i),children:[(0,a.jsxs)("div",{className:eY()(tv,"flex-shrink-0"),children:[(0,a.jsx)("div",{className:eY()(tf,"truncate"),onClick:p,children:null==t?void 0:t.name}),!!r&&!!s&&(0,a.jsx)(e3.u,{className:"flex-shrink-0",recordId:s})]}),(0,a.jsxs)("div",{className:"max-w-full mt-2 flex items-center truncate gap-1 flex-shrink-0 cursor-pointer",onClick:p,children:[(0,a.jsx)(e6.mn,{method:null==t?void 0:t.method,className:"flex items-center",style:{height:"auto"}}),(0,a.jsx)("span",{className:"truncate w-auto",children:null==t?void 0:t.path})]}),(!!l||!!d)&&(0,a.jsxs)("div",{className:"w-full mt-3 pt-3 flex items-center justify-between gap-2",style:{borderTop:"1px dashed var(--ui-border-color-base)",fontSize:"var(--ui-font-size-sm)",fontWeight:"var(--ui-font-weight-400)"},children:[l&&(0,a.jsxs)("div",{className:"flex items-center truncate flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 truncate",children:[(0,a.jsx)(e8.A,{icon:l.icon,size:16}),(0,a.jsx)("span",{className:"truncate",children:l.name})]}),(0,a.jsx)(e7.A,{type:"vertical",className:"mx-2"}),(0,a.jsx)("div",{className:"flex-shrink-0",children:u})]}),!!d&&(0,a.jsx)("div",{className:"flex-shrink-0",style:{color:"var(--ui-disabled-color)"},children:d})]})]}):null},ty="complianceReport-pQJ9Xg",tx="generating-rHhLoo",tA="body-KgLcR1",tj="actions-FVWnmq",tb="header-I5vX6z",tw="title-sy0N4U",tS="reasoningBox-seHmhV",tC="reasoningBoxHeader-qvhfwN",tI=(0,n.memo)(e=>{let{value:t}=e,i=(0,eG.A)(t,{wait:100});return(0,a.jsx)(e$.A,{value:i})},(e,t)=>e.value===t.value),tN=e=>{let{endpointId:t,moduleId:i,language:l,prompt:r,modelId:s,checkTime:o,tabKey:d}=e,u=(0,V.Ay)(e=>{var i;return null==(i=e.apiDetail.apiDetailMap)?void 0:i[t]}),p=(0,V.Ay)(e=>e.project.currentProject),m=(0,n.useRef)(!1),[h,v]=(0,n.useState)(),f=(0,e4.Qm)().openAiCheckEndpointComplianceReport,g=(null==p?void 0:p.teamId)||0,[y,x]=(0,n.useState)(""),A=!!y,[j,b]=(0,n.useState)(),[w,S]=(0,n.useState)(),[C,I]=(0,n.useState)(void 0),N=(0,n.useRef)(null),{models:k=[]}=(0,ez.A)({llmNodeType:"ENDPOINT_COMPLIANCE_CHECK"}),T=(0,n.useMemo)(()=>k.find(e=>e.aiLlmModelId===s),[k,s]),{run:M}=(0,eW.A)(e=>{S(e)},{wait:100,leading:!1,trailing:!0}),E=(0,Y.A)(()=>({type:"ENDPOINT_COMPLIANCE_CHECK",uniqId:(0,e1.Z0)(),projectId:(null==p?void 0:p.id)||0,aiLlmModelId:s,data:(0,eq.Oy)({apiDetailId:[t],moduleId:i,USER_INPUT_MESSAGE:r,OUTPUT_LANGUAGE:l})})),_=(0,Y.A)(e=>(0,a.jsx)(tI,{value:e})),F=(0,Y.A)(()=>{x(""),b(void 0),I(void 0),S(void 0),m.current=!1}),D=(0,Y.A)(e=>{f({endpointId:t,moduleId:i,language:l,modelId:s,prompt:r,loading:e,tabKey:d,silent:!0})}),{run:R,abort:O,loading:P}=(0,eU.e)(g,{manual:!0,defaultData:E(),onSetup:async()=>{F()},onReasoning:e=>{M(e)},onReasoningCompleted:e=>{M(e)},onMessageDelta:async e=>{x(t=>t+(null!=e?e:""))},onMessageCompleted:async e=>{x(null!=e?e:""),D(!1)},onError:e=>{D(!1),(0,eH.Cj)(e)||I((null==e?void 0:e.message)||(null==e?void 0:e.errorExtra)||(0,c.hw)({id:"fail"}))},onEvent:(e,t)=>{"thread.completed"===e&&b(null==t?void 0:t.generationRecordId)}}),L=(0,Y.A)(()=>{let e=new Blob([y],{type:"text/markdown"});(0,eK.jN)(e,{filename:`${(null==u?void 0:u.name)?`${null==u?void 0:u.name}_`:""}${(0,c.hw)({id:"ai.workbench.endpointComplianceCheck.report"})}.md`})}),$=(0,Y.A)(()=>{m.current=!0,O()}),B=(0,Y.A)(async()=>{var e,i;try{O()}catch{}F(),D(!0),(0,tm.B)("ai_spec_check_click",{apiId:t,model:null==T?void 0:T.name,provider:null==T||null==(e=T.aiLlmProvider)?void 0:e.name,isAddMsg:+!!r});let a=performance.now();try{await R(E())}finally{(0,tm.B)("ai_spec_gen_result",{taskId:j,apiId:t,model:null==T?void 0:T.name,cot:+(null!=w&&!!w.content),provider:null==T||null==(i=T.aiLlmProvider)?void 0:i.name,result:+!C,reason:m.current?"manualStop":C?C:"finish",duration:Math.round(performance.now()-a)})}}),z=(0,Y.A)(()=>{P?$():B()});return(0,eV.Rp)(N,{auto:P}),(0,n.useEffect)(()=>{o&&(h===o||P||B(),v(o))},[h,o,B,P]),(0,eF.A)(()=>{var e;(0,tm.B)("ai_spec_start_result",{model:null==T?void 0:T.name,apiId:t,cot:+(null!=w&&!!w.content),provider:null==T||null==(e=T.aiLlmProvider)?void 0:e.name,result:+!C,reason:C||null})}),(0,a.jsx)("div",{className:eY()(ty,{[tx]:P}),ref:N,children:(0,a.jsxs)("div",{className:"flex flex-col w-full",children:[(0,a.jsxs)("div",{className:eY()(tj,"flex items-center gap-3"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(eZ.A,{title:(0,c.hw)({id:"share"}),children:(0,a.jsx)(eQ.A,{disabled:!0,type:"text",icon:(0,a.jsx)(eR.A,{type:"icon-share-01"})})}),(0,a.jsx)(eZ.A,{title:(0,c.hw)({id:"download"}),children:(0,a.jsx)(eQ.A,{onClick:L,disabled:P||!A,type:"text",icon:(0,a.jsx)(eR.A,{type:"icon-download1"})})})]}),(0,a.jsx)(eQ.A,{icon:(0,a.jsx)(eR.A,{type:P?"icon-CircleStopSolid":"icon-refresh-ccw-01"}),onClick:z,children:(0,c.hw)({id:P?"stop":"ai.workbench.endpointComplianceCheck.recheck"})})]}),(0,a.jsxs)("div",{className:tb,children:[(0,a.jsx)("div",{className:tw,children:(0,c.hw)({id:"ai.workbench.endpointComplianceCheck.report"})}),u&&(0,a.jsx)(tg,{endpoint:u,aiModel:T,done:A&&!P,recordId:j})]}),C&&(0,a.jsx)("div",{className:tA,children:(0,a.jsx)(eX.A,{showIcon:!0,type:"error",message:C})}),w&&(0,a.jsx)("div",{className:tA,children:(0,a.jsx)(eB.A,{className:tS,headerClassName:tC,reasoningContent:w,wrapperClassName:"w-full",autoScroll:!1,markdownRender:_})}),A&&(0,a.jsx)("div",{className:tA,children:(0,a.jsx)(tI,{value:y})}),P&&!A&&!w&&(0,a.jsx)("div",{className:tA,children:(0,a.jsx)(e0.A,{active:!0})})]})})};var tk=i(91455),tT=i(33352),tM=i(709372),tE=i(794397),t_=i(745700),tF=i(453953),tD=i(272164);let tR=(0,n.createContext)({modifyKey:"",operateType:"overview"});var tO=i(129271),tP=i(325318),tL=i(756422),t$=i(744283),tB=i(222267);i(276129);var tz=i(51832),tU=i(563613),tH=i(255529);let tV=e=>{let{tips:t}=e,i=(0,V.Ay)(e=>{var t;let{projectSetting:i}=e;return null==(t=i.projectSettingData)?void 0:t.language}),n=(0,c.J$)(i,{descriptor:{id:"api.designGuideline"}});return(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(G.A,{size:28}),(0,a.jsx)("div",{className:"truncate",style:{fontSize:"var(--ui-font-size-h3, 24px)",fontWeight:"var(--ui-font-weight-600, 600)"},children:n})]}),t]})},tK=tU.default.Provider,{confirm:tq}=X.Ay,tG=["save"],tW=e=>{let{onSubmit:t,isModified:i,handleCancelSubmit:l,requestBtnLoading:r,onChange:s,className:o}=e,{modifyKey:d,operateType:u,setOperateType:p,onModified:m}=(0,n.useContext)(tR),[h]=tH.A.useForm(),v=()=>{null==p||p("overview"),null==m||m(d)},{run:f}=(0,tD.A)(e=>{"overview"!==u&&"save"===e&&h.validateFields().then(()=>{h.submit()})},{wait:500,leading:!0,trailing:!1});return(0,a.jsxs)("div",{className:eY()("flex justify-between px-4 py-2",o),children:[(0,a.jsxs)(tH.A,{className:"w-full flex items-center gap-2",form:h,layout:"inline",onFinish:e=>{t({...e})},onValuesChange:s,children:[(0,a.jsx)("div",{className:"flex-auto truncate",children:(0,a.jsx)(tV,{})}),(0,a.jsxs)("div",{className:"flex",children:["create"!==u&&(0,a.jsx)(eQ.A,{className:"mr-2 ml-4",size:"middle",onClick:()=>{i.current?tq({title:(0,c.hw)({id:"doc.editor.notSave.title"}),icon:(0,a.jsx)(tK,{value:{prefixCls:"appicon"},children:(0,a.jsx)(tz.A,{})}),content:(0,c.hw)({id:"doc.editor.notSave.content"}),onOk(){v(),i.current=!1},width:400,mask:!1,maskClosable:!0,onCancel(){}}):v()},children:(0,c.hw)({id:"doc.action.exitEdit"})}),(0,a.jsx)(tH.A.Item,{noStyle:!0,children:(0,a.jsx)(tP.y,{permission:t$.o.SETTING_BASIC_UPDATE,hiddenToGuest:!0,children:(0,a.jsx)(tL.A,{type:"primary",loading:r,onClick:h.submit,onCancel:l,size:"middle",children:(0,c.hw)({id:"doc.action.submit"})})},"ProjectPrivilegeWrap-delete")})]})]}),(0,a.jsx)(tO.A,{actions:tG,handler:(0,tB.o)(f)})]})},tJ=e=>{let{content:t}=e,{modifyKey:i,onModifying:l,tabIndex:r,onCreated:s,operateType:o,setOperateType:d,onModified:u,moduleId:p}=(0,n.useContext)(tR),m=(0,n.useRef)(!1),h=(0,n.useRef)(!0),v=(0,n.useRef)(),f=(0,n.useRef)(""),g=(0,V.Ay)(e=>{var t;return null==(t=e.project.currentProject)?void 0:t.id}),y=(0,tM.k)(e=>{var t;return null==(t=e.projectGuidelinesMap[g])?void 0:t[0]}),x=(0,Y.A)(()=>tM.k.getState().fetchProjectGuidelines(g)),[A,j]=(0,n.useState)("");(0,n.useEffect)(()=>{t&&(j(t),f.current=t)},[t]);let b=()=>{null==d||d("overview"),null==u||u(i)},{run:w,loading:S,cancel:C}=(0,eT.ZO)(async e=>({data:await tM.k.getState().createProjectGuideline(g,e)}),async e=>{null==s||s(e,r),b(),x()},()=>eD.Ay.error({type:"error",content:(0,c.hw)({id:"message.updateFailure"})}),{isReturnAll:!0,showLoading:!1}),{run:I,loading:N,cancel:k}=(0,eT.eB)(async e=>{await tM.k.getState().updateProjectGuideline(g,null==y?void 0:y.id,e)},async()=>{null==u||u(i),b(),x()},()=>eD.Ay.error({type:"error",content:(0,c.hw)({id:"message.updateFailure"})}),{isReturnAll:!0,showLoading:!1}),T=()=>{null==l||l(i),m.current=!0},{run:M}=(0,tD.A)(async()=>{let e=(0,eq.Oy)({moduleId:p,content:A||""});(null==y?void 0:y.id)?await I(e):await w(e),null==u||u(i),m.current=!1,h.current=!0,v.current=void 0,"create"===o&&(null==d||d("edit"))},{wait:500,leading:!0,trailing:!1});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tW,{className:"py-4",onSubmit:M,handleCancelSubmit:()=>{"edit"===o&&(null==y?void 0:y.id)?k():C()},requestBtnLoading:S||N,isModified:m,onChange:T}),(0,a.jsx)(t_.A,{slugIdPrefix:`${tF.y1}-`,editorConfig:{autofocus:!0},value:A,onChange:e=>{h.current||T(),j(e),m.current||(()=>{if(v.current){let{line:e,ch:t,ctx:{editor:i}}=v.current;i.setCursor(e,t)}})(),h.current=!1}})]})};var tY=i(169508),tZ=i(658006),tQ=i(562506),tX=i(987295);let t0={"doc-container":"doc-container-jNK4Qb",docContainer:"doc-container-jNK4Qb","overview-container":"overview-container-u_kFlK",overviewContainer:"overview-container-u_kFlK","overview-header-container":"overview-header-container-mzEiZK",overviewHeaderContainer:"overview-header-container-mzEiZK","overview-header__title":"overview-header__title-z7WTXG",overviewHeaderTitle:"overview-header__title-z7WTXG","overview-header__visibility":"overview-header__visibility-aHHsn9",overviewHeaderVisibility:"overview-header__visibility-aHHsn9","overview-header-actions":"overview-header-actions-ynyVW3",overviewHeaderActions:"overview-header-actions-ynyVW3","overview-content":"overview-content-qjsx_l",overviewContent:"overview-content-qjsx_l"};var t1=i(700255);let t4=e=>{let{id:t,content:i,showAnchor:l}=e,r=(0,V.Ay)(e=>{var t,i;return null==(i=e.externalURL)||null==(t=i.help)?void 0:t.endpointComplianceCheck}),{setOperateType:s}=(0,n.useContext)(tR),{shouldPreventLinkDefault:o}=(0,tX.A)(),d=(0,V.Ay)(e=>{let{projectSetting:t}=e;return t.projectSettingData}),u=(0,n.useCallback)(()=>{null==s||s("edit")},[s]),p=(0,n.useRef)(null),m="280px";return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:eY()(t0["overview-container"],"w-full h-full flex flex-col","overflow-hidden","relative"),children:[(0,a.jsxs)("div",{className:eY()(t0["overview-header-container"],"w-full flex flex-row justify-center align-top"),style:{maxWidth:l?`calc(1232px + ${m})`:"1232px",margin:"0 auto"},children:[(0,a.jsx)("div",{className:eY()("flex-1 overflow-hidden",t0["overview-header"]),children:(0,a.jsx)(tV,{tips:(0,a.jsxs)("div",{style:{color:"var(--ui-text-color-tertiary)",fontWeight:"var(--ui-font-weight-400, 400)"},children:[(0,a.jsx)("span",{children:(0,c.J$)(null==d?void 0:d.language,{descriptor:{id:"api.designGuideline.tips"}})}),(0,a.jsx)(t1.A,{className:"underline text-color-tertiary",url:r,children:(0,a.jsx)("span",{style:{textDecoration:"underline"},children:(0,c.J$)(null==d?void 0:d.language,{descriptor:{id:"learnMore"}})})})]})})}),(0,a.jsx)("div",{className:eY()(t0["overview-header-actions"]),children:(0,a.jsx)(tP.y,{permission:t$.o.SETTING_BASIC_UPDATE,hiddenToGuest:!0,children:(0,a.jsx)(eQ.A,{className:"ml-5 mr-2",type:"default",size:"middle",onClick:u,children:(0,c.hw)({id:"doc.action.edit"})})})})]}),(0,a.jsx)("div",{className:"flex-1 overflow-auto text-center",ref:p,children:(0,a.jsxs)("div",{className:"relative w-full inline-flex text-left",style:{maxWidth:l?`calc(1232px + ${m})`:"1232px"},children:[(0,a.jsx)("div",{className:eY()(t0["overview-content"],"inline-block pt-1 overflow-hidden flex-1"),children:(0,a.jsx)(e$.A,{value:i,shouldPreventLinkDefault:o,locale:null==d?void 0:d.language,slugIdPrefix:`docId${t}-`,inDocView:!0})}),(0,a.jsx)(tQ.A,{className:eY()("flex-0 sticky"),containerRef:p,style:{height:`calc(100vh - ${132+tY.bJ}px)`,display:l?"inline-block":"none",width:m,flexBasis:m,top:0}})]})})]})})},t3=e=>{let{content:t}=e,[i,n]=(0,tZ.A)(e=>e.width>980);return(0,a.jsx)("div",{className:eY()(t0["doc-container"],"w-full h-full flex overflow-y-hidden relative"),ref:i,children:(0,a.jsx)(t4,{...e,content:t,showAnchor:!!n})})},t8=(0,tT.E)(e=>{var t,i;let{type:l,onModifying:r,modifyKey:s,onModified:o,onCreated:d,tabIndex:c,template:u}=e,p=(0,V.Ay)(e=>{var t,i;return null!=(i=null==(t=e.project.currentProject)?void 0:t.id)?i:0}),m=(0,tM.k)(e=>{var t;return null==(t=e.projectGuidelinesMap[p])?void 0:t[0]}),[h,v]=(0,n.useState)(l||"overview"),f=!("create"===l||m);(0,n.useEffect)(()=>{l&&(v(l),"create"===l&&(null==r||r(s)))},[l,r,s]);let g=(0,n.useMemo)(()=>({tabIndex:c,modifyKey:s,onModified:o,onModifying:r,onCreated:d,operateType:h,setOperateType:v}),[c,s,o,r,d,h]);return f?(0,a.jsx)("div",{className:"w-full h-full flex justify-center items-center",children:(0,a.jsx)(tE.A,{})}):(0,a.jsx)(tR.Provider,{value:g,children:(0,a.jsxs)("div",{className:"w-full h-full flex",children:["overview"===h&&m&&(0,a.jsx)(t3,{id:null==m?void 0:m.id,content:null!=(t=null==m?void 0:m.content)?t:""}),"overview"!==h&&(0,a.jsx)("div",{className:eY()(t0["doc-container"],"w-full h-full flex flex-col flex-1 relative"),children:(0,a.jsx)(tJ,{content:null!=(i=null==m?void 0:m.content)?i:u})})]})})},C.IncubatorScope.DOC_VIEWER);var t6=i(541605);let t2=(0,C.dynamic)({loading:S.A,loader:async()=>{let{default:e}=await Promise.all([i.e("21583"),i.e("33689"),i.e("57839")]).then(i.bind(i,114665));return e}}),t5=(0,C.dynamic)({loading:S.A,loader:async()=>{let{default:e}=await i.e("22718").then(i.bind(i,635689));return e}});i(559708);let t7=(0,C.dynamic)({loading:S.A,loader:async()=>{let{HttpApiSimpleModeCreateEntry:e}=await Promise.all([i.e("720"),i.e("73034"),i.e("4276"),i.e("48737"),i.e("87053"),i.e("80232"),i.e("33898"),i.e("67007"),i.e("72168"),i.e("90348"),i.e("47094"),i.e("75931"),i.e("34351"),i.e("38390"),i.e("59057"),i.e("53281"),i.e("36943"),i.e("21583"),i.e("91192"),i.e("18261"),i.e("48579"),i.e("8704"),i.e("16336"),i.e("71877"),i.e("51235"),i.e("13996"),i.e("75562"),i.e("37730"),i.e("73956"),i.e("8769"),i.e("60293"),i.e("67282"),i.e("86781"),i.e("39622"),i.e("15505"),i.e("31766"),i.e("21172"),i.e("24879"),i.e("4720"),i.e("2527"),i.e("26304"),i.e("59065"),i.e("33987"),i.e("8147"),i.e("25082"),i.e("38929"),i.e("14701"),i.e("10750"),i.e("60070"),i.e("97856"),i.e("73132"),i.e("79800"),i.e("44792"),i.e("33689"),i.e("90812"),i.e("99857"),i.e("14937"),i.e("91377")]).then(i.bind(i,87632));return e}}),t9=(0,C.dynamic)({loading:S.A,loader:async()=>{let{default:e}=await Promise.all([i.e("67007"),i.e("60293"),i.e("86781"),i.e("39622"),i.e("31766"),i.e("21172"),i.e("24879"),i.e("36052")]).then(i.bind(i,121620));return e}});var ie=i(671345);let it=(0,C.dynamic)({loading:S.A,loader:async()=>{let{RpcMethodSimpleModeCreateEntry:e}=await Promise.all([i.e("720"),i.e("73034"),i.e("4276"),i.e("48737"),i.e("87053"),i.e("80232"),i.e("33898"),i.e("67007"),i.e("72168"),i.e("34351"),i.e("23240"),i.e("48579"),i.e("8704"),i.e("16336"),i.e("71877"),i.e("51235"),i.e("13996"),i.e("75562"),i.e("37730"),i.e("60293"),i.e("86781"),i.e("39622"),i.e("15505"),i.e("31766"),i.e("21172"),i.e("24879"),i.e("4720"),i.e("22483"),i.e("82361")]).then(i.bind(i,926647));return e}}),ii=(0,C.dynamic)({loading:S.A,loader:async()=>{let{default:e}=await Promise.all([i.e("4276"),i.e("67007"),i.e("23240"),i.e("8704"),i.e("73956"),i.e("60293"),i.e("86781"),i.e("39622"),i.e("31766"),i.e("21172"),i.e("24879"),i.e("22483"),i.e("30965")]).then(i.bind(i,606268));return e}}),ia=(0,C.dynamic)({loading:S.A,loader:async()=>{let{default:e}=await Promise.all([i.e("67007"),i.e("23240"),i.e("60293"),i.e("86781"),i.e("39622"),i.e("31766"),i.e("21172"),i.e("24879"),i.e("22483"),i.e("94374")]).then(i.bind(i,842741));return e}}),il=(0,C.dynamic)({loading:S.A,loader:async()=>{let{default:e}=await Promise.all([i.e("720"),i.e("73034"),i.e("48737"),i.e("87053"),i.e("80232"),i.e("33898"),i.e("48579"),i.e("16336"),i.e("71877"),i.e("51235"),i.e("13996"),i.e("75562"),i.e("89327")]).then(i.bind(i,818196));return e}}),ir=(0,C.dynamic)({loading:S.A,loader:async()=>{let{default:e}=await Promise.all([i.e("720"),i.e("73034"),i.e("48737"),i.e("87053"),i.e("80232"),i.e("33898"),i.e("48579"),i.e("16336"),i.e("71877"),i.e("51235"),i.e("13996"),i.e("75562"),i.e("89327")]).then(i.bind(i,923962));return e}}),is=(0,C.dynamic)({loading:S.A,loader:async()=>{let{default:e}=await Promise.all([i.e("720"),i.e("73034"),i.e("48737"),i.e("87053"),i.e("80232"),i.e("33898"),i.e("48579"),i.e("16336"),i.e("71877"),i.e("51235"),i.e("13996"),i.e("75562"),i.e("89327")]).then(i.bind(i,427384));return e}}),io=(0,C.dynamic)({loading:S.A,loader:async()=>{let{default:e}=await Promise.all([i.e("51235"),i.e("67096")]).then(i.bind(i,429229));return e}}),ic=(0,C.dynamic)({loading:S.A,loader:async()=>{let{default:e}=await Promise.all([i.e("720"),i.e("73034"),i.e("48737"),i.e("87053"),i.e("80232"),i.e("33898"),i.e("72168"),i.e("21583"),i.e("19738"),i.e("48579"),i.e("16336"),i.e("71877"),i.e("51235"),i.e("13996"),i.e("75562"),i.e("37730"),i.e("15505"),i.e("4720"),i.e("35383"),i.e("27732")]).then(i.bind(i,649788));return e}}),iu=(0,C.dynamic)({loading:S.A,loader:async()=>{let{WebSocketApiSimpleModeCreateEntry:e}=await Promise.all([i.e("720"),i.e("73034"),i.e("48737"),i.e("87053"),i.e("80232"),i.e("33898"),i.e("72168"),i.e("21583"),i.e("19738"),i.e("48579"),i.e("16336"),i.e("71877"),i.e("51235"),i.e("13996"),i.e("75562"),i.e("37730"),i.e("15505"),i.e("4720"),i.e("35383")]).then(i.bind(i,396235));return e}});var ip=i(622521),im=i(895335),ih=i(553047),iv=i(348266),ig=i(372178),iy=i(86456),ix=i(269966),iA=i(967860),ij=i(202182),ib=i(404529);let iw=l().memo(e=>{let{id:t,parentId:i,name:n,type:l,method:r,moduleId:s}=e,[o,d]=(0,ij.A)(()=>"http"!==l&&"webhook"!==l?[n,l]:[n,String(r)],[n,l,r]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ib.Qk,{item:{id:t,parentId:i,moduleId:s},children:(0,a.jsx)(e6.mn,{abbr:!0,method:d,className:"text-xs font-medium",style:{marginRight:0},apiType:l,hiddenMethod:"webhook"===l})}),(0,a.jsx)("span",{children:o})]})});var iS=i(769923);let iC=e=>{let{name:t,kind:i}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(iS.i,{kind:i}),(0,a.jsx)("span",{style:{marginLeft:4},children:t})]})},iI=(0,C.connect)(e=>{let{webSocketApiDetail:t}=e;return{webSocketApiMap:null==t?void 0:t.apiDetailMap}})(e=>{let{id:t,name:i,webSocketApiMap:n}=e,[l]=(0,ij.A)(()=>{var e;return i?[i]:[null==n||null==(e=n[(0,ee.toSafeInteger)(t)])?void 0:e.name]},[t,i,n]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eR.A,{type:"icon-websocket",style:{marginRight:4},color:"var(--ui-orange-6)"}),(0,a.jsx)("span",{children:l})]})});var iN=i(960454),ik=i(984999),iT=i(381711),iM=i(4584),iE=i(2183);let i_=["apiDetailFolder","apiDetail","apiCase","socketService","socketApi","socketApiCase","apiSchema","apiSchemaFolder","webSocketApi","rpcFolder","rpcMethod","rpcModule","rpcService","httpResponse","CUSTOM_ENDPOINT","SECURITY_SCHEME","SECURITY_SCHEME_COMBINATION","SOCKET_IO_API","MCP_CLIENT","webhookApi","TEST_CASE","OAS_COMPONENT"],iF={apiDetailFolder:{selector:e=>({rootFolderMap:e.apiDetailFolder.rootFolderMap,apiDetailFolderMap:e.apiDetailFolder.apiDetailFolderMap}),renderTabChildren:(e,t)=>{var i,n,l,r;let{rootFolderMap:s,apiDetailFolderMap:o}=e||{},d=t.id===iA.Kj&&t.moduleId?null!=(n=null==(i=s[t.moduleId])?void 0:i.id)?n:0:t.id,c=null!=(l=null==o?void 0:o[d])?l:t,u=null!=(r=null==t?void 0:t.name)?r:null==c?void 0:c.name;return{icon:(0,a.jsx)(iN.Vi,{item:{id:d,parentId:null==c?void 0:c.parentId,moduleId:null==c?void 0:c.moduleId},children:(0,a.jsx)(eR.A,{type:"icon-FolderDefault",style:{fontSize:16}})}),tabContent:(0,a.jsx)("span",{children:u}),title:u}}},apiDetail:{selector:e=>e.apiDetail.apiDetailMap,renderTabChildren:(e,t,i)=>{var n,l,r,s,o,d,c,u;let p="path"===i?"path":"name",m=null!=(n=null==e?void 0:e[null==t?void 0:t.id])?n:t,h=null!=(r=null!=(l=null==m?void 0:m[p])?l:null==t?void 0:t[p])?r:null==t?void 0:t.name,v=null!=(s=null==t?void 0:t.useMethodInData)&&s?null==t?void 0:t.method:null!=(o=null==m?void 0:m.method)?o:null==t?void 0:t.method,f={id:null!=(d=null==m?void 0:m.id)?d:null==t?void 0:t.id,parentId:null==m?void 0:m.folderId,type:null!=(c=null==m?void 0:m.type)?c:null==t?void 0:t.type,method:v,moduleId:null!=(u=null==m?void 0:m.moduleId)?u:null==t?void 0:t.moduleId};return{tabContent:(0,a.jsx)(iw,{...f,name:h}),title:h}}},webSocketApi:{selector:e=>e.webSocketApiDetail.apiDetailMap,renderTabChildren:(e,t,i)=>{var n,l,r;let s="path"===i?"path":"name",o=null!=(n=null==e?void 0:e[t.id])?n:t,d=null!=(r=null!=(l=null==o?void 0:o[s])?l:null==t?void 0:t[s])?r:null==t?void 0:t.name;return{tabContent:(0,a.jsx)(iI,{...t,name:d}),title:d}}},rpcMethod:{selector:e=>e.rpcMethodDetail.apiDetailMap,renderTabChildren:(e,t)=>{var i,n,l,r;let s=null!=(l=t.kind)?l:null==e||null==(i=e[t.id])?void 0:i.kind,o=null!=(r=t.name)?r:null==e||null==(n=e[t.id])?void 0:n.name;return{tabContent:(0,a.jsx)(iC,{...t,kind:s,name:o}),title:t.name}}},apiCase:{selector:e=>({httpApiMap:e.apiDetail.apiDetailMap,apiCaseMap:e.apiCase.apiCaseMap}),renderTabChildren:(e,t)=>{var i,n,l,r;let{httpApiMap:s,apiCaseMap:o}=e||{},d=null!=(l=null==o?void 0:o[t.id])?l:t,c=null!=(r=null==d?void 0:d.name)?r:null==t?void 0:t.name,u=(null==s||null==(i=s[null==t?void 0:t.apiDetailId])?void 0:i.name)||(null==s||null==(n=s[null==d?void 0:d.apiDetailId])?void 0:n.name),p=u?`${u} (${c})`:c;return{icon:(0,a.jsx)(ib.Qk,{item:{id:t.id,parentId:null==d?void 0:d.apiDetailId,moduleId:null==d?void 0:d.moduleId},isEndpointCase:!0,children:(0,a.jsx)(e6.a9,{style:{color:(0,iE.IF)()?"var(--ui-blue-6)":"var(--ui-purple-6)",marginRight:0},size:16})}),tabContent:(0,a.jsx)("span",{children:p}),title:p}}},TEST_CASE:{selector:e=>({testCaseMap:e.testCase.map}),renderTabChildren:(e,t)=>{var i;let{testCaseMap:n}=e||{},l=null!=(i=null==n?void 0:n[t.id])?i:t,r=(null==l?void 0:l.name)||(null==t?void 0:t.name)||(0,c.hw)({id:"untitled"});return{icon:(0,a.jsx)(eR.A,{type:"icon-TestCase",style:{color:(0,iE.IF)()?"var(--ui-blue-6)":"var(--ui-yellow-6)",marginRight:4},size:16}),tabContent:(0,a.jsx)("span",{children:r}),title:r}}},socketService:{selector:e=>e.socketService.socketServiceMap,renderTabChildren:(e,t)=>{var i,n;let l=null!=(i=null==e?void 0:e[t.id])?i:t,r=null!=(n=null==l?void 0:l.name)?n:null==t?void 0:t.name;return{icon:(0,a.jsx)(iv.A,{style:{fontSize:18}}),tabContent:(0,a.jsx)("span",{children:r}),title:r}}},socketApi:{selector:e=>e.socketApi.socketApiMap,renderTabChildren:(e,t)=>{var i,n;let l=null!=(i=null==e?void 0:e[t.id])?i:t,r=null!=(n=null==l?void 0:l.name)?n:null==t?void 0:t.name;return{icon:(0,a.jsx)(e6.mn,{abbr:!0,method:"socket"}),tabContent:(0,a.jsx)("span",{children:r}),title:r}}},socketApiCase:{selector:e=>({socketApiMap:e.socketApiCase.socketApiCaseMap,socketApiCaseMap:e.socketApiCase.socketApiCaseMap}),renderTabChildren:(e,t)=>{var i,n,l,r;let{socketApiMap:s,socketApiCaseMap:o}=e||{},d=null!=(l=null==o?void 0:o[t.id])?l:t,c=null!=(r=null==d?void 0:d.name)?r:null==t?void 0:t.name,u=(null==s||null==(i=s[null==d?void 0:d.apiId])?void 0:i.name)||(null==s||null==(n=s[null==d?void 0:d.apiId])?void 0:n.name),p=u?`${u} (${c})`:c;return{icon:(0,a.jsx)(e6.a9,{}),tabContent:(0,a.jsx)("span",{children:p}),title:p}}},apiSchema:{selector:e=>e.apiSchema.map,renderTabChildren:(e,t)=>{var i;let n=null!=(i=null==e?void 0:e[t.id])?i:t,l=(null==n?void 0:n.displayName)||(null==n?void 0:n.name)||(null==t?void 0:t.displayName)||(null==t?void 0:t.name);return{icon:(0,a.jsx)(iT.iO,{item:{id:t.id,parentId:null==n?void 0:n.folderId},children:(0,a.jsx)(e6.NZ,{size:16,style:{marginRight:0}})}),tabContent:(0,a.jsx)("span",{children:l}),title:l}}},apiSchemaFolder:{selector:e=>e.apiSchemaFolder.apiSchemaFolderMap,renderTabChildren:(e,t)=>{var i,n;let l=null!=(i=null==e?void 0:e[t.id])?i:t,r=null!=(n=null==t?void 0:t.name)?n:null==l?void 0:l.name;return{icon:(0,a.jsx)(ik.MZ,{item:{id:t.id,parentId:null==l?void 0:l.parentId},children:(0,a.jsx)(eR.A,{type:"icon-FolderDefault",style:{fontSize:16}})}),tabContent:(0,a.jsx)("span",{children:r}),title:r}}},rpcModule:{selector:e=>e.rpcModuleDetail.apiDetailMap,renderTabChildren:(e,t)=>{var i,n,l,r,s,o;let d=null!=(s=null==e||null==(i=e[null==t?void 0:t.id])?void 0:i.name)?s:null==t?void 0:t.name,c=(0,a.jsx)(eR.A,{type:"icon-protobuf",style:{marginRight:4}});"DUBBO"===(0,V.DA)(e=>{var t;return null==(t=e.project.currentProject)?void 0:t.type})&&(c=(0,a.jsx)(eR.A,{type:"icon-component-011",style:{color:"var(--ui-blue-6)",marginRight:4}}));let u=null!=(o=null==e||null==(n=e[null==t?void 0:t.id])?void 0:n.dataSourceId)?o:0;"SERVER_REFLECTION"===(null==(r=(0,V.DA)(e=>e.projectDataSource.projectDataSourceMap))||null==(l=r[u])?void 0:l.type)&&(c=(0,a.jsx)(eR.A,{type:"icon-CloudBlank",style:{marginRight:4}}));let p=null==d?void 0:d.replace(/^\s*filename:/,"");return{icon:c,tabContent:(0,a.jsx)("span",{children:p}),title:p}}},rpcService:{selector:e=>e.rpcServiceDetail.apiDetailMap,renderTabChildren:(e,t)=>{var i,n;let l=null!=(n=null==e||null==(i=e[null==t?void 0:t.id])?void 0:i.name)?n:null==t?void 0:t.name;return{icon:(0,a.jsx)(im.h,{style:{marginRight:4}}),tabContent:(0,a.jsx)("span",{children:l}),title:l}}},rpcFolder:{selector:e=>e.apiDetailFolder.apiDetailFolderMap,renderTabChildren:(e,t)=>{var i,n;let l=null!=(i=null==e?void 0:e[t.id])?i:t,r=null!=(n=null==l?void 0:l.name)?n:null==t?void 0:t.name;return{icon:(0,a.jsx)(eR.A,{type:"icon-FolderDefault",style:{marginRight:4}}),tabContent:(0,a.jsx)("span",{children:r}),title:r}}},httpResponse:{selector:e=>e.apiResponse.apiResponseMap,renderTabChildren:(e,t)=>{var i,n;let l=null!=(i=null==e?void 0:e[t.id])?i:t,r=null!=(n=null==l?void 0:l.name)?n:t.name;return{icon:(0,a.jsx)(eR.A,{type:"icon-response-component",title:r,color:(0,iE.IF)()?"var(--ui-blue-6)":"var(--ui-purple-6)"}),tabContent:(0,a.jsx)("span",{className:"ml-1",children:r}),title:r}}},CUSTOM_ENDPOINT:{selector:e=>e.customEndpoint.map,renderTabChildren:(e,t)=>{var i,n;let l=null==e?void 0:e[t.id],r=null!=(i=null==l?void 0:l.name)?i:null==t?void 0:t.name,s=null!=(n=null==l?void 0:l.protocol)?n:null==t?void 0:t.protocol;return{icon:(0,a.jsx)(ih.w,{abbr:!0,protocol:s}),tabContent:(0,a.jsx)("span",{className:"ml-1",children:r}),title:r}}},SECURITY_SCHEME:{selector:e=>e.securityScheme.securitySchemeMap,renderTabChildren:(e,t)=>{var i;let n=null==e?void 0:e[t.id],l=null!=(i=null==n?void 0:n.name)?i:null==t?void 0:t.name;return{icon:"combination"===t.authType?(0,a.jsx)(eR.A,{type:"icon-ShieldKeyholeGroup",title:l,color:"var(--ui-cyan-6)"}):(0,a.jsx)(eR.A,{type:"icon-ShieldKeyhole",title:l,color:"var(--ui-blue-6)"}),tabContent:(0,a.jsx)("span",{className:"ml-1",children:l}),title:l}}},SECURITY_SCHEME_COMBINATION:{selector:e=>e.securityScheme.securitySchemeMap,renderTabChildren:(e,t)=>{var i;let n=null==e?void 0:e[t.id],l=null!=(i=null==n?void 0:n.name)?i:null==t?void 0:t.name;return{icon:(0,a.jsx)(eR.A,{type:"icon-ShieldKeyholeGroup",title:l,color:"var(--ui-cyan-6)"}),tabContent:(0,a.jsx)("span",{className:"ml-1",children:l}),title:l}}},SOCKET_IO_API:{selector:e=>e.socketIOApi.map,renderTabChildren:(e,t,i)=>{var n,l;let r=null==e?void 0:e[t.id],s="path"===i?"path":"name",o=null!=(l=null!=(n=null==r?void 0:r[s])?n:null==t?void 0:t[s])?l:null==t?void 0:t.name;return{icon:(0,a.jsx)(ig.A,{title:o,size:14}),tabContent:(0,a.jsx)("span",{className:"ml-1",children:o}),title:o}}},MCP_CLIENT:{selector:e=>e.mcpClient.map,renderTabChildren:(e,t,i)=>{var n,l;let r=null==e?void 0:e[t.id],s="path"===i?"url":"name",o=null!=(l=null!=(n=null==r?void 0:r[s])?n:null==t?void 0:t[s])?l:null==t?void 0:t.name;return{icon:(0,a.jsx)(iy.A,{title:o,size:14}),tabContent:(0,a.jsx)("span",{className:"ml-1",children:o}),title:o}}},webhookApi:{selector:e=>e.apiDetail.apiDetailMap,renderTabChildren:(e,t,i)=>{var n,l,r,s,o,d,c;let u="path"===i?"path":"name",p=null!=(n=null==e?void 0:e[null==t?void 0:t.id])?n:t,m=null!=(r=null!=(l=null==p?void 0:p[u])?l:null==t?void 0:t[u])?r:null==t?void 0:t.name,h={id:null!=(s=null==p?void 0:p.id)?s:null==t?void 0:t.id,parentId:null==p?void 0:p.folderId,type:"webhook",method:null!=(d=null!=(o=null==p?void 0:p.method)?o:null==t?void 0:t.method)?d:ix.Zl.GET,moduleId:null!=(c=null==p?void 0:p.moduleId)?c:null==t?void 0:t.moduleId};return{tabContent:(0,a.jsx)(iw,{...h,name:m}),title:m}}},OAS_COMPONENT:{selector:e=>e.oasComponent.oasComponentMap,renderTabChildren:(e,t)=>{var i,n;let l=null!=(i=null==e?void 0:e[t.id])?i:t,r=null!=(n=null==l?void 0:l.name)?n:null==t?void 0:t.name;return{icon:(0,a.jsx)(eR.A,{type:"icon-FileDefault",size:16,className:"mr-1"}),tabContent:(0,a.jsx)("span",{className:"ml-1",children:r}),title:r}}}},iD=e=>{let{type:t,onMouseMiddleDown:i,data:n}=e,{selector:l,renderTabChildren:r}=iF[t],s=(0,V.Ay)(l),o=(0,v.IA)(e=>e.defaultProjectModuleId),d=(null==n?void 0:n.moduleId)||(null==s?void 0:s.moduleId)||o,c=(0,eO.Pj)(ny,e=>{var t;return!!e.tabPanes.length&&(null==(t=e.activeKey)?void 0:t.includes("MCP_CLIENT"))}),u=(0,iM.d4)(d),{tabContent:p,icon:m,title:h}=(0,ij.A)(()=>r(s,n,u),[s,n,u]),f=(0,Y.A)(e=>{1===e.button&&(null==i||i(e))});return(0,a.jsxs)("div",{className:"flex flex-row items-center justify-start w-full",onMouseDown:f,title:h,style:{minHeight:22,filter:c&&"MCP_CLIENT"!==t?"grayscale(1)":void 0},children:[m,(0,a.jsx)("div",{className:"truncate flex-1",children:p}),(0,a.jsx)("span",{dangerouslySetInnerHTML:{__html:"&nbsp;"}})]})};var iR=i(663946),iO=i(30868);let iP=["doc","httpRequest"],iL={doc:{store:p.Ay,selector:e=>e.docMap,renderTabChildren:(e,t)=>{var i,n;let l=null!=(i=null==e?void 0:e[t.id])?i:t,r=null!=(n=null==l?void 0:l.name)?n:null==t?void 0:t.name;return{icon:(0,a.jsx)(iO.Rn,{item:{id:t.id,parentId:null==l?void 0:l.folderId,moduleId:null==l?void 0:l.moduleId},children:(0,a.jsx)(eR.A,{type:"icon-file-docs",size:16})}),tabContent:(0,a.jsx)("span",{children:r}),title:r}}},httpRequest:{store:iR.F,selector:e=>e.httpRequestMap,renderTabChildren:(e,t,i)=>{var n,l,r;let s="path"===i?"path":"name",o=null!=(n=null==e?void 0:e[t.id])?n:t,d=null!=(r=null!=(l=null==o?void 0:o[s])?l:null==t?void 0:t[s])?r:null==t?void 0:t.name;return{icon:(0,a.jsx)(eR.A,{style:{marginRight:4},type:"icon-button-lightning",color:"var(--ui-green-6)"}),tabContent:(0,a.jsx)("span",{children:d}),title:d}}}},i$=e=>{let{type:t,onMouseMiddleDown:i,data:n}=e,{store:l,selector:r,renderTabChildren:s}=iL[t],o=(0,eO.Pj)(l,r),d=(0,v.IA)(e=>e.defaultProjectModuleId),c=(null==n?void 0:n.moduleId)||(null==o?void 0:o.moduleId)||d,u=(0,iM.d4)(c),{tabContent:p,icon:m,title:h}=(0,ij.A)(()=>s(o,n,u),[o,n,u]),f=(0,Y.A)(e=>{1===e.button&&(null==i||i(e))});return(0,a.jsxs)("div",{className:"flex flex-row items-center justify-start w-full",onMouseDown:f,title:h,style:{minHeight:22},children:[m,(0,a.jsx)("div",{className:"truncate flex-1",children:p}),(0,a.jsx)("span",{dangerouslySetInnerHTML:{__html:"&nbsp;"}})]})},iB=e=>{let{type:t,onMouseMiddleDown:i}=e;return t&&i_.includes(t)?(0,a.jsx)(iD,{type:t,onMouseMiddleDown:i,data:e.data}):t&&iP.includes(t)?(0,a.jsx)(i$,{type:t,onMouseMiddleDown:i,data:e.data}):(0,a.jsx)(ip.A,{...e})};var iz=i(328851),iU=i(218362),iH=i(524381),iV=i(820182);let iK="container-EaabGr";function iq(e){let{className:t,...i}=e;return(0,a.jsx)(iV.A,{...i,className:eY()(iK,t)})}var iG=i(279142),iW=i(721537),iJ=i(306680),iY=i(877789),iZ=i(324565),iQ=i(383117),iX=i(364099),i0=i(649269),i1=i(686263);let i4="container-DOKGu2";var i3=i(943975);let i8={labelCol:{xs:24},wrapperCol:{xs:24},colon:!1,labelAlign:"left"};function i6(e){let{folderId:t,moduleId:i,className:n}=e,l=(0,i3.J)(i),[r,s]=(0,iQ.A)(e=>{var t;let i=null!=(t=null==e?void 0:e.width)?t:1/0;return i>780?{span:6}:i>520?{span:12}:{span:24}},!0,(e,t)=>e.span===t.span);return(0,a.jsxs)(iX.A,{className:eY()(i4,n),gutter:[16,16],ref:r,children:[(0,a.jsx)(i0.A,{...s,children:(0,a.jsx)(tH.A.Item,{name:"status",...i8,className:"mb-0",label:(0,a.jsx)(C.FormattedMessage,{id:"api.label.status"}),rules:[{required:!0}],children:(0,a.jsx)(tP.y,{permission:t$.o.ENDPOINT_ENDPOINT_CDU,children:(0,a.jsx)(iJ.A,{})})})}),(0,a.jsx)(i1.X,{baseFormItemLayout:s,tailFormItemLayout:i8}),(0,a.jsx)(i0.A,{...s,children:(0,a.jsx)(tH.A.Item,{name:"maintainerId",...i8,className:"mb-0",label:(0,a.jsx)(C.FormattedMessage,{id:"api.label.responsible"}),children:(0,a.jsx)(tP.y,{permission:t$.o.ENDPOINT_ENDPOINT_CDU,children:(0,a.jsx)(iW.A,{allowClear:!0})})})}),(0,a.jsx)(i0.A,{...s,children:(0,a.jsx)(tH.A.Item,{name:"tags",...i8,className:"mb-0",label:(0,a.jsx)(C.FormattedMessage,{id:"api.label.tags"}),children:(0,a.jsx)(tP.y,{permission:t$.o.ENDPOINT_ENDPOINT_CDU,children:(0,a.jsx)(iY.$,{placeholder:(0,c.hw)({id:"message.customApiFields.label.tooltip.multipleTag"})})})})}),(0,a.jsx)(i0.A,{...s,hidden:!l,children:(0,a.jsx)(iZ.Z,{children:(0,a.jsx)(tH.A.Item,{name:"serverId",...i8,className:"mb-0",label:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C.FormattedMessage,{id:"api.label.server"}),(0,a.jsx)(eZ.A,{className:"ml-1",title:(0,a.jsx)(C.FormattedMessage,{id:"message.title.usingPrefixUrlInEnvironment",values:{protocol:"http",securityProtocol:"https"}}),children:(0,a.jsx)(eR.A,{type:"icon-help-o",color:"var(--ui-disabled-color)"})})]}),children:(0,a.jsx)(tP.y,{permission:t$.o.ENDPOINT_ENDPOINT_CDU,children:(0,a.jsx)(iZ.A,{folderId:t,moduleId:i})})})})}),(0,a.jsx)(i1.A,{name:"customEndpointFields",options:{},baseFormItemLayout:s,tailFormItemLayout:i8})]})}var i2=i(138249),i5=i(123022),i7=i(476136),i9=i(411576);let ae=`### Request

<Tabs>
  <Tab title="Schema">
  </Tab>
  <Tab title="Example">
  </Tab>
</Tabs>

### Response

<Tabs>
  <Tab title="Schema">
  </Tab>
  <Tab title="Example">
  </Tab>
</Tabs>`,at="container-naSlbs";function ai(e){let{id:t,folderId:i,moduleId:l,onCreated:r,onUpdated:s,onCancel:o}=e,[d]=tH.A.useForm(),[u,p]=(0,n.useState)(ae),[m,h]=(0,n.useState)(!1),[v,f]=(0,n.useState)(!1),g=(0,C.useModel)("projectCustomApiField",e=>e.data);(0,eF.A)(async()=>{t&&(f(!0),await (0,C.dispatchFetchCustomEndpointTemplate)(t,e=>{let t=(0,iG.M2)(e.customEndpointFields||{},g);d.setFieldsValue({...e,customEndpointFields:t}),p(e.content||"")}),f(!1))});let y=async()=>{var e;let i=d.getFieldsValue(),a=null!=(e=(0,iG.i8)(i.customEndpointFields,g))?e:{};h(!0),t?await (0,C.dispatchUpdateCustomEndpointTemplate)({...i,content:u,customEndpointFields:a,id:t},e=>{null==s||s(e)},{isHideLoading:!0}):await (0,C.dispatchCreateCustomEndpointTemplate)({...i,content:u,customEndpointFields:a},e=>{null==r||r(e)},{isHideLoading:!0}),h(!1)};return v?(0,a.jsx)(iz.A,{loading:!0,className:"px-4"}):(0,a.jsxs)(tH.A,{name:"custom-endpoint-template",labelAlign:"left",autoComplete:"off",className:at,form:d,onFinish:y,initialValues:{method:"",status:ix.pQ.released},children:[(0,a.jsxs)("div",{className:"flex flex-col overflow-auto flex-auto",children:[(0,a.jsxs)("div",{className:"px-4 pb-4 w-full flex-none",children:[(0,a.jsx)(tH.A.Item,{noStyle:!0,name:"path",children:(0,a.jsx)(iV.A,{placeholder:(0,c.hw)({id:"customEndpoint.uri"})})}),(0,a.jsx)(i6,{folderId:i,moduleId:l})]}),(0,a.jsx)("div",{style:{minHeight:200},className:"flex flex-col w-full h-full flex-auto",children:(0,a.jsx)(t_.A,{docId:t,moduleId:l,editorConfig:{autofocus:!1},value:u,onChange:e=>{p(e)}})})]}),(0,a.jsx)(i9.A,{submitBtnLoading:m,onCancel:o})]})}var aa=i(722339),an=i(653814),al=i(343197),ar=i(819463);function as(e){let{initialValues:t,onSubmit:i}=e,l=(0,n.useRef)(null),r=(0,n.useRef)(null),[s,o]=(0,n.useState)((null==t?void 0:t.protocol)||""),[d,u]=(0,n.useState)((null==t?void 0:t.color)||"purple");return(0,ar.A)(()=>{null==i||i({color:d,protocol:s})},[l,r.current?r:l]),(0,a.jsx)("div",{ref:l,onClick:()=>console.log("onClick"),children:(0,a.jsx)(iV.A,{autoFocus:!0,style:{width:150},maxLength:10,placeholder:(0,c.hw)({id:"customEndpoint.protocol"}),defaultValue:s,addonBefore:(0,a.jsx)(al.$,{overlayRef:r,value:d,onChange:u}),onChange:e=>o(e.target.value),onKeyPress:e=>{("Enter"===e.key||13===e.keyCode)&&(null==i||i({color:d,protocol:s}))}})})}let ao="container-nZCp71",ad="item-frJcPG",ac="edit-icon-xru1on";function au(e){let{onEditTemplate:t,onSaving:i,onSaved:l}=e,r=(0,V.Ay)(e=>e.customEndpointTemplate.list),[s,o]=(0,n.useState)(),[d,u]=(0,n.useState)(),[p,m]=(0,n.useState)(),[h,v]=(0,n.useState)([]);(0,n.useEffect)(()=>{v([...r])},[r]);let f=async e=>{null==i||i(),await (0,C.dispatchDeleteCustomEndpointTemplate)(e.id,()=>(0,C.dispatchFetchCustomEndpointTemplateList)(),{isHideLoading:!0,isHideSuccessMessage:!0}),null==l||l()},g=async e=>{null==i||i(),await (0,C.dispatchReorderCustomEndpointTemplateList)(e,()=>(0,C.dispatchFetchCustomEndpointTemplateList)(),{isHideLoading:!0,isHideSuccessMessage:!0}),null==l||l()};return(0,a.jsx)(aa.b,{className:ao,itemLayout:"horizontal",dataSource:h,renderItem:(e,n)=>{var r;return(0,a.jsx)(aa.b.Item,{dndType:"CUSTOM_ENDPOINT_TEMPLATE_ITEM",index:n,className:ad,onMouseEnter:()=>{m(e.id)},onMouseLeave:()=>{m(void 0)},onReorder:g,children:(0,a.jsxs)("div",{className:"w-full flex items-center justify-between gap-2",children:[e.id===s?(0,a.jsx)(as,{initialValues:e,onSubmit:async t=>{let a=h.find(e=>e.protocol===t.protocol);a&&a.id!==e.id?eD.Ay.error((0,c.hw)({id:"customEndpointTemplate.protocolAlreadyExists"})):(o(void 0),(0,ee.isEqual)(t,{protocol:e.protocol,color:e.color})||(v(h.map(i=>i.id===e.id?{...e,...t}:i)),null==i||i(),e.id===d?await (0,C.dispatchCreateCustomEndpointTemplate)({...e,...t},()=>(0,C.dispatchFetchCustomEndpointTemplateList)(),{isHideLoading:!0,isHideSuccessMessage:!0,onFailure:()=>(0,C.dispatchFetchCustomEndpointTemplateList)()}):await (0,C.dispatchUpdateCustomEndpointTemplate)({id:e.id,...t},()=>(0,C.dispatchFetchCustomEndpointTemplateList)(),{isHideLoading:!0,isHideSuccessMessage:!0,onFailure:()=>(0,C.dispatchFetchCustomEndpointTemplateList)()}),null==l||l()))}}):(0,a.jsxs)("div",{className:"flex items-center gap-2",style:{minHeight:32},children:[(0,a.jsx)(e6.K4,{protocol:e.protocol,color:e.color}),!s&&(0,a.jsx)(eR.A,{type:"icon-edit-01",className:ac,onClick:()=>{setTimeout(()=>{o(e.id)})}})]}),(r=e).id!==p||s||r.id===d?(0,a.jsx)(eR.A,{type:"icon-dots-horizontal",style:{margin:"0 5px"}}):(0,a.jsxs)(eQ.A.Group,{size:"small",children:[(0,a.jsx)(eZ.A,{title:(0,a.jsx)(c.sA,{id:"customEndpointTemplate.template"}),children:(0,a.jsx)(tP.y,{permission:t$.o.ENDPOINT_ENDPOINT_CDU,children:(0,a.jsx)(eQ.A,{icon:(0,a.jsx)(eR.A,{type:"icon-documentlinea"}),onClick:()=>null==t?void 0:t(r)})})}),(0,a.jsx)(eZ.A,{title:(0,a.jsx)(c.sA,{id:"delete"}),children:(0,a.jsx)(an.A,{placement:"bottomRight",autoAdjustOverflow:{adjustX:0},title:(0,a.jsx)(c.sA,{id:"confirm.delete"}),onConfirm:()=>f(r),children:(0,a.jsx)(tP.y,{permission:t$.o.ENDPOINT_ENDPOINT_CDU,children:(0,a.jsx)(eQ.A,{icon:(0,a.jsx)(eR.A,{type:"icon-trash-04"})})})})})]})]})})},footer:(0,a.jsx)(eQ.A,{size:"middle",shape:"round",style:{padding:"0 8px",height:"28px",lineHeight:"28px"},icon:(0,a.jsx)(eR.A,{type:"icon-plus"}),onClick:()=>{let e=Date.now();v([...r,{id:e,protocol:"",path:"",color:"purple",maintainerId:0,content:ae,status:ix.pQ.released,tags:[],ordering:r.length?r[r.length-1].ordering+10:0}]),u(e),setTimeout(()=>{o(e)})},children:(0,c.hw)({id:"add"})})})}function ap(e){let[t,i]=(0,n.useState)(),[l,r]=(0,n.useState)(["TABLE"]),[s,o]=(0,n.useState)(!1);return(0,a.jsx)(i7.A,{...e,size:1===l.length?"560":"960",footer:null,activeKeys:l,items:[{key:"TABLE",title:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(c.sA,{id:"customEndpointTemplate.setting"}),(0,a.jsx)(i5.n,{saving:s})]}),content:(0,a.jsx)(au,{onEditTemplate:e=>{r(["TABLE","FORM"]),i(e)},onSaving:()=>{o(!0)},onSaved:()=>{o(!1)}})},{key:"FORM",title:(0,a.jsx)(e6.K4,{protocol:null==t?void 0:t.protocol,color:null==t?void 0:t.color}),content:(0,a.jsx)("div",{style:{height:"calc(100vh - 200px)"},children:(0,a.jsx)(ai,{id:null==t?void 0:t.id,folderId:e.folderId,moduleId:e.moduleId,onCreated:()=>{(0,C.dispatchFetchCustomEndpointTemplateList)(),r(["TABLE"])},onUpdated:()=>{(0,C.dispatchFetchCustomEndpointTemplateList)()},onCancel:e.onCancel})})}],onGoBack:r})}let am="container-IywIJ9",ah=e=>({label:(0,a.jsx)(ih.w,{protocol:e,style:{fontSize:14}}),value:e});function av(e){let{value:t,folderId:i,moduleId:l,placement:r="bottomLeft",showSearch:s=!0,dropdownMatchSelectWidth:o=!1,defaultActiveFirstOption:d=!0,style:u={minWidth:80,maxWidth:120},className:p,onSelect:m,onChange:h}=e,[v,f]=(0,n.useState)(!1),g=(0,V.Ay)(e=>e.customEndpointTemplate.list),y=(0,n.useMemo)(()=>{let e=[];return g.forEach(t=>{e.push(ah(t.protocol))}),t&&!((e,t)=>{if(e)return t.find(t=>t.value===e)})(t,e)&&e.push(ah(t)),e},[g,t]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i2.A,{...e,value:t,placement:r,style:u,options:y,showSearch:s,className:eY()(am,p),defaultActiveFirstOption:d,dropdownMatchSelectWidth:o,dropdownRender:e=>(0,a.jsxs)("div",{children:[e,(0,a.jsx)(e7.A,{style:{margin:"4px 0"}}),(0,a.jsxs)("a",{className:"flex items-center px-3 py-2 cursor-pointer",onClick:()=>f(!0),children:[(0,a.jsx)(eR.A,{type:"icon-setting-o",className:"mr-2"}),(0,c.hw)({id:"customEndpointTemplate.setting"})]})]}),onChange:h,onSelect:(e,t)=>{var i;null==m||m(t.value,null==(i=g.find(e=>e.protocol===t.value))?void 0:i.id)}}),v&&(0,a.jsx)(ap,{open:v,folderId:i,moduleId:l,onCancel:()=>f(!1)})]})}let af="container-g093Bh";var ag=i(487844);let ay=["save"];function ax(e){let{id:t,tabKey:i,folderId:l=0,moduleId:r,showProjectModuleSelector:s,onModified:o,onModifying:d,onCreated:u,onCancel:p}=e,[m]=tH.A.useForm(),[h,f]=(0,n.useState)(""),[g,y]=(0,n.useState)(!1),[x,A]=(0,n.useState)(!0),j=(0,n.useMemo)(()=>r||(0,v.Jo)().firstProjectModuleId,[r]),b=(0,V.Ay)(e=>t?e.customEndpoint.map[t]:void 0),w=(0,C.useModel)("projectCustomApiField",e=>e.data),S=(0,ag.N)(e=>e.moduleId,m)||j;(0,eF.A)(()=>{let e=(0,V.DA)(e=>e.customEndpointTemplate.list[0]);(null==e?void 0:e.id)&&!t&&(0,C.dispatchFetchCustomEndpointTemplate)(e.id,e=>{m.setFieldsValue(e),f(e.content||"")})}),(0,n.useEffect)(()=>{if(b){let e=(0,iG.M2)(b.customEndpointFields||{},w);m.setFieldsValue({...b,customEndpointFields:e}),f(b.content||"")}},[b,m]);let I=async()=>{var e;let i=m.getFieldsValue(),a=null!=(e=(0,iG.i8)(i.customEndpointFields,w))?e:{};if(t)y(!0),await (0,C.dispatchUpdateCustomEndpoint)({...i,name:i.name||(0,c.hw)({id:"untitled"}),content:h,customEndpointFields:a,id:t},e=>{null==o||o()}),y(!1);else{let e={...i,name:i.name||(0,c.hw)({id:"untitled"}),folderId:l,content:h,customEndpointFields:a};y(!0),await (0,C.dispatchCreateCustomEndpoint)(e,e=>{null==o||o(),null==u||u(e)}),y(!1)}y(!1)},{run:N}=(0,tD.A)(e=>{"save"===e&&m.submit()},{wait:500,leading:!0,trailing:!1});return(0,a.jsxs)(tH.A,{name:"custom-endpoint",labelAlign:"left",autoComplete:"off",className:af,form:m,initialValues:{moduleId:S,status:ix.pQ.released},onFinish:I,onValuesChange:e=>{(Object.hasOwn(e,"path")||Object.hasOwn(e,"status")||Object.hasOwn(e,"maintainerId")||Object.hasOwn(e,"tags")||Object.hasOwn(e,"serverId"))&&A(!1),null==d||d()},children:[(0,a.jsxs)("div",{className:"px-4 pt-3 pb-4 flex-none",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(iH.A.Compact,{className:"w-full",style:{"--ui-select-background":"var(--ui-fill-3)","--ui-input-bg":"var(--ui-fill-3)"},children:[(0,a.jsx)(tH.A.Item,{name:"protocol",rules:[{required:!0,message:""}],style:{marginBottom:0,marginRight:-1,zIndex:1},children:(0,a.jsx)(av,{folderId:l,moduleId:S,placeholder:(0,c.hw)({id:"customEndpoint.protocol"}),onFocus:e=>e.stopPropagation(),onSelect:(e,t)=>{var i;(i=t)&&x&&(0,C.dispatchFetchCustomEndpointTemplate)(i,e=>{m.setFieldsValue(e),f(e.content||"")})}})}),(0,a.jsx)(tH.A.Item,{noStyle:!0,name:"path",children:(0,a.jsx)(iV.A,{autoComplete:"off",placeholder:(0,c.hw)({id:"customEndpoint.uri"}),autoFocus:!t})})]}),(0,a.jsxs)("div",{className:"flex-none flex items-center gap-2",children:[!!t&&(0,a.jsx)(eQ.A,{size:"middle",onClick:()=>{let e=ny.getState().tabPanes.find(e=>e.key===i);(null==e?void 0:e.modifying)?X.Ay.confirm({title:(0,c.hw)({id:"doc.editor.notSave.title"}),content:(0,c.hw)({id:"doc.editor.notSave.content"}),onOk(){null==o||o(),null==p||p()},width:400,mask:!1,maskClosable:!0}):null==p||p()},children:(0,c.hw)({id:"doc.action.exitEdit"})}),(0,a.jsx)(tP.y,{permission:t$.o.ENDPOINT_ENDPOINT_CDU,hiddenToGuest:!0,children:(0,a.jsx)(eQ.A,{type:"primary",size:"middle",loading:g,onClick:()=>m.submit(),children:(0,c.hw)({id:"doc.action.submit"})})})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-5",children:[(0,a.jsx)(tH.A.Item,{name:"moduleId",hidden:!s,noStyle:!0,children:(0,a.jsx)(iU.N,{limitWidth:!0,hiddenOnOnlyOne:!0,showArrow:!1,showCreateProjectModuleMenuItem:!0})}),(0,a.jsx)(tH.A.Item,{noStyle:!0,name:"name",children:(0,a.jsx)(iq,{title:m.getFieldValue("name"),className:"w-full truncate",placeholder:(0,c.hw)({id:"untitled"})})})]}),(0,a.jsx)(i6,{folderId:l,moduleId:S})]}),(0,a.jsx)("div",{style:{minHeight:200},className:"flex flex-col w-full h-full flex-auto",children:(0,a.jsx)(t_.A,{slugIdPrefix:`docId${t}-`,editorConfig:{autofocus:!1},value:h,onChange:e=>{f(e),e!==h&&(A(!1),null==d||d())}})}),(0,a.jsx)(tO.A,{actions:ay,handler:(0,tB.o)(N)})]})}var aA=i(439082);function aj(e){let{id:t,tabKey:i,folderId:l,moduleId:r,onModified:s,onModifying:o}=e,[d,c]=(0,n.useState)(!0),[u,p]=(0,n.useState)(!0);return((0,eF.A)(async()=>{t&&(p(!0),await (0,C.dispatchFetchCustomEndpoint)(t,void 0,{isHideLoading:!0}),p(!1))}),u)?(0,a.jsx)(iz.A,{loading:u,className:"px-4"}):(0,a.jsx)("div",{className:"w-full h-full",children:d?(0,a.jsx)(aA.A,{id:t||0,onEdit:()=>c(!1)}):(0,a.jsx)(ax,{id:t,tabKey:i,folderId:l,moduleId:r,onModified:s,onModifying:o,onCancel:()=>c(!0),onCreated:()=>(0,C.dispatchFetchWebSocketApiTreeList)()})})}let ab=0,aw=function(e){let{replaceTab:t,closeTab:i,replaceOrOpenTab:n,onModifying:l,onModified:r}=ek({store:e}),s=(0,Y.A)((e,t)=>{let s=(0,K.dV)("CUSTOM_ENDPOINT",e.id);n({key:s,tab:(0,a.jsx)(iB,{type:"CUSTOM_ENDPOINT",data:e,onMouseMiddleDown:()=>i(s,!1)}),content:(0,a.jsx)(aj,{id:e.id,tabKey:s,onModifying:()=>l(s),onModified:()=>r(s)}),state:t?"resident":"unstable"})}),o=(0,Y.A)(function(e,s,o){let d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:!s,u=`tab-add-CUSTOM_ENDPOINT-${++ab}`;n({key:u,tab:(0,a.jsx)(iB,{icon:(0,a.jsx)(eR.A,{type:"icon-endpoint",style:{marginRight:4}}),content:(0,c.hw)({id:"api.action.newCustomEndpoint"}),onMouseMiddleDown:()=>i(u,!1)}),content:(0,a.jsx)(ax,{tabKey:u,folderId:e,moduleId:s,showProjectModuleSelector:d,onModifying:()=>l(u),onModified:()=>r(u),onCreated:e=>{(0,C.dispatchFetchWebSocketApiTreeList)();let n=(0,K.dV)("CUSTOM_ENDPOINT",e.id);t(u,{key:n,tab:(0,a.jsx)(iB,{type:"CUSTOM_ENDPOINT",data:e,onMouseMiddleDown:()=>i(u,!1)}),content:(0,a.jsx)(aj,{id:e.id,tabKey:n,moduleId:s,onModifying:()=>l(u),onModified:()=>r(u)}),state:"resident"})},onUpdated:()=>(0,C.dispatchFetchWebSocketApiTreeList)()}),state:"resident"},o)}),d=(0,Y.A)(async(e,t)=>{(0,C.dispatchDeleteCustomEndpoint)(e,()=>{i((0,K.dV)("CUSTOM_ENDPOINT",e,t)),(0,C.dispatchFetchWebSocketApiTreeList)()})}),u=(0,Y.A)(async e=>{(0,C.dispatchDuplicateCustomEndpoint)(e,e=>{s(e),(0,C.dispatchFetchWebSocketApiTreeList)()})});return{openCustomEndpointTab:s,openCreateCustomEndpointTab:o,deleteCustomEndpoint:d,duplicateCustomEndpoint:u}};var aS=i(77212),aC=i(432254),aI=i(925122),aN=i(827316),ak=i(335056),aT=i(7039),aM=i(81319),aE=i(651202);i(19275);let a_=(0,C.dynamic)({loading:S.A,loader:async()=>{let{default:e}=await Promise.all([i.e("4276"),i.e("90348"),i.e("8704"),i.e("73956"),i.e("8769"),i.e("67282"),i.e("2527"),i.e("59065"),i.e("37071")]).then(i.bind(i,619147));return e}});var aF=i(843212),aD=i(228904),aR=i(791027),aO=i(543013),aP=i(620148),aL=i(661182),a$=i(407153),aB=i(172713),az=i(562855),aU=i(112967),aH=i(844774);let aV=(0,tT.E)(function(e){let{moduleId:t,onModifying:i,onModified:l}=e,[r]=tH.A.useForm(),s=(0,aR.PJ)(t),{initialValues:o,latestValues:d}=function(e,t,i,a){let l=function(e){var t,i;let a=(0,v.IA)(e=>e.projectModuleMap),n=(0,V.Ay)(e=>{var t;let{projectSetting:i}=e;return null==(t=i.projectSettingData)?void 0:t.httpResponseTemplate});return null!=(i=(null==(t=a.get(e))?void 0:t.httpResponseTemplate)||n)?i:(0,aL.$e)()}(t),r=(0,ag.N)(e=>e,e),s=(0,n.useMemo)(()=>{var e,t,i,a,n,s,o,d;return{name:null!=(t=null!=(e=r.name)?e:null==l?void 0:l.name)?t:(0,aL.DY)(200),code:null!=(a=null!=(i=r.code)?i:null==l?void 0:l.code)?a:"200",contentType:null!=(s=null!=(n=r.contentType)?n:null==l?void 0:l.contentType)?s:"json",jsonSchema:null!=(o=r.jsonSchema)?o:null==l?void 0:l.jsonSchema,itemSchema:null!=(d=r.itemSchema)?d:null==l?void 0:l.itemSchema}},[r,l]);return(0,n.useEffect)(()=>{var e,t;if(!(Object.keys(null!=r?r:{}).length>0))return;let n=aO.hv.includes(r.contentType);(function(e,t){return!!e&&!!t&&(0,aP.createPatch)(e,t).length>0})({...l,mediaType:null!=(e=l.mediaType)?e:""},{...r,mediaType:null!=(t=r.mediaType)?t:"",code:parseInt(r.code,10),jsonSchema:n?r.jsonSchema:void 0,itemSchema:n?r.itemSchema:void 0})?i():a()},[l,r,i,a]),{initialValues:l,latestValues:s}}(r,s,i,l),u=(0,n.useMemo)(()=>aO.hv.includes(d.contentType),[d.contentType]),{hasPermission:p}=(0,aF.w)(t$.o.ENDPOINT_COMPONENT_CDU),m=(0,eT.eB)(aD.fn,()=>(0,v.Jo)().fetchProjectModuleList()),h=(0,n.useCallback)(e=>(e.code=parseInt(e.code,10),m(s,{httpResponseTemplate:e})),[m]),f="eventStream"===d.contentType;return(0,a.jsxs)("div",{className:eY()("px-4 py-3",aH.A.httpResponseForm),children:[(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsx)(aK,{})}),(0,a.jsxs)(tH.A,{form:r,initialValues:o,onFinish:h,requiredMark:!1,layout:"vertical",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4 px-0",style:{height:40},children:[(0,a.jsx)("div",{className:"flex-1 mr-2 truncate",children:(0,a.jsx)(aB.A,{disabled:!p})}),(0,a.jsx)(tP.y,{permission:t$.o.ENDPOINT_COMPONENT_CDU,hiddenToGuest:!0,children:(0,a.jsx)(eQ.A,{type:"primary",htmlType:"submit",children:(0,c.hw)({id:"save"})})})]}),(0,a.jsxs)("div",{className:"flex items-start justify-evenly mb-2 gap-1",children:[(0,a.jsx)("div",{className:"flex-1 mr-1",children:(0,a.jsx)(aU.A,{disabled:!p})}),(0,a.jsx)("div",{className:"flex-1 mr-1",children:(0,a.jsx)(a$.A,{})})]}),!!u&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:eY()("rounded-sm",f&&"hidden"),children:(0,a.jsx)(az.A,{form:r,schemaFieldName:"jsonSchema",contentType:d.contentType,response:o,includeExamples:!1,moduleId:s})}),(0,a.jsx)("div",{className:eY()("rounded-sm",!f&&"hidden"),children:(0,a.jsx)(az.A,{form:r,schemaFieldName:"itemSchema",contentType:d.contentType,response:o,includeExamples:!1,moduleId:s})})]})]}),(0,a.jsx)(tO.A,{actions:"save",handler:(0,tB.o)(r.submit)})]})});function aK(){let e=(0,n.useMemo)(()=>[(0,c.hw)({id:"component.response.template.tip.one"}),(0,c.hw)({id:"component.response.template.tip.two"}),(0,c.hw)({id:"component.response.template.tip.three"})],[]);return(0,a.jsx)(aq,{icon:(0,a.jsx)(eR.A,{type:"icon-response-template",size:24,color:"var(--ui-primary-base)"}),title:(0,c.hw)({id:"component.response.template"}),children:(0,a.jsx)("ul",{className:"p-0 m-0",children:e.map(e=>(0,a.jsxs)("li",{className:eY()("flex",aH.A.listItem),children:[(0,a.jsx)("span",{className:"rounded-full"}),e]},e))})})}function aq(e){let{title:t,icon:i,children:n}=e;return(0,a.jsxs)("div",{className:"px-6 py-4",style:{borderRadius:"var(--ui-border-radius-lg)",border:"1px solid var(--ui-border-color-split)",background:"var(--ui-component-card-base-bg)"},children:[(0,a.jsxs)("div",{className:"flex items-center justify-start mb-2 gap-2",children:[i,(0,a.jsx)("h3",{className:"m-0",children:t})]}),(0,a.jsx)("div",{children:n})]})}function aG(e){let{tabKey:t,onReload:i,onModifying:l,onModified:r,id:s}=e,o=(0,V.Ay)(e=>e.apiResponse.apiResponseMap),d=(0,n.useMemo)(()=>e.response&&e.response.id?e.response:s&&o&&(null==o?void 0:o[s])?o[s]:{},[s,e.response,o]),c=(0,Y.A)(e=>{(0,aN.HN)({...e,id:d.id},()=>{(0,aN.pV)(e=>{let t=e.find(e=>e.id===d.id);t&&i(t)})}),r(t)});return((0,eF.A)(()=>{var t;(null==(t=e.response)?void 0:t.id)||!s||(0,aN.pV)()}),(0,ee.isUndefined)(null==d?void 0:d.id))?null:(0,a.jsx)(a_,{response:d,onSubmit:c,onModifying:()=>l(t),onModified:()=>r(t),moduleId:d.moduleId},t)}function aW(e){let{tabKey:t,moduleId:i,onModifying:n,onModified:l}=e,r=(0,ak.A)(aT.nM.AiNaming);return(0,a.jsx)(w.l,{value:{aiNamingEnabled:r},children:(0,a.jsx)(aV,{moduleId:i,onModifying:()=>n(t),onModified:()=>l(t)},t)})}function aJ(e){let{folderId:t,moduleId:i,responseKey:n,onCreated:l,onModifying:r,onModified:s}=e,o=(0,Y.A)(async function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];await (0,aN.OT)({...e,folderId:t,moduleId:i,addToAllApis:a},l),s(n)});return(0,a.jsx)(a_,{onSubmit:o,onModifying:()=>r(n),onModified:()=>s(n),moduleId:i},n)}let aY=function(e){let{renderTab:t,getMaxNewTabIndex:i,replaceOrOpenTab:n,replaceTab:l,closeTab:r,onModifying:s,onModified:o,changeTabTitle:d,openTab:u}=e,p=(0,Y.A)(async()=>Promise.all([(0,aN.Kb)(),(0,C.dispatchFetchResponseFolderList)(),(0,aN.pV)()])),{dispatchBatchAction:m}=(0,aI.A)(),h=(0,Y.A)(async e=>{await m({action:"ADD_RESPONSE_COMPONENTS_TO_ALL",target:{httpApiIds:[]},data:{responseIds:[e]}})}),v=(0,Y.A)(function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];p(),S(e,t,!0);let n=(0,iE.IF)()?!!(0,aM.Ky)().branchHttpApis.length:!!(0,V.DA)(e=>e.apiDetail.httpApis.length);if(i&&n&&(null==e?void 0:e.id)&&e.defaultEnable){let t=(0,aE.Ay)({okText:(0,c.hw)({id:"api.response.batch.addTooAll.tipModal.confirm"}),content:(0,a.jsx)("div",{style:{paddingLeft:36},children:(0,c.hw)({id:"api.response.batch.addTooAll.tipModal.content"})}),cancelText:(0,c.hw)({id:"api.response.batch.addTooAll.tipModal.cancel"}),closable:!1,onOk:async()=>{null==t||t.update({okButtonProps:{loading:!0}}),await h(e.id),null==t||t.update({okButtonProps:{loading:!1}})},title:(0,a.jsxs)("div",{className:"flex items-center justify-start",children:[(0,a.jsx)(eR.A,{type:"icon-help",size:24,style:{marginRight:12,color:"var(--ui-primary-color)"}}),(0,c.hw)({id:"api.response.batch.addTooAll.tipModal.title"})]})})}}),f=(0,Y.A)(async e=>{(null==e?void 0:e.errorCode)!=="403012"&&eD.Ay.error((0,c.hw)({id:"message.deleteFailure"}))}),g=(0,Y.A)(async()=>{eD.Ay.success((0,c.hw)({id:"message.movedToTrash"})),await p()}),y=(0,Y.A)(async e=>{(null==e?void 0:e.errorCode)!=="403012"&&eD.Ay.error((0,c.hw)({id:"message.duplicateFailure"}))}),x=(0,Y.A)(async()=>{eD.Ay.success((0,c.hw)({id:"message.duplicateSuccess"})),await p()}),A=(0,Y.A)(async(e,t)=>{r((0,K.dV)("responseFolder",e,t)),(0,C.dispatchDeleteResponseFolder)(e,g,{onFailure:e=>f(null==e?void 0:e.data),isHideSuccessMessage:!0})}),j=(0,Y.A)(async(e,t)=>{e&&(r((0,K.dV)("httpResponse",e,t)),(0,aN.Rh)(e,g,{onFailure:e=>f(null==e?void 0:e.data),isHideSuccessMessage:!0}))}),b=(0,ij.A)(()=>({onModified:o,replaceTab:l,onModifying:s,deleteHttpResponse:j}),[p,o,l,j]),w=(e,i)=>{let{pinned:l,responseKeyToBeReplaced:r}=i;if((0,ee.isUndefined)(e.id))return;let s=(0,K.dV)("httpResponse",`${e.id}`),o={...b,tabKey:s,response:e};n({key:s,tab:t({type:"httpResponse",tabKey:s,data:e}),content:(0,a.jsx)(aG,{...o,onReload:e=>v(e,s)}),state:l?"resident":"unstable"},r)};function S(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(null==e?void 0:e.id)&&w(e,{pinned:i,responseKeyToBeReplaced:t})}let I=(0,Y.A)(async(e,t)=>{(0,ee.isUndefined)(e.id)||v(e,t,!0)}),N=(0,Y.A)(async(e,t)=>{e&&(0,aN.v2)(e,async e=>{await x(),null==t||t(e)},{isHideSuccessMessage:!0,onFailure:e=>y(null==e?void 0:e.data)})});return{openHttpResponse:w,openHttpResponseById:e=>{var i,n;let{id:l,name:r,pinned:s}=e,o=(0,K.dV)("httpResponse",l),d=null==(n=(0,V.DA)(e=>e.apiResponse.apiResponseMap))||null==(i=n[l])?void 0:i.moduleId;u({key:o,tab:t({type:"httpResponse",tabKey:o,data:{name:r,id:l,moduleId:d}}),content:(0,a.jsx)(aG,{...b,id:l,tabKey:o,onReload:e=>v(e,o)}),state:s?"resident":"unstable"})},replaceHttpResponse:S,deleteHttpResponse:j,duplicateHttpResponse:N,createHttpResponse:(e,l,r)=>{let s=i(),o=`tab-create-${s}`;n({key:o,tab:t({type:"httpResponse",tabKey:o,data:{name:(0,c.hw)({id:"component.action.newResponse"}),moduleId:l}}),content:(0,a.jsx)(aJ,{folderId:null!=e?e:0,moduleId:l,responseKey:o,onCreated:e=>I(e,o),...b}),state:"resident"},r)},deleteResponseFolder:A,replaceHttpResponseTitle:function(e){if(!(null==e?void 0:e.id))return;let i=(0,K.dV)("httpResponse",`${e.id}`);d(i,t({type:"httpResponse",tabKey:i,data:e}))},openHttpResponseTemplate:(e,t,i)=>{let l={...b,tabKey:e,moduleId:t};n({key:e,tab:(0,a.jsxs)("span",{className:"inline-flex items-center max-w-full",children:[(0,a.jsx)(eR.A,{type:"icon-response-template",style:{marginRight:4}}),(0,a.jsx)("span",{className:"truncate",children:(0,c.hw)({id:"component.response.template"})})]}),content:(0,a.jsx)(aW,{...l}),state:i?"resident":"unstable"})}}},aZ=(0,C.dynamic)({loading:S.A,loader:async()=>{let{default:e}=await Promise.all([i.e("67007"),i.e("64007"),i.e("60293"),i.e("86781"),i.e("24879"),i.e("46345")]).then(i.bind(i,436123));return e}});var aQ=i(435685),aX=i(674984);function a0(e){let{tabKey:t,onModifying:i,onModified:l,id:r}=e,s=(0,iE._$)(e=>{var t;return null!=(t=e.currentBranchSettings.enableRefFallbackToMain)&&t}),o=(0,aM.Ay)(e=>e.branchSecuritySchemeMap),d=(0,V.Ay)(e=>e.securityScheme.securitySchemeMap),c=(0,n.useMemo)(()=>{if(e.securityScheme&&e.securityScheme.id){var t,i;return s?null!=(t=o[e.securityScheme.id])?t:e.securityScheme:null!=(i=null==d?void 0:d[e.securityScheme.id])?i:e.securityScheme}return r&&d&&(null==d?void 0:d[r])?d[r]:{}},[r,e.securityScheme,d,s,o]),u=(0,n.useMemo)(()=>{let{collections:e}=aQ.baseContainer.getItemsSync(e=>[e.collections]);return e.SecuritySchemeModule.addDefaultSecurityScheme(c)},[c]),p=(0,Y.A)(e=>{(0,C.dispatchUpdateSecurityScheme)({...e,id:u.id},()=>{(0,C.dispatchFetchSecuritySchemeTreeList)(),(0,C.dispatchFetchCommonSecuritySchemeList)()}),l(t)});return((0,eF.A)(()=>{var t;(null==(t=e.securityScheme)?void 0:t.id)||!r||(0,C.dispatchFetchCommonSecuritySchemeList)()}),(0,ee.isUndefined)(null==u?void 0:u.id))?null:(0,a.jsx)(aZ,{securityScheme:u,moduleId:u.moduleId,onSubmit:p,onModifying:()=>i(t),onModified:()=>l(t)},t)}function a1(e){let{folderId:t,moduleId:i,securitySchemeKey:n,onCreated:l,onModifying:r,onModified:s}=e,o=(0,Y.A)(async e=>{await (0,C.dispatchCreateSecurityScheme)({...e,folderId:t,moduleId:i},l),s(n)});return(0,a.jsx)(aZ,{onSubmit:o,onModifying:()=>r(n),onModified:()=>s(n),folderId:t,moduleId:i},n)}function a4(e){let{folderId:t,moduleId:i,securitySchemeCombinationKey:n,onCreated:l,onModifying:r,onModified:s}=e,o=(0,Y.A)(async e=>{await (0,C.dispatchCreateSecurityScheme)({...e,folderId:t,moduleId:i},l),s(n)});return(0,a.jsx)(aZ,{combination:!0,onSubmit:o,onModifying:()=>r(n),onModified:()=>s(n),folderId:t,moduleId:i},n)}let a3=function(e){let{renderTab:t,getMaxNewTabIndex:i,replaceOrOpenTab:n,replaceTab:l,closeTab:r,onModifying:s,onModified:o,changeTabTitle:d,openTab:u}=e,p=(0,Y.A)(async()=>Promise.all([(0,C.dispatchFetchSecuritySchemeTreeList)(),(0,C.dispatchFetchSecuritySchemeFolderList)(),(0,C.dispatchFetchCommonSecuritySchemeList)()])),m=(0,Y.A)(function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2],p(),b(e,t,!0)}),h=(0,Y.A)(async e=>{(null==e?void 0:e.errorCode)!=="403012"&&eD.Ay.error((0,c.hw)({id:"message.deleteFailure"}))}),v=(0,Y.A)(async()=>{eD.Ay.success((0,c.hw)({id:"message.movedToTrash"})),await p()}),f=(0,Y.A)(async e=>{(null==e?void 0:e.errorCode)!=="403012"&&eD.Ay.error((0,c.hw)({id:"message.duplicateFailure"}))}),g=(0,Y.A)(async()=>{eD.Ay.success((0,c.hw)({id:"message.duplicateSuccess"})),await p()}),y=(0,Y.A)(async(e,t)=>{r((0,K.dV)("SECURITY_SCHEME_FOLDER",e,t)),(0,C.dispatchDeleteSecuritySchemeFolder)(e,v,{onFailure:e=>h(null==e?void 0:e.data),isHideSuccessMessage:!0})}),x=(0,Y.A)(async(e,t)=>{e&&(r((0,K.dV)("SECURITY_SCHEME",e,t)),(0,C.dispatchDeleteSecurityScheme)(e,v,{onFailure:e=>h(null==e?void 0:e.data),isHideSuccessMessage:!0}))}),A=(0,ij.A)(()=>({onModified:o,replaceTab:l,onModifying:s,deleteSecurityScheme:x}),[p,o,l,x]),j=(e,i)=>{let{pinned:l,securitySchemeKeyToBeReplaced:r}=i;if((0,ee.isUndefined)(e.id))return;let s=(0,K.dV)("SECURITY_SCHEME",`${e.id}`),o={...A,tabKey:s,securityScheme:e};n({key:s,tab:t({type:"SECURITY_SCHEME",tabKey:s,data:e}),content:(0,a.jsx)(a0,{...o,onReload:e=>m(e,s)}),state:l?"resident":"unstable"},r)};function b(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(null==e?void 0:e.id)&&j(e,{pinned:i,securitySchemeKeyToBeReplaced:t})}let w=(0,Y.A)(async(e,t)=>{(0,ee.isUndefined)(e.id)||m(e,t,!0)}),S=(0,Y.A)(async(e,t)=>{e&&(0,C.dispatchDuplicateSecurityScheme)(e,async e=>{await g(),null==t||t(e)},{isHideSuccessMessage:!0,onFailure:e=>f(null==e?void 0:e.data)})});return{openSecurityScheme:j,openSecuritySchemeById:e=>{var i,n;let{id:l,name:r,authType:s,pinned:o}=e,d=(0,K.dV)("SECURITY_SCHEME",l),c=null==(n=(0,V.DA)(e=>e.securityScheme.securitySchemeMap))||null==(i=n[l])?void 0:i.moduleId;u({key:d,tab:t({type:"SECURITY_SCHEME",tabKey:d,data:{name:r,id:l,authType:s,moduleId:c}}),content:(0,a.jsx)(a0,{...A,id:l,tabKey:d,onReload:e=>m(e,d)}),state:o?"resident":"unstable"})},replaceSecurityScheme:b,deleteSecurityScheme:x,duplicateSecurityScheme:S,createSecurityScheme:(e,l,r)=>{let s=i(),o=`tab-create-${s}`;n({key:o,tab:t({type:"SECURITY_SCHEME",tabKey:o,data:{moduleId:l,name:(0,c.hw)({id:e?"component.action.addSecurityScheme":"component.action.newSecurityScheme"})}}),content:(0,a.jsx)(aX.Ae,{children:(0,a.jsx)(a1,{folderId:null!=e?e:0,moduleId:l,securitySchemeKey:o,onCreated:e=>w(e,o),...A})}),state:"resident"},r)},createSecuritySchemeCombination:(e,l,r)=>{let s=i(),o=`tab-create-${s}`;n({key:o,tab:t({type:"SECURITY_SCHEME_COMBINATION",tabKey:o,data:{name:(0,c.hw)({id:"component.action.newSecuritySchemeCombination"}),moduleId:l}}),content:(0,a.jsx)(a4,{folderId:null!=e?e:0,moduleId:l,securitySchemeCombinationKey:o,onCreated:e=>w(e,o),...A}),state:"resident"},r)},deleteSecuritySchemeFolder:y,replaceSecuritySchemeTitle:function(e){if(!(null==e?void 0:e.id))return;let i=(0,K.dV)("SECURITY_SCHEME",`${e.id}`);d(i,t({type:"SECURITY_SCHEME",tabKey:i,data:e}))}}};var a8=i(585403),a6=i(770931),a2=i(217071),a5=i(99608);let a7=function(e){let{disabled:t,autoFocus:i=!1,componentType:n}=e;return(0,a.jsx)(tH.A.Item,{name:"name",className:"mb-0 truncate",rules:[{required:!0,message:(0,c.hw)({id:"oasComponent.label.name.required"})}],children:(0,a.jsx)(a5.t,{bold:!0,autoFocus:!t&&i,autoComplete:"off",disabled:t,placeholder:n?(0,c.hw)({id:`oasComponent.placeholder.name.${n}`}):(0,c.hw)({id:"oasComponent.label.name.required"})})})};var a9=i(67276),ne=i(837152);let nt=function(e){let{form:t,oasComponent:i,moduleId:n,componentType:l}=e;return(0,a.jsx)(tH.A.Item,{name:"content",className:"mb-3",rules:[{required:!0,message:(0,c.hw)({id:"oasComponent.label.content.required"})},{validator:ne.z}],children:(0,a.jsx)(a9.T,{height:600})})},ni="oasComponentForm-lmZyt9",na=(0,tT.E)(function(e){let{form:t,moduleId:i,onSubmit:l,onDelete:r,isCreating:s,initialValues:o,onValuesChange:d,oasComponent:u,componentType:p}=e,{name:m,content:h}=function(e,t){let{name:i,content:a}=(0,ag.N)(e=>e,e),l=(0,n.useMemo)(()=>{var e;return null!=(e=null!=i?i:null==t?void 0:t.name)?e:""},[i,null==t?void 0:t.name]);return{name:l,content:(0,n.useMemo)(()=>{var e;return null!=(e=null!=a?a:null==t?void 0:t.content)?e:""},[a,null==t?void 0:t.content])}}(t,o),{hasPermission:v}=(0,aF.w)(t$.o.ENDPOINT_COMPONENT_CDU),f=(0,n.useMemo)(()=>null!=p?p:null==u?void 0:u.type,[p,null==u?void 0:u.type]);return(0,a.jsxs)("div",{className:eY()("p-4",ni),children:[(0,a.jsxs)(tH.A,{form:t,initialValues:o,onFinish:l,onValuesChange:()=>null==d?void 0:d(),requiredMark:!1,layout:"vertical",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between px-0",children:[(0,a.jsx)("div",{className:"flex-1 mr-2 truncate",children:(0,a.jsx)(a7,{disabled:!v,autoFocus:s,componentType:p})}),(0,a.jsxs)("div",{className:"flex items-center justify-end",children:[(0,a.jsx)(tP.y,{permission:t$.o.ENDPOINT_COMPONENT_CDU,hiddenToGuest:!0,children:(0,a.jsx)(eQ.A,{type:"primary",htmlType:"submit",children:(0,c.hw)({id:"save"})})}),!s&&(0,a.jsx)(tP.y,{permission:t$.o.ENDPOINT_COMPONENT_CDU,hiddenToGuest:!0,children:(0,a.jsx)(an.A,{placement:"bottomLeft",title:(0,c.hw)({id:"confirm.delete.typeAndName"},{type:f?(0,c.hw)({id:`component.oasComponent.type.${f}`}):"",name:m||""}),onConfirm:r,children:(0,a.jsx)(eQ.A,{className:"ml-2",children:(0,c.hw)({id:"delete"})})})})]})]}),(0,a.jsx)("div",{className:"rounded-sm mt-4",children:(0,a.jsx)(nt,{form:t,oasComponent:u,moduleId:i,componentType:p})})]}),(0,a.jsx)(tO.A,{actions:"save",handler:(0,tB.o)(t.submit)})]})});var nn=i(608017),nl=i(137361);let nr=function(){let e=(0,V.Ay)(e=>e.oasComponent.oasComponentMap),{deleteOasComponent:t}=(0,n.useContext)(nl.i);return(0,Y.A)((i,n)=>{if((0,ee.isUndefined)(i))return;let l=null==e?void 0:e[i];if(l){if(n)return void t(l.id,l.moduleId);X.Ay.confirm({title:(0,a.jsxs)(a.Fragment,{children:[(0,c.hw)({id:"confirm.delete.typeAndName"},{type:(0,c.hw)({id:"oasComponent"}),name:l.name}),(0,a.jsx)(nn.A,{})]}),content:tY.f3?null:(0,c.hw)({id:"delete.warning.oasComponent.recycle"}),width:400,mask:!1,maskClosable:!0,keyboard:!0,okType:"danger",okText:(0,c.hw)({id:"delete"}),onOk:()=>{t(l.id)}})}})};var ns=i(323194);let no=function(e){let{oasComponent:t,onModifying:i,onModified:a}=e,[l]=tH.A.useForm(),r=function(){return(0,Y.A)(e=>{let t=(null==e?void 0:e.name)||"",i=(null==e?void 0:e.type)||"";return{name:t,type:i,content:"string"==typeof(null==e?void 0:e.content)?e.content:JSON.stringify((null==e?void 0:e.content)||{},null,2),folderId:null==e?void 0:e.folderId,moduleId:null==e?void 0:e.moduleId}})}(),[s,o]=(0,n.useState)(()=>r(t)),[d,c]=(0,n.useState)(()=>r(t)),[u,p]=(0,n.useState)(!1);(0,ag.N)(e=>{e&&0!==Object.keys(e).length&&c(t=>({...t,...e}))},l,!0),(0,n.useEffect)(()=>{u&&(function(e,t){return!!e&&!!t&&(0,aP.createPatch)(e,t).length>0}(s,d)?i():a())},[u,s,d,a,i]);let m=function(e){let t=(0,V.Ay)(e=>{let{oasComponent:t}=e;return t.oasComponentMap});return!(0,ee.isUndefined)(e)&&(null==t?void 0:t[e])?t[e]:null}(null==t?void 0:t.id),h=(0,Y.A)(e=>{let t=r(e),i=(0,ns.dG)(s,t,d);l.setFields(Object.keys(i).map(e=>({name:e,value:i[e]}))),o(()=>t)});return(0,n.useEffect)(()=>{m&&h(m)},[m]),{form:l,onUserChange:(0,n.useCallback)(()=>p(!0),[]),initialValues:s}},nd=(0,tT.E)(function(e){let{oasComponent:t,moduleId:i,folderId:n,componentType:l,onSubmit:r,onModified:s,onModifying:o}=e,d=(0,Y.A)(async e=>{let{content:t,...i}=e;await r({content:t||"",folderId:n,...i})}),c=nr(),{form:u,onUserChange:p,initialValues:m}=no({oasComponent:t,onModified:s,onModifying:o});return(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(null==t?void 0:t.id)&&(0,a.jsx)(a2.A,{entityType:"OAS_COMPONENT",entityId:t.id}),(0,a.jsx)("div",{className:"overflow-y-auto flex-1",children:(0,a.jsx)(na,{form:u,onSubmit:d,initialValues:m,onDelete:()=>c(null==t?void 0:t.id,!0),onValuesChange:()=>p(),moduleId:i,isCreating:!t,oasComponent:t,componentType:l})})]})});function nc(e){let{tabKey:t,onModifying:i,onModified:l,id:r}=e,s=(0,iE._$)(e=>{var t;return null!=(t=e.currentBranchSettings.enableRefFallbackToMain)&&t}),o=(0,aM.Ay)(e=>e.branchOasComponentMap),d=(0,V.Ay)(e=>e.oasComponent.oasComponentMap),c=(0,n.useMemo)(()=>{if(e.oasComponent&&e.oasComponent.id){var t,i;return s?null!=(t=o[e.oasComponent.id])?t:e.oasComponent:null!=(i=null==d?void 0:d[e.oasComponent.id])?i:e.oasComponent}return r&&d&&(null==d?void 0:d[r])?d[r]:{}},[r,e.oasComponent,d,s,o]),u=(0,Y.A)(e=>{(0,a8.Q0)({...e,id:c.id},()=>{(0,a8.jn)(),(0,a8.AF)()}),l(t)});return((0,eF.A)(()=>{var t;(null==(t=e.oasComponent)?void 0:t.id)||!r||(0,a8.AF)()}),(0,ee.isUndefined)(null==c?void 0:c.id))?null:(0,a.jsx)(nd,{oasComponent:c,moduleId:c.moduleId,onSubmit:u,onModifying:()=>i(t),onModified:()=>l(t)},t)}function nu(e){let{folderId:t,moduleId:i,componentType:n,oasComponentKey:l,onCreated:r,onModifying:s,onModified:o}=e,d=(0,Y.A)(async e=>{await (0,a8.xh)({...e,folderId:t,moduleId:i,...n&&{type:n}},r),o(l)});return(0,a.jsx)(nd,{onSubmit:d,onModifying:()=>s(l),onModified:()=>o(l),folderId:t,moduleId:i,componentType:n},l)}let np=function(e){let{renderTab:t,getMaxNewTabIndex:i,replaceOrOpenTab:n,replaceTab:l,closeTab:r,onModifying:s,onModified:o,changeTabTitle:d,openTab:u}=e,p=(0,Y.A)(async()=>Promise.all([(0,a8.jn)(),(0,a6.tc)(),(0,a8.AF)()])),m=(0,Y.A)(function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2],p(),b(e,t,!0)}),h=(0,Y.A)(async e=>{(null==e?void 0:e.errorCode)!=="403012"&&eD.Ay.error((0,c.hw)({id:"message.deleteFailure"}))}),v=(0,Y.A)(async()=>{eD.Ay.success((0,c.hw)({id:"message.movedToTrash"})),await p()}),f=(0,Y.A)(async e=>{(null==e?void 0:e.errorCode)!=="403012"&&eD.Ay.error((0,c.hw)({id:"message.duplicateFailure"}))}),g=(0,Y.A)(async()=>{eD.Ay.success((0,c.hw)({id:"message.duplicateSuccess"})),await p()}),y=(0,Y.A)(async(e,t)=>{r((0,K.dV)("OAS_COMPONENT_FOLDER",e,t)),(0,a6.O6)(e,v,{onFailure:e=>h(null==e?void 0:e.data),isHideSuccessMessage:!0})}),x=(0,Y.A)(async(e,t)=>{e&&(r((0,K.dV)("OAS_COMPONENT",e,t)),(0,a8.IH)(e,v,{onFailure:e=>h(null==e?void 0:e.data),isHideSuccessMessage:!0}))}),A=(0,ij.A)(()=>({onModified:o,replaceTab:l,onModifying:s,deleteOasComponent:x}),[p,o,l,x]),j=(e,i)=>{let{pinned:l,oasComponentKeyToBeReplaced:r}=i;if((0,ee.isUndefined)(e.id))return;let s=(0,K.dV)("OAS_COMPONENT",`${e.id}`),o={...A,tabKey:s,oasComponent:e};n({key:s,tab:t({type:"OAS_COMPONENT",tabKey:s,data:e}),content:(0,a.jsx)(nc,{...o,onReload:e=>m(e,s)}),state:l?"resident":"unstable"},r)};function b(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(null==e?void 0:e.id)&&j(e,{pinned:i,oasComponentKeyToBeReplaced:t})}let w=(0,Y.A)(async(e,t)=>{(0,ee.isUndefined)(e.id)||m(e,t,!0)}),S=(0,Y.A)(async(e,t)=>{e&&(0,a8.ao)(e,async e=>{await g(),null==t||t(e)},{isHideSuccessMessage:!0,onFailure:e=>f(null==e?void 0:e.data)})});return{openOasComponent:j,openOasComponentById:e=>{var i,n;let{id:l,name:r,pinned:s}=e,o=(0,K.dV)("OAS_COMPONENT",l),d=null==(n=(0,V.DA)(e=>e.oasComponent.oasComponentMap))||null==(i=n[l])?void 0:i.moduleId;u({key:o,tab:t({type:"OAS_COMPONENT",tabKey:o,data:{name:r,id:l,moduleId:d}}),content:(0,a.jsx)(nc,{...A,id:l,tabKey:o,onReload:e=>m(e,o)}),state:s?"resident":"unstable"})},replaceOasComponent:b,deleteOasComponent:x,duplicateOasComponent:S,createOasComponent:(e,l,r,s)=>{let o=i(),d=`tab-create-${o}`;n({key:d,tab:t({type:"OAS_COMPONENT",tabKey:d,data:{moduleId:l,name:(0,c.hw)({id:`component.action.new.${r}`})}}),content:(0,a.jsx)(aX.Ae,{children:(0,a.jsx)(nu,{folderId:null!=e?e:0,moduleId:l,componentType:r,oasComponentKey:d,onCreated:e=>w(e,d),...A})}),state:"resident"},s)},deleteOasComponentFolder:y,replaceOasComponentTitle:function(e){if(!(null==e?void 0:e.id))return;let i=(0,K.dV)("OAS_COMPONENT",`${e.id}`);d(i,t({type:"OAS_COMPONENT",tabKey:i,data:e}))}}},nm=(0,C.dynamic)({loading:S.A,loader:async()=>{let{default:e}=await Promise.all([i.e("720"),i.e("73034"),i.e("48737"),i.e("87053"),i.e("80232"),i.e("33898"),i.e("72168"),i.e("75931"),i.e("81352"),i.e("51698"),i.e("48579"),i.e("16336"),i.e("71877"),i.e("51235"),i.e("13996"),i.e("75562"),i.e("37730"),i.e("15505"),i.e("4720"),i.e("33800"),i.e("29924")]).then(i.bind(i,676468));return e}}),nh=0,nv=(0,C.dynamic)({loading:S.A,loader:async()=>{let{default:e}=await Promise.all([i.e("720"),i.e("73034"),i.e("48737"),i.e("87053"),i.e("80232"),i.e("33898"),i.e("67007"),i.e("72168"),i.e("53281"),i.e("6126"),i.e("77447"),i.e("95390"),i.e("48579"),i.e("16336"),i.e("71877"),i.e("51235"),i.e("13996"),i.e("75562"),i.e("37730"),i.e("60293"),i.e("86781"),i.e("39622"),i.e("15505"),i.e("31766"),i.e("21172"),i.e("24879"),i.e("4720"),i.e("95187")]).then(i.bind(i,296660));return e}}),nf=0,ng=0,ny=(0,eO.vt)()((e,t)=>({activeKey:void 0,tabPanes:[],layoutStore:{getter:()=>(0,ee.pick)(t(),"activeKey","tabPanes"),setter:t=>e(t)},setTabPanes:t=>e(e=>{let i="function"==typeof t?t(e.tabPanes):t;return i===e.tabPanes?e:{...e,tabPanes:i}}),apiNameModeMap:(0,H.ZT)("ApiNameModeMap",{}),setApiNameMode:(t,i)=>e(e=>{let{apiNameModeMap:a}=e,n={...a,[t]:i};return(0,H.Ly)("ApiNameModeMap",n),{...e,apiNameModeMap:n}}),activeTabType:void 0,setActiveTabType:(t,i)=>{e({activeTabType:{tabKey:t,type:i}})},updateTabMethod:e=>{let{id:i,modifyKey:a,method:l,formMode:r}=e;t().setTabPanes(e=>e.map(e=>{var t;let s=e.tab;if(!(0,n.isValidElement)(s))return e;let o=null==s||null==(t=s.props)?void 0:t.data;return 0===r&&o&&o.id===i?{...e,tab:(0,n.cloneElement)(s,{...s.props,data:{...o,method:l,useMethodInData:!0}})}:1===r&&e.key===a&&o?{...e,tab:(0,n.cloneElement)(s,{...s.props,data:{...o,method:l,type:"http"}})}:e}))}})),{setActiveKey:nx,setTabList:nA}=(0,d.l1)();ny.subscribe((e,t)=>{"apiManage"===(0,d.l1)().type&&(e.activeKey!==t.activeKey&&nx(e.activeKey),e.tabPanes!==t.tabPanes&&nA(e.tabPanes.map(e=>e.key)))});let nj=()=>{let{formatMessage:e}=(0,c.tz)(),t=(0,eO.Pj)(ny,e=>e.layoutStore),i=(0,eO.Pj)(ny,e=>e.setTabPanes);(0,eE.A)(()=>{i([])});let{openTab:l,openTabAfter:S,changeTab:W,replaceTab:J,closeTab:Z,closeAllTab:Q,closeCurrentTab:X,closeAnotherAllTab:et,closeAnotherAllTabBySelectKey:ei,onChange:ea,onModifying:en,onModified:er,getModifyingCount:es,setModifying:eo,switchTo:ed,switchToNext:ec,switchToPrevious:eu,replaceOrOpenTab:ep,batchChangeTabTitle:em,unstableTurnsResidentTab:eh,togglePinTab:ev,moveTabs:ef,changeTabTitle:eg}=ek({store:t}),{currentProject:ey,currentEnvironment:ex,environmentMap:eA}=(0,V.Ay)(e=>{let{project:t,login:i,environment:a}=e;return{currentProject:t.currentProject,loginSucceeded:i.success,currentEnvironment:a.currentEnvironment,environmentMap:a.environmentMap}}),ej=(0,p.Ay)(e=>e.docMap),eb=(0,f.s)(e=>e.loadTreeList),{load:ew}=(0,C.useModel)("requestFolder",e=>{let{RequestFolderCascaderTreeList:t,load:i}=e;return{RequestFolderCascaderTreeList:t,load:i}}),eS=(0,Y.A)(e=>{let{tab:t,type:i,tabKey:n,data:l={}}=e;return(0,a.jsx)(iB,{className:l.className,style:l.style,onMouseMiddleDown:()=>Z(n,!1),data:l,icon:l.icon,type:i,content:t})}),eC=(0,Y.A)((t,i,a,n)=>{let l=ny.getState().tabPanes.length,r=`tab-add-apiDetail-${++ng}`;return{key:r,tab:eS({type:"apiDetail",tabKey:r,data:{name:e({id:"api.action.createMenu.newHttpEndpoint"}),moduleId:i}}),content:tR(l,r,t,i,a,n),state:"resident"}}),eI=(0,Y.A)((t,i,a)=>{let n=ny.getState().tabPanes.length,l=`tab-add-webSocketApi-${++ng}`;return{key:l,tab:eS({type:"webSocketApi",tabKey:l,data:{name:e({id:"api.action.newWebSocketApi"}),moduleId:i}}),content:tO(n,l,t,i,a),pinned:!0}}),eN=(0,Y.A)((t,i)=>{let a=ny.getState().tabPanes.length,n=`tab-add-rpcMethod-${++ng}`;return{key:n,tab:eS({type:"rpcMethod",tabKey:n,data:{name:e({id:"dubbo.newRpcMethod.tab.title"}),moduleId:t}}),content:tP(a,n,t,i),state:"resident"}}),e$=(0,Y.A)(()=>(null==ey?void 0:ey.id)&&ny.getState().apiNameModeMap[null==ey?void 0:ey.id]||"name"),eB=(0,Y.A)((e,t,i,a,n)=>{ep(eC(e,t,a,n),i)}),ez=(0,Y.A)((e,i,a)=>{if(!e.id)return void Z(i,!0);let n=(0,K.dV)("apiDetail",e.id);t.getter().tabPanes.some(e=>e.key===i)&&J(i,{key:n,tab:eS({type:"apiDetail",tabKey:n,data:e}),content:tg({id:e.id,key:n}),state:a||"resident"})}),eU=(0,Y.A)((e,t,i,a)=>{ep(eI(e,t,a),i)}),eH=(0,Y.A)((e,t,i)=>{ep(eN(e,t),i)}),eV=(0,Y.A)(t=>{var i,a;let n=ny.getState().tabPanes.length;ng+=1;let r=`tab-add-${++ng}`,s=null==(a=(0,V.DA)(e=>e.socketApi.socketApiMap))||null==(i=a[t])?void 0:i.moduleId;l({key:r,tab:eS({type:"socketApi",data:{name:e({id:"api.action.addSocketApi"}),moduleId:s},tabKey:r}),content:tL(n,r,t),state:"resident"})}),eK=(0,Y.A)((e,t,i,a)=>{ep(eq(e,t,a),i)}),eq=(0,Y.A)((t,i,a)=>{let n=ny.getState().tabPanes.length,l=`tab-add-webhookApi-${++ng}`;return{key:l,tab:eS({type:"webhookApi",tabKey:l,data:{name:e({id:"api.action.addWebhookApi"}),moduleId:i}}),content:t$(n,l,t,i,a),state:"resident"}}),eG=(t,i,a,n)=>{let l=ny.getState().tabPanes.length,r=`tab-add-${++ng}`;ep({key:r,tab:eS({type:"doc",tabKey:r,data:{name:e({id:"doc.tab.title.new"}),moduleId:i}}),content:tB(l,r,t,i,n),state:"resident"},a)},eW=(0,Y.A)((t,i)=>{let n=`tab-debug-${++ng}`;return{key:n,tab:eS({tab:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eR.A,{type:"icon-button-lightning",color:"var(--ui-green-6)",style:{marginRight:4}}),(0,a.jsx)("span",{children:e({id:"api.action.newRequest"})})]}),tabKey:n}),content:tS(n,t,i),state:"resident"}}),eJ=(e,t,i)=>{ep(eW(e,i),t)},eY=async()=>{await (0,m.tX)()},eZ=()=>{(0,m.tX)()},eQ=()=>{(0,m.tX)()},eX=()=>{(0,m.tX)()},e0=(t,i)=>(0,m.Ml)(t,()=>{Z((0,K.dV)("apiDetail",t,i)),eD.Ay.success(e({id:"message.movedToTrash"})),eY()},{isHideSuccessMessage:!0}),e1=(e,t)=>{(0,j.$$)(e,()=>{Z((0,K.dV)("webSocketApi",e,t)),eQ()})},e3=(t,i)=>{(0,g.RP)(t,()=>{Z((0,K.dV)("socketApi",t,i)),eD.Ay.success(e({id:"message.movedToTrash"})),eZ()},{isHideSuccessMessage:!0})},e8=(t,i)=>{(0,x.U7)(t,()=>{Z((0,K.dV)("socketService",t,i)),eD.Ay.success(e({id:"message.movedToTrash"})),eZ()},{isHideSuccessMessage:!0})},e6=(t,i)=>{(0,h._m)(t,()=>{Z((0,K.dV)("apiCase",t,i)),eD.Ay.success(e({id:"message.movedToTrash"})),eY()},{isHideSuccessMessage:!0})},e2=(t,i)=>{(0,A.Y1)(t,()=>{Z((0,K.dV)("TEST_CASE",t,i)),eD.Ay.success(e({id:"message.movedToTrash"}))},{isHideSuccessMessage:!0})},e5=(t,i)=>{(0,y.B$)(t,()=>{Z((0,K.dV)("socketApiCase",t,i)),eD.Ay.success(e({id:"message.movedToTrash"})),eZ()},{isHideSuccessMessage:!0})},e7=e=>{var t,i;let a=e.id,n=(0,K.dV)("apiCase",a),r=null==(i=(0,V.DA)(e=>e.apiCase.apiCaseMap))||null==(t=i[a])?void 0:t.moduleId;l({key:n,tab:eS({type:"apiCase",tabKey:n,data:{...e,moduleId:r}}),content:tC({id:a,tabKey:n}),state:e.pinned?"resident":"unstable"})},e9=e=>{let t=(0,K.dV)("TEST_CASE",e.id),i={key:t,tab:eS({type:"TEST_CASE",tabKey:t,data:e}),content:tI({id:e.id,tabKey:t}),state:e.pinned?"resident":"unstable"};e.siblingTabKey?S(e.siblingTabKey,i):l(i)},te=(0,Y.A)((e,i,a)=>{if(!e.id)return void Z(i,!0);let n=(0,K.dV)("apiCase",e.id);t.getter().tabPanes.some(e=>e.key===i)&&J(i,{key:n,tab:eS({type:"apiCase",tabKey:n,data:e}),content:tC({id:e.id,tabKey:n}),state:a||"resident"})}),tt=e=>{var t,i;let a=e.id,n=(0,K.dV)("socketApiCase",a),r=null==(i=(0,V.DA)(e=>e.socketApi.socketApiMap))||null==(t=i[a])?void 0:t.moduleId;l({key:n,tab:eS({type:"socketApiCase",tabKey:n,data:{...e,moduleId:r}}),content:tT(a,n),state:e.pinned?"resident":"unstable"})},ti=(0,Y.A)(e=>{var t,i;let a=e.id,n=(0,K.dV)("apiDetail",a),r=null==(i=(0,V.DA)(e=>e.apiDetail.apiDetailMap))||null==(t=i[a])?void 0:t.moduleId;l({key:n,tab:eS({type:"webhook"===e.type?"webhookApi":"apiDetail",tabKey:n,data:{type:"http",...e,moduleId:r}}),content:tg({id:a,key:n,activeKey:e.showTabType,simpleModeActiveKey:e.simpleModeActiveKey,searchParams:e.searchParams}),state:e.pinned?"resident":"unstable"})}),ta=(0,Y.A)(e=>{var t,i;let a=e.id,n=(0,K.dV)("webSocketApi",a),r=null==(i=(0,V.DA)(e=>e.webSocketApiDetail.apiDetailMap))||null==(t=i[a])?void 0:t.moduleId;l({key:n,tab:eS({type:"webSocketApi",tabKey:n,data:{type:"webSocket",...e,moduleId:r}}),content:ty({id:a,key:n,activeKey:e.showTabType,searchParams:e.searchParams}),state:e.pinned?"resident":"unstable"})}),tn=(0,Y.A)(e=>{let t=(0,K.dV)("rpcMethod",e.id);l({key:t,tab:eS({type:"rpcMethod",tabKey:t,data:{type:"rpc",...e}}),content:tx({id:e.id,key:t,activeKey:e.showTabType}),state:e.pinned?"resident":"unstable"})}),tl=e=>{var t,i;let a=e.id,n=(0,K.dV)("socketApi",a),r=null==(i=(0,V.DA)(e=>e.socketApi.socketApiMap))||null==(t=i[a])?void 0:t.moduleId;l({key:n,tab:eS({type:"socketApi",tabKey:n,data:{...e,moduleId:r}}),content:tA({id:a,key:n,activeKey:e.showTabType}),state:e.pinned?"resident":"unstable"})},tr=e=>{let t=(0,K.dV)("doc",e.id);l({key:t,tab:eS({type:"doc",tabKey:t,data:e}),content:tb({id:e.id,tabKey:t,folderId:e.folderId,moduleId:e.moduleId}),state:e.pinned?"resident":"unstable"})},ts=(0,Y.A)(async(e,t)=>{await (0,p.cG)(e),Z((0,K.dV)("doc",e,t))}),to=e=>{var t;let{moduleId:i,moduleTabKey:n,pinned:l=!0}=e,r=(null==(t=(0,v.Jo)().getProjectModule(i))?void 0:t.name)||(0,a.jsx)(c.sA,{id:"projectOverview"}),s=`module.${i}`;return{key:s,tab:eS({tab:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(q.A,{style:{marginRight:4}}),r]}),tabKey:s}),content:(0,a.jsx)(M,{tabKey:s,moduleId:i,moduleTabKey:n,onModified:er,onModifying:en}),state:l?"resident":"unstable"}},td=()=>{},tc=e=>{eX()},tu=()=>{},tm=()=>{},th=()=>{eb()},tv=e=>{eZ(),tt(e)},tf=e=>{eY(),"TEST_CASE"===e.type?e9(e):e7(e)},tg=e=>{let{id:t,key:i,activeKey:n,searchParams:l,simpleModeActiveKey:r}=e;return(0,a.jsx)(I,{id:t,activeKey:n,modifyKey:i,onUpdated:td,onDelete:e0,onApiCaseCreated:tf,onOpenApiCase:e7,onOpenMockApiDebug:eJ,onModifying:en,onModified:er,onChangeTab:e=>{"run"===e&&eh(i)},searchParams:l,simpleModeActiveKey:r})},ty=e=>{let{id:t,key:i,activeKey:n,searchParams:l}=e;return(0,a.jsx)(ic,{id:t,activeKey:n,modifyKey:i,onDelete:e1,onOpenMockApiDebug:ee.noop,onModifying:en,onModified:er,onChangeTab:e=>{"run"===e&&eh(i)},searchParams:l})},tx=e=>{let{id:t,key:i,activeKey:n}=e;return(0,a.jsx)(k,{id:t,activeKey:n,modifyKey:i,onUpdated:tc,onModifying:en,onModified:er,onChangeTab:e=>{"run"===e&&eh(i)}})};function tA(e){let{id:t,key:i,activeKey:n}=e;return(0,a.jsx)(il,{id:t,activeKey:n,modifyKey:i,onUpdated:tm,onDelete:e3,onApiCaseCreated:tv,onOpenApiCase:e7,onModifying:en,onModified:er})}let tj=(e,t)=>{let i=(0,K.dV)("doc",e.id);void 0!==t?J(t,{key:i,tab:eS({type:"doc",tabKey:i,data:e}),content:tb({id:e.id,tabKey:i,folderId:e.folderId}),state:"resident"}):tr({id:e.id,pinned:!0,name:e.name,moduleId:e.moduleId})},tb=e=>{let{id:t,tabKey:i,folderId:n,moduleId:l}=e;return(0,a.jsx)(o.A,{id:t,folderId:n,moduleId:l,modifyKey:i,type:"overview",onCreated:e=>tj(e,i),onDelete:p.cG,onModifying:en,onModified:er})},tw=(e,t)=>(0,a.jsx)(io,{id:e,onDelete:e8,onCreateApi:eV,onOpenMockApiDebug:eJ}),tS=(e,t,i)=>(0,a.jsx)(ie.A,{params:t,disableAutoSendExplicitly:null==i?void 0:i.disableAutoSendExplicitly,modifyKey:e,onModifying:en,onModified:er,onApiDetailCreated:e=>tM(e),onHttpRequestCreated:(t,i)=>iA(t,e,i)}),tC=e=>{let{id:t,tabKey:i}=e;return t?(0,a.jsx)(N.A,{onDelete:e6,onOpenApiDetail:ti,apiCaseId:t,formMode:"edit",modifyKey:i,onModifying:en,onModified:er,onSendBefore:()=>eh(i)}):null},tI=e=>{let{id:t,tabKey:i}=e;return t?(0,a.jsx)(N.A,{isEndpointTestCase:!0,showConflict:!1,useHttpApiParameters:!1,onDelete:e2,onOpenApiDetail:ti,apiCaseId:t,formMode:"edit",modifyKey:i,onModifying:en,onModified:er,onSendBefore:()=>eh(i)}):null},tT=(e,t)=>e?(0,a.jsx)(is,{onDelete:e5,apiCaseId:e,formMode:"edit",modifyKey:t,onModifying:en,onModified:er,onSendBefore:()=>eh(t)}):null,tM=async(e,t)=>{let i=(0,K.dV)("apiDetail",e.id);void 0!==t?J(t,{key:i,tab:eS({type:"webhook"===e.type?"webhookApi":"apiDetail",tabKey:i,data:e}),content:tg({id:e.id,key:i}),state:"resident"}):ti({...e,pinned:!0}),await eY()},tE=async(e,t)=>{let i=(0,K.dV)("webSocketApi",e.id);void 0!==t?J(t,{key:i,tab:eS({type:"webSocketApi",tabKey:i,data:e}),content:ty({id:e.id,key:i}),state:"resident"}):ta({...e,pinned:!0}),await eQ()},t_=async(e,t)=>{let i=(0,K.dV)("rpcMethod",e.id);void 0!==t?J(t,{key:i,tab:eS({type:"rpcMethod",tabKey:i,data:e}),content:tx({id:e.id,key:i}),state:"resident"}):tn({...e,pinned:!0}),await eX()},tD=async(e,t)=>{let i=(0,K.dV)("socketApi",e.id);void 0!==t?J(t,{key:i,tab:eS({type:"socketApi",tabKey:i,data:e}),content:tA({id:e.id,key:i}),state:"resident"}):tl({id:e.id,pinned:!0,name:e.name}),await eZ()},tR=function(e,t,i,n){let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:!n,r=arguments.length>5?arguments[5]:void 0;return(0,a.jsx)(t7,{moduleId:n,folderId:i,formMode:1,showProjectModuleSelector:l,onCreated:e=>tM(e,t),tabIndex:e,modifyKey:t,onModifying:en,onModified:er,simpleModeActiveKey:r})},tO=function(e,t,i,n){let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:!n;return(0,a.jsx)(iu,{folderId:i,formMode:1,moduleId:n,showProjectModuleSelector:l,onCreated:e=>tE(e,t),tabIndex:e,modifyKey:t,onModifying:en,onModified:er})},tP=(e,t,i,n)=>(0,a.jsx)(it,{moduleId:i,serviceId:n,formMode:1,onCreated:e=>t_(e,t),tabIndex:e,modifyKey:t,onModifying:en,onModified:er}),tL=(e,t,i)=>(0,a.jsx)(ir,{serviceId:i,formMode:1,onCreated:e=>tD(e,t),tabIndex:e,modifyKey:t,onModifying:en,onModified:er}),t$=function(e,t,i,n){let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:!n;return(0,a.jsx)(t7,{moduleId:n,folderId:i,formMode:1,showProjectModuleSelector:l,onCreated:e=>tM(e,t),tabIndex:e,modifyKey:t,onModifying:en,onModified:er,type:"webhook"})},tB=function(e,t,i,n){let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:!n;return(0,a.jsx)(o.A,{folderId:i,moduleId:n,showProjectModuleSelector:l,type:"create",tabIndex:e,modifyKey:t,onCreated:e=>tj(e,t),onModifying:en,onModified:er})},tz=(0,Y.A)(e=>{let{id:t,template:i,moduleId:n,type:r}=e,s=tF.y1,o=ny.getState().tabPanes.length,d=(0,V.DA)(e=>{var t;let{projectSetting:i}=e;return null==(t=i.projectSettingData)?void 0:t.language}),u=(0,c.J$)(d,{descriptor:{id:"api.designGuideline"}});Z(s),l({key:s,tab:eS({tab:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(G.A,{style:{marginRight:4},className:"text-color-tertiary"}),(0,a.jsx)("span",{className:"truncate",title:u,children:u})]}),type:"designGuideline",tabKey:s,data:{id:t,moduleId:n,style:{width:"100%"}}}),content:(e=>{let{id:t,template:i,tabIndex:n,tabKey:l,moduleId:r,type:s="overview"}=e;return(0,a.jsx)(t8,{id:t,template:i,moduleId:r,type:s,tabIndex:n,modifyKey:l,onModifying:en,onModified:er})})({id:t,template:i,tabIndex:o,tabKey:s,moduleId:n,type:r}),state:"resident"})}),tU=(0,Y.A)(t=>{let{endpointId:i,existsKey:n,loading:s,silent:o,tabKey:d,...c}=t,u=null!=d?d:`tab-${(0,K.dV)("complianceReport",i)}-${++ng}`,p={key:u,tab:eS({tab:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"mr-1",children:s?(0,a.jsx)(eR.A,{type:"icon-loading-01",spin:!0,style:{marginRight:4}}):(0,a.jsx)("span",{className:"appicon",children:(0,a.jsx)(r,{className:"w-4 h-4"})})}),(0,a.jsx)("span",{className:"truncate",title:e({id:"ai.workbench.endpointComplianceCheck.report"}),children:e({id:"ai.workbench.endpointComplianceCheck.report"})})]}),type:"complianceReport",tabKey:u,data:{style:{width:"100%"}}}),content:(0,a.jsx)(tN,{tabKey:u,endpointId:i,...c}),state:"resident"};-1===el(u,ny.getState().tabPanes)?n?S(n,p):l(p):J(u,p,{silent:o})}),tH=(0,Y.A)(t=>{let{endpointId:i,existsKey:n,loading:s,silent:o,tabKey:d,...c}=t,u=null!=d?d:`tab-${(0,K.dV)("completenessReport",i)}-${++ng}`,p={key:u,tab:eS({tab:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"mr-1",children:s?(0,a.jsx)(eR.A,{type:"icon-loading-01",spin:!0,style:{marginRight:4}}):(0,a.jsx)("span",{className:"appicon",children:(0,a.jsx)(r,{className:"w-4 h-4"})})}),(0,a.jsx)("span",{className:"truncate",title:e({id:"ai.workbench.documentationCompletenessCheck.report"}),children:e({id:"ai.workbench.documentationCompletenessCheck.report"})})]}),type:"completenessReport",tabKey:u,data:{style:{width:"100%"}}}),content:(0,a.jsx)(tp,{tabKey:u,endpointId:i,...c}),state:"resident"};-1===el(u,ny.getState().tabPanes)?n?S(n,p):l(p):J(u,p,{silent:o})}),tV=(0,Y.A)(t=>{let{endpoint:i,tabKey:n,loading:r,...s}=t,o=null!=n?n:`${(0,K.dV)("aiGenerateTestCase",null==i?void 0:i.id)}.${++ng}`,d={key:o,tab:eS({tab:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"mr-1",children:r?(0,a.jsx)(eR.A,{type:"icon-loading-01",spin:!0,style:{marginRight:4}}):(0,a.jsx)("span",{className:"appicon",children:(0,a.jsx)(b.A,{type:"solid",className:"w-4 h-4"})})}),(0,a.jsx)("span",{className:"truncate",title:e({id:"testCase.generateByAI.generating.title"}),children:e({id:"testCase.generateByAI.generating.title"})})]}),type:"aiGenerateTestCase",tabKey:o,data:{style:{width:"100%"}}}),content:(0,a.jsx)(w.l,{value:{endpointId:null==i?void 0:i.id},children:(0,a.jsx)(tk.A,{tabKey:o,endpoint:i,...s})}),state:"resident",extraInfo:{content:e({id:"testCase.generateByAI.modal.closeDescription"}),message:e({id:"testCase.generateByAI.modal.closeTitle"}),closeConfirm:!0}};n?W(n,d):l(d)}),tK=(0,Y.A)(e=>{let t=(0,K.dV)("apiDetailFolder",e.id,e.moduleId);l({key:t,tab:eS({type:"apiDetailFolder",tabKey:t,data:e}),content:(0,a.jsx)(t9,{id:e.id,moduleId:e.moduleId,activeKey:e.showFolderTabType,modifyKey:t,onModifying:en,onModified:er,onUpdated:tu}),state:e.pinned?"resident":"unstable"})}),tq=(0,Y.A)(e=>{let t=(0,K.dV)("apiSchemaFolder",e.id);l({key:t,tab:eS({type:"apiSchemaFolder",tabKey:t,data:e}),content:(0,a.jsx)(t5,{id:e.id,activeKey:e.showFolderTabType,modifyKey:t,onModifying:en,onModified:er,onUpdated:tu}),state:e.pinned?"resident":"unstable"})}),tG=(0,Y.A)(e=>{Z((0,K.dV)("apiSchemaFolder",e.id))}),tW=(0,Y.A)(e=>{let t=`rpcFolder.${e.id}`;l({key:t,tab:eS({type:"rpcFolder",tabKey:t,data:e}),content:(0,a.jsx)(t9,{id:e.id,activeKey:e.showFolderTabType,modifyKey:t,onModifying:en,onModified:er,onUpdated:tu}),state:e.pinned?"resident":"unstable"})}),tJ=(0,Y.A)(e=>{let t=(0,K.dV)("rpcModule",e.id);l({key:t,tab:eS({type:"rpcModule",tabKey:t,data:e}),content:(0,a.jsx)(ii,{id:e.id,activeKey:e.showFolderTabType,modifyKey:t,onModifying:en,onModified:er,onUpdated:tu}),state:e.pinned?"resident":"unstable"})}),tY=(0,Y.A)(e=>{Z((0,K.dV)("rpcModule",e.id))}),tZ=(0,Y.A)(e=>{let t=(0,K.dV)("rpcService",e.id);l({key:t,tab:eS({type:"rpcService",tabKey:t,data:e}),content:(0,a.jsx)(ia,{id:e.id,activeKey:e.showFolderTabType,modifyKey:t,onModifying:en,onModified:er,onUpdated:tu}),state:e.pinned?"resident":"unstable"})}),tQ=async()=>{await (0,u.g6)()},tX=e=>{var t,i;let{id:a,name:n,pinned:r}=e,s=(0,K.dV)("apiSchema",a),o=null==(i=(0,V.DA)(e=>e.apiSchema.map))||null==(t=i[a])?void 0:t.moduleId;l({key:s,tab:eS({type:"apiSchema",tabKey:s,data:{name:n,id:a,moduleId:o}}),content:t3({id:a,tabKey:s}),state:r?"resident":"unstable"})},t0=(0,Y.A)((e,i,a)=>{if(!e.id)return void Z(i,!0);let n=(0,K.dV)("apiSchema",e.id);t.getter().tabPanes.some(e=>e.key===i)&&J(i,{key:n,tab:eS({type:"apiSchema",tabKey:n,data:e}),content:t3({id:e.id,tabKey:n}),state:a||"resident"})}),t1=(t,i)=>{(0,u.Vt)(t,async()=>{Z((0,K.dV)("apiSchema",t,i)),eD.Ay.success(e({id:"message.movedToTrash"})),await tQ()},{isHideSuccessMessage:!0})},t4=(t,i,a,n)=>{let l=ny.getState().tabPanes.length,r=`tab-create-${++ng}`;ep({key:r,tab:eS({type:"apiSchema",tabKey:r,data:{moduleId:i,name:t?e({id:"api.action.addDataSchema"}):e({id:"api.action.newDataSchema"})}}),content:im(l,r,t,i,n),state:"resident"},a)},t3=e=>{let{id:t,tabKey:i}=e;return t?(0,a.jsx)(t2,{id:t,onDeleted:t1,formMode:0,modifyKey:i,onModifying:en,onModified:er}):null},ip=async(e,t)=>{let i=(0,K.dV)("apiSchema",e.id);J(t,{key:i,tab:eS({type:"apiSchema",tabKey:i,data:e}),content:t3({id:e.id,tabKey:i}),state:"resident"}),await tQ()},im=function(e,t,i,n){let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:!n;return(0,a.jsx)(t2,{folderId:i,moduleId:n,formMode:1,onCreated:e=>ip(e,t),tabIndex:e,schemaKey:t,modifyKey:t,showProjectModuleSelector:l,onModifying:en,onModified:er})},ih=(e,t,i)=>e?(0,a.jsx)(ie.A,{httpRequestId:e,autoSend:!1,modifyKey:t,onModifying:en,onModified:er,onUpdated:th,onApiDetailCreated:e=>tM(e),onSendBefore:()=>eh(t),defaultResponse:null==i?void 0:i.response}):null,iv=async()=>{eD.Ay.success(e({id:"message.movedToTrash"})),ew(),eb()},ig=async t=>{(null==t?void 0:t.errorCode)!=="403012"&&eD.Ay.error(e({id:"message.deleteFailure"}))},iy=(0,eT.rP)(async e=>{await (0,O.ec)(e),Z((0,K.dV)("httpRequest",e))},iv,async e=>ig(null==e?void 0:e.data),{isHideSuccessMsg:!0}),ix=(0,eT.rP)(async e=>{await (0,P.TF)(e),Z((0,K.dV)("requestFolder",e))},iv,async e=>{let t=null==e?void 0:e.data;await ig(t)},{isHideSuccessMsg:!0}),iA=(e,t,i)=>{let a=(0,K.dV)("httpRequest",e.id);void 0!==t?J(t,{key:a,tab:eS({type:"httpRequest",tabKey:a,data:e}),content:ih(e.id,a,i),state:"resident"}):ti({type:e.type,id:e.id,pinned:!0,name:e.name,method:e.method}),eb()},{pathname:ij,search:ib}=(0,C.useLocation)(),iw=e=>{var t;let i,a,n,l=new URLSearchParams(e).get("params");l&&(i=(e=>{let t;try{t=JSON.parse(e)}catch(e){}return t})(l));return i||(a={},n=null==(t=decodeURIComponent(e).split("?")[1])?void 0:t.split("&"),n&&Array.isArray(n)&&n.forEach(e=>{let t=/\[(.+?)\]/.exec(e);if(t){let i=t[1],n=e.split("=")[1],l=e.split("[")[0];if(!i||!l)return;a[l]||(a[l]=[]);a[l]=[...a[l],[i,n]]}else{let[t,i]=e.split("=");"body"===t&&(a[t]=i)}}),0===Object.keys(a).length&&(a=void 0),i=a),i},iS=(e,t)=>{e&&t&&(t.forEach(t=>{let[i,a]=t;null==e||e.variable.set(i,a)}),(0,C.dispatchUpdateEnvironmentBySdk)(e))},iC=(0,Y.A)(t=>({key:t,tab:eS({tab:e({id:"newWithPoint"}),tabKey:t}),content:(0,a.jsx)(eL.A,{createHttpApi:()=>eB(void 0,void 0,t),openHttpDebug:()=>eJ(void 0,t),createDoc:()=>eG(void 0,void 0,t),createDataSchema:()=>t4(void 0,void 0,t),createWebSocketApi:()=>eU(void 0,void 0,t),createSocketIOApi:()=>i9(void 0,void 0,t),createMcpClient:()=>ai(void 0,void 0,t)}),state:"unstable"})),iI=(0,Y.A)(()=>{let e=ny.getState().tabPanes,t="tab-add-choice-panel-"+(ng+=1),i=e.find(e=>"unstable"===e.state);i&&eh(i.key),l(iC(t))}),iN=(0,aS.qc)(),ik=(e,t)=>{e&&e!==(0,H.U3)()?iN(e,t):t.openTab()},iT=(0,Y.A)(()=>++ng),{openHttpResponseById:iM,openHttpResponse:i_,replaceHttpResponse:iF,deleteHttpResponse:iD,duplicateHttpResponse:iR,createHttpResponse:iO,deleteResponseFolder:iP,replaceHttpResponseTitle:iL,openHttpResponseTemplate:i$}=aY({renderTab:eS,getMaxNewTabIndex:iT,replaceOrOpenTab:ep,replaceTab:J,closeTab:Z,onModifying:en,onModified:er,changeTabTitle:eg,openTab:l}),{openSecuritySchemeById:iz,openSecurityScheme:iU,replaceSecurityScheme:iH,deleteSecurityScheme:iV,duplicateSecurityScheme:iK,createSecurityScheme:iq,createSecuritySchemeCombination:iG,deleteSecuritySchemeFolder:iW,replaceSecuritySchemeTitle:iJ}=a3({renderTab:eS,getMaxNewTabIndex:iT,replaceOrOpenTab:ep,replaceTab:J,closeTab:Z,onModifying:en,onModified:er,changeTabTitle:eg,openTab:l}),{openOasComponentById:iY,openOasComponent:iZ,replaceOasComponent:iQ,deleteOasComponent:iX,duplicateOasComponent:i0,createOasComponent:i1,deleteOasComponentFolder:i4,replaceOasComponentTitle:i3}=np({renderTab:eS,getMaxNewTabIndex:iT,replaceOrOpenTab:ep,replaceTab:J,closeTab:Z,onModifying:en,onModified:er,changeTabTitle:eg,openTab:l}),{openCustomEndpointTab:i8,deleteCustomEndpoint:i6,openCreateCustomEndpointTab:i2,duplicateCustomEndpoint:i5}=aw(t),{openSocketIOApi:i7,createSocketIOApi:i9,closeSocketIOApi:ae}=(e=>{let{closeTab:t,replaceOrOpenTab:i,onModifying:n,onModified:l}=ek({store:e}),r=(0,Y.A)(async(e,i)=>{await (0,C.dispatchDeleteSocketIOApi)(e),(0,C.dispatchFetchHttpApiTreeList)(),t((0,K.dV)("SOCKET_IO_API",e,i))}),s=(0,Y.A)(async e=>{await (0,C.dispatchUpdateSocketIOApi)(e),(0,C.dispatchFetchHttpApiTreeList)()}),o=(0,Y.A)((e,o,d)=>{let c=(0,K.dV)("SOCKET_IO_API",e.id);i({key:c,tab:(0,a.jsx)(iB,{type:"SOCKET_IO_API",data:e,onMouseMiddleDown:()=>t(c,!1)}),content:(0,a.jsx)(nm,{id:e.id,onModifying:()=>n(c),onModified:()=>l(c),formMode:0,onSave:s,onDelete:r}),state:o?"resident":"unstable"},d)}),d=(0,Y.A)(function(e,r,s){let d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:!r,u=`tab-add-SOCKET_IO_API-${++nh}`,p=async e=>{await (0,C.dispatchCreateSocketIOApi)(e,async e=>{o(e,!0,u)}),(0,C.dispatchFetchHttpApiTreeList)()};i({key:u,tab:(0,a.jsx)(iB,{onMouseMiddleDown:()=>t(u,!1),type:"SOCKET_IO_API",data:{name:(0,c.hw)({id:"socket.io.create"})}}),content:(0,a.jsx)(nm,{tabKey:u,onModifying:()=>n(u),onModified:()=>l(u),formMode:1,folderId:e,moduleId:r,showProjectModuleSelector:d,onSave:p}),state:"resident"},s)});return{openSocketIOApi:o,createSocketIOApi:d,closeSocketIOApi:(0,Y.A)((e,i)=>{t((0,K.dV)("SOCKET_IO_API",e,i))})}})(t),{openMcpClient:at,createMcpClient:ai,closeMcpClient:aa}=(e=>{let{closeTab:t,replaceOrOpenTab:i,onModifying:n,onModified:l}=ek({store:e}),r=(0,Y.A)(async(e,i)=>{await (0,C.dispatchDeleteMcpClient)(e),(0,C.dispatchFetchHttpApiTreeList)(),t((0,K.dV)("MCP_CLIENT",e,i))}),s=(0,Y.A)(async e=>{await (0,C.dispatchUpdateMcpClient)(e),(0,C.dispatchFetchHttpApiTreeList)()}),o=(0,Y.A)((e,o,d)=>{let c=(0,K.dV)("MCP_CLIENT",e.id);i({key:c,tab:(0,a.jsx)(iB,{type:"MCP_CLIENT",data:e,onMouseMiddleDown:()=>t(c,!1)}),content:(0,a.jsx)(nv,{tabKey:c,id:e.id,onModifying:()=>n(c),onModified:()=>l(c),formMode:0,onSave:s,onDelete:r}),state:o?"resident":"unstable"},d)}),d=(0,Y.A)(function(e,r,s){let d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:!r,u=`tab-add-MCP_CLIENT-${++nf}`,p=async e=>{await (0,C.dispatchCreateMcpClient)(e,async e=>{o(e,!0,u)}),(0,C.dispatchFetchHttpApiTreeList)()};i({key:u,tab:(0,a.jsx)(iB,{onMouseMiddleDown:()=>t(u,!1),type:"MCP_CLIENT",data:{name:(0,c.hw)({id:"mcp.client.create"})}}),content:(0,a.jsx)(nv,{tabKey:u,onModifying:()=>n(u),onModified:()=>l(u),formMode:1,folderId:e,moduleId:r,showProjectModuleSelector:d,onSave:p}),state:"resident"},s)});return{openMcpClient:o,createMcpClient:d,closeMcpClient:(0,Y.A)((e,i)=>{t((0,K.dV)("MCP_CLIENT",e,i))})}})(t),an=async e=>{(0,d.l1)().setRecording(!1);let{type:t,forkFromBranchId:i}=(0,iE.ok)().projectCurrentBranch;(0,iE.IF)()?await (0,aC.zD)(i):"VERSION"===t&&(0,aC.CZ)(i);let{openHttpApi:a,openHttpFolder:n,openProjectOverview:l,openDoc:r,openSocketService:s,openSocketApi:o,openWebSocketApi:c,openSocketIOApi:u,openMcpClient:p,openDataSchema:m,openDataSchemaFolder:h,openHttpResponseTemplate:v,openHttpResponseById:f,openHttpRequest:g,switchTo:y,createAddChoicePanel:x,openRpcFolder:A,openRpcModule:j,openRpcService:b,openRpcMethod:w,openHttpApiCase:S,openSocketApiCase:C}=e4.Qm.getState();e.tabList.forEach(e=>{if(e.startsWith("socketApiCase"))return void C({id:(0,ee.toSafeInteger)(e.split(".")[1]),pinned:!0});if(e.startsWith("apiCase"))return void S({id:(0,ee.toSafeInteger)(e.split(".")[1]),pinned:!0});if(e.startsWith("rpcMethod"))return void w({id:(0,ee.toSafeInteger)(e.split(".")[1]),pinned:!0});if(e.startsWith("rpcService"))return void b({id:(0,ee.toSafeInteger)(e.split(".")[1]),pinned:!0});if(e.startsWith("rpcModule"))return void j({id:(0,ee.toSafeInteger)(e.split(".")[1]),pinned:!0});if(e.startsWith("rpcFolder"))return void A({id:(0,ee.toSafeInteger)(e.split(".")[1]),pinned:!0});if(e.startsWith("tab-add-choice-panel"))return void x();if(e.startsWith("httpRequest"))return void g({id:(0,ee.toSafeInteger)(e.split(".")[1]),pinned:!0});if(e.startsWith("httpResponse"))return void f({id:(0,ee.toSafeInteger)(e.split(".")[1]),pinned:!0});if(e.startsWith("RESPONSE_TEMPLATE")){let[t,i]=e.split(".");v("RESPONSE_TEMPLATE",i?(0,ee.toSafeInteger)(i):void 0,!0);return}if(e.startsWith("apiSchema"))return void m({id:(0,ee.toSafeInteger)(e.split(".")[1]),pinned:!0});if(e.startsWith("webSocketApi"))return void c({id:(0,ee.toSafeInteger)(e.split(".")[1]),pinned:!0});if(e.startsWith("SOCKET_IO_API"))return void u({id:(0,ee.toSafeInteger)(e.split(".")[1])},!0);if(e.startsWith("MCP_CLIENT"))return void p({id:(0,ee.toSafeInteger)(e.split(".")[1])},!0);if(e.startsWith("socketApi"))return void o({id:(0,ee.toSafeInteger)(e.split(".")[1]),pinned:!0});if(e.startsWith("socketService"))return void s({id:(0,ee.toSafeInteger)(e.split(".")[1]),pinned:!0});if(e.startsWith("doc"))return void r({id:(0,ee.toSafeInteger)(e.split(".")[1]),pinned:!0});if(e.startsWith("module"))return void l({moduleId:(0,ee.toSafeInteger)(e.split(".")[1]),pinned:!0});if(e.startsWith("apiDetailFolder")){let[t,i,a]=e.split(".");n({id:(0,ee.toSafeInteger)(i),moduleId:a?(0,ee.toSafeInteger)(a):void 0,pinned:!0});return}if(e.startsWith("apiSchemaFolder"))return void h({id:(0,ee.toSafeInteger)(e.split(".")[1]),pinned:!0});e.startsWith("apiDetail")&&a({id:(0,ee.toSafeInteger)(e.split(".")[1]),type:"http",pinned:!0})}),setTimeout(()=>{y(Math.max(e.tabList.findIndex(t=>t===e.activeKey),0)+1)},100),(0,d.l1)().setRecording(!0)},al=(0,iE._$)(e=>{var t;return null==(t=e.projectCurrentBranch)?void 0:t.id}),ar=(0,iE._$)(e=>e.projectCurrentBranch),as=(0,d.jd)(e=>e.type),ao=(0,n.useMemo)(()=>"apiManage"===as&&(0,d.l1)().shouldRestore("apiManage",al)&&(0,d.l1)().tabList.length>0,[as,al]),ad=(0,Y.A)(async()=>{let e=(0,d.l1)().tabList,t=(0,d.l1)().activeKey;await an({tabList:e,activeKey:t}),(0,d.l1)().restored("apiManage",al)});(0,e_.A)(()=>{ao&&ad()},[as,al]);let ac=(0,n.useRef)(!1);(0,n.useEffect)(()=>{let e=iw(ib);if(!ac.current&&ex&&e&&e.environment&&(iS(ex,e.environment),ac.current=!0),!ac.current&&!ex&&eA&&e&&e.environment){let t=Object.values(eA).find(e=>"mock"!==e.type&&"cloudMock"!==e.type);t&&(iS(t.toSdkObject(),e.environment),ac.current=!0)}},[ex,eA]),(0,eF.A)(()=>{(0,eM.Ti)(async()=>{let e;ao&&ad();let t=!ao&&ar.isMain;if(!ij)return;if(ib){let t,i,a=(t=new URLSearchParams(ib),i={},t&&t.forEach((e,t)=>{i[t]=e}),i);a&&(null==a?void 0:a.branchId)&&(e=Number(a.branchId))}let[,i]=ij.split("/apis/");if(!i)return;let a=i.split(",");if(t&&a.length<=0)return;let n=[];a.forEach((t,i)=>{let[,a,l,r]=/([a-zA-Z-]+)-(\d+)-?([a-zA-Z-]+)?/.exec(t)||[];if(!a||!l)return;let s=(0,ee.toSafeInteger)(l);if(s)switch(null==a?void 0:a.toLowerCase()){case"api":window.setTimeout(async()=>{let t;try{t=(await (0,F.P)(s,void 0,e)).data}catch(e){console.log(e)}t?(n.push(s),ik(e,{dataId:s,type:"apiDetail",openTab:()=>{ti({id:s,type:"http",pinned:!0,showTabType:r||void 0,searchParams:iw(ib)})}})):(0,aS.vv)()},100*i);break;case"websocket":window.setTimeout(async()=>{let e;try{e=(await (0,U.P)(s)).data}catch(e){console.log(e)}e?(n.push(s),ta({id:s,pinned:!0,showTabType:r||void 0,searchParams:iw(ib)})):(0,aS.vv)()},100*i);break;case"socketio":window.setTimeout(async()=>{let e;try{e=(await (0,B.P)(s)).data}catch(e){console.log(e)}e?(n.push(s),i7({id:s},!0)):(0,aS.vv)()},100*i);break;case"mcp-client":window.setTimeout(async()=>{let e;try{e=(await (0,z.P)(s)).data}catch(e){console.log(e)}e?(n.push(s),at({id:s},!0)):(0,aS.vv)()},100*i);break;case"rpc":window.setTimeout(async()=>{let e;try{e=(await (0,L.P)(String(s))).data}catch(e){console.log(e)}e?(n.push(s),tn({id:s,pinned:!0,showTabType:r||void 0})):(0,aS.vv)()},100*i);break;case"doc":window.setTimeout(async()=>{let t;try{t=(await (0,_.RD)(s,e)).data}catch(e){console.log(e)}if(!t)return void(0,aS.vv)();n.push(s);let i=null==ej?void 0:ej[s];ik(e,{dataId:s,type:"doc",openTab:()=>tr({id:s,pinned:!0,name:null==i?void 0:i.name,moduleId:null==i?void 0:i.moduleId})})},100*i);break;case"schema":window.setTimeout(async()=>{let t;try{t=(await (0,E.P)(String(s),e)).data}catch(e){console.log(e)}t?(n.push(s),ik(e,{dataId:s,openTab:()=>{tX({id:s,pinned:!0})},type:"apiSchema"})):(0,aS.vv)()},100*i);break;case"response":window.setTimeout(async()=>{let t;try{let{data:i}=await (0,R.n_)(void 0,e);t=null==i?void 0:i.find(e=>e.id===s)}catch(e){console.log(e)}t?(n.push(s),ik(e,{dataId:s,openTab:()=>{iM({id:s,pinned:!0})},type:"httpResponse"})):(0,aS.vv)()},100*i);break;case"security-scheme":window.setTimeout(async()=>{let t;try{let{data:i}=await (0,$.n_)(void 0,e);t=null==i?void 0:i.find(e=>e.id===s)}catch(e){console.log(e)}t?(n.push(s),ik(e,{dataId:s,openTab:()=>{iz({id:s,pinned:!0})},type:"SECURITY_SCHEME"})):(0,aS.vv)()},100*i);break;case"custom-endpoint":window.setTimeout(async()=>{n.push(s),ik(e,{dataId:s,openTab:()=>{i8({id:s},!0)},type:"CUSTOM_ENDPOINT"})},100*i);break;case"endpoint-case":window.setTimeout(async()=>{let t;try{t=(await (0,D.P)(s,e)).data}catch(e){console.log(e)}t?(n.push(s),e?iN(e,{dataId:s,type:"apiCase",openTab:()=>{e7({id:s,pinned:!0})}}):e7({id:s,pinned:!0})):(0,aS.vv)()},100*i);break;case"test-case":window.setTimeout(async()=>{let e;try{e=(await (0,A.L9)(s)).data}catch(e){console.log(e)}e?e9({id:s,pinned:!0}):(0,aS.vv)()},100*i)}});let l=(0,ee.toSafeInteger)(new URLSearchParams(ib).get("activeTab"));window.setTimeout(()=>{ed(Math.max(n.findIndex(e=>e===l)+1,1))},100*a.length)})});let au=(0,Y.A)((e,i)=>{e.id?t.getter().tabPanes.some(e=>e.key===i)&&iF(e,i):Z(i,!0)});return{onChange:ea,openTab:l,replaceTab:J,closeTab:Z,closeAllTab:Q,closeCurrentTab:X,closeAnotherAllTab:et,closeAnotherAllTabBySelectKey:ei,onModifying:en,onModified:er,getModifyingCount:es,setModifying:eo,switchTo:ed,switchToNext:ec,switchToPrevious:eu,batchChangeTabTitle:em,unstableTurnsResidentTab:eh,togglePinTab:ev,moveTabs:ef,getCurrentApiNameMode:e$,openCustomEndpointTab:i8,deleteCustomEndpoint:i6,openCreateCustomEndpointTab:i2,duplicateCustomEndpoint:i5,openSocketIOApi:i7,createSocketIOApi:i9,closeSocketIOApi:ae,openMcpClient:at,createMcpClient:ai,closeMcpClient:aa,createHttpApi:(0,Y.A)(eB),replaceExistedHttpApi:ez,deleteHttpApi:(0,Y.A)(e0),openHttpApi:(0,Y.A)(ti),openHttpDebug:(0,Y.A)(eJ),openHttpApiCase:(0,Y.A)(e7),openTestCase:(0,Y.A)(e9),deleteHttpApiCase:(0,Y.A)(e6),deleteTestCase:(0,Y.A)(e2),replaceExistedHttpApiCase:te,openSocketService:(0,Y.A)(e=>{var t,i;let a=e.id,n=(0,K.dV)("socketService",a),r=null==(i=(0,V.DA)(e=>e.socketService.socketServiceMap))||null==(t=i[a])?void 0:t.moduleId;l({key:n,tab:eS({type:"socketService",tabKey:n,data:{...e,moduleId:r}}),content:tw(e.id,n),state:e.pinned?"resident":"unstable"})}),deleteSocketService:(0,Y.A)(e8),createSocketApi:(0,Y.A)(eV),deleteSocketApi:(0,Y.A)(e3),openSocketApi:(0,Y.A)(tl),openSocketApiCase:(0,Y.A)(tt),deleteSocketApiCase:(0,Y.A)(e5),createWebSocketApi:(0,Y.A)(eU),deleteWebSocketApi:(0,Y.A)(e1),openWebSocketApi:(0,Y.A)(ta),openRpcMethod:(0,Y.A)(tn),createRpcMethod:(0,Y.A)(eH),openRpcFolder:(0,Y.A)(tW),openProjectOverview:(0,Y.A)(e=>{l(to(e))}),openMergeRequestManage:(0,Y.A)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l((e=>{let{pinned:t=!1,mergeRequestId:i}=e;return{key:t6.zF,tab:eS({tab:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eR.A,{type:"icon-branch-merge",style:{marginRight:4}}),(0,a.jsx)(c.sA,{id:"branch.mergeRequests"})]}),tabKey:t6.zF}),content:(0,a.jsx)(T,{mergeRequestId:i}),state:t?"resident":"unstable"}})(e))}),openEndpointTestCaseReport:(0,Y.A)((e,t)=>{let i=`${t6.lw}.${e.id}`;l({key:i,tab:eS({tab:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eR.A,{color:"var(--ui-green-6)",type:"icon-chart-donut",style:{marginRight:4}}),e.name]}),tabKey:i}),content:(0,a.jsx)(s.A,{report:e,name:e.name,runnerId:e.runnerId}),state:t?"resident":"unstable"})}),replaceProjectOverview:(0,Y.A)(e=>{e.forEach(e=>{J(`module.${e}`,to({moduleId:e,pinned:!0}))})}),openHttpFolder:(0,Y.A)(tK),openDataSchemaFolder:(0,Y.A)(tq),closeDataSchemaFolder:tG,openRpcModule:(0,Y.A)(tJ),closeRpcModule:(0,Y.A)(tY),openRpcService:(0,Y.A)(tZ),deleteHttpFolder:(0,Y.A)((e,t)=>{Z((0,K.dV)("apiDetailFolder",e,t)),Z((0,K.dV)("rpcFolder",e,t))}),deleteModule:(0,Y.A)(e=>{Z((0,K.dV)("module",e))}),createDoc:(0,Y.A)(eG),openDoc:(0,Y.A)(tr),openEndpointDesignGuideline:(0,Y.A)(tz),openAiCheckEndpointComplianceReport:(0,Y.A)(tU),openAiCheckDocumentCompletenessReport:(0,Y.A)(tH),openAiGenerateEndpointTestCase:(0,Y.A)(tV),deleteDoc:ts,createAddChoicePanel:(0,Y.A)(iI),createAddBranchChoicePanel:(0,Y.A)(()=>{let t,i=ny.getState().tabPanes,n="tab-add-branch-choice-panel-"+(ng+=1),r=i.find(e=>"unstable"===e.state);r&&eh(r.key);l({key:t=n,tab:eS({tab:e({id:"newWithPoint"}),tabKey:t}),content:(0,a.jsx)(eP.A,{createHttpApi:()=>eB(void 0,void 0,t),createDataSchema:()=>t4(void 0,void 0,t),createDoc:()=>eG(void 0,void 0,t)}),state:"unstable"})}),openDataSchema:(0,Y.A)(tX),deleteDataSchema:(0,Y.A)(t1),createDataSchema:(0,Y.A)(t4),replaceExistedDataSchema:t0,openHttpRequest:(0,Y.A)(e=>{let{id:t,name:i,pinned:a}=e,n=(0,K.dV)("httpRequest",t);l({key:n,tab:eS({type:"httpRequest",tabKey:n,data:{id:t,name:i}}),content:ih(t,n),state:a?"resident":"unstable"})}),deleteHttpRequest:(0,Y.A)(iy),deleteRequestFolder:(0,Y.A)(ix),generateTabElementList:(0,Y.A)(e=>e.map(e=>({key:e.tabKey,tabTitle:eS(e)}))),changeCurrentOpenedTabTitle:(0,Y.A)(e=>{em(e)}),openHttpResponse:(0,Y.A)(i_),openHttpResponseById:(0,Y.A)(iM),replaceHttpResponse:(0,Y.A)(iF),replaceExistedResponse:au,createHttpResponse:(0,Y.A)(iO),duplicateHttpResponse:(0,Y.A)(iR),deleteHttpResponse:(0,Y.A)(iD),deleteResponseFolder:(0,Y.A)(iP),replaceHttpResponseTitle:(0,Y.A)(iL),openHttpResponseTemplate:(0,Y.A)(i$),openSecuritySchemeById:(0,Y.A)(iz),openSecurityScheme:(0,Y.A)(iU),replaceSecurityScheme:(0,Y.A)(iH),deleteSecurityScheme:(0,Y.A)(iV),duplicateSecurityScheme:(0,Y.A)(iK),createSecurityScheme:(0,Y.A)(iq),createSecuritySchemeCombination:(0,Y.A)(iG),deleteSecuritySchemeFolder:(0,Y.A)(iW),replaceSecuritySchemeTitle:(0,Y.A)(iJ),openOasComponentById:(0,Y.A)(iY),openOasComponent:(0,Y.A)(iZ),replaceOasComponent:(0,Y.A)(iQ),deleteOasComponent:(0,Y.A)(iX),duplicateOasComponent:(0,Y.A)(i0),createOasComponent:(0,Y.A)(i1),deleteOasComponentFolder:(0,Y.A)(i4),replaceOasComponentTitle:(0,Y.A)(i3),createWebhookApi:eK}}},77212:function(e,t,i){"use strict";i.d(t,{qc:()=>F,vv:()=>D});var a=i(838e3),n=i(553047),l=i(843212),r=i(545690),s=i(744283),o=i(740565),d=i(205627),c=i(405147),u=i(755694),p=i(515875),m=i(167223),h=i(187633),v=i(371122),f=i(342392),g=i(520787),y=i(217429),x=i(551105),A=i(496411),j=i(689368),b=i(471504),w=i(140049),S=i(764007),C=i(929463),I=i(671466);let N=async(e,t)=>({data:((await (0,v.n_)((0,A.MJ)(),t)).data||[]).find(t=>t.id===Number(e))}),k=async(e,t)=>({data:((await (0,f.n_)((0,A.MJ)(),t)).data||[]).find(t=>t.id===Number(e))}),T=async(e,t)=>({data:((await (0,g.n_)(t)).data||[]).find(t=>t.id===Number(e))}),M=async(e,t)=>({data:((await (0,y.$h)({branchId:t})).data||[]).find(t=>t.id===Number(e))}),E=async(e,t)=>({data:((await (0,x.Vb)()).data||[]).find(e=>e.id===Number(id))}),_={apiDetail:(e,t)=>(0,m.P)(e,(0,A.MJ)(),t),doc:p.RD,apiSchema:u.P,httpResponse:N,testScenario:T,testSuite:M,CUSTOM_ENDPOINT:c.Tb,testReport:d.P,SECURITY_SCHEME:k,apiCase:(e,t)=>(0,h.P)(e,t),TEST_SCENARIO_DATA_SET:E};function F(){let e=(0,r.Ay)();return(0,w.A)(async(t,i)=>{let r,{dataId:d,type:c,openTab:u}=i,p=_[c];try{r=(await p(d,t)).data}catch(e){console.log(e)}if(!r)return void D();let m=t===(0,A.sI)(),h={apiDetail:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.mn,{method:r.method,className:"text-left block mr-2"}),(0,a.jsx)("span",{children:r.name})]}),doc:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I.A,{type:"icon-file-docs",className:"mr-1"}),(0,a.jsx)("span",{children:r.name})]}),apiSchema:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.NZ,{style:{marginRight:4}}),r.displayName||r.name]}),httpResponse:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I.A,{type:"icon-response-component",color:m?"var(--ui-purple-6)":"var(--ui-blue-6)",className:"mr-1"}),r.name]}),testScenario:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I.A,{type:"icon-task-scenario",color:m?"var(--ui-purple-6)":"var(--ui-blue-6)",className:"mr-1"}),r.name]}),CUSTOM_ENDPOINT:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.w,{protocol:r.protocol,className:"text-left block mr-2"}),(0,a.jsx)("span",{children:r.name})]}),testReport:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I.A,{type:"icon-test-reports",color:m?"var(--ui-purple-6)":"var(--ui-blue-6)",className:"mr-1"}),r.name]}),SECURITY_SCHEME:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I.A,{type:"icon-ShieldKeyhole",color:m?"var(--ui-purple-6)":"var(--ui-blue-6)",className:"mr-1"}),r.name]}),apiCase:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.a9,{style:{color:m?"var(--ui-purple-6)":"var(--ui-blue-6)"},className:"mr-1",size:16}),r.name]})},v=(0,j.DA)(e=>{var i,a,n;return null!=(n=null==(i=e.projectBranch.map)?void 0:i[t])?n:null==(a=e.apiVersionBranch.map)?void 0:a[t]}),f={icon:(0,a.jsx)(I.A,{type:"icon-info-1",color:"var(--ui-primary-color)"}),title:(0,o.hw)({id:"branch.shareLink.differentBranch.modal.title"}),content:(0,a.jsxs)(a.Fragment,{children:[(0,o.hw)({id:"branch.shareLink.archivedBranch.modal.content"},{branchName:v?v.name:t}),!!v&&(0,a.jsx)("div",{className:"flex items-center mt-3",children:h[c]})]})};!v||v.isArchived?S.Ay.info(f):S.Ay.confirm({...f,content:(0,a.jsxs)(a.Fragment,{children:[(0,o.hw)({id:"branch.shareLink.differentBranch.modal.content"},{branchName:null==v?void 0:v.name}),(0,a.jsx)("div",{className:"flex items-baseline mt-2",children:h[c]})]}),okText:(0,o.hw)({id:"branch.shareLink.differentBranch.modal.ok"}),onOk:()=>{let{hasPermission:t}=(0,l.Z)(s.o.BRANCH_SPRINT_READ);t?e(v,()=>u(r)):C.Ay.warning((0,o.hw)({id:"noPermission"}))}})})}function D(){S.Ay.info({icon:(0,a.jsx)(I.A,{type:"icon-info-1",color:"var(--ui-primary-color)"}),title:(0,o.hw)({id:"branch.shareLink.differentBranch.modal.title"}),content:(0,o.hw)({id:"branch.shareLink.resourceNotExisted"})})}},103492:function(e,t,i){"use strict";i.d(t,{A:()=>y});var a=i(838e3),n=i(291341),l=i(556561),r=i(140049),s=i(641486),o=i.n(s),d=i(838487),c=i.n(d),u=i(163808),p=i(458184),m=i(671466);let h="rightSideBar-mIB1Q8",v="title-wvTbAe",{Text:f}=u.A,g=e=>(0,a.jsxs)("div",{className:c()("w-80","flex-shrink-0","app-bg-50","pl-3","flex-col",h,{flex:e.visible,hidden:!e.visible}),children:[(0,a.jsxs)("div",{className:c()("flex","items-center","mr-3",v),children:[(0,a.jsx)(f,{className:"flex-1 text-base font-medium",children:e.title}),(0,a.jsx)(p.A,{type:"text",icon:(0,a.jsx)(m.A,{type:"icon-nav-close",size:19}),onClick:e.onClose})]}),(0,a.jsx)("div",{className:"h-full overflow-hidden",children:e.children})]}),y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=`${e.modelType}.${e.id}`,[i,d]=(0,s.useState)(null),[c,u]=(0,l.A)(e.visible),p=(0,n.M)(e=>e.getActiveMenu(t)),m=(0,n.M)(e=>e.removeActiveMenu);(0,s.useEffect)(()=>{p&&p&&(d(p),u.setTrue(),m(t))},[p,m]),(0,s.useEffect)(()=>{var t;null==(t=e.onVisibleChange)||t.call(e,c)},[e.onVisibleChange,c]);let h=(0,r.A)(function(t){let i=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=o().Children.only(t);return i?(0,a.jsx)(g,{title:e.title,visible:c,onClose:u.setFalse,children:o().isValidElement(n)?o().cloneElement(n,{sidebarVisible:c}):n}):(0,a.jsx)(a.Fragment,{children:o().isValidElement(n)?o().cloneElement(n,{sidebarVisible:c}):n})}),v=(0,r.A)(e=>{d(e),null===e?u.setFalse():u.toggle()}),f=(0,r.A)(e=>{d(e),u.setTrue()});return{visible:c,rightSidebarTabKey:i,render:h,show:u.setTrue,hide:u.setFalse,toggle:u.toggle,toggleWithKey:v,showWithKey:f}}},373365:function(e,t,i){"use strict";i.d(t,{EN:()=>s,Nm:()=>c,PJ:()=>r,Ty:()=>p,V2:()=>v,YU:()=>h,Z4:()=>u,hb:()=>o,oK:()=>f,of:()=>d,qd:()=>m});var a=i(169508),n=i(69712),l=i(398380);let r={apiDetail:"endpoint"},s={apiDetail:"api",webSocketApi:"websocket",SOCKET_IO_API:"socket-io",MCP_CLIENT:"mcp-client",rpcMethod:"rpc",doc:"doc",apiDetailFolder:"folder",CUSTOM_ENDPOINT:"custom-endpoint"},o={apiDetail:a.A3+"://link/endpoint/",webSocketApi:a.A3+"://link/websocket/",SOCKET_IO_API:a.A3+"://link/socket-io/",MCP_CLIENT:a.A3+"://link/mcp-client/",rpcMethod:`${s.rpcMethod}-`,doc:a.A3+"://link/pages/",apiDetailFolder:a.A3+"://link/folders/",CUSTOM_ENDPOINT:a.A3+"://link/custom-endpoint/"},d=e=>e.startsWith(o.doc)?e.replace(o.doc,"doc-"):e.startsWith(o.apiDetail)?e.replace(o.apiDetail,`${s.apiDetail}-`):e.startsWith(o.webSocketApi)?e.replace(o.webSocketApi,`${s.webSocketApi}-`):e.startsWith(o.SOCKET_IO_API)?e.replace(o.SOCKET_IO_API,`${s.SOCKET_IO_API}-`):e.startsWith(o.MCP_CLIENT)?e.replace(o.MCP_CLIENT,`${s.MCP_CLIENT}-`):e.startsWith(o.apiDetailFolder)?e.replace(o.apiDetailFolder,`${s.apiDetailFolder}-`):e.startsWith(o.CUSTOM_ENDPOINT)?e.replace(o.CUSTOM_ENDPOINT,`${s.CUSTOM_ENDPOINT}-`):e.startsWith("endpoint-")?e.replace("endpoint-","api-"):e,c=e=>{var t,i,a,n,l,d;if(e.startsWith(o.doc))return!!(null==(i=e.replace(o.doc,"").match(/^\d+/))?void 0:i.length);if(e.startsWith(o.apiDetail))return!!(null==(a=e.replace(o.apiDetail,"").match(/^\d+/))?void 0:a.length);if(e.startsWith(o.apiDetailFolder))return!!(null==(n=e.replace(o.apiDetailFolder,"").match(/^\d+/))?void 0:n.length);if(e.startsWith(o.CUSTOM_ENDPOINT))return!!(null==(l=e.replace(o.CUSTOM_ENDPOINT,"").match(/^\d+/))?void 0:l.length);if(e.startsWith(o.MCP_CLIENT))return!!(null==(d=e.replace(o.MCP_CLIENT,"").match(/^\d+/))?void 0:d.length);let{itemType:c=""}=u(e);return!!(null==(t=({[r.apiDetail]:RegExp(`^${r.apiDetail}-\\d+`),[s.apiDetail]:RegExp(`^${s.apiDetail}-\\d+`),[s.CUSTOM_ENDPOINT]:RegExp(`^${s.CUSTOM_ENDPOINT}-\\d+`),[s.webSocketApi]:RegExp(`^${s.webSocketApi}-\\d+`),[s.SOCKET_IO_API]:RegExp(`^${s.SOCKET_IO_API}-\\d+`),[s.MCP_CLIENT]:RegExp(`^${s.MCP_CLIENT}-\\d+`),[s.doc]:RegExp(`^${s.doc}-\\d+`),[s.rpcMethod]:RegExp(`^${s.rpcMethod}-\\d+`),[s.apiDetailFolder]:RegExp(`^${s.apiDetailFolder}-\\d+`)})[c])?void 0:t.test(e))};function u(e){if("string"!=typeof e)return{itemType:"",itemId:0};let[,t,i]=/([a-zA-Z-]+)-(\d+)/.exec(e)||[];return{itemType:t,itemId:Number(i)}}async function p(e){try{let t=await Promise.resolve().then(i.t.bind(i,520102,23));return new Promise((i,a)=>{t.authorizeRequest(e,(e,t)=>{e&&a(void 0),t&&i(t)})})}catch(e){console.log("asyncAuthorizeRequest-error",e);return}}function m(e){var t,i;if(!e)return e;let a=null==(i=e.parameterGroup)||null==(t=i.parameters)?void 0:t.query;return Array.isArray(a)&&a.forEach(e=>{void 0===e.example&&delete e.example}),e}function h(e){if(!e)return e;let t=e=>{if(e&&"object"==typeof e)if(Array.isArray(e))for(let i of e)t(i);else for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&(void 0===e[i]&&delete e[i],t(e[i]))};return t(e),e}let v=e=>{if(null===e||"object"!=typeof e)return e;if(Array.isArray(e)){let t=[];for(let i of e)t.push(v(i));return t}{let t={};for(let i in e)if(Object.prototype.hasOwnProperty.call(e,i)){let a=e[i];t[i]=v(a)}return t}},f=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=null==t?void 0:t.folderShareExpandModeSettings;if(i.length>0||!a||"AUTO"===a.mode)return;let r=a.expandId;if((0,l.isEmpty)(r))return;let s=new Set,o=(0,n.Gu)().apiDetailFolder.apiDetailFolderMap;for(let t of r){var d,c,u;let i=(0,n.dV)("apiDetailFolder",t,null==(d=o[t])?void 0:d.moduleId);for(;i&&!s.has(i);){;s.add(i),i=null==(u=e.get(i))||null==(c=u.parent)?void 0:c.key}}return Array.from(s)}},694828:function(e,t,i){"use strict";i.d(t,{A:()=>y});var a=i(838e3),n=i(740565),l=i(238504),r=i(57160),s=i(730362),o=i(411576),d=i(698879),c=i(667754),u=i(272164),p=i(255529),m=i(764007),h=i(820182),v=i(458184),f=i(641486),g=i(887015);let y=e=>{let{disableValue:t,parentId:i,moduleId:y,formMode:x,folder:A,onCloseModal:j,onApiFolderChanged:b,visible:w}=e,[S]=p.A.useForm(),C=(0,f.useRef)({}),{run:I,cancel:N,loading:k}=(0,c.ZO)(c.ZO.transformServiceArg1(s.vt),e=>{(0,r.YM)(()=>{null==b||b(e),null==j||j()},{onFailure(){null==j||j()}}),(0,l.g6)()},void 0,{isReturnAll:!0,showLoading:!1}),{run:T,cancel:M,loading:E}=(0,c.eB)(c.eB.transformServiceArg1(s.yo),()=>{(0,r.YM)(()=>{null==b||b(C.current),null==j||j()},{onFailure(){null==j||j()}}),(0,l.g6)()},void 0,{isReturnAll:!0,showLoading:!1}),{run:_}=(0,u.A)(e=>{var t;C.current={...e,id:A&&(null==(t=A.folder)?void 0:t.id),parentId:e.parentId||0,moduleId:y},1===x?I(C.current):T(C.current)},{wait:500,leading:!0,trailing:!1}),F=()=>{null==j||j()},D=A&&A.folder&&{name:A.name,id:A.folder.id,parentId:A.folder.parentId},R=1===x?{name:"",id:void 0,parentId:null!=i?i:0}:D,O=(0,d.A)();if(void 0===R)return null;let P=1===x?(0,a.jsx)(n.sA,{id:"apiFolder.editModal.create.title"}):(0,a.jsx)(n.sA,{id:"apiFolder.editModal.edit.title"});return(0,a.jsx)(m.Ay,{...e,title:P,visible:w,onCancel:F,footer:(0,a.jsx)(o.A,{onSubmit:()=>{S.submit()},onCancel:F,cancelSubmit:()=>{1===x?N():M()},submitBtnLoading:1===x?k:E}),destroyOnClose:!0,children:(0,a.jsxs)(p.A,{layout:"vertical",onFinish:_,form:S,initialValues:R,preserve:!1,children:[(0,a.jsx)(p.A.Item,{label:(0,a.jsx)(n.sA,{id:"apiFolder.label.name"}),name:"name",rules:[{required:!0,message:(0,a.jsx)(n.sA,{id:"apiFolder.validate.name.message"})}],children:(0,a.jsx)(h.A,{autoComplete:"off",ref:O})}),(0,a.jsx)(p.A.Item,{name:"parentId",label:(0,n.hw)({id:"groupByParent"}),style:{marginBottom:0},children:(0,a.jsx)(g.A,{placeholder:(0,n.hw)({id:"defaultFolder"}),disableValue:t||R.id,hideCreateFolder:1===x,moduleId:y})}),(0,a.jsx)(p.A.Item,{style:{display:"none"},children:(0,a.jsx)(v.A,{htmlType:"submit"})})]})})}},887015:function(e,t,i){"use strict";i.d(t,{A:()=>h});var a=i(838e3),n=i(139890),l=i(57160),r=i(252291),s=i(694828),o=i(267622),d=i(689368),c=i(967860),u=i(718180),p=i(202182),m=i(641486);let h=e=>{let{onChange:t,value:i,moduleId:h,...v}=e,[f,g]=(0,m.useState)(!1),{importProjectId:y}=(0,m.useContext)(o.I),x=(0,d.Ay)(e=>{let{apiSchemaFolder:t}=e;return t.cascaderTreeList}),A=(0,d.Ay)(e=>{let{apiSchemaFolder:t}=e;return t.apiSchemaFolderMap});(0,u.A)(()=>{y?(0,l.YM)():void 0===x&&(0,l.YM)()});let j=(0,p.A)(()=>{let e=h?null==x?void 0:x.filter(e=>e.moduleId===h):x;return[{...n.q,children:e||[]}]},[h,x]),b=(0,m.useMemo)(()=>{var e;return i&&h&&(null==(e=A[i])?void 0:e.moduleId)!==h||i===c.Kj&&j[0]?j[0].value:i},[j,A,i,h]),w=(0,r.c)(t);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.A,{onCreateFolder:()=>g(!0),onForkFolder:w,treeData:j,value:b,onChange:t,...v}),f&&(0,a.jsx)(s.A,{formMode:1,visible:f,destroyOnClose:!0,onCloseModal:()=>g(!1),onCancel:()=>g(!1),onApiFolderChanged:e=>{null==t||t(null==e?void 0:e.id)},disableValue:e.disableValue,moduleId:h})]})}},312303:function(e,t,i){"use strict";i.d(t,{Ay:()=>x,Op:()=>g,fk:()=>y});var a=i(838e3),n=i(553047),l=i(740565),r=i(850050),s=i(689368),o=i(471504),d=i(622754),c=i(838487),u=i.n(c),p=i(554692),m=i(671466),h=i(641486);let v={"tree-container":"tree-container-TMf9il",treeContainer:"tree-container-TMf9il"},f=e=>{var t,i;let{item:l,expanded:r}=e;return"apiDetailFolder"===l.type?r?(0,a.jsx)(m.A,{type:"icon-folder-open",size:16}):(0,a.jsx)(m.A,{type:"icon-FolderDefault",size:16}):"apiDetail"===l.type?(0,a.jsx)(o.mn,{abbr:!0,method:null==(t=l.api)?void 0:t.method,className:"text-left block",title:l.name,style:{width:29},apiType:l.api.type}):"webSocketApi"===l.type?(0,a.jsx)(m.A,{type:"icon-websocket",color:"var(--ui-orange-6)"}):"CUSTOM_ENDPOINT"===l.type?(0,a.jsx)(n.w,{abbr:!0,protocol:null==(i=l.api)?void 0:i.protocol,className:"text-left inline-block",title:l.name}):"SOCKET_IO_API"===l.type?(0,a.jsx)(m.A,{type:"icon-type-socketio",color:"var(--ui-yellow-6)"}):(0,a.jsx)("span",{title:l.name,children:(0,a.jsx)(m.A,{type:"icon-file-docs"})})},g=e=>{let{className:t,item:i,tooltipProps:n,style:l}=e;return(0,a.jsxs)("div",{className:u()("inline-flex items-center justify-start font-size-base font-weight-base text-color",t),style:l,children:[(0,a.jsx)(f,{item:i}),n?(0,a.jsx)(p.A,{...n,children:(0,a.jsx)("span",{className:u()("truncate",{"pl-1":!["apiDetail","webSocketApi","CUSTOM_ENDPOINT","SOCKET_IO_API"].includes(i.type)}),children:i.name})}):(0,a.jsx)("span",{className:u()("truncate",{"pl-1":!["apiDetail","webSocketApi","CUSTOM_ENDPOINT","SOCKET_IO_API"].includes(i.type)}),children:i.name})]})},y=e=>{let{className:t,destinationResourceCached:i,tooltipProps:n}=e;return i?(0,a.jsx)(g,{className:t,tooltipProps:n,item:{name:null==i?void 0:i.name,type:(null==i?void 0:i.type)&&({HTTP_API:"apiDetail",DOC:"doc",API_FOLDER:"apiDetailFolder",WEB_SOCKET_API:"webSocketApi",CUSTOM_ENDPOINT:"CUSTOM_ENDPOINT",SOCKET_IO_API:"SOCKET_IO_API"})[null==i?void 0:i.type],id:null==i?void 0:i.id,api:(null==i?void 0:i.httpMethod)||(null==i?void 0:i.protocol)?{method:null==i?void 0:i.httpMethod,protocol:null==i?void 0:i.protocol,type:null==i?void 0:i.apiType}:void 0}}):null},x=e=>{let{style:t,className:i,value:n,onChange:c,maxHeight:p=500}=e,[m,g]=(0,h.useState)({searchKeyWord:""}),y=(0,h.useMemo)(()=>p-36-12-2,[p]),x=(0,h.useMemo)(()=>n?[n]:[],[n]),A=(0,s.Ay)(e=>{let{apiDetail:t}=e;return t.treeList}),j=(0,h.useRef)(null),b=(0,h.useMemo)(()=>{let e=t=>(null==t?void 0:t.length)?t.filter(e=>["apiDetail","doc","apiDetailFolder","webSocketApi","CUSTOM_ENDPOINT","SOCKET_IO_API"].includes(e.type)).map(t=>{let i=t.name;return{source:t,key:t.key,title:i,icon:e=>{let{expanded:i}=e;return(0,a.jsx)(f,{item:t,expanded:i})},isLeaf:"apiDetailFolder"!==t.type,children:t.children?e(t.children):void 0}}):[];return e(A)},[A]),w=(0,h.useCallback)(e=>!m.searchKeyWord||(e.title||"").toLowerCase().includes(m.searchKeyWord.toLowerCase()),[m.searchKeyWord]),S=(0,h.useMemo)(()=>{let e=b;if(w){let t=new Set;(0,d.J)(b,e=>{w(e)?t.add(e.key):!e.isLeaf&&(e.children||[]).some(e=>t.has(e.key))&&t.add(e.key)},{order:"LRN"}),e=t.size>0?(0,d.d)(e,e=>{if(t.has(e.key))return e}):[]}return e},[b,w]);return(0,a.jsxs)("div",{className:u()(v["tree-container"],i),style:t,children:[(0,a.jsx)(r.A,{size:"large",inputVariant:"underline",inputStyle:{backgroundColor:"transparent",borderBottomColor:"var(--ui-border-color-split)"},placeholder:(0,l.hw)({id:"search"}),value:m,onChange:g,isEnableOptionsFilter:!1,style:{marginBottom:0}}),(0,a.jsx)(o.Gq,{ref:j,className:u()(v.tree,{hidden:!(null==S?void 0:S.length)}),height:y,virtual:!0,treeData:S,selectedKeys:x,onSelect:(e,t)=>{null==c||c(t.node.source,e[0])}}),(null==S?void 0:S.length)?null:(0,a.jsx)("div",{className:"text-center font-size-base font-weight-400 py-2",style:{color:"var(--ui-disabled-color)"},children:(0,l.hw)({id:"apiDoc.publishSettings.docRedirectRules.noMatch"})})]})}},835689:function(e,t,i){"use strict";i.d(t,{A:()=>y,c:()=>g});var a=i(838e3),n=i(775803),l=i(740565),r=i(957705),s=i(94222),o=i(137361),d=i(69712),c=i(140049),u=i(838487),p=i.n(u),m=i(458184),h=i(671466),v=i(641486),f=i(312303);let g=(e,t)=>{let{records:i}=(0,s.jV)().getState();if(!i||!i.length)return null;let a=i.find(i=>(i.relatedId!==(null==t?void 0:t.relatedId)||i.relatedType!==(null==t?void 0:t.relatedType))&&i.path===e);if(!a)return null;if("HTTP_API"===a.relatedType){let e=((0,d.Gu)().apiDetail.apiDetailMap||{})[a.relatedId];return e?{entity:e,entityType:"apiDetail"}:null}if("DOC"===a.relatedType){let e=(r.Ay.getState().docMap||{})[a.relatedId];return e?{entity:e,entityType:"doc"}:null}if("API_FOLDER"===a.relatedType){let e=((0,d.Gu)().apiDetailFolder.apiDetailFolderMap||{})[a.relatedId];return e?{entity:e,entityType:"apiDetailFolder"}:null}else if("WEB_SOCKET_API"===a.relatedType){let e=((0,d.Gu)().webSocketApiDetail.apiDetailMap||{})[a.relatedId];return e?{entity:e,entityType:"webSocketApi"}:null}else if("CUSTOM_ENDPOINT"===a.relatedType){let e=((0,d.Gu)().customEndpoint.map||{})[a.relatedId];return e?{entity:e,entityType:"CUSTOM_ENDPOINT"}:null}return null},y=e=>{let{conflictItem:{entity:t,entityType:i},className:r,style:s,verticalMode:d}=e,{openHttpApi:u,openDoc:g,openWebSocketApi:y,openCustomEndpointTab:x,openHttpFolder:A}=(0,v.useContext)(o.i),{setMenuByPathname:j}=(0,v.useContext)(n.Ay),b=(0,c.A)(()=>{var a;null==(a=e.onClick)||a.call(e),null==j||j("/api-manage/"),"apiDetail"===i?u({id:t.id}):"doc"===i?g({id:t.id}):"webSocketApi"===i?y({id:t.id}):"CUSTOM_ENDPOINT"===i?x({id:t.id}):"apiDetailFolder"===i&&A({id:t.id,moduleId:t.moduleId})});return(0,a.jsxs)("div",{className:p()("p-3",r,{"inline-flex flex-row items-center justify-start":!d,"flex flex-col items-start justify-center":!!d}),style:{borderRadius:"8px",background:"var(--ui-red-b)",...s},children:[(0,a.jsx)("span",{className:"font-size-base font-weight-400",style:{color:"var(--ui-error-color)"},children:(0,l.hw)({id:"seo.url.slug.conflict"})}),(0,a.jsxs)(m.A,{size:"middle",className:p()(" inline-flex flex-row justify-between items-center",{"ml-1":!d,"mt-1":!!d}),onClick:b,style:{maxWidth:"100%"},children:[(0,a.jsx)(f.Op,{item:{name:t.name,type:i,id:null==t?void 0:t.id,doc:t,api:t},style:{maxWidth:"143px"}}),(0,a.jsx)(h.A,{type:"icon-share-04",size:16,className:"ml-1"})]})]})}},632240:function(e,t,i){"use strict";i.d(t,{A:()=>d});var a=i(838e3),n=i(740565),l=i(556910),r=i(667754),s=i(929463),o=i(586587);let d=e=>{let t=["image/jpeg","image/png","image/svg+xml"],{uploadType:i,content:d,onSuccess:c,isSupportIco:u,...p}=e,m=(0,n.hw)({id:"account-settings.basic.upload-fileTypeWaning"});u&&(t=[...t,"image/x-icon","image/vnd.microsoft.icon"],m=(0,n.hw)({id:"apiDoc.basicSettings.basicInfo.favicon.upload-faimWarning"}));let h=(0,r.ZO)(l.V6,e=>null==c?void 0:c(e),e=>{e&&"403025"===e.errorCode?s.Ay.error((0,n.hw)({id:"account-settings.basic.upload-rateLimited"})):s.Ay.error((0,n.hw)({id:"account-settings.basic.upload-failWaning"}))});return(0,a.jsx)(o.A,{name:"image",showUploadList:!1,customRequest:e=>{h(e.file,i)},beforeUpload:e=>{let i=t.includes(e.type);i||s.Ay.error(m);let a=e.size/1024/1024<5;return a||s.Ay.error((0,n.hw)({id:"apiDoc.uploadPictureWarning"})),i&&a},...p,children:d})}},120158:function(e,t,i){"use strict";i.d(t,{o:()=>h});var a=i(169508),n=i(2183),l=i(764007),r=i(838e3),s=i(666804),o=i(740565),d=i(765787),c=i(496411),u=i(793594),p=i(671466);let m=e=>({icon:(0,r.jsx)(p.A,{type:"icon-info-1",color:"var(--ui-primary-color)"}),title:(0,o.hw)({id:"version.plan.reached"}),content:(0,o.hw)({id:"version.plan.reached.count"},{count:e}),cancelText:(0,o.hw)({id:"branch.operation.limit.cancelText"})});function h(){var e;let t=null!=(e=(0,n.ok)().planDegradeInfoData.apiVersion.branchQuantityLimitation)?e:1;l.Ay.confirm(a.T0?{...m(t),okText:(0,o.hw)({id:"branch.operation.limit.okText.global"}),onOk:()=>{let e=d.f3.getState().updatePurchaseModalVisible;(0,u.IL)("app_button_click_upgrade_plan",{page_source:"function",index:"version_branch"}),e(!0)}}:{...m(t),okText:(0,o.hw)({id:"payment.Upgrade"}),onOk:()=>{(0,s.Nu)({entityId:(0,c.Sy)(),showUpgradeModal:!0})}})}},658964:function(e,t,i){"use strict";i.d(t,{a:()=>c});var a=i(838e3),n=i(740565),l=i(109078),r=i(255529),s=i(364099),o=i(649269),d=i(820182);function c(e){let{inKnife4jForm:t=!1}=e;return(0,a.jsx)(r.A.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.sourceType!==t.sourceType||e.enableAuth!==t.enableAuth,children:e=>{let{getFieldValue:i}=e,c=i("sourceType"),u=i("enableAuth"),p=c===l.b.OpenApi&&u,m=c===l.b.Knife4j&&u;return t&&m||!t&&p?(0,a.jsxs)(s.A,{gutter:[10,0],children:[(0,a.jsx)(o.A,{span:12,children:(0,a.jsx)(r.A.Item,{name:"username",rules:[{required:!0,message:(0,n.hw)({id:"import.form.username.warning"})}],children:(0,a.jsx)(d.A,{placeholder:(0,n.hw)({id:"import.form.username.placeholder"})})})}),(0,a.jsx)(o.A,{span:12,children:(0,a.jsx)(r.A.Item,{name:"password",rules:[{required:!0,message:(0,n.hw)({id:"import.form.password.warning"})}],children:(0,a.jsx)(d.A,{placeholder:(0,n.hw)({id:"import.form.password.placeholder"})})})})]}):null}})}},14891:function(e,t,i){"use strict";i.d(t,{Gw:()=>l,KT:()=>o,hz:()=>r,tH:()=>s});var a=i(740565),n=i(176700);let l={0:(0,a.hw)({id:"autoImport.table.manual"}),5:(0,a.hw)({id:"autoImport.option.frequency.minute"},{minute:5}),10:(0,a.hw)({id:"autoImport.option.frequency.minute"},{minute:10}),30:(0,a.hw)({id:"autoImport.option.frequency.minute"},{minute:30}),180:(0,a.hw)({id:"autoImport.table.frequency"},{hour:3}),720:(0,a.hw)({id:"autoImport.table.frequency"},{hour:12}),1440:(0,a.hw)({id:"autoImport.table.frequency"},{hour:24})},r={},s=new n.A;function o(e){return!!e&&"APP"===e.runOn}},374781:function(e,t,i){"use strict";i.d(t,{A:()=>T});var a=i(843212),n=i(744283),l=i(740565),r=i(957705),s=i(660464),o=i(2183),d=i(23602),c=i(363907),u=i(189840),p=i(481069),m=i(519271),h=i(667754),v=i(109078),f=i(618487),g=i(283835),y=i(527223);let x=i(324323);var A=i(398380),j=i(239805),b=i(790453),w=i(689368),S=i(54418),C=i(456269),I=i(817106),N=i(641486),k=i(14891);let T=()=>{let e,{changeRunningStateById:t,setFailAutoImportMap:i,setAutoImportSettingList:T,setFailAutoImport:M,setCurrentAutoImport:E,setRunningStateMap:_}=(0,f.useModel)("autoImport",e=>{let{changeRunningStateById:t,setFailAutoImportMap:i,setAutoImportSettingList:a,setFailAutoImport:n,setCurrentAutoImport:l,addFailAutoImport:r,setRunningStateMap:s}=e;return{changeRunningStateById:t,setFailAutoImportMap:i,setAutoImportSettingList:a,setFailAutoImport:n,setCurrentAutoImport:l,addFailAutoImport:r,setRunningStateMap:s}}),{notificationImportError:F,getResponseData:D}=(()=>{let{changeRunningStateById:e,setFailAutoImport:t,addFailAutoImport:i}=(0,f.useModel)("autoImport",e=>{let{changeRunningStateById:t,setFailAutoImportMap:i,setAutoImportSettingList:a,setFailAutoImport:n,setCurrentAutoImport:l,addFailAutoImport:r,setRunningStateMap:s}=e;return{changeRunningStateById:t,setFailAutoImportMap:i,setAutoImportSettingList:a,setFailAutoImport:n,setCurrentAutoImport:l,addFailAutoImport:r,setRunningStateMap:s}}),a=(0,N.useCallback)((e,a)=>{t({...e,error:a}),i({...e,error:a})},[t,i]),n=async(t,i,n)=>{let{id:l,gitConfigs:r}=t,s=t.gitConnectionId,{branch:o,filePath:d}=null!=r?r:{};if(!s||!o||!d)return void console.error("[getResponseByGit] Git connection, branch, or files not specified");try{let e=await (0,S.A)({isYamlFile:(0,C.Ic)(d)},{gitConnectionId:s,branch:o,filePath:d}),t=`${s}_${o}_${d}`,i=(0,I.lookup)(d)||"text/plain";return n[`${t}`]||(n[t]=new File([e],d,{type:i})),e}catch(n){throw e(l,!1),i&&a(t,n),n}},l=async(a,n,l)=>{let{id:r,sourceType:s,sourceUrl:o,options:d={}}=a,{enableAuth:c,username:u="",password:p=""}=d;try{return await (0,m.bf)(o,{importFormat:s,ignoreType:"importApiData",auth:c?{username:u,password:p}:void 0,isYamlFile:(0,C.wl)(o),onResponseHandle:(e,t,i)=>{l[e]||(l[e]=new File([t],e,{type:(i["content-type"]||"").split(";")[0]}))}})}catch(l){throw e(r,!1),n&&(t({...a,error:l}),i({...a,error:l})),l}};return{getResponseData:async(e,t,i)=>"GIT"===e.originType?await n(e,t,i):"URL"===e.originType?await l(e,t,i):void 0,notificationImportError:a}})(),R=(0,f.useModel)("projectCustomApiField",e=>{let{data:t}=e;return t}),{compareHashOfDataSource:O}=(()=>{let{generateSourceHash:e}={generateSourceHash:(e,t)=>{try{let i=e.length,a=e;if(i>0x6400000){let e=a.slice(0,0x1400000),t=a.slice(i-0x1400000,i);a=e+t}return x(a+t)}catch(i){return x(e+t)}}};return{compareHashOfDataSource:(t,i)=>{try{let{sourceHash:a}=i,n={name:i.name,enable:i.enable,sourceType:i.sourceType,sourceUrl:i.sourceUrl,interval:i.interval,apiFolderId:i.apiFolderId,schemaFolderId:i.schemaFolderId,apiOverwriteMode:i.apiOverwriteMode,docOverwriteMode:i.docOverwriteMode,schemaOverwriteMode:i.schemaOverwriteMode,importFullPath:i.importFullPath,importBasePath:i.importBasePath,importApiCase:i.importApiCase,syncApiFolder:i.syncApiFolder,options:i.options,..."GIT"===i.originType?{...null==i?void 0:i.gitConfigs}:{}},l=e(t,JSON.stringify(n));return{shouldExecuteImport:l!==a,nextSourceHash:l}}catch(e){return{shouldExecuteImport:!0,nextSourceHash:""}}}}})(),{countNumOfApiSpecification:P}=(e=e=>{if(!e||!Array.isArray(e)||!e.length)return 0;let t=0,i=e=>{for(let a=0;a<e.length;a+=1){let n=e[a];n.items&&n.items.length&&(t+=n.items.length),n.children&&n.children.length&&i(n.children)}};return i(e),t},{countNumOfApiSpecification:t=>{try{let i=e(t.httpCollection),a=e(t.dataSchemaCollection),n=e(t.socketCollection),l=e(t.docCollection);return{data:{httpCollection:{noChangeCount:i},schemaCollection:{noChangeCount:a},socketCollection:{noChangeCount:n},docCollection:{noChangeCount:l},testCaseCollection:{noChangeCount:0},testSuiteCollection:{noChangeCount:0},environment:{noChangeCount:0}}}}catch(e){return{data:{}}}}}),L=e=>{e&&k.hz&&k.hz[e]&&(window.clearTimeout(k.hz[e]),delete k.hz[e])},$=e=>{let t=e.map(e=>`${e.id}`);Object.keys(k.hz).filter(e=>!t.includes(e)).forEach(L)},{run:B}=(0,h.dy)(c.P,{manual:!0,onSuccess:e=>{e&&W(e)}}),z=async e=>{let{hasPermission:t}=(0,a.Z)(n.o.SETTING_IMPORT_DATA_SCHEDULED);if(t)try{let t=await (0,c.n_)();if((null==t?void 0:t.data)&&Array.isArray(t.data)){let i=t.data;T(i),null==e||e(i)}}catch{}},U=async(e,i,a)=>{let{id:n,sourceType:r}=i,{Convertor:s,format:o}=d.tp[r];try{let t=new s(e);o&&t.setFormat(o),await t.convert();let i=t.getApiSpecification(),a=t.getContentVersion();return{apiSpecification:i,contentVersion:a}}catch(r){t(n,!1);let e=new m.Yw({message:(0,l.hw)({id:"import.message.dataFormatError"}),type:"invalidDataFormat"});throw a&&F(i,e),e}},H=async function(e,i,a){let n=!(arguments.length>3)||void 0===arguments[3]||arguments[3],{id:l,moduleId:o,apiOverwriteMode:d,schemaOverwriteMode:c,docOverwriteMode:m,apiFolderId:h,schemaFolderId:v,importBasePath:f,importFullPath:g,importApiCase:y,syncApiFolder:x,deleteUnmatchedResources:A,targetBranchId:j,securitySchemeOptions:w,overwriteOpenApiInfo:S}=e;try{let e=f?null==i?void 0:i.basePath:void 0,n=await (0,u.Qx)({data:i,apiOverwriteMode:d,schemaOverwriteMode:c,docOverwriteMode:m,moduleId:o,apiFolderId:h,schemaFolderId:v,importFullPath:g,basePath:e,autoImport:!0,autoImportId:l,importApiCase:y,syncApiFolder:x,deleteUnmatchedResources:A,targetBranchId:j,overwriteOpenApiInfo:S,...w||{}});null==a||a(n),(0,r.dq)(),(0,p.n1)(),(0,s.ZF)().fetchTree(),t(l,!1)}catch(i){var C,I;throw n&&F(e,i),t(l,!1),C=i,I=b.hW.SERVER_ERROR,C instanceof Error?(C.cause=I,C):Error(JSON.stringify(C),{cause:I})}},V=(0,f.useModel)("clientConfig",e=>{var t;return null==(t=e.dynamicConfig)?void 0:t.importRecordReportConfig}),K=(0,w.Ay)(e=>{var t;return null==(t=e.project.currentProject)?void 0:t.id}),q=(e,t,i,a,n,l)=>{(0,j.r_)({format:e,source:"IN_PROJECT_SCHEDULED",errorMessage:a?String(a):void 0,projectId:null!=K?K:0,sourceFile:t,errorType:(0,j.tr)(a),type:"GIT"===l?"GIT":"URL",contentVersion:n},i,V)},G=async function(e,i){let a=!(arguments.length>2)||void 0===arguments[2]||arguments[2],n={};if(!(0,k.KT)(e))return;let{id:l,sourceType:r,apiOverwriteMode:s,schemaOverwriteMode:o,sourceUrl:d}=e;try{var u;t(l,!0);let p=await D(e,a,n);if(!p)return void t(l,!1);let{apiSpecification:m,contentVersion:h}=await U(p,e,a);switch(Array.isArray(null==(u=m.extra)?void 0:u.moduleSettings)&&m.extra.moduleSettings.forEach(t=>{!t.importTo&&e.moduleId&&(t.importTo="existingModule",t.moduleId=e.moduleId)}),r){case v.b.OpenApi:{let e=(0,g.A)("openApiField",R);(0,y.A)(m,e,v.b.OpenApi);break}case v.b.App:{let e=(0,g.A)("fieldName",R);(0,y.A)(m,e,v.b.App)}}if("ignore"!==s&&"ignore"!==o&&e.id){let{shouldExecuteImport:n,nextSourceHash:r}=O((0,A.isString)(p)?p:JSON.stringify(p),e);if(n)await H(e,m,i,a),await (0,c.yo)({id:e.id,sourceHash:r});else{let a=P(m);await (0,c.yo)({id:e.id,updateLatestImportAt:!0}),null==i||i(a),t(l,!1)}}else await H(e,m,i,a);q(r,d,Object.values(n),void 0,h,e.originType)}catch(t){throw q(r,d,Object.values(n),t,void 0,e.originType),t}},W=async e=>{let t;if(!e||!(0,o.ok)().currentBranchSettings.enableImportData||!(0,k.KT)(e))return;let{id:i,enable:a,nextRunTime:n}=e,{interval:l}=e;if(i&&k.hz[i]&&(window.clearTimeout(k.hz[i]),delete k.hz[i]),a&&l){if(l=60*l*1e3,0===n){try{await G(e),z(e=>T(e))}catch(e){}t=window.setTimeout(()=>B(i),l)}else t=window.setTimeout(()=>B(i),n);k.hz[i]=t}},J=async e=>{if(Array.isArray(e)&&e.length>0)for(let t of e)await W(t)};return{execImport:G,startScheduler:W,startAllScheduler:J,cancelImportScheduler:L,fetchAutoImportSetting:B,fetchAutoImportSettingList:z,initProjectAutoImport:function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];E(void 0),i({}),_({}),M(void 0),$(e),t&&J(e)},cancelAutoImportSchedulerByList:$,joinImportQueue:function(e,t){let i=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if((0,k.KT)(e))return k.tH.enqueue(()=>G(e,t,i))}}}},600557:function(e,t,i){"use strict";i.d(t,{Wt:()=>A,dd:()=>j,Ay:()=>w,Ez:()=>b});var a=i(838e3);i(325318);var n=i(740565),l=i(38468),r=i(708326),s=i(689368),o=i(667754),d=i(471504),c=i(662387),u=i(255529),p=i(487844),m=i(641486),h=i.n(m),v=i(485354),f=i(292594),g=i(364099),y=i(131833);let x=e=>{let{validateBodyDataStructureForm:t}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.A,{align:"middle",children:(0,a.jsx)("div",{className:"mr-2 leading-6 font-medium text-base app-text-fg-medium",children:(0,n.hw)({id:"app.setting.menu.general.responseValidate.module.title"})})}),(0,a.jsxs)("div",{className:"mb-5",children:[(0,a.jsx)(y.w,{name:"responseValidate",label:(0,a.jsx)(a.Fragment,{children:(0,n.hw)({id:"app.setting.menu.general.responseValidate.module.debug.title"})}),valuePropName:"checked",detail:(0,n.hw)({id:"app.setting.menu.general.responseValidate.module.debug.tooltip"}),children:(0,a.jsx)(v.YD,{})}),(0,a.jsx)(y.w,{name:"responseValidateTestCase",label:(0,a.jsx)(a.Fragment,{children:(0,n.hw)({id:"app.setting.menu.general.responseValidate.module.debugTestCase.title"})}),valuePropName:"checked",detail:(0,n.hw)({id:"app.setting.menu.general.responseValidate.module.debugTestCase.tooltip"}),children:(0,a.jsx)(v.YD,{size:"small",defaultChecked:!0})}),(0,a.jsx)(y.w,{name:"responseValidateApiTest",label:(0,a.jsx)(a.Fragment,{children:(0,n.hw)({id:"app.setting.menu.general.responseValidate.module.apiTest.title"})}),valuePropName:"checked",detail:(0,n.hw)({id:"app.setting.menu.general.responseValidate.module.apiTest.tooltip"}),children:(0,a.jsx)(v.YD,{size:"small",defaultChecked:!0})})]}),(0,a.jsx)(g.A,{align:"middle",children:(0,a.jsx)("div",{className:"mt-8 mr-2 leading-6 font-medium text-base app-text-fg-medium",children:(0,n.hw)({id:"app.setting.menu.general.responseValidate.content.title"})})}),(0,a.jsxs)("div",{className:"mb-5",children:[(0,a.jsx)(y.w,{name:"validateHttpStatusCode",label:(0,a.jsx)(a.Fragment,{children:(0,n.hw)({id:"app.setting.menu.general.responseValidate.content.httpStatusCode.title"})}),valuePropName:"checked",detail:(0,n.hw)({id:"app.setting.menu.general.responseValidate.content.httpStatusCode.tooltip"}),children:(0,a.jsx)(v.YD,{size:"small",defaultChecked:!0})}),(0,a.jsx)(y.w,{name:"validateBodyDataStructure",label:(0,a.jsx)(a.Fragment,{children:(0,n.hw)({id:"app.setting.menu.general.responseValidate.content.bodyDataStructure.title"})}),valuePropName:"checked",detail:(0,a.jsx)(a.Fragment,{children:(0,n.hw)({id:"app.setting.menu.general.responseValidate.content.bodyDataStructure.tooltip"})}),hasChildItem:!!t,children:(0,a.jsx)(v.YD,{size:"small",defaultChecked:!0})}),(0,a.jsx)(y.w,{name:"validateObjectAllowAdditionalProperties",label:(0,a.jsx)(a.Fragment,{children:(0,n.hw)({id:"app.setting.menu.general.responseValidate.content.bodyDataStructure.allowAdditionalProperties.title"})}),valuePropName:"checked",detail:(0,n.hw)({id:"app.setting.menu.general.responseValidate.content.bodyDataStructure.allowAdditionalProperties.tooltip"}),hidden:!t,isChildLevel:!0,children:(0,a.jsx)(v.YD,{size:"small",defaultChecked:!0})})]})]})};n.n3,n.n3,d.NT,n.n3,n.n3,d.NT,n.n3,n.n3;let A=[{label:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(n.n3,{id:"app.setting.menu.general.preferredHttpVersion.https.http2"}),(0,a.jsx)(d.NT,{className:"mx-1 text-color-secondary",children:(0,a.jsx)(n.n3,{id:"app.setting.menu.general.preferredHttpVersion.https.http2.tip"})})]}),value:"HTTP/2"},{label:(0,a.jsx)(n.n3,{id:"app.setting.menu.general.preferredHttpVersion.https.http1"}),value:"HTTP/1"}],j=[{label:(0,a.jsx)(n.n3,{id:"app.setting.menu.general.preferredHttpVersion.http.http1"}),value:"HTTP/1"},{label:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(n.n3,{id:"app.setting.menu.general.preferredHttpVersion.http.http2"}),(0,a.jsx)(d.NT,{className:"mx-1 text-color-secondary",children:(0,a.jsx)(n.n3,{id:"app.setting.menu.general.preferredHttpVersion.http.http2.tip"})})]}),value:"HTTP/2-with-prior-knowledge"}],b={https:"HTTP/2",http:"HTTP/1"},w=e=>{var t,i;let{onlyShowResponseDefinition:n}=e,[d]=u.A.useForm(),m=(0,s.Ay)(e=>{let{projectSetting:t}=e;return t.projectSettingData}),g=(0,p.N)(e=>{var t,i;return null!=(i=e.request2)?i:null==m||null==(t=m.advancedSettings)?void 0:t.request2},d),y=(0,p.N)(e=>{var t,i,a;return null==(a=null!=(i=e.validateBodyDataStructure)?i:null==m||null==(t=m.advancedSettings)?void 0:t.validateBodyDataStructure)||a},d),{id:A,advancedSettings:j}=m,{enableBigint:b,isDefaultUrlEncoding:w,responseValidate:S,responseValidateApiTest:C,responseValidateTestCase:I,enableJsonc:N,validateHttpStatusCode:k,validateBodyDataStructure:T,validateObjectAllowAdditionalProperties:M}=j,[E,_]=h().useState((null==(t=j.publishedDocUrlRules)?void 0:t.defaultRule)==="RESOURCE_KEY_ONLY"&&(null==(i=j.publishedDocUrlRules)?void 0:i.enableResourceKeyStandard)===!0),F=(0,o.eB)(o.eB.transformServiceArg1(r.yo),async e=>{(0,l.Y6)();let t=e.advancedSettings.enableBigint;b!==t&&(0,f.K)(t)});return(0,c.A)(()=>{d.setFieldsValue(j)},[b,w,S,N,j.request2,j.preferredHttpVersion,k,T,C,I,M]),(0,a.jsx)("section",{children:(0,a.jsxs)(u.A,{form:d,onValuesChange:(e,t)=>{if(A){var i;let e=t.publishedDocUrlRules;e&&(null==(i=j.publishedDocUrlRules)?void 0:i.enableResourceKeyStandard)===!0&&"SLUGIFY_WITH_RESOURCE_KEY"===e.defaultRule&&(e.resourceKeyStandard="NEW",delete e.enableResourceKeyStandard,_(!1)),F({id:A,advancedSettings:{...j,...t,publishedDocUrlRules:e}})}},initialValues:j,labelCol:{style:{width:n?300:240}},labelAlign:"left",children:[n&&(0,a.jsx)(x,{validateBodyDataStructureForm:y}),!n&&(0,a.jsx)(v.Ay,{enableHttp2:g,form:d,enableResourceKeyStandard:E})]})})}},485354:function(e,t,i){"use strict";i.d(t,{KL:()=>x,YD:()=>y,Ay:()=>I});var a=i(838e3),n=i(325318),l=i(169508),r=i(744283),s=i(740565),o=i(838487),d=i.n(o),c=i(69934),u=i(364099),p=i(138249),m=i(743190),h=i(163808),v=i(671466);i(641486);var f=i(131833);let g=e=>{let{className:t,borderless:i,children:n}=e;return(0,a.jsx)("div",{className:d()("pt-3 pb-5 border-b",t),style:i?void 0:{borderBottomColor:"var(--ui-border-color-split)",borderBottomStyle:"solid"},children:(0,a.jsx)("div",{className:"px-5",style:{backgroundColor:"var(--ui-fill-3)",borderRadius:10},children:n})})},y=e=>(0,a.jsx)(n.y,{permission:r.o.SETTING_ENDPOINT_CDU,children:(0,a.jsx)(c.A,{size:"small",...e})}),x=[{label:(0,a.jsx)(s.n3,{id:"projectSetting.advancedSetting.inherit"}),value:1},{label:(0,a.jsx)(s.n3,{id:"projectSetting.advancedSetting.encodeOptions.RFC3986"}),value:2},{label:(0,a.jsx)(s.n3,{id:"projectSetting.advancedSetting.encodeOptions.WHATWG"}),value:3},{label:(0,a.jsx)(s.n3,{id:"projectSetting.advancedSetting.encodeOptions.OFF"}),value:0}],A=[{label:(0,a.jsx)(s.n3,{id:"app.setting.menu.general.preferredHttpVersion.https.http2"}),value:"HTTP/2"},{label:(0,a.jsx)(s.n3,{id:"app.setting.menu.general.preferredHttpVersion.https.http1"}),value:"HTTP/1"}],j=[{label:(0,a.jsx)(s.n3,{id:"app.setting.menu.general.preferredHttpVersion.http.http1"}),value:"HTTP/1"},{label:(0,a.jsx)(s.n3,{id:"app.setting.menu.general.preferredHttpVersion.http.http2"}),value:"HTTP/2-with-prior-knowledge"}],b=[{label:"https://your-domain.com/{slugify(resourceName)}-{resourceKey}",value:"SLUGIFY_WITH_RESOURCE_KEY"},{label:"https://your-domain.com/{resourceKey}",value:"RESOURCE_KEY_ONLY"}],w=[{label:(0,s.hw)({id:"projectSettings.publishedProject.docSettings.url-ruleset-new"}),value:"NEW"},{label:(0,s.hw)({id:"projectSettings.publishedProject.docSettings.url-ruleset-legacy"}),value:"LEGACY"}],S="HTTP/2",C="HTTP/1",I=e=>{let{enableHttp2:t,enableResourceKeyStandard:i,form:o}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.A,{align:"middle",children:(0,a.jsx)("div",{className:"mr-2 leading-6 font-medium text-base app-text-fg-medium",children:(0,s.hw)({id:"menu.projectSettings.common.featureSetting.advanced-setting"})})}),(0,a.jsxs)("div",{className:"mb-5",children:[(0,a.jsx)(f.w,{name:"enableJsonc",label:(0,s.hw)({id:"projectSetting.advancedSetting.enableJsonc"}),valuePropName:"checked",detail:(0,s.hw)({id:"projectSetting.advancedSetting.enableJsonc.tips"}),children:(0,a.jsx)(y,{})}),(0,a.jsx)(f.w,{name:"isDefaultUrlEncoding",label:(0,s.hw)({id:"app.setting.menu.general.protocolProfileBehavior.autoEncodeUrl"}),detail:(0,a.jsx)(s.n3,{id:"projectSetting.advancedSetting.encodeTooltip"}),children:(0,a.jsx)(n.y,{permission:r.o.SETTING_ENDPOINT_CDU,children:(0,a.jsx)(p.A,{style:{width:"auto"},dropdownMatchSelectWidth:!1,children:x.slice(1).map(e=>(0,a.jsx)(p.A.Option,{value:e.value,children:e.label},e.value))})})}),(0,a.jsx)(f.w,{name:"enableBigint",label:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.A,{type:"icon-beaker"}),(0,a.jsx)("span",{className:"ml-1",children:(0,s.hw)({id:"app.setting.menu.general.enableBigInt"})})]}),valuePropName:"checked",detail:(0,s.hw)({id:"app.setting.menu.general.enableBigInt.tips"}),children:(0,a.jsx)(y,{})}),(0,a.jsx)(f.w,{name:"request2",label:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.A,{type:"icon-beaker"}),(0,a.jsx)("span",{className:"ml-1",children:(0,s.hw)({id:"app.setting.menu.general.request2"})})]}),valuePropName:"checked",detail:(0,s.hw)({id:"app.setting.menu.general.request2.tips"}),hasChildItem:t,children:(0,a.jsx)(y,{})}),t&&(0,a.jsxs)(g,{children:[(0,a.jsx)(f.w,{name:["preferredHttpVersion","https"],label:(0,s.hw)({id:"app.setting.menu.general.preferredHttpVersion.https"}),hidden:!t,overrideClassName:"border-b py-5",children:(0,a.jsx)(p.A,{defaultValue:S,style:{width:"auto"},dropdownMatchSelectWidth:!1,children:A.map(e=>(0,a.jsx)(p.A.Option,{value:e.value,children:e.label},e.value))})}),(0,a.jsx)(f.w,{name:["preferredHttpVersion","http"],label:(0,s.hw)({id:"app.setting.menu.general.preferredHttpVersion.http"}),hidden:!t,overrideClassName:"py-5",borderless:!0,children:(0,a.jsx)(p.A,{defaultValue:C,style:{width:"auto"},dropdownMatchSelectWidth:!1,children:j.map(e=>(0,a.jsx)(p.A.Option,{value:e.value,children:e.label},e.value))})})]})]}),(0,a.jsx)(u.A,{align:"middle",children:(0,a.jsx)("div",{className:"mt-10 mr-2 leading-6 font-medium text-base app-text-fg-medium",children:(0,s.hw)({id:"menu.projectSettings.common.featureSetting.advanced-feature-setting"})})}),(0,a.jsx)(m.A,{style:{borderColor:"var(--ui-border-color-base)"}}),(0,a.jsxs)("div",{className:"mb-5",children:[(0,a.jsx)(f.w,{name:"enableTestScenarioSetting",label:(0,s.hw)({id:"menu.projectSettings.common.featureSetting.testScenario-setting"}),valuePropName:"checked",detail:(0,s.hw)({id:"menu.projectSettings.common.featureSetting.testScenario-setting.tips"}),children:(0,a.jsx)(y,{})}),!l.T0&&(0,a.jsx)(f.w,{name:"enableYAPICompatScript",label:(0,s.hw)({id:"menu.projectSettings.common.featureSetting.enableYAPICompatScript"}),valuePropName:"checked",detail:(0,a.jsx)(h.A.Text,{type:"warning",children:(0,s.hw)({id:"menu.projectSettings.common.featureSetting.enableYAPICompatScript.tips"})}),children:(0,a.jsx)(y,{})})]}),(0,a.jsx)(u.A,{align:"middle",children:(0,a.jsx)("div",{className:"mt-10 mr-2 leading-6 font-medium text-base app-text-fg-medium",children:(0,s.hw)({id:"projectSettings.publishedProject.docSettings"})})}),(0,a.jsx)(m.A,{style:{borderColor:"var(--ui-border-color-base)"}}),(0,a.jsxs)("div",{className:"mb-5",children:[(0,a.jsx)("div",{className:"font-size-base font-weight-base app-text-color",style:{lineHeight:"var(--ui-line-height-base)"},children:(0,s.hw)({id:"projectSettings.publishedProject.docSettings.url-ruleset"})}),(0,a.jsxs)(g,{borderless:!0,children:[(0,a.jsx)(f.w,{name:"",label:(0,s.hw)({id:"projectSettings.publishedProject.docSettings.url-ruleset-configured"}),overrideClassName:"border-b py-5",children:(0,a.jsx)("span",{className:"font-size-base font-weight-400 app-text-color",children:"https://your-domain.com/{slug}"})}),(0,a.jsx)(f.w,{name:["publishedDocUrlRules","defaultRule"],label:(0,s.hw)({id:"projectSettings.publishedProject.docSettings.url-ruleset-empty"}),overrideClassName:"border-b py-5",children:(0,a.jsx)(n.y,{permission:r.o.SETTING_ENDPOINT_CDU,children:(0,a.jsx)(p.A,{style:{width:"auto",maxWidth:280},dropdownMatchSelectWidth:!1,defaultValue:l.T0?"SLUGIFY_WITH_RESOURCE_KEY":"RESOURCE_KEY_ONLY",children:b.map(e=>(0,a.jsx)(p.A.Option,{value:e.value,children:e.label},e.value))})})}),(0,a.jsx)(f.w,{name:["publishedDocUrlRules","resourceKeyStandard"],label:(0,s.hw)({id:"projectSettings.publishedProject.docSettings.url-ruleset-resourceKey"}),overrideClassName:d()("py-5",{hidden:!i}),borderless:!0,children:(0,a.jsx)(p.A,{style:{width:"auto",maxWidth:280},dropdownMatchSelectWidth:!1,defaultValue:"NEW",children:w.map(e=>(0,a.jsx)(p.A.Option,{value:e.value,children:e.label},e.value))})})]})]})]})}},440094:function(e,t,i){"use strict";i.d(t,{A:()=>K});var a=i(838e3),n=i(700255),l=i(740565),r=i(81611),s=i(925053),o=i(718180),d=i(759345),c=i(111540),u=i(794397),p=i(554692),m=i(69934),h=i(255529),v=i(820182),f=i(458184),g=i(671466),y=i(641486),x=i.n(y);let A="container-j9AgWG",j="radio-CxdnTm",b="radio-url-xA4XA0",w="basicAuthWrapper-L9yNku",S="knife4jUrlWrapper-ma6Peh",C="resolveUrlFormItem-N9hdh4",I="resolveUrlFormItemEnableAuth-BOgC3W",N="resolveButtonWrapper-_qzHab";var k=i(169508),T=i(141355),M=i(656493),E=i(280102),_=i(790453);let F=async function(e){let t,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{t=new URL(e)}catch(e){throw Error((0,l.hw)({id:"import.message.checkUrlAccessError"}),{cause:_.hW.URL_FETCH_SERVER_ERROR})}let n=t.origin+t.pathname.replace(/[^\/]*$/,"");n.endsWith("/")&&(n=n.slice(0,-1));let r=`${n}/swagger-resources`,o=`${n}/v3/api-docs/swagger-config`;a.ignoreType&&k.xl&&(r+=`${r.includes("?")?"&":"?"}needIgnoreCertificate=${a.ignoreType}`,o+=`${o.includes("?")?"&":"?"}needIgnoreCertificate=${a.ignoreType}`);try{i=k.xl?await (0,M.A)(r,o,a):await (0,E.A)(r,o,a)}catch(a){var d;let{data:t}=i=await (0,T.A)(e);return[{url:e,name:null==t||null==(d=t.info)?void 0:d.title}]}if(i){if(401===i.status)throw new s.Yw({type:"authorizationRequired"})}else throw Error((0,l.hw)({id:"import.message.checkUrlAccessError"}),{cause:_.hW.SERVER_ERROR});let{data:c}=i;if(!k.xl&&"string"==typeof c)try{c=JSON.parse(c)}catch(e){throw Error((0,l.hw)({id:"import.message.checkUrlAccessError"}),{cause:_.hW.PARSE_ERROR})}let u=Array.isArray(c)?c:Array.isArray(c.urls)?c.urls:null;if(!u||!Array.isArray(u))throw Error((0,l.hw)({id:"import.message.checkUrlAccessError"}),{cause:_.hW.PARSE_ERROR});return u.map(e=>{let{name:t,url:i,location:a}=e,l=i||a||"",r=l.startsWith("/")||n.endsWith("/")?"":"/";return{name:t||a||i||"",url:`${n}${r}${l}`}})};var D=i(618487),R=i(689368),O=i(239805),P=i(109078),L=i(838487),$=i.n(L),B=i(539867),z=i(487844);let U=e=>{let{form:t,onSubmit:i,onChangeResource:n}=e,r=(0,z.N)(e=>e.resourceUrls,t);return(null==r?void 0:r.length)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.A.Item,{label:(0,l.hw)({id:"import.form.resource.label"}),name:"sourceUrl",rules:[{required:!0,message:(0,l.hw)({id:"import.form.resource.warning"})}],children:(0,a.jsx)(B.A.Group,{style:{display:"flex",flexDirection:"column",gap:8},onChange:n,children:r.map(e=>{let{name:t,url:i}=e;return(0,a.jsx)(B.A,{className:"overflow-hidden",value:i,children:(0,a.jsxs)("div",{className:j,children:[t,(0,a.jsx)("span",{className:b,children:i})]})},t)})})}),i&&(0,a.jsx)("div",{className:"w-full flex justify-center mt-2",children:(0,a.jsx)(f.A,{className:"w-full",type:"primary",onClick:i,children:(0,l.hw)({id:"import.button.submit"})})})]}):null};var H=i(658964),V=i(940548);let K=e=>{let{form:t,className:i="",showTip:s=!1,onSubmit:j,onResourceChange:b,enableAuth:k=!1}=e,[T,M]=(0,y.useState)(!1),E=x().useRef(null);(0,o.A)(()=>{(null==t?void 0:t.getFieldValue("resolveUrl"))&&q()}),(0,d.A)(()=>{null==t||t.setFieldsValue({resourceUrls:[]})}),x().useEffect(()=>{let e=window.setTimeout(()=>{var e;null==(e=E.current)||e.focus()},100);return()=>{window.clearTimeout(e)}},[]);let[_,L]=c.A.useNotification(),B=(0,D.useModel)("clientConfig",e=>{var t;return null==(t=e.dynamicConfig)?void 0:t.importRecordReportConfig}),z=(0,R.Ay)(e=>{var t;return null==(t=e.project.currentProject)?void 0:t.id}),K=(e,t,i)=>{(0,O.r_)({format:P.b.Knife4j,source:"IN_PROJECT_MANUAL",errorMessage:i?String(i):void 0,projectId:null!=z?z:0,sourceFile:e,errorType:(0,O.tr)(i),type:"URL",contentVersion:void 0},t,B)},q=async()=>{let e,i=await (null==t?void 0:t.validateFields(["username","password","resolveUrl","enableAuth"]));if(!i)return;let{resolveUrl:a,username:n,password:l,enableAuth:r}=i;M(!0);try{e=await F(a,{auth:r?{username:n,password:l}:void 0,ignoreType:"importApiData"}),K(a,[],void 0)}catch(e){"authorizationRequired"===e.type?(t.setFieldsValue({enableAuth:!0}),t.validateFields(["username","password"]).then(t=>{(null==t?void 0:t.username)&&t.password&&_.error({...(0,V.Z)(e),duration:null})})):_.error({...(0,V.Z)(e),duration:null}),M(!1),K(a,[],e);return}t.setFieldsValue({resourceUrls:e}),M(!1)},G=async()=>{let{enableAuth:e,username:i,password:a,sourceUrl:n}=await t.validateFields();null==j||j({url:n,auth:e?{username:i,password:a}:void 0})};return(0,a.jsx)(u.A,{spinning:T,delay:500,children:(0,a.jsxs)("div",{className:`${A} ${i}`,children:[L,(0,a.jsxs)("div",{className:S,children:[(0,a.jsx)(h.A.Item,{label:(0,a.jsxs)(a.Fragment,{children:["Knife4j URL",s&&(0,a.jsx)(p.A,{className:"ml-1",title:(0,a.jsx)(l.sA,{id:"manualImport.Knife4jTips",values:{doc:(0,a.jsx)(n.A,{url:r.A.importKnife4jLink,children:(0,l.hw)({id:"import.helpDoc"})})}}),children:(0,a.jsx)(g.A,{type:"icon-help-o",className:"app-text-fg-disabled",size:16})})]}),name:"resolveUrl",preserve:!0,rules:[{required:!0,message:(0,l.hw)({id:"import.form.knife4jUrl.warning"})}],className:$()({[I]:k},C),children:(0,a.jsx)(v.A,{ref:E,autoFocus:!0,placeholder:(0,l.hw)({id:"import.form.knife4jUrl.placeholder"}),addonAfter:(0,a.jsxs)("div",{className:w,children:[(0,a.jsx)("span",{className:"mr-2",children:"Basic Auth"}),(0,a.jsx)(h.A.Item,{label:"",valuePropName:"checked",name:"enableAuth",noStyle:!0,preserve:!1,children:(0,a.jsx)(m.A,{size:"small"})})]})})}),(0,a.jsx)("div",{className:N,children:(0,a.jsx)(f.A,{onClick:q,className:"ml-2",children:(0,l.hw)({id:"import.button.resolveLink"})})})]}),(0,a.jsx)(H.a,{inKnife4jForm:!0}),(0,a.jsx)(U,{onSubmit:j?G:void 0,onChangeResource:e=>{if(!t||!b)return;let{resourceUrls:i}=t.getFieldValue("resourceUrls");if(!Array.isArray(i))return;let a=i.find(t=>t.url===e.target.value);a&&b(a)},form:t})]})})}},23602:function(e,t,i){"use strict";i.d(t,{Jy:()=>eg,Z8:()=>eA,tp:()=>ef,Bs:()=>ej,B1:()=>ew,bh:()=>ex,w$:()=>eb});var a,n,l,r,s=i(169508),o=i(11868),d=i(109078),c=i(740565),u=i(526838),p=i(435685),m=i(506598),h=i(716452);let v={apidoc:async()=>Promise.all([i.e("36969"),i.e("50969"),i.e("4208")]).then(i.bind(i,203524)),app:async()=>i.e("39799").then(i.bind(i,184320)),apipost:async()=>Promise.all([i.e("73034"),i.e("99418")]).then(i.bind(i,853004)),apizza:async()=>i.e("7617").then(i.bind(i,70523)),doclever:async()=>i.e("59136").then(i.bind(i,917749)),docway:async()=>i.e("49407").then(i.bind(i,875296)),eolinker:async()=>Promise.all([i.e("36969"),i.e("56955"),i.e("14601")]).then(i.bind(i,773086)),har:async()=>i.e("29911").then(i.bind(i,620006)),hkbsocketexcel:async()=>Promise.all([i.e("66162"),i.e("27265")]).then(i.bind(i,956612)),jmeter:async()=>Promise.all([i.e("40131"),i.e("20433")]).then(i.bind(i,203722)),nei:async()=>i.e("99412").then(i.bind(i,926446)),openapi:async()=>Promise.all([i.e("8147"),i.e("97856"),i.e("91292")]).then(i.bind(i,48068)),Postman:async()=>Promise.all([i.e("8147"),i.e("96664"),i.e("57782")]).then(i.bind(i,801419)),rap2:async()=>i.e("78673").then(i.bind(i,260799)),showdoc:async()=>Promise.all([i.e("73034"),i.e("36969"),i.e("14288"),i.e("56955"),i.e("80393")]).then(i.bind(i,521709)),yapi:async()=>Promise.all([i.e("47094"),i.e("36969"),i.e("59250"),i.e("50969"),i.e("20543"),i.e("66958"),i.e("8147"),i.e("96664"),i.e("26475")]).then(i.bind(i,609732)),easydoc:async()=>Promise.all([i.e("47094"),i.e("36969"),i.e("59250"),i.e("50969"),i.e("20543"),i.e("66958"),i.e("8147"),i.e("96664"),i.e("26475")]).then(i.bind(i,672112)),insomnia:async()=>Promise.all([i.e("47094"),i.e("36969"),i.e("59250"),i.e("50969"),i.e("20543"),i.e("66958"),i.e("8147"),i.e("96664"),i.e("26475")]).then(i.bind(i,290965)),wsdl:async()=>Promise.all([i.e("47094"),i.e("36969"),i.e("59250"),i.e("50969"),i.e("20543"),i.e("66958"),i.e("8147"),i.e("96664"),i.e("26475")]).then(i.bind(i,548058)),jsonSchema:async()=>Promise.all([i.e("47094"),i.e("36969"),i.e("59250"),i.e("50969"),i.e("20543"),i.e("66958"),i.e("8147"),i.e("96664"),i.e("26475")]).then(i.bind(i,62308)),markdown:async()=>Promise.all([i.e("47094"),i.e("36969"),i.e("59250"),i.e("50969"),i.e("20543"),i.e("66958"),i.e("8147"),i.e("96664"),i.e("26475")]).then(i.bind(i,871392)),soapui:async()=>i.e("82071").then(i.bind(i,296348)),hoppscotch:async()=>Promise.all([i.e("81682"),i.e("96788"),i.e("71641")]).then(i.bind(i,161831))};function f(e){return class extends h.A{setFormat(e){super.setFormat(e),this.targetConvertor&&this.targetConvertor.setFormat(e)}async convert(){if(await p.baseContainer.items.collections,await m.utilsContainer.getItems(e=>[e.jsonSchemaUtils,e.xmlSerializationUtils]),!this.targetConvertor&&v[e]){let t=(await v[e]()).default;this.targetConvertor=new t(this.data,{fileName:this.fileName,fileExtension:this.fileExtension,importToBody:this.importToBody,apiNameExtractMethod:this.apiNameExtractMethod,isExistedProject:this.isExistedProject,importProjectId:this.importProjectId,apiFolderId:this.apiFolderId,moduleId:this.moduleId}),this.targetConvertor&&this.format&&this.targetConvertor.setFormat(this.format)}this.targetConvertor&&await this.targetConvertor.convert()}getApiSpecification(){var e,t;return null!=(t=null==(e=this.targetConvertor)?void 0:e.getApiSpecification())?t:super.getApiSpecification()}getTitle(){var e,t;return null!=(t=null==(e=this.targetConvertor)?void 0:e.getTitle())?t:super.getTitle()}getContentVersion(){var e,t;return null!=(t=null==(e=this.targetConvertor)?void 0:e.getContentVersion())?t:super.getContentVersion()}constructor(...e){super(...e),(0,u._)(this,"targetConvertor",void 0)}}}let g={label:(0,c.hw)({id:"autoImport.label.HanKouBank"}),value:d.b.HkbSocketExcel.valueOf(),Convertor:f(d.b.HkbSocketExcel.valueOf()),supportUrlImport:!1,acceptDataType:"arrayBuffer"};var y=i(838e3),x=i(700255),A=i(81611),j=i(792117);let b={label:"OpenAPI/Swagger",value:d.b.OpenApi.valueOf(),Convertor:f(d.b.OpenApi.valueOf()),supportUrlImport:!0,supportBasicAuth:!0,supportGitImport:!0,prompt:(0,y.jsxs)("div",{children:[(0,y.jsx)("span",{className:j.A.promptMessage,children:(0,y.jsx)(c.n3,{id:"manualImport.OpenAPITips"})}),(0,y.jsx)(x.A,{className:j.A.externalLink,url:A.A.importOpenAPILink,children:(0,y.jsx)(c.sA,{id:"environment.manageModal.tipsLinkTitle"})})]})};var w=i(775803),S=i(689368),C=i(838487),I=i.n(C),N=i(671466),k=i(641486),T=i(618487);let M={label:"cURL",value:d.b.CURL.valueOf(),supportUrlImport:!0,supportFileImport:!1,hideInMain:!0,renderUrlImport:()=>(0,y.jsx)(y.Fragment,{}),prompt:(0,y.jsx)(function(){let{locale:e}=(0,T.useIntl)(),t=(0,S.Ay)(e=>e.externalURL),i={"zh-CN":t.assets.curlImportCNTips,"ja-JP":t.assets.curlImportJPTips,"en-US":t.assets.curlImportENTips},{setMenuByPathname:a}=(0,k.useContext)(w.Ay);return(0,y.jsxs)("div",{className:"flex flex-col items-center",children:[(0,y.jsxs)("div",{className:I()("mb-2",j.A.promptMessage),children:[(0,y.jsx)(c.sA,{id:"manualImport.cURL.tips.before"}),(0,y.jsxs)("a",{href:"javascript:void(0);",onClick:()=>null==a?void 0:a("/api-manage/"),children:[(0,y.jsx)(c.sA,{id:"manualImport.cURL.tips.link"}),(0,y.jsx)(N.A,{size:14,type:"icon-arrow-narrow-up-right"})]}),(0,y.jsx)(c.sA,{id:"manualImport.cURL.tips.after"})]}),(0,y.jsx)("img",{style:{height:180,width:462},src:i[e]||i["en-US"]})]})},{})};var E=i(734050);let _="wrapper-M1idVm",F="videoWrapper-zFAeSA",D="videoPosterWrapper-zNG_yz",R="mask-Ix68t3",O="playButton-bwteFm",P="poster-YGG5dJ";function L(e){let{className:t}=e,[i,a]=(0,k.useState)(!1),n=(0,S.Ay)(e=>e.externalURL),l=(0,E.qX)(e=>e.setPostmanGuidingVideoShow);return(0,y.jsxs)("div",{className:I()(_,t),children:[(0,y.jsxs)("div",{className:F,children:[(0,y.jsx)("div",{className:I()("w-full h-full",D),children:!i&&(0,y.jsx)("img",{src:n.assets.postmanMigrationVideoPoster,className:I()("w-full h-full",P),onError:()=>a(!0)})}),(0,y.jsx)("div",{className:I()("absolute flex justify-center items-center cursor-pointer",R),onClick:()=>l(!0)}),(0,y.jsx)("div",{className:I()("absolute flex items-center justify-center",O),children:(0,y.jsx)(N.A,{type:"icon-play",size:24})})]}),(0,y.jsxs)("div",{className:"flex flex-col p-3 justify-center",children:[(0,y.jsxs)("div",{className:"flex items-center cursor-pointer",style:{color:"var(--ui-primary-color)"},onClick:()=>l(!0),children:[(0,y.jsx)(N.A,{type:"icon-video",className:"mr-1",size:16}),(0,c.hw)({id:"import.postman.video.title"})]}),(0,y.jsx)("div",{style:{color:"var(--ui-text-color-secondary)",fontSize:12},children:(0,c.hw)({id:"import.postman.video.desc"})})]})]})}let $={label:"Postman",value:d.b.Postman.valueOf(),Convertor:f(d.b.Postman.valueOf()),supportUrlImport:!1,supportFolderImport:!0,prompt:(0,y.jsxs)("div",{children:[(0,y.jsx)("span",{className:j.A.promptMessage,children:(0,y.jsx)(c.n3,{id:"manualImport.PostmanTips.tipsLinkTitle"})}),(0,y.jsx)(x.A,{className:j.A.externalLink,url:A.A.importPostmanLink,children:(0,y.jsx)(c.sA,{id:"environment.manageModal.tipsLinkTitle"})})]}),render:s.T0?e=>(0,y.jsxs)("div",{className:"flex",children:[(0,y.jsx)(L,{className:"flex-0"}),(0,y.jsx)("div",{className:"mx-4",style:{width:1,backgroundColor:"var(--ui-border-color-split)"}}),(0,y.jsx)("div",{className:I()("flex-1",j.A.postmanFileImportWrapper),children:e})]}):void 0},B={label:(0,c.hw)({id:"import.format.har.label"}),value:d.b.HAR.valueOf(),Convertor:f(d.b.HAR.valueOf()),supportUrlImport:!1},z={label:"RAML",value:d.b.RAML.valueOf(),Convertor:f(d.b.OpenApi.valueOf()),format:"raml",supportUrlImport:!0},U={label:"API Blueprint",value:d.b.APIBlueprint.valueOf(),Convertor:f(d.b.OpenApi.valueOf()),format:"api_blueprint",supportUrlImport:!0},H={label:"I/O Doc",value:d.b.IODocs.valueOf(),Convertor:f(d.b.OpenApi.valueOf()),format:"io_docs",supportUrlImport:!0},V={label:"WADL",value:d.b.WADL.valueOf(),Convertor:f(d.b.OpenApi.valueOf()),format:"wadl",supportUrlImport:!0},K={label:"Google Discovery",value:d.b.Google.valueOf(),Convertor:f(d.b.OpenApi.valueOf()),format:"google",supportUrlImport:!0},q={label:s.aV,value:d.b.App.valueOf(),Convertor:f(d.b.App.valueOf()),supportUrlImport:!1},G={label:"YApi",value:d.b.YApi.valueOf(),Convertor:f(d.b.YApi.valueOf()),supportUrlImport:!1,prompt:(0,y.jsx)("div",{children:(0,y.jsx)("span",{className:j.A.promptMessage,children:(0,y.jsx)(c.n3,{id:"manualImport.JSONTips"})})})},W={label:"RAP2",value:d.b.RAP2.valueOf(),Convertor:f(d.b.RAP2.valueOf()),supportUrlImport:!1,prompt:(0,y.jsxs)("div",{children:[(0,y.jsx)("span",{className:j.A.promptMessage,children:(0,y.jsx)(c.n3,{id:"manualImport.RAP2Tips"})}),(0,y.jsx)("br",{}),(0,y.jsx)("img",{style:{width:600},src:A.A.rap2ExportJpgL})]})},J={label:"JMeter",value:d.b.Jmeter.valueOf(),Convertor:f(d.b.Jmeter.valueOf()),supportUrlImport:!1,prompt:(0,y.jsx)("div",{children:(0,y.jsx)("span",{className:j.A.promptMessage,children:(0,y.jsx)(c.n3,{id:"manualImport.JmeterTips"})})})},Y={label:"DOClever",value:d.b.DOClever.valueOf(),Convertor:f(d.b.DOClever.valueOf()),supportUrlImport:!1,prompt:(0,y.jsx)("div",{children:(0,y.jsx)("span",{className:j.A.promptMessage,children:(0,y.jsx)(c.n3,{id:"manualImport.DocleverTips"})})})},Z={label:"SosoApi",value:d.b.SosoApi.valueOf(),Convertor:f(d.b.OpenApi.valueOf()),supportUrlImport:!1,prompt:(0,y.jsx)("div",{children:(0,y.jsx)("span",{className:j.A.promptMessage,children:(0,y.jsx)(c.n3,{id:"manualImport.SosoApiTips"})})})},Q={label:"Eolink",value:d.b.Eolinker.valueOf(),Convertor:f(d.b.Eolinker.valueOf()),supportUrlImport:!1,prompt:(0,y.jsxs)("div",{children:[(0,y.jsx)("span",{className:j.A.promptMessage,children:(0,y.jsx)(c.n3,{id:"manualImport.EolinkerTips"})}),(0,y.jsx)(x.A,{className:j.A.externalLink,url:A.A.importEolinkerLink,children:(0,y.jsx)(c.sA,{id:"environment.manageModal.tipsLinkTitle"})})]})},X={label:"NEI",value:d.b.Nei.valueOf(),Convertor:f(d.b.Nei.valueOf()),supportUrlImport:!1,prompt:(0,y.jsxs)("div",{children:[(0,y.jsx)("span",{className:j.A.promptMessage,children:(0,y.jsx)(c.n3,{id:"manualImport.NEITips"})}),(0,y.jsx)(x.A,{className:j.A.externalLink,url:A.A.importNeiLink,children:(0,y.jsx)(c.sA,{id:"environment.manageModal.tipsLinkTitle"})})]})},ee={label:"ApiPost",value:d.b.ApiPost.valueOf(),Convertor:f(d.b.ApiPost.valueOf()),supportUrlImport:!1,prompt:(0,y.jsxs)("div",{children:[(0,y.jsx)("span",{className:j.A.promptMessage,children:(0,y.jsx)(c.n3,{id:"manualImport.ApiPostTips"})}),(0,y.jsx)(x.A,{className:j.A.externalLink,url:A.A.importApipostLink,children:(0,y.jsx)(c.sA,{id:"environment.manageModal.tipsLinkTitle"})})]})},et={label:"Apizza",value:d.b.Apizza.valueOf(),Convertor:f(d.b.Apizza.valueOf()),supportUrlImport:!1,prompt:(0,y.jsxs)("div",{children:[(0,y.jsx)("span",{className:j.A.promptMessage,children:(0,y.jsx)(c.n3,{id:"manualImport.ApizzaTips"})}),(0,y.jsx)(x.A,{className:j.A.externalLink,url:A.A.importApizzaLink,children:(0,y.jsx)(c.sA,{id:"environment.manageModal.tipsLinkTitle"})})]})},ei={label:"ShowDoc",value:d.b.ShowDoc.valueOf(),Convertor:f(d.b.ShowDoc.valueOf()),supportUrlImport:!1,prompt:(0,y.jsx)("div",{children:(0,y.jsx)("span",{className:j.A.promptMessage,children:(0,y.jsx)(c.n3,{id:"manualImport.ShowDocTips"})})})},ea={label:(0,c.hw)({id:"import.format.docway.label"}),value:d.b.Docway.valueOf(),Convertor:f(d.b.Docway.valueOf()),supportUrlImport:!0,supportFileImport:!0,prompt:(0,y.jsxs)("div",{children:[(0,y.jsx)("span",{className:j.A.promptMessage,children:(0,y.jsx)(c.n3,{id:"manualImport.DocwayTips"})}),(0,y.jsx)(x.A,{className:j.A.externalLink,url:A.A.importDocwayLink,children:(0,y.jsx)(c.sA,{id:"environment.manageModal.tipsLinkTitle"})})]})},en={label:"apiDoc",value:d.b.Apidoc.valueOf(),Convertor:f(d.b.Apidoc.valueOf()),supportUrlImport:!0,supportFileImport:!0,prompt:(0,y.jsx)("div",{children:(0,y.jsx)("span",{className:j.A.promptMessage,children:(0,y.jsx)(c.n3,{id:"manualImport.ApidocTips"})})})},el={label:"EasyDoc",value:d.b.EasyDoc.valueOf(),Convertor:f(d.b.EasyDoc.valueOf()),supportUrlImport:!1};var er=i(440094);let es={label:"Knife4j",value:d.b.Knife4j.valueOf(),Convertor:f(d.b.OpenApi.valueOf()),supportUrlImport:!0,supportFileImport:!1,renderUrlImport:(e,t)=>(0,y.jsx)(er.A,{form:e,onSubmit:t}),prompt:(0,y.jsx)("div",{children:(0,y.jsx)(x.A,{className:j.A.externalLink,url:A.A.importKnife4jLink})})},eo={label:"Insomnia",value:d.b.Insomnia.valueOf(),Convertor:f(d.b.Insomnia.valueOf()),supportUrlImport:!1,prompt:(0,y.jsx)("div",{children:(0,y.jsx)("span",{className:j.A.promptMessage,children:(0,y.jsx)(c.n3,{id:"manualImport.InsomniaTips"})})})},ed={label:"WSDL",value:d.b.WSDL.valueOf(),Convertor:f(d.b.WSDL.valueOf()),supportUrlImport:!0},ec={label:"JsonSchema",value:d.b.JsonSchema.valueOf(),Convertor:f(d.b.JsonSchema.valueOf()),supportUrlImport:!1,supportFolderImport:!0,prompt:(0,y.jsx)("div",{className:"flex items-center",children:(0,y.jsx)("span",{className:j.A.promptMessage,children:(0,y.jsx)(c.n3,{id:"manualImport.JsonSchemaTips"})})})},eu={label:"Markdown",value:d.b.Markdown.valueOf(),Convertor:f(d.b.Markdown.valueOf()),supportUrlImport:!1,supportFolderImport:!0,prompt:(0,y.jsx)("div",{children:(0,y.jsx)("span",{className:j.A.promptMessage,children:(0,y.jsx)(c.n3,{id:"manualImport.MarkdownTips",values:{appName:s.JB}})})})},ep={label:(0,c.hw)({id:"import.format.proto.label"}),value:d.b.Protobuf.valueOf(),Convertor:f(d.b.OpenApi.valueOf()),supportUrlImport:!1,supportFolderImport:!1,prompt:(0,y.jsx)("div",{children:(0,y.jsx)("span",{className:j.A.promptMessage,children:(0,y.jsx)(c.n3,{id:"manualImport.ProtoTips",values:{appName:s.JB}})})})},em={label:(0,c.hw)({id:"import.format.javaProject.label"}),value:d.b.JavaProject.valueOf(),supportUrlImport:!1,supportFileImport:!1,supportFolderImport:!1,prompt:(0,y.jsx)(e=>{let{prompt:t,imageBucket:i}=e,a=(0,S.Ay)(e=>e.externalURL);return(0,y.jsxs)("div",{className:"flex flex-col items-center",children:[(0,y.jsx)("div",{className:"mb-2",children:t}),(0,y.jsx)("img",{className:j.A.importPromptImage,src:a.assets[i]})]})},{imageBucket:"importJavaProjectImg",prompt:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("span",{className:j.A.promptMessage,children:(0,y.jsx)(c.n3,{id:"manualImport.JavaProjectTips",values:{appName:s.JB}})}),(0,y.jsx)(x.A,{className:j.A.externalLink,url:A.A.importJavaProjectLink,children:(0,y.jsx)(c.sA,{id:"environment.manageModal.tipsLinkTitle"})})]})})},eh={label:"SoapUI",value:d.b.SoapUI.valueOf(),Convertor:f(d.b.SoapUI.valueOf()),supportUrlImport:!1,prompt:(0,y.jsx)("div",{children:(0,y.jsx)("span",{className:j.A.promptMessage,children:(0,y.jsx)(c.n3,{id:"manualImport.SoapUITips"})})})},ev={label:"Hoppscotch",value:d.b.Hoppscotch.valueOf(),Convertor:f(d.b.Hoppscotch.valueOf()),supportUrlImport:!1,prompt:(0,y.jsx)("div",{children:(0,y.jsx)("span",{className:j.A.promptMessage,children:(0,y.jsx)(c.n3,{id:"manualImport.HoppscotchTips"})})})},ef={[d.b.HkbSocketExcel]:g,[d.b.OpenApi]:b,[d.b.CURL]:M,[d.b.Postman]:$,[d.b.HAR]:B,[d.b.RAML]:z,[d.b.APIBlueprint]:U,[d.b.IODocs]:H,[d.b.WADL]:V,[d.b.Google]:K,[d.b.App]:q,[d.b.YApi]:G,[d.b.RAP2]:W,[d.b.Jmeter]:J,[d.b.DOClever]:Y,[d.b.SosoApi]:Z,[d.b.Eolinker]:Q,[d.b.Nei]:X,[d.b.ApiPost]:ee,[d.b.Apizza]:et,[d.b.ShowDoc]:ei,[d.b.Docway]:ea,[d.b.Apidoc]:en,[d.b.EasyDoc]:el,[d.b.Knife4j]:es,[d.b.Insomnia]:eo,[d.b.WSDL]:ed,[d.b.JsonSchema]:ec,[d.b.Markdown]:eu,[d.b.Protobuf]:ep,[d.b.JavaProject]:em,[d.b.SoapUI]:eh,[d.b.Hoppscotch]:ev},eg={[d.b.App]:s.A3,[d.b.Postman]:"postman",[d.b.OpenApi]:"openapi",[d.b.CURL]:"curl",[d.b.HAR]:"har",[d.b.YApi]:"yapi",[d.b.RAP2]:"rap2",[d.b.DOClever]:"doclever",[d.b.SosoApi]:"sosoapi",[d.b.Eolinker]:"eolink",[d.b.Nei]:"nei",[d.b.ApiPost]:"apipost",[d.b.Apizza]:"apizza",[d.b.RAML]:"raml",[d.b.IODocs]:"iodocs",[d.b.WADL]:"wadl",[d.b.Google]:"googleDiscovery",[d.b.ShowDoc]:"showdoc",[d.b.Docway]:"xiaoyaoji",[d.b.Jmeter]:"jmeter",[d.b.Apidoc]:"apidoc",[d.b.EasyDoc]:"easydoc",[d.b.Knife4j]:"knife4j",[d.b.Insomnia]:"insomnia",[d.b.WSDL]:"wsdl",[d.b.Markdown]:"markdown",[d.b.Protobuf]:"protobuf",[d.b.JavaProject]:"javaProject",[d.b.SoapUI]:"soapui",[d.b.Hoppscotch]:"hoppscotch"},ey=s.xL.map(e=>ef[d.b[e]]);function ex(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[...ey.filter(t=>!(e&&t.hideInMain))],i=(0,o.dn)();return i&&(15300===i.id||15301===i.id||""===i.company)&&t.unshift(ef[d.b.HkbSocketExcel]),t}var eA=((a={}).HttpApi="httpApi",a.WebSocketApi="webSocketApi",a.SocketIOApi="socketIOApi",a.McpClient="mcpClient",a.HttpFolder="apiFolder",a.SocketApi="socketApi",a.SocketFolder="socketFolder",a.SocketService="socketService",a.DataSchema="dataSchema",a.DataSchemaFolder="dataSchemaFolder",a.ApiTestCase="apiTestCase",a.ApiTestCaseFolder="testSuiteFolder",a.HttpCommonResponseGroup="httpCommonResponseGroup",a.HttpCommonResponse="httpCommonResponse",a.Doc="doc",a),ej=((n={}).SCHEMA="SCHEMA",n.DESC="DESC",n),eb=((l={}).OPERATION_ID="OPERATION_ID",l.DESCRIPTION="DESCRIPTION",l.PATH="PATH",l),ew=((r={}).FILE="FILE",r.URL="URL",r)},940548:function(e,t,i){"use strict";i.d(t,{Z:()=>d});var a=i(838e3),n=i(169508),l=i(740565),r=i(81611);i(925053);var s=i(734354),o=i(689368);let d=(e,t)=>{let i,d,c=(0,o.DA)(e=>{var t,i;return null==(i=e.externalURL)||null==(t=i.help)?void 0:t.edgeBrowserExtension}),u=(0,o.DA)(e=>{var t,i;return null==(i=e.externalURL)||null==(t=i.help)?void 0:t.browserExtension}),p=(0,s.fx)().isEdge?c:u,{isImportFromGit:m=!1}=null!=t?t:{};switch(e.type){case"authorizationRequired":i=(0,l.hw)({id:"import.message.authorizeError"}),d=(0,l.hw)({id:"import.description.authorizeError"});break;case"webExtensionRequired":i=(0,l.hw)({id:"import.message.acquireUrlDataError"}),d=(0,a.jsx)(l.sA,{id:"webVersion.tips.importError",values:{extension:(0,a.jsx)("a",{href:p,target:"_blank",className:"mx-1",rel:"noreferrer",children:(0,l.hw)({id:"webVersion.tips.installExtension"},{appName:n.JB})}),desktopVersion:(0,a.jsx)("a",{href:r.A.homeLink,target:"_blank",className:" mx-1",rel:"noreferrer",children:(0,l.hw)({id:"webVersion.tips.desktopVersion"})}),appName:n.JB}});break;case"desktopVersionRequired":i=(0,l.hw)({id:"import.message.acquireUrlDataError"}),d=(0,a.jsx)(l.sA,{id:"webVersion.tips.importErrorWithBrowserRestrictions",values:{desktopVersion:(0,a.jsx)("a",{href:r.A.homeLink,target:"_blank",className:" mx-1",rel:"noreferrer",children:(0,l.hw)({id:"webVersion.tips.desktopVersion"})}),appName:n.JB}});break;case"invalidDataFormat":i=(0,l.hw)({id:"import.message.dataFormatError"}),d=m?(0,l.hw)({id:"import.message.checkDataFormatError.git"}):(0,l.hw)({id:"import.message.checkDataFormatError"});break;default:i=m?(0,l.hw)({id:"import.message.acquireGitDataError"}):(0,l.hw)({id:"import.message.acquireUrlDataError"}),d=m?e.message||(0,l.hw)({id:"import.message.checkGitError"}):e.message||(0,l.hw)({id:"import.message.checkUrlAccessError"})}return{message:i,description:d}}},267622:function(e,t,i){"use strict";i.d(t,{I:()=>l,J:()=>r});var a=i(641486),n=i(398380);let l=(0,a.createContext)({gitForm:{},urlForm:{},importType:"file",securitySchemeOptions:void 0}),r=(e,t)=>(0,n.uniqBy)([e,...t],"url").slice(0,5)},456269:function(e,t,i){"use strict";i.d(t,{Ay:()=>c,Ic:()=>d,wl:()=>o});var a=i(526838),n=i(968734),l=i(434781),r=i(519271),s=i(269966);let o=e=>e.endsWith(".yaml")||e.endsWith(".yml"),d=e=>{var t;return!!e&&["yaml","yml"].includes((null==(t=e.split(".").pop())?void 0:t.toLowerCase())||"")};class c{extractFileNameFromUrl(e){let t=e.match(/\/([^/]+)\.\w+$/);return t?t[1]:null}resolveRef(e,t){return new URL(t,e).href}isSchemasUrl(e){return/\/components\/schemas\//.test(e)}isSchemaObject(e){if(!e||"object"!=typeof e)return!1;let t=Object.keys(e);for(let e of t)if(Object.values(s.Zl).includes(e))return!1;if(t.includes("description")&&t.includes("content")){for(let t of Object.keys(e.content))if(s.J$.includes(t))return!1}return!(t.includes("summary")&&t.includes("value"))&&!0}convertToRawUrl(e){let t=e.match(/https:\/\/github\.com\/([^/]+\/[^/]+)\/blob\/(.+)/);if(t&&3===t.length){let e=t[1],i=t[2];return`https://raw.githubusercontent.com/${e}/${i}`}return e}async concurrencyLimit(e,t){let i=0,a=e.slice(i,i+t);for(;a.length>0;)await Promise.all(a),i+=t,a=e.slice(i,i+t).length>0?e.slice(i,i+t):[]}async replaceRefs(e,t,i){let a=Array.isArray(e)?[]:{},n=[];for(let l in e){let r=e[l];if("object"==typeof r&&null!==r)if("$ref"in r&&"string"==typeof r.$ref){let e=this.resolveRef(t,r.$ref);if(-1!==e.indexOf("#")){a[l]=r;continue}n.push(this.fetchAndParseUrl(e,i).then(t=>{let i=this.extractFileNameFromUrl(e);(this.isSchemasUrl(e)||this.isSchemaObject(t))&&i?(a[l]={$ref:`${"#/components/schemas/"+i}`},this.schemas[i]=t):a[l]=t}))}else n.push(this.replaceRefs(r,t,i).then(e=>{a[l]=e}));else a[l]=r}return await this.concurrencyLimit(n,2),a}async fetchAndParseGitFile(e,t,i,a){let r=a?await (0,l.tZ)(e,t,i):await (0,l.kj)(e,t,i),s=(null==r?void 0:r.data)||"";return(0,n.Uw)(s)}async fetchAndParseUrl(e,t){let i=await (0,r.bf)(e,{auth:t,onResponseHandle:this.onResponseHandle});if(!o(e))return i||"";{let a=(0,n.Uw)(i||"");return this.replaceRefs(a,e,t)}}async parse(e,t){let i=this.convertToRawUrl(e),a=await this.fetchAndParseUrl(i,t);return a.components=a.components||{},a.components.schemas=a.components.schemas||{},a.components.schemas={...a.components.schemas,...this.schemas},a}constructor(e){(0,a._)(this,"onResponseHandle",void 0),(0,a._)(this,"schemas",void 0),this.onResponseHandle=e,this.schemas={}}}},283835:function(e,t,i){"use strict";function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Map(t.map(t=>[t[e],t.id]))}i.d(t,{A:()=>a})},527223:function(e,t,i){"use strict";i.d(t,{A:()=>r});var a=i(954939),n=i(109078);let l=e=>Array.isArray(e)&&(null==e?void 0:e.length)>0,r=(e,t,i)=>{let r=null==e?void 0:e.httpCollection,s=null==e?void 0:e.customEndpointCollection,o=[],d=e=>{l(e)&&e.forEach(e=>{l(null==e?void 0:e.items)&&o.push(...e.items),l(null==e?void 0:e.children)&&d(e.children)})};d(r);let c=[],u=e=>{l(e)&&e.forEach(e=>{l(null==e?void 0:e.items)&&c.push(...e.items),l(null==e?void 0:e.children)&&u(e.children)})};u(s);let p=[a.HI.OperationId,a.HI.SourceUrl];[...o,...c].forEach(e=>{let l=e.hasOwnProperty("customEndpointFields")?"customEndpointFields":"customApiFields",r=e[l];if(r){let s;try{s=JSON.parse(r)}catch(e){s={}}let o=Object.keys(s);if(o.length>0){let r={};o.forEach(l=>{let o=p.includes(l);t.has(l)&&!o&&(r[t.get(l)]=s[l]),l===a.HI.WebhookName&&(r[a.HI.WebhookName]=s[l]);var d=l,c=s[l],u=i,m=e;switch(u){case n.b.OpenApi:d===a.HI.SourceUrl&&(m.sourceUrl=c);case n.b.App:}}),e[l]=JSON.stringify(r)}}})}},656989:function(e,t,i){"use strict";i.d(t,{A5:()=>m,M2:()=>p,mS:()=>h});var a=i(838e3),n=i(666804),l=i(740565),r=i(765787),s=i(496411),o=i(793594),d=i(671466),c=i(763350);let u=e=>({icon:(0,a.jsx)(d.A,{type:"icon-info-1",color:"var(--ui-primary-color)"}),title:(0,l.hw)({id:"branch.operation.limit.title"}),content:(0,l.hw)({id:"branch.operation.limit.content"},{branchCount:e}),cancelText:(0,l.hw)({id:"branch.operation.limit.cancelText"})}),p=e=>({...u(e),okText:(0,l.hw)({id:"payment.Upgrade"}),onOk:()=>{(0,n.Nu)({entityId:(0,s.Sy)(),showUpgradeModal:!0})}}),m=e=>({...u(e),okText:(0,l.hw)({id:"branch.operation.limit.okText.global"}),onOk:()=>{let e=r.f3.getState().updatePurchaseModalVisible;(0,o.IL)("app_button_click_upgrade_plan",{page_source:"function",index:"sprint_branch"}),e(!0)}}),h={icon:(0,a.jsx)(d.A,{type:"icon-success1",color:"var(--ui-success-color)"}),title:(0,a.jsx)("div",{children:(0,a.jsx)(l.sA,{id:"branch.create.bestPractice.modal.title"})}),content:(0,a.jsxs)("div",{className:"mt-4",style:{marginLeft:-38},children:[(0,a.jsx)(l.n3,{id:"branch.create.bestPractice.description1"}),(0,a.jsxs)("div",{className:"mt-4 p-2 rounded-lg",style:{backgroundColor:"var(--ui-fill-3)"},children:[(0,a.jsx)(l.n3,{id:"branch.create.bestPractice.description2"}),(0,a.jsxs)("span",{style:{color:"var(--ui-primary-color)",cursor:"pointer"},onClick:c.o,children:[(0,a.jsx)(l.sA,{id:"learnMore"}),(0,a.jsx)(d.A,{type:"icon-arrow-narrow-right1",color:"var(--ui-primary-color)"})]})]})]})}},763350:function(e,t,i){"use strict";i.d(t,{o:()=>r});var a=i(483482),n=i(11868),l=i(689368);function r(){let e,t=(0,n.dn)();(e=t&&t.serverUrl?`${t.serverUrl}/help/`:(0,l.DA)(e=>{var t,i;return null==(i=e.externalURL)||null==(t=i.help)?void 0:t.branch}))&&(0,a.kK)(e)}},523845:function(e,t,i){"use strict";i.d(t,{HB:()=>p,J0:()=>m,op:()=>u});var a=i(362010),n=i(169508),l=i(2183),r=i(496411),s=i(764007),o=i(398380),d=i(120158),c=i(656989);function u(){var e;let t=null!=(e=(0,l.ok)().planDegradeInfoData.sprintBranch.branchQuantityLimitation)?e:1;s.Ay.confirm(n.T0?(0,c.A5)(t):(0,c.M2)(t))}function p(){return l._$.getState().planDegradeInfoData.sprintBranch.limitedBranchIds.includes((0,r.U3)())}function m(e){return(0,a.Ar)().isLimitReached?o.noop:p()?u:l._$.getState().planDegradeInfoData.apiVersion.limitedBranchIds.includes((0,r.U3)())?d.o:e}},131833:function(e,t,i){"use strict";i.d(t,{w:()=>s});var a=i(838e3),n=i(838487),l=i.n(n),r=i(255529);function s(e){let{name:t,children:i,valuePropName:n,label:s,detail:o,hidden:d,isChildLevel:c,hasChildItem:u,className:p="",childrenClassName:m="",overrideClassName:h,borderless:v}=e,f=t?(0,a.jsx)(r.A.Item,{name:t,noStyle:!0,valuePropName:n,hidden:d,children:i}):i;return d?(0,a.jsx)(a.Fragment,{children:f}):(0,a.jsx)("div",{className:l()(p,void 0!==h?h:{"border-b py-5":!u,"pt-5":u,"pt-3":c}),style:{borderBottomColor:u||v?void 0:"var(--ui-border-color-split)",borderBottomStyle:u||v?void 0:"solid"},children:(0,a.jsxs)("div",{className:l()("flex items-center",{"p-5 rounded":c}),style:{backgroundColor:c?"var(--ui-fill-3)":void 0},children:[(0,a.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,a.jsx)("div",{className:"font-size-base font-weight-base app-text-color",style:{lineHeight:"var(--ui-line-height-base)"},children:s}),o&&(0,a.jsx)("div",{style:{fontSize:"var(--ui-font-size-sm)",color:"var(--ui-text-color-tertiary)",fontWeight:"var(--ui-font-weight-400)",lineHeight:"var(--ui-line-height-sm, 18px)",marginTop:6},children:o})]}),f&&(0,a.jsx)("div",{className:`pl-6 ${m}`,children:f})]})})}},88316:function(e,t,i){"use strict";i.d(t,{T:()=>s,s:()=>o});var a=i(838e3),n=i(910155),l=i(641486);let{ContextProvider:r,useContextStore:s}=(0,n.B)(),o=e=>{let{children:t,value:i}=e,n=s(e=>e),o=(0,l.useMemo)(()=>({...n,...i}),[i,n]);return(0,a.jsx)(r,{value:o,children:t})}},626026:function(e,t,i){"use strict";i.d(t,{y:()=>f});var a=i(838e3),n=i(838487),l=i.n(n),r=i(838062),s=i(66011),o=i(325318),d=i(751889),c=i(744283),u=i(740565);i(684795);var p=i(140049),m=i(743190),h=i(671466),v=i(618487);function f(e){let{value:t,onSelect:i,onChange:n,className:f,onPaste:g,children:y,...x}=e,{options:A,filterOption:j,templateParameters:b}=(0,s.Z)(),{dropdownRender:w}=(e=>{let{showDivider:t}=null!=e?e:{},{openModal:i}=(0,v.useModel)("globalModal",e=>({openModal:e.openModal}));return{dropdownRender:(0,p.A)(e=>(0,a.jsxs)(a.Fragment,{children:[e,!!t&&(0,a.jsx)(m.A,{style:{margin:"4px 0"}}),(0,a.jsx)(d.A,{storageKey:"onboarding.tooltip.templateParameter.menu",placement:"right",open:!0,color:"var(--ui-primary-color)",delay:100,zIndex:1060,arrowPointAtCenter:!0,title:(0,u.hw)({id:"projectSetting.templateParameter.tips"}),children:(0,a.jsx)(o.y,{permission:c.o.SETTING_COMMON_PARAM_READ,children:(0,a.jsx)("div",{className:"flex flex-no-wrap cursor-pointer",children:(0,a.jsx)("div",{onClick:i.bind(null,{moduleName:11,modalProps:{width:960}}),className:"display-block w-full py-1 pl-3",children:(0,a.jsxs)("div",{className:"w-full flex items-center",children:[(0,a.jsx)(h.A,{type:"icon-CommonParameters",size:16,className:"mr-2"}),(0,u.hw)({id:"menu.projectSettings.resource.templateParameter"})]})})})})})]}))}})({showDivider:!!(null==A?void 0:A.length)});return(0,a.jsx)(r.A,{bordered:!1,filterOption:j,...x,className:l()("w-full outline-none",f),value:t,options:A,onChange:n,onSelect:e=>{let t=null==b?void 0:b.find(t=>t.name===e);t&&(null==i||i(t))},dropdownMatchSelectWidth:200,dropdownRender:w,onPaste:g,children:y})}},66011:function(e,t,i){"use strict";i.d(t,{Z:()=>r});var a=i(689368),n=i(140049),l=i(641486);function r(){let e=(0,a.Ay)(e=>{var t;return null==(t=e.projectSetting.projectSettingData)?void 0:t.templateParameters}),t=(0,l.useMemo)(()=>{let t=new Set;return null==e||e.forEach(e=>t.add(e.name)),[...t].map(e=>({label:e,value:e}))},[e]);return{options:t,filterOption:(0,n.A)((e,t)=>!!e&&"string"==typeof(null==t?void 0:t.label)&&t.label.includes(e)),templateParameters:e}}},531579:function(e,t,i){"use strict";i.d(t,{l:()=>A,Z:()=>b});var a,n=i(838e3),l=i(671466),r=i(843212),s=i(325318),o=i(751889),d=i(744283),c=i(740565);i(684795);var u=i(689368),p=i(838487),m=i.n(p),h=i(257100),v=i(641486),f=i(618487);let g="iconWrapper-Rk9XQ4",y="iconWrapperOpened-vrsumE",x="dropdownItemLabel-lgdAov";var A=((a={}).TITLE="TITLE",a.DESCRIPTION="DESCRIPTION",a);function j(e){let{keyword:t,type:i,onSelect:a,className:p,style:A,onboardingTooltip:j,children:b}=e,{hasPermission:w}=(0,r.w)(d.o.SETTING_COMMON_PARAM_READ),S=(0,u.Ay)(e=>{var t;return null==(t=e.projectSetting.projectSettingData)?void 0:t.templateParameters}),C=(0,v.useMemo)(()=>t?((null==S?void 0:S.filter(e=>{var i;return null==(i=e.name)?void 0:i.includes(t)}))||[]).filter(e=>"DESCRIPTION"===i?!!e.description:!!e.title):[],[S,t,i]),{openModal:I}=(0,f.useModel)("globalModal",e=>({openModal:e.openModal})),[N,k]=(0,v.useState)(!1);return(0,n.jsx)(o.A,{storageKey:"projectSetting.templateParameter.onboarding.icon",trigger:[],open:j,placement:"top",arrowPointAtCenter:!0,overlayStyle:{maxWidth:200},title:(0,c.hw)({id:"projectSetting.templateParameter.tips"}),wrapClassName:m()("flex items-center justify-center",g,{[y]:N},p),warpStyle:{width:24,height:24,...A},children:(0,n.jsx)(h.A,{trigger:["click"],overlayStyle:{minWidth:200,maxWidth:320},placement:"bottomLeft",onOpenChange:k,menu:{items:[...C.map(e=>"DESCRIPTION"===i?{label:(0,n.jsx)("div",{className:x,children:e.description}),key:e.id,onClick:()=>null==a?void 0:a(e)}:{label:(0,n.jsx)("div",{className:x,children:e.title}),key:e.id,onClick:()=>null==a?void 0:a(e)}),C.length?{type:"divider"}:null,{label:(0,n.jsx)(s.y,{permission:d.o.SETTING_COMMON_PARAM_READ,children:(0,n.jsxs)("div",{className:"w-full flex items-center",children:[(0,n.jsx)(l.A,{type:"icon-menu-01",size:16,className:"mr-2"}),(0,c.hw)({id:"menu.projectSettings.resource.templateParameter"})]})}),disabled:!w,key:"templateParameter_modal_trigger",onClick:()=>I({moduleName:11,modalProps:{width:960}})}]},children:b})})}let b=e=>(0,n.jsx)(j,{...e,children:(0,n.jsx)(l.A,{type:"icon-menu-01",size:12,className:"cursor-pointer"})})},839402:function(e,t,i){"use strict";let a;i.d(t,{A:()=>eN});var n=i(838e3),l=i(740565);i(684795);var r=i(490045),s=i(222757),o=i(689368),d=i(140049),c=i(255529),u=i(257100),p=i(458184),m=i(671466),h=i(641486),v=i(618487),f=i(88316),g=i(401146);g.Ik({name:g.Yj(),score:g.ai().min(0).max(5),reason:g.Yj().optional()}),g.Ik({content:g.Yj().optional(),costTime:g.ai().default(0),thinking:g.zM().default(!1)}),g.Ik({title:g.Yj().optional(),description:g.Yj().optional()});var y=i(722238),x=i(738753),A=i(570742),j=i(328970),b=i(868812),w=i(301370),S=i(222618),C=i(445524),I=i(797091),N=i(966121),k=i(385458);i(807603);var T=i(221312),M=i(203807),E=i(95837),_=i(297965),F=i(135400),D=i(925543),R=i(709372),O=i(170836),P=i(698879),L=i(52367),$=i(718180),B=i(759345),z=i(838487),U=i.n(z),H=i(929463),V=i(764007),K=i(820182),q=i(129867);let G="aiNamingItem-R14L9m",W="adoptButton-Kll1pH",J="reason-cqaaMk",Y="aiNamingScore-AAySgG",Z="score-FQJecj",Q="orange-T2Lj0C",X="red-KinPrw",ee="star-FpzTmR",et="active-odLK9m",ei="aiNamingSkeleton-trxO5z",ea="aiNamingSkeletonItem-kEgC7Z",en="aiNamingSkeletonItemInner-pdmSA1",el=e=>{let{className:t,score:i=0}=e;return(0,n.jsxs)("div",{className:U()(Y,{[Q]:i<=3,[X]:i<=2},t),children:[Array.from({length:5}).fill("").map((e,t)=>{let a=`star_${t}`;return(0,n.jsx)("div",{className:U()(ee,{[et]:t<i})},a)}),(0,n.jsx)("span",{className:Z,children:i})]})};var er=i(161814);let es=e=>{let{className:t,result:i,onApply:a}=e,{name:r,score:s,reason:o}=i;return(0,n.jsx)("div",{className:U()(G,t),children:(0,n.jsxs)("div",{className:"w-full flex flex-col flex-1 gap-1",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between gap-3",style:{height:28},children:[(0,n.jsxs)("div",{className:"flex items-center truncate gap-2",children:[(0,n.jsx)(er.A,{className:"truncate",text:r,copyText:r}),(0,n.jsx)(el,{className:"flex-shrink-0",score:s})]}),(0,n.jsx)(p.A,{className:U()(W,"flex-shrink-0"),size:"small",type:"primary",icon:(0,n.jsx)(m.A,{type:"icon-CheckRead"}),onClick:()=>null==a?void 0:a(i),children:(0,l.hw)({id:"ai.naming.apply"})})]}),(0,n.jsx)("div",{className:U()(J),children:o})]})})},eo=e=>{let{className:t}=e;return(0,n.jsxs)("div",{className:U()(ei,t),children:[(0,n.jsx)("div",{className:ea,style:{width:"30%"},children:(0,n.jsx)("div",{className:en})}),(0,n.jsx)("div",{className:ea,style:{width:"60%"},children:(0,n.jsx)("div",{className:en})})]})};var ed=i(930496),ec=i(325475),eu=i(385357),ep=i(410054),em=i(674952);let eh=e=>({caseStyle:A.Q.CAMEL_CASE,reset:()=>{e({caseStyle:A.Q.CAMEL_CASE,modelId:void 0})}});function ev(){return a?a:(a=(0,ec.vt)((0,eu.eh)((0,eu.Zr)(eh,{name:"ai.naming"}))),ep.A.on(em.e,()=>{null==a||a.getState().reset()}),a)}let ef="aiNamingModal-v18CA9",eg="content-gIzlmO",ey="description-jtwwSe",ex="inputWrapper-ztPi9v",eA="inputContent-nWa9a8",ej="modelSelect-jwuN7Q",eb="caseStyleSelect-Fe3aw5",ew="reasoningBoxContent-MXiS5r",eS=e=>{var t;let{values:i,className:a,onApply:r,onCancel:c,onInterrupt:u,rowContext:p,...v}=e,f=(0,o.Ay)(e=>e.project.currentProject),g=[null==p?void 0:p.title,null==p?void 0:p.description].filter(Boolean).join((0,l.hw)({id:"char.colon"})),y=null==f?void 0:f.id,z=(0,s.y)(e=>e.endpointId),G=(0,h.useRef)(null),W=(0,h.useRef)(!1),J=(0,o.Ay)(e=>e.externalURL),Y=(0,h.useRef)((0,q.Z0)()),Z=(0,h.useRef)(),{models:Q=[],modelId:X,finalModelId:ee,setModelId:et,modelsProcessor:ei,defaultModelId:ea,autoSelectableIcon:en,teamId:el}=(0,C.r)({llmNodeType:"SUGGEST_API_PARAMETER_NAME",persist:!0}),er=(0,h.useMemo)(()=>null==Q?void 0:Q.find(e=>e.aiLlmModelId===ee),[Q,ee]),[eu,ep]=(0,h.useState)([]),em=(0,h.useRef)(null),eh=(0,h.useRef)(!1),eS=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ed.b,i=ev();return(0,ec.Pj)(i,e,t)}(e=>e.caseStyle),eC=(0,d.A)(e=>{ev().setState({caseStyle:e})}),eI=(0,d.A)(e=>null==e?void 0:e.map(e=>({...e,backFill:(null==e?void 0:e.value)===A.Q.ORIGINAL?(0,l.hw)({id:"ai.naming.style"}):e.label}))),eN=(0,h.useMemo)(()=>eu.filter(e=>!!e.name).sort((e,t)=>t.score-e.score).map(e=>{let t=j.z[eS];return t?{...e,name:t(e.name)}:e}),[eu,eS]),[ek,eT]=(0,h.useState)(g),[eM,eE]=(0,h.useState)({content:void 0,costTime:0,thinking:!1}),e_=(0,d.A)(()=>{ep([]),eE({content:void 0,costTime:0,thinking:!1}),em.current=null,eh.current=!1}),{run:eF}=(0,L.A)(e=>{eE(e)},{wait:200,trailing:!0,leading:!1}),{run:eD,abort:eR,loading:eO}=(0,E.e)((null==f?void 0:f.teamId)||0,{onSetup:async()=>{eE({content:void 0,costTime:0,thinking:!1})},onError:e=>{let t=(null==e?void 0:e.message)||(null==e?void 0:e.errorExtra)||(0,l.hw)({id:"fail"});em.current=t,(0,T.Cj)(e)||H.Ay.error(t)},onChunk:async e=>{ep(t=>[...t,e])},onReasoning:eF,onReasoningCompleted:e=>{eE(t=>({...t,...e}))},onEvent:(e,t)=>{"thread.completed"===e&&(Z.current=null==t?void 0:t.generationRecordId)},manual:!0,startPoint:"```json\n[",acceptCompletedChunk:!1}),eP=(0,D.A)(),eL=(0,d.A)(()=>{eh.current=!0,eR()}),e$=(0,d.A)(e=>{e_();try{eL()}catch{}null==c||c(e),null==u||u()}),eB=(0,d.A)(e=>{var t,i;e.preventDefault(),e.stopPropagation(),(null==(i=R.k.getState().projectGuidelinesMap)||null==(t=i[y])?void 0:t[0])?F.Qm.getState().openEndpointDesignGuideline({type:"overview"}):eP(),e$()}),ez=(0,d.A)(async()=>{var e,t,a;(0,_.B)("ai_naming_gen_click",{apiId:z,model:null==er?void 0:er.name,taskId:Y.current,provider:null==er||null==(e=er.aiLlmProvider)?void 0:e.name,cot:+(null!=eM&&!!eM.content),isAddMsg:+!!ek}),e_();let n=performance.now();try{await eD({type:"SUGGEST_API_PARAMETER_NAME",uniqId:(0,q.Z0)(),projectId:(null==f?void 0:f.id)||0,aiLlmModelId:ee,taskId:Y.current,data:(0,O.Oy)({USER_INPUT_MESSAGE:ek||"",ORIGINAL_NAME:(null==p?void 0:p.name)||"",PARAM_CONTEXT:JSON.stringify(i,null,2)})})}finally{(0,_.B)("ai_naming_start_result",{apiId:z,model:null==er?void 0:er.name,provider:null==er||null==(t=er.aiLlmProvider)?void 0:t.name,taskId:Y.current,cot:+(null!=eM&&!!eM.content),result:+!em.current,reason:em.current||null}),(0,_.B)("ai_naming_gen_result",{apiId:z,model:null==er?void 0:er.name,provider:null==er||null==(a=er.aiLlmProvider)?void 0:a.name,cot:+(null!=eM&&!!eM.content),result:+!em.current,taskId:Y.current,reason:eh.current?"manualStop":em.current?em.current:"finish",duration:Math.round(performance.now()-n)})}}),eU=(0,d.A)(e=>{var t;W.current=!0,eL(),null==r||r(e),(0,_.B)("ai_naming_apply_click",{apiId:z,taskId:Y.current,model:null==er?void 0:er.name,cot:+(null!=eM&&!!eM.content),provider:null==er||null==(t=er.aiLlmProvider)?void 0:t.name,oldName:null==p?void 0:p.name,newName:null==e?void 0:e.name,newNameScore:null==e?void 0:e.score})});return(0,P.A)({ref:G,focusOptions:{cursor:"end"}}),(0,$.A)(()=>{(0,_.B)("use_ai_naming_popup",{apiId:z})}),(0,B.A)(()=>{Z.current&&(0,M.VA)(Z.current,W.current?"ACCEPTED":"REJECTED")}),(0,n.jsx)(V.Ay,{...v,className:U()(ef,a),width:560,onCancel:e$,title:(0,l.hw)({id:"ai.features.function.feature.AI_NAMING.name"}),footer:null,centered:!0,destroyOnClose:!0,maskClosable:!1,children:(0,n.jsxs)("div",{className:eg,children:[(0,n.jsx)("div",{className:ey,children:(0,n.jsx)(l.sA,{id:"ai.features.function.feature.AI_NAMING.description",values:{guideline:(0,n.jsx)("a",{className:"inline text-underline text-unset",href:"",onClick:eB,children:(0,l.hw)({id:"api.designGuideline"})}),learnMore:(0,n.jsx)("a",{className:"inline text-underline text-unset",href:null==J||null==(t=J.help)?void 0:t.index,target:"_blank",rel:"noreferrer",children:(0,l.hw)({id:"learnMore"})})}})}),(0,n.jsx)("div",{className:U()("mt-3",ex),children:(0,n.jsxs)("div",{className:U()("flex flex-col",eA),children:[(0,n.jsx)("div",{className:"py-3",children:(0,n.jsx)(K.A.TextArea,{ref:G,autoFocus:!0,value:ek,onChange:e=>eT(e.target.value),onPressEnter:e=>{e.preventDefault(),eO||ez()},bordered:!1,placeholder:(0,l.hw)({id:"ai.naming.placeholder"}),style:{paddingTop:0,paddingBottom:0,paddingLeft:12,paddingRight:12,minHeight:68,maxHeight:120},autoSize:{}})}),(0,n.jsxs)("div",{style:{paddingLeft:6,paddingRight:6,paddingBottom:6},className:"flex flex-row-reverse items-center justify-between gap-2",children:[eO?(0,n.jsx)(k.f,{onClick:eL}):(0,n.jsx)(N.f,{onClick:ez}),!!(null==Q?void 0:Q.length)&&(0,n.jsx)(w.A,{showArrow:!1,className:U()(ej,"truncate"),showSearch:!1,overlayWidth:120,teamId:el,defaultValue:ea,value:X,onChange:et,optionRender:e=>{var t;return(null==e||null==(t=e.context)?void 0:t.isBackFill)?(0,n.jsx)("span",{className:"truncate",style:{color:"var(--ui-text-color-tertiary)",fontSize:"var(--ui-font-size-sm)",fontWeight:"var(--ui-font-weight-400)"},children:e.model.name}):(0,S.lV)(e)},modelsProcessor:ei,models:Q,iconRender:(e,t)=>e.id?(0,S.Rd)(e,t):(0,S.Rd)({...e,icon:en},t)})]})]})}),void 0!==eM.content&&(0,n.jsx)(I.A,{className:"mt-6",reasoningContent:eM,contentClassName:ew}),!!(null==eN?void 0:eN.length)&&(0,n.jsx)(n.Fragment,{children:!!eN.length&&(0,n.jsxs)("div",{className:"mt-2 flex flex-col gap-2",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center gap-2",children:[(0,n.jsx)("span",{className:"truncate",children:(0,l.hw)({id:"ai.naming.results.leading"})}),(0,n.jsx)(x.A,{className:U()(eb,"flex-shrink-0"),size:"small",value:eS,onChange:eC,placeholder:(0,l.hw)({id:"ai.naming.style"}),optionLabelProp:"backFill",optionsProcessor:eI})]}),(0,n.jsx)("div",{className:"flex flex-col gap-2",children:eN.map((e,t)=>{let i=`${e.name}-${t}`;return(0,n.jsx)(es,{result:e,onApply:eU},i)})})]})}),eO&&!(null==eM?void 0:eM.thinking)&&(0,n.jsx)(eo,{className:"mt-2"}),!eO&&!!Z.current&&(0,n.jsxs)("div",{className:"flex justify-between items-center gap-2 mt-3 flex-wrap",style:{fontSize:"var(--ui-font-size-sm)",fontWeight:"var(--ui-font-weight-400)"},children:[(0,n.jsx)(b.u,{recordId:Z.current,className:"flex-shrink-0",title:(0,n.jsx)("div",{className:"truncate",style:{color:"var(--ui-text-color-tertiary)"},children:(0,l.hw)({id:"ai.naming.results.feedback"})})}),(0,n.jsxs)("div",{style:{color:"var(--ui-text-color-placeholder, var(--ui-fill-6))"},children:[(0,n.jsx)(m.A,{size:12,type:"icon-lightbulb"}),(0,n.jsx)("span",{className:"ml-1",children:(0,l.hw)({id:"ai.feedback.quality.notice"})})]})]})]})})},eC="dropdownOverlay-G22RLK",eI=e=>{e.stopPropagation(),e.preventDefault()},eN=e=>{let t,{rowContext:i,...a}=e,g=null==i?void 0:i.name,x=(0,o.Ay)(e=>{var t,i;return null==(i=e.projectSetting)||null==(t=i.projectSettingData)?void 0:t.templateParameters}),A=(0,s.y)(e=>e.aiFeatured&&e.aiEnabled&&e.aiNamingEnabled),j=!!(null==x?void 0:x.find(e=>e.name===g)),b=!!g&&"__[AI_NAMING_PLACEHOLDER]__"!==g&&!j,w=(0,h.useMemo)(()=>[...A?[{key:"aiNaming",label:(0,l.hw)({id:"ai.features.function.feature.AI_NAMING.name"}),icon:(0,n.jsx)(m.A,{type:"icon-AiStarLine"})}]:[],{key:"openCommonParameters",label:j?(0,l.hw)({id:"ai.naming.commonParameters.select.other"}):(0,l.hw)({id:"ai.naming.commonParameters.select"}),icon:(0,n.jsx)(m.A,{type:"icon-CommonParameters"})},...b?[{key:"addCommonParameters",label:(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)(l.sA,{id:"ai.naming.commonParameters.add",values:{name:g?(0,n.jsxs)("div",{className:"flex items-center mx-1",children:[(0,n.jsx)("div",{children:'"'}),(0,n.jsx)("div",{style:{maxWidth:128},className:"truncate",children:g}),(0,n.jsx)("div",{children:'"'})]}):""}})}),icon:(0,n.jsx)(m.A,{type:"icon-CommonParametersAdd"})}]:[]],[A,j,b,g]),S=(0,f.T)(e=>e.setCommonParametersOpen),C=(0,f.T)(e=>e.onNameChange),I=(t=(0,y.bq)(),(0,d.A)(e=>t.show(eS,null!=e?e:{}))),N=c.A.useFormInstance(),{openModal:k}=(0,v.useModel)("globalModal",e=>({openModal:e.openModal})),T=(0,d.A)(e=>{null==C||C(e.name)}),{ensureAiConfigured:M}=(0,r.A)(),E=(0,s.y)(e=>e.endpointId),_=(0,d.A)(M(()=>{let e=I({values:N.getFieldsValue(),rowContext:i,onApply:t=>{T(t),e.close()}})},{fromFeature:"aiNaming",apiId:E})),F=(0,d.A)(()=>{null==S||S(!0)}),D=(0,d.A)(()=>{k({moduleName:11,moduleProps:{rowToAdd:i},modalProps:{width:960}})}),R=(0,d.A)(e=>{switch(eI(e.domEvent),e.key){case"aiNaming":_();return;case"openCommonParameters":F();return;case"addCommonParameters":D();return}});return(0,n.jsx)(u.A,{overlayClassName:eC,destroyPopupOnHide:!0,dropdownRender:e=>(0,n.jsx)("div",{onMouseUp:eI,onClick:eI,children:e}),menu:{onMouseDown:e=>e.stopPropagation(),onClick:R,items:w},children:(0,n.jsx)(p.A,{type:"text",size:"small",icon:(0,n.jsx)(m.A,{size:12,type:"icon-AiStarMore"}),onClick:eI,onMouseDown:eI,...a})})}},730367:function(e,t,i){"use strict";i.d(t,{R:()=>N});var a=i(838e3),n=i(140049),l=i(838487),r=i.n(l),s=i(641486),o=i(531579);let d="templateParameterDescriptionRendererWrapper-IdP381",c="templateParameterDescriptionRendererInput-iMjGbK",u="templateParameterDescriptionRendererIcon-nrgE2c",p="expandButton-tUfViG",m="autoCompleteOption-yl3T6G",h="autoCompleteDivider-swhDVd",v="autoCompleteTemplateEntry-J35mVx";var f=i(820182),g=i(838062),y=i(458184),x=i(764007),A=i(671466),j=i(689368),b=i(740565);i(684795);var w=i(618487),S=i(698879);let C=f.A.TextArea;function I(e){let{children:t,keyword:i,onSelect:l,onBlur:I,value:N,onChange:k,...T}=e,[M,E]=(0,s.useState)(!1),[_,F]=(0,s.useState)(!1),[D,R]=(0,s.useState)(""),O=(0,S.A)({visible:_}),{openModal:P}=(0,w.useModel)("globalModal",e=>({openModal:e.openModal})),L=(0,j.Ay)(e=>{var t;return null==(t=e.projectSetting.projectSettingData)?void 0:t.templateParameters}),$=(0,s.useMemo)(()=>{if(!i||!L)return null;let e=L.find(e=>e.name===i);return(null==e?void 0:e.description)?e:null},[L,i]),B=(0,s.useMemo)(()=>!M||N?[]:$?[{value:$.description||"",label:(0,a.jsx)("div",{className:m,children:$.description})}]:[],[M,N,$]),z=(0,n.A)(e=>(0,a.jsxs)("div",{children:[e,B.length>0&&(0,a.jsx)("div",{className:h}),(0,a.jsxs)("div",{className:v,onMouseDown:e=>{e.preventDefault()},onClick:()=>{P({moduleName:11,modalProps:{width:960}})},children:[(0,a.jsx)(A.A,{type:"icon-menu-01",size:16,className:"mr-2"}),(0,b.hw)({id:"menu.projectSettings.resource.templateParameter"})]})]})),U=(0,n.A)(e=>{E(!1),null==I||I(e)}),H=(0,n.A)(()=>{E(!0)}),V=(0,n.A)(e=>{null==k||k(e)});return(0,a.jsxs)("div",{className:r()(" w-full h-full absolute",d),onBlur:U,...T,children:[(0,a.jsx)(g.A,{value:N,onChange:V,onFocus:H,options:B,dropdownRender:z,children:(0,a.jsx)(f.A.TextArea,{autoSize:{minRows:1,maxRows:7},className:r()(c)})}),(0,a.jsx)(y.A,{className:p,style:{display:M?"block":"none"},onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},onClick:()=>{R(N||""),F(!0)},type:"text",size:"small",icon:(0,a.jsx)(A.A,{type:"icon-operate-expand-small",className:"hover:app-text-primary-high",color:"var(--ui-text-color-secondary)",size:12})}),(0,a.jsx)(o.Z,{onboardingTooltip:M,className:r()("absolute",u),style:{opacity:M?1:void 0},type:"DESCRIPTION",keyword:i,onSelect:l}),(0,a.jsx)(x.Ay,{title:(0,b.hw)({id:"api.parameterLabel.description"}),open:_,onOk:()=>{null==k||k(D),F(!1)},onCancel:()=>{F(!1)},size:"720",maskClosable:!1,destroyOnClose:!0,children:(0,a.jsx)(C,{ref:O,value:D,rows:15,onChange:e=>R(e.target.value),style:{resize:"none"}})})]})}let N=(e,t,i)=>{let{onChange:n,onSubmit:l,value:r}=i,{table:s,row:o}=t.getContext(),d=s.getAllColumns().find(e=>{var t;return(null==(t=e.columnDef.meta)?void 0:t.dataIndex)==="name"}),c=o.getAllCells().find(e=>e.id.endsWith("_name")),u=d&&c?null==c?void 0:c.getValue():"";return(0,a.jsx)(I,{keyword:u,value:r,onChange:e=>{null==n||n(e),null==l||l(e)},onSelect:e=>{null==n||n(e.description),null==l||l(e.description)},onBlur:()=>{null==l||l(r)}})}},302783:function(e,t,i){"use strict";i.d(t,{w:()=>b,v:()=>j});var a=i(838e3),n=i(740565),l=i(578396),r=i(838487),s=i.n(r),o=i(140049),d=i(52367),c=i(820182),u=i(125464),p=i(641486),m=i(88316),h=i(626026),v=i(66011),f=i(839402);let g="input-mBsI2i",y="suffixIcon-yEqwSE",x="autoComplete-Kqj_GB",A=e=>{let{className:t,suffixIcon:i,rowContext:n,onChange:l,...r}=e,[A,j]=(0,p.useState)(!1),{templateParameters:b}=(0,v.Z)(),[w,S]=(0,p.useState)(!0),C=(0,o.A)(e=>{if((null==l||l(e),e&&b)&&b.some(t=>t.name.startsWith(e)))return void j(!0);j(!1)}),I=(0,p.useCallback)((e,t)=>!w||!!e&&"string"==typeof(null==t?void 0:t.label)&&t.label.startsWith(e),[w]),N=(0,o.A)(e=>{S(!1),j(e)}),{run:k}=(0,d.A)(e=>{j(e)},{wait:150,trailing:!1,leading:!0}),T=(0,o.A)(e=>{if(e){let e=r.value;if(!e||!b||!b.some(t=>t.name.startsWith(e)))return}k(e)});return(0,a.jsx)(h.y,{...(0,u.A)(r,["placeholder","onSelect"]),onChange:C,open:A,onDropdownVisibleChange:T,className:s()(x,t),filterOption:I,onClick:()=>S(!0),onSelect:e=>{var t;null==r||null==(t=r.onSelect)||t.call(r,e)},children:(0,a.jsx)(c.A,{...(0,u.A)(r,["value","onSelect"]),className:g,onKeyDown:e=>{if("Enter"===e.key){var t;null==r||null==(t=r.onKeyUp)||t.call(r,e)}},suffix:(0,a.jsxs)(m.s,{value:{commonParametersOpen:A,setCommonParametersOpen:N,onNameChange:C},children:[i,(0,a.jsx)(f.A,{rowContext:{...n,name:r.value},className:y})]})})})},j=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(t,i,r)=>{let{onChange:o,value:d,onSubmit:c,placeholder:u,style:p,className:m,disabled:h,onPaste:v}=r,f=!1;return(0,a.jsx)(l.ky.Consumer,{children:t=>{var r,g;let y=(0,l.nq)(t);return(0,a.jsx)(A,{style:p,className:s()(m),rowContext:{...null==(g=i.getContext())||null==(r=g.row)?void 0:r.original,name:d},value:d,disabled:h,onBlur:()=>c(d),onKeyDown:()=>f=!0,onKeyUp:()=>f=!1,onChange:e=>{o(e),f||c(e)},placeholder:u,onSelect:t=>{let{table:a,row:l}=i.getContext();(t.description||t.title)&&Promise.resolve().then(()=>{let i=e=>{if(a.getAllColumns().find(e=>{var t;return(null==(t=e.columnDef.meta)?void 0:t.dataIndex)==="description"})){let l=e.getAllCells().find(e=>e.id.endsWith("description"));if(l&&!l.getValue()){var i;let e=[t.title,t.description].filter(Boolean).join((0,n.hw)({id:"projectSetting.templateParameter.split"}));null==(i=a.options.meta)||i.updateCellValue(e,l)}}};if(e.handleRepeat){let e=a.options.data.find((e,i)=>i!==l.index&&e.name===t.name);if(null==e?void 0:e.id)return void i(a.getRow(e.id))}i(l)})},bordered:!0,variant:"editable-table",size:"small-plus",status:null==y?void 0:y.status,suffixIcon:null==y?void 0:y.suffix,onPaste:v})}})}},b=j()},348791:function(e,t,i){"use strict";i.d(t,{Fo:()=>h,KZ:()=>f,b:()=>v,fQ:()=>g});var a,n=i(838e3),l=i(169508),r=i(740565),s=i(838487),o=i.n(s),d=i(671466),c=i(641486),u=i(325475),p=i(808034),m=i(618487),h=((a={}).SelfHostedRunner="self-hosted-runner",a.GeneralRunner="general-runner",a.PerformanceTestingRunner="performance-testing-runner",a.RequestProxy="request-proxy",a.TeamPublicResource="team-public-resource",a.Schemas="schemas",a.VaultProviders="vault-providers",a.Responses="responses",a.Scripts="scripts",a.DatabaseConnections="database-connections",a.SocketPacketScripts="socket-packet-scripts",a.TeamDefaultProjectSettings="team-default-project-settings",a.APIFields="api-fields",a.MockCustomMatching="mock-custom-matching",a.AdvancedSettings="advanced-settings",a.TeamVariables="team-variables",a);let v=(0,u.vt)((e,t)=>({activeKey:"general-runner",setActiveKey:t=>{e({activeKey:t})}})),f={"self-hosted-runner":(0,r.hw)({id:"team.runner.selfHostedRunner"}),"general-runner":(0,r.hw)({id:"team.runner.generalRunner"}),"performance-testing-runner":(0,r.hw)({id:"team.runner.loadTestRunner"}),"request-proxy":(0,r.hw)({id:"requestProxy.agents"}),"team-public-resource":(0,r.hw)({id:"team.runner.teamPublicResource"}),schemas:(0,r.hw)({id:"team.runner.schemas"}),"vault-providers":(0,r.hw)({id:"team.runner.vaultProviders"}),responses:(0,r.hw)({id:"team.runner.responses"}),scripts:(0,r.hw)({id:"team.runner.scripts"}),"database-connections":(0,r.hw)({id:"team.runner.databaseConnections"}),"socket-packet-scripts":(0,r.hw)({id:"team.runner.socketPacketScripts"}),"team-default-project-settings":(0,r.hw)({id:"team.runner.teamDefaultProjectSettings"}),"api-fields":(0,r.hw)({id:"team.runner.APIFields"}),"mock-custom-matching":(0,r.hw)({id:"team.runner.mockCustomMatching"}),"advanced-settings":(0,r.hw)({id:"team.runner.advancedSettings"}),"team-variables":(0,r.hw)({id:"team.variable.menu.label"})};function g(e){let{activeMenuKey:t}=e,{activeKey:i,setActiveKey:a}=v(),r=(0,m.useModel)("clientConfig",e=>e.dynamicConfig.isScheduledTaskEnabled),s=(0,c.useMemo)(()=>[{key:"self-hosted-runner",label:f["self-hosted-runner"],children:[{key:"general-runner",label:f["general-runner"],icon:(0,n.jsx)(d.A,{type:"icon-chart-donut"})},{key:"request-proxy",label:f["request-proxy"],icon:(0,n.jsx)(d.A,{type:"icon-database-03"})},{key:"performance-testing-runner",label:f["performance-testing-runner"],icon:(0,n.jsx)(d.A,{type:"icon-line-chart-up"})}],visible:r},{key:"team-public-resource",label:f["team-public-resource"],children:[{key:"team-variables",label:f["team-variables"],icon:(0,n.jsx)(d.A,{type:"icon-Variable"})},{key:"schemas",label:f.schemas,icon:(0,n.jsx)(d.A,{type:"icon-Schema"})},{key:"responses",label:f.responses,icon:(0,n.jsx)(d.A,{type:"icon-zap"})},{key:"scripts",label:f.scripts,icon:(0,n.jsx)(d.A,{type:"icon-Script"})},{key:"database-connections",label:f["database-connections"],icon:(0,n.jsx)(d.A,{type:"icon-ShieldKeyhole"})},{key:"vault-providers",label:f["vault-providers"],icon:(0,n.jsx)(d.A,{type:"icon-Shield"})},{key:"socket-packet-scripts",label:f["socket-packet-scripts"],icon:(0,n.jsx)(d.A,{type:"icon-Function"}),visible:!l.T0}]},{key:"team-default-project-settings",label:f["team-default-project-settings"],children:[{key:"api-fields",label:f["api-fields"],icon:(0,n.jsx)(d.A,{type:"icon-api1"})},{key:"mock-custom-matching",label:f["mock-custom-matching"],icon:(0,n.jsx)(d.A,{type:"icon-mcok"})},{key:"advanced-settings",label:f["advanced-settings"],icon:(0,n.jsx)(d.A,{type:"icon-Setting"})}]}].filter(e=>!1!==e.visible),[r]);return(0,c.useEffect)(()=>{Object.values(h).includes(t)&&a(t)},[t,a]),(0,n.jsx)("div",{className:p.A.menus,children:s.map(e=>{let{key:t,label:l,children:r}=e;return(0,n.jsxs)(c.Fragment,{children:[(0,n.jsx)("div",{className:p.A.title,children:l}),r.map(e=>{var t;return!1===e.visible?null:(0,n.jsxs)("div",{className:o()("flex justify-start gap-1",p.A.item,{[p.A.active]:i===e.key}),onClick:()=>a(e.key),children:[(0,n.jsx)("div",{children:null!=(t=e.icon)?t:null}),e.label,(0,n.jsx)("div",{className:o()("ml-auto hidden items-center justify-center",p.A.arrow),children:(0,n.jsx)(d.A,{type:"icon-right-sm",size:16})})]},e.key)})]},t)})})}},201679:function(e,t,i){"use strict";i.d(t,{uW:()=>s,y$:()=>d,zN:()=>o});var a=i(169508),n=i(496411),l=i(483482),r=i(73586);function s(e){let t=(0,n.Sy)();if(!t)throw Error("TeamId not exist");let i=`/main/teams/${t}?tab=resources`+(e?`&menu=${e}`:""),s=`#${i}`;a.xl?(r.gc.send("TabChannel.ActivateMainTab",{hashPath:s}),r.gc.send("TabChannel.TabToolbarAction","TabToolbarAction.ToTeamResource",{teamId:t,menu:e,hashPath:s})):(0,l.dG)(i)}function o(){s("general-runner")}function d(){s("request-proxy")}i(348791)},11953:function(e,t,i){"use strict";i.d(t,{A:()=>s});var a=i(526838),n=i(161178),l=i(740565),r=i(995829);class s extends r.A{}(0,a._)(s,"defaultProps",{options:n.Gr.map(e=>({label:(0,l.hw)({id:e.labelLocale}),value:e.value,disabled:1===e.value})),placeholder:(0,l.hw)({id:"component.memberRoleSelect.placeholder"})})},670522:function(e,t,i){"use strict";i.d(t,{g:()=>l});var a=i(496411),n=i(766e3);function l(){return{id:0,name:"",projectId:(0,a.MJ)()||0,type:"STATIC",relatedId:0,relatedType:"TEST_SCENARIO",folderId:0,ordering:0,updatedAt:new Date().toISOString(),createdAt:new Date().toISOString(),creatorId:(0,n.WR)()||0,editorId:(0,n.WR)()||0}}},662932:function(e,t,i){"use strict";i.d(t,{w:()=>l,z:()=>n});var a=i(398380);let n=(0,i(325475).vt)((e,t)=>({runner:void 0,reportDetailMap:new Map,setRunner:t=>e({runner:t}),getRunner:()=>t().runner,cleanRunner:()=>e({runner:void 0}),getReportDetail:e=>t().reportDetailMap.get(e),initReportDetail:(i,a)=>{let n=new Map(t().reportDetailMap);a.runningInBackground=!1,n.set(i,a),e({reportDetailMap:n})},updateReportDetail:(i,n)=>{let l=t().reportDetailMap.get(i);if(!l)return;let r=new Map(t().reportDetailMap);r.set(i,{...l,...(0,a.omitBy)(n,a.isUndefined)}),e({reportDetailMap:r})},setRunningInBackground(e,i){t().updateReportDetail(e,{runningInBackground:i})},removeReportDetail:i=>{let a=new Map(t().reportDetailMap);a.delete(i),e({reportDetailMap:a})},clean:e=>{t().removeReportDetail(e),t().cleanRunner()},abortRunner:async e=>{var i;t().updateReportDetail(e,{runningInBackground:!0}),await (null==(i=t().getRunner())?void 0:i.abort()),t().removeReportDetail(e),t().cleanRunner()}})),l=n.getState},504401:function(e,t,i){"use strict";i.d(t,{h:()=>u});var a=i(838e3),n=i(740565),l=i(202182),r=i(348154),s=i(398380),o=i(641486),d=i(838487),c=i.n(d);function u(e){let{run:t,hiddenText:i,className:d,strokeColor:u="var(--ui-progress-default-color)",initStrokeColor:p=u,minProgress:m=0}=e,{status:h}=t,[v,f]=(0,o.useState)(()=>(0,s.clamp)(m,0,100)),[g,y]=(0,o.useState)(p),x=(0,l.A)(()=>{let e=new Map;return t.collection?(t.collection.items.idx(0).items.all().forEach((t,i)=>{var a;(null==(a=t.metaInfo)?void 0:a.id)&&e.set(t.metaInfo.id,i)}),e):e},[t.collection]);return((0,o.useEffect)(()=>{var e;let i=(0,s.last)((0,s.findLast)(t.stepGroups,e=>!(0,s.isEmpty)(e)));if(i&&(null==(e=i.metaInfo)?void 0:e.id)&&i.cursor){let e=1/i.cursor.cycles,t=((x.get(i.metaInfo.id)||0)+1)/x.size,a=Math.floor((i.cursor.iteration*e+t*e)*100);f((0,s.clamp)(a,v,100)),y(u)}},[t.stepGroups,x]),"done"===h||"abort"===h)?null:(0,a.jsxs)("div",{className:c()(d,"flex gap-2 items-center ml-auto truncate"),children:[(0,a.jsx)(r.A,{type:"circle",width:15,strokeWidth:20,showInfo:!1,percent:v,strokeColor:g,className:"flex items-center justify-center"}),!i&&(0,a.jsx)("div",{children:(0,n.hw)({id:"apiTestReport.runningProgress"},{progress:v})})]})}},391478:function(e,t,i){"use strict";i.d(t,{pg:()=>_,Co:()=>F,Le:()=>D});var a=i(838e3),n=i(720087),l=i(923117),r=i(618487);let s=(0,r.dynamic)({loading:l.A,loader:async()=>{let{ApiTestReportGroup:e}=await Promise.all([i.e("720"),i.e("73034"),i.e("48737"),i.e("87053"),i.e("80232"),i.e("33898"),i.e("72168"),i.e("76066"),i.e("97074"),i.e("48579"),i.e("16336"),i.e("71877"),i.e("51235"),i.e("13996"),i.e("75562"),i.e("37730"),i.e("22246"),i.e("56344"),i.e("17219"),i.e("43390"),i.e("23377")]).then(i.bind(i,750211));return e}}),o=(0,r.dynamic)({loading:l.A,loader:async()=>{let{RunningApiTestCaseGroupReport:e}=await Promise.all([i.e("720"),i.e("73034"),i.e("48737"),i.e("87053"),i.e("80232"),i.e("33898"),i.e("72168"),i.e("76066"),i.e("97074"),i.e("48579"),i.e("16336"),i.e("71877"),i.e("51235"),i.e("13996"),i.e("75562"),i.e("37730"),i.e("22246"),i.e("56344"),i.e("17219"),i.e("43390"),i.e("37914")]).then(i.bind(i,704946));return e}}),d=(0,r.dynamic)({loading:l.A,loader:async()=>{let{RunningApiTestCaseReport:e}=await Promise.all([i.e("720"),i.e("73034"),i.e("48737"),i.e("87053"),i.e("80232"),i.e("33898"),i.e("72168"),i.e("76066"),i.e("97074"),i.e("48579"),i.e("16336"),i.e("71877"),i.e("51235"),i.e("13996"),i.e("75562"),i.e("37730"),i.e("22246"),i.e("56344"),i.e("17219"),i.e("43390"),i.e("44710")]).then(i.bind(i,778013));return e}});var c=i(740565),u=i(900931),p=i(743994),m=i(353748),h=i(984359),v=i(764007),f=i(898358),g=i(538721),y=i(504401),x=i(671466),A=i(641486),j=i(511389);let b="runningProgress-NjYlGk",w="pause-nFixIN";var S=i(794397),C=i(524836),I=i(838487),N=i.n(I);function k(e){let{id:t,reportDetail:i}=e,{theme:n}=(0,A.useContext)(j.Ay),l=(0,p.K)(e=>e.map.get(t)),r=(0,u.R)(e=>e.map.get(t)),s=l||r||i;if(!s)return(0,a.jsx)(x.A,{className:"titleIcon",color:"var(--ui-green-6)",type:"icon-chart-donut",size:f.Ev});let o=(null==n?void 0:n.background)==="dark",d=o?"#4ab793":"#46d6a0",c=o?"#f8587d":"#fc97af",{status:m,stats:h,isTestFlowControl:v}=s;if("done"===m||"abort"===m)return(0,a.jsx)(T,{total:h.steps.total,passed:h.steps.passed,failed:h.steps.failed,passedColor:d,failedColor:c,untestedColor:o?"#444444":"#dddddd",isTestFlowControl:!!v});let g="running"===m?void 0:w;return(null==l?void 0:l.isBulkRun)?(0,a.jsx)(S.A,{indicator:(0,a.jsx)(C.A,{style:{fontSize:16},className:g,spin:!0})}):(0,a.jsx)(y.h,{hiddenText:!0,run:s,minProgress:5,initStrokeColor:"var(--ui-primary-color)",className:N()(b,g),strokeColor:h.steps.failed>0?c:d})}function T(e){let{total:t,passed:i,failed:n,passedColor:l,failedColor:r,untestedColor:s,isTestFlowControl:o}=e,d=o?0:Math.max(t-i-n,0),c=f.Ev,u=50,p=2*Math.PI*40,m=t||1,h=d/m*100,v=i/m*100;return(0,a.jsxs)("svg",{width:c,height:c,viewBox:"0 0 100 100",className:"align-middle",children:[d>0&&(0,a.jsx)("circle",{cx:u,cy:u,r:40,fill:"none",stroke:s,strokeWidth:20,strokeDasharray:`${h/100*p} ${p}`,strokeDashoffset:0,transform:`rotate(-90 ${u} ${u})`}),(i>0||i===t)&&(0,a.jsx)("circle",{cx:u,cy:u,r:40,fill:"none",stroke:l,strokeWidth:20,strokeDasharray:`${v/100*p} ${p}`,strokeDashoffset:-(h/100)*p,transform:`rotate(-90 ${u} ${u})`}),n>0&&(0,a.jsx)("circle",{cx:u,cy:u,r:40,fill:"none",stroke:r,strokeWidth:20,strokeDasharray:`${n/m*100/100*p} ${p}`,strokeDashoffset:-((h+v)/100)*p,transform:`rotate(-90 ${u} ${u})`})]})}function M(e){let{run:t,handleClose:i,handleRelease:n}=e,{runner:l,status:r}=t;if("running"===r){let e=v.Ay.confirm({title:(0,c.hw)({id:"testCaseCloseTitle"}),content:(0,a.jsx)("div",{className:"my-8",children:(0,c.hw)({id:"testCaseRunningTips"})}),okText:(0,c.hw)({id:"testCaseTerminate"}),cancelText:(0,c.hw)({id:"testCaseContinue"}),closable:!0,width:"60vw",icon:null,zIndex:1007,cancelButtonProps:{onClick:()=>{var t;e.destroy(),null==l||null==(t=l.setRunningInBackground)||t.call(l,!0),i()}},onOk(){var e;null==l||null==(e=l.abort)||e.call(l),i(),n()}})}else"pause"===r?i():(i(),n())}function E(e){let{type:t,name:i,report:l,runnerId:r,detailId:c,openRunning:v,reportDetail:y,nodeKey:x,tabState:A="unstable",isResidentCurrentTab:j=!0}=e;j&&(0,m.g0)().unstableTurnsResidentTab();let b=(0,g.$Q)({options:{appendToNext:!0},name:i,key:(0,f.EA)("testReportDetail",c||r),state:A,content:function(e){let{type:t,name:i,nodeKey:l,report:r,runnerId:c,detailId:m,openRunning:v,reportDetail:f}=e;if(!1!==v){var g,y,x,A;let e=(0,p.x)().map.get(c),i=(0,u.o)().map.get(c);if((v||e)&&("testCase"===t||"ENDPOINT_TEST_CASE"===t||"TEST_SUITE"===t))return null==e||null==(y=e.runner)||null==(g=y.setRunningInBackground)||g.call(y,!1),(0,a.jsx)(d,{id:c,activeNodeKey:l});if((v||i)&&"testCaseGroup"===t)return null==i||null==(A=i.runner)||null==(x=A.setRunningInBackground)||x.call(A,!1),(0,a.jsx)(o,{id:c,activeNodeKey:l})}if(r){if("testCase"===t||"ENDPOINT_TEST_CASE"===t||"TEST_SUITE"===t||t===h.F.TEST_CASE_REF)return(0,a.jsx)(n.A,{name:i,report:r,runnerId:c,detailId:m,reportDetail:f,activeNodeKey:l});else if("testCaseGroup"===t)return(0,a.jsx)(s,{name:i,report:r,runnerId:c,detailId:m,reportDetail:f,activeNodeKey:l})}return null}({type:t,name:i,report:l,nodeKey:x,runnerId:r,detailId:c,openRunning:v,reportDetail:y}),tabIcon:(0,a.jsx)(k,{id:r,reportDetail:y}),handleClose:()=>{("testCase"===t||"TEST_SUITE"===t)&&r?M({run:(0,p.x)().map.get(r)||{},handleClose:b,handleRelease:()=>(0,p.x)().release(r)}):"testCaseGroup"===t&&r?M({run:(0,u.o)().map.get(r)||{},handleClose:b,handleRelease:()=>(0,u.o)().delete(r)}):b()}})}function _(e){let{report:t,nodeKey:i}=e;E({report:t,name:t.name,type:t.type,runnerId:t.runnerId,nodeKey:i})}function F(e){let{name:t,report:i,runnerId:a,detailId:n,type:l="testCase"}=e;E({type:l,name:t,report:i,runnerId:a,detailId:n,openRunning:!1})}function D(e){let{name:t,runnerId:i,detailId:a,isResidentCurrentTab:n,type:l="testCase"}=e;E({type:l,name:t,runnerId:i,detailId:a,openRunning:!0,isResidentCurrentTab:n})}},732473:function(e,t,i){"use strict";i.d(t,{He:()=>u,cS:()=>p,pu:()=>c});var a=i(838e3),n=i(181488),l=i(660464),r=i(671466),s=i(449104),o=i(898358),d=i(538721);let c=0,u=-1;function p(e){let{tabState:t="unstable"}=e;(0,d.$Q)({key:s.Et,state:t,content:(0,a.jsx)(n.A,{id:c,testScheduleTaskId:0}),tabIcon:(0,a.jsx)(r.A,{className:"titleIcon",type:"icon-chart-donut",size:o.Ev})}),(0,l.ZF)().fetchTree()}},429944:function(e,t,i){"use strict";i.d(t,{T:()=>a});let a=(0,i(325475).vt)((e,t)=>({activeTabKeyMap:new Map,setActiveTabKey:(i,a)=>{let n=new Map(t().activeTabKeyMap);n.set(i,a),e({activeTabKeyMap:n})},highlightTestCaseMap:new Map,setHighlightTestCase:(i,a)=>{let n=new Map(t().highlightTestCaseMap);n.set(i,a),e({highlightTestCaseMap:n})},clearHighlightTestCase:()=>{e({highlightTestCaseMap:new Map})}}))},88434:function(e,t,i){"use strict";i.d(t,{k:()=>p});var a=i(838e3);i(353748);var n=i(660464),l=i(471504),r=i(398380),s=i(898358),o=i(538721),d=i(923117);let c=(0,i(618487).dynamic)({loading:d.A,loader:async()=>{let{default:e}=await Promise.all([i.e("13397"),i.e("76522")]).then(i.bind(i,833350));return e}});var u=i(429944);async function p(e){let{id:t,tabState:i,showTabKey:d}=e;if(!(0,r.isNumber)(t))return;let p=(0,s.EA)("endpoint",t),m=(0,n.ZF)().getNode(p);m&&(d&&u.T.getState().setActiveTabKey(p,d),(0,o.$Q)({key:p,content:(0,a.jsx)(c,{id:t,nodeKey:p}),tabIcon:(0,a.jsx)(l.mn,{method:m.method}),state:i}))}},225181:function(e,t,i){"use strict";i.d(t,{ob:()=>b,nl:()=>j,xA:()=>A});var a=i(838e3),n=i(898358),l=i(538721),r=i(815430),s=i(740565),o=i(660464),d=i(419857),c=i(551105),u=i(140049),p=i(820182),m=i(743190),h=i(641486),v=i(670522),f=i(550005),g=i(698879);function y(e){let{dataSetId:t,folderKey:i,tabKey:l,type:y,onCreated:x}=e,A=(0,h.useRef)(null),j=(0,h.useRef)(t||0),[w,S]=(0,h.useState)(""),[C,I]=(0,h.useState)(new Set),N=(0,g.A)({delay:200,visible:!t}),[k,T]=(0,h.useState)({...(0,v.g)(),name:"",relatedId:0,relatedType:"PUBLIC",type:y||"STATIC",isNew:!t,id:t||0}),M=(0,o.Ck)(e=>k.id?e.treeNodeMap.get((0,n.EA)("TEST_DATA_SET",k.id)):void 0),E=(0,u.A)(async()=>{let e=await (0,c.jM)(j.current);T(e.data),S(e.data.name||(0,s.hw)({id:"untitled"}))});(0,h.useEffect)(()=>{t&&E()},[t,E]),(0,h.useEffect)(()=>{M&&S(M.name)},[M]);let _=(0,u.A)(async()=>{await (0,c.YT)(k.id,{name:w||(0,s.hw)({id:"untitled"})})}),F=(0,u.A)(async()=>{let{getLastNewOrdering:e}=(0,o.ZF)(),t=i?(0,n.oA)(i):0,a=await (0,c.b7)({folderId:t,ordering:i?e(i):0,name:w||(0,s.hw)({id:"untitled"}),relatedId:0,relatedType:"PUBLIC",type:y||"STATIC"});return j.current=a.data.id,a.data.id});return(0,h.useEffect)(()=>{b(l,C.size>0)},[l,C]),(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"flex-none h-12 flex items-center justify-end gap-2 px-5",children:[(0,a.jsx)(p.A,{ref:N,value:w,className:"underLineInput",onChange:e=>S(e.target.value),onInput:()=>{I(e=>new Set(e).add("TEST_DATA_SET_NAME"))},placeholder:(0,s.hw)({id:"untitled"})},"title"),(0,a.jsx)("div",{ref:A})]}),(0,a.jsx)(m.A,{className:"m-0"}),(0,a.jsx)("div",{className:"p-5 flex-auto overflow-auto flex flex-col h-full",children:(0,a.jsx)(r.A,{relatedId:0,testDataSet:k,saveBtnRef:A,onSave:_,onCreate:F,onChange:e=>{e?I(e=>new Set(e).add("TEST_DATA")):I(e=>{let t=new Set(e);return t.delete("TEST_DATA"),t})},onQueryTestData:e=>(0,d.Nw)(e.id),onCreateTestData:e=>(0,d.Fh)({...e,relatedType:3}),onUpdateTestData:e=>(0,d.gx)(e),onRemoveTestData:e=>(0,d.Uw)(e.id),onQueryTestDataList:()=>k.id?(0,d.nd)({dataSetId:k.id}):Promise.resolve([]),onLoadApiTestDataDetail:(0,u.A)(async()=>{k.isNew&&(null==x||x(j.current)),I(new Set),E(),(0,o.ZF)().fetchTestDataTree(),f.X7.clear()})})})]})}i(353748);var x=i(1655);function A(e){let{id:t,name:i,tabState:r="unstable"}=e,s=(0,n.EA)("TEST_DATA_SET",t);(0,l.$Q)({key:s,name:i,state:r,content:(0,a.jsx)(y,{dataSetId:t,tabKey:s}),tabIcon:(0,a.jsx)(x.I,{nodeKey:s,className:"titleIcon"})})}function j(e){let{folderKey:t,type:i}=e,r=(0,n.EA)("newTestDataSet",Date.now());(0,l.$Q)({key:r,name:(0,s.hw)({id:"untitled"}),state:"unstable",content:(0,a.jsx)(y,{tabKey:r,folderKey:t,type:i,onCreated:e=>{let t=(0,n.EA)("TEST_DATA_SET",e);(0,l.RC)(r,{key:t,state:"resident",content:(0,a.jsx)(y,{dataSetId:e,tabKey:t,type:i}),tabIcon:(0,a.jsx)(x.I,{testDataType:i})})}}),tabIcon:(0,a.jsx)(x.I,{testDataType:i})})}function b(e,t){(0,l.qm)(e,t)}},629049:function(e,t,i){"use strict";i.d(t,{KE:()=>T,r$:()=>F,xL:()=>M,wN:()=>_});var a,n=i(140049),l=i(759345),r=i(325475),s=i(838e3),o=i(129271),d=i(325318),c=i(744283),u=i(740565),p=i(828597),m=i(523845);i(276129);var h=i(458184),v=i(671466),f=i(398380),g=i(681081);function y(e){let{id:t,isNewTestCiConfig:i}=e;return(0,s.jsx)(h.A,{onClick:()=>{(0,p.x)().setIsNewTestCiConfig(t,!i)},children:i?(0,u.hw)({id:"testScenario.appCLI.toggleOldVersion"}):(0,u.hw)({id:"testScenario.appCLI.toggleNewVersion"})})}function x(e){let{id:t,readonly:i}=e,a=(0,g.AN)("TEST_SCENARIO_CI_CONFIG"),l=(0,n.A)(async()=>{i||(0,p.x)().setActiveCiConfig(t,{id:-1,token:"",ordering:0,options:{},notificationOptions:a,variableValue:"INITIAL_VALUE",isNew:!0})});return(0,s.jsx)(d.y,{permission:c.o.TEST_SCENARIO_CDU,children:(0,s.jsxs)(h.A,{disabled:i,className:"flex items-center",type:"primary",icon:(0,s.jsx)(v.A,{type:"icon-nav_add",size:16}),onClick:l,children:[(0,u.hw)({id:"new"}),(0,s.jsx)(o.A,{actions:"new",handler:(0,m.J0)(l)})]})})}var A=i(631471),j=i(313254),b=i(857499),w=i(670522),S=i(334821),C=i(232821),I=i(929463),N=i(611298),k=i(335338),T=((a={}).CONTENT="content",a.DATA="data",a.REPORT="report",a.CICD="CICD",a.SETTING="setting",a);let M={content:function(e){let{id:t,readonly:i=!1}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)(j.V,{id:t,readonly:i}),(0,s.jsx)(A.S,{id:t,readonly:i})]})},data:function(e){let{id:t,readonly:i=!1}=e,a=(0,n.A)(async()=>{i||(0,b.d)().setActiveData(t,{...(0,w.g)(),id:-1,relatedId:t,name:"",isNew:!0,ordering:0,relatedType:"TEST_SCENARIO",type:"STATIC"})});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.y,{permission:c.o.TEST_SCENARIO_CDU,children:(0,s.jsx)(h.A,{disabled:i,type:"primary",className:"flex items-center",icon:(0,s.jsx)(v.A,{type:"icon-nav_add",size:16}),onClick:a,children:(0,u.hw)({id:"new"})})}),(0,s.jsx)(o.A,{actions:"new",handler:(0,m.J0)(a)})]})},CICD:function(e){let{id:t,readonly:i=!1}=e,a=(0,p.i)(e=>{let{getIsNewTestCiConfig:i}=e;return i(t)});return(0,f.isBoolean)(a)?a?(0,s.jsx)(y,{isNewTestCiConfig:a,id:t}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(y,{isNewTestCiConfig:a,id:t}),(0,s.jsx)(x,{id:t,readonly:i})]}):(0,s.jsx)(x,{id:t,readonly:i})},setting:function(e){let{id:t,readonly:i=!1}=e,a=(0,n.A)(async()=>{let{postProcessors:e,preProcessors:i}=(0,S.Nw)().getTestScenarioState(t);await (0,C.yo)({id:t,postProcessors:e,preProcessors:i}),I.Ay.success((0,u.hw)({id:"saved"})),(0,k.xY)(t,"SETTING")});return(0,s.jsx)(N.g,{type:"primary",onSave:a,disabled:i})}},E=(0,r.vt)((e,t)=>({activeKeyMap:new Map,setActiveKey:(i,a)=>{let n=new Map(t().activeKeyMap);n.set(i,a),e({activeKeyMap:n})},unsetActiveKey:i=>{let a=new Map(t().activeKeyMap);a.delete(i)&&e({activeKeyMap:a})}})),_=E.getState;function F(e){let t=E(t=>{let{activeKeyMap:i}=t;return i.get(e)||"content"}),i=(0,n.A)(t=>{_().setActiveKey(e,t)});return(0,l.A)(()=>{_().unsetActiveKey(e)}),[t,i]}},332532:function(e,t,i){"use strict";i.d(t,{T:()=>l});var a=i(526838),n=i(179048);class l{static create(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{id:(0,n.A)(),type:e,disable:!1,parameters:{},...t}}constructor(e){var t,i;(0,a._)(this,"id",void 0),(0,a._)(this,"type",void 0),(0,a._)(this,"parentId",void 0),(0,a._)(this,"parent",void 0),(0,a._)(this,"levelConfigs",void 0),(0,a._)(this,"config",void 0),(0,a._)(this,"containIds",void 0),(0,a._)(this,"index",void 0),(0,a._)(this,"depth",void 0),(0,a._)(this,"children",void 0),this.id=e.id,this.config=e.config,null!=(i=(t=this.config).number)||(t.number=e.number),this.parent=e.parent,this.parentId=e.parentId,this.levelConfigs=e.levelConfigs,this.containIds=e.containIds,this.index=e.index,this.depth=e.depth,this.parentId=e.parentId,this.type=e.type,this.children=e.children}}},78289:function(e,t,i){"use strict";i.d(t,{A:()=>l});var a=i(526838),n=i(398380);class l{static initRenderer(e){l.render=(0,n.debounce)((t,i)=>{e(t,i),l.renderIds.clear(),l.modified=!1},0)}needRender(){return l.renderIds.has(this.id)}addToRender(){l.renderIds.add(this.id)}render(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];this.traverseNodeToRoot(e=>e.needRender()?"BREAK":e.addToRender()),l.modified||(l.modified=e),l.render.call(this,l.modified,this.getRootBlock())}reuseUpdate(e){return!this.needRender()&&(this.updateConfig(e),!0)}updateConfig(e){this.id=e.id,this.config=e.config,this.parent=e.parent,this.parentId=e.parentId,this.levelConfigs=e.levelConfigs,this.containIds=e.containIds,this.index=e.index,this.depth=e.depth,this.parentId=e.parentId,this.type=e.type,this.children=e.children}}(0,a._)(l,"render",()=>{}),(0,a._)(l,"renderIds",new Set),(0,a._)(l,"modified",!1)},49946:function(e,t,i){"use strict";let a;i.d(t,{P:()=>f});var n,l,r=i(332532),s=i(984359),o=i(398380),d=i(179048),c=i(864230);let u=Symbol("newBlockFlag");var p=i(506139),m=i(78289),h=i(631890),v=i(334821);n=r.T,l=[class e{open(){this.traverseNodeToRoot(e=>{(0,o.isBoolean)(e.config.isOpen)&&(e.config.isOpen=!0,e.render())})}},class e{addBlocks(e,t){e=[e].flat(),(0,c.E)(e,this.getRootBlock().getMaxNumber()+1);let{selectedIdSet:i}=this.getTestScenarioState();switch(t){case"ABOVE":case"BELOW":this.addBlocksToSibling(e,t),this.updateConfigsByParent(e,this.parent,i);break;case"CHILD_ABOVE":case"CHILD_BELOW":this.addBlocksToChildren(e,t),this.updateConfigsByParent(e,this,i)}}updateConfigsByParent(e,t,i){if(!t)return;let a=t.config.disable;e.forEach(e=>{var n;e.disable||(e.disable=a),e.isNewBlock=u,i.add(e.id),(null==(n=e.children)?void 0:n.length)&&this.updateConfigsByParent(e.children,t,i)})}addBlocksToSibling(e,t){let i=+("ABOVE"!==t),a=this.getDropIndex(this,t);this.levelConfigs.splice(a+i,0,...e),this.render()}addBlocksToChildren(e,t){var i;let a="CHILD_ABOVE"===t?0:this.config.children.length;null==(i=this.config.children)||i.splice(a,0,...e),this.render()}isNewBlock(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config;return setTimeout(()=>delete e.isNewBlock),e.isNewBlock===u}removeBlock(){let{selectedIdSet:e}=this.getTestScenarioState();(0,o.pull)(this.levelConfigs,this.config),e.delete(this.id),this.clearBlock(),this.render(),this.children&&(this.children.forEach(e=>e.removeBlock()),this.children=[])}replaceBlock(e){this.addBlocks(e,"BELOW"),this.removeBlock()}clearBlock(){}removeSelectedBlocks(){let{blockMap:e,selectedIdSet:t}=this.getTestScenarioState();t.forEach(t=>{let i=e.get(t);null==i||i.removeBlock()})}duplicateBlocks(){let e=[],t=this.getTestScenarioState().blockMap,i=this.getDuplicateConfig(t,t=>(e.push(t.id),t));return this.addBlocks(i,"BELOW"),e}duplicateBlockConfig(e){let t=(0,o.cloneDeep)((0,o.omit)(this.config,"children"));do t.id=(0,d.A)();while(e.has(t.id));return t}getDuplicateConfig(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e;return function i(a){let n=a.duplicateBlockConfig(e);return a.config.children&&(n.children=a.children.map(i)),t(n)}(this)}getSelectedDuplicateConfig(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e,i=[];return this.traverseBlocks(a=>{var n;if(!(!a.hasSelected()||a.isBlockType(s.F.ELSE)&&!(null==(n=a.getIfBlock())?void 0:n.hasSelected())||a.isRootBlock()))return i.push(a.getDuplicateConfig(e,t)),"BREAK"}),i}updateParameters(e){this.config.parameters={...this.config.parameters,...e}}updateBlock(){}updateBlocks(){this.traverseBlocks(e=>e.updateBlock())}},class e{get dndAvailable(){return!0}dropTo(e,t){if(this.canDropTo(e,t))switch(this.drag(),t){case"ABOVE":case"BELOW":this.dropToSibling(e,t),this.updateBlockConfigByParent(e.parent);break;case"CHILD_ABOVE":case"CHILD_BELOW":this.dropToChildren(e,t),this.updateBlockConfigByParent(e)}}updateBlockConfigByParent(e){(null==e?void 0:e.config.disable)&&this.toggleDisable(!0)}drag(){let e=this.levelConfigs.indexOf(this.config);this.levelConfigs.splice(e,1),this.render()}getDropIndex(e,t){return this.levelConfigs.indexOf(this.config)}dropToSibling(e,t){var i;let a=+("ABOVE"!==t),n=e.getDropIndex(this,t);e.levelConfigs.splice(n+a,0,this.config),this.levelConfigs=e.levelConfigs,null==(i=e.parent)||i.render()}dropToChildren(e,t){let i="CHILD_ABOVE"===t?0:e.config.children.length;e.config.children.splice(i,0,this.config),this.levelConfigs=e.config.children,e.render()}getZIndex(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return 2*this.depth+e}canDropTo(e,t){if(!e)return!1;switch(t){case"ABOVE":case"BELOW":case"CHILD_ABOVE":case"CHILD_BELOW":return!this.containIds.has(e.id)}return!1}},class e{hasError(){return!1}hasDescendantError(){if(0===this.children.length)return!1;let e=!1;return this.traverseBlocks(t=>t.hasError()&&!t.isDisable()&&this!==t?(e=!0,"BREAK"):p.IN),e}},class e{getSelectState(){let{selectedIdSet:e}=this.getTestScenarioState();if(this.children.length>0){this.containIds.delete(this.id);let t=[...this.containIds];this.containIds.add(this.id);let i=!!t.length&&t.every(t=>e.has(t)),a=!i&&t.some(t=>e.has(t));return{selectedAll:i,indeterminate:a}}return{selectedAll:e.has(this.id),indeterminate:!1}}setSelectable(e){this.config.selectable=e}isSelectable(){return!1!==this.config.selectable}hasSelected(){return this.getTestScenarioState().selectedIdSet.has(this.id)}clearSelected(){this.getTestScenarioState().selectedIdSet.clear()}toggleSelect(e){if(e===this.hasSelected())return;let{selectedIdSet:t}=this.getTestScenarioState();e?t.add(this.id):t.delete(this.id),this.render(!1)}onIndeterminate(){}toggleSelectAll(e){var t,i,a;let{selectedIdSet:n}=this.getTestScenarioState();this.traverseBlocks(t=>t.toggleSelect(e)),e?null==(t=this.parent)||t.traverseNodeToRoot(e=>e.children.every(e=>{let{id:t}=e;return n.has(t)})?e.toggleSelect(!0):(e.onIndeterminate(),"BREAK")):(null==(i=this.parent)||i.traverseNodeToRoot(e=>e.toggleSelect(!1)),null==(a=this.parent)||a.children.forEach(e=>{e.isSelectable()||e.toggleSelect(!1)}))}getSelectedCount(){let{selectedIdSet:e}=this.getTestScenarioState(),t=+e.has(h.tP);return e.size-t}},class e{traverseNodeToRoot(e){let t=this;for(;t&&"BREAK"!==e(t);){;t=t.getParentBlock()}}traverseBlocksByType(e,t){this.traverseBlocks(i=>{i.isBlockType(e)&&t(i)})}traverseBlocks(e){!function t(i){"BREAK"!==e(i)&&i.children.forEach(t)}(this)}traverseBlockConfigs(e,t){(0,c.y)(e,t)}filterBlockConfigs(e){return function t(i,a){var n;let l=(0,o.omit)(i.config,"children");return i.config.children&&(l.children=[],i.children.forEach(e=>{t(e,l.children)})),(e(l)||(null==(n=l.children)?void 0:n.length)>0)&&a.push(l),a}(this,[])}getChildrenConfigs(){var e;return null!=(e=this.config.children)?e:[]}getPrevBlock(){var e;return null==(e=this.parent)?void 0:e.children[this.index-1]}getNextBlock(){var e;return null==(e=this.parent)?void 0:e.children[this.index+1]}getChildBlock(e){return this.children[e]}getFirstChildBlock(){return this.children[0]}getLastChildBlock(){return this.children[this.children.length-1]}getParentBlock(){return this.parent}getRootBlock(){let e;return this.isRootBlock()?this:(this.traverseNodeToRoot(t=>{t.isRootBlock()&&(e=t)}),e||this)}getTestScenarioState(){let{testScenarioId:e}=this.getRootBlock();return(0,v.Nw)().getTestScenarioState(e)}isRootBlock(){return this.id===h.tP}isBlockType(e){return this.type===e}getMaxNumber(){let e=0;return(0,c.y)(this.config.children,t=>{t.number>e&&(e=t.number)}),e}hasModifying(){let e=!1;return this.traverseBlocks(t=>{if(t.config.modifying)return e=!0,"BREAK"}),e}},class e{toggleDisable(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.isDisable();this.traverseBlocks(t=>{t.setDisable(e),t.render()}),e||this.traverseNodeToRoot(e=>{e.setDisable(!1)}),this.render()}setDisable(e){this.config.disable=e}isDisable(){return this.config.disable}getEnableBlockCount(){let e=0;return this.traverseBlocks(t=>{let{config:i}=t;i.disable||(e+=1)}),e-1}},m.A],a=["length","prototype","name"],l.forEach(e=>{Object.getOwnPropertyNames(e).forEach(t=>{a.includes(t)||n.hasOwnProperty(t)||Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t)||Object.create(null))}),Object.getOwnPropertyNames(e.prototype).forEach(t=>{Object.defineProperty(n.prototype,t,Object.getOwnPropertyDescriptor(e.prototype,t)||Object.create(null))})});let f=()=>r.T},98793:function(e,t,i){"use strict";i.d(t,{B:()=>o});var a=i(57875),n=i(984359),l=i(191033),r=i(49946),s=i(332532);class o extends(0,r.P)(){static create(e){return s.T.create(n.F.BREAK,{parameters:(0,l.g)(),...e})}canDropTo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"CHILD_BELOW";switch(t){case"ABOVE":case"BELOW":return this.parentId===e.parentId&&super.canDropTo(e,t)}return!1}hasError(){return this.hasAssertionError()}hasAssertionError(){var e;let{keyVariable:t,operator:i,valueVariable:n,valueVariables:l}=this.config.parameters;if(!t||!i)return!0;let{hasValue:r,hasMultipleValue:s}=null!=(e=a.wo[i])?e:{};return!!r&&!n||!!s&&!l||!1}}},429693:function(e,t,i){"use strict";i.d(t,{l:()=>d});var a=i(766e3),n=i(984359),l=i(398380),r=i(179048),s=i(49946),o=i(332532);class d extends(0,s.P)(){static create(e){return o.T.create(n.F.CUSTOM_HTTP,e)}updateCustomHttp(e){Object.assign(this.config.customHttpRequest,e),this.config.customHttpRequest.editorId=(0,a.WR)(),this.render(!1)}duplicateBlockConfig(e){let t=super.duplicateBlockConfig(e);return t.relatedId=void 0,t.customHttpRequest.id=void 0,t.customHttpRequest.tempId&&(t.customHttpRequest.tempId=(0,r.A)()),t}updateBlockConfig(e){Object.assign(this.config,(0,l.omit)(e,["customHttpRequest"])),e.customHttpRequest&&this.updateCustomHttp(e.customHttpRequest),this.render(!1)}}},96443:function(e,t,i){"use strict";i.d(t,{b:()=>r});var a=i(984359),n=i(49946),l=i(332532);class r extends(0,n.P)(){static create(e){return l.T.create(a.F.DATABASE,{parameters:{},...e})}updateBlockConfig(e){Object.assign(this.config,e),this.render(!1)}}},819241:function(e,t,i){"use strict";i.d(t,{z:()=>r});var a=i(984359),n=i(49946),l=i(332532);class r extends(0,n.P)(){static create(e){return l.T.create(a.F.DELAY,{parameters:{timeout:1e3},...e})}}},891015:function(e,t,i){"use strict";i.d(t,{d:()=>r});var a=i(984359),n=i(49946),l=i(332532);class r extends(0,n.P)(){static create(e){return l.T.create(a.F.ELSE,{isOpen:!0,children:[],...e})}get dndAvailable(){return!1}getIfBlock(){let e=this.getPrevBlock();return(null==e?void 0:e.isBlockType(a.F.IF))?e:null}addToRender(){var e;null==(e=this.getIfBlock())||e.addToRender(),super.addToRender()}toggleSelectAll(e){this.toggleIfBlockSelect(e),super.toggleSelectAll(e)}toggleSelect(e){this.toggleIfBlockSelect(e),super.toggleSelect(e)}toggleIfBlockSelect(e){let t=this.getIfBlock();if(e&&t){let{selectedAll:i,indeterminate:a}=t.getSelectState()||{};i||a||super.toggleSelectAll.call(t,e)}}onIndeterminate(){this.toggleIfBlockSelect(!0)}toggleDisable(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.isDisable();t!==this.isDisable()&&(t||null==(e=this.getIfBlock())||e.toggleDisable(t),super.toggleDisable(t))}}},229970:function(e,t,i){"use strict";i.d(t,{i:()=>o});var a=i(984359),n=i(49946),l=i(332532),r=i(98793),s=i(539355);class o extends(0,n.P)(){static create(e){return l.T.create(a.F.FOR_EACH,{parameters:{array:"",onError:void 0,disableOnError:!1},children:[],isOpen:!0,...e})}getOnErrorBlock(){let e=this.getChildBlock(0);return(null==e?void 0:e.isBlockType(a.F.ON_ERROR))?e:null}addOnErrorBlock(){this.addBlocks(s.h.create(),"CHILD_ABOVE"),this.updateParameters({onError:"break"})}addBreakBlock(){this.addBlocks(r.B.create(),"CHILD_BELOW")}}},317061:function(e,t,i){"use strict";i.d(t,{x:()=>r});var a=i(984359),n=i(49946),l=i(332532);class r extends(0,n.P)(){static create(e){return l.T.create(a.F.GROUP,{children:[],isOpen:!0,...e})}}},642176:function(e,t,i){"use strict";i.d(t,{o:()=>d});var a=i(69712),n=i(984359),l=i(398380),r=i(179048),s=i(49946),o=i(332532);class d extends(0,s.P)(){static create(e){return o.T.create(n.F.HTTP,e)}duplicateBlockConfig(e){let t=super.duplicateBlockConfig(e);return!t.bind&&(t.relatedId=void 0,t.httpApiCase.tempId&&(t.httpApiCase.tempId=(0,r.A)())),t}updateHttpApiCase(e){if(this.config.bind){var t;null==(t=this.getRootBlock())||t.traverseBlocksByType(n.F.HTTP,t=>{t.config.bind&&t.config.relatedId===this.config.relatedId&&(Object.assign(t.config.httpApiCase,e),t.render(!1))})}else Object.assign(this.config.httpApiCase,e),this.render(!1)}updateBlock(){let{apiCaseMap:e}=(0,a.Gu)().apiCase,{bind:t,relatedId:i}=this.config;!this.hasModifying()&&t&&i&&i in e&&(this.config.httpApiCase=(0,l.cloneDeep)(e[i]),this.render(!1))}updateBlockConfig(e){Object.assign(this.config,(0,l.omit)(e,["httpApiCase"])),e.httpApiCase&&this.updateHttpApiCase(e.httpApiCase),this.render(!1)}hasError(){return this.hasDeletedError()}hasDeletedError(){return!!this.config.delete}}},14785:function(e,t,i){"use strict";i.d(t,{l:()=>d});var a=i(57875),n=i(984359),l=i(191033),r=i(49946),s=i(332532),o=i(891015);class d extends(0,r.P)(){static create(e){return s.T.create(n.F.IF,{children:[],isOpen:!0,parameters:(0,l.g)(),...e})}dropTo(e,t){let i=this.getElseBlock();super.dropTo(e,t),null==i||i.dropTo(this,"BELOW")}getDropIndex(e,t){let i=super.getDropIndex(e,t);return e===this.getElseBlock()?i:"BELOW"===t&&this.hasElseBlock()?i+1:i}canDropTo(e,t){var i;return!!super.canDropTo(e,t)&&!(null==(i=this.getElseBlock())?void 0:i.containIds.has(e.id))}duplicateBlocks(){var e;return null==(e=this.getElseBlock())||e.duplicateBlocks(),super.duplicateBlocks()}addElseBlock(){this.addBlocks(o.d.create(),"BELOW")}getElseBlock(){let e=this.getNextBlock();return(null==e?void 0:e.isBlockType(n.F.ELSE))?e:null}hasElseBlock(){return!!this.getElseBlock()}removeBlock(){var e;null==(e=this.getElseBlock())||e.removeBlock(),super.removeBlock()}toggleDisable(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.isDisable();t!==this.isDisable()&&(super.toggleDisable(t),null==(e=this.getElseBlock())||e.toggleDisable(t))}toggleSelectAll(e){var t;e!==this.hasSelected()&&(super.toggleSelectAll(e),null==(t=this.getElseBlock())||t.toggleSelectAll(e))}toggleSelect(e){if(!e&&this.children.every(e=>!e.hasSelected())){var t;null==(t=this.getElseBlock())||t.toggleSelectAll(e)}super.toggleSelect(e)}hasError(){return this.hasAssertionError()}hasAssertionError(){var e;let{keyVariable:t,operator:i,valueVariable:n,valueVariables:l}=this.config.parameters;if(!t||!i)return!0;let{hasValue:r,hasMultipleValue:s}=null!=(e=a.wo[i])?e:{};return!!r&&!n||!!s&&!l||!1}}},309786:function(e,t,i){"use strict";i.d(t,{m:()=>o});var a=i(984359),n=i(49946),l=i(332532),r=i(98793),s=i(539355);class o extends(0,n.P)(){static create(e){return l.T.create(a.F.LOOP,{parameters:{infinity:!1,count:void 0,onError:void 0,disableOnError:!1},children:[],isOpen:!0,...e})}getOnErrorBlock(){let e=this.getChildBlock(0);return(null==e?void 0:e.isBlockType(a.F.ON_ERROR))?e:null}hasError(){return this.hasInfinityError()}hasInfinityError(){var e;if(!this.config.parameters.infinity||this.isDisable())return!1;let t=new Set([a.F.ON_ERROR,a.F.BREAK]);return!(null==(e=this.config.children)?void 0:e.some(e=>{let{type:i,disable:a}=e;return t.has(i)&&!a}))}addOnErrorBlock(){this.addBlocks(s.h.create(),"CHILD_ABOVE"),this.updateParameters({onError:"break"})}addBreakBlock(){this.addBlocks(r.B.create(),"CHILD_BELOW")}}},539355:function(e,t,i){"use strict";i.d(t,{h:()=>r});var a=i(984359),n=i(49946),l=i(332532);class r extends(0,n.P)(){static create(e){return l.T.create(a.F.ON_ERROR,e)}get dndAvailable(){return!1}toggleDisable(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.config.disable;super.toggleDisable(t),null==(e=this.parent)||e.updateParameters({disableOnError:t})}removeBlock(){var e;super.removeBlock(),null==(e=this.parent)||e.updateParameters({onError:void 0,disableOnError:void 0})}}},343797:function(e,t,i){"use strict";i.d(t,{h:()=>r});var a=i(984359),n=i(49946),l=i(332532);class r extends(0,n.P)(){static create(e){return l.T.create(a.F.SCRIPT,{parameters:{},...e})}updateBlockConfig(e){Object.assign(this.config,e),this.render(!1)}}},332671:function(e,t,i){"use strict";i.d(t,{l:()=>d});var a=i(38368),n=i(984359),l=i(398380),r=i(179048),s=i(49946),o=i(332532);class d extends(0,s.P)(){static create(e){return o.T.create(n.F.SOCKET,e)}static linkSocketApiCase(e){(null==e?void 0:e.socketApiCase)&&!e.bind&&(e.relatedId||(e.socketApiCase.tempId=e.id),(0,a.NE)(e.socketApiCase))}updateSocketApiCase(e){if(this.config.bind){var t;null==(t=this.getRootBlock())||t.traverseBlocksByType(n.F.SOCKET,t=>{t.config.bind&&t.config.relatedId===this.config.relatedId&&(Object.assign(t.config.socketApiCase,e),t.render(!1))})}else Object.assign(this.config.socketApiCase,e),this.render(!1)}duplicateBlockConfig(e){let t=super.duplicateBlockConfig(e);return t.socketApiCase.tempId&&(t.socketApiCase.tempId=(0,r.A)()),t}clearBlock(){this.config.bind||(0,a.PU)([this.config.socketApiCase])}updateBlockConfig(e){Object.assign(this.config,(0,l.omit)(e,["socketApiCase"])),e.socketApiCase&&this.updateSocketApiCase(e.socketApiCase),this.render(!1)}constructor(e){super(e),d.linkSocketApiCase(this.config)}}},450579:function(e,t,i){"use strict";i.d(t,{N:()=>r});var a=i(984359),n=i(49946),l=i(332532);class r extends(0,n.P)(){static create(e){return l.T.create(a.F.TEST_CASE_REF,e)}hasError(){return this.hasDeletedError()}hasDeletedError(){return!!this.config.delete}}},631890:function(e,t,i){"use strict";i.d(t,{_t:()=>w,oS:()=>b,tP:()=>j,AM:()=>S});var a=i(398380),n=i(317061),l=i(984359),r=i(98793),s=i(429693),o=i(96443),d=i(819241),c=i(891015),u=i(229970),p=i(642176),m=i(14785),h=i(309786),v=i(539355),f=i(343797),g=i(332671),y=i(450579);let x=new Map([[l.F.IF,m.l],[l.F.HTTP,p.o],[l.F.ELSE,c.d],[l.F.LOOP,h.m],[l.F.FOR_EACH,u.i],[l.F.GROUP,n.x],[l.F.BREAK,r.B],[l.F.DELAY,d.z],[l.F.SOCKET,g.l],[l.F.ON_ERROR,v.h],[l.F.CUSTOM_HTTP,s.l],[l.F.TEST_CASE_REF,y.N],[l.F.SCRIPT,f.h],[l.F.DATABASE,o.b]]);var A=i(179048);let j="root",b="NOT_EXIST_BUILDER_ERR",w="DUPLICATE_NUMBER_ERR";function S(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=n.x.create({id:j,children:[...e]}),r=0,s=new Map,o=new Set,d=[];if(!function e(i,n,l,c,u,p){for(var m;s.has(i.id);)i.id=(0,A.A)();let h=new Set([i.id]),v=function(e){var i;let{id:n,type:l,config:r}=e,s=x.get(l),c=null!=(i=r.number)?i:e.number;if((0,a.isNil)(s))throw Error(b);o.has(c)?d.push(r):o.add(c);let u=t.get(n);return(null==u?void 0:u.reuseUpdate(e))?u:new s(e)}({id:i.id,type:i.type,levelConfigs:l,parent:n,parentId:c,config:i,index:u,containIds:h,depth:p,children:[],number:r++});return null==(m=i.children)||m.forEach((t,a,n)=>{e(t,v,n,i.id,a,p+1).forEach(e=>h.add(e))}),s.set(i.id,v),null==n||n.children.push(v),h}(l,null,[l],"",0,1),d.length>0){let e=Math.max(...o);d.forEach(t=>{t.number=++e})}let c=s.get(j);return c.testScenarioId=i,{blockMap:s,blockRoot:c}}},191033:function(e,t,i){"use strict";i.d(t,{g:()=>p,z:()=>m});var a=i(838e3),n=i(705522),l=i(740565),r=i(57875),s=i(838487),o=i.n(s),d=i(138249),c=i(394741);let u=Object.values(r.wo);function p(){return{keyVariable:"",operator:"equal",valueVariable:""}}function m(e){var t;let{autoFocus:i,editable:s,block:p,readonly:m=!1,direction:h="horizontal",disableDynamicValue:v=!0,className:f,onUpdate:g,onFocus:y}=e,{formatMessage:x}=(0,l.tz)(),[{keyVariable:A,operator:j="equal",valueVariable:b,valueVariables:w},S]=(0,c.K)(p),{label:C="",valuePlaceholder:I="{{variable}}",hasValue:N=!1,hasMultipleValue:k=!1}=null!=(t=r.wo[j])?t:{};return s?(0,a.jsxs)("div",{className:o()("flex flex-1 gap-2 items-center truncate",f),style:{flexDirection:"horizontal"===h?"row":"column"},onClick:y,children:[(0,a.jsx)(n.A,{fixedBorder:!0,disabled:m,autoFocus:i,value:A,placeholder:"{{variable}}",disableDynamicValue:v,onChange:e=>S("keyVariable",e),onBlur:()=>null==g?void 0:g({modified:!0})}),(0,a.jsx)(d.A,{disabled:m,className:"flex-1 whitespace-no-wrap w-full",style:{minWidth:100},value:j,dropdownMatchSelectWidth:!1,placeholder:x({id:"apiTestCase.compare"}),onChange:e=>S("operator",e),options:u,onBlur:()=>null==g?void 0:g({modified:!0})}),N&&(0,a.jsx)(n.A,{fixedBorder:!0,disabled:m,value:b,placeholder:I,disableDynamicValue:v,onChange:e=>S("valueVariable",e),onBlur:()=>null==g?void 0:g({modified:!0})}),k&&(0,a.jsx)(d.A,{disabled:m,className:"flex-1 whitespace-no-wrap w-full",style:{minWidth:100},mode:"tags",open:!1,autoFocus:!0,allowClear:!0,placeholder:I,value:w,onChange:e=>S("valueVariables",e),onBlur:()=>null==g?void 0:g({modified:!0})})]}):(0,a.jsxs)("div",{className:o()("flex items-center flex-1 mr-auto truncate",f),children:[A&&A,C&&(0,a.jsx)("div",{className:"mx-2 whitespace-no-wrap",children:C}),N&&b,k&&(Array.isArray(w)?w.join(", "):w)]})}},506139:function(e,t,i){"use strict";i.d(t,{IN:()=>n,UR:()=>a});let a=0x7fffffff,n="CONTINUE"},394741:function(e,t,i){"use strict";i.d(t,{K:()=>r});var a=i(140049),n=i(398380),l=i(641486);function r(e){let t=e.config.parameters,[i,r]=(0,l.useState)(t);return(0,l.useEffect)(()=>{(0,n.isEqual)(i,t)||r({...t})},[t]),[i,(0,a.A)((i,a)=>{e.updateParameters({[i]:a}),r({...t})})]}},292371:function(e,t,i){"use strict";i.d(t,{R:()=>k,o:()=>N});var a,n=i(600355),l=i(169508),r=i(740565),s=i(526838),o=i(435685),d=i(984359),c=i(269966),u=i(271481);let p=`<HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname="{{name}}" enabled="true">
  <elementProp name="HTTPsampler.Arguments" elementType="Arguments" guiclass="HTTPArgumentsPanel"
    testclass="Arguments" testname="User Defined Variables" enabled="true">
    <collectionProp name="Arguments.arguments">
      {{#bodyData}}
      <elementProp name="" elementType="HTTPArgument">
        <boolProp name="HTTPArgument.always_encode">false</boolProp>
        <stringProp name="Argument.value">{{.}}</stringProp>
        <stringProp name="Argument.metadata">=</stringProp>
      </elementProp>
      {{/bodyData}}
      {{#bodyParameters}}
      <elementProp name="{{name}}" elementType="HTTPArgument">
        <boolProp name="HTTPArgument.always_encode">false</boolProp>
        <stringProp name="Argument.value">{{value}}</stringProp>
        <stringProp name="Argument.metadata">=</stringProp>
        <boolProp name="HTTPArgument.use_equals">true</boolProp>
        <stringProp name="Argument.name">{{name}}</stringProp>
      </elementProp>
      {{/bodyParameters}}
    </collectionProp>
  </elementProp>
  <stringProp name="HTTPSampler.domain">{{domain}}</stringProp>
  <stringProp name="HTTPSampler.port">{{port}}</stringProp>
  <stringProp name="HTTPSampler.protocol">{{protocol}}</stringProp>
  <stringProp name="HTTPSampler.contentEncoding"></stringProp>
  <stringProp name="HTTPSampler.path">{{path}}</stringProp>
  <stringProp name="HTTPSampler.method">{{method}}</stringProp>
  <boolProp name="HTTPSampler.follow_redirects">true</boolProp>
  <boolProp name="HTTPSampler.auto_redirects">false</boolProp>
  <boolProp name="HTTPSampler.use_keepalive">true</boolProp>
  <boolProp name="HTTPSampler.DO_MULTIPART_POST">{{doMultipartPost}}</boolProp>
  <stringProp name="HTTPSampler.embedded_url_re"></stringProp>
  <stringProp name="HTTPSampler.connect_timeout"></stringProp>
  <stringProp name="HTTPSampler.response_timeout"></stringProp>
</HTTPSamplerProxy>
<hashTree>
  <HeaderManager guiclass="HeaderPanel" testclass="HeaderManager" testname="HTTP Header Manager" enabled="true">
    <collectionProp name="HeaderManager.headers">
      {{#headers}}
      <elementProp name="" elementType="Header">
        <stringProp name="Header.name">{{name}}</stringProp>
        <stringProp name="Header.value">{{value}}</stringProp>
      </elementProp>
      {{/headers}}
    </collectionProp>
  </HeaderManager>
  <hashTree />
</hashTree>
`,m=`{{#steps}}
{{#http}}
{{> httpMustache}}
{{/http}}
{{^http}}
<GenericController guiclass="LogicControllerGui" testclass="GenericController" testname="{{type}}" enabled="true"/>
<hashTree>
  {{> stepsMustache}}
</hashTree>
{{/http}}
{{/steps}}`,h=`<?xml version="1.0" encoding="UTF-8" ?>
<jmeterTestPlan version="1.2" properties="5.0" jmeter="5.1.1 r1855137">
  <hashTree>
    <TestPlan guiclass="TestPlanGui" testclass="TestPlan" testname="{{name}}" enabled="true">
      <stringProp name="TestPlan.comments"></stringProp>
      <boolProp name="TestPlan.functional_mode">false</boolProp>
      <boolProp name="TestPlan.tearDown_on_shutdown">true</boolProp>
      <boolProp name="TestPlan.serialize_threadgroups">false</boolProp>
      <elementProp name="TestPlan.user_defined_variables" elementType="Arguments" guiclass="ArgumentsPanel" testclass="Arguments" testname="User Defined Variables" enabled="true">
        <collectionProp name="Arguments.arguments" />
      </elementProp>
      <stringProp name="TestPlan.user_define_classpath"></stringProp>
    </TestPlan>
    <hashTree>
      {{#testCases}}
      <ThreadGroup guiclass="ThreadGroupGui" testclass="ThreadGroup" testname="{{name}}" enabled="true">
        <stringProp name="ThreadGroup.on_sample_error">continue</stringProp>
        <elementProp name="ThreadGroup.main_controller" elementType="LoopController" guiclass="LoopControlPanel" testclass="LoopController" testname="Loop Controller" enabled="true">
          <boolProp name="LoopController.continue_forever">false</boolProp>
          <stringProp name="LoopController.loops">{{iterationCount}}</stringProp>
        </elementProp>
        <stringProp name="ThreadGroup.num_threads">{{threadCount}}</stringProp>
        <stringProp name="ThreadGroup.ramp_time">1</stringProp>
        <boolProp name="ThreadGroup.scheduler">false</boolProp>
        <stringProp name="ThreadGroup.duration"></stringProp>
        <stringProp name="ThreadGroup.delay"></stringProp>
      </ThreadGroup>
      <hashTree>
        {{> stepsMustache}}
      </hashTree>
      {{/testCases}}
      <ResultCollector guiclass="ViewResultsFullVisualizer" testclass="ResultCollector" testname="" enabled="true">
        <boolProp name="ResultCollector.error_logging">false</boolProp>
        <objProp>
          <name>saveConfig</name>
          <value class="SampleSaveConfiguration">
            <time>true</time>
            <latency>true</latency>
            <timestamp>true</timestamp>
            <success>true</success>
            <label>true</label>
            <code>true</code>
            <message>true</message>
            <threadName>true</threadName>
            <dataType>true</dataType>
            <encoding>false</encoding>
            <assertions>true</assertions>
            <subresults>true</subresults>
            <responseData>false</responseData>
            <samplerData>false</samplerData>
            <xml>false</xml>
            <fieldNames>true</fieldNames>
            <responseHeaders>false</responseHeaders>
            <requestHeaders>false</requestHeaders>
            <responseDataOnError>false</responseDataOnError>
            <saveAssertionResultsFailureMessage>true</saveAssertionResultsFailureMessage>
            <assertionsResultsToSave>0</assertionsResultsToSave>
            <bytes>true</bytes>
            <sentBytes>true</sentBytes>
            <url>true</url>
            <threadCounts>true</threadCounts>
            <idleTime>true</idleTime>
            <connectTime>true</connectTime>
          </value>
        </objProp>
        <stringProp name="filename"></stringProp>
      </ResultCollector>
      <hashTree/>
      <ResultCollector guiclass="SummaryReport" testclass="ResultCollector" testname="" enabled="true">
        <boolProp name="ResultCollector.error_logging">false</boolProp>
        <objProp>
          <name>saveConfig</name>
          <value class="SampleSaveConfiguration">
            <time>true</time>
            <latency>true</latency>
            <timestamp>true</timestamp>
            <success>true</success>
            <label>true</label>
            <code>true</code>
            <message>true</message>
            <threadName>true</threadName>
            <dataType>true</dataType>
            <encoding>false</encoding>
            <assertions>true</assertions>
            <subresults>true</subresults>
            <responseData>false</responseData>
            <samplerData>false</samplerData>
            <xml>false</xml>
            <fieldNames>true</fieldNames>
            <responseHeaders>false</responseHeaders>
            <requestHeaders>false</requestHeaders>
            <responseDataOnError>false</responseDataOnError>
            <saveAssertionResultsFailureMessage>true</saveAssertionResultsFailureMessage>
            <assertionsResultsToSave>0</assertionsResultsToSave>
            <bytes>true</bytes>
            <sentBytes>true</sentBytes>
            <url>true</url>
            <threadCounts>true</threadCounts>
            <idleTime>true</idleTime>
            <connectTime>true</connectTime>
          </value>
        </objProp>
        <stringProp name="filename"></stringProp>
      </ResultCollector>
      <hashTree/>
      <Arguments guiclass="ArgumentsPanel" testclass="Arguments" testname="" enabled="true">
        <collectionProp name="Arguments.arguments">
          {{#variables}}
          <elementProp name="env_var" elementType="Argument">
            <stringProp name="Argument.name">{{name}}</stringProp>
            <stringProp name="Argument.value">{{value}}</stringProp>
            <stringProp name="Argument.metadata">=</stringProp>
          </elementProp>
          {{/variables}}
        </collectionProp>
      </Arguments>
      <hashTree/>
    </hashTree>
  </hashTree>
</jmeterTestPlan>`,v=`<?xml version="1.0" encoding="UTF-8" ?>
<jmeterTestPlan version="1.2" properties="5.0" jmeter="5.1.1 r1855137">
  <hashTree>
    <TestPlan guiclass="TestPlanGui" testclass="TestPlan" testname="{{name}}" enabled="true">
      <stringProp name="TestPlan.comments"></stringProp>
      <boolProp name="TestPlan.functional_mode">false</boolProp>
      <boolProp name="TestPlan.tearDown_on_shutdown">true</boolProp>
      <boolProp name="TestPlan.serialize_threadgroups">false</boolProp>
      <elementProp name="TestPlan.user_defined_variables" elementType="Arguments" guiclass="ArgumentsPanel" testclass="Arguments" testname="User Defined Variables" enabled="true">
        <collectionProp name="Arguments.arguments" />
      </elementProp>
      <stringProp name="TestPlan.user_define_classpath"></stringProp>
    </TestPlan>
    <hashTree>
      {{#testCases}}
      <ThreadGroup guiclass="ThreadGroupGui" testclass="ThreadGroup" testname="{{name}}" enabled="true">
        <stringProp name="ThreadGroup.on_sample_error">continue</stringProp>
        <elementProp name="ThreadGroup.main_controller" elementType="LoopController" guiclass="LoopControlPanel" testclass="LoopController" testname="Loop Controller" enabled="true">
          <boolProp name="LoopController.continue_forever">false</boolProp>
          <stringProp name="LoopController.loops">{{iterationCount}}</stringProp>
        </elementProp>
        <stringProp name="ThreadGroup.num_threads">{{threadCount}}</stringProp>
        <stringProp name="ThreadGroup.ramp_time">1</stringProp>
        <boolProp name="ThreadGroup.scheduler">false</boolProp>
        <stringProp name="ThreadGroup.duration"></stringProp>
        <stringProp name="ThreadGroup.delay"></stringProp>
      </ThreadGroup>
      <hashTree>
        {{> stepsMustache}}
      </hashTree>
      {{/testCases}}
      <ResultCollector guiclass="ViewResultsFullVisualizer" testclass="ResultCollector" testname="View Result Tree" enabled="true">
        <boolProp name="ResultCollector.error_logging">false</boolProp>
        <objProp>
          <name>saveConfig</name>
          <value class="SampleSaveConfiguration">
            <time>true</time>
            <latency>true</latency>
            <timestamp>true</timestamp>
            <success>true</success>
            <label>true</label>
            <code>true</code>
            <message>true</message>
            <threadName>true</threadName>
            <dataType>true</dataType>
            <encoding>false</encoding>
            <assertions>true</assertions>
            <subresults>true</subresults>
            <responseData>false</responseData>
            <samplerData>false</samplerData>
            <xml>false</xml>
            <fieldNames>true</fieldNames>
            <responseHeaders>false</responseHeaders>
            <requestHeaders>false</requestHeaders>
            <responseDataOnError>false</responseDataOnError>
            <saveAssertionResultsFailureMessage>true</saveAssertionResultsFailureMessage>
            <assertionsResultsToSave>0</assertionsResultsToSave>
            <bytes>true</bytes>
            <sentBytes>true</sentBytes>
            <url>true</url>
            <threadCounts>true</threadCounts>
            <idleTime>true</idleTime>
            <connectTime>true</connectTime>
          </value>
        </objProp>
        <stringProp name="filename"></stringProp>
      </ResultCollector>
      <hashTree/>
      <ResultCollector guiclass="SummaryReport" testclass="ResultCollector" testname="Summary Report" enabled="true">
        <boolProp name="ResultCollector.error_logging">false</boolProp>
        <objProp>
          <name>saveConfig</name>
          <value class="SampleSaveConfiguration">
            <time>true</time>
            <latency>true</latency>
            <timestamp>true</timestamp>
            <success>true</success>
            <label>true</label>
            <code>true</code>
            <message>true</message>
            <threadName>true</threadName>
            <dataType>true</dataType>
            <encoding>false</encoding>
            <assertions>true</assertions>
            <subresults>true</subresults>
            <responseData>false</responseData>
            <samplerData>false</samplerData>
            <xml>false</xml>
            <fieldNames>true</fieldNames>
            <responseHeaders>false</responseHeaders>
            <requestHeaders>false</requestHeaders>
            <responseDataOnError>false</responseDataOnError>
            <saveAssertionResultsFailureMessage>true</saveAssertionResultsFailureMessage>
            <assertionsResultsToSave>0</assertionsResultsToSave>
            <bytes>true</bytes>
            <sentBytes>true</sentBytes>
            <url>true</url>
            <threadCounts>true</threadCounts>
            <idleTime>true</idleTime>
            <connectTime>true</connectTime>
          </value>
        </objProp>
        <stringProp name="filename"></stringProp>
      </ResultCollector>
      <hashTree/>
      <Arguments guiclass="ArgumentsPanel" testclass="Arguments" testname="User Custom Variables" enabled="true">
        <collectionProp name="Arguments.arguments">
          {{#variables}}
          <elementProp name="env_var" elementType="Argument">
            <stringProp name="Argument.name">{{name}}</stringProp>
            <stringProp name="Argument.value">{{value}}</stringProp>
            <stringProp name="Argument.metadata">=</stringProp>
          </elementProp>
          {{/variables}}
        </collectionProp>
      </Arguments>
      <hashTree/>
    </hashTree>
  </hashTree>
</jmeterTestPlan>`,f=i(109956),g=(0,r.oE)([h,v]);class y{buildVariables(){var e,t,i;let a=(null==(t=this.globals)||null==(e=t.variable)?void 0:e.toJSON().values)||[];((null==(i=this.environment)?void 0:i.variables)||[]).forEach(e=>{!e.name||this.variables.find(t=>t.name===e.name)||this.variables.push({name:e.name,value:e.isBindInitial?e.initialValue||"":e.value,level:e.level})}),a.forEach(e=>{!e.key||this.variables.find(t=>t.name===e.key)||this.variables.push({name:e.key,value:e.isBindInitial?e.initialValue||"":e.value,level:e.level})})}async parse(){return await this.buildRequests(),this.buildVariables(),f.render(g,{name:this.name,testCases:this.testCases,variables:this.variables},{stepsMustache:m,httpMustache:p})}async buildHttpRequest(e){var t,i,a;let n,l;e.type===d.F.HTTP?(l=e.httpApiCase,n=this.httpApiMap[null==l?void 0:l.apiDetailId]):e.type===d.F.CUSTOM_HTTP&&(l=e.customHttpRequest,n=e.customHttpRequest);let{HttpRequestConvertor:r}=await o.baseContainer.items.converters,s=new r({httpApi:n,httpApiCase:l,environment:this.environment,injectUserAgent:!1,format:"jmeter",servers:this.servers,httpFolderMap:this.httpFolderMap||{},httpRootFolderMap:this.httpRootFolderMap||{}}).parse(),{templateRenderModule:p}=await o.baseContainer.items.templatingModule,{renderedRequest:m}=await p.getRenderedRequestAndContext({request:s,concatVariableDefinitions:[],dynamicValueFakerOption:this.dynamicValueFakerOption}),h=u.parse(m.url),v={name:e.name||m.name,domain:h.hostname||"",port:h.port||"",protocol:(null==(t=h.protocol)?void 0:t.replace(":",""))||"",path:`${h.path||""}`,method:m.method.toUpperCase(),headers:m.headers,doMultipartPost:"false"};if(null==(i=m.body)?void 0:i.type)switch(null==(a=m.body)?void 0:a.type){case c.yA.FormData:v.bodyParameters=m.body.parameters,v.doMultipartPost="true";break;case c.yA.XWwwFormUrlencoded:v.bodyParameters=m.body.parameters;break;default:m.body.data&&(v.bodyData=m.body.data)}return v}async transformSteps(e){return e?Promise.all(e.map(async e=>e.type===d.F.HTTP||e.type===d.F.CUSTOM_HTTP?{...await this.buildHttpRequest(e),http:!0}:{type:e.type,steps:await this.transformSteps(e.children)})):Promise.resolve([])}async buildRequests(){this.testCases=await Promise.all(this.testCasesData.map(async e=>{let{name:t,options:i,steps:a}=e;return{name:t||(0,r.hw)({id:"threadGroup"}),threadCount:(null==i?void 0:i.threadCount)||1,iterationCount:(null==i?void 0:i.iterationCount)||1,steps:await this.transformSteps(a)}}))}constructor({environment:e,globals:t,httpApiMap:i,testCases:a,name:n,servers:l,httpFolderMap:r,httpRootFolderMap:o,dynamicValueFakerOption:d}){(0,s._)(this,"environment",void 0),(0,s._)(this,"globals",void 0),(0,s._)(this,"httpApiMap",void 0),(0,s._)(this,"testCasesData",void 0),(0,s._)(this,"variables",[]),(0,s._)(this,"name",void 0),(0,s._)(this,"testCases",[]),(0,s._)(this,"servers",void 0),(0,s._)(this,"httpFolderMap",void 0),(0,s._)(this,"httpRootFolderMap",void 0),(0,s._)(this,"dynamicValueFakerOption",void 0),this.environment=e,this.globals=t,this.httpApiMap=i,this.testCasesData=a,this.name=n||"",this.servers=l,this.httpFolderMap=r,this.httpRootFolderMap=o,this.dynamicValueFakerOption=d}}var x=i(915753),A=i(223233),j=i(496411),b=i(483482),w=i(69712),S=i(929463),C=i(398380),I=i(246313),N=((a={})[a.JMETER=0]="JMETER",a[a.POSTMAN=1]="POSTMAN",a[a.APP_CLI=2]="APP_CLI",a);async function k(e){var t,i,a,s;let d,{format:c,apiTestCase:u,environmentId:p}=e,{id:m,name:h,options:v,steps:f,preProcessors:g,postProcessors:N}=u,{httpApiMap:k,socketApiMap:T,socketServiceMap:M,globals:E,moduleVariablesMap:_,defaultModuleId:F,commonHttpApiResponseMap:D,dataSchemaDefinitions:R,customFunctionMap:O,commonParameters:P,httpFolderMap:L,rootFolderMap:$,securitySchemeMap:B,projectMockRule:z,projectSetting:U,commonScriptMap:H,refApiTestCaseMap:V,databaseConnectionMap:K,projectAssociations:q,vaultSecret:G,environmentMap:W}=await (0,I.h)(m,f),J=await (0,x.UH)(U),Y=function(e){var t,i,a;let{environment:n}=(0,w.Gu)(),l=e||(null==(t=n.currentEnvironment)?void 0:t.id)||(null==(i=n.environmentSelectOptions)?void 0:i[0].value);return null==(a=n.environmentMap)?void 0:a[l]}(p||(null==v?void 0:v.environmentId));if(!Y)return S.Ay.error((0,r.hw)({id:"message.notSelectEnvironment"}));(0,n.Ts)();let Z=e=>{e&&"object"==typeof e&&"secret"===e.securityType&&("string"==typeof e.initialValue&&(e.initialValue=""),"string"==typeof e.value&&(e.value=""))},Q=null==E||null==(t=E.variable)?void 0:t.values;Q&&"function"==typeof Q.each&&Q.each(Z,{}),Array.isArray(null==Y?void 0:Y.variables)&&Y.variables.forEach(Z);let{CollectionBuilder:X,PostmanConvertor:ee}=await o.baseContainer.items.converters,{TestFlowControlStepBuilder:et,isTestFlowControlConfig:ei}=await o.baseContainer.items.collectionBuilders;switch(c){case 0:d=await new y({name:h,environment:Y,globals:E,httpApiMap:k,testCases:[{...u,steps:f}],servers:(null==U?void 0:U.servers)||[],httpFolderMap:L,httpRootFolderMap:$,dynamicValueFakerOption:J}).parse(),(0,b.Mt)({fileName:`${h||"export"}.jmx`,data:d});break;case 1:d=await new ee({name:h,environment:Y,globals:E,httpApiMap:k,testCases:[{...u,steps:f}],skipItemGroup:!0,commonScriptMap:H,commonParameters:P,commonHttpApiResponseMap:D,dataSchemaDefinitions:R,servers:(null==U?void 0:U.servers)||[],httpFolderMap:L,httpRootFolderMap:$,databaseConnectionMap:K,testScenarioSetting:(null==U?void 0:U.advancedSettings.enableTestScenarioSetting)?{processors:{preProcessors:g,postProcessors:N}}:void 0,enableYAPICompatScript:null==U||null==(i=U.advancedSettings)?void 0:i.enableYAPICompatScript,dynamicValueFakerOption:J}).parse(),(0,b.Mt)({fileName:`${h||"export"}.postman_collection.json`,data:JSON.stringify(d)});break;case 2:{let e={projectId:(0,j.MJ)(),relatedId:m,environmentId:Number(Y.id),refApiTestCaseMap:V,projectAssociations:q,environmentMap:W,onError:v.onError,fixedId:!0},t=ei(f,e),i=new et(f,e).build(),n=(0,A.fF)("ApiTest",U);(d=new X({testCases:[{...u,steps:i}],name:h,environment:Y.toSdkObject(),commonParameters:P,globals:E,moduleVariablesMap:_,defaultModuleId:F,httpApiMap:k,vaultSecret:G,socketApiMap:T,socketServiceMap:M,databaseConnectionMap:K,commonScriptMap:H,commonHttpApiResponseMap:D,dataSchemaDefinitions:R,customFunctionMap:O,projectAssociationMap:(0,C.keyBy)(q,"id"),servers:(null==U?void 0:U.servers)||[],httpFolderMap:L,httpRootFolderMap:$,securitySchemeMap:B,testScenarioSetting:(null==U?void 0:U.advancedSettings.enableTestScenarioSetting)?{processors:{preProcessors:g,postProcessors:N}}:void 0,cloudMock:(null==U?void 0:U.cloudMock)||{},isTestFlowControl:t,httpApiDebugMode:!1,projectMockRule:z,enableYAPICompatScript:null==U||null==(a=U.advancedSettings)?void 0:a.enableYAPICompatScript,enableJsonc:!0,disabledResponseValidate:n,fixedItemIdByStepId:!0,isOverrideRequesterOption:!0}).buildJSON()).projectOptions={...null!=(s=null==U?void 0:U.advancedSettings)?s:{},mockSettings:null==U?void 0:U.mockSettings,language:null==U?void 0:U.language},(0,b.Mt)({fileName:`${h||"export"}.${l.A3}-cli.json`,data:JSON.stringify(d)})}}}},246313:function(e,t,i){"use strict";i.d(t,{h:()=>p});var a=i(399013),n=i(232821),l=i(496411),r=i(69712),s=i(984359),o=i(398380),d=i(864230),c=i(232230),u=i(482106);async function p(e,t,i){var p,m,h,v,f;let g=(0,r.Gu)(),y=!1;(0,d.y)(t,e=>{e.type===s.F.TEST_CASE_REF&&e.relatedId?y=!0:e.type===s.F.HTTP&&e.originalProjectId&&(y=!0)});let x=y?await (0,n._P)(e,(0,l.MJ)(),i).then(e=>{let{data:t}=e;return t}):void 0;return{globals:g.globals.globals,teamGlobals:null==(p=(0,a.h5)())?void 0:p.toSdkObject(),vault:g.vaultSecret.vaultSecretKV,moduleVariablesMap:(0,c.YA)(),defaultModuleId:(0,u.Jo)().defaultProjectModuleId,commonParameters:null==(m=g.commonParameters)?void 0:m.parameters,projectSetting:g.projectSetting.projectSettingData,projectMockRule:null!=(f=null==(h=g.project.currentProject)?void 0:h.mockRule)?f:{rules:[],enableSystemRule:!0},httpApiMap:{...(0,o.keyBy)(null==x?void 0:x.endpoints,"id"),...g.apiDetail.apiDetailMap},socketApiMap:g.socketApi.socketApiMap||{},socketServiceMap:g.socketService.socketServiceMap,customFunctionMap:g.customFunction.customFunctionMap,httpFolderMap:{...(0,o.keyBy)(null==x?void 0:x.endpointFolders,"id"),...g.apiDetailFolder.apiDetailFolderMap},rootFolderMap:{...null==x||null==(v=x.endpointFolders)?void 0:v.reduce((e,t)=>("root"===t.type&&(e[t.id]=t),e),{}),...g.apiDetailFolder.rootFolderMap},securitySchemeMap:{...(0,o.keyBy)(null==x?void 0:x.securitySchemes,"id"),...g.securityScheme.securitySchemeMap},commonHttpApiResponseMap:{...(0,o.keyBy)(null==x?void 0:x.endpointResponses,"id"),...g.apiResponse.apiResponseMap},dataSchemaDefinitions:{...null==x?void 0:x.dataSchemaDefinitions,...g.apiSchema.dataSchemaDefinitions},databaseConnectionMap:g.databaseConnection.databaseConnectionMap,commonScriptMap:{...(0,o.keyBy)(null==x?void 0:x.commonScripts,"id"),...g.apiCaseScript.apiCaseScriptMap},refApiTestCaseMap:(0,o.keyBy)(null==x?void 0:x.testScenarios,"id"),projectAssociations:null==x?void 0:x.projectAssociations,vaultSecret:g.vaultSecret.vaultSecret,environmentMap:g.environment.environmentMap}}},575408:function(e,t,i){"use strict";i.d(t,{XY:()=>s,hi:()=>r,kd:()=>l});var a=i(398380);let n=new Map;function l(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"COMMON",a=arguments.length>2?arguments[2]:void 0;a&&(n.has(`${e}.${i}`)||n.set(`${e}.${i}`,new Set),null==(t=n.get(`${e}.${i}`))||t.add(a))}function r(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"COMMON",a=arguments.length>2?arguments[2]:void 0;a&&(null==(t=n.get(`${e}.${i}`))||t.delete(a))}async function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"COMMON",i=Array.from(n.get(`${e}.${t}`)||[]);return(await Promise.all(Array.from(i).map(e=>e()))).every(e=>!(0,a.isBoolean)(e)||e)?Promise.resolve():Promise.reject()}},996689:function(e,t,i){"use strict";i.d(t,{Y:()=>S});var a=i(838e3),n=i(129271),l=i(169508),r=i(414886);i(276129);var s=i(838487),o=i.n(s),d=i(689898),c=i(949760),u=i(641486),p=i(861418),m=i.n(p);i(207946);var h=i(416711),v=i(575408);let f="coverTabWrapper-pT09QP",g="fullTabWrapper-kywCSX",y="leftHackPlaceholder-WU7Qus",x="leftHackPlaceholderBackground-aMTlWx",A="header-SAiDzY",j="children-GSUGCV",b="drawer-TNxJwX";var w=i(834171);function S(e){let{variant:t,children:i,header:r,customHeader:s,hotkeyScope:p,width:y,onBack:x}=e,{tabKey:S,tabWrapperRef:I}=(0,u.useContext)(w.D),N=(0,h.Q)(e=>e.mode);if((0,u.useEffect)(()=>((0,v.kd)(S,N,x),()=>{(0,v.hi)(S,N,x)}),[N,x]),!I)return null;if("drawer"===t)return(0,a.jsx)(d.A,{open:!0,className:b,width:y||800,mask:!1,title:r,onClose:x,getContainer:()=>I,children:i});{let e="full"===t;return m().createPortal((0,a.jsxs)("div",{className:o()(e?g:f,{isWeb:l.HZ}),children:[e&&(0,a.jsx)(C,{}),(0,a.jsx)(n.A,{actions:"esc",ensureScope:p,handler:x}),s?(0,a.jsx)("div",{className:A,children:s}):(0,a.jsx)(c.A,{className:A,onBack:x,renderLeft:r,backIconAndContentDivider:!0,type:"popover"}),(0,a.jsx)("div",{className:j,children:i})]}),I)}}function C(){let e=(0,r.JI)(e=>e.sideExpandWidth);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:x,style:{width:`calc(${e}px - var(--app-full-tab-wrapper-margin-left))`}}),(0,a.jsx)("div",{className:y,style:{width:`calc(${e}px - var(--app-full-tab-wrapper-margin-left))`}})]})}},611298:function(e,t,i){"use strict";i.d(t,{g:()=>g});var a=i(838e3),n=i(129271),l=i(325318),r=i(756422),s=i(744283),o=i(740565);i(276129);var d=i(667754),c=i(207946),u=i(641486),p=i(255529),m=i(653814),h=i(69712);let v="popconfirm-FtlTbj";var f=i(140049);function g(e){let{optionName:t="options",onSave:i,...g}=e,y=p.A.useFormInstance(),[x,A]=(0,u.useState)(!1),j=(0,f.A)(e=>{e||A(!1)}),{run:b,loading:w,reset:S,cancel:C}=(0,d.eB)(async e=>{if(!0!==e&&y){var a;let e=y.getFieldValue([...[t].flat(),"environmentId"]),i=(0,h.Gu)().environment.environmentMap;if((null==i||null==(a=i[e])?void 0:a.visibility)==="private")return void A(!0)}return i(S)},void 0,void 0,{isReturnAll:!0,showLoading:!1,isHideSuccessMsg:!0}),I=function(){let{tabWrapperRef:e}=(0,u.useContext)(c.r6),t=(0,u.useRef)(0),[i,a]=(0,u.useState)(!0);return(0,u.useEffect)(()=>{if(!e)return;t.current=e.childElementCount;let i=new MutationObserver(()=>{e&&a(e.childElementCount===t.current)});return i.observe(e,{childList:!0}),()=>i.disconnect()},[e]),i}();return(0,a.jsx)(l.y,{permission:s.o.TEST_SCENARIO_CDU,children:(0,a.jsx)(m.A,{title:(0,o.hw)({id:"testScenario.save.privateEnvironment.confirm"}),open:x,okText:(0,o.hw)({id:"save"}),overlayClassName:v,zIndex:"var(--ui-zindex-dropdown)",autoAdjustOverflow:!0,destroyOnHidden:!0,onOpenChange:j,onConfirm:()=>{b(!0),A(!1)},children:(0,a.jsx)(r.A,{onClick:b,onCancel:C,loading:w,renderHotKey:e=>I&&(0,a.jsx)(n.A,{actions:"save",handler:e}),...g,children:(0,o.hw)({id:"save"})})})})}},806712:function(e,t,i){"use strict";i.d(t,{P:()=>l});var a=i(838e3),n=i(747227);function l(){return(0,a.jsx)(n.A,{style:{pointerEvents:"none"}})}},476433:function(e,t,i){"use strict";i.d(t,{P:()=>c});var a=i(838e3),n=i(740565),l=i(711111),r=i(255529),s=i(554692),o=i(622789),d=i(671466);function c(e){let{optionName:t="options"}=e,i=(0,l.B)(()=>[...[t].flat(),"delayItem"],[t]);return(0,a.jsx)(r.A.Item,{className:"flex-1",name:i,rules:[{required:!0}],label:(0,a.jsxs)(a.Fragment,{children:[(0,n.hw)({id:"apiTestCase.delay"}),(0,a.jsx)(s.A,{title:(0,n.hw)({id:"apiTestCase.case.executionGapTips"}),children:(0,a.jsx)(d.A,{type:"icon-Info2",className:"tips-icon app-text-fg-disabled text-sm ml-2"})})]}),children:(0,a.jsx)(o.A,{className:"w-full",precision:0,min:0,parser:e=>e||0,addonAfter:(0,n.hw)({id:"millisecond"})})})}},369851:function(e,t,i){"use strict";i.d(t,{D:()=>h});var a=i(838e3),n=i(190127),l=i(740565),r=i(689368),s=i(202182),o=i(255529),d=i(487844),c=i(398380),u=i(641486),p=i(806712),m=i(208303);function h(e){let{optionName:t="options",ignoreValidate:i,ignoreIds:h,dropdownMatchSelectWidth:v=!0,transformOptions:f,whitelistEnvironmentIds:g,overrideActiveItemId:y}=e,x=o.A.useFormInstance(),A=(0,s.A)(()=>[...[t].flat(),"environmentId"],[t]),j=(0,r.Ay)(e=>{let{environment:t}=e;return t.environmentMap}),b=(0,d.N)(e=>(0,c.get)(e,A),x),w=(0,m.T)({ignoreIds:h});return(0,u.useEffect)(()=>{if(""===b){x.setFieldValue(A,""),x.validateFields();return}let e=!!h&&h.has(b);g&&g.has(b)||b&&(null==j?void 0:j[b])&&!e?x.setFieldValue(A,b):(0,c.isNumber)(b)&&!e?(x.setFieldValue(A,""),x.validateFields()):w&&x.setFieldValue(A,w)},[j,b,w,h,g]),(0,a.jsx)(o.A.Item,{className:"flex-1",name:A,label:(0,l.hw)({id:"apiTestCase.executeEnvironment"}),rules:[{required:!0,validator(e,t,a){let n;if(i)return a();""!==t&&t||(n=(0,l.hw)({id:"environment.environmentSelect.placeholder"})),a(n)}}],children:(0,a.jsx)(n.A,{suffixIcon:(0,a.jsx)(p.P,{}),style:{width:"calc(100% - 31px)"},dropdownMatchSelectWidth:v,ignoreIds:h,transformOptions:f,overrideActiveItemId:y})})}},741710:function(e,t,i){"use strict";i.d(t,{e:()=>m});var a=i(838e3),n=i(740565),l=i(202182),r=i(255529),s=i(554692),o=i(820182),d=i(622789),c=i(487844),u=i(671466),p=i(398380);function m(e){let{optionName:t="options"}=e,i=r.A.useFormInstance(),m=(0,l.A)(()=>[...[t].flat(),"iterationCount"],[t]),h=(0,c.N)(e=>{var i;return(null==(i=(0,p.get)(e,t))?void 0:i.useDataSetId)>0},i);return(0,a.jsx)(r.A.Item,{className:"flex-1",name:m,label:(0,a.jsxs)(a.Fragment,{children:[(0,n.hw)({id:"apiTestCase.iterationCount"}),(0,a.jsx)(s.A,{title:(0,n.hw)({id:"apiTestCase.stepCountFromThread"}),children:(0,a.jsx)(u.A,{type:"icon-Info2",className:"tips-icon app-text-fg-disabled text-sm ml-2"})})]}),rules:[{required:!0,message:(0,n.hw)({id:"apiTestCase.requireIterationCount"})}],children:h?(0,a.jsx)(s.A,{title:(0,n.hw)({id:"apiTestCase.autoCalculateFromTestData"}),children:(0,a.jsx)("div",{children:(0,a.jsx)(o.A,{className:"w-full",value:(0,n.hw)({id:"testScenario.auto"}),disabled:!0})})}):(0,a.jsx)(d.A,{className:"w-full",precision:0,min:1})})}},118631:function(e,t,i){"use strict";i.d(t,{h:()=>u});var a=i(838e3),n=i(740565),l=i(202182),r=i(255529),s=i(554692),o=i(138249),d=i(671466),c=i(806712);function u(e){let{optionName:t="options"}=e,i=(0,l.A)(()=>[...[t].flat(),"onError"],[t]);return(0,a.jsx)(r.A.Item,{name:i,className:"flex-1 mb-4",label:(0,a.jsxs)(a.Fragment,{children:[(0,n.hw)({id:"apiTestCase.onError"}),(0,a.jsx)(s.A,{title:(0,a.jsx)(n.n3,{id:"apiTestCase.onErrorTips"}),children:(0,a.jsx)(d.A,{type:"icon-Info2",className:"tips-icon app-text-fg-disabled text-sm ml-2"})})]}),children:(0,a.jsx)(o.A,{className:"w-full",dropdownMatchSelectWidth:!1,options:[{label:(0,n.hw)({id:"apiTestCase.ignore"}),value:"ignore"},{label:(0,n.hw)({id:"apiTestCase.continue"}),value:"continue"},{label:(0,n.hw)({id:"apiTestCase.end"}),value:"end"}],suffixIcon:(0,a.jsx)(c.P,{})})})}},958015:function(e,t,i){"use strict";i.d(t,{t:()=>s});var a=i(838e3),n=i(740565),l=i(255529),r=i(969812);function s(){return(0,a.jsx)(l.A.Item,{noStyle:!0,valuePropName:"checked",name:["options","readGlobalCookie"],className:"h-8",children:(0,a.jsx)(r.A,{children:(0,n.hw)({id:"runWithStoredCookies"})})})}},603332:function(e,t,i){"use strict";i.d(t,{I:()=>d});var a=i(838e3),n=i(740565),l=i(255529),r=i(969812),s=i(554692),o=i(671466);function d(){return(0,a.jsx)(l.A.Item,{noStyle:!0,valuePropName:"checked",name:["options","saveGlobalCookie"],className:"h-8",children:(0,a.jsxs)(r.A,{children:[(0,n.hw)({id:"saveCookiesAfterRun"}),(0,a.jsx)(s.A,{title:(0,n.hw)({id:"apiTestCase.saveCookiesTips"}),children:(0,a.jsx)(o.A,{type:"icon-Info2",className:"tips-icon app-text-fg-disabled text-sm ml-2"})})]})})}},886098:function(e,t,i){"use strict";i.d(t,{e:()=>h});var a=i(838e3),n=i(740565),l=i(202182),r=i(255529),s=i(969812),o=i(554692),d=i(138249),c=i(487844),u=i(671466),p=i(398380),m=i(806712);function h(e){let{className:t,optionName:i="options",variant:h,selectorClassName:v,defaultCheckedValue:f="fail"}=e,g=r.A.useFormInstance(),y=(0,l.A)(()=>[...[i].flat(),"saveReportDetail"],[i]),x=(0,c.N)(e=>"none"!==(0,p.get)(e,y),g);return(0,a.jsxs)("div",{className:t,children:[(0,a.jsxs)(s.A,{checked:x,onChange:e=>{g.setFieldValue(y,e.target.checked?f:"none")},children:[(0,n.hw)({id:"apiTestCase.saveReportDetail"}),(0,a.jsx)(o.A,{title:(0,n.hw)({id:"apiTestCase.saveReportDetailTips"}),children:(0,a.jsx)(u.A,{type:"icon-Info2",className:"tips-icon app-text-fg-disabled text-sm ml-2"})})]}),(0,a.jsx)("div",{className:v,hidden:!x,children:(0,a.jsx)(r.A.Item,{noStyle:!0,name:y,children:(0,a.jsx)(d.A,{size:"small",variant:h,dropdownMatchSelectWidth:!1,options:[{label:(0,n.hw)({id:"apiTestCase.saveOnlyFailReportDetail"}),value:"fail"},{label:(0,n.hw)({id:"apiTestCase.saveAllReportDetail"}),value:"all"}],suffixIcon:(0,a.jsx)(m.P,{})})})})]})}},731954:function(e,t,i){"use strict";i.d(t,{E:()=>d});var a=i(838e3),n=i(740565),l=i(255529),r=i(969812),s=i(554692),o=i(671466);function d(){return(0,a.jsx)(l.A.Item,{noStyle:!0,valuePropName:"checked",name:["options","saveVariables"],children:(0,a.jsxs)(r.A,{children:[(0,n.hw)({id:"apiTestCase.saveVariablesChangeValue"}),(0,a.jsx)(s.A,{title:(0,n.hw)({id:"apiTestCase.saveChangeValuesTips"}),children:(0,a.jsx)(o.A,{type:"icon-Info2",className:"tips-icon app-text-fg-disabled text-sm ml-2"})})]})})}},643213:function(e,t,i){"use strict";i.d(t,{W:()=>I});var a=i(838e3),n=i(700255),l=i(740565),r=i(857499),s=i(689368),o=i(202182),d=i(140049),c=i(255529),u=i(554692),p=i(487844),m=i(671466),h=i(398380),v=i(641486),f=i(660464),g=i(449104),y=i(622754),x=i(838487),A=i.n(x);let j={testData:"testData-MVH_sI",popup:"popup-LsCxVn",file:"file-iQxwLO",publicGroup:"publicGroup-eNWyJE",currentGroup:"currentGroup-fPdT0t"};var b=i(471504),w=i(898358),S=i(1655);let C=[{title:(0,l.hw)({id:"testScenario.testData.noUseData"}),value:-1,className:j.noOption,icon:(0,a.jsx)(a.Fragment,{})}];function I(e){let{optionName:t="options",apiTestCaseId:i,children:d}=e,x=c.A.useFormInstance(),b=(0,o.A)(()=>[...[t].flat(),"useDataSetId"],[t]),I=(0,p.N)(e=>(0,h.get)(e,b),x),k=(0,r.e)(e=>{let{getDataset:t}=e;return t(i)}),T=(0,s.Ay)(e=>{let{externalURL:t}=e;return t.help.testData||t.help.index}),M=(0,f.Ck)(e=>e.treeData),E=(0,f.Ck)(e=>e.treeNodeMap),[_,F]=(0,v.useMemo)(()=>{var e,t;let i=(null!=(t=null==(e=M.find(e=>e.key===f.sc))?void 0:e.children)?t:[]).filter(e=>e.key!==g.aU),n=!1;return[(0,y.d)(i,e=>{let t=(null==e?void 0:e.type)==="TEST_DATA_SET";return t&&!n&&(n=!0),{children:null==e?void 0:e.children,title:null==e?void 0:e.name,value:String(t?null==e?void 0:e.id:null==e?void 0:e.key),icon:t&&(0,a.jsx)(S.I,{testDataType:e.testDataType,className:"titleIcon"}),selectable:t,className:t?j.file:j.folder}}),n]},[M]),D=(0,o.A)(()=>k?[...C,...k.length>0?[{title:(0,l.hw)({id:"testScenario.testData.currentGroup"}),value:"__CURRENT_GROUP__",className:A()(j.currentGroup,j.folder),children:k.map(e=>{let{name:t,id:i}=e;return{title:t,value:String(i),className:j.file,icon:(0,a.jsx)(S.I,{testDataType:"STATIC",className:"titleIcon"})}}),selectable:!1}]:[],...F?[{title:(0,l.hw)({id:"testScenario.testData.publicGroup"}),value:"__PUBLIC_GROUP__",className:A()(j.publicGroup,j.folder),children:_,selectable:!1}]:[]]:C,[k,_,F]);return(0,v.useEffect)(()=>{D===C&&(0,r.d)().fetchDataset(i)},[i]),(0,v.useEffect)(()=>{D!==C&&((null==k?void 0:k.some(e=>e.id===I))||E.has((0,w.EA)("TEST_DATA_SET",I))||x.setFieldValue(b,-1))},[x,k,E]),(0,a.jsx)(c.A.Item,{className:"flex-1 testDataFormItem",name:b,label:(0,a.jsxs)(a.Fragment,{children:[(0,l.hw)({id:"testData"}),(0,a.jsx)(u.A,{title:(0,a.jsx)(n.A,{url:T,children:(0,l.hw)({id:"apiTestCase.testDataBulkTestAPI"})}),children:(0,a.jsx)(m.A,{type:"icon-Info2",className:"tips-icon app-text-fg-disabled text-sm"})})]}),children:(0,a.jsx)(N,{apiTestCaseId:i,options:D,children:d})})}function N(e){let{options:t,children:i,apiTestCaseId:n,value:s,onChange:o}=e,c=(0,v.useRef)(!1),u=(0,d.A)(async e=>{e&&!c.current&&(await (0,r.d)().fetchDataset(n),c.current=!0)}),p=(0,v.useMemo)(()=>String(s),[s]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.Uh,{className:A()(j.testData,"testData"),value:p,onChange:e=>{null==o||o(Number(e))},treeData:t,showSearch:!0,popupClassName:j.popup,onDropdownVisibleChange:u,treeDefaultExpandAll:!0,dropdownMatchSelectWidth:!0,dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:(0,l.hw)({id:"testScenario.testData.placeholder"}),treeNodeFilterProp:"title",treeExpandAction:"click"}),i]})}},860417:function(e,t,i){"use strict";i.d(t,{H:()=>m});var a=i(838e3),n=i(169508),l=i(740565),r=i(689368),s=i(255529),o=i(554692),d=i(622789),c=i(487844),u=i(671466),p=i(641486);function m(){let e=(0,r.Ay)(e=>{var t,i;return null==(i=e.externalURL)||null==(t=i.home)?void 0:t.index}),t=s.A.useFormInstance(),i=(0,c.N)(e=>{var t;return null==e||null==(t=e.options)?void 0:t.threadCount},t);return(0,p.useEffect)(()=>{n.HZ&&1!==i&&t.setFieldValue(["options","threadCount"],1)},[t,n.HZ,i]),(0,a.jsx)(s.A.Item,{name:["options","threadCount"],label:(0,a.jsxs)(a.Fragment,{children:[(0,l.hw)({id:"threadCount"}),(0,a.jsx)(o.A,{title:(0,a.jsx)(l.n3,{id:"apiTestCase.tipsForJmeter"}),children:(0,a.jsx)(u.A,{type:"icon-Info2",className:"tips-icon app-text-fg-disabled text-sm ml-2"})})]}),rules:[{required:!0,message:(0,l.hw)({id:"threadCountRequire"})}],children:n.HZ?(0,a.jsx)(o.A,{title:(0,l.hw)({id:"apiTestCase.webThreadTips"},{desktopLink:(0,a.jsx)("a",{href:e,target:"_blank",rel:"noreferrer",children:(0,l.hw)({id:"webVersion.label.downloadDesktopApp"},{appName:n.JB})})}),children:(0,a.jsx)("div",{children:(0,a.jsx)(d.A,{className:"w-full",value:1,disabled:!0})})}):(0,a.jsx)(d.A,{className:"w-full",precision:0,min:1})})}},642575:function(e,t,i){"use strict";i.d(t,{l:()=>a});let a={enabled:!1,event:"TEST_CASE_COMPLETED",notificationTargetIds:[]}},871632:function(e,t,i){"use strict";i.d(t,{W:()=>a});let a={environmentId:void 0,useDataSetId:-1,virtualUsers:20,loadProfile:"constant",durationMins:10,rampDurationMins:0,dataDistributionProfile:"ordered"}},813347:function(e,t,i){"use strict";i.d(t,{V:()=>a});let a={environmentId:void 0,useDataSetId:-1,threadCount:1,iterationCount:1,delayItem:0,saveVariables:!0,saveReportDetail:"all",readGlobalCookie:!1,saveGlobalCookie:!1,onError:"ignore",runnerId:i(93762).$J}},66923:function(e,t,i){"use strict";i.d(t,{l:()=>c});var a=i(838e3),n=i(255529),l=i(398380),r=i(641486),s=i(681081),o=i(871632),d=i(813347);function c(e){let{form:t,data:i,...c}=e,u=i.options===d.V;return(0,r.useLayoutEffect)(()=>{u||t.setFieldsValue({...i,notificationOptions:{...s.zk,...(0,l.omitBy)(i.notificationOptions,l.isNil)},options:{...d.V,...(0,l.omitBy)(i.options,l.isNil)},performanceTestOptions:{...o.W,...(0,l.omitBy)(i.performanceTestOptions,l.isNil)}})},[t,u]),(0,a.jsx)(n.A,{form:t,initialValues:i,...c})}},208303:function(e,t,i){"use strict";i.d(t,{T:()=>n});var a=i(689368);function n(e){let t=(0,a.Ay)(e=>{let{environment:t}=e;return t.currentEnvironment}),i=(0,a.Ay)(e=>{let{environment:t}=e;return t.environmentSelectOptions}),n=[Number(null==t?void 0:t.id),...i.map(e=>Number(e.value))].filter(e=>!isNaN(e));return(null==e?void 0:e.ignoreIds)?n.find(t=>{var i;return!(null==e||null==(i=e.ignoreIds)?void 0:i.has(t))}):n[0]}},449755:function(e,t,i){"use strict";i.d(t,{D:()=>l,a:()=>r});var a=i(353748),n=i(898358);let l=(0,i(325475).vt)((e,t)=>{function i(i){let a=new Map(t().testScenarioDesignDrawerDataMap);i(a),e({testScenarioDesignDrawerDataMap:a})}return{testScenarioDesignDrawerDataMap:new Map,openTestScenarioDesignDrawer(e){(0,a.g0)().unstableTurnsResidentTab({key:(0,n.EA)("testScenario",e.testScenarioId)}),i(t=>{t.set(e.testScenarioId,{...e,openFlag:new Date().getTime()})})},hideTestScenarioDesignDrawer(e){i(t=>{t.delete(e)})}}}),r=l.getState},335338:function(e,t,i){"use strict";i.d(t,{xY:()=>y,DY:()=>v,Uf:()=>f,ic:()=>x,td:()=>g});var a=i(838e3),n=i(857499),l=i(334821),r=i(353748),s=i(483482),o=i(237887),d=i(689368),c=i(898358),u=i(538721),p=i(923117);let m=(0,i(618487).dynamic)({loading:p.A,loader:async()=>{let{default:e}=await Promise.all([i.e("720"),i.e("73034"),i.e("4276"),i.e("48737"),i.e("87053"),i.e("80232"),i.e("33898"),i.e("67007"),i.e("72168"),i.e("90348"),i.e("59057"),i.e("36943"),i.e("91192"),i.e("76066"),i.e("6126"),i.e("44834"),i.e("48579"),i.e("8704"),i.e("16336"),i.e("71877"),i.e("51235"),i.e("13996"),i.e("75562"),i.e("37730"),i.e("73956"),i.e("8769"),i.e("60293"),i.e("67282"),i.e("86781"),i.e("39622"),i.e("15505"),i.e("31766"),i.e("21172"),i.e("24879"),i.e("4720"),i.e("26304"),i.e("14701"),i.e("10750"),i.e("13137"),i.e("37191"),i.e("56344"),i.e("62385"),i.e("34687"),i.e("89649"),i.e("59476"),i.e("28787"),i.e("45429"),i.e("1925"),i.e("34914")]).then(i.bind(i,673711));return e}});var h=i(93691);function v(e){let{id:t,data:i,tabState:r="unstable",projectBranchId:p,projectId:v}=e,f=t||(null==i?void 0:i.id);if(!f)return;if((0,o.m)(v)){let e=(0,d.DA)(e=>{var t;return null==(t=e.project.projectMap)?void 0:t[v]});e&&(0,s.vl)({hashPath:`/project/${v}/api-test/scenario-${f}`,data:e});return}let g=(0,c.EA)("testScenario",f);i&&((0,l.Nw)().initTestScenario(i),(0,n.d)().fetchDataset(i.id)),(0,u.$Q)({projectBranchId:p,key:g,state:r,content:(0,a.jsx)(m,{id:f,nodeKey:g}),tabIcon:(0,a.jsx)(h.i,{nodeKey:g,type:"icon-TestScenarioline"})})}async function f(e){(0,r.g0)().unstableTurnsResidentTab({key:(0,c.EA)("testScenario",e)})}function g(e,t){let{modifyingKeys:i}=(0,l.Nw)().getTestScenarioState(e);i.add(t),(0,u.qm)((0,c.EA)("testScenario",e),!0)}function y(e,t){let{modifyingKeys:i}=(0,l.Nw)().getTestScenarioState(e);i.delete(t),0===i.size&&(0,u.qm)((0,c.EA)("testScenario",e),!1)}function x(e,t){let{modifyingKeys:i}=(0,l.Nw)().getTestScenarioState(e);return i.has(t)}},681081:function(e,t,i){"use strict";i.d(t,{AN:()=>d,J0:()=>s,li:()=>r,zk:()=>n});var a=i(689368);let n={enabled:!1,event:"TEST_CASE_COMPLETED",notificationTargetIds:[]},l={enabled:!1,event:"TEST_CASE_CI_COMPLETED",notificationTargetIds:[]},r={enabled:!1,event:"TEST_SCHEDULE_TASK_DONE",notificationTargetIds:[]},s={enabled:!1,event:"TEST_SUITE_COMPLETED",notificationTargetIds:[]},o={enabled:!1,event:"TEST_SUITE_CI_COMPLETED",notificationTargetIds:[]};function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"TEST_SCENARIO",t=(0,a.Ay)(e=>{var t,i;return null==(i=e.projectSetting.projectSettingData)||null==(t=i.notificationSettings)?void 0:t.testScenario}),{enabled:i,event:d,notificationTargetIds:c}=null!=t?t:{};if("TEST_SCENARIO"===e)return i?{enabled:null!=i?i:n.enabled,event:null!=d?d:n.event,notificationTargetIds:null!=c?c:n.notificationTargetIds}:n;if("TEST_SCENARIO_CI_CONFIG"===e){var u;return i?{enabled:null!=i?i:l.enabled,event:null!=(u=d&&({TEST_CASE_COMPLETED:"TEST_CASE_CI_COMPLETED",TEST_CASE_COMPLETED_WITH_FAILURE:"TEST_CASE_CI_COMPLETED_WITH_FAILURE"})[d])?u:l.event,notificationTargetIds:null!=c?c:l.notificationTargetIds}:l}return"TEST_SUITE"===e?s:"TEST_SUITE_CI_CONFIG"===e?o:r}},591563:function(e,t,i){"use strict";i.d(t,{C:()=>M});var a=i(740565),n=i(857499),l=i(334821),r=i(353748),s=i(660464),o=i(2183),d=i(232821),c=i(496411),u=i(237887),p=i(81319),m=i(689368),h=i(984359),v=i(929463),f=i(898358),g=i(575408),y=i(449755),x=i(335338),A=i(169292),j=i(398380);let b="highlightBlock-tyno7x",w="highlightBlockTransition-XbeNj9";function S(e){let{activeBlockIds:t,testScenarioId:i,mode:a}=e;if(!(0,j.isEmpty)(t)&&(t.forEach(e=>{var t;null==(t=(0,l.Nw)().getBlock(i,e))||t.open()}),!n())){let e=0,t=window.setInterval(()=>{(n()||++e>10)&&window.clearInterval(t)},300)}function n(){if(!t)return;let e=t.map(e=>`#${(0,A.f)(e,a)}`),i=document.querySelectorAll(e.join(","));return!(0,j.isEmpty)(i)&&(i.forEach(e=>{var t;e.classList.add(b,w),null==(t=e.querySelector(".blockHeader"))||t.scrollIntoView({block:"center",inline:"center",behavior:"instant"}),window.setTimeout(()=>{e.classList.remove(b),window.setTimeout(()=>{e.classList.remove(w)},300)},3e3)}),!0)}}var C=i(629049),I=i(864230);function N(e,t){(0,r.g0)().unstableTurnsResidentTab(),(0,x.DY)({id:e,tabState:"resident",projectBranchId:t}),(0,r.g0)().setActiveKey((0,f.EA)("testScenario",e)),(0,C.wN)().setActiveKey(e,"content")}async function k(e){let{projectBranchId:t,testScenarioId:i,activeBlockId:r,apiTestReportStepId:s}=e;if(!(0,l.Nw)().hasTestScenarioState(i))try{await (0,d.xj)(i,t).then(e=>{(0,l.Nw)().initTestScenario(e.data),(0,n.d)().fetchDataset(i,t)})}catch(e){return v.Ay.error((0,a.hw)({id:"testScenario.messageError.notExist"}))}N(i,t);let u=!(0,c.SA)()&&(0,c.U3)()!==t&&(0,o.IF)();(0,y.a)().openTestScenarioDesignDrawer({readonly:u,activeStepId:r,testScenarioId:i,projectBranchId:t,apiTestReportStepId:s})}async function T(e){return(0,l.Nw)().hasTestScenarioState(e)?(0,l.Nw)().getTestScenarioState(e):await (0,d.xj)(e).then(e=>e.data)}async function M(e){let{mode:t,projectId:i,httpApiId:n,httpApiCaseId:l,activeBlockId:r,testScenarioId:d,apiTestReportStepId:y}=e;if((0,u.m)(i))return void(0,x.DY)({id:d,projectId:i});let A=(0,f.EA)("testScenario",d),j=(0,s.ZF)().treeNodeMap.has(A),b=(0,c.U3)(),w=!0;if((0,o.IF)()&&!j&&(b=(0,c.sI)(),(0,p.Ky)().baseTestTreeNodeMap.has(A)||(w=!1)),!w)return void v.Ay.error((0,a.hw)({id:"testScenario.report.notExistTips"}));"COMMON"===t?(await (0,g.XY)(A,"DESIGN"),N(d,b)):"DESIGN"===t&&await k({projectBranchId:b,testScenarioId:d,activeBlockId:r,apiTestReportStepId:y}),r&&S({testScenarioId:d,activeBlockIds:[r],mode:t});let C=[];if(n){let e=await T(d),t=(0,m.DA)(e=>e.apiCase.apiCaseMap);(0,I.y)(e.steps,e=>{if(e.type===h.F.HTTP)if(e.bind){let i=e.relatedId?t[e.relatedId]:void 0;(null==i?void 0:i.apiDetailId)===n&&C.push(e.id)}else e.bindId===n&&C.push(e.id)})}else if(l){let e=await T(d);(0,I.y)(e.steps,e=>{e.type===h.F.HTTP&&e.bindId===l&&C.push(e.id)})}C.length&&S({testScenarioId:d,activeBlockIds:C,mode:t})}},631471:function(e,t,i){"use strict";i.d(t,{S:()=>v});var a=i(838e3),n=i(744283),l=i(740565),r=i(291341),s=i(428301),o=i(241421),d=i(566926);i(207946);var c=i(554692),u=i(458184),p=i(671466),m=i(641486),h=i(996689);function v(e){let{id:t,readonly:i=!1}=e,[v,f]=(0,m.useState)(!1),g=(0,r.M)(e=>e.getActiveMenu(`testScenario.${t}`)),y=(0,r.M)(e=>e.removeActiveMenu);return(0,m.useEffect)(()=>{g&&"COMMENTS"===g&&(f(!0),y(`testScenario.${t}`))},[g,y]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.A,{title:(0,l.hw)({id:"comments.comments"}),placement:"bottomRight",children:(0,a.jsx)(u.A,{disabled:i,type:"text",icon:(0,a.jsx)(p.A,{color:"var(--ui-disabled-color)",type:"icon-Messages"}),onClick:()=>f(!0)})}),v&&(0,a.jsx)(d.EO,{children:(0,a.jsx)(h.Y,{variant:"drawer",width:400,header:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.hw)({id:"comments.comments"}),(0,a.jsx)(o.A,{className:"ml-1"})]}),onBack:()=>f(!1),children:(0,a.jsx)(s.A,{originEntityId:t,entityType:"TEST_SCENARIO",permission:n.o.TEST_SCENARIO_CDU})})})]})}},964619:function(e,t,i){"use strict";i.d(t,{gL:()=>h,rw:()=>p,DG:()=>m});var a=i(838e3),n=i(353748),l=i(660464),r=i(398380),s=i(898358),o=i(538721),d=i(923117);let c=(0,i(618487).dynamic)({loading:d.A,loader:async()=>{let{default:e}=await Promise.all([i.e("62385"),i.e("62545"),i.e("66669"),i.e("77913")]).then(i.bind(i,188435));return e}});var u=i(671466);async function p(e){let{id:t,tabState:i="unstable",nodeType:n="testScenarioFolder"}=e;if(!(0,r.isNumber)(t))return;let d=(0,s.EA)(n,t);(0,l.ZF)().getNode(d)&&(0,o.$Q)({key:d,state:i,content:(0,a.jsx)(c,{id:t,nodeKey:d}),tabIcon:(0,a.jsx)(u.A,{type:"icon-FolderDefault",className:"titleIcon"})})}async function m(e){let{id:t,tabState:i="unstable"}=e;p({id:t,tabState:i,nodeType:"testScenarioRoot"})}async function h(e){(0,n.g0)().unstableTurnsResidentTab({key:(0,s.EA)("testScenarioFolder",e)})}},313254:function(e,t,i){"use strict";i.d(t,{V:()=>g});var a=i(838e3),n=i(740565),l=i(334821);i(207946);var r=i(554692),s=i(458184),o=i(671466),d=i(641486),c=i(994311),u=i(87120),p=i(828901),m=i(567777),h=i(718180);function v(e){let{testScenarioId:t,onRevert:i}=e,r=(0,l.gK)(e=>{let{getTestScenarioState:i}=e;return i(t)}),s=(0,u.O)(e=>{var t;return null==(t=e.getTeamResourceUsage("TEST_SCENARIO_HISTORY"))?void 0:t.rule.value});return((0,h.A)(()=>{u.O.getState().fetchTeamResourceUsage("TEST_SCENARIO_HISTORY")}),s)?(0,a.jsx)(m.A,{sidebarVisible:!0,comparisonModel:"testScenarioComparison",currentData:r,queryHistories:p.Nq,resetHistories:p.Ko,dataSelector:e=>{var i;return null!=(i=e.testScenarioHistory.store[t])?i:{}},onRevert:async e=>{await (0,p.bI)({projectId:r.projectId,id:t,historyId:e},i)}}):(0,a.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,a.jsx)(c.A,{title:(0,n.hw)({id:"testScenario.history.title"}),description:(0,n.hw)({id:"testScenario.history.description"})})})}var f=i(996689);function g(e){let{id:t,readonly:i=!1}=e,[c,u]=(0,d.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.A,{title:(0,n.hw)({id:"testScenario.history.title"}),placement:"bottomRight",children:(0,a.jsx)(s.A,{disabled:i,type:"text",icon:(0,a.jsx)(o.A,{color:"var(--ui-disabled-color)",type:"icon-clock-rewind"}),onClick:()=>u(!0)})}),c&&(0,a.jsx)(f.Y,{variant:"drawer",width:400,header:(0,n.hw)({id:"testScenario.history.title"}),onBack:()=>u(!1),children:(0,a.jsx)(v,{testScenarioId:t,onRevert:()=>{u(!1),(0,l.Nw)().refreshTestScenario(t)}})})]})}},893198:function(e,t,i){"use strict";i.d(t,{x:()=>z});var a=i(838e3),n=i(353748),l=i(660464),r=i(181488),s=i(740565),o=i(743238),d=i(232821),c=i(276764),u=i(759345),p=i(140049),m=i(929463),h=i(255529),v=i(820182),f=i(19523),g=i(641486),y=i(888192),x=i(538721),A=i(632514),j=i(611298),b=i(66923),w=i(476433),S=i(369851),C=i(741710),I=i(118631),N=i(958015),k=i(603332),T=i(886098),M=i(731954),E=i(643213),_=i(860417);let F="settingWrapper-XPQISy";function D(e){let{apiTestCaseId:t}=e;return(0,a.jsxs)("div",{className:F,children:[(0,a.jsx)("div",{className:"title",children:(0,s.hw)({id:"testScenario.runSettings.title"})}),(0,a.jsxs)("div",{className:"lineWrapper",children:[(0,a.jsx)(S.D,{}),(0,a.jsx)(E.W,{apiTestCaseId:t}),(0,a.jsx)(C.e,{})]}),(0,a.jsxs)("div",{className:"lineWrapper",children:[(0,a.jsx)(_.H,{}),(0,a.jsx)(I.h,{}),(0,a.jsx)(w.P,{})]}),(0,a.jsxs)("div",{className:"advancedSettings",children:[(0,a.jsx)(T.e,{className:"flex items-center"}),(0,a.jsx)(M.E,{}),(0,a.jsx)(N.t,{}),(0,a.jsx)(k.I,{})]})]})}let R="testScenarioInstance-pLgmSQ";function O(e){let{id:t,nodeKey:i}=e;return(0,g.useEffect)(()=>{var e;let a=null==(e=(0,l.ZF)().getNode(i))?void 0:e.parentId,r=()=>{(0,n.g0)().closeTab(i),m.Ay.error((0,s.hw)({id:"testScenarioInstance.messageError.notExist"}))};a?(0,c.P)(a,t).then(e=>{let{data:t}=e;t?(0,o.k)().initTestScenarioInstance(t):r()}):r()},[t,i]),(0,a.jsx)(P,{id:t,nodeKey:i})}function P(e){let{id:t,nodeKey:i}=e,[n]=(0,f.A)(),c=(0,o.v)(e=>{let{getTestScenarioInstanceState:i}=e;return i(t)});(0,u.A)(()=>(0,o.k)().clearTestScenarioInstance(t)),(0,g.useEffect)(()=>{n.setFieldValue("name",c.name)},[c.name]);let w=(0,p.A)(()=>(0,x.qm)(i)),S=(0,p.A)(()=>(0,x.gA)(i)),C=c.testScenarioId,I=(0,l.Ck)(e=>{var t,a;let{getNode:n}=e;return(null==(t=n((null==(a=n(i))?void 0:a.parentKey)||""))?void 0:t.name)||""}),N=(0,p.A)(async()=>{let{options:e}=await n.validateFields(),{steps:i,preProcessors:a,postProcessors:l}=(await (0,d.xj)(C)).data||{};return i&&0!==i.length?{id:C,name:I,instanceId:t,options:e,runStepConfigs:i,testScenarioSetting:{processors:{preProcessors:a,postProcessors:l}}}:void m.Ay.warn((0,s.hw)({id:"testScenarioInstance.messageError.noRunAble"}))}),k=(0,p.A)(async()=>{S();let e=await n.validateFields();e&&(await (0,o.k)().updateTestScenarioInstance(C,t,{name:e.name,options:e.options}),(0,l.ZF)().fetchTree(),(0,x.qm)(i,!1),m.Ay.success((0,s.hw)({id:"saved"})))});return(0,a.jsxs)(b.l,{form:n,data:c,className:R,requiredMark:!1,onValuesChange:w,children:[(0,a.jsxs)("div",{className:"topWrapper",children:[(0,a.jsx)(A.K,{className:"apiTestCaseBackBtn",name:I,testScenarioId:C}),(0,a.jsxs)("div",{className:"actionWrapper",children:[(0,a.jsx)(h.A.Item,{name:"name",rules:[{required:!0}],noStyle:!0,children:(0,a.jsx)(v.A,{className:"underLineInput",placeholder:(0,s.hw)({id:"testScenarioInstance.placeholder.name"})})}),(0,a.jsx)(y.i,{getRunConfig:N,apiTestCaseId:C,onRun:S}),(0,a.jsx)(j.g,{onSave:k})]}),(0,a.jsx)(D,{apiTestCaseId:C})]}),(0,a.jsx)(r.A,{id:C,instanceId:t,className:"testReport",disableScrollY:!0})]})}var L=i(14511),$=i(898358);let B=e=>{let{nodeKey:t}=e,i=(0,l.Ck)(e=>{var i,a;let{getNode:n}=e;return null==(a=n(t))||null==(i=a.options)?void 0:i.environmentId});return(0,a.jsx)(L.N,{environmentId:i})};function z(e){let{id:t,tabState:i="unstable"}=e;if(!t)return;let n=(0,$.EA)("testScenarioInstance",t);(0,l.ZF)().getNode(n)&&(0,x.$Q)({key:n,state:i,content:(0,a.jsx)(O,{id:t,nodeKey:n}),tabIcon:(0,a.jsx)(B,{nodeKey:n})})}},755990:function(e,t,i){"use strict";i.d(t,{DV:()=>r,OS:()=>d,WB:()=>l,_3:()=>u,ct:()=>s,k:()=>o,n5:()=>c,q4:()=>n});var a=i(740565);let n="0 * * * *",l="0 0 * * *",r="0 12 * * 7",s=[{label:(0,a.hw)({id:"team.runner.testScheduleTask.every1minute"}),value:1,intervalSecond:60},{label:(0,a.hw)({id:"team.runner.testScheduleTask.every5minute"}),value:5,intervalSecond:300},{label:(0,a.hw)({id:"team.runner.testScheduleTask.every10minute"}),value:10,intervalSecond:600},{label:(0,a.hw)({id:"team.runner.testScheduleTask.every15minute"}),value:15,intervalSecond:900},{label:(0,a.hw)({id:"team.runner.testScheduleTask.every30minute"}),value:30,intervalSecond:1800},{label:(0,a.hw)({id:"team.runner.testScheduleTask.every60minute"}),value:0,intervalSecond:3600}],o=[{label:(0,a.hw)({id:"team.runner.testScheduleTask.every1hour"}),value:1,intervalSecond:3600},{label:(0,a.hw)({id:"team.runner.testScheduleTask.every2hour"}),value:2,intervalSecond:7200},{label:(0,a.hw)({id:"team.runner.testScheduleTask.every3hour"}),value:3,intervalSecond:10800},{label:(0,a.hw)({id:"team.runner.testScheduleTask.every4hour"}),value:4,intervalSecond:14400},{label:(0,a.hw)({id:"team.runner.testScheduleTask.every5hour"}),value:5,intervalSecond:18e3},{label:(0,a.hw)({id:"team.runner.testScheduleTask.every6hour"}),value:6,intervalSecond:21600},{label:(0,a.hw)({id:"team.runner.testScheduleTask.every12hour"}),value:12,intervalSecond:43200},{label:(0,a.hw)({id:"team.runner.testScheduleTask.every24hour"}),value:0,intervalSecond:86400}],d=[{label:(0,a.hw)({id:"team.runner.testScheduleTask.monday"}),value:1,intervalSecond:86400},{label:(0,a.hw)({id:"team.runner.testScheduleTask.tuesday"}),value:2,intervalSecond:86400},{label:(0,a.hw)({id:"team.runner.testScheduleTask.wednesday"}),value:3,intervalSecond:86400},{label:(0,a.hw)({id:"team.runner.testScheduleTask.thursday"}),value:4,intervalSecond:86400},{label:(0,a.hw)({id:"team.runner.testScheduleTask.friday"}),value:5,intervalSecond:86400},{label:(0,a.hw)({id:"team.runner.testScheduleTask.saturday"}),value:6,intervalSecond:86400},{label:(0,a.hw)({id:"team.runner.testScheduleTask.sunday"}),value:7,intervalSecond:86400}],c=[{label:(0,a.hw)({id:"team.runner.testScheduleTask.mo"}),value:1},{label:(0,a.hw)({id:"team.runner.testScheduleTask.tu"}),value:2},{label:(0,a.hw)({id:"team.runner.testScheduleTask.we"}),value:3},{label:(0,a.hw)({id:"team.runner.testScheduleTask.th"}),value:4},{label:(0,a.hw)({id:"team.runner.testScheduleTask.fr"}),value:5},{label:(0,a.hw)({id:"team.runner.testScheduleTask.sa"}),value:6},{label:(0,a.hw)({id:"team.runner.testScheduleTask.su"}),value:7}],u=[{label:(0,a.hw)({id:"team.runner.testScheduleTask.minutely"}),value:"minutely",defaultCorn:"*/30 * * * *",intervalSecond:Math.max(...s.map(e=>e.intervalSecond))},{label:(0,a.hw)({id:"team.runner.testScheduleTask.hourly"}),value:"hourly",defaultCorn:"0 */6 * * *",intervalSecond:Math.max(...o.map(e=>e.intervalSecond))},{label:(0,a.hw)({id:"team.runner.testScheduleTask.daily"}),value:"daily",defaultCorn:"0 12 * * *",intervalSecond:86400},{label:(0,a.hw)({id:"team.runner.testScheduleTask.weekly"}),value:"weekly",defaultCorn:r,intervalSecond:86400}]},120773:function(e,t,i){"use strict";i.d(t,{m:()=>c});var a=i(838e3),n=i(671466),l=i(898358),r=i(449104),s=i(538721),o=i(923117);let d=(0,i(618487).dynamic)({loading:o.A,loader:async()=>{let{default:e}=await Promise.all([i.e("76093"),i.e("21651"),i.e("68456")]).then(i.bind(i,546005));return e}});function c(e){let{tabState:t="unstable",contentActiveTab:i,onMounted:o}=e;(0,s.$Q)({key:r.q5,state:t,content:(0,a.jsx)(d,{defaultActiveKey:i,onMounted:o}),tabIcon:(0,a.jsx)(n.A,{className:"titleIcon",type:"icon-time-alarm",size:l.Ev})})}i(755990)},382770:function(e,t,i){"use strict";i.d(t,{eA:()=>p,$I:()=>u});var a=i(838e3),n=i(353748),l=i(179048),r=i(93691),s=i(898358),o=i(538721),d=i(923117);let c=(0,i(618487).dynamic)({loading:d.A,loader:async()=>{let{default:e}=await Promise.all([i.e("90348"),i.e("76093"),i.e("8769"),i.e("62385"),i.e("13397"),i.e("62545"),i.e("28787"),i.e("21651"),i.e("67626")]).then(i.bind(i,815134));return e}});function u(e){let{id:t,name:i,tabState:n="unstable"}=e,d=(0,s.EA)("TEST_SUITE",null!=t?t:(0,l.A)()),u=(0,a.jsx)(r.i,{nodeKey:d});(0,o.$Q)({name:i,key:d,state:n,content:(0,a.jsx)(c,{id:t}),tabIcon:u})}async function p(e){(0,n.g0)().unstableTurnsResidentTab({key:(0,s.EA)("TEST_SUITE",e)})}},632514:function(e,t,i){"use strict";i.d(t,{K:()=>u});var a=i(838e3),n=i(740565),l=i(838487),r=i.n(l),s=i(554692),o=i(671466),d=i(591563);let c="testScenarioRef-hYgVbz";function u(e){let{name:t,className:i,activeBlockId:l,testScenarioId:u,projectId:p,deleted:m,hiddenIcon:h}=e;return u?(0,a.jsxs)("div",{className:r()(i,c,{deleted:m}),onClick:e=>{e.stopPropagation(),m||(0,d.C)({activeBlockId:l,testScenarioId:u,mode:"COMMON",projectId:p})},children:[(0,a.jsx)(o.A,{hidden:h,type:"icon-task-scenario"}),(0,a.jsx)(s.A,{overlayStyle:{"--ui-tooltip-max-width":"auto"},title:m?(0,n.hw)({id:"notFound"}):void 0,children:(0,a.jsx)("span",{className:"truncate",style:{textDecoration:m?"line-through":void 0,opacity:m?.5:void 0},children:t})}),!m&&(0,a.jsx)(o.A,{hidden:h,type:"icon-link-external1"})]}):(0,a.jsx)("div",{className:i,children:t})}},798467:function(e,t,i){"use strict";i.d(t,{W:()=>s});var a=i(169508),n=i(496411),l=i(850646),r=i(618487);function s(e,t,i){var s,o,d,c,u;if(e.id&&i&&i.enabled&&((null==(o=t.stats)||null==(s=o.steps)?void 0:s.passed)!==(null==(c=t.stats)||null==(d=c.steps)?void 0:d.total)||"TEST_CASE_COMPLETED_WITH_FAILURE"!==i.event&&"TEST_SUITE_COMPLETED_WITH_FAILURE"!==i.event)){if(i.notificationTargetIds&&Array.isArray(i.notificationTargetIds)&&0!==i.notificationTargetIds.length){u={id:Number(e.id),name:e.name||"",testScenarioId:e.relatedId,userId:(0,r.getCurrentUserId)(),event:i.event,testResult:t.stats,testTimings:t.timings,source:a.HZ?"web":"desktop",notificationTargetIds:i.notificationTargetIds},(0,l.Ay)(`/api/v1/projects/${(0,n.MJ)()}/notification/hook`,{method:"post",data:u,requestType:"json"})}}}},14511:function(e,t,i){"use strict";i.d(t,{N:()=>c});var a=i(838e3),n=i(590863),l=i(754594),r=i(876898),s=i(689368),o=i(671466),d=i(641486);function c(e){let{showName:t,environmentId:i,defaultTag:c,...u}=e,p=(0,s.Ay)(e=>{let{environment:t}=e;return t}),m=(0,d.useMemo)(()=>{var e;let t=p.environmentMap||{};if(i&&!t[i])return null;let a=(i?t[i]:null)||p.currentEnvironment||t[null==(e=p.environmentSelectOptions[0])?void 0:e.value];if(!a)return null;let n=(0,l.a)(a);return{name:n.name||a.name,color:n.color||(0,r.lr)(a.type)}},[i,p]);return m?t?(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(n.A,{className:"whitespace-no-wrap",...m,...u}),(0,a.jsx)("span",{className:"truncate flex-1",children:m.name})]}):(0,a.jsx)(n.A,{className:"whitespace-no-wrap",...m,...u}):c||(0,a.jsx)(o.A,{className:"titleIcon",size:16,type:"icon-task",color:"var(--ui-orange-6)"})}},80903:function(e,t,i){"use strict";i.d(t,{tp:()=>S,Je:()=>w});var a=i(838e3),n=i(740565),l=i(929463),r=i(325475),s=i(140049),o=i(202182),d=i(855659),c=i(641486),u=i.n(c),p=i(486702);let m=e=>{let{height:t,onReachEnd:i,onScroll:n}=e,l=(0,s.A)(()=>{null==i||i()}),r=(0,s.A)(()=>{null==n||n()}),c=(0,o.A)(()=>(0,p.x)({height:t,onReachEnd:l,onScroll:r}),[t]);return(0,a.jsx)(d.A,{...e,components:c})};var h=i(411576),v=i(866146),f=i(838487),g=i.n(f),y=i(764007);let x="table-XvtfFW",A={y:350},j=e=>{let[t,i]=u().useState(!1),{data:l,visible:r,onSubmit:d,onClose:c}=e,p=(e,t)=>`${l.testDataSetNameKey}-${t}`,[f,j]=(0,v.A)(()=>{var e,t;return null!=(t=null==l||null==(e=l.dataSets)?void 0:e.map(p))?t:[]}),b=(0,s.A)(e=>{j(e)}),w=(0,o.A)(()=>[{title:l.testDataSetNameKey,dataIndex:l.testDataSetNameKey}],[l.testDataSetNameKey]),S=(0,o.A)(()=>({selectedRowKeys:f,onChange:b}),[l,f]),C=(0,s.A)(async()=>{try{i(!0),await (null==d?void 0:d({...l,dataSets:l.dataSets.filter((e,t)=>f.includes(p(e,t)))}))}catch(e){console.error(e)}finally{i(!1)}});return(0,a.jsxs)(y.Ay,{title:(0,n.hw)({id:"apiTestCase.message.selectTestData"}),size:"720",visible:r,footer:null,onCancel:c,destroyOnClose:!0,children:[(0,a.jsx)(m,{className:x,rowKey:p,size:"small",columns:w,rowSelection:S,dataSource:(null==l?void 0:l.dataSets)||[],pagination:!1,scroll:A,height:350,onRow:(e,t)=>({onClick:()=>{let i=p(e,t);b(f.includes(i)?f.filter(e=>e!==i):[...f,i])}})}),(0,a.jsx)("div",{className:g()("px-4 py-2 flex flex-row-reverse",{hidden:0===f.length}),children:(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{children:(0,n.hw)({id:"selected"})}),(0,a.jsxs)("strong",{className:"primary-color",children:[" ",f.length," "]}),(0,a.jsx)("span",{children:(0,n.hw)({id:"items"})})]})}),(0,a.jsx)(h.A,{submitBtnLoading:t,submitText:(0,n.hw)({id:"apiTestCase.action.run"}),onCancel:c,onSubmit:C})]})},b=(0,r.vt)(e=>({testData:void 0,showApiTestDataPickModal(t,i){var a;(null==t||null==(a=t.dataSets)?void 0:a.length)?e({testData:t,onSubmit:i}):l.Ay.warn((0,n.hw)({id:"apiTestSuit.requireConfigTestData"}))},hideApiTestDataPickModal(){e({testData:void 0,onSubmit:void 0})}})),w=b.getState;function S(){var e;let{testData:t,onSubmit:i,hideApiTestDataPickModal:n}=b();return(null==t||null==(e=t.dataSets)?void 0:e.length)?(0,a.jsx)(j,{data:t,visible:!0,onSubmit:async e=>{await (null==i?void 0:i(e)),n()},onClose:n}):null}},213540:function(e,t,i){"use strict";let a,n;i.d(t,{A:()=>d,W:()=>p});var l=i(169508),r=i(396734),s=i(73586);let o=!1,d="TestScenario.EnabledIndependentProcess";async function c(){let e;if(o)return;if(n)return await n;let t={maxSpaceSize:8192,inspect:!0,logLevel:"error"};e=globalThis.outerHeight-globalThis.innerHeight>170,(globalThis.outerWidth-globalThis.innerWidth>170||e)&&(t.logLevel="debug");try{n=(0,r.C)(s.gc.invoke("AutomationTesting.BootExecutionProcess",{type:"test",options:t}),5e3),await n,o=!0}catch(e){throw console.error("AutomationTesting test Error",e),Error("AutomationTesting.BootExecutionProcess boot fail")}finally{n=void 0}}async function u(){try{return await (0,r.C)((0,s.qb)("test"))}catch(e){throw console.error("PerformanceTesting Error",e),Error("attach RunnerRunPerformance IPC fail")}}async function p(){if(!l.HZ){if("true"===localStorage.getItem(d)){if(a)return a;try{return await c(),(a=await u()).onClose(()=>{a=void 0,o=!1}),a}catch(e){console.error("getIpcNode Error",e)}}}}},888192:function(e,t,i){"use strict";i.d(t,{i:()=>A});var a=i(838e3),n=i(740565),l=i(140049),r=i(554692),s=i(458184),o=i(671466),d=i(641486),c=i(207946),u=i(929463),p=i(398380),m=i(80903),h=i(550005),v=i(403313);let f=(0,p.debounce)(async(e,t)=>{let{id:i,name:a,instanceId:l,mode:r,options:s,notificationOptions:o,runStepConfigs:d,testScenarioSetting:c}=e,{environmentId:p,useDataSetId:f}=s;if(0===d.length)return void u.Ay.error((0,n.hw)({id:"apiTestSuit.requireSelectStep"}));if(-1===f)return(0,v.x)({config:e,projectBranchId:t});let g=u.Ay.loading((0,n.hw)({id:"apiTestSuit.fetchingTestData"}));try{let e=await (0,h.QY)({environmentId:p,dataSetId:f,apiTestCaseId:i});(0,m.Je)().showApiTestDataPickModal(e,async e=>{await (0,v.x)({config:{id:i,name:a,instanceId:l,mode:r,runStepConfigs:d,options:{...s,iterationCount:Math.max(e.dataSets.length,1)},notificationOptions:o,dataToRun:e,testScenarioSetting:c},projectBranchId:t})})}catch(e){e===h.fu?u.Ay.warn((0,n.hw)({id:"apiTestSuit.requireConfigTestData"})):u.Ay.error((0,n.hw)({id:"message.networkFailure"}))}finally{g()}},500,{trailing:!1,leading:!0});var g=i(518853);async function y(e,t,i,a,l){try{await (0,g.oU)(e,t,i,a,l),u.Ay.success((0,n.hw)({id:"apiTestCase.task.successfully"}))}catch(t){let e=null==t?void 0:t.errorCode;if("403043"===e)u.Ay.error((0,n.hw)({id:"apiTestCase.task.fail.runner.offline"}));else if("403044"===e)u.Ay.error((0,n.hw)({id:"apiTestCase.task.fail.runner.running"}));else if("403049"===e)u.Ay.error((0,n.hw)({id:"apiTestCase.task.fail.runner.quotaExceeded"}));else if("403061"===e)u.Ay.error((0,n.hw)({id:"apiTestCase.task.fail.rtm.notEnabled"}));else throw u.Ay.error((0,n.hw)({id:"apiTestCase.task.failed"})),t}}var x=i(311830);function A(e){let{apiTestCaseId:t,className:i,style:u,placement:p,getRunConfig:m,onRun:h,...v}=e,[g,A]=(0,d.useState)(!1),{projectBranchId:j}=(0,d.useContext)(c.r6),b=(0,x.K)(t),w=(0,l.A)(async e=>{var i,a;null==(a=e.target)||null==(i=a.blur)||i.call(a),null==h||h();let n=await m();if(n)try{A(!0);let{options:e}=n,{runnerId:i}=e;i?await y(t,i,j,e,n.notificationOptions):await f(n,j)}catch(e){console.error(e)}finally{A(!1)}});return(0,a.jsx)(r.A,{placement:p,title:b,children:(0,a.jsx)(s.A,{type:"primary",loading:g,disabled:!!b,className:i,style:u,icon:(0,a.jsx)(o.A,{type:"icon-play1",size:16}),onClick:w,...v,children:(0,n.hw)({id:"run"})})})}},550005:function(e,t,i){"use strict";i.d(t,{QY:()=>c,X7:()=>d,fu:()=>o,g9:()=>s});var a=i(419857),n=i(868629),l=i(69712),r=i(398380);function s(e){var t,i,a,n;let{environment:s}=(0,l.Gu)(),o=(0,r.isNumber)(e)?e:(null==(t=s.currentEnvironment)?void 0:t.id)||(null==(i=s.environmentSelectOptions[0])?void 0:i.value);return null==(n=s.environmentMap)||null==(a=n[o])?void 0:a.toSdkObject()}let o=Error("missing testData"),d=new Map;async function c(e){var t,i,l,r;let{dataSetId:s,apiTestCaseId:c,environmentId:u}=e,p=`${c}:${s}:${u}`,m=d.get(p);if(m)return m;let h=await (0,a.nd)({dataSetId:s}),v=(null==h?void 0:h.data)||[],f=null!=(l=null==(t=v.find(e=>e.environmentId===u))?void 0:t.id)?l:null==(i=v.find(e=>0===e.environmentId))?void 0:i.id;if(!f||0===v.length)throw o;try{let e=(await (0,a.Nw)(f)).data,t=e.data||"",i=-1!==t.indexOf(",")?t.indexOf(","):t.indexOf("\n"),l=t.slice(0,i),s=t&&"string"==typeof t&&(null==(r=(0,n.parseJsonOrCsv)(t))?void 0:r.rows)||[],o={...e,testDataSetNameKey:l,dataSets:s};return d.set(p,o),o}catch(e){throw e}}},542563:function(e,t,i){"use strict";i.d(t,{_:()=>L});var a=i(914149),n=i(899473),l=i(856294),r=i(600355),s=i(169508),o=i(982668),d=i(85212),c=i(915753),u=i(117583),p=i(223233),m=i(526838),h=i(740565),v=i(794337),f=i(73586),g=i(520102),y=i(17516),x=i(929463),A=i(179048),j=i(1583),b=i(867325),w=i(398380);class S{static initializeAggregation(e,t,i,a,n){var l,r,s;console.log("[GroupRunner] Initializing aggregation:",e,"workers:",t);let o=(null==n?void 0:n.isTestFlowControl)?0:((null==i||null==(l=i.itemCount)?void 0:l.call(i))||(null==i||null==(r=i.item)?void 0:r.length)||0)*t*(a||1);console.log("[GroupRunner] Total step count:",o,"isTestFlowControl:",null==n?void 0:n.isTestFlowControl),S.workerAggregation.set(e,{expectedWorkerCount:t,completedWorkerCount:0,aggregatedResult:{id:null!=(s=null==n?void 0:n.id)?s:e,result:[],stats:{steps:{total:o,passed:0,failed:0},iterations:{total:0,passed:0,failed:0,pending:0},items:{total:0,passed:0,failed:0,pending:0},scripts:{total:0,passed:0,failed:0,pending:0},prerequests:{total:0,passed:0,failed:0,pending:0},requests:{total:0,passed:0,failed:0,pending:0},tests:{total:0,passed:0,failed:0,pending:0},assertions:{total:0,passed:0,failed:0,pending:0},testScripts:{total:0,passed:0,failed:0,pending:0},prerequestScripts:{total:0,passed:0,failed:0,pending:0}},timings:{responseAverage:0,completed:0,started:0,startTime:Date.now()},consoles:[],requests:[]},aggregatedThreadIndexRes:{},hasError:!1})}static aggregateStats(e,t,i){console.log("[GroupRunner] aggregateStats - START:",{threadCount:Object.keys(e).length,threadKeys:Object.keys(e),totalStepCount:t,isTestFlowControl:null==i?void 0:i.isTestFlowControl});let a={steps:{total:0,passed:0,failed:0},iterations:{},items:{},scripts:{},prerequests:{},requests:{},tests:{},assertions:{},testScripts:{},prerequestScripts:{}};return Object.entries(e).forEach(e=>{let[t,n]=e,l=n.stats;console.log(`[GroupRunner] aggregateStats - Processing ${t}:`,{hasStats:!!l,steps:null==l?void 0:l.steps,iterations:null==l?void 0:l.iterations,items:null==l?void 0:l.items}),l&&Object.keys(a).forEach(e=>{if("steps"===e){var n,r,s,o,d,c;let e=a.steps.passed,u=a.steps.failed;a.steps.passed+=(null==(n=l.steps)?void 0:n.passed)||0,a.steps.failed+=(null==(r=l.steps)?void 0:r.failed)||0,(null==i?void 0:i.isTestFlowControl)&&(a.steps.total+=((null==(d=l.steps)?void 0:d.passed)||0)+((null==(c=l.steps)?void 0:c.failed)||0)),console.log(`[GroupRunner] aggregateStats - ${t} steps:`,{passedAdded:(null==(s=l.steps)?void 0:s.passed)||0,failedAdded:(null==(o=l.steps)?void 0:o.failed)||0,passedBefore:e,passedAfter:a.steps.passed,failedBefore:u,failedAfter:a.steps.failed})}else["total","passed","failed","pending"].forEach(t=>{l[e]&&"number"==typeof l[e][t]&&(a[e][t]||(a[e][t]=0),a[e][t]+=l[e][t])})})}),console.log("[GroupRunner] aggregateStats - RESULT:",{steps:a.steps,iterations:a.iterations,items:a.items}),a}static aggregateTimings(e,t){console.log("[GroupRunner] aggregateTimings - START:",{threadCount:Object.keys(e).length,threadKeys:Object.keys(e),startTime:t});let i=Object.entries(e).reduce((e,t)=>{var i;let[a,n]=t,{timings:l,stats:r}=n;if(console.log(`[GroupRunner] aggregateTimings - Processing ${a}:`,{hasTimings:!!l,hasStats:!!r,timings:l,steps:null==r?void 0:r.steps}),!l||!(null==r?void 0:r.steps))return e;let{steps:s}=r,o=(l.responseAverage||0)*(s.total||0);return console.log(`[GroupRunner] aggregateTimings - ${a} calculation:`,{responseAverage:l.responseAverage,stepsTotal:s.total,weightedAverage:o,started:l.started,completed:l.completed}),e.averageTotal+=o,e.stepsTotal+=s.total||0,e.started=Math.min(null!=(i=l.started)?i:1/0,e.started),e.completed=Math.max(l.completed||0,e.completed),console.log(`[GroupRunner] aggregateTimings - ${a} accumulated:`,{averageTotal:e.averageTotal,stepsTotal:e.stepsTotal,started:e.started,completed:e.completed}),e},{averageTotal:0,started:1/0,completed:0,stepsTotal:0}),a={responseAverage:i.stepsTotal?Math.round(i.averageTotal/i.stepsTotal):0,completed:i.completed-(i.started===1/0?0:i.started),started:0,startTime:t};return console.log("[GroupRunner] aggregateTimings - RESULT:",{finalResponseAverage:a.responseAverage,finalCompleted:a.completed,calculation:{averageTotal:i.averageTotal,stepsTotal:i.stepsTotal,started:i.started,completed:i.completed}}),a}static mergeWorkerResult(e,t,i,a){var n,l,r,s;let o=i.resId,d=o||`thread-${null!=(s=i.threadIndex)?s:Object.keys(e.aggregatedThreadIndexRes).length}`;if(console.log("[GroupRunner] mergeWorkerResult - START:",{threadKey:d,resId:o,workerThreadIndex:i.threadIndex,hasAggregated:!!t,currentThreadKeys:Object.keys(e.aggregatedThreadIndexRes),workerStats:i.stats,workerTimings:i.timings,hasStatsOrTimings:!!(i.stats||i.timings)}),(i.stats||i.timings)&&o?(e.aggregatedThreadIndexRes[d]=i,console.log("[GroupRunner] mergeWorkerResult - Stored in aggregatedThreadIndexRes:",{threadKey:d,resId:o,allThreadKeys:Object.keys(e.aggregatedThreadIndexRes),threadCount:Object.keys(e.aggregatedThreadIndexRes).length})):console.log("[GroupRunner] mergeWorkerResult - Skipped storing (no stats/timings or no resId):",{threadKey:d,resId:o,hasStats:!!i.stats,hasTimings:!!i.timings,reason:o?"no stats or timings":"no resId"}),!t)return console.log("[GroupRunner] mergeWorkerResult - First result, returning as base"),{...i};let c=(null==(l=t.stats)||null==(n=l.steps)?void 0:n.total)||0,u=(null==(r=t.timings)?void 0:r.startTime)||Date.now();console.log("[GroupRunner] mergeWorkerResult - Before aggregation:",{totalStepCount:c,startTime:u,aggregatedStats:t.stats,aggregatedTimings:t.timings});let p=S.aggregateStats(e.aggregatedThreadIndexRes,c,a),m=S.aggregateTimings(e.aggregatedThreadIndexRes,u);console.log("[GroupRunner] mergeWorkerResult - After aggregation:",{newStats:p,newTimings:m});let h=[...t.result||[]];return i.result&&i.result.forEach((e,t)=>{e&&(h[t]=e)}),{...t,id:t.id||i.id,status:i.status||t.status,stats:p,timings:m,result:h,consoles:[...t.consoles||[],...i.consoles||[]],requests:[...t.requests||[],...i.requests||[]],environmentVariable:i.environmentVariable||t.environmentVariable,globalsVariable:i.globalsVariable||t.globalsVariable,teamGlobalsVariable:i.teamGlobalsVariable||t.teamGlobalsVariable,moduleVariablesMap:i.moduleVariablesMap||t.moduleVariablesMap,cookieJar:i.cookieJar||t.cookieJar}}static setupPortIfNeeded(e){return S.setupPortPromise?S.setupPortPromise:(S.setupPortPromise=new Promise(t=>{S.isUtilityProcessListening=!0;let i=!1;f.gc.on("TestCase.GroupRunner",a=>{let n=a.ports||[];0!==n.length&&(console.log(`[GroupRunner Renderer] Received ${n.length} MessagePort(s)`),n.forEach((e,t)=>{e.onmessage=e=>{var i,a,n,l,r;console.log(`[GroupRunner Renderer] Port ${t} received message:`,{channel:null==(i=e.data)?void 0:i.channel,eventId:null==(a=e.data)?void 0:a.eventId,hasData:!!(null==(n=e.data)?void 0:n.data),dataType:typeof(null==(l=e.data)?void 0:l.data),dataIsArray:Array.isArray(null==(r=e.data)?void 0:r.data),rawData:e.data});let{channel:s,eventId:o,data:d}=e.data||{};if("TestCase.GroupRunner"!==s||!d)return void console.warn(`[GroupRunner Renderer] Port ${t} ignored message - channel or data missing`);if(console.log(`[GroupRunner Renderer] Port ${t} checking Result type:`,{dataStructure:d,isArray:Array.isArray(d),length:Array.isArray(d)?d.length:void 0,firstElement:Array.isArray(d)?d[0]:void 0,secondElement:Array.isArray(d)?d[1]:void 0,isErrResult:(0,b.ys)(d)}),(0,b.ys)(d)){console.error(`[GroupRunner Renderer] Port ${t} received error:`,(0,b.Me)(d)),S.handleRunnerResult(null,o,"fatalError");return}let c=(0,b.Tp)(d);console.log(`[GroupRunner Renderer] Port ${t} unwrapped data:`,{unwrappedData:c,type:null==c?void 0:c.type,hasType:!!(null==c?void 0:c.type),hasPayload:!!(null==c?void 0:c.payload),hasStatisticResult:!!(null==c?void 0:c.statisticResult)});let{type:u,payload:p,statisticResult:m}=c,h=null==p?void 0:p.totalProcesses,v=null==p?void 0:p.processIndex,f=null==p?void 0:p.totalThreads,g=null==p?void 0:p.threadIndex;if(!S.workerAggregation.has(o)){let e=f&&f>1?f:0;e>1&&(console.log(`[GroupRunner Renderer] Initializing aggregation for ${e} threads ${h&&h>1?`across ${h} processes`:"(single process)"}`),S.initializeAggregation(o,e))}console.log(`[GroupRunner Renderer] Port ${t} dispatching to handler:`,{eventId:o,replyType:u,hasPayload:!!p,hasStatisticResult:!!m,statisticResultResId:null==m?void 0:m.resId,totalProcesses:h,processIndex:v,totalThreads:f,threadIndex:g,hasHandler:S.runnerHandler.has(o),registeredHandlers:Array.from(S.runnerHandler.keys())}),S.handleRunnerResult(null,o,u,p,m)},e.start()}),S.allRunnerPorts.forEach(e=>e.close()),S.allRunnerPorts=n,S.runnerPort=n[0],e.length>0&&(e.forEach(e=>{n[0].postMessage(e)}),e.length=0),i||(i=!0,t(!0)))})}),S.setupPortPromise)}static sendAction(e,t){S.runnerPort?S.runnerPort.postMessage(e):t.push(e)}static registerHandler(e,t,i){if(S.runnerHandler.set(e,[t,i]),i.process){let t=(0,w.throttle)(()=>{let t=S.workerAggregation.get(e);if(null==t?void 0:t.aggregatedResult){var a;null==(a=i.process)||a.call(i,t.aggregatedResult)}},300,{leading:!0,trailing:!1});S.throttledProcessCallbacks.set(e,t)}}static unregisterHandler(e){S.runnerHandler.delete(e),S.workerAggregation.delete(e),S.throttledProcessCallbacks.delete(e)}static isListening(){return S.isUtilityProcessListening}static getAggregationState(e){return S.workerAggregation.get(e)}}(0,m._)(S,"runnerHandler",new Map),(0,m._)(S,"runnerPort",null),(0,m._)(S,"allRunnerPorts",[]),(0,m._)(S,"isUtilityProcessListening",!1),(0,m._)(S,"setupPortPromise",null),(0,m._)(S,"workerAggregation",new Map),(0,m._)(S,"throttledProcessCallbacks",new Map),(0,m._)(S,"handleRunnerResult",(e,t,i,a,n)=>{var l,r,s,o,d,c,u,p,m,h,v,f,g,y,x,A,j,b,w,C;if(console.log("handleRunnerResult",t,"type:",i,"hasHandler:",S.runnerHandler.has(t),"hasStatisticResult:",!!n,"resId:",null==n?void 0:n.resId),!S.runnerHandler.has(t))return;let[I,N]=S.runnerHandler.get(t);if(N)switch(i){case"stepProgress":{let e=S.workerAggregation.get(t);if(e&&n){let t={...a,stats:n.stats,timings:n.timings,resId:n.resId};e.aggregatedResult=S.mergeWorkerResult(e,e.aggregatedResult,t,{isTestFlowControl:null==(l=I.runnerOptions)?void 0:l.isTestFlowControl})}break}case"step":{null==(r=I.hideLoading)||r.call(I),I.hideLoading=null;let e=S.workerAggregation.get(t),i=null==a?void 0:a.threadIndex,n=null==a?void 0:a.threadRes;if(e){e.aggregatedResult&&(e.aggregatedResult.result||(e.aggregatedResult.result=[]),void 0!==n&&void 0!==i&&(e.aggregatedResult.result[i]=n)),e.aggregatedResult=S.mergeWorkerResult(e,e.aggregatedResult,a,{isTestFlowControl:null==(o=I.runnerOptions)?void 0:o.isTestFlowControl});let l=S.throttledProcessCallbacks.get(t);l?l():null==(d=N.process)||d.call(N,e.aggregatedResult)}else void 0!==n&&void 0!==i&&(I.result||(I.result={result:[]}),I.result.result||(I.result.result=[]),I.result.result[i]=n),null==(s=N.process)||s.call(N,a);break}case"done":{let e=S.workerAggregation.get(t),i=null==a?void 0:a.threadIndex,l=null==a?void 0:a.threadRes;if(console.log("[GroupRunner] Received 'done' event (iteration complete):",{collectionId:t,threadIndex:i,hasAggState:!!e}),!e){void 0!==l&&void 0!==i&&(I.result||(I.result={result:[]}),I.result.result||(I.result.result=[]),I.result.result[i]=l),console.log("[GroupRunner] Single-thread mode - calling done immediately"),null==(c=I.hideLoading)||c.call(I),S.runnerHandler.delete(t),I.status="done",null==(u=N.done)||u.call(N,I.handleResult(a)),S.unregisterHandler(t);break}if(e.aggregatedResult){e.aggregatedResult.result||(e.aggregatedResult.result=[]),void 0!==l&&void 0!==i&&(e.aggregatedResult.result[i]=l);let t=n?{...a,stats:n.stats,timings:n.timings,resId:n.resId}:a;e.aggregatedResult=S.mergeWorkerResult(e,e.aggregatedResult,t,{isTestFlowControl:null==(p=I.runnerOptions)?void 0:p.isTestFlowControl})}console.log(`[GroupRunner] Updated aggregated result for thread ${i} (iteration done, waiting for complete event)`),e.aggregatedResult&&(null==(m=N.process)||m.call(N,e.aggregatedResult))}case"process":{let e=S.workerAggregation.get(t);e?(e.aggregatedResult=S.mergeWorkerResult(e,e.aggregatedResult,a,{isTestFlowControl:null==(v=I.runnerOptions)?void 0:v.isTestFlowControl}),null==(f=N.process)||f.call(N,e.aggregatedResult)):null==(h=N.process)||h.call(N,a);break}case"abort":S.workerAggregation.delete(t),null==(g=I.hideLoading)||g.call(I),S.runnerHandler.delete(t),null==(y=N.abort)||y.call(N,a);break;case"saveTestCaseReport":null==(x=N.saveTestCaseReport)||x.call(N,a);break;case"complete":{let e=S.workerAggregation.get(t);if(I.status="done",e){if(e.completedWorkerCount++,console.log(`[GroupRunner] Thread completed: ${e.completedWorkerCount}/${e.expectedWorkerCount} for collection ${t}`,{threadIndex:null==a?void 0:a.threadIndex,localThreadIndex:null==a?void 0:a.localThreadIndex}),e.completedWorkerCount<e.expectedWorkerCount){e.aggregatedResult&&(null==(j=N.process)||j.call(N,e.aggregatedResult));return}console.log(`[GroupRunner] All threads completed for collection ${t}, calling final done callback`),null==(A=I.hideLoading)||A.call(I),e.aggregatedResult&&(null==(b=N.done)||b.call(N,I.handleResult(e.aggregatedResult))),S.unregisterHandler(t)}else;break}case"fatalError":{let e=S.workerAggregation.get(t);e&&(e.hasError=!0),S.workerAggregation.delete(t),null==(w=I.hideLoading)||w.call(I),S.runnerHandler.delete(t),null==(C=N.error)||C.call(N);break}default:console.log(`[GroupRunner] Ignoring unhandled event type: ${i}`)}});class C{static async create(e,t){return await y.sdkContainer.getItems(e=>[e.Utils]),new C(e,t)}sendRunnerAction(e){S.sendAction(e,this.pendingAction)}updateVariables(e){this.saveVariables&&(this.environment&&(null==e?void 0:e.environmentVariable)&&(0,j.Lf)(this.environment,e.environmentVariable),this.globals&&(null==e?void 0:e.globalsVariable)&&(0,j.jO)(this.globals,e.globalsVariable),this.teamGlobals&&(null==e?void 0:e.teamGlobalsVariable)&&(0,j.Vr)(this.teamGlobals,e.teamGlobalsVariable),this.moduleVariablesMap&&(null==e?void 0:e.moduleVariablesMap)&&(0,j.vz)(this.moduleVariablesMap,e.moduleVariablesMap)),this.saveGlobalCookie&&(null==e?void 0:e.cookieJar)&&(0,v.L)(g.CookieJar.fromJSON(e.cookieJar))}handleResult(e){return this.updateVariables(e),e}run(e,t){let i=!(arguments.length>2)||void 0===arguments[2]||arguments[2],{Utils:a}=y.sdkContainer.getItemsSync(e=>[e.Utils]),l=!S.isListening(),r=l?S.setupPortIfNeeded(this.pendingAction):Promise.resolve(!0);i&&(this.hideLoading=x.Ay.loading((0,h.hw)({id:"apiTestCase.threadResources"}),60));let{runnerOptions:s}=this;this.saveGlobalCookie&&(s.returnCookieJar=!0),this.saveVariables&&(s.returnEnvironmentVariable=!0,s.returnGlobalsVariable=!0,s.returnTeamGlobalsVariable=!0,s.returnModuleVariablesMap=!0),this.consoleLog&&(s.returnConsole=!0),s.certificatesList=(0,n.i8)(),s.fastResponse=!0,s.responseSizeThreshold=0x3200000;let o=s.threadCount||1,d=s.iterationCount||1,c=new Promise(e=>{console.log("[GroupRunner] Sending IPC with collection.id:",this.collection.id),f.gc.send("TestCase.GroupRunner",this.collection.id,a.PropertyBase.toJSON({collection:this.collection,options:s,portConnected:!l,threadCount:o,iterationCount:d})),e(!0)});console.log("[GroupRunner] Registering handler for collection.id:",this.collection.id),S.registerHandler(this.collection.id,this,t),o>1&&(console.log(`[GroupRunner] Initializing aggregation for ${o} threads`),S.initializeAggregation(this.collection.id,o,this.collection,d,s)),Promise.all([c,r]).then(()=>{})}constructor(e,{consoleLog:t=!1,saveGlobalCookie:i=!1,saveVariables:a=!1,readGlobalCookie:n=!1,delayItem:l,...r}){(0,m._)(this,"environment",void 0),(0,m._)(this,"globals",void 0),(0,m._)(this,"teamGlobals",void 0),(0,m._)(this,"moduleVariablesMap",void 0),(0,m._)(this,"canceled",!1),(0,m._)(this,"id",void 0),(0,m._)(this,"status",void 0),(0,m._)(this,"collection",void 0),(0,m._)(this,"saveGlobalCookie",void 0),(0,m._)(this,"saveVariables",void 0),(0,m._)(this,"runnerOptions",{}),(0,m._)(this,"consoleLog",void 0),(0,m._)(this,"hideLoading",void 0),(0,m._)(this,"pendingAction",[]),(0,m._)(this,"abort",()=>{var e;this.status="abort",this.sendRunnerAction({type:"TestCase.RunnerAction",id:this.id,eventId:this.id,typeAction:"abort"}),null==(e=this.hideLoading)||e.call(this),S.unregisterHandler(this.id)}),(0,m._)(this,"pause",()=>{var e;this.sendRunnerAction({type:"TestCase.RunnerAction",id:this.id,eventId:null==(e=this.collection)?void 0:e.id,typeAction:"pause"})}),(0,m._)(this,"resume",()=>{var e;this.sendRunnerAction({type:"TestCase.RunnerAction",id:this.id,eventId:null==(e=this.collection)?void 0:e.id,typeAction:"resume"})});r.id=r.id||(0,A.A)(),this.id=r.id,this.collection=e,this.saveGlobalCookie=i,this.saveVariables=a,this.environment=r.environment,this.globals=r.globals,this.teamGlobals=r.teamGlobals,this.moduleVariablesMap=r.moduleVariablesMap,this.consoleLog=t,n&&(r.cookieJar=v.b),l&&(r.delay=r.delay||{},r.delay.item=l),this.runnerOptions=r}}var I=i(900931),N=i(571001),k=i(496411),T=i(618487),M=i(798467);class E{updateApiTestGroupRun(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.status&&(this.status=e.status),(0,I.o)().updateFunctionalTestCaseGroupRun({runnerId:this.id,data:e,projectBranchId:this.projectBranchId,options:{isThrottleUpdateReport:t,isThrottleUpdateReportDetail:!0}})}async run(){var e,t,i,a;let n={name:this.collection.name,environmentName:null==(e=this.environment)?void 0:e.name,type:"testCaseGroup",status:"running",runnerId:this.id,relatedId:this.relatedId,instanceId:this.instanceId,source:s.HZ?"web":"desktop",saveDetailType:this.runnerOptions.saveReportDetail||"none",projectBranchId:this.projectBranchId};this.updateApiTestGroupRun({id:this.id,reportId:this.reportId,collection:this.collection,environment:this.runnerOptions.environment,runner:this,stats:{steps:{total:0,passed:0,failed:0}},stepTree:[],isTestFlowControl:null==(t=this.runnerOptions)?void 0:t.isTestFlowControl,creatorId:(0,T.getCurrentUserId)(),reportExtraData:this.reportExtraData,appVersion:s.CU,...this.reportExtraData,...n}),await (0,N.xb)(n,e=>{this.reportId=null==e?void 0:e.id,(0,w.isNil)(this.reportId)||this.updateApiTestGroupRun({reportId:this.reportId})});let l=null!=(a=null==(i=this.runnerOptions)?void 0:i.threadCount)?a:1;this.runner=await C.create(this.collection,{id:this.id,consoleLog:!1,saveReport:!0,stepCallback:!0,processCallbackDebounce:l>10?1500:500,returnStepType:"summary",...this.runnerOptions});let r=e=>{!1!==this.runnerOptions.saveReport&&(0,I.o)().uploadFunctionalTestReportDetail({runnerId:this.id,reportDetail:e})};this.runner.run({projectId:(0,k.MJ)(),relatedId:this.relatedId},{process:e=>{this.updateApiTestGroupRun(e,!0)},done:e=>{var t,i,a,l;this.updateApiTestGroupRun({...e,status:"done"}),null==(t=(i=this.callback).reportUploaded)||t.call(i),null==(a=(l=this.callback).done)||a.call(l),(0,M.W)({...n,id:this.reportId},e,this.notificationOptions)},abort:e=>{var t,i;r(e),null==(t=(i=this.callback).reportUploaded)||t.call(i)},saveTestCaseReport:e=>{r(e)},error:()=>{x.Ay.error((0,h.hw)({id:"message.failureWith"},{name:(0,h.hw)({id:"apiTestCase.report.executed"})})),this.abort()}})}constructor(e,{instanceId:t,relatedId:i,projectBranchId:a,reportExtraData:n,callback:l,notificationOptions:r,reRunConfigs:s,...o}){var d;(0,m._)(this,"runner",void 0),(0,m._)(this,"id",void 0),(0,m._)(this,"relatedId",void 0),(0,m._)(this,"projectBranchId",void 0),(0,m._)(this,"collection",void 0),(0,m._)(this,"status","running"),(0,m._)(this,"reRunConfigs",void 0),(0,m._)(this,"runnerOptions",void 0),(0,m._)(this,"runningInBackground",!1),(0,m._)(this,"reportId",void 0),(0,m._)(this,"instanceId",void 0),(0,m._)(this,"environment",void 0),(0,m._)(this,"notificationOptions",void 0),(0,m._)(this,"reportExtraData",void 0),(0,m._)(this,"callback",void 0),(0,m._)(this,"abort",()=>{if("done"!==this.status){var e,t,i;null==(e=this.runner)||e.abort(),this.updateApiTestGroupRun({status:"abort"}),null==(t=(i=this.callback).abort)||t.call(i)}}),(0,m._)(this,"resume",()=>{if("pause"===this.status){var e,t,i;null==(e=this.runner)||e.resume(),this.updateApiTestGroupRun({status:"running"}),null==(t=(i=this.callback).resume)||t.call(i)}}),(0,m._)(this,"pause",()=>{if("running"===this.status){var e,t,i;null==(e=this.runner)||e.pause(),this.updateApiTestGroupRun({status:"pause"}),null==(t=(i=this.callback).pause)||t.call(i)}}),(0,m._)(this,"setRunningInBackground",e=>{this.runningInBackground=e}),this.collection=e,this.relatedId=i,this.instanceId=t,this.projectBranchId=a,o.responseSizeThreshold=0x3200000;o.id=null!=(d=o.id)?d:(0,A.A)(),this.id=o.id,this.runnerOptions=o,this.environment=o.environment,this.reportExtraData=n,this.reRunConfigs=s,this.callback=l||{},this.notificationOptions=r}}var _=i(474256),F=i(743994);class D{updateApiTestRun(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.status&&(this.status=e.status),(0,F.x)().updateFunctionalTestCaseRun({runnerId:this.id,data:e,projectBranchId:this.projectBranchId,options:{isThrottleUpdateReport:t,isThrottleUpdateReportDetail:!0}})}async run(){var e,t,i,a,n,l,r;let{ipc:o,messagePort:d,isShowLoading:c}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u={name:this.collection.name,environmentName:null==(e=this.environment)?void 0:e.name,type:this.reportType||"testCase",status:"running",runnerId:this.id,relatedId:this.relatedId,instanceId:this.instanceId,endpointId:this.endpointId,projectModuleId:this.projectModuleId,source:s.HZ?"web":"desktop",saveDetailType:this.runnerOptions.saveReportDetail||"none",shareType:this.runnerOptions.shareReport?"OVERVIEW":void 0,projectBranchId:this.projectBranchId,saveReport:null==(l=this.runnerOptions.saveReport)||l};this.updateApiTestRun({id:this.id,collection:this.collection,environment:this.environment,runner:this,isTestFlowControl:null==(t=this.runnerOptions)?void 0:t.isTestFlowControl,creatorId:(0,T.getCurrentUserId)(),appVersion:s.CU,stepGroups:Array.from({length:(null==(i=this.runnerOptions)?void 0:i.iterationCount)||1},()=>[]),stats:{steps:{total:0,passed:0,failed:0}},stepTree:[],reportExtraData:this.reportExtraData,...this.reportExtraData,...u}),this.uploadReportSummary&&await (0,N.xb)(u,e=>{this.reportId=null==e?void 0:e.id,(0,w.isNil)(this.reportId)||this.updateApiTestRun({reportId:this.reportId})}),this.runner=await _.RunnerFactory.createRunner(this.collection,{consoleLog:!0,saveReport:null==(r=this.runnerOptions.saveReport)||r,stepCallback:!0,stepCallbackDebounce:500,returnStepType:"summary",...this.runnerOptions},{ipc:o,messagePort:d});let p=this.collection.items.idx(0);null==(a=(n=this.callback).run)||a.call(n),this.runner.run({asyncBeforeItem:e=>{let t=p.items.idx(e.position);this.updateApiTestRun({updateStep:{cursor:e,status:this.status,metaInfo:t.metaInfo,type:t.type}},!0)},step:e=>{this.updateApiTestRun(e,!0)},done:e=>{var t,i;this.updateApiTestRun({status:"done",...e}),null==(t=(i=this.callback).done)||t.call(i),this.uploadReportSummary&&(0,M.W)({...u,id:this.reportId},e,this.notificationOptions)},saveTestCaseReport:e=>{var t,i;(0,F.x)().uploadFunctionalTestReportDetail({runnerId:this.id,reportDetail:e,isThrottleUpdateReportDetail:!1}),null==(t=(i=this.callback).reportUploaded)||t.call(i)},error:()=>{x.Ay.error((0,h.hw)({id:"message.failureWith"},{name:(0,h.hw)({id:"apiTestCase.report.executed"})})),this.abort()}},c)}constructor(e,{instanceId:t,endpointId:i,projectModuleId:a,reportType:n,relatedId:l,projectBranchId:r,reRunConfigs:s,reportExtraData:o,uploadReportSummary:d,callback:c,notificationOptions:u,...p}){var h;(0,m._)(this,"runner",void 0),(0,m._)(this,"id",void 0),(0,m._)(this,"collection",void 0),(0,m._)(this,"relatedId",void 0),(0,m._)(this,"projectBranchId",void 0),(0,m._)(this,"status","running"),(0,m._)(this,"reRunConfigs",void 0),(0,m._)(this,"runningInBackground",!1),(0,m._)(this,"reportId",void 0),(0,m._)(this,"instanceId",void 0),(0,m._)(this,"endpointId",void 0),(0,m._)(this,"projectModuleId",void 0),(0,m._)(this,"reportType",void 0),(0,m._)(this,"runnerOptions",void 0),(0,m._)(this,"environment",void 0),(0,m._)(this,"reportExtraData",void 0),(0,m._)(this,"uploadReportSummary",void 0),(0,m._)(this,"callback",void 0),(0,m._)(this,"notificationOptions",void 0),(0,m._)(this,"abort",()=>{if("done"!==this.status){var e,t,i;null==(e=this.runner)||e.abort(),this.updateApiTestRun({status:"abort"}),null==(t=(i=this.callback).abort)||t.call(i)}}),(0,m._)(this,"resume",()=>{if("pause"===this.status){var e,t,i;null==(e=this.runner)||e.resume(),this.updateApiTestRun({status:"running"}),null==(t=(i=this.callback).resume)||t.call(i)}}),(0,m._)(this,"pause",()=>{if("running"===this.status){var e,t,i;null==(e=this.runner)||e.pause(),this.updateApiTestRun({status:"pause"}),null==(t=(i=this.callback).pause)||t.call(i)}}),(0,m._)(this,"setRunningInBackground",e=>{this.runningInBackground=e}),this.collection=e,this.relatedId=l,this.instanceId=t,this.endpointId=i,this.projectModuleId=a,this.projectBranchId=r,this.reportType=n,p.responseSizeThreshold=0x3200000;p.id=null!=(h=p.id)?h:(0,A.A)(),this.id=p.id,this.runnerOptions=p,this.environment=p.environment,this.reRunConfigs=s,this.reportExtraData=o,this.uploadReportSummary=null==d||d,this.callback=c||{},this.notificationOptions=u}}var R=i(435685),O=i(246313),P=i(213540);async function L(e,t){var i,m,h,v;let{name:f,relatedId:g,folderId:y,instanceId:x,endpointId:A,projectModuleId:j,collectionId:b,dataToRun:S,stepConfigs:C,runnerOptions:I,notificationOptions:N,environment:T,testScenarioSetting:M,uploadReportSummary:_,reRunConfigs:F,callback:L,isShowLoading:$,testDataList:B,reportType:z,endpoint:U,messagePort:H,taskId:V}=e,{httpApiMap:K,socketApiMap:q,socketServiceMap:G,globals:W,teamGlobals:J,vault:Y,moduleVariablesMap:Z,defaultModuleId:Q,commonHttpApiResponseMap:X,dataSchemaDefinitions:ee,customFunctionMap:et,httpFolderMap:ei,rootFolderMap:ea,securitySchemeMap:en,projectMockRule:el,commonParameters:er,projectSetting:es,databaseConnectionMap:eo,commonScriptMap:ed,refApiTestCaseMap:ec,projectAssociations:eu,environmentMap:ep}=await (0,O.h)(g,C,t),em=Object.fromEntries(Object.entries((0,o.H)().map).map(e=>{let[t,i]=e;return[t,{id:i.id,name:i.name}]})),eh={projectId:(0,k.MJ)(),relatedId:g,reportType:z,endpoint:U,environmentId:Number(T.id),projectSetting:es,refApiTestCaseMap:ec,projectAssociations:eu,onError:I.onError,threadCount:I.threadCount,iterationCount:I.iterationCount,useDataSetId:I.useDataSetId,testDataList:B,environmentMap:ep,testCaseTagMap:em},{TestFlowControlStepBuilder:ev,isTestFlowControlConfig:ef}=await R.baseContainer.items.collectionBuilders,{CollectionBuilder:eg}=await R.baseContainer.items.converters,ey=ef(C,eh),ex=new ev(C,eh).build(),eA=(0,u.u)(es),ej=(0,p.yz)(es),eb=await (0,c.UH)(es),ew=(0,p.fF)("ApiTest",es),eS=(0,k.zg)(),eC=(0,a.Ap)().getCurrentAgentId(),eI=await (0,d.LP)().getRequestProxyAgentMapForCall(),eN=null==B?void 0:B.reduce((e,t)=>(e[t.id]=t.dataSets,e),{}),ek=new eg({id:b,name:f,testCases:[{name:f,steps:ex}],environment:T,commonParameters:er,httpApiMap:K,socketApiMap:q,socketServiceMap:G,testScenarioSetting:(null==es?void 0:es.advancedSettings.enableTestScenarioSetting)?M:void 0,databaseConnectionMap:eo,commonScriptMap:ed,commonHttpApiResponseMap:X,dataSchemaDefinitions:ee,customFunctionMap:et,servers:(null==es?void 0:es.servers)||[],httpFolderMap:ei,httpRootFolderMap:ea,securitySchemeMap:en,certificatesList:(0,n.i8)(),cloudMock:(null==es?void 0:es.cloudMock)||{},enableBigInt:eS,enableJsonc:null==es||null==(i=es.advancedSettings)?void 0:i.enableJsonc,enableYAPICompatScript:null==es||null==(m=es.advancedSettings)?void 0:m.enableYAPICompatScript,isTestFlowControl:ey,projectMockRule:el,projectAssociationMap:(0,w.keyBy)(eu,"id"),disabledResponseValidate:ew,isOverrideRequesterOption:!0,currentAgentId:eC,requestProxyAgentMap:eI}).build(),eT=(0,n.kx)(),eM=(0,n.kA)(),eE=(0,l.j)(),e_={reportType:z,globals:W,teamGlobals:J,vault:Y,environment:T,moduleVariablesMap:Z,testDataMap:eN,defaultModuleId:Q,projectId:(0,k.MJ)(),folderId:y,instanceId:x,endpointId:A,projectModuleId:j,relatedId:g,data:(null==S?void 0:S.dataSets)||[],isTestFlowControl:ey,enableBigInt:eS,requester:{strictSSL:eT,extendedRootCA:eM&&eT?null==(h=(0,n.Eg)())?void 0:h.data:void 0,followRedirects:eE.followRedirects,...eA},...ej,dynamicValueFakerOption:eb,reportExtraData:{iterationDataNames:(null==S||null==(v=S.dataSets)?void 0:v.map(e=>e[S.testDataSetNameKey]))||[],runOptions:I},uploadReportSummary:_,callback:L,timeout:(0,k.uN)(),notificationOptions:N,...I,reRunConfigs:F,projectBranchId:t};if(s.HZ&&(e_.threadCount=1),(0,r.Ts)(),e_.threadCount>1){let e=new E(ek,e_);return await e.run(),e}if(H){let e=new D(ek,e_);return await e.run({messagePort:H,isShowLoading:$}),e}{let e=new D(ek,e_);return await e.run({ipc:await (0,P.W)(),isShowLoading:$}),e}}},403313:function(e,t,i){"use strict";i.d(t,{x:()=>m});var a=i(740565),n=i(900931),l=i(743994),r=i(660464),s=i(793594),o=i(929463),d=i(391478),c=i(90836),u=i(550005),p=i(542563);async function m(e){let{config:t,projectBranchId:i,isReRun:m}=e,{id:h,name:v,options:f,dataToRun:g,instanceId:y,runStepConfigs:x,notificationOptions:A,testScenarioSetting:j}=t;(0,s.IL)("runTestCase");let b=(0,u.g9)(null==f?void 0:f.environmentId);if(!b)return void o.Ay.error((0,a.hw)({id:"apiTest.message.noCorrespondEnvironmentInformation"}));let w=f.threadCount>1?"testCaseGroup":"testCase",S=await (0,p._)({relatedId:h,instanceId:y,name:v,environment:b,runnerOptions:f,notificationOptions:A,stepConfigs:x,dataToRun:-1===f.useDataSetId?void 0:g,testScenarioSetting:j,reRunConfigs:{config:t,projectBranchId:i},callback:{run:()=>(0,c.w)(!0),done:()=>(0,c.w)(!1),abort:()=>(0,c.w)(!1),reportUploaded:()=>{S.runningInBackground&&("testCase"===w?(0,l.x)().delete(S.id):(0,n.o)().delete(S.id)),(0,r.ZF)().fetchTree()}}},i);(0,d.Le)({name:v,type:w,runnerId:S.id,isResidentCurrentTab:!m})}},311830:function(e,t,i){"use strict";i.d(t,{K:()=>l});var a=i(740565),n=i(334821);function l(e){if((0,n.gK)(t=>t.getTestScenarioState(e).blockRoot).hasDescendantError())return(0,a.hw)({id:"apiTestCase.saveRequiredTips"})}},374973:function(e,t,i){"use strict";i.d(t,{Fq:()=>g,yO:()=>v});var a=i(838e3),n=i(325318),l=i(744283),r=i(740565),s=i(375302),o=i(660464),d=i(523845),c=i(520787),u=i(929463),p=i(452267),m=i(671466),h=i(898358);async function v(e){let t=u.Ay.loading({content:"Loading...",duration:0});try{let t=await (0,c.iy)(e);return await (0,o.ZF)().fetchTree(),u.Ay.success((0,r.hw)({id:"message.operateSuccess"})),t}catch(e){throw e}finally{t()}}function f(){(0,d.HB)()?(0,d.op)():(0,s.M)().openTestScenarioForkModal()}function g(){return(0,a.jsx)(n.y,{permission:l.o.TEST_SCENARIO_CDU,children:(0,a.jsx)(p.A.Item,{onClick:f,icon:(0,a.jsx)(m.A,{type:"icon-task-scenario",color:"var(--ui-blue-6)",size:h.Ev}),children:(0,a.jsx)(r.sA,{id:"branch.importScenario.fromMain"})})})}},359183:function(e,t,i){"use strict";i.d(t,{b:()=>f,c:()=>v});var a=i(838e3),n=i(325318),l=i(744283),r=i(740565),s=i(375302),o=i(660464),d=i(335338),c=i(232821),u=i(452267),p=i(671466),m=i(449104),h=i(898358);function v(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.RO,t=(0,o.ZF)().getNode(e);t&&(0,s.M)().openTestScenarioFromModel({folderKey:e,async onSubmit(e){var i;let{fetchTree:a,getLastNewOrdering:n}=(0,o.ZF)(),l=null!=(i=(0,h.oA)(e.folderKey))?i:t.id,{data:r}=await (0,c.vt)({folderId:l,name:e.name,priority:e.priority,tags:e.tags,ordering:n(e.folderKey),description:e.description||""});await a(),await (0,d.DY)({data:r})}})}function f(e){let{nodeKey:t=m.RO,isEntrance:i=!1}=e;return(0,a.jsx)(n.y,{permission:l.o.TEST_SCENARIO_CDU,children:(0,a.jsx)(u.A.Item,{onClick:()=>v(t),icon:(0,a.jsx)(p.A,{type:"icon-task-scenario",color:"var(--ui-purple-6)",size:h.Ev}),children:(0,a.jsx)(r.sA,{id:i?"testScenario.newTestScenario":"testScenario.addTestScenario"})})})}},173215:function(e,t,i){"use strict";i.d(t,{N:()=>h});var a=i(838e3),n=i(325318),l=i(744283),r=i(740565),s=i(375302),o=i(660464),d=i(940609),c=i(452267),u=i(671466),p=i(449104),m=i(898358);function h(e){let{nodeKey:t=p.RO,text:i=(0,r.hw)({id:"newFolder"})}=e;return(0,a.jsx)(n.y,{permission:l.o.TEST_SCENARIO_CDU,children:(0,a.jsx)(c.A.Item,{onClick:()=>{(0,s.M)().openFolderCreateModal({type:"testScenarioFolder",parentKey:t,async onSubmit(e){var i;let{name:a,parentKey:n}=e,{fetchTree:l,getLastNewOrdering:r,expandNode:s}=(0,o.ZF)(),c=null!=(i=(0,m.oA)(n))?i:0;await (0,d.vt)({parentId:c,name:a,ordering:r(n)}),await l(),s(t,o.Kk.SELF)}})},icon:(0,a.jsx)(u.A,{type:"icon-folder-add",size:m.Ev}),children:i})})}},510615:function(e,t,i){"use strict";i.d(t,{nV:()=>tX});var a=i(838e3),n=i(740565),l=i(660464),r=i(316620),s=i(964619),o=i(940609),d=i(955659),c=i(81319),u=i(838487),p=i.n(u),m=i(452267),h=i(257100),v=i(929463),f=i(671466),g=i(641486),y=i(898358),x=i(325318),A=i(744283),j=i(353748),b=i(276129),w=i(764007);let S="title-with-hotkey-label-HeReEF",C="hotkey-label-FRf6z6",I=function(e){let{hotkey:t,children:i,hotkeyClassnames:n}=e;return(0,a.jsxs)("div",{className:p()("flex items-center justify-between",S),children:[(0,a.jsx)("span",{children:i}),(0,a.jsx)("span",{className:p()("ml-6",C,n),children:(0,b.x8)(t)})]})};function N(e,t,i){w.Ay.confirm({title:(0,n.hw)({id:"confirm.delete"}),...i,async onOk(){let i=v.Ay.loading("Loading..."),a=[];(0,l.TQ)(e,e=>{a.push(e.key)}),(0,j.g0)().closeTabs(a),await t(),(0,y.Bg)(e)?await (0,l.ZF)().fetchTestScheduledTaskTree():(0,y.nq)(e)?await (0,l.ZF)().fetchTestSuiteTree():(0,y.RY)(e)?await (0,l.ZF)().fetchTestDataTree():await (0,l.ZF)().fetchTree(),i(),v.Ay.success((0,n.hw)({id:"message.deleteSuccess"}))}})}function k(e){let{hideHotkeyLabel:t,onDelete:i}=e;return(0,a.jsx)(x.y,{permission:A.o.TEST_SCENARIO_CDU,children:(0,a.jsx)(m.A.Item,{danger:!0,onClick:i,icon:(0,a.jsx)(f.A,{type:"icon-trash-04",size:y.Ev}),children:t?(0,a.jsx)(n.sA,{id:"delete"}):(0,a.jsx)(I,{hotkey:"delete",children:(0,a.jsx)(n.sA,{id:"delete"})})})})}async function T(e,t){let i=v.Ay.loading({content:"Loading...",duration:0});try{let i=await t();return(0,y.Bg)(e)?await (0,l.ZF)().fetchTestScheduledTaskTree():(0,y.nq)(e)?await (0,l.ZF)().fetchTestSuiteTree():(0,y.RY)(e)?await (0,l.ZF)().fetchTestDataTree():await (0,l.ZF)().fetchTree(),v.Ay.success((0,n.hw)({id:"message.duplicateSuccess"})),i}catch(e){throw e}finally{i()}}function M(e){let{disabled:t,disabledTooltip:i,hideHotkeyLabel:l,onDuplicate:r}=e;return(0,a.jsx)(x.y,{permission:A.o.TEST_SCENARIO_CDU,checkPermissionFn:e=>{let{hasPermission:i}=e;return t||i},tooltipProps:{title:i},children:(0,a.jsx)(m.A.Item,{onClick:r,icon:(0,a.jsx)(f.A,{type:"icon-copy-02",size:y.Ev}),children:(0,a.jsx)(I,{hotkeyClassnames:p()({"opacity-0":l}),hotkey:"duplicate",children:(0,a.jsx)(n.sA,{id:"createAsCopy"})})})})}var E=i(375302),_=i(520787),F=i(192093),D=i(934429),R=i(490401),O=i(939632);function P(e){let{nodeKey:t,disableValue:i}=e;return(0,a.jsx)(x.y,{permission:A.o.TEST_SCENARIO_CDU,children:(0,a.jsx)(m.A.Item,{onClick:()=>(function(e,t){let{getNode:i,fetchTree:a,fetchTestScheduledTaskTree:r,fetchTestSuiteTree:s,fetchTestDataTree:o}=(0,l.ZF)(),{openMoveToModal:d,hideMoveToModal:c}=(0,E.M)(),u=i(e);if(!u)return;let p=(0,y.Bg)(u),m=(0,y.nq)(u),h=(0,y.RY)(u);d({type:p?"TEST_SCHEDULED_TASK_FOLDER":m?"TEST_SUITE_FOLDER":h?"TEST_DATA_SET_FOLDER":"testScenarioFolder",disableValue:t,async onSubmit(e){var t;let{parentKey:l}=e,d=i(l);if(d&&(null==(t=u.canDropTo)?void 0:t.call(u,u,d,"0"))){c();try{p?(await (0,F.y)({dragKey:u.key,dropKey:d.key,dropPosition:"0"}),await r()):m?(await (0,D.a)({dragKey:u.key,dropKey:d.key,dropPosition:"0"}),await s()):h?(await (0,R.U)({dragKey:u.key,dropKey:d.key,dropPosition:"0"}),await o()):(await (0,_.K6)({dragKey:u.key,dropKey:d.key,dropPosition:"0"}),await a()),(0,O.Y)(u.key),v.Ay.success((0,n.hw)({id:"message.movedSuccess"}))}catch{v.Ay.error((0,n.hw)({id:"message.operateFailure"}))}}}})})(t,i),icon:(0,a.jsx)(f.A,{type:"icon-folder-move",size:y.Ev}),children:(0,a.jsx)(n.sA,{id:"testScenario.action.move.title"})},"MoveToMenuItem")})}var L=i(449104),$=i(359183);function B(e){let{nodeKey:t=L.RO,isEntrance:i=!1}=e;return(0,a.jsx)(x.y,{permission:A.o.TEST_SCENARIO_CDU,children:(0,a.jsx)(m.A.Item,{onClick:()=>(0,$.c)(t),icon:(0,a.jsx)(f.A,{type:"icon-task-scenario",color:"var(--ui-blue-6)",size:y.Ev}),children:(0,a.jsx)(n.sA,{id:i?"testScenario.newTestScenario":"testScenario.addTestScenario"})})})}var z=i(173215),U=i(689368);function H(e,t){let i=(0,l.ZF)().treeNodeMap.get(e),a=(null==i?void 0:i.type)==="testScenarioFolder"&&!(null==i?void 0:i.projectBranchId),n=(0,U.DA)(e=>e.projectBranch.list.length>0);(0,E.M)().openRenameModelFormModel({showRenameEffect:n&&a,name:(null==i?void 0:i.name)||"",async onUpdate(e){await t(e),(0,y.Bg)(i)?await (0,l.ZF)().fetchTestScheduledTaskTree():(0,y.nq)(i)?await (0,l.ZF)().fetchTestSuiteTree():(0,y.RY)(i)?await (0,l.ZF)().fetchTestDataTree():await (0,l.ZF)().fetchTree()}})}function V(e){let{onUpdate:t}=e;return(0,a.jsx)(x.y,{permission:A.o.TEST_SCENARIO_CDU,children:(0,a.jsx)(m.A.Item,{onClick:t,icon:(0,a.jsx)(f.A,{type:"icon-edit-01",size:y.Ev}),children:(0,a.jsx)(n.sA,{id:"rename"})},"RenameMenuItem")})}var K=i(202182),q=i(398380);function G(e,t){return(0,K.A)(()=>{let i,a=!1,n=(0,y.oA)(e);return{onClick:(0,q.debounce)(async()=>{a=!0,await t({id:n,tabState:i}),a=!1,i=void 0},300,{leading:!0,trailing:!1}),onDoubleClickCapture:()=>{a&&(i="resident"),(0,j.g0)().unstableTurnsResidentTab({key:e})}}},[])}let W=e=>{let{domEvent:t}=e;return t.stopPropagation()},J={betaTag:"betaTag-sG1_Ip",extraSuffix:"extraSuffix-n0QkGJ",testTreeDropdownMenu:"testTreeDropdownMenu-pMPdtf",testExportSubMenu:"testExportSubMenu-aTC8Hq"};var Y=i(687552);function Z(e){let{className:t,title:i,isDropdownOpen:n,children:l,...r}=e,s=(0,g.useRef)(null),o=(0,g.useCallback)(()=>n,[n]);return(0,Y.m)(s,o),(0,a.jsx)("div",{className:p()(t,"treeNode"),title:i,ref:s,...r,children:l})}var Q=i(249276);function X(e){let{data:t}=e,{id:i,key:d,name:u,testScenarioCount:v=0,children:x}=t,{open:A,toggle:j}=(0,Q.w)(),b=(0,l.Ck)(e=>{let{expandedKeys:t}=e;return t.includes(d)}),w=G(d,s.rw),S=(0,g.useMemo)(()=>{let e=[];return!function t(i){null==i||i.forEach(i=>{"testScenario"===i.type?i.externalAssociationType&&e.push(i):"testScenarioFolder"===i.type&&t(i.children)})}(x),e},[x]).length>(0,l.ZF)().remainingExternalAssociationTestScenarioCount,C=(0,a.jsxs)(m.A,{onClick:W,className:J.testTreeDropdownMenu,children:[(0,a.jsx)(B,{nodeKey:d}),(0,a.jsx)(m.A.Divider,{}),(0,a.jsx)(z.N,{nodeKey:d,text:(0,n.hw)({id:"testScenario.createLabel.addSubFolder"})}),(0,a.jsx)(m.A.Divider,{}),(0,a.jsx)(V,{onUpdate:()=>H(d,e=>(0,o.yo)({id:i,name:e}))}),(0,a.jsx)(M,{disabled:S,disabledTooltip:S?(0,n.hw)({id:"testScenario.importFromExternalProject.limit"},{count:(0,l.ZF)().maxExternalAssociationTestScenarioCount}):void 0,onDuplicate:()=>ea(t)}),(0,a.jsx)(P,{nodeKey:d,disableValue:d}),(0,a.jsx)(m.A.Divider,{}),(0,a.jsx)(k,{onDelete:()=>ei(t)})]}),I=function(e){let t=(0,c.Ay)(e=>e.baseTestTreeNodeMap).get(e.key);return(0,g.useMemo)(()=>t?(0,a.jsx)(r.A,{data:t}):null,[t])}(t);return(0,a.jsx)(h.A,{overlay:C,trigger:["contextMenu"],children:(0,a.jsxs)(Z,{isDropdownOpen:A,...w,children:[b?(0,a.jsx)(f.A,{className:"titleIcon",type:"icon-folder-open",style:{fontSize:y.Ev}}):(0,a.jsx)(f.A,{className:"titleIcon",type:"icon-FolderDefault",style:{fontSize:y.Ev}}),(0,a.jsxs)("div",{className:p()("flex items-center flex-1 truncate mr-auto"),title:u,children:[(0,a.jsx)("span",{className:"truncate",children:u}),(0,a.jsxs)("span",{className:"ml-1 text-xs text-color-secondary",children:["(",v,")"]})]}),I,(0,a.jsx)("div",{className:"rightActions",onClick:e=>e.stopPropagation(),children:(0,a.jsx)(h.A,{overlay:C,trigger:["click"],onOpenChange:j,children:(0,a.jsx)(f.A,{type:"icon-nav-more-horizontal",className:"actionIcon"})})})]},d)})}let ee=new Set(["testScenario","testScenarioRoot","testScenarioFolder"]);function et(e,t,i){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l="0"===i||"2"===i;return!!ee.has(t.type)&&("testScenario"!==t.type||!l)&&("testScenarioRoot"!==t.type||!!l)||(a&&v.Ay.warn((0,n.hw)({id:"testScenario.dnd.warn1"})),!1)}function ei(e){N(e,()=>(0,d.TF)(e.id),{title:(0,n.hw)({id:"confirm.delete.folder"},{name:e.name}),content:(0,n.hw)({id:"testScenarioFolder.delete.recycle.tips"})})}async function ea(e){await T(e,()=>(0,d.YW)({id:e.id,ordering:e.ordering+1}))}var en=i(334821),el=i(335338),er=i(232821),es=i(356928),eo=i(440270),ed=i(496411),ec=i(427183),eu=i(618487);function ep(e){let{id:t,name:i}=e,l=(0,es.N)(),r=(0,eu.useModel)("clientConfig",e=>{let{data:t}=e;return t});return(0,a.jsx)(m.A.Item,{onClick:()=>{var e;let a=(null==r?void 0:r.testScenarioInfoUrlPath)||"",s=null!=(e=(0,ed.MJ)())?e:0,o=(0,ec.Q)(a,{id:t,projectId:s})+`?branchId=${(0,ed.U3)()}`+` ${i||""}`;l({onCopy:()=>(0,eo.e)({copyText:o,successTooltip:(0,n.hw)({id:"accessLinkTip"})})})},icon:(0,a.jsx)(f.A,{type:"icon-link1",size:y.Ev}),children:(0,a.jsx)(n.sA,{id:"copyAccessLink"})})}var em=i(169508);i(292371);var eh=i(613849);function ev(e){let{id:t}=e,i=(0,E.B)(e=>e.openTestScenarioExportModel);return(0,a.jsx)(x.y,{permission:A.o.TEST_SCENARIO_RUN_ON_OTHER_TOOLS,children:(0,a.jsx)(m.A.SubMenu,{className:J.testExportSubMenu,icon:(0,a.jsx)(f.A,{type:"icon-actions-export"}),title:(0,a.jsxs)("div",{className:"flex items-center justify-between truncate",style:{maxHeight:"300px"},children:[(0,a.jsx)("div",{className:"truncate",children:(0,n.hw)({id:"apiTestCase.runOnOtherTools"})}),(0,a.jsx)(eh.A,{size:16,color:"var(--ui-text-color-secondary)",className:"ml-auto"})]}),children:(0,a.jsxs)("div",{style:{minWidth:"240px"},children:[(0,a.jsx)(m.A.Item,{onClick:()=>i({id:t,format:2}),children:(0,n.hw)({id:"exportData.format.appCli"},{appName:em.JB})},"1"),(0,a.jsx)(m.A.Item,{onClick:()=>i({id:t,format:1}),children:(0,n.hw)({id:"exportData.format.postman"})},"2"),(0,a.jsx)(m.A.Item,{onClick:()=>i({id:t,format:0}),children:(0,n.hw)({id:"exportData.format.JMeter"})},"3")]})})})}var ef=i(523845),eg=i(307528);async function ey(e){let t=v.Ay.loading({content:"Loading...",duration:0});try{let t=await (0,eg.h1)(e);return await (0,l.ZF)().fetchTree(),v.Ay.success((0,n.hw)({id:"message.operateSuccess"})),t}catch(e){throw e}finally{t()}}function ex(e){let{nodeKey:t}=e;return(0,a.jsx)(x.y,{permission:A.o.BRANCH_SPRINT_MERGE,children:(0,a.jsx)(m.A.Item,{onClick:()=>(function(e){if((0,ef.HB)())return void(0,ef.op)();let t=(0,l.ZF)().getNode(e);(0,E.M)().openTestScenarioMergeModal({node:t,onMerge:ey})})(t),icon:(0,a.jsx)(f.A,{type:"icon-branch-merge1",size:y.Ev}),children:(0,a.jsx)(n.sA,{id:"branch.action.mergeIntoMain"})})})}var eA=i(93691);function ej(e){let{nodeKey:t,hideHotkeyLabel:i,node:r}=e,s=null!=r?r:(0,l.ZF)().getNode(t);if(!s)return null;let o=s.externalAssociationType&&!(0,l.ZF)().remainingExternalAssociationTestScenarioCount;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ex,{nodeKey:t}),(0,a.jsx)(m.A.Divider,{}),(0,a.jsx)(V,{onUpdate:()=>{H(t,e=>(0,er.yo)({id:s.id,name:e}).then(()=>{(0,en.Nw)().updateTestScenario({id:s.id,name:e,updatedAt:new Date().toISOString()})}))}}),(0,a.jsx)(P,{nodeKey:t}),(0,a.jsx)(M,{disabled:o,disabledTooltip:o?(0,n.hw)({id:"testScenario.importFromExternalProject.limit"},{count:(0,l.ZF)().maxExternalAssociationTestScenarioCount}):void 0,hideHotkeyLabel:i,onDuplicate:()=>eN(s)}),(0,a.jsx)(ep,{id:s.id,name:s.name}),(0,a.jsx)(ev,{id:s.id}),(0,a.jsx)(k,{hideHotkeyLabel:i,onDelete:()=>eI(s)})]})}function eb(e){let{data:t}=e,{key:i,name:n,children:l}=t,{open:s,toggle:o}=(0,Q.w)(),d=G(i,el.DY),u=(0,a.jsx)(m.A,{onClick:W,className:J.testTreeDropdownMenu,children:(0,a.jsx)(ej,{nodeKey:i})}),p=function(e){let t=(0,c.Ay)(e=>e.baseTestTreeNodeMap).get(e.key);return(0,g.useMemo)(()=>t?(0,a.jsx)(r.A,{resourceType:"testScenario",data:t}):null,[t])}(t);return(0,a.jsx)(h.A,{overlay:u,trigger:["contextMenu"],children:(0,a.jsxs)(Z,{title:n,isDropdownOpen:s,...d,children:[(0,a.jsx)(eA.i,{nodeKey:i,type:"icon-TestScenarioline",className:"titleIcon"}),(0,a.jsxs)("div",{className:"flex items-center flex-1 truncate",title:n,children:[(0,a.jsx)("span",{className:"truncate",children:n}),l&&l.length>0&&(0,a.jsxs)("span",{className:"ml-1 text-xs text-color-secondary",children:["(",l.length,")"]})]}),p,(0,a.jsx)("div",{className:"rightActions",onClick:e=>e.stopPropagation(),children:(0,a.jsx)(h.A,{overlay:u,trigger:["click"],onOpenChange:o,children:(0,a.jsx)(f.A,{type:"icon-nav-more-horizontal",className:"actionIcon"})})})]},i)})}let ew=new Set(["testScenario","testScenarioRoot","testScenarioFolder"]);function eS(e,t,i){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l="0"===i||"2"===i;return!!ew.has(t.type)&&("testScenario"!==t.type||!l)&&("testScenarioRoot"!==t.type||!!l)||(a&&v.Ay.warn((0,n.hw)({id:"testScenario.dnd.warn1"})),!1)}function eC(e){return e.selected}function eI(e){N(e,()=>(0,_.TF)(e.id),{title:(0,n.hw)({id:"confirm.delete.typeAndName"},{type:(0,n.hw)({id:"testScenario"}),name:e.name}),content:(0,n.hw)({id:"testScenario.delete.recycle.tips"})})}async function eN(e){let{data:t}=await T(e,()=>(0,er.YW)({id:e.id,ordering:e.ordering+1}));(0,el.DY)(t)}var ek=i(554692);function eT(e){return(0,a.jsx)(x.y,{permission:e.permission||A.o.TEST_SCENARIO_CDU,children:(0,a.jsx)(ek.A,{title:e.tooltipTitle,children:(0,a.jsx)(f.A,{...e,size:y.Ev})})})}let eM=!1;function eE(e){let{nodeKey:t=L.RO}=e,[i,r]=(0,g.useState)(eM);return i?(0,a.jsx)(ek.A,{placement:"top",title:(0,n.hw)({id:"collapseAll"}),children:(0,a.jsx)(f.A,{className:"actionIcon",type:"icon-Collapse",onClick:e=>{e.stopPropagation(),r(eM=!1),(0,l.ZF)().collapseNode(t)}})}):(0,a.jsx)(ek.A,{placement:"top",title:(0,n.hw)({id:"expandAll"}),children:(0,a.jsx)(f.A,{className:"actionIcon",type:"icon-unfold-more",onClick:e=>{e.stopPropagation(),r(eM=!0),(0,l.ZF)().expandNode(t,l.Kk.ALL)}})})}var e_=i(374973);function eF(e){let{data:t}=e,{key:i,name:l}=t,r=G(i,s.DG),{open:o,toggle:d}=(0,Q.w)(),c=(0,a.jsxs)(m.A,{onClick:W,className:J.testTreeDropdownMenu,children:[(0,a.jsx)(e_.Fq,{}),(0,a.jsx)(B,{isEntrance:!0}),(0,a.jsx)(m.A.Divider,{}),(0,a.jsx)(z.N,{text:(0,n.hw)({id:"testScenario.createLabel.newSubFolder"})})]});return(0,a.jsxs)(Z,{className:"rootNode relative",isDropdownOpen:o,...r,children:[(0,a.jsx)(f.A,{className:"titleIcon text-color-tertiary",type:"icon-TestScenario",size:y.Ev}),(0,a.jsxs)("div",{className:"flex items-center justify-start flex-1 truncate mr-auto",children:[l,(0,a.jsx)(f.A,{className:"switcher ml-1",type:"icon-triangle-right-medium",size:16})]}),(0,a.jsxs)("div",{className:"rightActions",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)(eE,{}),(0,a.jsx)(h.A,{overlay:c,trigger:["click"],onOpenChange:d,children:(0,a.jsx)(eT,{type:"icon-nav-more-horizontal",className:"actionIcon"})})]}),(0,a.jsx)("div",{className:J.extraSuffix,children:(0,n.hw)({id:"defaultFolder"})})]},i)}var eD=i(732473);function eR(e){let{data:t}=e,{key:i,name:n}=t,l=G(i,eD.cS);return(0,a.jsxs)("div",{className:"treeNode rootNode",...l,children:[(0,a.jsx)(f.A,{className:"titleIcon text-color-tertiary",type:"icon-PieChart",size:y.Ev}),(0,a.jsx)("div",{className:"flex-1 truncate mr-auto",children:n})]},i)}function eO(e){let{data:t}=e,{id:i,key:r,name:d,children:c,testScenarioCount:u=0}=t,p=(0,l.Ck)(e=>{let{expandedKeys:t}=e;return t.includes(r)}),{open:v,toggle:g}=(0,Q.w)(),x=G(r,s.rw),A=(0,K.A)(()=>{let e=[];return!function t(i){null==i||i.forEach(i=>{"testScenario"===i.type?i.externalAssociationType&&e.push(i):"testScenarioFolder"===i.type&&t(i.children)})}(c),e},[c]).length>(0,l.ZF)().remainingExternalAssociationTestScenarioCount,j=(0,a.jsxs)(m.A,{onClick:W,className:J.testTreeDropdownMenu,children:[(0,a.jsx)($.b,{nodeKey:r}),(0,a.jsx)(z.N,{nodeKey:r,text:(0,n.hw)({id:"testScenario.createLabel.addSubFolder"})}),(0,a.jsx)(m.A.Divider,{}),(0,a.jsx)(V,{onUpdate:()=>H(r,e=>(0,o.yo)({id:i,name:e}))}),(0,a.jsx)(M,{disabled:A,disabledTooltip:A?(0,n.hw)({id:"testScenario.importFromExternalProject.limit"},{count:(0,l.ZF)().maxExternalAssociationTestScenarioCount}):void 0,onDuplicate:()=>eB(t)}),(0,a.jsx)(P,{nodeKey:r,disableValue:r}),(0,a.jsx)(m.A.Divider,{}),(0,a.jsx)(k,{onDelete:()=>e$(t)})]});return(0,a.jsx)(h.A,{overlay:j,trigger:["contextMenu"],children:(0,a.jsxs)(Z,{isDropdownOpen:v,...x,children:[p?(0,a.jsx)(f.A,{className:"titleIcon",type:"icon-folder-open",style:{fontSize:y.Ev}}):(0,a.jsx)(f.A,{className:"titleIcon",type:"icon-FolderDefault",style:{fontSize:y.Ev}}),(0,a.jsxs)("div",{className:"flex items-center flex-1 truncate mr-auto",title:d,children:[(0,a.jsx)("span",{className:"truncate",children:d}),(0,a.jsxs)("span",{className:"ml-1 text-xs text-color-secondary",children:["(",u,")"]})]}),(0,a.jsx)("div",{className:"rightActions",onClick:e=>e.stopPropagation(),children:(0,a.jsx)(h.A,{overlay:j,trigger:["click"],onOpenChange:g,children:(0,a.jsx)(f.A,{type:"icon-nav-more-horizontal",className:"actionIcon"})})})]},r)})}let eP=new Set(["testScenario","testScenarioRoot","testScenarioFolder"]);function eL(e,t,i){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l="0"===i||"2"===i;return!!eP.has(t.type)&&("testScenario"!==t.type||!l)&&("testScenarioRoot"!==t.type||!!l)||(a&&v.Ay.warn((0,n.hw)({id:"testScenario.dnd.warn1"})),!1)}function e$(e){N(e,()=>(0,d.TF)(e.id),{title:(0,n.hw)({id:"confirm.delete.folder"},{name:e.name}),content:(0,n.hw)({id:"testScenarioFolder.delete.recycle.tips"})})}async function eB(e){await T(e,()=>(0,d.YW)({id:e.id,ordering:e.ordering+1}))}var ez=i(743238),eU=i(893198),eH=i(14511),eV=i(276764);function eK(e){var t;let{data:i}=e,{id:n,parentId:l,key:r,name:s}=i,{open:o,toggle:d}=(0,Q.w)(),c=G(r,eU.x),u=(0,a.jsxs)(m.A,{onClick:W,className:J.testTreeDropdownMenu,children:[(0,a.jsx)(V,{onUpdate:()=>{H(r,e=>(0,ez.k)().updateTestScenarioInstance(l,n,{name:e}))}}),(0,a.jsx)(k,{onDelete:()=>eG(i)})]});return(0,a.jsx)(h.A,{overlay:u,trigger:["contextMenu"],children:(0,a.jsxs)(Z,{title:s,isDropdownOpen:o,...c,children:[(0,a.jsx)(eH.N,{environmentId:null==(t=i.options)?void 0:t.environmentId}),(0,a.jsx)("div",{className:"flex-1 truncate",children:s}),(0,a.jsx)("div",{className:"rightActions",onClick:e=>e.stopPropagation(),children:(0,a.jsx)(h.A,{overlay:u,trigger:["click"],onOpenChange:d,children:(0,a.jsx)(f.A,{type:"icon-nav-more-horizontal",className:"actionIcon"})})})]},r)})}function eq(e,t,i){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return"0"!==i&&"2"!==i&&e.parentKey===t.parentKey||(a&&v.Ay.warn((0,n.hw)({id:"testScenario.dnd.warn1"})),!1)}function eG(e){N(e,()=>(0,eV.TF)(e.parentId,e.id))}function eW(e){let{nodeKey:t,hideHotkeyLabel:i}=e,r=(0,l.ZF)().getNode(t);if(!r)return null;let s=r.externalAssociationType&&!(0,l.ZF)().remainingExternalAssociationTestScenarioCount;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(V,{onUpdate:()=>{H(t,e=>(0,er.yo)({id:r.id,name:e}).then(()=>{(0,en.Nw)().updateTestScenario({id:r.id,name:e,updatedAt:new Date().toISOString()})}))}}),(0,a.jsx)(M,{disabled:s,disabledTooltip:s?(0,n.hw)({id:"testScenario.importFromExternalProject.limit"},{count:(0,l.ZF)().maxExternalAssociationTestScenarioCount}):void 0,hideHotkeyLabel:i,onDuplicate:()=>e0(r)}),(0,a.jsx)(P,{nodeKey:t}),(0,a.jsx)(m.A.Divider,{}),(0,a.jsx)(ep,{id:r.id,name:r.name}),(0,a.jsx)(m.A.Divider,{}),(0,a.jsx)(ev,{id:r.id}),(0,a.jsx)(m.A.Divider,{}),(0,a.jsx)(k,{hideHotkeyLabel:i,onDelete:()=>eX(r)})]})}function eJ(e){let{data:t}=e,{key:i,name:n,children:l}=t,{open:r,toggle:s}=(0,Q.w)(),o=G(i,el.DY),d=(0,a.jsx)(m.A,{onClick:W,className:J.testTreeDropdownMenu,children:(0,a.jsx)(eW,{nodeKey:i})});return(0,a.jsx)(h.A,{overlay:d,trigger:["contextMenu"],children:(0,a.jsxs)(Z,{title:n,isDropdownOpen:r,...o,children:[(0,a.jsx)(eA.i,{nodeKey:i,type:"icon-TestScenarioline",className:"titleIcon"}),(0,a.jsxs)("div",{className:"flex items-center flex-1 truncate",title:n,children:[(0,a.jsx)("span",{className:"truncate",children:n}),l&&l.length>0&&(0,a.jsxs)("span",{className:"ml-1 text-xs text-color-secondary",children:["(",l.length,")"]})]}),(0,a.jsx)("div",{className:"rightActions",onClick:e=>e.stopPropagation(),children:(0,a.jsx)(h.A,{overlay:d,trigger:["click"],onOpenChange:s,children:(0,a.jsx)(f.A,{type:"icon-nav-more-horizontal",className:"actionIcon"})})})]},i)})}let eY=new Set(["testScenario","testScenarioRoot","testScenarioFolder"]);function eZ(e,t,i){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l="0"===i||"2"===i;return!!eY.has(t.type)&&("testScenario"!==t.type||!l)&&("testScenarioRoot"!==t.type||!!l)||(a&&v.Ay.warn((0,n.hw)({id:"testScenario.dnd.warn1"})),!1)}function eQ(e){return e.selected}function eX(e){N(e,()=>(0,_.TF)(e.id),{title:(0,n.hw)({id:"confirm.delete.typeAndName"},{type:(0,n.hw)({id:"testScenario"}),name:e.name}),content:(0,n.hw)({id:"testScenario.delete.recycle.tips"})})}async function e0(e){let{data:t}=await T(e,()=>(0,er.YW)({id:e.id,ordering:e.ordering+1}));(0,el.DY)(t)}function e1(e){let{data:t}=e,{key:i,name:l}=t,r=G(i,s.DG),{open:o,toggle:d}=(0,Q.w)();return(0,a.jsxs)(Z,{className:"rootNode relative",isDropdownOpen:o,...r,children:[(0,a.jsx)(f.A,{className:"titleIcon text-color-tertiary",type:"icon-TestScenario",size:y.Ev}),(0,a.jsxs)("div",{className:"flex items-center justify-start flex-1 truncate mr-auto",children:[l,(0,a.jsx)(f.A,{className:"switcher ml-1",type:"icon-triangle-right-medium",size:16})]}),(0,a.jsxs)("div",{className:"rightActions",children:[(0,a.jsx)(eE,{}),(0,a.jsx)(h.A,{overlay:(0,a.jsxs)(m.A,{onClick:W,className:J.testTreeDropdownMenu,children:[(0,a.jsx)($.b,{isEntrance:!0}),(0,a.jsx)(m.A.Divider,{}),(0,a.jsx)(z.N,{})]}),trigger:["click"],onOpenChange:d,children:(0,a.jsx)(eT,{type:"icon-nav-more-horizontal",className:"actionIcon",onClick:e=>{e.stopPropagation()}})})]}),(0,a.jsx)("div",{className:J.extraSuffix,children:(0,n.hw)({id:"defaultFolder"})})]},i)}var e4=i(120773);function e3(e){let{data:t}=e,{key:i,name:n}=t,l=G(i,e4.m);return(0,a.jsxs)(Z,{className:"rootNode",isDropdownOpen:!1,...l,children:[(0,a.jsx)(f.A,{className:"titleIcon text-color-tertiary",type:"icon-Alarm",size:y.Ev}),(0,a.jsx)("div",{className:"flex-1 truncate mr-auto",children:n})]},i)}var e8=i(762145);function e6(e){let{nodeKey:t=l.XS,text:i=(0,n.hw)({id:"newFolder"})}=e;return(0,a.jsx)(x.y,{permission:A.o.TEST_SCHEDULED_CDU,children:(0,a.jsx)(m.A.Item,{onClick:()=>{(0,E.M)().openFolderCreateModal({type:"TEST_SUITE_FOLDER",parentKey:t,async onSubmit(e){var t;let{name:i,parentKey:a}=e,{fetchTestSuiteTree:n,getLastNewOrdering:r,expandNode:s}=(0,l.ZF)(),o=null!=(t=(0,y.oA)(a))?t:0;await (0,e8.RT)({parentId:o,name:i,ordering:r(a)}),await n(),s(a,l.Kk.SELF)}})},icon:(0,a.jsx)(f.A,{type:"icon-folder-add",size:y.Ev}),children:i})})}function e2(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.XS;(0,l.ZF)().getNode(e)&&(0,E.M)().openTestSuiteFromModal({folderKey:e,visible:!0})}function e5(e){let{isEntrance:t=!1,nodeKey:i}=e;return(0,a.jsx)(x.y,{permission:A.o.TEST_SCHEDULED_CDU,children:(0,a.jsx)(m.A.Item,{onClick:()=>e2(i),icon:(0,a.jsx)(f.A,{type:"icon-TestSet",color:"var(--ui-purple-6)",size:y.Ev}),children:(0,a.jsx)(n.sA,{id:t?"testSuite.create":"testSuite.add"})})})}function e7(e){let{data:t}=e,{id:i,key:r,name:s,testSuitCount:o=0}=t,d=(0,l.Ck)(e=>{let{expandedKeys:t}=e;return t.includes(r)}),{open:c,toggle:u}=(0,Q.w)(),p=(0,a.jsxs)(m.A,{onClick:W,className:J.testTreeDropdownMenu,children:[(0,a.jsx)(e5,{nodeKey:r}),(0,a.jsx)(e6,{nodeKey:r,text:(0,n.hw)({id:"testScenario.createLabel.addSubFolder"})}),(0,a.jsx)(m.A.Divider,{}),(0,a.jsx)(V,{onUpdate:()=>H(r,async e=>(0,e8.AX)({id:i,name:e}))}),(0,a.jsx)(P,{nodeKey:r,disableValue:r}),(0,a.jsx)(m.A.Divider,{}),(0,a.jsx)(k,{onDelete:()=>tt(t)})]});return(0,a.jsx)(h.A,{overlay:p,trigger:["contextMenu"],children:(0,a.jsxs)(Z,{isDropdownOpen:c,children:[d?(0,a.jsx)(f.A,{className:"titleIcon",type:"icon-folder-open",style:{fontSize:y.Ev}}):(0,a.jsx)(f.A,{className:"titleIcon",type:"icon-FolderDefault",style:{fontSize:y.Ev}}),(0,a.jsxs)("div",{className:"flex items-center flex-1 truncate mr-auto",title:s,children:[(0,a.jsx)("span",{className:"truncate",children:s}),(0,a.jsxs)("span",{className:"ml-1 text-xs text-color-secondary",children:["(",o,")"]})]}),(0,a.jsx)("div",{className:"rightActions",onClick:e=>e.stopPropagation(),children:(0,a.jsx)(h.A,{overlay:p,trigger:["click"],onOpenChange:u,children:(0,a.jsx)(f.A,{type:"icon-nav-more-horizontal",className:"actionIcon"})})})]},r)})}let e9=new Set(["TEST_SUITE","TEST_SUITE_ROOT","TEST_SUITE_FOLDER"]);function te(e,t,i){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l="0"===i||"2"===i;return!!e9.has(t.type)&&("TEST_SUITE"!==t.type||!l)&&("TEST_SUITE_ROOT"!==t.type||!!l)||(a&&v.Ay.warn((0,n.hw)({id:"testScenario.dnd.warn1"})),!1)}function tt(e){N(e,async()=>{await (0,e8._f)(e.id)},{title:(0,n.hw)({id:"confirm.delete.folder"},{name:e.name}),content:(0,n.hw)({id:"testSuiteFolder.delete.recycle.tips"})})}async function ti(e){await T(e,async()=>{await (0,e8.c2)({id:e.id,ordering:e.parentKey?(0,l.ZF)().getLastNewOrdering(e.parentKey):e.ordering+10})})}var ta=i(382770),tn=i(217429);function tl(e){let{id:t,name:i}=e,l=(0,es.N)(),r=(0,eu.useModel)("clientConfig",e=>{let{data:t}=e;return t});return(0,a.jsx)(m.A.Item,{onClick:()=>{var e;let a=(null==r?void 0:r.testSuiteInfoUrlPath)||"",s=null!=(e=(0,ed.MJ)())?e:0,o=(0,ec.Q)(a,{id:t,projectId:s})+`?branchId=${(0,ed.U3)()}`+` ${i||""}`;l({onCopy:()=>(0,eo.e)({copyText:o,successTooltip:(0,n.hw)({id:"accessLinkTip"})})})},icon:(0,a.jsx)(f.A,{type:"icon-link1",size:y.Ev}),children:(0,a.jsx)(n.sA,{id:"copyAccessLink"})})}function tr(e){let{nodeKey:t,hideHotkeyLabel:i}=e,n=(0,l.ZF)().getNode(t);return n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(V,{onUpdate:()=>{H(t,async e=>(0,tn.qQ)({id:n.id,name:e}))}}),(0,a.jsx)(M,{hideHotkeyLabel:i,onDuplicate:()=>tp(n)}),(0,a.jsx)(P,{nodeKey:t}),(0,a.jsx)(m.A.Divider,{}),(0,a.jsx)(tl,{id:n.id,name:n.name}),(0,a.jsx)(m.A.Divider,{}),(0,a.jsx)(k,{hideHotkeyLabel:i,onDelete:()=>tu(n)})]}):null}function ts(e){let{data:t}=e,{key:i,name:n,children:l}=t,{open:r,toggle:s}=(0,Q.w)(),o=G(i,e=>{let{id:t,tabState:i}=e;(0,ta.$I)({id:t,name:n,tabState:i})}),d=(0,a.jsx)(m.A,{onClick:W,className:J.testTreeDropdownMenu,children:(0,a.jsx)(tr,{nodeKey:i})});return(0,a.jsx)(h.A,{overlay:d,trigger:["contextMenu"],children:(0,a.jsxs)(Z,{title:n,isDropdownOpen:r,...o,children:[(0,a.jsx)(eA.i,{nodeKey:i,size:y.Ev,className:"titleIcon"}),(0,a.jsxs)("div",{className:"flex items-center flex-1 truncate",title:n,children:[(0,a.jsx)("span",{className:"truncate",children:n}),l&&l.length>0&&(0,a.jsxs)("span",{className:"ml-1 text-xs text-color-secondary",children:["(",l.length,")"]})]}),(0,a.jsx)("div",{className:"rightActions",onClick:e=>e.stopPropagation(),children:(0,a.jsx)(h.A,{overlay:d,trigger:["click"],onOpenChange:s,children:(0,a.jsx)(f.A,{type:"icon-nav-more-horizontal",className:"actionIcon"})})})]},i)})}let to=new Set(["TEST_SUITE","TEST_SUITE_ROOT","TEST_SUITE_FOLDER"]);function td(e,t,i){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l="0"===i||"2"===i;return!!to.has(t.type)&&("TEST_SUITE"!==t.type||!l)&&("TEST_SUITE_ROOT"!==t.type||!!l)||(a&&v.Ay.warn((0,n.hw)({id:"testScenario.dnd.warn1"})),!1)}function tc(e){return e.selected}function tu(e){N(e,async()=>{await (0,tn.mP)([e.id])},{title:(0,n.hw)({id:"confirm.delete.typeAndName"},{type:(0,n.hw)({id:"testSuite"}),name:e.name}),content:(0,n.hw)({id:"testSuite.delete.recycle.tips"})})}async function tp(e){let{data:t}=await T(e,async()=>(0,tn.uh)({id:e.id}));(0,ta.$I)({id:t.id,name:t.name})}function tm(e){let{data:t}=e,{key:i,name:n}=t,{open:r,toggle:s}=(0,Q.w)();return(0,a.jsxs)(Z,{className:"rootNode",isDropdownOpen:r,children:[(0,a.jsx)(f.A,{className:"titleIcon text-color-tertiary",type:"icon-TestSetSolid",size:y.Ev}),(0,a.jsxs)("div",{className:"flex-1 truncate mr-auto",children:[n,(0,a.jsx)(f.A,{className:"switcher ml-1",type:"icon-triangle-right-medium",size:16})]}),(0,a.jsxs)("div",{className:"rightActions",children:[(0,a.jsx)(eE,{nodeKey:l.XS}),(0,a.jsx)(h.A,{overlay:(0,a.jsxs)(m.A,{onClick:W,className:J.testTreeDropdownMenu,children:[(0,a.jsx)(e5,{isEntrance:!0,nodeKey:i}),(0,a.jsx)(m.A.Divider,{}),(0,a.jsx)(e6,{})]}),trigger:["click"],onOpenChange:s,children:(0,a.jsx)(eT,{type:"icon-nav-more-horizontal",className:"actionIcon",onClick:e=>{e.stopPropagation()}})})]})]},i)}var th=i(57379),tv=i(548727);function tf(e){let{data:t}=e,{key:i}=t;return(0,a.jsx)(th.c,{action:()=>(0,$.c)(),title:(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[(0,a.jsx)(f.A,{type:"icon-nav-add",size:16,className:"mr-1"}),(0,a.jsx)("span",{className:J.emptyNodeTextColor,children:(0,n.hw)({id:"new"})})]})},i)}function tg(e){let{data:t}=e,{key:i,name:n}=t;return(0,a.jsxs)("div",{className:"treeNode rootNode",children:[(0,a.jsx)(f.A,{className:"titleIcon text-color-tertiary",type:"icon-TestCaseSolid",size:y.Ev}),(0,a.jsxs)("div",{className:"flex items-center justify-start flex-1 truncate mr-auto",children:[n,(0,a.jsx)(f.A,{className:"switcher ml-1",type:"icon-triangle-right-medium",size:16})]})]},i)}var ty=i(538721),tx=i(923117);let tA=(0,eu.dynamic)({loading:tx.A,loader:async()=>{let{default:e}=await Promise.all([i.e("62385"),i.e("13397"),i.e("62545"),i.e("66669"),i.e("66593")]).then(i.bind(i,202055));return e}});async function tj(e){let{id:t,tabState:i="unstable",nodeType:n="endpointFolder"}=e;if(!(0,q.isNumber)(t))return;let r=(0,y.EA)(n,t);(0,l.ZF)().getNode(r)&&(0,ty.$Q)({key:r,state:i,content:(0,a.jsx)(tA,{id:t,nodeType:n,nodeKey:r}),tabIcon:(0,a.jsx)(f.A,{type:"icon-FolderDefault",className:"titleIcon"})})}function tb(e){let{data:t}=e,{key:i,name:n,id:l}=t,r=G(i,()=>tj({id:l}));return(0,a.jsxs)("div",{className:"treeNode",...r,children:[(0,a.jsx)(f.A,{className:"titleIcon",type:"icon-FolderDefault",size:y.Ev}),(0,a.jsx)("div",{className:"flex-1 truncate mr-auto",children:n})]},i)}var tw=i(88434),tS=i(471504);let tC=e=>{let{node:t}=e,i=G(t.key,()=>{(0,tw.k)({id:t.id})});return(0,a.jsxs)("div",{...i,className:"treeNode flex items-center gap-1",title:(null==t?void 0:t.name)||"",children:[(null==t?void 0:t.method)&&(0,a.jsx)(tS.mn,{className:"text-left block",abbr:!0,style:{width:29},method:t.method}),(0,a.jsxs)("div",{className:"flex items-center justify-between flex-1 truncate",title:null==t?void 0:t.name,children:[(0,a.jsx)("span",{className:"truncate",children:null==t?void 0:t.name}),(0,a.jsx)("span",{className:"ml-1 text-xs",style:{color:(null==t?void 0:t.testCaseCount)===0?"var(--ui-disabled-color)":"var(--ui-text-color-tertiary)"},children:null==t?void 0:t.testCaseCount})]})]})};var tI=i(452577);function tN(e){let{data:t}=e,{key:i,name:n,id:l}=t,r=G(i,()=>tj({id:l,nodeType:"projectModule"}));return(0,a.jsxs)("div",{className:"treeNode rootNode",...r,children:[(0,a.jsx)(tI.A,{className:"titleIcon",size:15}),(0,a.jsx)("div",{className:"flex-1 truncate mr-auto",children:n})]},i)}function tk(e){let{data:t}=e,{key:i}=t;return(0,a.jsx)(th.c,{title:(0,a.jsx)(x.y,{permission:A.o.ENDPOINT_ENDPOINT_CDU,children:(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[(0,a.jsx)(f.A,{type:"icon-nav-add",size:16,className:"mr-1"}),(0,a.jsx)("span",{className:J.emptyNodeTextColor,children:(0,n.hw)({id:"new"})})]})}),action:e2},i)}var tT=i(225181);function tM(e){let{data:t}=e,{key:i}=t;return(0,a.jsx)(th.c,{title:(0,a.jsx)(x.y,{permission:A.o.TEST_SCHEDULED_CDU,children:(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[(0,a.jsx)(f.A,{type:"icon-nav-add",size:16,className:"mr-1"}),(0,a.jsx)("span",{className:"text-color-secondary",children:(0,n.hw)({id:"testData.create.static.short"})})]})}),action:()=>(0,tT.nl)({folderKey:i,type:"STATIC"})},i)}var tE=i(479221);function t_(e){let{nodeKey:t=l.sc,text:i=(0,n.hw)({id:"newFolder"})}=e;return(0,a.jsx)(x.y,{permission:A.o.TEST_SCHEDULED_CDU,children:(0,a.jsx)(m.A.Item,{onClick:()=>{(0,E.M)().openFolderCreateModal({type:"TEST_DATA_SET_FOLDER",parentKey:t,async onSubmit(e){var t;let{name:i,parentKey:a}=e,{fetchTestDataTree:n,getLastNewOrdering:r,expandNode:s}=(0,l.ZF)(),o=null!=(t=(0,y.oA)(a))?t:0;await (0,tE.zz)({parentId:o,name:i,ordering:r(a)}),await n(),s(a,l.Kk.SELF)}})},icon:(0,a.jsx)(f.A,{type:"icon-folder-add",size:y.Ev}),children:i})})}var tF=i(1655);function tD(e){let{isEntrance:t=!1,nodeKey:i}=e;return(0,a.jsx)(x.y,{permission:A.o.TEST_SCHEDULED_CDU,children:(0,a.jsx)(m.A.Item,{onClick:()=>(0,tT.nl)({folderKey:i,type:"STATIC"}),icon:(0,a.jsx)(tF.I,{testDataType:"STATIC",color:"var(--ui-text-color)"}),children:(0,a.jsx)(n.sA,{id:t?"testData.create.static":"testData.add.static"})})})}function tR(e){let{isEntrance:t=!1,nodeKey:i}=e;return(0,a.jsx)(x.y,{permission:A.o.TEST_SCHEDULED_CDU,children:(0,a.jsx)(m.A.Item,{onClick:()=>(0,tT.nl)({folderKey:i,type:"DATA_SOURCE"}),icon:(0,a.jsx)(tF.I,{testDataType:"DATA_SOURCE",color:"var(--ui-text-color)"}),children:(0,a.jsx)(n.sA,{id:t?"testData.create.datasource":"testData.add.datasource"})})})}function tO(e){let{data:t}=e,{key:i,name:n}=t,{open:r,toggle:s}=(0,Q.w)();return(0,a.jsxs)(Z,{className:"rootNode",isDropdownOpen:r,children:[(0,a.jsx)(f.A,{className:"titleIcon text-color-tertiary",type:"icon-TestData1",size:y.Ev}),(0,a.jsxs)("div",{className:"flex-1 truncate mr-auto",children:[n,(0,a.jsx)(f.A,{className:"switcher ml-1",type:"icon-triangle-right-medium",size:16})]}),(0,a.jsxs)("div",{className:"rightActions",children:[(0,a.jsx)(eE,{nodeKey:l.sc}),(0,a.jsx)(h.A,{overlay:(0,a.jsxs)(m.A,{onClick:W,className:J.testTreeDropdownMenu,children:[(0,a.jsx)(tD,{isEntrance:!0,nodeKey:i}),(0,a.jsx)(tR,{isEntrance:!0,nodeKey:i}),(0,a.jsx)(m.A.Divider,{}),(0,a.jsx)(t_,{})]}),trigger:["click"],onOpenChange:s,children:(0,a.jsx)(eT,{type:"icon-nav-more-horizontal",className:"actionIcon",onClick:e=>{e.stopPropagation()}})})]})]},i)}function tP(e){let{data:t}=e,{id:i,key:r,name:s,testDataCount:o=0}=t,d=(0,l.Ck)(e=>{let{expandedKeys:t}=e;return t.includes(r)}),{open:c,toggle:u}=(0,Q.w)(),p=(0,a.jsxs)(m.A,{onClick:W,className:J.testTreeDropdownMenu,children:[(0,a.jsx)(tD,{nodeKey:r}),(0,a.jsx)(tR,{nodeKey:r}),(0,a.jsx)(t_,{nodeKey:r,text:(0,n.hw)({id:"testScenario.createLabel.addSubFolder"})}),(0,a.jsx)(m.A.Divider,{}),(0,a.jsx)(V,{onUpdate:()=>H(r,async e=>(0,tE.wv)({id:i,name:e}))}),(0,a.jsx)(P,{nodeKey:r,disableValue:r}),(0,a.jsx)(m.A.Divider,{}),(0,a.jsx)(k,{onDelete:()=>tB(t)})]});return(0,a.jsx)(h.A,{overlay:p,trigger:["contextMenu"],children:(0,a.jsxs)(Z,{isDropdownOpen:c,children:[d?(0,a.jsx)(f.A,{className:"titleIcon",type:"icon-folder-open",style:{fontSize:y.Ev}}):(0,a.jsx)(f.A,{className:"titleIcon",type:"icon-FolderDefault",style:{fontSize:y.Ev}}),(0,a.jsxs)("div",{className:"flex items-center flex-1 truncate mr-auto",title:s,children:[(0,a.jsx)("span",{className:"truncate",children:s}),(0,a.jsxs)("span",{className:"ml-1 text-xs text-color-secondary",children:["(",o,")"]})]}),(0,a.jsx)("div",{className:"rightActions",onClick:e=>e.stopPropagation(),children:(0,a.jsx)(h.A,{overlay:p,trigger:["click"],onOpenChange:u,children:(0,a.jsx)(f.A,{type:"icon-nav-more-horizontal",className:"actionIcon"})})})]},r)})}let tL=new Set(["TEST_DATA_SET","TEST_DATA_SET_ROOT","TEST_DATA_SET_FOLDER"]);function t$(e,t,i){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l="0"===i||"2"===i;return!!tL.has(t.type)&&("TEST_DATA_SET"!==t.type||!l)&&("TEST_DATA_SET_ROOT"!==t.type||!!l)||(a&&v.Ay.warn((0,n.hw)({id:"testScenario.dnd.warn1"})),!1)}function tB(e){N(e,async()=>{await (0,tE.mV)(e.id)},{title:(0,n.hw)({id:"confirm.delete.folder"},{name:e.name}),content:(0,n.hw)({id:"testDataFolder.delete.recycle.tips"})})}async function tz(e){await T(e,async()=>{await (0,tE.Kb)({id:e.id,ordering:e.parentKey?(0,l.ZF)().getLastNewOrdering(e.parentKey):e.ordering+10})})}var tU=i(551105);function tH(e){let{id:t,name:i}=e,l=(0,es.N)(),r=(0,eu.useModel)("clientConfig",e=>{let{data:t}=e;return t});return(0,a.jsx)(m.A.Item,{onClick:()=>{var e;let a=(null==r?void 0:r.testDataInfoUrlPath)||"",s=null!=(e=(0,ed.MJ)())?e:0,o=(0,ec.Q)(a,{id:t,projectId:s})+`?branchId=${(0,ed.U3)()}`+` ${i||""}`;l({onCopy:()=>(0,eo.e)({copyText:o,successTooltip:(0,n.hw)({id:"accessLinkTip"})})})},icon:(0,a.jsx)(f.A,{type:"icon-link1",size:y.Ev}),children:(0,a.jsx)(n.sA,{id:"copyAccessLink"})})}function tV(e){let{nodeKey:t,hideHotkeyLabel:i}=e,n=(0,l.ZF)().getNode(t);return n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(V,{onUpdate:()=>{H(t,async e=>(0,tU.YT)(n.id,{name:e}))}}),(0,a.jsx)(M,{hideHotkeyLabel:i,onDuplicate:()=>tY(n)}),(0,a.jsx)(P,{nodeKey:t}),(0,a.jsx)(m.A.Divider,{}),(0,a.jsx)(tH,{id:n.id,name:n.name}),(0,a.jsx)(m.A.Divider,{}),(0,a.jsx)(k,{hideHotkeyLabel:i,onDelete:()=>tJ(n)})]}):null}function tK(e){let{data:t}=e,{key:i,name:n}=t,{open:l,toggle:r}=(0,Q.w)(),s=G(i,e=>{let{id:t,tabState:i}=e;(0,tT.xA)({id:t,name:n,tabState:i})}),o=(0,a.jsx)(m.A,{onClick:W,className:J.testTreeDropdownMenu,children:(0,a.jsx)(tV,{nodeKey:i})});return(0,a.jsx)(h.A,{overlay:o,trigger:["contextMenu"],children:(0,a.jsxs)(Z,{title:n,isDropdownOpen:l,...s,children:[(0,a.jsx)(tF.I,{nodeKey:i,className:"titleIcon"}),(0,a.jsx)("div",{className:"flex items-center flex-1 truncate",title:n,children:(0,a.jsx)("span",{className:"truncate",children:n})}),(0,a.jsx)("div",{className:"rightActions",onClick:e=>e.stopPropagation(),children:(0,a.jsx)(h.A,{overlay:o,trigger:["click"],onOpenChange:r,children:(0,a.jsx)(f.A,{type:"icon-nav-more-horizontal",className:"actionIcon"})})})]},i)})}let tq=new Set(["TEST_DATA_SET","TEST_DATA_SET_ROOT","TEST_DATA_SET_FOLDER"]);function tG(e,t,i){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l="0"===i||"2"===i;return!!tq.has(t.type)&&("TEST_DATA_SET"!==t.type||!l)&&("TEST_DATA_SET_ROOT"!==t.type||!!l)||(a&&v.Ay.warn((0,n.hw)({id:"testScenario.dnd.warn1"})),!1)}function tW(e){return e.selected}function tJ(e){N(e,async()=>{await (0,tU.t)(e.id)},{title:(0,n.hw)({id:"confirm.delete.typeAndName"},{type:(0,n.hw)({id:"testData"}),name:e.name}),content:(0,n.hw)({id:"testData.delete.recycle.tips"})})}async function tY(e){let{data:t}=await T(e,async()=>(0,tU.q5)(e.id));(0,tT.xA)({id:t.id,name:t.name})}let tZ={testScenario:function(e){e.canDropTo=eZ,e.canExpand=eQ,e.handleDelete=eX,e.handleDuplicate=e0,e.draggable=!0,e.disableActionExpandable=!0,e.title=(0,a.jsx)(eJ,{data:e})},testScenarioInstance:function(e){e.canDropTo=eq,e.handleDelete=eG,e.draggable=!0,e.title=(0,a.jsx)(eK,{data:e})},testScenarioRoot:function(e){e.title=(0,a.jsx)(e1,{data:e})},testScenarioFolder:function(e){var t;let i;e.canDropTo=eL,e.handleDelete=e$,e.handleDuplicate=eB;i=0,null==(t=e.children)||t.forEach(e=>{"testScenario"===e.type?i+=1:"testScenarioFolder"===e.type&&(i+=e.testScenarioCount||0)}),e.testScenarioCount=i,e.draggable=!0,e.title=(0,a.jsx)(eO,{data:e})},testReport:function(e){e.title=(0,a.jsx)(eR,{data:e})},TEST_SCHEDULED_TASK_ROOT:function(e){e.title=(0,a.jsx)(e3,{data:e})},TEST_SUITE_ROOT:function(e){e.title=(0,a.jsx)(tm,{data:e})},TEST_SUITE:function(e){e.canDropTo=td,e.canExpand=tc,e.handleDelete=tu,e.handleDuplicate=tp,e.draggable=!0,e.title=(0,a.jsx)(ts,{data:e})},TEST_SUITE_FOLDER:function(e){var t;let i;e.canDropTo=te,e.handleDelete=tt,e.handleDuplicate=ti;i=0,null==(t=e.children)||t.forEach(e=>{"TEST_SUITE"===e.type?i+=1:"TEST_SUITE_FOLDER"===e.type&&(i+=e.testSuitCount||0)}),e.testSuitCount=i,e.draggable=!0,e.title=(0,a.jsx)(e7,{data:e})},newTestScenario:function(e){e.className=p()(e.className,tv.A.treeList__emptyNodeTitle2),e.title=(0,a.jsx)(tf,{data:e})},newTestSuite:function(e){e.className=p()(e.className,tv.A.treeList__emptyNodeTitle2),e.title=(0,a.jsx)(tk,{data:e})},newTestDataSet:function(e){e.className=p()(e.className,tv.A.treeList__emptyNodeTitle2),e.title=(0,a.jsx)(tM,{data:e})},endpointRoot:function(e){Object.assign(e,{title:(0,a.jsx)(tg,{data:e})})},endpointFolder:function(e){Object.assign(e,{title:(0,a.jsx)(tb,{data:e})})},endpoint:function(e){Object.assign(e,{title:(0,a.jsx)(tC,{node:e})})},projectModule:function(e){Object.assign(e,{title:(0,a.jsx)(tN,{data:e})})},TEST_DATA_SET_ROOT:function(e){e.title=(0,a.jsx)(tO,{data:e})},TEST_DATA_SET_FOLDER:function(e){var t;let i;e.canDropTo=t$,e.handleDelete=tB,e.handleDuplicate=tz;i=0,null==(t=e.children)||t.forEach(e=>{"TEST_DATA_SET"===e.type?i+=1:"TEST_DATA_SET_FOLDER"===e.type&&(i+=e.testDataCount||0)}),e.testDataCount=i,e.draggable=!0,e.title=(0,a.jsx)(tP,{data:e})},TEST_DATA_SET:function(e){e.canDropTo=tG,e.canExpand=tW,e.handleDelete=tJ,e.handleDuplicate=tY,e.draggable=!0,e.title=(0,a.jsx)(tK,{data:e})}},tQ={...tZ,testScenario:function(e){e.canDropTo=eS,e.canExpand=eC,e.handleDelete=eI,e.handleDuplicate=eN,e.draggable=!0,e.disableActionExpandable=!0,e.title=(0,a.jsx)(eb,{data:e})},testScenarioFolder:function(e){var t;let i;e.canDropTo=et,e.handleDelete=ei,e.handleDuplicate=ea;i=0,null==(t=e.children)||t.forEach(e=>{"testScenario"===e.type?i+=1:"testScenarioFolder"===e.type&&(i+=e.testScenarioCount||0)}),e.testScenarioCount=i,e.draggable=!0,e.title=(0,a.jsx)(X,{data:e})},testScenarioRoot:function(e){e.title=(0,a.jsx)(eF,{data:e})}},tX=e=>e?tQ:tZ},357603:function(e,t,i){"use strict";i.r(t),i.d(t,{buildTestTree:()=>s});var a=i(240848),n=i(170836),l=i(898358),r=i(398380);function s(e){let{testScenarios:t,testScenarioFolders:a,testSuites:n,testSuiteFolders:s,testScenarioInstances:c,testData:u,testDataFolders:p,latestReports:m,modules:h,endpoints:v,endpointFolders:f,endpointStatistics:g}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{enableForkAndMerge:y=!1,handleTestScenarioRootChildren:x,handleTestScheduledRootChildren:A,handleTestSuiteRootChildren:j,handleTestDataRootChildren:b}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},w=null==m?void 0:m.reduce((e,t)=>e.set(`${t.relatedId}:${t.instanceId}`,t),new Map),S=(0,r.keyBy)(g||[],"endpointId"),C=o(t,"testScenario",e=>{e.parentId=e.folderId,e.parentKey=0===e.parentId?(0,l.EA)("testScenarioRoot",0):(0,l.EA)("testScenarioFolder",e.parentId),e.latestReport=w.get(`${e.id}:0`)}),I=o(a,"testScenarioFolder",e=>{e.parentKey=0===e.parentId?(0,l.EA)("testScenarioRoot",0):(0,l.EA)("testScenarioFolder",e.parentId)}),N=o(n,"TEST_SUITE",e=>{e.parentId=e.folderId,e.parentKey=0===e.parentId?(0,l.EA)("TEST_SUITE_ROOT",0):(0,l.EA)("TEST_SUITE_FOLDER",e.parentId),e.creatorId=e.createdById,e.editorId=e.updatedById}),k=o(s,"TEST_SUITE_FOLDER",e=>{e.parentKey=0===e.parentId?(0,l.EA)("TEST_SUITE_ROOT",0):(0,l.EA)("TEST_SUITE_FOLDER",e.parentId)}),T=o(u,"TEST_DATA_SET",e=>{e.parentId=e.folderId,e.parentKey=0===e.parentId?(0,l.EA)("TEST_DATA_SET_ROOT",0):(0,l.EA)("TEST_DATA_SET_FOLDER",e.parentId),e.creatorId=e.createdById,e.editorId=e.updatedById,e.testDataType=e.type}),M=o(p,"TEST_DATA_SET_FOLDER",e=>{e.parentKey=0===e.parentId?(0,l.EA)("TEST_DATA_SET_ROOT",0):(0,l.EA)("TEST_DATA_SET_FOLDER",e.parentId)}),E=o(c,"testScenarioInstance",e=>{e.parentId=e.testScenarioId,e.parentKey=(0,l.EA)("testScenario",e.testScenarioId),e.creatorId=e.createdById,e.editorId=e.updatedById,e.latestReport=w.get(`${e.testScenarioId}:${e.id}`)}),_=o(h,"projectModule",e=>{e.parentId=0,e.parentKey=(0,l.EA)("endpointRoot",e.parentId)}),F=o(f,"endpointFolder",e=>{e.parentKey=0===e.parentId?(0,l.EA)("projectModule",e.moduleId):(0,l.EA)("endpointFolder",e.parentId)}),D=o(v,"endpoint",e=>{var t,i,a;e.parentId=e.folderId,e.parentKey=0===e.parentId?(0,l.EA)("projectModule",e.moduleId):(0,l.EA)("endpointFolder",e.parentId),e.testCaseCount=(null==(t=S[e.id])?void 0:t.testCaseCount)||0,e.testScenarioCount=(null==(i=S[e.id])?void 0:i.testScenarioCount)||0,e.latestReport=(null==(a=S[e.id])?void 0:a.latestReport)||null}),R=new Map;return function e(t){let{nodes:a,getChildren:n,enableForkAndMerge:l=!1}=t,r=i(510615).nV(l);return a.map(t=>{var i;let a=n(t);return a&&(t.children=e({nodes:a,getChildren:n,enableForkAndMerge:l})),null==(i=r[t.type])||i.call(r,t),t})}({nodes:e,getChildren:e=>{switch(R.set(e.key,e),e.type){case"testScenarioRoot":{let t=d({parent:e,maps:[I,C]});return"function"==typeof x?x(t):t}case"testScenarioFolder":return d({parent:e,maps:[I,C]});case"testScenario":return d({parent:e,maps:[E]});case"TEST_SCHEDULED_TASK_ROOT":{let e=[];return"function"==typeof A?A(e):e}case"endpointRoot":return d({parent:e,maps:[_]});case"projectModule":case"endpointFolder":return d({parent:e,maps:[F,D]});case"TEST_SUITE_ROOT":{let t=d({parent:e,maps:[k,N]});return"function"==typeof j?j(t):t}case"TEST_SUITE_FOLDER":return d({parent:e,maps:[k,N]});case"TEST_DATA_SET_ROOT":{let t=d({parent:e,maps:[M,T]});return"function"==typeof b?b(t):t}case"TEST_DATA_SET_FOLDER":return d({parent:e,maps:[M,T]});default:return}},enableForkAndMerge:y}),R}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.K7,n=new Map;return e.forEach(e=>{i(e);let a=e.parentKey;n.has(a)||n.set(a,[]);let{type:r,...s}=e;n.get(a).push({...s,type:t,key:(0,l.EA)(t,e.id)})}),n}function d(e){let{parent:t,maps:i}=e,{type:a,id:r}=t,s=(0,l.EA)(a,r),o=[];return i.forEach(e=>{if(!e.has(s))return;let t=e.get(s)||[];(0,n.VQ)(o,t)}),o}},93691:function(e,t,i){"use strict";i.d(t,{b:()=>c,i:()=>u});var a=i(838e3),n=i(671466),l=i(641486),r=i(660464),s=i(898358);let o={0:"var(--ui-red-5)",1:"var(--ui-yellow-5)",2:"var(--ui-blue-5)",3:"var(--ui-fill-7)"},d="var(--ui-blue-6)";function c(e){var t;return null==e?d:null!=(t=o[e])?t:d}let u=e=>{let{nodeKey:t,priority:i,type:o="icon-TestSet",size:d=s.Ev,...u}=e,p=(0,r.Ck)(e=>e.treeNodeMap),m=(0,l.useMemo)(()=>{if(void 0!==i)return i;let e=p.get(t);return null==e?void 0:e.priority},[i,p,t]);return(0,a.jsx)(n.A,{type:o,color:c(m),size:d,...u})}},1655:function(e,t,i){"use strict";i.d(t,{I:()=>o});var a=i(838e3),n=i(898358),l=i(641486),r=i(671466),s=i(660464);let o=e=>{let{nodeKey:t,size:i=n.Ev,testDataType:o,color:d="var(--ui-blue-6)",...c}=e,u=(0,s.Ck)(e=>e.treeNodeMap),p=(0,l.useMemo)(()=>{let e=null;if(o)e=o;else{let i=u.get(t);(null==i?void 0:i.testDataType)&&(e=i.testDataType)}return"DATA_SOURCE"===e?"icon-TestData":"icon-database-01"},[u,t,o]);return(0,a.jsx)(r.A,{type:p,color:d,size:i,...c})}},939632:function(e,t,i){"use strict";let a;i.d(t,{Y:()=>d,Z:()=>c});var n=i(52859),l=i(353748),r=i(660464),s=i(572021),o=i(641486);function d(e){e&&((0,r.ZF)().expandNode(e),setTimeout(()=>{null==a||a.scrollTo({key:e,align:"top",offset:(a.props.height||0)/3})},200))}function c(e,t){let i=(0,l.HI)(e=>{let{activeKey:t}=e;return t}),r=(0,o.useRef)(0);(0,o.useEffect)(()=>(a=e.current,()=>{a=void 0}),[e.current]),(0,s.A)("click",()=>{window.clearTimeout(r.current),r.current=window.setTimeout(()=>{r.current=0},100)},{target:t,capture:!0});let c=(0,o.useContext)(n.B);null==c||c.focusTreeListActiveItemEvent.useSubscription(d),(0,o.useEffect)(()=>{r.current>0||d(i)},[i])}},207946:function(e,t,i){"use strict";i.d(t,{FJ:()=>u,r6:()=>d,yB:()=>c});var a=i(838e3),n=i(353748),l=i(496411),r=i(140049),s=i(641486),o=i(770189);let d=(0,s.createContext)({tabKey:"",tabWrapperRef:null,projectBranchId:(0,l.U3)()});function c(e){let{tabKey:t,children:i,projectBranchId:n=(0,l.U3)()}=e,[r,c]=(0,s.useState)(null);return(0,a.jsx)(d.Provider,{value:{tabKey:t,tabWrapperRef:r,projectBranchId:n},children:(0,a.jsx)("div",{ref:c,className:o.A.container,children:i})})}function u(){let{tabKey:e}=(0,s.useContext)(d);return(0,r.A)(()=>(0,n.g0)().closeTab(e))}},538721:function(e,t,i){"use strict";i.d(t,{$Q:()=>w,RC:()=>b,Zs:()=>A,fm:()=>j,gA:()=>C,qi:()=>x,qm:()=>S});var a=i(838e3),n=i(917359),l=i(353748),r=i(660464),s=i(622521),o=i(2183),d=i(496411),c=i(81319),u=i(51832),p=i(563613),m=i(387327),h=i(764007),v=i(671466),f=i(641486),g=i(207946);let y=p.default.Provider;function x(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,l.g0)().activeKey,{closeTab:t,tabPanes:i}=(0,l.g0)(),n=i.find(t=>t.key===e);if(void 0!==n)if(n.modifying){var r,s;h.Ay.confirm({width:400,maskClosable:!0,title:null!=(s=null==(r=n.extraInfo)?void 0:r.message)?s:(0,m.a)({id:"userLayout.title.notSave"}),icon:(0,a.jsx)(y,{value:{prefixCls:"appicon"},children:(0,a.jsx)(u.A,{})}),content:(0,m.a)({id:"confirm.close"}),onOk:()=>t(e)})}else n.handleClose?n.handleClose():t(e)}function A(e){e?(0,l.g0)().closeCurrentTab():x()}function j(e,t){"remove"===t&&x(e)}function b(e,t){let{key:i,name:n,state:r,content:s,tabIcon:o,handleClose:d,projectBranchId:c}=t;return(0,l.g0)().replaceTab(e,{key:i,state:r,content:(0,a.jsx)(g.yB,{tabKey:i,projectBranchId:c,children:s}),tab:(0,a.jsx)(I,{name:n,tabKey:i,icon:o,projectBranchId:c}),handleClose:d}),()=>(0,l.g0)().closeTab(i)}function w(e){let{key:t,name:i,state:n,content:r,tabIcon:s,handleClose:o,projectBranchId:d,options:c}=e;return(0,l.g0)().openTab({key:t,state:n,content:(0,a.jsx)(g.yB,{tabKey:t,projectBranchId:d,children:r}),tab:(0,a.jsx)(I,{name:i,tabKey:t,icon:s,projectBranchId:d}),handleClose:o},c),()=>(0,l.g0)().closeTab(t)}function S(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{setTab:i,unstableTurnsResidentTab:a}=(0,l.g0)();i(e,{modifying:t}),i(`${e}.${(0,d.sI)()}`,{modifying:t}),t&&a({key:e})}function C(e){(0,l.g0)().unstableTurnsResidentTab({key:e})}function I(e){let{name:t,tabKey:i,icon:l,projectBranchId:u=(0,d.U3)()}=e,p=(0,r.Ck)(e=>{var t;let{getNode:a}=e;return null==(t=a(i))?void 0:t.name})||t||"",m=(0,c.Ay)(e=>{var t,a;return null!=(a=null==(t=e.baseTestTreeNodeMap.get(i))?void 0:t.name)?a:""}),h=(0,o._$)(e=>e.projectCurrentBranch),g=(0,o._$)(e=>e.currentBranchSettings.enableRefFallbackToMain),{tabTitle:y,mainBranchTagVisible:A}=(0,f.useMemo)(()=>g&&u!==h.id?{tabTitle:m,mainBranchTagVisible:!0}:{tabTitle:p,mainBranchTagVisible:!1},[h.id,g,m,p,u]);return(0,a.jsx)(s.A,{extraPreTitle:(0,a.jsx)(n.A,{className:"mr-1",style:{color:"var(--ui-text-color-secondary)"},visible:A,icon:(0,a.jsx)(v.A,{type:"icon-branch3",className:"mr-1",size:12,color:"var(--ui-text-color-secondary)"})}),content:y,data:{name:y},icon:(0,a.jsx)("span",{className:"mr-1",children:l}),className:"flex items-center",onMouseMiddleDown:()=>x(i)})}},396734:function(e,t,i){"use strict";function a(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4,a=Error(`Operation timed out after ${i} ms`),n=new Promise((n,l)=>{t=window.setTimeout(()=>{console.error(`Promise operation timed out after ${i} ms`,{...a,stack:a.stack,promise:e}),l(a)},i)});return Promise.race([e,n]).then(e=>(window.clearTimeout(t),e))}i.d(t,{C:()=>a})},90836:function(e,t,i){"use strict";i.d(t,{w:()=>s});var a=i(900931),n=i(743994),l=i(73586),r=i(662932);function s(e){l.gc.send("TabChannel.TabAction","TabAction.TestRunning",{isTestRunning:e})}async function o(){let{map:e}=(0,n.x)(),{map:t}=(0,a.o)();e.forEach(e=>{let{runner:t}=e;return null==t?void 0:t.abort()}),t.forEach(e=>{let{runner:t}=e;return null==t?void 0:t.abort()}),(e.size>0||t.size>0)&&await new Promise(e=>setTimeout(e,500))}async function d(){var e;await (null==(e=(0,r.w)().getRunner())?void 0:e.abort())}l.gc.on("TabChannel.OnTabBeforeRemove",async()=>{await Promise.allSettled([o(),d()]),l.gc.send("TabChannel.ReplyOnTabBeforeRemove")})},518853:function(e,t,i){"use strict";i.d(t,{GG:()=>s,aG:()=>d,oU:()=>r,uP:()=>o});var a=i(496411),n=i(850646),l=i(398380);async function r(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,a.U3)(),r=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;return await n.Ay.post(`/api/v1/runners/${t}/runs`,{headers:{"X-Branch-Id":String(i)},data:{taskType:"TEST_SCENARIO",relatedId:e,options:(0,l.omit)({...r,notificationOptions:s},"runnerId")}})}async function s(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,a.U3)(),r=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;return await n.Ay.post(`/api/v1/runners/${t}/runs`,{headers:{"X-Branch-Id":String(i)},data:{taskType:"parallel"===r.runMode?"CONCURRENT_TEST_SUITE":"TEST_SUITE",relatedId:e,options:(0,l.omit)({...r,notificationOptions:s},"runnerId")}})}async function o(e,t){return await n.Ay.post(`/api/v1/runners/${t}/runs`,{data:{taskType:"TEST_SCHEDULED_TASK",relatedId:e,options:{}}})}async function d(e,t){return await n.Ay.post(`/api/v1/runners/${t}/runs`,{data:{taskType:"IMPORT_DATA",relatedId:e,options:{}}})}},192093:function(e,t,i){"use strict";i.d(t,{y:()=>s});var a=i(660464),n=i(449104),l=i(496411),r=i(850646);function s(e){let t=e.dropKey;return t===a.q5&&(t=n.R1),r.Ay.put(`/api/v1/projects/${(0,l.MJ)()}/api-test/scheduled-task-tree-list/reorder`,{data:{dragKey:e.dragKey,dropKey:t,dropPosition:e.dropPosition}})}},217429:function(e,t,i){"use strict";i.d(t,{$h:()=>l,Zl:()=>s,bV:()=>r,mP:()=>d,qQ:()=>o,uh:()=>c});var a=i(496411),n=i(850646);function l(e){return(0,n.Ay)(`/api/v1/projects/${(0,a.MJ)()}/api-test/test-suites`,{params:e})}function r(e){return(0,n.Ay)(`/api/v1/projects/${(0,a.MJ)()}/api-test/test-suites/${e}`)}function s(e){return n.Ay.post(`/api/v1/projects/${(0,a.MJ)()}/api-test/test-suites`,{data:e})}function o(e){return n.Ay.put(`/api/v1/projects/${(0,a.MJ)()}/api-test/test-suites/${e.id}`,{data:e})}function d(e){return n.Ay.delete(`/api/v1/projects/${(0,a.MJ)()}/api-test/test-suites/${e}`)}function c(e){return n.Ay.post(`/api/v1/projects/${(0,a.MJ)()}/api-test/test-suites/${e.id}/duplicate`,{data:e})}},762145:function(e,t,i){"use strict";i.d(t,{AX:()=>r,RT:()=>l,_f:()=>s,c2:()=>o});var a=i(496411),n=i(850646);function l(e){return n.Ay.post(`/api/v1/projects/${(0,a.MJ)()}/api-test/test-suite-folders`,{data:e})}function r(e){return n.Ay.put(`/api/v1/projects/${(0,a.MJ)()}/api-test/test-suite-folders/${e.id}`,{data:e})}function s(e){return n.Ay.delete(`/api/v1/projects/${(0,a.MJ)()}/api-test/test-suite-folders/${e}`)}function o(e){return n.Ay.post(`/api/v1/projects/${(0,a.MJ)()}/api-test/test-suite-folders/${e.id}/duplicate`,{data:e})}},934429:function(e,t,i){"use strict";i.d(t,{a:()=>o,z:()=>s});var a=i(660464),n=i(449104),l=i(496411),r=i(850646);function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,l.MJ)();return(0,r.Ay)(`/api/v1/projects/${e}/api-test/test-suite-tree-list`)}function o(e){let t=e.dropKey;return t===a.XS&&(t=n.IL),r.Ay.put(`/api/v1/projects/${(0,l.MJ)()}/api-test/test-suite-tree-list/reorder`,{data:{dragKey:e.dragKey,dropKey:t,dropPosition:e.dropPosition}})}},132349:function(e,t,i){"use strict";i.d(t,{X:()=>l});var a=i(496411),n=i(850646);async function l(e){let t=(0,a.MJ)();return await (0,n.Ay)(`/api/v1/projects/${t}/apis/bulk`,{method:"post",data:e})}},232821:function(e,t,i){"use strict";i.d(t,{$:()=>h,A9:()=>m,Q8:()=>f,YW:()=>p,_P:()=>v,vt:()=>u,xj:()=>o,y_:()=>c,yo:()=>d});var a=i(496411),n=i(833797),l=i(850646),r=i(398380),s=i(813347);async function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,a.U3)();return(0,l.Ay)(`/api/v1/api-test/cases/${e}/steps?withCaseDetail=true`,{headers:{"X-Branch-Id":String(t)}})}async function d(e){return l.Ay.put(`/api/v1/api-test/cases/${e.id}`,{data:e})}async function c(e,t){return l.Ay.put(`/api/v1/api-test/cases/${e}`,{data:{options:t}})}async function u(e){return l.Ay.post("/api/v1/api-test/cases",{data:{...e,options:{...s.V,...e.options}}})}async function p(e){return l.Ay.post("/api/v1/api-test/cases/duplicate",{data:e})}function m(e,t){let i={...t};return i.parameters&&(i.parameters=JSON.stringify(i.parameters)),i.requestBody&&(i.requestBody=JSON.stringify(i.requestBody)),i.commonParameters&&(i.commonParameters=JSON.stringify(i.commonParameters)),i.preProcessors&&(i.preProcessors=JSON.stringify((0,n.o)(i.preProcessors))),i.postProcessors&&(i.postProcessors=JSON.stringify(i.postProcessors)),i.auth&&(i.auth=JSON.stringify(i.auth)),i.securityScheme&&(i.securityScheme=JSON.stringify(i.securityScheme)),i.advancedSettings&&(i.advancedSettings=JSON.stringify(i.advancedSettings)),(0,l.Ay)(`/api/v1/projects/${(0,a.MJ)()}/api-test/cases/custom-http-requests/${e}`,{method:"put",data:i})}function h(){return(0,l.Ay)(`/api/v1/projects/${(0,a.MJ)()}/api-test/case-references`)}function v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,a.MJ)(),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,a.U3)();return(0,l.Ay)(`/api/v1/projects/${t}/test-scenarios/${e}/references`,{headers:{"X-Branch-Id":String(i)}})}async function f(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,a.MJ)(),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,a.U3)(),{data:n}=await v(e,t,i);return n?(0,r.keyBy)(n.testScenarios,"id"):{}}},201951:function(e,t,i){"use strict";i.d(t,{P:()=>l,Qq:()=>o,Rm:()=>s,TF:()=>d,Yb:()=>c,vt:()=>r});var a=i(496411),n=i(850646);async function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,a.U3)();return(0,n.Ay)(`/api/v1/api-test/cases/${e}/tokens`,{headers:{"X-Branch-Id":String(t)}})}async function r(e,t){return n.Ay.post("/api/v1/api-test/ci-config",{requestType:"form",data:{relatedId:e,options:t&&JSON.stringify(t)}})}async function s(e,t){return n.Ay.put(`/api/v1/api-test/ci-config/${e}/options`,{requestType:"form",data:{options:JSON.stringify(t)}})}async function o(e){return n.Ay.put(`/api/v1/api-test/ci-config/${e}/token`)}async function d(e){return n.Ay.delete(`/api/v1/api-test/ci-config/${e}`)}async function c(e,t){return n.Ay.put(`/api/v1/projects/${(0,a.MJ)()}/api-test/${e}/ci-config/ordering`,{data:t})}},419857:function(e,t,i){"use strict";i.d(t,{Fh:()=>p,JW:()=>l,Nw:()=>h,P:()=>s,TF:()=>r,Uw:()=>c,gx:()=>u,nd:()=>m,vt:()=>o,yo:()=>d});var a=i(496411),n=i(850646);async function l(e,t){return t<0?{data:[]}:(0,n.Ay)(`/api/v1/projects/${(0,a.MJ)()}/api-test/${e}/data-set/${t}`)}async function r(e,t,i){return n.Ay.delete(`/api/v1/projects/${(0,a.MJ)()}/api-test/${e}/data-set/${t}/data/${i}`)}async function s(e,t,i){return(0,n.Ay)(`/api/v1/projects/${(0,a.MJ)()}/api-test/${e}/data-set/${t}/data/${i}`)}async function o(e){let t=(0,a.MJ)();return n.Ay.post(`/api/v1/projects/${t}/api-test/${e.relatedId}/data-set/${e.dataSetId}/data`,{data:{...e,projectId:t}})}async function d(e){let t=(0,a.MJ)();return n.Ay.put(`/api/v1/projects/${t}/api-test/${e.relatedId}/data-set/${e.dataSetId}/data/${e.id}`,{data:e})}async function c(e){return n.Ay.delete(`/api/v1/projects/${(0,a.MJ)()}/test-data/${e}`)}async function u(e){return n.Ay.put(`/api/v1/projects/${(0,a.MJ)()}/test-data/${e.id}`,{data:e})}async function p(e){return n.Ay.post(`/api/v1/projects/${(0,a.MJ)()}/test-data`,{data:e})}async function m(e){let{entityId:t,dataSetId:i}=e;return n.Ay.get(`/api/v1/projects/${(0,a.MJ)()}/test-data`,{params:{entityId:t,dataSetId:i}})}async function h(e){return n.Ay.get(`/api/v1/projects/${(0,a.MJ)()}/test-data/${e}`)}},479221:function(e,t,i){"use strict";i.d(t,{Kb:()=>o,mV:()=>s,wv:()=>r,zz:()=>l});var a=i(496411),n=i(850646);function l(e){return n.Ay.post(`/api/v1/projects/${(0,a.MJ)()}/test-data-folders`,{data:e})}function r(e){return n.Ay.put(`/api/v1/projects/${(0,a.MJ)()}/test-data-folders/${e.id}`,{data:e})}function s(e){return n.Ay.delete(`/api/v1/projects/${(0,a.MJ)()}/test-data-folders/${e}`)}function o(e){return n.Ay.post(`/api/v1/projects/${(0,a.MJ)()}/test-data-folders/${e.id}/duplicate`,{data:e})}},551105:function(e,t,i){"use strict";i.d(t,{P:()=>r,TF:()=>d,Vb:()=>p,YT:()=>v,YW:()=>c,Yb:()=>u,b7:()=>h,jM:()=>m,q5:()=>g,t:()=>f,vt:()=>s,yo:()=>o});var a=i(496411),n=i(850646),l=i(379333);let r=(0,l.Q)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,a.U3)();return(0,n.Ay)(`/api/v1/projects/${(0,a.MJ)()}/api-test/${e}/data-set`,{headers:{"X-Branch-Id":String(t)}})});function s(e,t){return n.Ay.post(`/api/v1/projects/${(0,a.MJ)()}/api-test/${e}/data-set`,{data:t})}function o(e,t,i){return n.Ay.put(`/api/v1/projects/${(0,a.MJ)()}/api-test/${e}/data-set/${t}`,{data:i})}function d(e,t){return n.Ay.delete(`/api/v1/projects/${(0,a.MJ)()}/api-test/${e}/data-set/${t}`)}function c(e,t){return n.Ay.post(`/api/v1/projects/${(0,a.MJ)()}/api-test/${e}/data-set/${t}/duplicate`)}function u(e,t){return n.Ay.put(`/api/v1/projects/${(0,a.MJ)()}/api-test/${e}/data-set/ordering`,{data:t})}let p=(0,l.Q)(function(){return(0,n.Ay)(`/api/v1/projects/${(0,a.MJ)()}/test-data-sets`)}),m=(0,l.Q)(function(e){return(0,n.Ay)(`/api/v1/projects/${(0,a.MJ)()}/test-data-sets/${e}`)});function h(e){return n.Ay.post(`/api/v1/projects/${(0,a.MJ)()}/test-data-sets`,{data:e})}function v(e,t){return n.Ay.put(`/api/v1/projects/${(0,a.MJ)()}/test-data-sets/${e}`,{data:t})}function f(e){return n.Ay.delete(`/api/v1/projects/${(0,a.MJ)()}/test-data-sets/${e}`)}function g(e){return n.Ay.post(`/api/v1/projects/${(0,a.MJ)()}/test-data-sets/${e}/duplicate`)}},490401:function(e,t,i){"use strict";i.d(t,{U:()=>s,j:()=>r});var a=i(449104),n=i(496411),l=i(850646);function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,n.MJ)();return(0,l.Ay)(`/api/v1/projects/${e}/api-test/test-data-tree-list`)}function s(e){let t=e.dropKey;return t===a.sc&&(t=a.d9),l.Ay.put(`/api/v1/projects/${(0,n.MJ)()}/api-test/test-data-tree-list/reorder`,{data:{dragKey:e.dragKey,dropKey:t,dropPosition:e.dropPosition}})}},239805:function(e,t,i){"use strict";i.d(t,{r_:()=>g,t_:()=>v,tr:()=>y});var a=i(850646),n=i(790453),l=i(398380),r=i(636125),s=i(413078),o=i.n(s),d=i(169508),c=i(817106),u=i(519271),p=i(909871);let m=[".zip",".rar",".7z",".tar",".gz",".bz2",".xz",".iso",".cab",".z",".tgz",".tbz",".lzh",".ace",".arj",".pdf"],h=["image/","video/","application/mp4","application/vnd.rn-realmedia-vbr","application/vnd.openxmlformats-officedocument","application/vnd.ms-","application/msword"];async function v(e){return(0,a.Ay)("/api/v1/events",{method:"POST",params:{event:"onboardingProgress"},data:{onboardingProgress:e},errorHandler:l.noop})}function f(e){let t=`.${(0,c.extension)(e.type)}`;return[".json",".xml",".yaml",".yml"].includes(t)?t:o().extname(e.webkitRelativePath||e.name).toLowerCase()}async function g(e,t,i){if(d.f3||!(null==i?void 0:i.enable))return;let s=i.enableFile?t.filter(e=>e.size<=i.maxFileSize):[],u=s.filter(e=>{let t=f(e);if(m.includes(t))return!1;let i=(0,c.lookup)(`name${t}`);return!("string"==typeof i&&h.some(e=>i.startsWith(e)))&&!0});u.length<s.length&&e.errorMessage&&(e.errorType=n.hW.INCORRECT_FILE_TYPE);let p=new FormData;if(u.length){let e=f(u[0]);if(1===u.length&&[".json",".xml",".yaml",".yml",".md",".txt",".har",".pdf",".doc",".docx"].includes(e))p.append("file",new File([u[0]],`file${e}`));else{let e=new r.rW,t=0,a=[];for(let i of u){t++;let n=i.webkitRelativePath||i.name,l=(()=>{if((0,r.yi)(n).length<=100)return n;let e=o().basename(n);if((0,r.yi)(e).length<=90)return o().join("_",`${t}__`+e);let i=o().extname(n)||".unknown";return o().join("_",(t+i).slice(-90))})(),s=await i.arrayBuffer();n!==l&&a.push({webkitRelativePath:n,tarRelativePath:l}),e.addFile(l,s)}a.length&&e.addFile("__filePathMap.json",JSON.stringify(a));let n=new File([await e.write()],"import-record-files.tar");n.size<=i.packagedMaxFileSize&&p.append("file",n)}}return p.append("format",e.format),p.append("source",e.source),p.append("projectId",e.projectId.toString()),e.errorMessage&&p.append("errorMessage",e.errorMessage),p.append("sourceFile",e.sourceFile),e.errorType&&p.append("errorType",e.errorType),p.append("type",e.type),e.contentVersion&&p.append("contentVersion",e.contentVersion),(0,a.Ay)("/api/v1/import-record-event",{method:"POST",requestType:"form",data:p,errorHandler:l.noop}).catch(l.noop)}function y(e){if(e)return(()=>{if(e instanceof u.Yw){if("authorizationRequired"===e.type)return n.hW.URL_FETCH_AUTH_FAILED;else if("webExtensionRequired"===e.type||"desktopVersionRequired"===e.type)return n.hW.URL_FETCH_NETWORK_ERROR;else if("invalidDataFormat"===e.type)return n.hW.PARSE_ERROR}else if(e instanceof p.AxiosError){var t,i;return(null==(t=e.response)?void 0:t.status)?(null==(i=e.response)?void 0:i.status)===401?n.hW.URL_FETCH_AUTH_FAILED:n.hW.URL_FETCH_SERVER_ERROR:n.hW.URL_FETCH_NETWORK_ERROR}else if(e instanceof Error)if(Object.values(n.hW).includes(e.cause))return e.cause;else return n.hW.JS_ERROR;return n.hW.UNKNOWN})()}},808611:function(e,t,i){"use strict";i.d(t,{E6:()=>g,OK:()=>f,Tu:()=>v,n_:()=>m,vt:()=>p,wU:()=>y,yo:()=>h});var a=i(169508),n=i(496411),l=i(483482),r=i(850646),s=i(190183),o=i(909871),d=i.n(o),c=i(398380);let u=e=>{let t=s.xO[e];return t?t:e},p=async(e,t,i)=>r.Ay.post(`/api/v1/projects/${(0,n.MJ)()}/${u(e)}/${t}/project-comments`,{data:i}),m=async(e,t,i)=>{var a;let l={...i,status:(null!=(a=null==i?void 0:i.status)?a:["OPENING"]).join(",")};return r.Ay.get(`/api/v1/projects/${(0,n.MJ)()}/${u(e)}/${t}/project-comments`,{params:l})},h=async(e,t,i,a)=>r.Ay.put(`/api/v1/projects/${(0,n.MJ)()}/${u(e)}/${t}/project-comments/${i}`,{data:a}),v=async(e,t,i)=>r.Ay.delete(`/api/v1/projects/${(0,n.MJ)()}/${u(e)}/${t}/project-comments/${i}`),f=async(e,t,i)=>r.Ay.get(`/api/v1/projects/${(0,n.MJ)()}/${u(e)}/${t}/project-comments/${i}`),g=async(e,t,i)=>r.Ay.get(`/api/v1/projects/${(0,n.MJ)()}/${u(e)}/${t}/project-comments/${i}/replies`),y=async(e,t)=>{let i=new FormData;return i.append("file",e),i.append("type","projectComment"),d().post(`${(0,r.hY)()}/api/v1/project-images`,i,{withCredentials:!0,headers:(0,c.omitBy)({Authorization:(0,n.iD)(),"X-Project-Id":`${(0,n.MJ)()}`,"X-Device-Id":`${(0,l.fL)()}`,"Access-Control-Allow-Origin":"*","Accept-Language":a.O1},e=>void 0===e||""===e),onUploadProgress:function(e){t&&"function"==typeof t&&t(parseInt(`${Math.round(100*e.loaded/e.total)}`))}})}},988374:function(e,t,i){"use strict";i.d(t,{I:()=>r});var a=i(496411),n=i(850646);let l=(0,i(379333).Q)(async function(e){let t=new URLSearchParams({runnerType:"GENERAL",serverType:"SELF_HOSTED"});try{let{data:i=[]}=await (0,n.Ay)(`/api/v1/projects/${e}/runners?${t.toString()}`);return i}catch(e){return console.log(e),[]}});async function r(e){let t=(0,a.MJ)();if(!t)return[];let i=await l(t);return e?i.filter(t=>t.status===e):i}},747752:function(e,t,i){"use strict";i.d(t,{dG:()=>d,jA:()=>r,mY:()=>l,po:()=>o,s6:()=>s});var a=i(496411),n=i(850646);async function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.MJ)();return(0,n.Ay)(`/api/v1/projects/${e}/test-case-categories`)}async function r(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,a.MJ)();return(0,n.Ay)(`/api/v1/projects/${i}/test-case-categories/${e}`,{method:"DELETE",data:t})}async function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,a.MJ)();return(0,n.Ay)(`/api/v1/projects/${t}/test-case-categories`,{method:"POST",data:e})}async function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,a.MJ)();return(0,n.Ay)(`/api/v1/projects/${t}/test-case-categories/${e.id}`,{method:"PUT",data:e})}async function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,a.MJ)();return(0,n.Ay)(`/api/v1/projects/${t}/test-case-category-list/reorder`,{method:"PUT",data:e})}},981418:function(e,t,i){"use strict";i.d(t,{In:()=>l,J4:()=>r,WD:()=>s,dd:()=>d,dj:()=>o});var a=i(496411),n=i(850646);async function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.MJ)();return(0,n.Ay)(`/api/v1/projects/${e}/test-case-tags`)}async function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,a.MJ)();return(0,n.Ay)(`/api/v1/projects/${t}/test-case-tags/${e}`,{method:"DELETE"})}async function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,a.MJ)();return(0,n.Ay)(`/api/v1/projects/${t}/test-case-tags`,{method:"POST",data:e})}async function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,a.MJ)();return(0,n.Ay)(`/api/v1/projects/${t}/test-case-tags/${e.id}`,{method:"PUT",data:e})}async function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,a.MJ)();return(0,n.Ay)(`/api/v1/projects/${t}/test-case-tag-list/reorder`,{method:"PUT",data:e})}},61898:function(e,t,i){"use strict";i.d(t,{Ee:()=>d,KA:()=>p,KF:()=>m,Pl:()=>c,bm:()=>u});var a=i(909871),n=i.n(a),l=i(850646),r=i(379333),s=i(496411),o=i(435685);let d=(0,r.Q)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.Sy)();if(!e)return[];try{let{data:t=[]}=await (0,l.Ay)(`/api/v1/teams/${e}/request-proxy-agents`,{errorHandler:l.xW});return t}catch(e){return console.log(e),[]}});async function c(e,t){let i=`${e}/health-check`;try{let{utils:{getRequestProxyAuthHeadersModule:e}}=await o.baseContainer.getItems(e=>[e.utils]),a=await n()(i,{headers:e.getRequestProxyAuthHeaders(t),timeout:3e4});if(200!==a.status)throw Error("connection failed")}catch(e){throw console.log(`${i} error:`,e),e}}async function u(e,t){return(await l.Ay.post(`/api/v1/teams/${e}/request-proxy-agents`,{data:t})).data}async function p(e,t,i){await l.Ay.put(`/api/v1/teams/${e}/request-proxy-agents/${t}`,{data:i}),d.clearCache()}async function m(e,t){await l.Ay.delete(`/api/v1/teams/${e}/request-proxy-agents/${t}`),d.clearCache()}},341428:function(e,t,i){"use strict";i.d(t,{P_:()=>n,cq:()=>r,k3:()=>l,v7:()=>s});var a=i(850646);function n(e){return(0,a.Ay)(`/api/v1/projects/${e}/seo-infos`)}function l(e){return(0,a.Ay)(`/api/v1/projects/${e.projectId}/seo-infos`,{params:{relatedId:e.relatedId,relatedType:e.relatedType}})}function r(e){return(0,a.Ay)(`/api/v1/projects/${e.projectId}/seo-infos`,{data:e,method:"post"})}function s(e){return(0,a.Ay)(`/api/v1/projects/${e.projectId}/seo-infos/${e.id}`,{data:e,method:"put"})}},93762:function(e,t,i){"use strict";i.d(t,{$J:()=>l,HX:()=>s,L3:()=>p,MV:()=>d,NV:()=>m,Su:()=>h,ex:()=>o,pX:()=>c,yC:()=>r,yW:()=>u});var a=i(496411),n=i(850646);let l=0;async function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.Sy)();if(!e)return[];let t=new URLSearchParams({runnerType:"GENERAL",serverType:"SELF_HOSTED"}).toString();try{let{data:i=[]}=await (0,n.Ay)(`/api/v1/teams/${e}/runners?${t}`);return i}catch(e){return console.log(e),[]}}function s(e){return n.Ay.post(`/api/v1/teams/${e.teamId}/runners`,{data:{...e,runnerType:"GENERAL",serverType:"SELF_HOSTED"}}).then(e=>e.data)}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.Sy)(),t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;return n.Ay.put(`/api/v1/teams/${e}/runners/${t}`,{data:i})}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.Sy)(),t=arguments.length>1?arguments[1]:void 0;return n.Ay.delete(`/api/v1/teams/${e}/runners/${t}`)}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.Sy)(),t=arguments.length>1?arguments[1]:void 0;return n.Ay.put(`/api/v1/teams/${e}/runners/${t}/status`,{data:{status:"STARTED"}})}function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.Sy)(),t=arguments.length>1?arguments[1]:void 0;return n.Ay.get(`/api/v1/teams/${e}/runners/${t}/detect`)}function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.Sy)(),t=arguments.length>1?arguments[1]:void 0;return n.Ay.put(`/api/v1/teams/${e}/runners/${t}/status`,{data:{status:"STOPPED"}})}function m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.Sy)(),t=arguments.length>1?arguments[1]:void 0;return n.Ay.post(`/api/v1/teams/${e}/runners/${t}/redeploy`).then(e=>e.data)}function h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.Sy)(),t=arguments.length>1?arguments[1]:void 0;return n.Ay.post(`/api/v1/teams/${e}/runners/${t}/transfer`).then(e=>e.data)}},955659:function(e,t,i){"use strict";i.d(t,{TF:()=>l,YW:()=>r,c3:()=>s});var a=i(496411),n=i(850646);async function l(e){return n.Ay.delete(`/api/v1/projects/${(0,a.MJ)()}/test-scenario-folder/${e}`)}async function r(e){return n.Ay.post(`/api/v1/projects/${(0,a.MJ)()}/test-scenario-folder/${e.id}/duplicate`,{data:e})}async function s(e){let t=(0,a.MJ)();return await n.Ay.post(`/api/v1/projects/${t}/fork-test-scenario-folders`,{data:e})}},276764:function(e,t,i){"use strict";i.d(t,{Jc:()=>d,P:()=>l,TF:()=>o,vt:()=>r,yo:()=>s});var a=i(496411),n=i(850646);function l(e,t){return(0,n.Ay)(`/api/v1/projects/${(0,a.MJ)()}/test-scenario/${e}/instance/${t}`)}function r(e,t){let i={...t};return i.options&&(i.options=JSON.stringify(i.options)),n.Ay.post(`/api/v1/projects/${(0,a.MJ)()}/test-scenario/${e}/instance`,{data:i})}function s(e,t,i){let l={...i};return l.options&&(l.options=JSON.stringify(l.options)),n.Ay.put(`/api/v1/projects/${(0,a.MJ)()}/test-scenario/${e}/instance/${t}`,{data:l})}function o(e,t){return n.Ay.delete(`/api/v1/projects/${(0,a.MJ)()}/test-scenario/${e}/instance/${t}`)}function d(e){return n.Ay.delete(`/api/v1/projects/${(0,a.MJ)()}/test-scenario-instance/bulk-delete`,{data:{ids:e}})}},709372:function(e,t,i){"use strict";i.d(t,{k:()=>A});var a=i(325475),n=i(850646);async function l(){return(0,n.Ay)("/api/v1/preset-endpoint-design-guidelines",{method:"get"})}async function r(e,t){return(0,n.Ay)(`/api/v1/projects/${e}/endpoint-design-guidelines`,{method:"get",params:{moduleId:t}})}async function s(e,t,i){return(0,n.Ay)(`/api/v1/projects/${e}/endpoint-design-guidelines`,{method:"post",data:t,...i})}async function o(e,t,i,a){return(0,n.Ay)(`/api/v1/projects/${e}/endpoint-design-guidelines/${t}`,{method:"put",data:i,...a})}async function d(e,t,i){return(0,n.Ay)(`/api/v1/projects/${e}/endpoint-design-guidelines/${t}`,{method:"delete",...i})}async function c(e){return(0,n.Ay)(`/api/v1/organizations/${e}/endpoint-design-guidelines`,{method:"get"})}async function u(e,t,i){return(0,n.Ay)(`/api/v1/organizations/${e}/endpoint-design-guidelines`,{method:"post",data:t,...i})}async function p(e,t,i,a){return(0,n.Ay)(`/api/v1/organizations/${e}/endpoint-design-guidelines/${t}`,{method:"put",data:i,...a})}async function m(e,t,i){return(0,n.Ay)(`/api/v1/organizations/${e}/endpoint-design-guidelines/${t}`,{method:"delete",...i})}async function h(e){return(0,n.Ay)(`/api/v1/teams/${e}/endpoint-design-guidelines`,{method:"get"})}async function v(e,t,i){return(0,n.Ay)(`/api/v1/teams/${e}/endpoint-design-guidelines`,{method:"post",data:t,...i})}async function f(e,t,i,a){return(0,n.Ay)(`/api/v1/teams/${e}/endpoint-design-guidelines/${t}`,{method:"put",data:i,...a})}async function g(e,t,i){return(0,n.Ay)(`/api/v1/teams/${e}/endpoint-design-guidelines/${t}`,{method:"delete",...i})}var y=i(242655),x=i.n(y);let A=(0,a.vt)((e,t)=>({presetGuidelines:[],projectGuidelinesMap:{},teamGuidelinesMap:{},orgGuidelinesMap:{},async fetchPresetGuidelines(){let{presetGuidelines:i}=t();if((null==i?void 0:i.length)>0)return i;let a=await l();return a&&a.success?(e({presetGuidelines:a.data||[]}),a.data||[]):[]},async fetchProjectGuidelines(e){let{projectGuidelinesMap:i,setProjectGuidelines:a}=t();if(i[e])return i[e];let n=await r(e);return n&&n.success?(a(e,n.data||[]),n.data||[]):[]},async fetchTeamGuidelines(e){let{teamGuidelinesMap:i,setTeamGuidelines:a}=t();if(i[e])return i[e];let n=await h(e);return n&&n.success?(a(e,n.data||[]),n.data||[]):[]},async fetchOrgGuidelines(e){let{orgGuidelinesMap:i,setOrgGuidelines:a}=t();if(i[e])return i[e];let n=await c(e);return n&&n.success?(a(e,n.data||[]),n.data||[]):[]},setProjectGuidelines(t,i){e(e=>({projectGuidelinesMap:{...e.projectGuidelinesMap,[t]:i}}))},updateProjectGuidelines(t,i){e(e=>({projectGuidelinesMap:{...e.projectGuidelinesMap,[t]:i(e.projectGuidelinesMap[t]||[])}}))},async createProjectGuideline(e,i){let a=await s(e,i);if(a&&a.success){let i=a.data;return t().updateProjectGuidelines(e,e=>x()(e,{$push:[i]})),i}return null},async updateProjectGuideline(e,i,a){let n=await o(e,i,a);if(n&&n.success){let a=n.data,{projectGuidelinesMap:l,updateProjectGuidelines:r}=t(),s=(l[e]||[]).findIndex(e=>e.id===i);return s>-1&&r(e,e=>x()(e,{[s]:{$set:a}})),a}return null},async deleteProjectGuideline(e,i){let a=await d(e,i);if(a&&a.success){let{projectGuidelinesMap:a,updateProjectGuidelines:n}=t(),l=(a[e]||[]).findIndex(e=>e.id===i);return l>-1&&n(e,e=>x()(e,{$splice:[[l,1]]})),!0}return!1},setTeamGuidelines(t,i){e(e=>({teamGuidelinesMap:{...e.teamGuidelinesMap,[t]:i}}))},updateTeamGuidelines(t,i){e(e=>({teamGuidelinesMap:{...e.teamGuidelinesMap,[t]:i(e.teamGuidelinesMap[t]||[])}}))},async createTeamGuideline(e,i){let a=await v(e,i);if(a&&a.success){let i=a.data;return t().updateTeamGuidelines(e,e=>x()(e,{$push:[i]})),i}return null},async updateTeamGuideline(e,i,a){let n=await f(e,i,a);if(n&&n.success){let a=n.data,{teamGuidelinesMap:l,updateTeamGuidelines:r}=t(),s=(l[e]||[]).findIndex(e=>e.id===i);return s>-1&&r(e,e=>x()(e,{[s]:{$set:a}})),a}return null},async deleteTeamGuideline(e,i){let a=await g(e,i);if(a&&a.success){let{teamGuidelinesMap:a,updateTeamGuidelines:n}=t(),l=(a[e]||[]).findIndex(e=>e.id===i);return l>-1&&n(e,e=>x()(e,{$splice:[[l,1]]})),!0}return!1},setOrgGuidelines(t,i){e(e=>({orgGuidelinesMap:{...e.orgGuidelinesMap,[t]:i}}))},updateOrgGuidelines(t,i){e(e=>({orgGuidelinesMap:{...e.orgGuidelinesMap,[t]:i(e.orgGuidelinesMap[t]||[])}}))},async createOrgGuideline(e,i){let a=await u(e,i);if(a&&a.success){let i=a.data;return t().updateOrgGuidelines(e,e=>x()(e,{$push:[i]})),i}return null},async updateOrgGuideline(e,i,a){let n=await p(e,i,a);if(n&&n.success){let a=n.data,{orgGuidelinesMap:l,updateOrgGuidelines:r}=t(),s=(l[e]||[]).findIndex(e=>e.id===i);return s>-1&&r(e,e=>x()(e,{[s]:{$set:a}})),a}return null},async deleteOrgGuideline(e,i){let a=await m(e,i);if(a&&a.success){let{orgGuidelinesMap:a,updateOrgGuidelines:n}=t(),l=(a[e]||[]).findIndex(e=>e.id===i);return l>-1&&n(e,e=>x()(e,{$splice:[[l,1]]})),!0}return!1}}))},404297:function(e,t,i){"use strict";i.d(t,{f:()=>F});var a=i(838e3),n=i(641486),l=i.n(n),r=i(95470),s=i(738645),o=i(362010),d=i(740565),c=i(140049),u=i(554692),p=i(671466),m=i(700255),h=i(276129),v=i(868629),f=i(689368),g=i(718180),y=i(820182),x=i(929463),A=i(764007),j=i(579159),b=i(398380);let w="bulkEdit-JiWbl3",S="bulkEditModalWrapper-PckZdb",C={comma:{localNameId:"byComma",mode:"comma",localTipsId:"editorButtonTips"},colon:{localNameId:"byColon",mode:"colon",localTipsId:"editorColonButtonTips"}},{TextArea:I}=y.A;async function N(e,t){let i=[];e.forEach(e=>{let a={};t.forEach(t=>{let{dataIndex:i,getValueByType:n,initType:l}=t;if(n)a[i]=n(e[i]);else{var r;a[i]=null==(r=e[i])?void 0:r.toString()}l&&(a[i]=l(e[i],e))}),i.push(a)});let a=t.map(e=>e.dataIndex);try{return(await (0,v.eT)(i,a)).split("\n").filter((e,t)=>0!==t).join("\n")}catch(e){return""}}function k(e,t,i){if(i&&/^\[.*\]$/.test(e))try{return JSON.parse(e)}catch(e){return[]}switch(t){case"checkbox":case"switch":case"circleCheckbox":return"true"===e;case"inputNumber":case"fastInputNumber":{let t=parseFloat(e);return Number.isNaN(t)?void 0:t}default:return e||""}}function T(e,t,i,a,n){let l=[],r=t.split("\n"),s=(0,b.cloneDeep)(e),o=[];return r.forEach((e,t)=>{if(t===r.length-1&&""===e.trim())return;let d=e.indexOf(":"),c=e.slice(0,d),u=-1!==d?e.slice(d+1):"",[p,m]=n,h=i.find(e=>e.dataIndex===m),v=s.find((e,t)=>!o.includes(t)&&e[p]===c&&(o.push(t),!0));if(v){let{isCalcArray:e}=h;v[m]=k(u,"input",null==e?void 0:e(v)),l.push(v)}else{let e=(null==a?void 0:a())||{},t={};i.forEach(i=>{var a;let{dataIndex:n,componentType:l}=i||{};t[n]=k(null!=(a=e[n])?a:"",l),t[p]=c,t[m]=u}),l.push({...e,...t})}}),l}function M(e){var t,i,l;let r,{dataSource:s,bulkEditColonFieldKeys:o=[],columns:u,onCancel:p,onSubmit:y,newDataTemplate:M,defaultBulkMode:E}=e,_=(0,n.useMemo)(()=>u.filter(e=>e.bulkEdit),[u]),{externalURL:F}=(0,f.Ay)(e=>{let{externalURL:t}=e;return{externalURL:t}}),[D,R]=(0,n.useState)(""),[O,P]=(0,n.useState)(()=>o.length>0?null!=E?E:"comma":"comma"),[L,$]=(0,n.useState)(!1),B=(0,n.useRef)(s),z=async(e,t)=>{let i="";switch(t){case"comma":i=await N(e,_);break;case"colon":var a,n;let l,r;a=e,n=o,l=[],r=[],_.forEach(e=>{n.includes(e.dataIndex)&&r.push(e)}),a.forEach(e=>{let t=[];r.forEach(i=>{let{dataIndex:a,getValueByType:n}=i;n?t.push(n(e[a])):t.push(e[a])}),l.push(t.join(":"))}),i=l.join("\n")}return i},U=(t,i)=>{let a=e.mergeByColon||T;switch(i){case"comma":var n,l,r,s;let c,u,p;return n=B.current,l=t,r=_,s=M,c=[],u=r.map(e=>e.dataIndex).join(","),p=(0,v.parseJsonOrCsv)(`${u}
${l}`,{relax_column_count_more:!0,relax_column_count_less:!0}),p&&"object"==typeof p?(null==p||p.rows.forEach((e,t)=>{let i=(0,b.cloneDeep)(e);r.forEach(e=>{let{dataIndex:t,componentType:a,initType:n,isCalcArray:l}=e||{};n&&(i[t]=n(i[t],i)),i[t]=k(i[t],a,null==l?void 0:l(i))}),n[t]?c.push({...n[t],...i}):c.push({...s(),...i})}),c):(x.Ay.error({title:(0,d.hw)({id:"apiTestCase.messageError.praseError"}),content:(0,d.hw)({id:"apiTestCase.messageError.csvFormatError"})}),n);case"colon":return a(B.current,t,_,M,o);default:return[]}},H=async e=>{if(L)return;$(!0);let t=U(D,O),i=await z(t,e);B.current=t,P(e),R(i),$(!1)},V=(0,c.A)(()=>{L||y(U(D,O))});(0,g.A)(async()=>{$(!0),R(await z(s,O)),$(!1)}),(0,h.B7)("BulkEditorModal","save",()=>{V()});return(0,a.jsx)(A.Ay,{title:(0,a.jsx)(d.sA,{id:"filedBulkEdit"}),visible:!0,centered:!0,size:"720",onOk:V,onCancel:p,maskClosable:!1,zIndex:1050,wrapClassName:S,bodyStyle:{maxHeight:"calc(100vh - 56px - 48px - 4px)"},children:(0,a.jsxs)("div",{className:w,children:[(0,a.jsxs)("div",{className:"top-bar flex items-center",children:[o.length>0&&(0,a.jsx)(j.A,{size:"small",options:Object.keys(C).map(e=>({label:(0,d.hw)({id:C[e].localNameId}),value:e})),gap:0,value:O,onChange:e=>H(e),className:"tab flex-shrink-0"}),(0,a.jsxs)("span",{className:"formatTip",children:[(0,d.hw)({id:"format"}),":\xa0",(t=_,i=O,l=o,r=[],t.forEach(e=>{if(e.bulkEdit){let t="function"==typeof e.rawTitle?e.rawTitle():e.rawTitle,a="function"==typeof e.title?e.title():e.title;"colon"===i?l.includes(e.dataIndex)&&r.push(t||a):r.push(t||a)}}),(0,a.jsx)(a.Fragment,{children:r.map((e,t)=>{let n=t===r.length-1;return(0,a.jsxs)("span",{children:[e,!n&&("colon"===i?":":",")]})})}))]})]}),(0,a.jsxs)("div",{className:"editor bg-light",children:[(0,a.jsx)(I,{disabled:L,onChange:e=>R(e.target.value),value:D,autoSize:!0,style:{minHeight:160}}),(0,a.jsxs)("div",{className:"tips flex items-center flex-wrap whitespace-pre",children:["comma"===O&&(0,a.jsxs)(a.Fragment,{children:[(0,d.hw)({id:"editor.tip"}),(0,a.jsx)(m.A,{url:F.help.csv,children:(0,d.hw)({id:"apiTestCase.csvStandardRules"})})]}),(0,d.hw)({id:C[O].localTipsId})]})]})]})})}function E(e){var t;let i,{value:n,onChange:r,newDataTemplate:s,columns:m,table:h,defaultBulkMode:v,ignoreSpecRow:f,bulkEditButtonRender:g,toolbarProjectPrivilegeRequired:y}=e,[x,A]=l().useState(!1),j=null==(t=h.options.meta)?void 0:t.expandable,{commaColumns:b,colonColumns:w}=l().useMemo(()=>{let e=[],t=[];return m.forEach(i=>{var a;let n=i.bulkEditMode;if(!n||0===n.length)return;let l={dataIndex:i.dataIndex,title:i.title,bulkEdit:!0,getValueByType:i.bulkEditGetValueByType,initType:i.bulkEditInitType,isCalcArray:i.bulkEditIsCalcArray,componentType:null!=(a=i.bulkEditComponentType)?a:i.componentType};n.includes("comma")&&e.push(l),n.includes("colon")&&t.push(l)}),{commaColumns:e,colonColumns:t}},[m]),S=(0,c.A)(()=>{var e;return null!=(e=null==s?void 0:s())?e:{}}),C=l().useCallback(()=>{A(e=>!e)},[]);return(0,a.jsxs)("div",{children:[(0,a.jsx)(o.ZQ,{privilege:y,hiddenToGuest:!0,excludePrivilege:!y,children:g?g({onClick:C}):j?(0,a.jsx)(u.A,{overlay:(0,d.hw)({id:"filedBulkEdit"}),children:(0,a.jsx)(p.A,{onClick:C,size:13,type:"icon-bulk-editing"})}):(0,a.jsx)("div",{onClick:C,children:(0,d.hw)({id:"filedBulkEdit"})})}),x&&(0,a.jsx)(M,{bulkEditing:x,columns:b,onCancel:()=>A(!1),onSubmit:e=>{A(!1),r&&(f?r([...(null!=n?n:[]).filter(f),...e]):null==r||r(e))},dataSource:(i=null!=n?n:[],f?i.filter(e=>!f(e)):i),newDataTemplate:S,bulkEditColonFieldKeys:w.map(e=>{var t,i;return null!=(i=null==(t=e.dataIndex)?void 0:t.toString())?i:""}),className:"",defaultBulkMode:v})]})}function _(e){let{toolbarRender:t,toolbarProjectPrivilegeRequired:i,defaultBulkMode:n,hiddenToolBar:r,...o}=e,d=l().useMemo(()=>[...null!=t?t:[],t=>(0,a.jsx)(E,{columns:e.columns,value:e.value,onChange:e.onChange,newDataTemplate:e.newDataTemplate,table:t,defaultBulkMode:n,ignoreSpecRow:e.ignoreSpecRow,bulkEditButtonRender:e.bulkEditButtonRender,toolbarProjectPrivilegeRequired:i})],[e.columns,e.newDataTemplate,e.onChange,e.value,t,n]);return(0,a.jsx)(s.N,{...o,toolbarRender:r?void 0:d})}function F(e){let{delayLoadingMs:t=0,value:i}=e,s=l().useMemo(()=>{var e;return(null!=(e=null==i?void 0:i.length)?e:0)>30},[i]),o=l().useMemo(()=>!t&&s?100:t,[t,s]),d=function(e,t){let[i,a]=(0,n.useState)(!1),l=(0,n.useRef)(),r=(0,n.useRef)(void 0),s=(0,n.useCallback)(()=>{a(!1),l.current&&clearTimeout(l.current),l.current=setTimeout(()=>{var e;a(!0),null==(e=r.current)||e.call(r)},e)},[e]),o=(0,n.useCallback)(()=>{a(!1),l.current&&clearTimeout(l.current)},[]);return(0,n.useEffect)(()=>{r.current=void 0},[void 0]),(0,n.useEffect)(()=>(s(),o),[e]),i}(o);return o&&!d?(0,a.jsx)(r.A,{active:!0}):(0,a.jsx)(_,{...e})}},537890:function(e,t,i){"use strict";i.d(t,{Ay:()=>u});var a=i(838e3),n=i(511389),l=i(709530),r=i(641486),s=i.n(r),o=i(442843);let d=(0,r.lazy)(()=>Promise.all([i.e("720"),i.e("61267")]).then(i.bind(i,658675)).then(e=>{for(let t in o.A){let i=o.A[t];i.monacoEditorThemeProps&&e.monaco.editor.defineTheme(i.monacoEditorTheme,i.monacoEditorThemeProps)}return{default:e.MonacoDiffEditor}})),c=(0,r.forwardRef)((e,t)=>(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)(l.A,{}),children:(0,a.jsx)(d,{...e,theme:o.A[e.theme].monacoEditorTheme,ref:t})}));i(204379);let u=s().forwardRef((e,t)=>{let{theme:i}=(0,r.useContext)(n.Ay);return(0,a.jsx)(c,{...e,theme:i.background,ref:t})})},648500:function(e,t,i){"use strict";i.d(t,{S:()=>a.S});var a=i(502464)},842765:function(e,t,i){"use strict";i.d(t,{A:()=>r});var a=i(838e3),n=i(838487),l=i.n(n);function r(e){var t;let{children:i,title:n,className:r,style:s}=e;return(0,a.jsx)("span",{style:s,className:l()(r,"truncate block"),title:n||(null==i||null==(t=i.toString)?void 0:t.call(i)),children:i})}},850050:function(e,t,i){"use strict";i.d(t,{A:()=>k});var a=i(838e3),n=i(941929),l=i(140049),r=i(272164),s=i(662387),o=i(838487),d=i.n(o),c=i(820182),u=i(458184),p=i(671466),m=i(398380),h=i(641486),v=i(718180),f=i(740565),g=i(969812),y=i(861418);let x=e=>{let{onClose:t,children:i,menu:n,visible:l,zIndex:r,...s}=e,o=(0,h.useRef)(null),d=(0,h.useRef)(null);!function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"click",a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=(0,h.useRef)(e);n.current=e,(0,h.useEffect)(()=>{let e=e=>{(Array.isArray(t)?t:[t]).some(t=>{var i;let a,n=(i=t)?a="function"==typeof i?i():"current"in i?i.current:i:void 0;return!n||(null==n?void 0:n.contains(e.target))})||n.current(e)};return document.addEventListener(i,e,a),()=>{document.removeEventListener(i,e)}},[t,i,a])}(e=>{t()},o,void 0,!0);let[c,u]=(0,h.useState)({top:0,left:0});return(0,h.useEffect)(()=>{var e;let{left:t=0,height:i=0,top:a=0}=(null==(e=d.current)?void 0:e.getBoundingClientRect())||{};u({left:t,top:a+i})},[i]),(0,a.jsxs)("div",{ref:d,...s,children:[i,l?(0,y.createPortal)((0,a.jsx)("div",{ref:o,style:{position:"absolute",zIndex:null!=r?r:999,marginTop:"4px",...c},children:n}),document.body):null]})},A={"filter-dropdown-menu-button-wrapper":"filter-dropdown-menu-button-wrapper-QyIESN",filterDropdownMenuButtonWrapper:"filter-dropdown-menu-button-wrapper-QyIESN","filter-delete-button":"filter-delete-button-pe_KXt",filterDeleteButton:"filter-delete-button-pe_KXt","filter-dropdown-menu-button":"filter-dropdown-menu-button-xR5Stu",filterDropdownMenuButton:"filter-dropdown-menu-button-xR5Stu","button-arrow-down":"button-arrow-down-Q5VcPu",buttonArrowDown:"button-arrow-down-Q5VcPu","filter-dropdown-menu-display-label":"filter-dropdown-menu-display-label-bW3Cwt",filterDropdownMenuDisplayLabel:"filter-dropdown-menu-display-label-bW3Cwt","filter-dropdown-menu":"filter-dropdown-menu-UOgiyq",filterDropdownMenu:"filter-dropdown-menu-UOgiyq","filter-dropdown-menu-select-item":"filter-dropdown-menu-select-item-QvOOtk",filterDropdownMenuSelectItem:"filter-dropdown-menu-select-item-QvOOtk","filter-dropdown-menu-select-item-selected":"filter-dropdown-menu-select-item-selected-GOojK8",filterDropdownMenuSelectItemSelected:"filter-dropdown-menu-select-item-selected-GOojK8","filter-dropdown-menu-item-wrapper":"filter-dropdown-menu-item-wrapper-O62RfO",filterDropdownMenuItemWrapper:"filter-dropdown-menu-item-wrapper-O62RfO","filter-dropdown-menu-clear-button":"filter-dropdown-menu-clear-button-sCf6_i",filterDropdownMenuClearButton:"filter-dropdown-menu-clear-button-sCf6_i","filter-dropdown-menu-checkbox-group":"filter-dropdown-menu-checkbox-group-RLc15c",filterDropdownMenuCheckboxGroup:"filter-dropdown-menu-checkbox-group-RLc15c","filter-dropdown-menu-select-count":"filter-dropdown-menu-select-count-IngQaq",filterDropdownMenuSelectCount:"filter-dropdown-menu-select-count-IngQaq","filter-checkbox":"filter-checkbox-JFz3sX",filterCheckbox:"filter-checkbox-JFz3sX","filter-search":"filter-search-I7383J",filterSearch:"filter-search-I7383J"},j=e=>{let{filterList:t=[],filterTypeList:i=[],onChangFilterTypeList:n,onChangeFilterType:r}=e,[s,o]=(0,h.useState)(!1),{formatMessage:c}=(0,f.tz)(),m=(0,l.A)(()=>{o(!1)}),v=(0,l.A)(()=>{o(!s)}),y=(0,h.useMemo)(()=>{var e;let a=(null==t||null==(e=t.filter(e=>e.isDefault))?void 0:e.length)||0;return i?i.length-a:0},[i,t]),j=(0,l.A)(()=>{n([]),r(""),m()}),b=e=>{let{value:t,checked:a}=e.target;if(a)n([...i,t]),r(t),m();else{let e=i.findIndex(e=>e===t);if(e>-1){let t=[...i];t.splice(e,1),n(t)}}},w=(0,h.useMemo)(()=>t.filter(e=>!e.isDefault),[t]),S=(0,h.useMemo)(()=>w.map(e=>{let{type:t,label:n}=e;return(0,a.jsx)(g.A,{className:A["filter-checkbox"],onChange:b,value:t,checked:i.includes(t),children:n},t)}),[w,i]);return(0,a.jsx)(x,{className:A["filter-dropdown-menu-button-wrapper"],onClose:m,visible:s,zIndex:e.zIndex,menu:(0,a.jsxs)("ul",{className:A["filter-dropdown-menu"],children:[(0,a.jsxs)("li",{className:d()(A["filter-dropdown-menu-select-count"],"px-4 py-2"),children:[c({id:"menu.itemHasChoice"},{count:y}),y>0&&(0,a.jsx)("span",{className:A["filter-dropdown-menu-clear-button"],onClick:j,children:c({id:"menu.clearChoice"})})]}),(0,a.jsx)("li",{children:(0,a.jsx)("div",{className:"flex flex-col py-2",children:S})})]}),children:(0,a.jsxs)(u.A,{size:"small",theme:"secondary",type:"soft",onClick:v,className:A["filter-dropdown-menu-button"],children:[(0,a.jsx)(p.A,{type:"icon-nav-add",className:A["button-arrow-down"]}),c({id:"menu.filterText"}),(0,a.jsx)(p.A,{type:"icon-nav-arrow-down",className:A["button-arrow-down"]})]})})};var b=i(978052),w=i(524381);let S=e=>{let{label:t,type:i,data:n=[],isDefault:s,selectedValues:o=[],newAddFilterType:m,filterTypeList:v,onChangeFilterData:g,onChangFilterTypeList:y,onChangeFilterType:j,zIndex:S}=e,[C,I]=(0,h.useState)(!1),[N,k]=(0,h.useState)(""),{formatMessage:T}=(0,f.tz)(),M=(0,h.useMemo)(()=>n.map(e=>o.includes(e.value)?{...e,selected:!0}:e),[n,o]),E=(0,h.useMemo)(()=>M.filter(e=>e.name.indexOf(N)>-1),[M,N]),{run:_}=(0,r.A)(e=>{let{value:t}=e.target;k(t)},{wait:500});(0,h.useEffect)(()=>{m===i&&I(!0)},[m,i]);let F=(0,l.A)(()=>{I(!1),k(""),m===i&&j("")}),D=(0,l.A)(()=>{I(!C)}),R=(0,h.useMemo)(()=>M.reduce((e,t)=>t.selected?e+1:e,0),[M]),O=(0,h.useMemo)(()=>{let e=M.reduce((e,t)=>t.selected?""===e?t.name:`${e},${t.name}`:e,"");return e?`${t} ${e}`:`${t} ${T({id:"component.tagSelect.all"})}`},[M,t]),P=(0,l.A)(e=>{e.stopPropagation(),g&&i&&g({[i]:[]}),F()}),L=(0,l.A)(()=>{let e=v.findIndex(e=>e===i);if(-1!==e){let t=[...v];t.splice(e,1),y(t)}}),$=(0,h.useMemo)(()=>E.length>0?E.map(e=>{let{name:t,value:n,count:l,render:r}=e;return(0,a.jsxs)("div",{className:d()(A["filter-dropdown-menu-select-item"],"flex justify-between items-center px-4 py-1",{[A["filter-dropdown-menu-select-item-selected"]]:e.selected}),onClick:()=>{var e;return e=t,void(g({[i]:M.map(t=>t.name!==e?t:{...t,selected:!t.selected}).filter(e=>{let{selected:t}=e;return t}).map(e=>{let{value:t}=e;return t})}),F())},children:[(0,a.jsxs)("span",{children:[r?r():t," ",Number.isInteger(l)&&`(${l})`]}),e.selected&&(0,a.jsx)(p.A,{type:"icon-check",size:14})]},n)}):""!==N&&0===E.length?(0,a.jsx)("div",{className:"px-4 pt-1 pb-2",children:T({id:"component.search.noMatch"})}):(0,a.jsx)(b.A,{image:b.A.PRESENTED_IMAGE_SIMPLE}),[E,N]),B=(0,h.useRef)(null);(0,h.useEffect)(()=>{var e;null==(e=B.current)||e.focus()},[C]);let z=(0,a.jsxs)(w.A,{className:d()(A["filter-dropdown-menu"]),size:4,direction:"vertical",children:[(null==n?void 0:n.length)>8&&(0,a.jsx)(c.A,{prefix:(0,a.jsx)(p.A,{type:"icon-operate-search-bar",size:18,color:"var(--ui-text-color-secondary)"}),className:A["filter-search"],placeholder:T({id:"component.search"}),bordered:!1,onChange:_,allowClear:!0,ref:B}),(0,a.jsxs)("div",{className:d()(A["filter-dropdown-menu-select-selectedItemCount"],"py-2 mx-2"),children:[T({id:"component.tagSelect.count"},{selectedItemCount:R}),R>0&&(0,a.jsx)("span",{className:A["filter-dropdown-menu-clear-button"],onClick:P,children:T({id:"component.clear.selected"})})]}),(0,a.jsx)(w.A,{className:d()(A["filter-dropdown-menu-item-wrapper"],"mb-2"),direction:"vertical",size:4,children:$})]});return(0,a.jsxs)(x,{className:A["filter-dropdown-menu-button-wrapper"],onClose:F,visible:C,menu:z,zIndex:S,children:[(0,a.jsxs)(u.A,{size:"small",theme:"secondary",type:"soft",onClick:D,className:A["filter-dropdown-menu-button"],children:[(0,a.jsx)("span",{className:A["filter-dropdown-menu-display-label"],children:O}),(0,a.jsx)(p.A,{type:"icon-nav-arrow-down",className:A["button-arrow-down"]})]}),!s&&(0,a.jsx)(p.A,{type:"icon-nav-round-closed",className:A["filter-delete-button"],onClick:L})]})},C=e=>{let{className:t,options:i=[],value:n={},zIndex:r,onChange:s}=e,o=i.reduce((e,t)=>(t.isDefault&&e.push(t.type),e),[]),[c,u]=(0,h.useState)(o),p=(0,h.useRef)({}),m=(0,l.A)(e=>{let t=[...o,...e];u(t);let i={};t.forEach(e=>{i[e]=p.current[e]||[]}),p.current=i,s&&s(i)}),[f,g]=(0,h.useState)(""),y=e=>{g(e)},x=(0,l.A)(e=>{let t={...p.current||{},...e};p.current=t,s&&s(t)}),A=(0,h.useMemo)(()=>{let e=[];return c.forEach(t=>{let a=i.find(e=>e.type===t);a&&e.push(a)}),e},[i,c]);return(0,v.A)(()=>{n&&Object.keys(n).length>0&&(m(Object.keys(n)),x(n))}),(0,a.jsxs)("div",{className:d()("flex flex-wrap",t),children:[A.map(e=>{let{label:t,type:i,data:l,isDefault:s}=e;return(0,a.jsx)(S,{label:t,type:i,data:l,selectedValues:n[i],isDefault:s,filterTypeList:c,newAddFilterType:f,onChangeFilterType:y,onChangeFilterData:x,onChangFilterTypeList:m,zIndex:r},i)}),(0,a.jsx)(j,{zIndex:r,filterList:i,filterTypeList:c,onChangeFilterType:y,onChangFilterTypeList:m})]})},I={filterCondition:"filterCondition-HGesIP","filter-drawer-wrapper-hide":"filter-drawer-wrapper-hide-7QW7Bv",filterDrawerWrapperHide:"filter-drawer-wrapper-hide-7QW7Bv",filterCondition__searchInput:"filterCondition__searchInput-w0_EJl",filterConditionSearchInput:"filterCondition__searchInput-w0_EJl"};var N=i(698879);function k(e){let{options:t=[],defaultExpand:i,value:o,placeholder:v,onChange:f,isEnableOptionsFilter:g=!0,style:y,size:x,inputVariant:A,inputStyle:j,inputClassName:b,inputAutoFocus:w,onVisibleChange:S}=e,k=(0,N.A)(),[T,M]=(0,h.useState)(i),[E,_]=(0,n.A)({value:o,onChange:f}),F=(null==E?void 0:E.searchKeyWord)||"",D=(0,l.A)(e=>{_({...e,searchKeyWord:F})}),R=(0,l.A)(()=>{M(e=>(null==S||S(!e),!e)),_({searchKeyWord:E.searchKeyWord})}),{run:O}=(0,r.A)(e=>{var t;t=e.target.value,_({...E,searchKeyWord:t})},{wait:300});return(0,s.A)(()=>{g||M(!1)},[g]),(0,a.jsxs)("div",{className:d()(I.filterCondition,"flex flex-wrap no-drag ",{"mb-3":!T,"mb-1":T}),style:y,children:[(0,a.jsxs)("div",{className:"w-full flex",children:[(0,a.jsx)(c.A,{ref:w?k:void 0,placeholder:v,className:d()("flex-grow-1 flex-shrink-1 flex",{"input-active":!!F},I.filterCondition__searchInput,b),onChange:O,allowClear:!0,autoFocus:w,variant:A,style:j,size:x,prefix:(0,a.jsx)(p.A,{type:"icon-operate-search-bar"})}),g&&(0,a.jsx)(u.A,{className:d()(`flex-grow-0 flex-shrink-0 action-wrap ${I.filterCondition__filterBtn}`,{[I["filterCondition__filterBtn--active"]]:T}),size:x,onClick:R,icon:(0,a.jsx)(p.A,{type:"icon-operate-filter"})})]}),(0,a.jsx)("div",{className:d()("mt-3",{[I["filter-drawer-wrapper"]]:T,[I["filter-drawer-wrapper-hide"]]:!T}),children:(0,a.jsx)("div",{className:I["filter-drawer-content"],style:{maxHeight:T?" 600px":"0"},children:T&&(0,a.jsx)(C,{zIndex:1001,options:t,onChange:D,value:(0,m.omit)(E,"searchKeyWord")})})})]})}},28594:function(e,t,i){"use strict";i.d(t,{r:()=>eH,A:()=>eV});var a=i(838e3),n=i(143193),l=i(200384),r=i(483482),s=i(168062),o=i(689368),d=i(666120),c=i.n(d),u=i(662387),p=i(140049),m=i(838487),h=i.n(m),v=i(929463),f=i(452267),g=i(364099),y=i(649269),x=i(554692),A=i(458184),j=i(579159),b=i(138249),w=i(69934),S=i(671466),C=i(242655),I=i.n(C),N=i(398380),k=i(641486),T=i.n(k),M=i(751527),E=i(533066),_=i(704128),F=i(891173),D=i(539867);let R="c-json-schema-editor-delicate-advanced-setting-advanced-options-advanced-item",O=e=>{let{style:t,className:i,checked:n,onCheck:l,title:r,detail:s,describe:o}=e,d=h()(R,i),c=`${R}__left`,u=`${c}__radio`,p=`${R}__right`,m=`${p}__title`,v=`${p}__detail`;return(0,a.jsxs)("div",{className:h()({[d]:!0,[`${R}--checked`]:n}),style:t,onClick:()=>{n||l()},children:[(0,a.jsx)("div",{className:c,children:(0,a.jsx)(D.A,{checked:n,className:u,onChange:()=>{n||l()}})}),(0,a.jsxs)("div",{className:p,children:[(0,a.jsxs)("div",{className:m,children:[(0,a.jsx)("span",{children:r}),(0,a.jsx)("span",{children:o})]}),(0,a.jsx)("div",{className:v,children:s})]})]})},P="c-json-schema-editor-delicate-advanced-setting-advanced-options",L=e=>{let{style:t,className:i,data:n,onChange:l}=e,r=T().useMemo(()=>(0,_.Cz)(n),[n]),s=h()(P,i),o=`${P}__header`,d=[{id:"allOf",describe:(0,M.a)({id:"allOfDescribe"}),title:(0,M.a)({id:"allOfTitle"}),detail:(0,M.a)({id:"allOfDetail"})},{id:"anyOf",describe:(0,M.a)({id:"anyOfDescribe"}),title:(0,M.a)({id:"anyOfTitle"}),detail:(0,M.a)({id:"anyOfDetail"})},{id:"oneOf",describe:(0,M.a)({id:"oneOfDescribe"}),title:(0,M.a)({id:"oneOfTitle"}),detail:(0,M.a)({id:"oneOfDetail"})}];return(0,a.jsxs)("div",{className:s,style:t,children:[(0,a.jsx)("div",{className:o,children:(0,M.a)({id:"schemaCompositionHeader"})}),d.map(e=>(0,a.jsx)(O,{checked:e.id===r,onCheck:()=>{null==l||l(e.id)},title:e.title,detail:e.detail,describe:e.describe}))]})};var $=i(300367),B=i(931209),z=i(622789),U=i(880285);let H=(0,U.A)(z.A),V=e=>{var t;let i=(0,p.A)(t=>{"string"!=typeof t||""===t?e.onChange(null):e.onChange(Number(t))});return(0,a.jsx)(H,{...e,value:null==(t=e.value)?void 0:t.toString(),onChange:i})};var K=i(987361),q=i(252396);let{produce:G}=new q.$N({autoFreeze:!1});function W(e){let{data:t,onChange:i,disabled:n,style:l}=e,r="";return t.writeOnly?r="write":t.readOnly&&(r="read"),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(g.A,{style:l,children:[(0,a.jsxs)(y.A,{children:[(0,M.a)({id:"behavior"}),(0,a.jsx)(x.A,{title:(0,M.a)({id:"behaviorTooltip"}),overlayInnerStyle:{whiteSpace:"pre-line"},overlayStyle:{maxWidth:"500px"},children:(0,a.jsx)(S.A,{type:"icon-help-o",className:"opacity-25 ml-1",style:{width:"10px"}})})]}),(0,a.jsx)(y.A,{children:(0,a.jsx)(b.A,{dropdownClassName:eH,size:"small",disabled:n,value:r,options:[{label:"Read/Write",value:""},{label:"Read Only",value:"read"},{label:"Write Only",value:"write"}],onChange:e=>{var a,n;if("write"===e){a=!0,i(G(t,e=>{e.writeOnly=a,a?t.readOnly&&delete e.readOnly:delete e.writeOnly}))}else if("read"===e){n=!0,i(G(t,e=>{e.readOnly=n,n?t.writeOnly&&delete e.writeOnly:delete e.readOnly}))}else i(G(t,e=>{delete e.writeOnly,delete e.readOnly}))}})})]})})}var J=i(495381),Y=i(202130),Z=i(738645);let Q="c-json-schema-editor-delicate-advanced-setting-xml-editor",X=[{title:(0,M.a)({id:"attributeName"}),dataIndex:"name",width:.6,componentType:"input",placeholder:e=>void 0===e?(0,M.a)({id:"addAttributeName"}):(0,M.a)({id:"attributeName"})},{title:(0,M.a)({id:"attributeValue"}),dataIndex:"value",width:.4,componentType:"input"}],ee=e=>{var t;let{xml:i}=e;return("array"===e.type||"object"===e.type)&&(null==i?void 0:i.attribute)&&delete i.attribute,null!=(t=null==i?void 0:i["x-attributes"])?t:[]},et=function(e){let{data:t,className:i,style:n}=e,{hiddenXmlOptions:r}=T().useContext(l.aA),[s,o]=T().useState(()=>ee(t)),d=T().useRef(s),c=T().useRef(!1);(0,u.A)(()=>{o(ee(t))},[t]);let m=(0,p.A)(t=>{let i,{data:a,onChange:n}=e;if(t)i={...a,xml:{}};else{var l;i=(null==(l=a.xml)?void 0:l["x-header"])?a:(0,J.A)(a,{$unset:["xml"]})}n(i)}),v=(0,p.A)((t,i)=>{let a,{onChange:n,data:l}=e;n(a=void 0===i||""===i||!1===i?(0,J.A)(l,{xml:{$unset:[t]}}):(0,J.A)(l,{xml:{[t]:{$set:i}}}))}),f=(0,p.A)((e,t)=>{v(e,(0,_.fS)(t))}),x=(0,p.A)(()=>{let{data:t}=e,{xml:i}=t;if(!i)return"";let a=i.name||"fieldName";i.prefix&&(a=`${i.prefix}:${a}`);let n=(i["x-attributes"]||[]).map(e=>{let t="";return null!==e.value&&(t=`="${e.value}"`),` ${e.name}${t}`}).join(""),l="";return i.namespace&&(l=` xmlns${i.prefix?`:${i.prefix}`:""}="${i.namespace}"`),`<${a}${l}${n}>value</${a}>`}),j=T().useCallback(()=>({name:"",value:""}),[]),{xml:b}=t,S=!!b,C=!0;("array"===t.type||"object"===t.type)&&(C=!1,(null==b?void 0:b.attribute)&&delete b.attribute);let I=h()(Q,i),N=`${Q}__table`,k=`${Q}__header`,E=`${k}__button`,F=`${Q}__popover`,D=`${F}__title`,R=`${F}__main`,O=`${R}__row`,P=`${O}__title`,L=`${O}__pre`;return(0,a.jsx)(g.A,{className:I,style:n,children:!r&&(0,a.jsxs)(g.A,{children:[(0,a.jsxs)(y.A,{className:k,children:[(0,a.jsxs)("div",{children:[(0,M.a)({id:"xml"}),(0,a.jsx)(w.A,{onChange:m,disabled:e.disabled,checked:S,size:"small"})]}),(0,a.jsx)("div",{children:S&&(0,a.jsx)(Y.A,{placement:"topLeft",trigger:"click",title:(0,a.jsx)("div",{className:D,children:(0,M.a)({id:"xmlOptions"})}),overlayClassName:F,content:(0,a.jsxs)("div",{className:R,children:[C&&(0,a.jsx)("div",{className:O,children:(0,a.jsxs)("div",{className:P,children:[(0,M.a)({id:"attributeOfParent"})," ",(0,a.jsx)(w.A,{onChange:e=>v("attribute",e),disabled:e.disabled,size:"small",checked:!!b.attribute})]})}),!b.attribute&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:O,children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:P,children:(0,M.a)({id:"tagName"})}),(0,a.jsx)("div",{children:(0,a.jsx)(B.A,{onChange:e=>f("name",e),disabled:e.disabled,size:"small",value:b.name,placeholder:(0,M.a)({id:"tagNameTips"})})})]})}),(0,a.jsx)("div",{className:O,children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:P,children:(0,M.a)({id:"prefix"})}),(0,a.jsx)("div",{children:(0,a.jsx)(B.A,{onChange:e=>f("prefix",e),disabled:e.disabled,size:"small",value:b.prefix})})]})}),(0,a.jsxs)("div",{className:h()({[O]:!0,[`${O}--doubleCol`]:"array"===t.type}),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:P,children:(0,M.a)({id:"nameSpace"})}),(0,a.jsx)("div",{children:(0,a.jsx)(B.A,{disabled:e.disabled,onChange:e=>f("namespace",e),size:"small",value:b.namespace,placeholder:(0,M.a)({id:"xmlnsAttribute"})})})]}),"array"===t.type&&(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:O,children:[(0,a.jsx)("div",{className:P,children:(0,M.a)({id:"wrapped"})}),(0,a.jsx)("div",{children:(0,a.jsx)(w.A,{onChange:e=>v("wrapped",e),disabled:e.disabled,size:"small",checked:!!b.wrapped})})]})})]}),(0,a.jsxs)("div",{className:O,children:[(0,a.jsx)("div",{className:P,children:(0,M.a)({id:"elementAttribute"})}),(0,a.jsx)("div",{children:(0,a.jsx)(Z.N,{className:N,size:"small",value:s,onChange:t=>{e.disabled||(c.current?o(t):v("x-attributes",t))},onFocus:()=>{c.current=!0},onBlur:e=>{e!==d.current&&v("x-attributes",s),c.current=!1},columns:X,newDataTemplate:j,sortable:!e.disabled,addable:!e.disabled,deletable:!e.disabled})})]}),(0,a.jsxs)("div",{className:O,children:[(0,a.jsx)("div",{className:P,children:(0,M.a)({id:"innerPreviewText"})}),(0,a.jsx)("div",{children:(0,a.jsx)("pre",{className:L,children:x()})})]})]})]}),children:(0,a.jsx)(A.A,{className:E,type:"link",children:(0,M.a)({id:"xmlOptions"})})})})]}),(0,a.jsx)(y.A,{})]})})};class ei extends T().PureComponent{handleMinItemsChange(e){this.handleChange("minItems",null===e?void 0:e)}handleMaxItemsChange(e){this.handleChange("maxItems",null===e?void 0:e)}handleUniqueItemsChange(e){this.handleChange("uniqueItems",e||void 0)}handleTitleChange(e){this.handleChange("title",(0,_.fS)(e))}handleChange(e,t){let{data:i,onChange:a}=this.props;a(void 0===t?I()(i,{$unset:[e]}):I()(i,{[e]:{$set:t}}))}handleDataChange(e){let{onChange:t}=this.props;t(e)}render(){let{data:e,showTitleInTable:t,onChange:i,className:n,disabled:l}=this.props,r=h()("c-json-schema-editor-delicate-advanced-setting-array-options",n);return(0,a.jsxs)("div",{className:r,children:[(0,a.jsxs)(g.A,{children:[(0,a.jsxs)(g.A,{children:[(0,a.jsx)(y.A,{children:(0,M.a)({id:"minItems"})}),(0,a.jsx)(y.A,{children:(0,a.jsx)(V,{size:"small",disabled:l,value:e.minItems,onChange:this.handleMinItemsChange,placeholder:(0,M.a)({id:"numberPlaceholder"}),className:"min-input"})})]}),(0,a.jsxs)(g.A,{children:[(0,a.jsx)(y.A,{children:(0,M.a)({id:"maxItems"})}),(0,a.jsx)(y.A,{children:(0,a.jsx)(V,{size:"small",disabled:l,value:e.maxItems,onChange:this.handleMaxItemsChange,placeholder:(0,M.a)({id:"numberPlaceholder"}),className:"max-input"})})]})]}),(0,a.jsxs)(g.A,{children:[(0,a.jsxs)(g.A,{children:[(0,a.jsx)(y.A,{children:(0,a.jsxs)("span",{children:[" ",(0,M.a)({id:"uniqueElement"})]})}),(0,a.jsx)(y.A,{children:(0,a.jsx)(w.A,{checked:e.uniqueItems,disabled:l,onChange:this.handleUniqueItemsChange,size:"small"})})]}),(0,a.jsx)(W,{data:e,onChange:i,disabled:l})]}),!t&&(0,a.jsx)(g.A,{children:(0,a.jsxs)(g.A,{children:[(0,a.jsx)(y.A,{children:(0,M.a)({id:"schemaTitle"})}),(0,a.jsx)(y.A,{children:(0,a.jsx)(B.A,{size:"small",value:e.title,onChange:this.handleTitleChange,disabled:l})})]})}),(0,a.jsx)(et,{data:e,onChange:this.handleDataChange,disabled:l})]})}}(0,$.__decorate)([(0,K.o)(),(0,$.__metadata)("design:type",Function),(0,$.__metadata)("design:paramtypes",[Object]),(0,$.__metadata)("design:returntype",void 0)],ei.prototype,"handleMinItemsChange",null),(0,$.__decorate)([(0,K.o)(),(0,$.__metadata)("design:type",Function),(0,$.__metadata)("design:paramtypes",[Object]),(0,$.__metadata)("design:returntype",void 0)],ei.prototype,"handleMaxItemsChange",null),(0,$.__decorate)([(0,K.o)(),(0,$.__metadata)("design:type",Function),(0,$.__metadata)("design:paramtypes",[Object]),(0,$.__metadata)("design:returntype",void 0)],ei.prototype,"handleUniqueItemsChange",null),(0,$.__decorate)([(0,K.o)(),(0,$.__metadata)("design:type",Function),(0,$.__metadata)("design:paramtypes",[Object]),(0,$.__metadata)("design:returntype",void 0)],ei.prototype,"handleTitleChange",null),(0,$.__decorate)([(0,K.o)(),(0,$.__metadata)("design:type",Function),(0,$.__metadata)("design:paramtypes",["undefined"==typeof JSONSchemaState?Object:JSONSchemaState]),(0,$.__metadata)("design:returntype",void 0)],ei.prototype,"handleDataChange",null);var ea=i(526838);let{Option:en}=b.A;class el extends T().PureComponent{handleTitleChange(e){this.handleChange("title",(0,_.fS)(e))}handleChange(e,t){let{data:i,onChange:a}=this.props;a(void 0===t?I()(i,{$unset:[e]}):I()(i,{[e]:{$set:t}}))}handleDataChange(e){let{onChange:t}=this.props;t(e)}render(){var e;let{data:t,showTitleInTable:i,onChange:n,className:l,disabled:r}=this.props,s=(null==(e=t.default)?void 0:e.toString())||void 0,o=h()("c-json-schema-editor-delicate-advanced-setting-boolean-options",l);return(0,a.jsxs)("div",{className:o,children:[(0,a.jsxs)(g.A,{children:[(0,a.jsxs)(g.A,{children:[(0,a.jsx)(y.A,{children:(0,M.a)({id:"default"})}),(0,a.jsx)(y.A,{children:(0,a.jsxs)(b.A,{dropdownClassName:eH,disabled:r,size:"small",value:s,onChange:this.handleDefaultValueChange,allowClear:!0,placeholder:(0,M.a)({id:"formatPlaceholder"}),getPopupContainer:e=>e,children:[(0,a.jsx)(en,{value:"true",children:"true"}),(0,a.jsx)(en,{value:"false",children:"false"})]})})]}),(0,a.jsx)(W,{data:t,onChange:n,disabled:r})]}),!i&&(0,a.jsx)(g.A,{children:(0,a.jsxs)(g.A,{children:[(0,a.jsx)(y.A,{children:(0,M.a)({id:"schemaTitle"})}),(0,a.jsx)(y.A,{children:(0,a.jsx)(B.A,{size:"small",value:t.title,onChange:this.handleTitleChange,disabled:r})})]})}),(0,a.jsx)(et,{data:t,onChange:this.handleDataChange,disabled:r})]})}constructor(...e){super(...e),(0,ea._)(this,"handleDefaultValueChange",e=>{this.handleChange("default",e?"true"===e:void 0)})}}(0,$.__decorate)([(0,K.o)(),(0,$.__metadata)("design:type",Function),(0,$.__metadata)("design:paramtypes",[Object]),(0,$.__metadata)("design:returntype",void 0)],el.prototype,"handleTitleChange",null),(0,$.__decorate)([(0,K.o)(),(0,$.__metadata)("design:type",Function),(0,$.__metadata)("design:paramtypes",["undefined"==typeof JSONSchemaState?Object:JSONSchemaState]),(0,$.__metadata)("design:returntype",void 0)],el.prototype,"handleDataChange",null);class er extends T().PureComponent{handleTitleChange(e){var t;let{data:i,onChange:a}=this.props;a({...i,title:null!=(t=(0,_.fS)(e))?t:""})}render(){let{data:e,showTitleInTable:t,className:i,disabled:n}=this.props,l=h()("c-json-schema-editor-delicate-advanced-setting-default-options",i);return(0,a.jsx)("div",{className:l,children:!t&&(0,a.jsx)(g.A,{children:(0,a.jsxs)(g.A,{children:[(0,a.jsx)(y.A,{children:(0,M.a)({id:"schemaTitle"})}),(0,a.jsx)(y.A,{children:(0,a.jsx)(B.A,{size:"small",value:e.title,onChange:this.handleTitleChange,disabled:n})})]})})})}}(0,$.__decorate)([(0,K.o)(),(0,$.__metadata)("design:type",Function),(0,$.__metadata)("design:paramtypes",[Object]),(0,$.__metadata)("design:returntype",void 0)],er.prototype,"handleTitleChange",null);var es=i(535121);let eo=(0,U.A)(z.A,!1,!0),ed=e=>{let{value:t}=e,i=(0,k.useMemo)(()=>{var i;return"string"==typeof t?t:null==(i=e.value)?void 0:i.toString()},[t]),n=(0,p.A)(t=>{"string"!=typeof t||""===t?e.onChange(null):(0,es.eT)(+t)?e.onChange(t):e.onChange(Number(t))});return(0,a.jsx)(eo,{...e,defaultValue:i,onChange:n})};var ec=i(838062),eu=i(969812),ep=i(404297);let{produce:em}=new q.$N({autoFreeze:!1}),eh="c-json-schema-editor-delicate-advanced-setting-enum-editor",ev=[{validator:(e,t)=>{if(null==e||""===e)return{type:"error",message:(0,M.a)({id:"notNull"})};let{row:i,table:a}=t.getContext(),n=i.index;if(a.options.data.find((t,i)=>n!==i&&t.value===e))return{type:"error",message:(0,M.a)({id:"enumIsDuplicate"})}}}],ef=[{title:(0,M.a)({id:"enumeratedValue"}),dataIndex:"value",width:.6,componentType:"input",bulkEditMode:["comma"],placeholder:e=>void 0===e?(0,M.a)({id:"addEnumeratedValue"}):(0,M.a)({id:"enumeratedValue"}),rules:ev},{title:(0,M.a)({id:"name"}),dataIndex:"name",bulkEditMode:["comma"],componentType:"input",width:.4},{title:(0,M.a)({id:"description"}),dataIndex:"description",bulkEditMode:["comma"],componentType:"input",width:.4}],eg=e=>{var t;let i=e.enum||[],a=new Map(null==(t=e[_.jk])?void 0:t.map(e=>[e.value,e]));return i.map(e=>{let t="number"==typeof e?e:`${e}`;return a.get(t)?{...a.get(t),value:t}:{value:t,name:"",description:""}})},ey=function(e){let{data:t,onChange:i,dataType:n,className:l,disabled:r=!1}=e,[s,o]=T().useState(()=>eg(t)),d=T().useRef(s),c=T().useRef(!1);(0,u.A)(()=>{o(eg(t))},[t]);let m=(0,p.A)(e=>{if(e===d.current)return;let a=[],l=[];e.forEach(e=>{"number"===n&&Number(e.value).toString()===e.value&&(e.value=Number(e.value)),a.push(e.value),l.push(e)}),i(em(t,e=>{a.length>0?(e.enum=a,e[_.jk]=l):(delete e.enum,delete e[_.jk],(0,N.isObject)(e[_.tk])&&0===Object.keys(e[_.tk]).length&&delete e[_.tk])}))}),v=T().useCallback(()=>({value:"",name:"",description:""}),[]),f=h()(eh,l),g=`${eh}__table`;return(0,a.jsx)("div",{className:f,children:(0,a.jsx)("div",{children:(0,a.jsx)(ep.f,{className:g,value:s,onChange:e=>{r||(c.current?o(e):m(e))},onFocus:()=>{c.current=!0},onBlur:e=>{m(s),c.current=!1},addRowAutoFocus:0===s.length,columns:ef,newDataTemplate:v,size:"small",sortable:!r,addable:!r,deletable:!r})})})},{produce:ex}=new q.$N({autoFreeze:!1}),eA=function(e){var t,i;let{data:n,showTitleInTable:l,onChange:r,className:s,disabled:o,sampleValueUseMore:d}=e,c=!!e.data.enum,m="number"==typeof e.data.const||!!e.data.const,[v,f]=T().useState(c);(0,u.A)(()=>{f(c)},[c]);let[x,A]=T().useState(!c&&m);(0,u.A)(()=>{A(m)},[m]);let j=T().useRef(e.data.format),[,S]=T().useState({});(0,u.A)(()=>{j.current=e.data.format,S({})},[e.data.format]);let C=(0,p.A)(t=>{let{onChange:i}=e;i(t)}),k=(0,p.A)(e=>ex(e,e=>{delete e.enum,delete e[_.jk],(0,N.isObject)(e[_.tk])&&0===Object.keys(e[_.tk]).length&&delete e[_.tk]})),E=(0,p.A)(e=>I()(e,{$unset:["const"]})),F=(0,p.A)(t=>{let{data:i,onChange:a}=e;f(t),A(!1);let n=E(i);t||(n=k(n)),a(n)}),D=(0,p.A)(t=>{let{data:i,onChange:a}=e;A(t),f(!1);let n=k(i);t||(n=E(n)),a(n)}),R=(0,p.A)((t,i)=>{let{data:a,onChange:n}=e;n(void 0===i?I()(a,{$unset:[t]}):I()(a,{[t]:{$set:i}}))}),O=(0,p.A)(e=>{var t;let i;t=e,("integer"===n.type?Number.isInteger(+t):Number.isFinite(Number(t)))&&(i=Number(e)),R("const",""===e?void 0:i)}),P=(0,p.A)(e=>{let t=null==e?void 0:e.map(N.toNumber).filter(N.isFinite);R("examples",(null==t?void 0:t.length)?t:void 0)}),L=(0,p.A)(e=>{R("default",null===e?void 0:e)}),$=(0,p.A)(e=>{R("title",(0,_.fS)(e))}),z=(0,p.A)(e=>{R("format",""===e?void 0:e)}),U=(0,p.A)(t=>{let i=null===t?void 0:t;"number"==typeof e.data.exclusiveMinimum||!0===e.data.exclusiveMinimum?e.onChange({...e.data,exclusiveMinimum:i,minimum:i}):R("minimum",i)}),H=(0,p.A)(t=>{let i=null===t?void 0:t;"number"==typeof e.data.exclusiveMaximum||!0===e.data.exclusiveMaximum?e.onChange({...e.data,exclusiveMaximum:i,maximum:i}):R("maximum",i)}),K=(0,p.A)(e=>{R("multipleOf",null===e?void 0:e)}),q=(0,p.A)(t=>{R("exclusiveMinimum",!0===t?e.data.minimum:void 0)}),G=(0,p.A)(t=>{R("exclusiveMaximum",!0===t?e.data.maximum:void 0)}),J=h()("c-json-schema-editor-delicate-advanced-setting-number-options",s),Y=T().useRef(!1);return(0,a.jsxs)("div",{className:J,children:[(0,a.jsx)(g.A,{children:(0,a.jsxs)(g.A,{children:[(0,a.jsxs)(y.A,{className:"flex",style:{height:24},children:[(0,a.jsxs)("div",{children:[(0,M.a)({id:"enum"}),(0,a.jsx)(w.A,{onChange:F,checked:v,size:"small",disabled:o})]}),(0,a.jsxs)("div",{style:{marginLeft:13,marginRight:1},children:["\xa0",(0,M.a)({id:"const"}),(0,a.jsx)(w.A,{onChange:D,checked:x,size:"small",disabled:o})]}),x&&(0,a.jsx)(B.A,{className:"flex-1",size:"small",disabled:o,value:n.const,placeholder:(0,M.a)({id:"constPlaceholder"}),onChange:O})]}),(0,a.jsx)(y.A,{children:v&&(0,a.jsx)(ey,{data:n,dataType:"number",onChange:C,disabled:o})})]})}),(0,a.jsxs)(g.A,{children:[(0,a.jsxs)(g.A,{children:[(0,a.jsx)(y.A,{children:(0,a.jsx)("span",{children:(0,M.a)({id:"dataFormat"})})}),(0,a.jsx)(y.A,{children:(0,a.jsx)(ec.A,{disabled:o,dropdownClassName:eH,size:"small",showSearch:!0,allowClear:!0,value:j.current,style:{width:"100%"},listHeight:300,onChange:e=>{Y.current?(j.current=e,S({})):z(e)},onInputKeyDown:()=>{Y.current=!0},onBlur:()=>{if(!0===Y.current){var e;Y.current=!1,z(null!=(e=j.current)?e:"")}},onSelect:()=>{if(!0===Y.current){var e;Y.current=!1,z(null!=(e=j.current)?e:"")}},filterOption:!!j.current&&((e,t)=>(null==t?void 0:t.props.value.toLowerCase().indexOf(e.toLowerCase()))>=0),options:null==(i=e.formats)||null==(t=i.flat())?void 0:t.map(e=>({value:e,label:e})),getPopupContainer:e=>e})})]}),(0,a.jsx)(W,{disabled:o,data:n,onChange:r})]}),(0,a.jsx)(g.A,{children:(0,a.jsxs)(g.A,{children:[(0,a.jsx)(y.A,{children:(0,M.a)({id:"default"})}),(0,a.jsx)(y.A,{children:(0,a.jsx)(ed,{size:"small",disabled:o,width:"100%",value:n.default,onChange:L,placeholder:(0,M.a)({id:"default"})})})]})}),(0,a.jsx)(g.A,{children:(0,a.jsxs)(g.A,{className:"w-full",children:[(0,a.jsx)(y.A,{children:(0,M.a)({id:d?"moreSampleValue":"sampleValue"})}),(0,a.jsx)(y.A,{children:(0,a.jsx)(b.A,{dropdownClassName:eH,size:"small",mode:"tags",disabled:o,value:n.examples,className:"w-full",onChange:P,dropdownMatchSelectWidth:!1,placeholder:(0,M.a)({id:d?"moreSampleValue":"sampleValue"})})})]})}),(0,a.jsxs)(g.A,{children:[(0,a.jsxs)(g.A,{children:[(0,a.jsx)(y.A,{children:(0,M.a)({id:"minimum"})}),(0,a.jsx)(y.A,{children:(0,a.jsx)(V,{size:"small",value:"number"==typeof n.exclusiveMinimum?n.exclusiveMinimum:n.minimum,disabled:o,onChange:U,placeholder:(0,M.a)({id:"numberPlaceholder"}),className:"min-input"})})]}),(0,a.jsxs)(g.A,{children:[(0,a.jsx)(y.A,{children:(0,M.a)({id:"maximum"})}),(0,a.jsx)(y.A,{children:(0,a.jsx)(V,{disabled:o,size:"small",value:"number"==typeof n.exclusiveMaximum?n.exclusiveMaximum:n.maximum,onChange:H,placeholder:(0,M.a)({id:"numberPlaceholder"}),className:"max-input"})})]}),(0,a.jsxs)(g.A,{children:[(0,a.jsx)(y.A,{children:(0,M.a)({id:"multipleOf"})}),(0,a.jsx)(y.A,{children:(0,a.jsx)(V,{disabled:o,size:"small",value:n.multipleOf,onChange:K,placeholder:(0,M.a)({id:"numberPlaceholder"}),className:"max-input"})})]})]}),(void 0!==n.minimum||void 0!==n.maximum)&&(0,a.jsxs)(g.A,{style:{marginTop:-8},children:[(0,a.jsxs)(g.A,{children:[(0,a.jsx)(y.A,{}),(0,a.jsx)(y.A,{children:(0,a.jsx)(eu.A,{checked:"number"==typeof n.exclusiveMinimum||!0===n.exclusiveMinimum,disabled:void 0===n.minimum&&void 0===n.exclusiveMinimum||o,onChange:e=>q(e.target.checked),children:(0,M.a)({id:"notEqualMin"})})})]}),(0,a.jsxs)(g.A,{children:[(0,a.jsx)(y.A,{}),(0,a.jsx)(y.A,{children:(0,a.jsx)(eu.A,{checked:"number"==typeof n.exclusiveMaximum||!0===n.exclusiveMaximum,disabled:void 0===n.maximum&&void 0===n.exclusiveMaximum,onChange:e=>G(e.target.checked),children:(0,M.a)({id:"notEqualMax"})})})]}),(0,a.jsxs)(g.A,{children:[(0,a.jsx)(y.A,{}),(0,a.jsx)(y.A,{})]})]}),!l&&(0,a.jsx)(g.A,{children:(0,a.jsxs)(g.A,{children:[(0,a.jsx)(y.A,{children:(0,M.a)({id:"schemaTitle"})}),(0,a.jsx)(y.A,{children:(0,a.jsx)(B.A,{size:"small",value:n.title,onChange:$,disabled:o})})]})}),(0,a.jsx)(et,{data:n,onChange:C,disabled:o})]})};var ej=i(355469),eb=i(543545),ew=i(664283),eS=i(618487);let eC="c-json-schema-editor-delicate-advanced-setting-object-options",eI=["string","integer","number","boolean","array","object","any"].map(e=>({label:e,value:e}));class eN extends T().PureComponent{handleDataChange(e){let{onChange:t}=this.props;t(e)}handleChange(e,t){let{data:i,onChange:a}=this.props;a(void 0===t?I()(i,{$unset:[e]}):I()(i,{[e]:{$set:t}}))}handleTitleChange(e){var t;let{data:i,onChange:a}=this.props;a({...i,title:null!=(t=(0,_.fS)(e))?t:""})}handleMinPropertiesChange(e){this.handleChange("minProperties",null===e?void 0:e)}handleMaxPropertiesChange(e){this.handleChange("maxProperties",null===e?void 0:e)}handleAdditionalPropertiesChange(e){this.handleChange("additionalProperties",e)}getAdditionalProperties(){let e=this.props.data.additionalProperties;if(!0===e)return{};if(!1===e)return!1;if(e&&"object"==typeof e)return e}getAdditionalPropertiesType(e){if(!e)return"other";if(0===Object.keys(e).length)return"any";if(!e.type)return"other";let t=[e.type].flat().filter(e=>"null"!==e)[0],i=eI.filter(e=>"any"!==e.value).map(e=>e.value);return"string"==typeof t&&i.includes(t)?t:"other"}getAdditionalPropertiesTypeSelect(e){return!1===e?"deny":e?"allow":"default"}changeAdditionalPropertiesPopover(e){this.setState({isOpenAdditionalPropertiesPopover:e})}render(){let{data:e,showTitleInTable:t,moduleId:i,onChange:n,className:l,disabled:r}=this.props,s=h()(eC,l),o=`${eC}__close`,d=`${eC}__popover`,c=this.getAdditionalProperties(),u=this.getAdditionalPropertiesType(c),p=this.getAdditionalPropertiesTypeSelect(c);return(0,a.jsxs)("div",{className:s,children:[(0,a.jsxs)(g.A,{children:[(0,a.jsxs)(g.A,{children:[(0,a.jsx)(y.A,{children:(0,M.a)({id:"minProperties"})}),(0,a.jsx)(y.A,{children:(0,a.jsx)(V,{size:"small",disabled:r,value:e.minProperties,onChange:this.handleMinPropertiesChange,placeholder:(0,M.a)({id:"numberPlaceholder"}),className:"min-input"})})]}),(0,a.jsxs)(g.A,{children:[(0,a.jsx)(y.A,{children:(0,M.a)({id:"maxProperties"})}),(0,a.jsx)(y.A,{children:(0,a.jsx)(V,{size:"small",disabled:r,value:e.maxProperties,onChange:this.handleMaxPropertiesChange,placeholder:(0,M.a)({id:"numberPlaceholder"}),className:"max-input"})})]})]}),(0,a.jsxs)(g.A,{children:[(0,a.jsx)(W,{data:e,onChange:n,disabled:r}),(0,a.jsxs)(g.A,{children:[(0,a.jsx)(y.A,{}),(0,a.jsx)(y.A,{})]})]}),!t&&(0,a.jsx)(g.A,{children:(0,a.jsxs)(g.A,{children:[(0,a.jsx)(y.A,{children:(0,M.a)({id:"schemaTitle"})}),(0,a.jsx)(y.A,{children:(0,a.jsx)(B.A,{size:"small",value:e.title,onChange:this.handleTitleChange,disabled:r})})]})}),(0,a.jsxs)(g.A,{className:"pt-3 mt-3",style:{borderTop:"1px solid var(--ui-border-color-base)"},children:[(0,a.jsxs)(g.A,{children:[(0,a.jsxs)(y.A,{className:"flex items-center",children:[(0,M.a)({id:"additionalProperties"}),(0,a.jsx)(x.A,{title:(0,M.a)({id:"additionalPropertiesTooltip"}),overlayInnerStyle:{whiteSpace:"pre-line"},overlayStyle:{maxWidth:"500px"},children:(0,a.jsx)(S.A,{type:"icon-help-o",className:"opacity-25 ml-1 mr-2",style:{width:"10px"}})})]}),(0,a.jsx)(y.A,{children:(0,a.jsx)(b.A,{dropdownClassName:eH,disabled:r,size:"small",value:p,onChange:e=>{"deny"===e?this.handleAdditionalPropertiesChange(!1):"default"===e?this.handleAdditionalPropertiesChange(void 0):this.handleAdditionalPropertiesChange(!0)},defaultValue:"default",options:[{label:(0,M.a)({id:"additionalPropertiesDefault"}),value:"default"},{label:(0,M.a)({id:"additionalPropertiesAllow"}),value:"allow"},{label:(0,M.a)({id:"additionalPropertiesDeny"}),value:"deny"}]})})]}),(0,a.jsx)(g.A,{children:!!c&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.A,{children:(0,M.a)({id:"additionalPropertiesType"})}),(0,a.jsxs)(y.A,{className:"flex items-center",children:[(0,a.jsx)(b.A,{dropdownClassName:eH,size:"small",disabled:r,value:u,options:eI,defaultValue:"any",onChange:e=>{let t={type:e};"any"===e?t=!0:"object"===e?t={type:"object",properties:{},[`x-${(0,ew.cG)()}-orders`]:[]}:"array"===e&&(t={type:"array",items:{type:"string"}}),this.handleAdditionalPropertiesChange(t)}}),"any"!==u&&(0,a.jsx)(Y.A,{placement:"topLeft",trigger:"click",overlayClassName:d,overlayStyle:{zIndex:"var(--ui-zindex-modal)"},content:(0,a.jsxs)("div",{style:{width:860},children:[(0,a.jsx)("div",{children:(0,a.jsx)(S.A,{className:h()("ml-4",o),size:16,type:"icon-nav-close",onClick:()=>{this.changeAdditionalPropertiesPopover(!1)}})}),(0,a.jsx)("div",{style:{maxHeight:500,overflowY:"scroll"},className:"mt-4",children:(0,a.jsx)(ej.ue,{children:(0,a.jsx)(ej.Ay,{sceneId:"additionalPropertiesSchema",showTopActions:!1,importJsonDefaultValue:"",moduleId:i,value:c,onChange:this.handleAdditionalPropertiesChange,saveAsExampleStatus:eS.SaveAsExampleStatus.CHECKED,contentType:"json",jsfOption:eb.XJ,useTemplateParameter:!0,noBorder:!0})})})]}),open:this.state.isOpenAdditionalPropertiesPopover,onOpenChange:e=>{this.changeAdditionalPropertiesPopover(e)},children:(0,a.jsx)(A.A,{className:"font-medium leading-5 text-xs ml-2 px-0",style:{paddingTop:0,paddingBottom:0,height:24},type:"link",children:(0,M.a)({id:"additionalPropertiesSetting"})})})]})]})})]}),(0,a.jsx)(et,{data:e,onChange:this.handleDataChange,disabled:r})]})}constructor(e){super(e),this.state={isOpenAdditionalPropertiesPopover:!1}}}(0,$.__decorate)([(0,K.o)(),(0,$.__metadata)("design:type",Function),(0,$.__metadata)("design:paramtypes",["undefined"==typeof JSONSchemaState?Object:JSONSchemaState]),(0,$.__metadata)("design:returntype",void 0)],eN.prototype,"handleDataChange",null),(0,$.__decorate)([(0,K.o)(),(0,$.__metadata)("design:type",Function),(0,$.__metadata)("design:paramtypes",[void 0===T()||void 0===T().ChangeEvent?Object:T().ChangeEvent]),(0,$.__metadata)("design:returntype",void 0)],eN.prototype,"handleTitleChange",null),(0,$.__decorate)([(0,K.o)(),(0,$.__metadata)("design:type",Function),(0,$.__metadata)("design:paramtypes",[Object]),(0,$.__metadata)("design:returntype",void 0)],eN.prototype,"handleMinPropertiesChange",null),(0,$.__decorate)([(0,K.o)(),(0,$.__metadata)("design:type",Function),(0,$.__metadata)("design:paramtypes",[Object]),(0,$.__metadata)("design:returntype",void 0)],eN.prototype,"handleMaxPropertiesChange",null),(0,$.__decorate)([(0,K.o)(),(0,$.__metadata)("design:type",Function),(0,$.__metadata)("design:paramtypes",[Object]),(0,$.__metadata)("design:returntype",void 0)],eN.prototype,"handleAdditionalPropertiesChange",null),(0,$.__decorate)([(0,K.o)(),(0,$.__metadata)("design:type",Function),(0,$.__metadata)("design:paramtypes",[]),(0,$.__metadata)("design:returntype",void 0)],eN.prototype,"getAdditionalProperties",null),(0,$.__decorate)([(0,K.o)(),(0,$.__metadata)("design:type",Function),(0,$.__metadata)("design:paramtypes",[Object]),(0,$.__metadata)("design:returntype",void 0)],eN.prototype,"getAdditionalPropertiesType",null),(0,$.__decorate)([(0,K.o)(),(0,$.__metadata)("design:type",Function),(0,$.__metadata)("design:paramtypes",[Object]),(0,$.__metadata)("design:returntype",void 0)],eN.prototype,"getAdditionalPropertiesTypeSelect",null),(0,$.__decorate)([(0,K.o)(),(0,$.__metadata)("design:type",Function),(0,$.__metadata)("design:paramtypes",[Boolean]),(0,$.__metadata)("design:returntype",void 0)],eN.prototype,"changeAdditionalPropertiesPopover",null);var ek=i(50160);let eT="c-json-schema-editor-delicate-advanced-setting-ref-options",eM=e=>{let{style:t,className:i,data:n,onChange:l}=e,r=T().useMemo(()=>{if("ref"===(0,_.Cz)(n)){let e=(0,_.cX)(n),t=null==e?void 0:e.replace("#/definitions/","");if(t)return{key:`apiSchema.${t}`}}},[n]),s=h()(eT,i),o=`${eT}__tree`;return(0,a.jsx)("div",{className:s,style:t,children:(0,a.jsx)(ek.W,{className:o,selectedRowKeys:r,setSelectedRowKeys:e=>{var t;let i=null==e||null==(t=e.schema)?void 0:t.id;i&&l(`#/definitions/${i}`)},hiddenType:!0,maxHeight:400,setRecordSelectable:()=>!0})})},eE="root-gTbmCt",e_="rootOpen-od2XVo",eF="header-jAuqUM",eD="headerTrigger-ej7jSU",eR="content-Q8nRRJ",eO="contentSchemaToggle-yA8LhJ",eP="contentSchemaTip-c6WC5l";var eL=i(603683);let e$=T().memo(function(e){let{data:t,onChange:i,disabled:n=!1}=e,[l,r]=(0,k.useState)(()=>!!t.contentMediaType||!!t.contentEncoding||!!t.contentSchema),s=!!t.contentSchema,o=(0,p.A)(e=>{null==e||""===e?i(I()(t,{$unset:["contentMediaType"]})):i(I()(t,{contentMediaType:{$set:e}}))}),d=(0,p.A)(e=>{null==e||""===e?i(I()(t,{$unset:["contentEncoding"]})):i(I()(t,{contentEncoding:{$set:e}}))}),c=(0,p.A)(e=>{e?i(I()(t,{contentSchema:{$set:{type:"object"}}})):i(I()(t,{$unset:["contentSchema"]}))});return(0,a.jsxs)("div",{className:h()({[eE]:!0,[e_]:l}),children:[(0,a.jsx)("div",{className:eF,children:(0,a.jsxs)("div",{className:eD,onClick:()=>r(!l),children:[(0,a.jsx)("span",{children:(0,M.a)({id:"contentOptions"})}),(0,a.jsx)(S.A,{type:l?"icon-down-md":"icon-right-md",size:12})]})}),l&&(0,a.jsxs)("div",{className:eR,children:[(0,a.jsxs)(g.A,{children:[(0,a.jsxs)(g.A,{children:[(0,a.jsx)(y.A,{children:(0,M.a)({id:"contentMediaType"})}),(0,a.jsx)(y.A,{children:(0,a.jsx)(ec.A,{size:"small",className:"w-full",value:t.contentMediaType,onChange:o,disabled:n,dropdownMatchSelectWidth:!1,options:eL.pp})})]}),(0,a.jsxs)(g.A,{children:[(0,a.jsx)(y.A,{children:(0,M.a)({id:"contentEncoding"})}),(0,a.jsx)(y.A,{children:(0,a.jsx)(ec.A,{size:"small",className:"w-full",value:t.contentEncoding,onChange:d,disabled:n,dropdownMatchSelectWidth:!1,options:[{value:"base64",label:"base64"},{value:"base64url",label:"base64url"}]})})]})]}),(0,a.jsx)(g.A,{className:"mt-2",children:(0,a.jsxs)(y.A,{className:"flex-col",style:{height:"auto"},children:[(0,a.jsxs)("div",{className:eO,children:[(0,a.jsx)("span",{children:(0,M.a)({id:"contentSchema"})}),(0,a.jsx)(w.A,{disabled:n,onChange:c,checked:s,size:"small"})]}),s&&(0,a.jsx)("div",{className:eP,children:(0,M.a)({id:"contentSchemaTip"})})]})})]})]})}),{produce:eB}=new q.$N({autoFreeze:!1}),ez=T().memo(function(e){var t;let{data:i,showTitleInTable:n,sampleValueUseMore:l,hiddenContentSchemaOptions:r,onChange:s,className:o,disabled:d=!1}=e,c=!!e.data.enum,m=!!e.data.const,[v,f]=T().useState(c);(0,u.A)(()=>{f(c)},[c]);let[A,j]=T().useState(!c&&m);(0,u.A)(()=>{j(m)},[m]);let C=T().useRef(e.data.format),[,k]=T().useState({});(0,u.A)(()=>{C.current=e.data.format,k({})},[e.data.format]);let E=(0,p.A)((t,i)=>{let{data:a,onChange:n}=e;n(void 0===i?I()(a,{$unset:[t]}):I()(a,{[t]:{$set:i}}))}),F=(0,p.A)(e=>{E("examples",(null==e?void 0:e.length)?e:void 0)}),D=(0,p.A)(e=>{E("default",""===e?void 0:e)}),R=(0,p.A)(e=>{E("title",(0,_.fS)(e))}),O=(0,p.A)(e=>{E("minLength",null===e?void 0:e)}),P=(0,p.A)(e=>{E("maxLength",null===e?void 0:e)}),L=(0,p.A)(e=>{E("format",""===e?void 0:e)}),$=(0,p.A)(e=>{E("pattern",""===e?void 0:e)}),z=(0,p.A)(t=>{let{onChange:i}=e;i(t)}),U=(0,p.A)(e=>{E("const",""===e?void 0:e)}),H=(0,p.A)(e=>eB(e,e=>{delete e.enum,delete e[_.jk],(0,N.isObject)(e[_.tk])&&0===Object.keys(e[_.tk]).length&&delete e[_.tk]})),K=(0,p.A)(e=>I()(e,{$unset:["const"]})),q=(0,p.A)(t=>{let{data:i,onChange:a}=e;f(t),j(!1);let n=K(i);t||(n=H(n)),a(n)}),G=(0,p.A)(t=>{let{data:i,onChange:a}=e;j(t),f(!1);let n=H(i);t||(n=K(n)),a(n)}),J=T().useRef(!1),Y=h()("c-json-schema-editor-delicate-advanced-setting-string-options",o);return(0,a.jsxs)("div",{className:Y,children:[(0,a.jsx)(g.A,{children:(0,a.jsxs)(g.A,{children:[(0,a.jsxs)(y.A,{className:"flex",style:{height:24},children:[(0,a.jsxs)("div",{children:[(0,M.a)({id:"enum"}),(0,a.jsx)(w.A,{disabled:d,onChange:q,checked:v,size:"small"})]}),(0,a.jsxs)("div",{style:{marginLeft:13,marginRight:1},children:["\xa0",(0,M.a)({id:"const"}),(0,a.jsx)(w.A,{disabled:d,onChange:G,checked:A,size:"small"})]}),A&&(0,a.jsx)(B.A,{disabled:d,className:"flex-1",size:"small",value:i.const,placeholder:(0,M.a)({id:"constPlaceholder"}),onChange:U})]}),(0,a.jsx)(y.A,{children:v&&(0,a.jsx)(ey,{disabled:d,data:i,dataType:"string",onChange:z})})]})}),(0,a.jsxs)(g.A,{children:[(0,a.jsxs)(g.A,{children:[(0,a.jsx)(y.A,{children:(0,a.jsx)("span",{children:(0,M.a)({id:"dataFormat"})})}),(0,a.jsx)(y.A,{children:(0,a.jsx)(ec.A,{disabled:d,dropdownClassName:eH,size:"small",showSearch:!0,allowClear:!0,value:C.current,style:{width:"100%"},listHeight:300,onChange:e=>{J.current?(C.current=e,k({})):L(e)},onInputKeyDown:()=>{J.current=!0},onBlur:()=>{if(!0===J.current){var e;J.current=!1,L(null!=(e=C.current)?e:"")}},onSelect:()=>{if(!0===J.current){var e;J.current=!1,L(null!=(e=C.current)?e:"")}},filterOption:!!C.current&&((e,t)=>(null==t?void 0:t.props.value.toLowerCase().indexOf(e.toLowerCase()))>=0),options:null===_.MR||void 0===_.MR||null==(t=_.MR.flat())?void 0:t.map(e=>({value:e,label:e}))})})]}),(0,a.jsx)(W,{data:i,onChange:s,disabled:d})]}),(0,a.jsxs)(g.A,{children:[(0,a.jsxs)(g.A,{children:[(0,a.jsx)(y.A,{children:(0,M.a)({id:"minLength"})}),(0,a.jsx)(y.A,{children:(0,a.jsx)(V,{size:"small",value:i.minLength,onChange:O,placeholder:(0,M.a)({id:"numberPlaceholder"}),className:"min-input",disabled:d})})]}),(0,a.jsxs)(g.A,{children:[(0,a.jsx)(y.A,{children:(0,M.a)({id:"maxLength"})}),(0,a.jsx)(y.A,{children:(0,a.jsx)(V,{size:"small",value:i.maxLength,onChange:P,placeholder:(0,M.a)({id:"numberPlaceholder"}),className:"max-input",disabled:d})})]})]}),(0,a.jsxs)(g.A,{children:[(0,a.jsxs)(g.A,{children:[(0,a.jsx)(y.A,{children:(0,M.a)({id:"default"})}),(0,a.jsx)(y.A,{children:(0,a.jsx)(B.A,{size:"small",value:i.default,onChange:D,placeholder:(0,M.a)({id:"default"}),disabled:d})})]}),(0,a.jsxs)(g.A,{children:[(0,a.jsx)(y.A,{children:(0,a.jsxs)("span",{children:[(0,M.a)({id:"regexp"}),(0,a.jsx)(x.A,{title:(0,M.a)({id:"patternTooltip"}),children:(0,a.jsx)(S.A,{type:"icon-help-o",className:"opacity-25 ml-1",style:{width:"10px"}})})]})}),(0,a.jsx)(y.A,{children:(0,a.jsx)(B.A,{disabled:d,size:"small",value:i.pattern,placeholder:(0,M.a)({id:"pattern"}),onChange:$})})]})]}),(0,a.jsx)(g.A,{children:(0,a.jsxs)(g.A,{className:"w-full",children:[(0,a.jsx)(y.A,{children:(0,M.a)({id:l?"moreSampleValue":"sampleValue"})}),(0,a.jsx)(y.A,{children:(0,a.jsx)(b.A,{size:"small",disabled:d,dropdownClassName:eH,className:eH,mode:"tags",value:i.examples,onChange:F,dropdownMatchSelectWidth:!1,placeholder:(0,M.a)({id:l?"moreSampleValue":"sampleValue"})})})]})}),!n&&(0,a.jsx)(g.A,{children:(0,a.jsxs)(g.A,{children:[(0,a.jsx)(y.A,{children:(0,M.a)({id:"schemaTitle"})}),(0,a.jsx)(y.A,{children:(0,a.jsx)(B.A,{size:"small",value:i.title,onChange:R,disabled:d})})]})}),(0,a.jsx)(et,{data:i,onChange:z,disabled:d,style:{marginBottom:4}}),!r&&(0,a.jsx)(e$,{data:i,onChange:z,disabled:d})]})}),eU="c-json-schema-editor-delicate-advanced-setting-advanced-setting",eH=`${eU}__smallDropdown`,eV=T().memo(e=>{var t;let i,d,{style:m,className:C,value:k,onChange:D,requiredDisabled:R,requiredChecked:O,onRequiredChange:P,nullableDisabled:$,nullableChecked:B,onNullableChange:z,onSelect:U,isHiddenRequired:H,disabled:V=!1,moduleId:K}=e,{defaultOneOfSchema:q,JsonSchemaStandard2AppJsonSchema:G,defaultSchema:W}=(0,F.r)(),[J,Y]=T().useState("dataType"),Z=T().useRef(),{showTitleInTable:Q,sampleValueUseMore:X,hiddenContentSchemaOptions:ee}=T().useContext(l.aA),{externalURL:et}=(0,o.Ay)(e=>{let{externalURL:t}=e;return{externalURL:t}}),ea=T().useCallback(e=>{let t=(0,_.Cz)(e);return(0,_.Bn)(e)?"advanced":t},[]),[en,es]=T().useState(()=>ea(k));(0,u.A)(()=>{es(ea(k))},[k]);let eo=T().useMemo(()=>"ref"===en?"$ref":"advanced"===en||"other"===en?"oneOf":en,[en]),ed=(0,s.b)(),ec=(0,p.A)(async e=>{try{let t=G(JSON.parse(e),{enableXAppEnum:!0,enableXAppMock:!0,enableMockjsAutoTransformFakerjs:ed});if(!await (0,_.qj)(t))throw Error("jsonSchemaValidator fail.");D(t,!0)}catch(e){v.Ay.error((0,M.a)({id:"jsonSchemaValidationFail"}))}}),eu=(0,p.A)(function(e){let t,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=(0,_.qT)(k),l={type:"object"};if("oneOf"===e||"anyOf"===e||"allOf"===e)l={[e]:[q(),q()]};else if("other"===e)l={};else if("any"===e)l={type:[..._.Ac]};else if(i)l=n?{anyOf:[{$ref:e},{type:"null"}]}:{$ref:e};else{var r;if(e===k.type)return;if(t=n&&"null"!==e?[e,"null"]:e,(0,N.isEqual)(t,k.type))return;l=(null==(r=W[t])?void 0:r.call(W))||{type:t}}D({...l,...a})}),ep=T().useMemo(()=>c().stringify(k,null,4),[k]),[em,eh]=T().useState(ep);(0,u.A)(()=>{eh(ep)},[k]);let ev=T().useRef(em);ev.current=em;let ef=h()(eU,C),eg=`${ef}__top`,ey=`${ef}__close`,ex=`${eU}__content`,ej=`${ex}__row`,eb=`${ej}__select`,ew=`${ej}__formOptions`,eS=`${eb}__dropdown`,eC=`${ej}__defaultFormItem`,eI=`${ef}__simpleMenuItem`,ek=`${ef}__simpleMenuItem__more-setting`,eT=T().useMemo(()=>e.schemaTypeSelectOptions?(0,_.DA)(en,e.schemaTypeSelectOptions):_.o7,[e.schemaTypeSelectOptions,en]);if("simple"===e.mode)return(0,a.jsx)("div",{className:h()(ef,`${ef}__simple`),style:m,children:(0,a.jsx)(f.A,{selectedKeys:[en],prefixCls:"ui-dropdown-menu",style:{border:0},children:_.gK.map(t=>(0,a.jsx)(f.A.Item,{onClick:()=>{let i=t.value;"other"===i?(Y("jsonSchema"),e.onChangeMode("full")):(es(i),["ref","advanced"].includes(i)||(eu(i),null==U||U()),"primitive"===t.type?e.onClose():e.onChangeMode("full"))},className:eI,children:(0,a.jsxs)(g.A,{children:[(0,a.jsx)(y.A,{flex:1,children:t.label}),"primitive"===t.type&&(0,a.jsx)(y.A,{onClick:e=>e.stopPropagation(),children:(0,a.jsx)(x.A,{title:(0,a.jsx)(a.Fragment,{children:(0,M.a)({id:"advancedSettings"})}),children:(0,a.jsx)(A.A,{type:"text",size:"small",className:ek,icon:(0,a.jsx)(S.A,{type:"icon-settings-03"}),onClick:()=>{let i=t.value;es(i),eu(i),null==U||U(),e.onChangeMode("full")}})})})]})},t.value))})});return(0,a.jsxs)("div",{className:h()(ef,"mx-4 my-2"),style:m,children:[(0,a.jsx)("div",{className:eg,children:(0,a.jsx)(j.A,{options:[{label:(0,M.a)({id:"dataType"}),value:"dataType"},{label:"JSON Schema",value:"jsonSchema"}],gap:0,value:J,onChange:e=>Y(e)})}),(0,a.jsx)("div",{className:ey,onClick:e.onClose,children:(0,a.jsx)(S.A,{type:"icon-nav-close"})}),(0,a.jsxs)("div",{className:ex,children:["dataType"===J&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:ej,children:(0,a.jsx)(b.A,{disabled:V,className:h()(eb,(0,E.U)(eo)),listHeight:400,allowClear:!1,options:eT,dropdownClassName:eS,value:en,onChange:e=>{let t,i=e;if("other"===i)return void Y("jsonSchema");"file"===i&&(i="string",t={format:"binary"});es(i),["ref","advanced"].includes(i)||(eu(i,!1,t),null==U||U())},autoBlurOnSelected:!1})}),(0,a.jsx)("div",{className:ej,children:(0,a.jsxs)("div",{className:eC,children:[!H&&(0,a.jsxs)("div",{children:[(0,M.a)({id:"formRequired"}),(0,a.jsx)(w.A,{checked:O,disabled:R||V,onChange:P,size:"small"})]}),(0,a.jsxs)("div",{children:[(0,M.a)({id:"formNullable"}),(0,a.jsx)(w.A,{checked:B,disabled:$||V,onChange:z,size:"small"})]}),(0,a.jsxs)("div",{children:[(0,M.a)({id:"deprecated"}),(0,a.jsx)(w.A,{checked:null!=(t=k.deprecated)&&t,disabled:V,onChange:e=>{D(I()(k,{deprecated:{$set:e}}))},size:"small"})]})]})}),(0,a.jsx)("div",{className:ej,children:(i={string:()=>(0,a.jsx)(ez,{className:ew,disabled:V,showTitleInTable:Q,sampleValueUseMore:X,data:k,onChange:D,hiddenContentSchemaOptions:ee}),number:()=>(0,a.jsx)(eA,{className:ew,disabled:V,showTitleInTable:Q,sampleValueUseMore:X,data:k,onChange:D,formats:_.aG}),boolean:()=>(0,a.jsx)(el,{className:ew,disabled:V,showTitleInTable:Q,data:k,onChange:D}),integer:()=>(0,a.jsx)(eA,{className:ew,disabled:V,showTitleInTable:Q,sampleValueUseMore:X,formats:_.vM,data:k,onChange:D}),array:()=>(0,a.jsx)(ei,{className:ew,disabled:V,showTitleInTable:Q,data:k,onChange:D}),object:()=>(0,a.jsx)(eN,{className:ew,disabled:V,showTitleInTable:Q,moduleId:K,data:k,onChange:D}),ref:()=>(0,a.jsx)(eM,{data:k,className:ew,onChange:e=>{eu(e,!0),null==U||U()}}),advanced:()=>(0,a.jsx)(L,{className:ew,data:k,onChange:e=>{eu(e),null==U||U()}})},d=en in i?i[en]():null,Q||d||(d=(0,a.jsx)(er,{className:ew,disabled:V,showTitleInTable:Q,data:k,onChange:D})),d)})]}),"jsonSchema"===J&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:ej,style:{marginBottom:10},children:(0,a.jsx)(n.Ay,{value:em,language:"json",actions:["copy","format","wrap"],headerLeft:(0,a.jsx)("div",{children:(0,a.jsx)("a",{onClick:()=>(0,r.kK)(et.help.schemaReference),className:"ml-2",children:(0,M.a)({id:"using_Help"})})}),options:{lineNumbers:"off",readOnly:V},onChange:eh,editorDidMount:e=>{Z.current=e.onDidBlurEditorWidget(()=>{null==ec||ec(ev.current)})},editorWillUnmount:()=>{var e;null==(e=Z.current)||e.dispose()}})})})]})]})})},622594:function(e,t,i){"use strict";i.d(t,{S:()=>u});var a=i(838e3),n=i(662387),l=i(838487),r=i.n(l),s=i(820182),o=i(641486),d=i.n(o);let c="c-json-schema-editor-delicate-json-schema-input",u=d().forwardRef((e,t)=>{var i;let{className:l,isAutoWidth:o,onChange:u,fieldName:p,...m}=e,h=r()(c,l),v=r()({[h]:!0,[`${c}--noAutoWidth`]:!o,[`${c}--autoWidth`]:o,[`${c}--disabled`]:m.disabled}),f=d().useRef(null!=(i=e.value)?i:"");return((0,n.A)(()=>{if(f.current!==e.value){var t;f.current=null!=(t=e.value)?t:""}},[e.value]),o&&("description"===p||"title"===p))?(0,a.jsx)(s.A,{ref:t,...m,className:r()(v),onChange:u}):(0,a.jsx)(s.A,{ref:t,...m,className:v,onChange:u,suffix:e.suffix})})},50160:function(e,t,i){"use strict";i.d(t,{W:()=>b});var a=i(838e3),n=i(740565),l=i(850050),r=i(471504),s=i(622754),o=i(140049),d=i(662387),c=i(838487),u=i.n(c),p=i(554692),m=i(579159),h=i(641486),v=i.n(h),f=i(891173),g=i(751527),y=i(200384);let x={filterCondition:"filterCondition-cuvw2J"};var A=i(218362);let j="c-json-schema-editor-delicate-reference-tree",b=e=>{let{style:t,className:i,selectedRowKeys:c,setSelectedRowKeys:b,maxHeight:w=500,setRecordSelectable:S}=e,{getMainType:C}=(0,f.r)(),[I,N]=(0,h.useState)({searchKeyWord:""}),{moduleId:k,dataSchemaDefinitions:T,customSchemaTreeList:M,mainBranch:E={},currentBranch:_={},mainBranchSchemaTreeList:F=[],customDataSchemaMap:D={},enableFallback:R}=(0,h.useContext)(y.aA),[O,P]=(0,h.useState)(()=>{let e=null==c?void 0:c.key.split(".").pop();return e&&D[e]?D[e].moduleId:k}),L=v().useRef(void 0);!L.current&&(L.current=[],(null!=M?M:[]).length<=4&&(null==M||M.forEach(e=>{"apiSchemaFolder"===e.type&&L.current.push(e.key)})));let $=(0,h.useMemo)(()=>[{label:(0,n.hw)({id:"branch.mainBranch"}),value:E.id},{label:_.name,value:_.id}],[_.id,_.name,E.id]),[B,z]=(0,h.useState)(()=>{if(R){if(null==c?void 0:c.key){var e;let t=c.key.split(".")[1],i=null==D||null==(e=D[t])?void 0:e.branchInfo;return i&&!i.isMain?_.id:E.id}return _.id}}),U=(0,h.useMemo)(()=>{let t=c?c.key:void 0,i=B===E.id&&R?F:M;return O&&i&&(i=i.filter(e=>e.moduleId===O)),function i(l,s){return l?l.map(l=>{var o,d;let c,u="apiSchema"===(o=l).type?(null==T?void 0:T[o.schema.id])?C(T[o.schema.id]):"":"",m="apiSchema"!==l.type||!["object","ref"].includes(u);if(S&&(m=!S(l)),"apiSchema"===l.type){(c=null==(d=D[l.schema.id])?void 0:d.branchInfo)&&!c.isMain&&B===E.id&&(m=!0)}let h="apiSchemaFolder"===l.type?i(l.children,[...s,l.key]):[];return t&&l.key===t&&(L.current=[...s]),{source:l,key:l.key,type:l.type,title:(()=>{let t=l.displayName||l.name;if(e.hiddenType)return"apiSchema"===l.type&&c&&!c.isMain&&B===E.id?(0,a.jsx)("div",{style:{"--ui-purple-6":"var(--ui-disabled-color)"},className:"app-text-fg-disabled flex flex-1",children:(0,a.jsx)(p.A,{title:(0,n.hw)({id:"branch.forked.disabled.tip"},{type:(0,n.hw)({id:"schema"})}),destroyTooltipOnHide:!0,children:(0,a.jsx)("span",{className:"text-sm flex-1",children:t})})}):t;if("apiSchema"===l.type)return c&&!c.isMain&&B===E.id?(0,a.jsxs)("div",{style:{"--ui-purple-6":"var(--ui-disabled-color)"},className:"app-text-fg-disabled flex flex-1",children:[(0,a.jsx)(p.A,{title:(0,n.hw)({id:"branch.forked.disabled.tip"},{type:(0,n.hw)({id:"schema"})}),destroyTooltipOnHide:!0,children:(0,a.jsx)("span",{className:"text-sm flex-1",children:t})}),(0,a.jsx)("div",{style:{flexBasis:100},children:u})]}):["object","ref"].includes(u)?(0,a.jsxs)("div",{className:"flex flex-1",children:[(0,a.jsx)("span",{className:"text-sm flex-1 whitespace-normal",children:t}),(0,a.jsx)("div",{style:{flexBasis:100},children:u})]}):(0,a.jsxs)("div",{style:{"--ui-purple-6":"var(--ui-disabled-color)"},className:"app-text-fg-disabled flex flex-1",children:[(0,a.jsx)(p.A,{title:(0,g.a)({id:"refTypeShouldBeObject"}),destroyTooltipOnHide:!0,children:(0,a.jsx)("span",{className:"text-sm flex-1",children:t})}),(0,a.jsx)("div",{style:{flexBasis:100},children:u})]});return"apiSchemaFolder"===l.type?(0,a.jsx)("span",{className:"ml-1 text-sm",children:t}):t})(),checkable:"apiSchema"===l.type,disableCheckbox:m,isLeaf:"apiSchema"===l.type,icon:"apiSchema"===l.type?(0,a.jsx)(r.NZ,{}):null,selectable:!m,children:h}}):[]}(i,[])},[M,e.hiddenType,B,O]),[H,V]=(0,h.useState)(L.current),K=(0,h.useCallback)(e=>!!(!I.searchKeyWord||(e.source.displayName||e.source.name||"").toLowerCase().includes(I.searchKeyWord.toLowerCase()))||!1,[I]),q=(0,h.useMemo)(()=>{let e=U;if(K){let t=new Set;(0,s.J)(U,e=>{e.isLeaf?K(e)&&t.add(e.key):(e.children||[]).some(e=>t.has(e.key))&&t.add(e.key)},{order:"LRN"}),e=t.size>0?(0,s.d)(e,e=>{if(t.has(e.key))return e}):[]}return e},[U,K]),G=(0,o.A)(e=>{let t=[];e&&(0,s.J)(e,e=>{t.push(e.key)}),V(t)});(0,d.A)(()=>{G(q)},[q,G]);let W=u()(j,i),J=`${j}__tree`;return(null==M?void 0:M.length)||(null==F?void 0:F.length)?(0,a.jsxs)("div",{className:W,style:t,children:[(0,a.jsx)(A.N,{className:"mb-2 w-full",variant:"default",value:O,hiddenOnOnlyOne:!0,showIconInSelectOption:!0,dropdownMatchSelectWidth:!0,onChange:P}),(0,a.jsx)(l.A,{inputAutoFocus:!0,inputVariant:"default",value:I,onChange:N,isEnableOptionsFilter:!1,inputClassName:x.filterCondition}),(0,a.jsx)(m.A,{block:!0,hidden:!R,className:"-mt-1 mb-2",options:$,value:B,onChange:z}),(0,a.jsx)(r.Gq,{className:J,height:w,virtual:!0,treeData:q,selectedKeys:c?[c.key]:[],checkedKeys:c?[c.key]:[],onCheck:(e,t)=>{t.checked?b(t.checkedNodes[t.checkedNodes.length-1].source):b(void 0)},onSelect:(e,t)=>{if(t.selected){let{source:e}=t.selectedNodes[t.selectedNodes.length-1];"apiSchemaFolder"!==e.type&&b(e)}else b(void 0)},defaultExpandAll:!0,expandedKeys:H,onExpand:V})]}):null}},119522:function(e,t,i){"use strict";i.d(t,{A:()=>ti,L:()=>tt});var a=i(838e3),n=i(722238),l=i(140049),r=i(891173),s=i(838487),o=i.n(s),d=i(554692),c=i(458184),u=i(257100),p=i(452267),m=i(671466),h=i(398380),v=i(641486),f=i.n(v),g=i(674984);function y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{jsonSchemaUtils:i}=(0,g.CA)(),{getMainType:a,getRef:n,isNullable:l,isNullableRef:r}=i;return(0,v.useMemo)(()=>{let i=!1,s=[],o=a(e);if("ref"!==o)return{res:{RefSourceObject:null,RefId:null,nullable:l(e),datatype:o,refStack:s},error:null};let{RefSourceObject:d,RefId:c,RefTitle:u}=n(e,t);if(null===d||null===c||null===u)return{res:null,error:""};(i||r(e))&&(i=!0),s.push(c);let p=d;for(;null!==p;)if("ref"===(o=a(p))){let{RefSourceObject:e,RefId:a}=n(p,t);if(null===e||null===a)return{res:null,error:""};if(s.includes(a))return{res:null,error:""};(i||r(p))&&(i=!0),p=e,s.push(a)}else if("object"===o)return{res:{RefSourceObject:p,nullable:i||l(p),RefId:c,RefTitle:u,datatype:"object",refStack:s},error:null};else return{res:{RefSourceObject:p,nullable:i||l(p),RefId:c,RefTitle:u,datatype:o,refStack:s},error:null};return{res:{...n(e,t),datatype:o,nullable:l(e),refStack:s},error:"Unknown Error"}},[e,t])}var x=i(751527),A=i(200384),j=i(543545),b=i(506598),w=i(704128);let S=()=>{let{jsonSchemaUtils:e}=b.utilsContainer.getItemsSync(e=>[e.jsonSchemaUtils]);return e};function C(e,t){var i;let{getActiveXAppOrder:a}=S();null==(i=e[w.HK])||delete i[t],e[w.cG]=a(e)}function I(e,t,i){if(e){if(i)e.required?e.required.push(t):e.required=[t];else if(Array.isArray(e.required)){let i=e.required.indexOf(t);i>-1&&(e.required.splice(i,1),0===e.required.length&&delete e.required)}}}function N(e,t,i){if(i){var a,n,l;let r=JSON.parse(JSON.stringify(i));null!=(n=e[a=w.iB])||(e[a]={}),e[w.iB][t]=r.properties[t],null!=(l=e.required)||(e.required=[]),(r.required||[]).includes(t)&&!e.required.includes(t)&&e.required.push(t)}}function k(e){let{lazyData:t,indent:i,prefix:n,IsReferenceData:l,schemaId:r,refLevel:s,latestNewSchemaId:o,featureExtractNode:d}=e,{data:c}=(0,v.useContext)(A.aA),u=t(c.data);return"array"===(0,v.useMemo)(()=>(0,w.Cz)(u),[u])&&u.items&&!Array.isArray(u.items)?(0,a.jsx)(ti,{featureExtractNode:d,schemaId:r,lazyData:e=>t(e).items,prefix:n?[...n,"items"]:void 0,indent:i+1,fieldName:"ITEMS",required:!1,featureAdvSetting:!0,featureChangeType:!0,featureChangeMock:!0,featureChangeDes:!0,IsReferenceData:l,refLevel:s,nameType:"tag",latestNewSchemaId:o}):null}function T(e){let{lazyData:t,indent:i,prefix:n,IsReferenceData:l,schemaId:r,refLevel:s,latestNewSchemaId:o,featureExtractNode:d}=e,{data:c}=(0,v.useContext)(A.aA),u=t(c.data);return"string"===(0,v.useMemo)(()=>(0,w.Cz)(u),[u])&&u.contentSchema?(0,a.jsx)(ti,{featureExtractNode:d,schemaId:r,lazyData:e=>t(e).contentSchema,prefix:n?[...n,"contentSchema"]:void 0,indent:i+1,fieldName:(0,x.a)({id:"contentSchemaTag"}),required:!1,featureAdvSetting:!0,featureChangeType:!0,featureChangeMock:!0,featureChangeDes:!0,IsReferenceData:l,refLevel:s,nameType:"tag",latestNewSchemaId:o}):null}let M="c-json-schema-editor-delicate-double-click-delete",E=e=>{let{className:t,size:i=15,onDelete:n}=e,[l,r]=f().useState(0);f().useEffect(()=>{let e=-1;return 1===l&&(e=window.setTimeout(()=>{r(0)},2e3)),()=>{window.clearTimeout(e)}},[l]);let s=o()(M,t),d=`${M}__icon`,u=(0,a.jsxs)("div",{className:o()({[d]:!0,[`${d}--double`]:0!==l}),children:[0===l&&(0,a.jsx)(m.A,{size:i,type:"icon-minus"}),0!==l&&(0,a.jsx)(m.A,{size:i,type:"icon-circle-add1"})]});return(0,a.jsx)(c.A,{type:"text",theme:"secondary",icon:u,className:s,size:"small",onClick:()=>{0===l?r(1):(r(0),null==n||n())}})};var _=i(355469),F=i(887015),D=i(755694),R=i(667754),O=i(255529),P=i(764007),L=i(364099),$=i(649269),B=i(820182),z=i(618487);function U(e){let{value:t,onOk:i,onCancel:n,moduleId:r,...s}=e,[o]=O.A.useForm(),{run:d,loading:c}=(0,R.ZO)(R.ZO.transformServiceArg1(D.vt),async e=>{await (0,z.dispatchFetchDataSchemaTreeList)(),await (0,z.dispatchFetchDataSchemaList)(),await (null==i?void 0:i(e))},void 0,{isReturnAll:!0,showLoading:!1}),u=(0,l.A)(e=>{let i=o.getFieldsValue();o.validateFields().then(async()=>{var a;await d({name:i.name,folderId:i.folderId,displayName:null!=(a=null==t?void 0:t.title)?a:"",jsonSchema:JSON.stringify(t),moduleId:r}),null==n||n(e)})});return(0,a.jsx)(P.Ay,{title:(0,x.a)({id:"setAsASchema"}),width:960,...s,onOk:u,onCancel:n,confirmLoading:c,bodyStyle:{height:586},children:(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsx)("div",{className:"flex-none",children:(0,a.jsx)(O.A,{form:o,layout:"vertical",initialValues:{folderId:0},children:(0,a.jsxs)(L.A,{gutter:[16,0],children:[(0,a.jsx)($.A,{span:12,children:(0,a.jsx)(O.A.Item,{name:"name",label:(0,x.a)({id:"schemaName"}),rules:[{required:!0}],children:(0,a.jsx)(B.A,{placeholder:(0,x.a)({id:"schemaNamePlaceholder"})})})}),(0,a.jsx)($.A,{span:12,children:(0,a.jsx)(O.A.Item,{name:"folderId",label:(0,x.a)({id:"folder"}),rules:[{required:!0}],children:(0,a.jsx)(F.A,{moduleId:r})})})]})})}),(0,a.jsx)("div",{className:"flex-1 h-0 overflow-auto rounded",style:{border:"1px solid var(--ui-border-color-split)"},children:(0,a.jsx)(_.ue,{children:(0,a.jsx)(_.Ay,{showTopActions:!1,showEditor:!1,value:t,moduleId:r,readonly:!0,noBorder:!0})})})]})})}var H=i(929463),V=i(137361),K=i(179574),q=i(325475),G=i(524095),W=i(186018),J=i(238504),Y=i(496411);let Z="wrap-QYG8hO",Q="title-ZH6CmW",X="description-tDSjzg",ee="button-bSy6qL",et="jsonSchema-3bes0X",ei=e=>{let{visible:t,onCancel:i,schema:n}=e,[r,s]=(0,v.useState)(!1),d=(0,W.p)(n.jsonSchema),u=(0,q.Pj)(K.L,e=>e.activeKey),{openDataSchema:p,unstableTurnsResidentTab:h}=(0,v.useContext)(V.i),f=(0,l.A)(e=>{s(!0),(0,J.lu)({ids:[n.id],projectBranchId:(0,Y.U3)()},async()=>{await Promise.all([(0,J.g6)(),(0,J.WX)()]),s(!1),null==i||i(e),u&&(h(u),p({id:n.id,name:n.displayName||n.name}))})});return(0,a.jsxs)(P.Ay,{title:(0,x.a)({id:"viewDataSchema"}),size:"1200",open:t,onCancel:i,wrapClassName:Z,footer:null,children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:Q,children:[(0,a.jsx)("span",{children:n.name}),n.displayName&&(0,a.jsxs)("span",{children:["(",n.displayName,")"]})]}),n.description&&(0,a.jsx)("div",{className:o()(X,"truncate mt-3"),children:n.description})]}),(0,a.jsx)("div",{className:ee,children:(0,a.jsx)(c.A,{loading:r,icon:(0,a.jsx)(m.A,{type:"icon-branch-add1"}),type:"primary",onClick:f,children:(0,x.a)({id:"editInCurrentSprintBranch"})})})]}),(0,a.jsx)("div",{className:et,children:(0,a.jsx)(G.A,{isStateRightAligned:!0,schema:null!=d?d:{type:"object",properties:{}},viewMode:"read",hiddenRightAction:!0})})]})};function ea(e){let t,{featureJumpToRef:i,referenceId:a,title:l,isMainBranch:r}=e,s=(0,q.Pj)(K.L,e=>e.activeKey),o=(0,n.bq)(),{openDataSchema:d,unstableTurnsResidentTab:c}=(0,v.useContext)(V.i),{customDataSchemaMap:u}=(0,v.useContext)(A.aA);return t=!0===r?()=>{var e;o.show(ei,{schema:null!=(e=null==u?void 0:u[a])?e:{}})}:i?()=>{s&&c(s),setTimeout(()=>{d({id:a,name:l})},0)}:void 0}let en="c-json-schema-editor-delicate-invalid-schema";function el(e){let{children:t,indent:i,renderAction:n,className:l}=e,{showTitleInTable:r}=f().useContext(A.aA),s=(0,A.qQ)(i),d=o()(en,l),c=`${en}__indent`,u=`${en}__content`,p=`${en}__operation`;return(0,a.jsxs)("div",{className:d,children:[(0,a.jsx)("div",{className:c,style:{width:(i+3)*16}}),(0,a.jsx)("div",{className:u,children:t}),(0,a.jsx)("div",{className:p,style:{width:s?53+24*(r?2:1):void 0},children:n})]})}let er=e=>{let{title:t,indent:i,referenceId:n}=e,l=ea({featureJumpToRef:!0,referenceId:n,title:t||""});return(0,a.jsxs)(el,{indent:i,children:[(0,x.a)({id:"IgnoreCycleSchema"},{title:"%title%"}).split("%title%")[0],(0,a.jsx)("span",{className:"app-text-primary-high px-1 cursor-pointer",onClick:l,children:t}),(0,x.a)({id:"IgnoreCycleSchema"},{title:"%title%"}).split("%title%")[1]]})},es=e=>{let{referenceId:t,title:i,indent:n}=e,l=ea({featureJumpToRef:!0,referenceId:t,title:i||""});return(0,a.jsxs)(el,{indent:n,children:[(0,x.a)({id:"EmptySchema"},{title:"%title%"}).split("%title%")[0],(0,a.jsx)("span",{className:"app-text-primary-high px-1 cursor-pointer",onClick:l,children:i}),(0,x.a)({id:"EmptySchema"},{title:"%title%"}).split("%title%")[1]]})},eo=e=>{let{referenceId:t,title:i,indent:n}=e,l=ea({featureJumpToRef:!0,referenceId:t,title:i||""});return(0,a.jsxs)(el,{indent:n,children:[(0,x.a)({id:"NotObjectRefField"},{title:"%title%"}).split("%title%")[0],(0,a.jsx)("span",{className:"app-text-primary-high px-1 cursor-pointer",onClick:l,children:i}),(0,x.a)({id:"NotObjectRefField"},{title:"%title%"}).split("%title%")[1]]})},ed=e=>{let{indent:t,featureDel:i}=e;return(0,a.jsx)(el,{indent:t,renderAction:i?(0,a.jsx)(E,{onDelete:i}):null,children:(0,x.a)({id:"InvalidXRefObject"})})},ec=e=>{let{indent:t,featureAdd:i}=e;return(0,a.jsxs)(el,{indent:t,children:[(0,x.a)({id:"ObjectEmptyAddTip"}),i&&(0,a.jsx)("span",{className:"app-text-primary-high px-1 cursor-pointer",onClick:i,children:(0,x.a)({id:"ObjectEmptyAddButton"})})]})};var eu=i(511389),ep=i(163808),em=i(943645);function eh(e,t,i){return Math.min(Math.max(e||0,t),i)}function ev(e){return{r:eh(e.r,0,255),g:eh(e.g,0,255),b:eh(e.b,0,255),a:eh(e.a,0,1)}}function ef(e){return{r:255*e.r,g:255*e.g,b:255*e.b,a:e.a}}function eg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=Math.pow(10,t);return{r:Math.round(e.r*i)/i,g:Math.round(e.g*i)/i,b:Math.round(e.b*i)/i,a:e.a}}function ey(e,t,i,a,n,l){return(1-t/i)*a+t/i*Math.round((1-e)*n+e*l)}function ex(e,t,i){return{r:255*i(e.r/255,t.r/255),g:255*i(e.g/255,t.g/255),b:255*i(e.b/255,t.b/255)}}function eA(e,t){return t}function ej(e){let t={r:0,g:0,b:0,a:1};if(0===e.search(/#/))3===(e=e.replace(/#/,"")).length?(t.r=parseInt(e[0]+e[0],16),t.g=parseInt(e[1]+e[1],16),t.b=parseInt(e[2]+e[2],16)):6===e.length?(t.r=parseInt(e[0]+e[1],16),t.g=parseInt(e[2]+e[3],16),t.b=parseInt(e[4]+e[5],16)):(t.r=parseInt(e[0]+e[1],16),t.g=parseInt(e[2]+e[3],16),t.b=parseInt(e[4]+e[5],16),t.a=parseInt(e[6]+e[7],16)/255);else if(0===e.search(/rgba\(/)){let i=(e=e.replace(/rgba\(|\)|\s+/g,"")).split(",");t.r=Number(i[0]),t.g=Number(i[1]),t.b=Number(i[2]),t.a=Number(i[3])}else if(0===e.search(/rgb\(/)){let i=(e=e.replace(/rgb\(|\)|\s+/g,"")).split(",");t.r=Number(i[0]),t.g=Number(i[1]),t.b=Number(i[2])}return t}let eb=function(e,t){let i=ej(e);i.a=.32;let{r:a,g:n,b:l,a:r}=function(e,t,i,a){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{unitInput:!1,unitOutput:!1,roundOutput:!0};n.unitInput&&(e=ef(e),t=ef(t)),e=ev(e);let l=(t=ev(t)).a+e.a-t.a*e.a,r=i(e,t,a),s=ev({r:ey(e.a,t.a,l,e.r,t.r,r.r),g:ey(e.a,t.a,l,e.g,t.g,r.g),b:ey(e.a,t.a,l,e.b,t.b,r.b),a:l});if(n.unitOutput){var o;s={r:(o=s).r/255,g:o.g/255,b:o.b/255,a:o.a}}else if(n.roundOutput)s=eg(s);else s=eg(s,9);return s}(ej(t),i,ex,eA);return`rgba(${a}, ${n}, ${l}, ${r})`};var ew=i(31861);let eS=(0,ew.D)(e=>{let{style:t,className:i,showBorderMask:n}=e,l=o()("c-json-schema-editor-delicate-schema-node-drag-handle",i);return(0,a.jsxs)("div",{className:l,"data-sortable-drag-handle":!0,style:t,children:[(0,a.jsx)(m.A,{type:"icon-grip"}),n&&(0,a.jsx)("span",{className:"drag-handler-border-mask"})]})}),eC="c-json-schema-editor-delicate-ref-object-virtual-children-wrapper",eI=(0,a.jsx)(m.A,{type:"icon-button-mockup",size:14}),eN=(0,a.jsx)(m.A,{type:"icon-button-icon-share",size:14,className:"referenceHeaderGotoIcon"});function ek(e){var t;let i,n,l,{referenceId:r,indent:s,title:c,featureDelRef:u,featureUnlinkRef:p,featureJumpToRef:h=!0,children:f,isRefSnap:g=!0,borderLeft:y,refLevel:j,className:b,dragEnable:w,currentModuleId:S,sourceModuleId:C}=e,{theme:I}=(0,v.useContext)(eu.Ay),N=(0,v.useMemo)(()=>{let e=window.getComputedStyle(document.getElementsByTagName("html")[0]);return eb(e.getPropertyValue("--ui-primary-base").trim(),e.getPropertyValue("--ui-legacy-bg-300").trim())},[I,j]),{customDataSchemaMap:k,readonly:T}=(0,v.useContext)(A.aA),M=null==(t=k[r])?void 0:t.branchInfo,E=ea({featureJumpToRef:h,referenceId:r,title:c||"",isMainBranch:null==M?void 0:M.isMain}),_=(0,v.useRef)(null),F=o()(eC,b),D=`${eC}__border`,R=`${F}__drag`;return(0,a.jsxs)("div",{className:F,style:{"--jsonSchemaEditor--bg":N},ref:_,children:[f,(i=`${eC}__header`,n=`${i}__item`,!T&&0===j&&f&&(c&&u||p||E)&&(0,a.jsxs)("div",{className:i,children:[S&&C&&S!==C&&(0,a.jsx)(em.H,{moduleId:C,moduleIconColor:"text-color-color",postfix:(0,a.jsx)(m.A,{className:"mx-1 text-color-tertiary",type:"icon-slash-divider"})}),void 0!==c&&E?(0,a.jsx)(d.A,{title:(0,x.a)({id:"EditReference"}),children:(0,a.jsxs)("div",{className:n,onClick:E,children:[eI,(0,a.jsx)("span",{children:c}),M?(0,a.jsxs)("span",{style:{color:M.isMain?"var(--ui-primary-color)":"var(--ui-blue-6)"},children:[(0,a.jsx)(m.A,{className:"ml-1",type:"icon-branch3"}),(0,a.jsx)("span",{className:"mx-1",children:M.name}),eN]}):eN]})}):null,p&&(0,a.jsx)(d.A,{title:(0,x.a)({id:"DereferenceTips"}),children:(0,a.jsx)("div",{className:n,onClick:p,children:(0,x.a)({id:"Dereference"})})}),u&&(0,a.jsx)("div",{className:n,onClick:u,children:(0,x.a)({id:"DelReference"})})]})),(l=`${eC}__model`,!T&&1===j&&f&&c&&E&&(0,a.jsx)(d.A,{title:(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("span",{children:[(0,x.a)({id:"schema"}),(0,a.jsx)(ep.A.Text,{className:"app-text-primary-base cursor-pointer",onClick:E,style:{marginLeft:"1em",maxWidth:"250px"},ellipsis:!0,children:(0,a.jsx)("span",{style:{color:(null==M?void 0:M.isMain)===!1?"var(--ui-blue-6)":"var(--ui-primary-color)"},children:c})})]})}),placement:"topRight",getPopupContainer:e=>_.current||e,children:(0,a.jsx)("div",{className:l,style:{background:N},onClick:E,children:eI})})),j<=1&&(0,a.jsx)("div",{className:o()({[D]:!0,[`${D}--showModel`]:1===j}),style:{left:16*s+11}}),!T&&w&&(0,a.jsx)(eS,{className:R,showBorderMask:!0,featureDraggable:!0,style:{transform:`translate(${16*s}px, -50%)`}})]})}var eT=i(202182);(0,ew.D)(e=>(0,a.jsxs)("span",{style:e.style,"data-sortable-drag-handle":!0,children:[(0,a.jsx)(m.A,{type:"icon-draggable"}),e.showBorderMask&&(0,a.jsx)("span",{className:"drag-handler-border-mask"})]}));let eM=(0,ew.q6)(e=>(0,a.jsx)("div",{style:e.style,"data-sortable-container":!0,children:e.children})),eE=e=>void 0!==e.sortableProps?(0,a.jsx)(eM,{className:e.className,...e.sortableProps,children:e.children}):(0,a.jsx)("div",{className:e.className,children:e.children}),e_=(0,ew.Zj)(e=>(0,a.jsx)("div",{style:e.style,"data-sortable-item":!0,children:e.children})),eF=e=>void 0!==e.index?(0,a.jsx)(e_,{index:e.index,className:e.className,style:e.style,children:e.children}):(0,a.jsx)("div",{className:e.className,style:e.style,children:e.children});function eD(e){var t;let{lazyData:i,prefix:n,indent:l,IsReferenceData:s,featureSortable:o,title:d,featureDelRef:c,featureJumpToRef:u,featureUnlinkRef:p,sortableIndex:m,schemaId:h,PriorityQueue:f,hiddenOverrideProps:g,isRefSnap:x=!0,borderLeft:j,refLevel:b=0,latestNewSchemaId:C}=e,{getActiveXAppOrder:k,getRef:T,isIncludeCycleDeps:M}=(0,r.r)(),E=(0,v.useMemo)(()=>new Set(f),[f]),{customDataSchemaMap:_,data:F,dataSchemaDefinitions:D,actions:R,sortable:O,moduleId:P}=(0,v.useContext)(A.aA),L=i(F.data),{res:$,error:B}=y(L,D),z=null==$?void 0:$.RefSourceObject,U=(0,v.useMemo)(()=>z?k(z):[],[z]);if(B)return null;let{RefSourceObject:H,RefId:V,RefTitle:K,refStack:q,datatype:G}=$;if(null===V||null===K||null===H)return null;let W=M(h,q),J=H.properties||{},Y=H[w.HK]||{},Z=H.required||[],Q=x&&null!=(t=L[w.iB])?t:{},X=L.required||[],ee=O&&o,et=!F.sorting&&!!(O&&!s),ei=(null==_?void 0:_[V])||{},ea=ei.displayName||ei.name||d||K,en=ei.moduleId;return x&&W?(0,a.jsx)(eF,{index:ee?m:void 0,children:(0,a.jsx)(ek,{referenceId:V,indent:l,title:ea,featureDelRef:c,featureJumpToRef:u,isRefSnap:x,borderLeft:j,refLevel:b,dragEnable:et,currentModuleId:P,sourceModuleId:en,children:(0,a.jsx)(er,{title:ea,indent:l,referenceId:V})})}):"object"!==G?(0,a.jsx)(eF,{index:ee?m:void 0,children:(0,a.jsx)(ek,{referenceId:V,indent:l,title:ea,featureDelRef:c,featureJumpToRef:u,isRefSnap:x,borderLeft:j,refLevel:b,dragEnable:et,currentModuleId:P,sourceModuleId:en,children:(0,a.jsx)(eo,{title:ea,indent:l,referenceId:V})})}):(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(eF,{index:ee?m:void 0,children:(0,a.jsxs)(ek,{referenceId:V,indent:l,title:ea,featureDelRef:s?void 0:c,featureJumpToRef:u,isRefSnap:x,featureUnlinkRef:p,borderLeft:j,refLevel:b,dragEnable:et,currentModuleId:P,sourceModuleId:en,children:[(0,a.jsx)(a.Fragment,{children:U.map(e=>{if(Object.hasOwnProperty.call(Q,e)){if(null===Q[e])return g?null:(0,a.jsx)(ti,{schemaId:[...h,V],hidden:!0,lazyData:()=>J[e],indent:l+1,prefix:n?[...n,w.iB,e]:void 0,fieldName:e,required:Z.includes(e),featureShowReference:s?void 0:()=>{R.setState(t=>{var a,n;a=i(t),n=e,delete a[w.iB][n]})},featureDefReference:s?void 0:()=>{R.setState(t=>{N(i(t),e,H)})},IsReferenceData:!0,refLevel:b+1,latestNewSchemaId:C});if(Q[e]){let t=E.has(e);return f.add(e),(0,a.jsx)(ti,{invalid:t,schemaId:h,prefix:n?[...n,w.iB,e]:void 0,lazyData:t=>i(t)[w.iB][e],indent:l+1,fieldName:e,required:X.includes(e),featureChangeType:!s,featureChangeMock:!s,featureChangeTitle:!s,featureChangeDes:!s,featureAdvSetting:!s,featureRevertReference:s?void 0:()=>{R.setState(t=>{var a,n;a=i(t),n=e,delete a[w.iB][n]})},IsReferenceData:s,refLevel:b+1,featureChangeRequire:t=>{R.setState(a=>{I(i(a),e,t)})},isRootRef:!0,latestNewSchemaId:C})}}if(e in J){let t=E.has(e);return f.add(e),(0,a.jsx)(ti,{invalid:t,schemaId:[...h,V],IsReferenceData:!0,lazyData:()=>J[e],indent:l+1,fieldName:e,required:Z.includes(e),featureHideReference:s?void 0:()=>{R.setState(t=>{let a=i(t);if(x){var n,l,r,s;n=a,l=e,null!=(s=n[r=w.iB])||(n[r]={}),n[w.iB][l]=null}else!function(e,t){var i,a,n,l,r;let{isNullableRef:s}=S(),o=s(e),d={$ref:(o?null!=(l=null==(i=null!=(n=e.anyOf)?n:e.oneOf)?void 0:i[0])?l:{}:e).$ref};null!=(r=d[a=w.iB])||(d[a]={}),d[w.iB][t]=null,o?(delete e.oneOf,delete e.anyOf,e.type=["object","null"]):(delete e.$ref,e.type="object");let c=(0,w.uR)();e[w.HK]={[c]:d},e[w.cG]=[c],e.properties={}}(a,e)})},featureDefReference:s?void 0:()=>{R.setState(t=>{let a=i(t);x?N(a,e,H):!function(e,t,i){let{isNullableRef:a}=S(),n=a(e);if(i){var l,r,s,o,d,c;let a={$ref:(n?null!=(o=null==(l=null!=(s=e.anyOf)?s:e.oneOf)?void 0:l[0])?o:{}:e).$ref},u=JSON.parse(JSON.stringify(i));null!=(d=a[r=w.iB])||(a[r]={}),a[w.iB][t]=u.properties[t],null!=(c=a.required)||(a.required=[]),(u.required||[]).includes(t)&&!a.required.includes(t)&&a.required.push(t),n?(delete e.oneOf,delete e.anyOf,e.type=["object","null"]):(delete e.$ref,e.type="object");let p=(0,w.uR)();e[w.HK]={[p]:a},e[w.cG]=[p],e.properties={}}}(a,e,H)})},refLevel:b+1,latestNewSchemaId:C})}if(e in Y){var t,r,o,d;let i=Y[e],{RefSourceObject:n,RefId:s,RefTitle:c}=T(i,D);if(!s)return(0,a.jsx)(ed,{indent:l});let u=null!=(d=null!=(o=null!=(r=null==_||null==(t=_[s])?void 0:t.name)?r:c)?o:null==n?void 0:n.title)?d:"";return(s===V||M(h,s))&&null!==s?(0,a.jsx)(er,{title:u,indent:l,referenceId:s}):n?(0,a.jsx)(eD,{PriorityQueue:f,schemaId:[...h,V],lazyData:()=>i,indent:l,prefix:[],IsReferenceData:!0,featureSortable:!1,hiddenOverrideProps:!0,refLevel:b+1,latestNewSchemaId:C},e):null!==s&&null!==c?(0,a.jsx)(eo,{title:u,indent:l,referenceId:s}):(0,a.jsx)(ed,{indent:l})}return null})}),0===U.length?(0,a.jsx)(es,{indent:l,title:ea,referenceId:V}):null]})})})}function eR(e){let{lazyData:t,objectData:i,prefix:n,indent:l,IsReferenceData:s,featureSortable:o,schemaId:d,refLevel:c=0,latestNewSchemaId:u,featureAddChild:p,featureExtractNode:m}=e,{getActiveXAppOrder:h,getRef:f,isIncludeCycleDeps:g}=(0,r.r)(),{customDataSchemaMap:y,data:b,dataSchemaDefinitions:N,actions:k,sortable:T,readonly:M,moduleId:E}=(0,v.useContext)(A.aA),_=i||t(b.data),F=(0,v.useMemo)(()=>(0,w.Cz)(_),[_]),D=Object.keys((null==_?void 0:_.properties)||{}),R=(0,v.useMemo)(()=>h(_),[_,h]),O=T&&o,P=function(e){let{getActiveXAppOrder:t}=(0,r.r)(),{actions:i,rootContainerRef:a}=(0,v.useContext)(A.aA);return(0,eT.A)(()=>{var n;return{useDragHandle:!0,onSortStart:()=>{i.setData(e=>{e.sorting=!0})},onSortEnd:a=>{let{oldIndex:n,newIndex:l}=a;i.setData(e=>{e.sorting=!1}),n!==l&&i.setState(i=>{let a=e(i),r=t(a);if(r){let e=r.splice(n,1)[0];r.splice(l,0,e)}a[w.cG]=r})},helperClass:"",helperContainer:null!=(n=a.current)?n:document.body}},[e])}(t),L=new Set;return(L.clear(),R.forEach(e=>{D.includes(e)&&L.add(e)}),"object"!==F)?null:(0,a.jsxs)(eE,{sortableProps:O?P:void 0,children:[R.map((e,i)=>{var r,p;let h=null==(r=_[w.HK])?void 0:r[e],v=null==(p=_.properties)?void 0:p[e];if(h){let{RefSourceObject:r,RefId:p,RefTitle:m}=f(h,N),v=g(d,p);if(!p)return(0,a.jsx)(ed,{indent:l,featureDel:()=>{k.setState(i=>C(t(i),e))}});let x=(null==y?void 0:y[p])||{},A=x.displayName||x.name||m||(null==r?void 0:r.title)||"",b=x.moduleId;return v?(0,a.jsx)(ek,{referenceId:p,indent:l,title:A,currentModuleId:E,sourceModuleId:b,featureDelRef:()=>{k.setState(i=>C(t(i),e))},featureJumpToRef:!0,refLevel:c,children:(0,a.jsx)(er,{title:A,indent:l,referenceId:p})},e):r?(0,a.jsx)(eD,{PriorityQueue:L,schemaId:d,lazyData:i=>t(i)[w.HK][e],indent:l,prefix:n?[...n,w.HK,e]:[],IsReferenceData:s,featureSortable:o,sortableIndex:i,title:A,featureDelRef:()=>{k.setState(i=>C(t(i),e))},featureUnlinkRef:()=>{k.setState(i=>(function(e,t,i){var a,n,l,r,s,o,d;let{getRef:c,getActiveXAppOrder:u,isNullableRef:p}=S(),m=null==(a=e[w.HK])?void 0:a[t];if(!m)return;let{RefSourceObject:h}=c(m,i);if(!h)return;let v=m[w.iB]||{},f=(0,w.Cz)(h);if("object"===f){let i=JSON.parse(JSON.stringify(h)),a=i.properties||{};null==(n=e[w.HK])||delete n[t];let s=Object.keys(v).filter(e=>e in a);s.forEach(e=>{null===v[e]?delete a[e]:a[e]=v[e]}),e.properties={...e.properties,...a};let o=Object.keys(i[w.HK]||{}).reduce((e,t)=>(e[t]=(0,w.uR)(),e),{}),d=u(i).map(e=>e in o?o[e]:e),c=i[w.HK]?Object.keys(o).reduce((e,t)=>(t in i[w.HK]&&(e[o[t]]=i[w.HK][t]),e),{}):{};e[w.HK]={...e[w.HK],...c},e[w.cG]?(e[w.cG]=Array.from(new Set(e[w.cG].map(e=>e!==t?e:d).flat(1))),e[w.cG]=u(e)):e[w.cG]=d;let p=new Set(null==(l=i.required)?void 0:l.filter(e=>e in a)),f=null==(r=m.required)?void 0:r.filter(e=>e in a),g=(s.forEach(e=>{(null==f?void 0:f.includes(e))?p.add(e):p.delete(e)}),p);if(e.required){let t=new Set([...e.required,...g]);d.forEach(e=>{!g.has(e)&&t.has(e)&&t.delete(e)}),t.size>0?e.required=Array.from(t):delete e.required}else g.size>0?e.required=Array.from(g):delete e.required}if("ref"===f){let t=p(h),i=(0,j.Go)(t?null!=(d=null==(s=null!=(o=h.anyOf)?o:h.oneOf)?void 0:s[0])?d:{}:h),a=(0,w.uR)();e[w.HK][a]={...i,[w.iB]:{...i[w.iB]}}}})(t(i),e,N))},featureJumpToRef:!0,refLevel:c,latestNewSchemaId:u,currentModuleId:E,sourceModuleId:b},e):null!==p&&null!==m?(0,a.jsx)(ek,{referenceId:p,indent:l,title:A,currentModuleId:E,sourceModuleId:b,featureDelRef:()=>{k.setState(i=>C(t(i),e))},featureJumpToRef:!0,refLevel:c,children:(0,a.jsx)(eo,{title:A,indent:l,referenceId:p})},e):(0,a.jsx)(ed,{indent:l,featureDel:()=>{k.setState(i=>C(t(i),e))}})}return v?(0,a.jsx)(ti,{featureExtractNode:m,schemaId:d,IsReferenceData:s,lazyData:i=>t(i).properties[e],prefix:n?[...n,"properties",e]:void 0,indent:l+1,fieldName:v["x-tmp-pending-properties"]?"":e,featureChangeName:i=>{if(e!==i){if(D.includes(i))return void H.Ay.error((0,x.a)({id:"fieldDuplicateNeedChange"},{value:i}));k.setState(a=>{!function(e,t,i){let{defaultSchema:a,getActiveXAppOrder:n}=S(),l=e.properties;if(null==l?void 0:l[t]){var r,s;l[t]["x-tmp-pending-properties"]?(l[i]=a.string(),null!=(s=e.required)||(e.required=[]),e.required.push(i)):l[i]=l[t],delete l[t],e[w.cG]=e[w.cG]?e[w.cG].map(e=>e===t?i:e):Object.keys(l),e[w.cG]=n(e).map(e=>e===t?i:e),e.required=null==(r=e.required)?void 0:r.map(e=>e===t?i:e)}}(t(a),e,i)})}},featureLinkRef:i=>{k.setState(a=>{var n=t(a),l=e,r=i;if((0,A.Gv)(n)&&n.properties&&(n[w.HK]||(n[w.HK]={}),n[w.HK][l]={$ref:`#/definitions/${r}`},delete n.properties[l],n.required)){let e=n.required.indexOf(l);e>-1&&n.required.splice(e,1)}})},required:Array.isArray(_.required)?_.required.includes(e):!!_.required,featureChangeRequire:i=>{k.setState(a=>{I(t(a),e,i)})},featureChangeType:!0,featureChangeMock:!0,featureChangeTitle:!0,featureChangeDes:!0,featureAdvSetting:!0,featureDeleteNode:()=>{k.setState(i=>{!function(e,t){let{getActiveXAppOrder:i}=S();delete e.properties[t],e[w.cG]=i(e),e.required&&(e.required=e.required.filter(e=>e!==t),0===e.required.length&&delete e.required)}(t(i),e)})},featureAddNextSiblingNode:()=>{k.setState(i=>{u.current=function(e,t){let{getActiveXAppOrder:i}=S();if(e.properties){var a;let n=e.properties,l=i(e);null!=(a=e.required)||(e.required=[]);let r=(0,w.uR)();n[r]={"x-tmp-pending-properties":!0};let s=l.indexOf(t);return s>-1&&l.splice(s+1,0,r),e[w.cG]=l,r}return""}(t(i),e)})},featureSelfSortIndex:!s&&O?i:void 0,refLevel:c,latestNewSchemaId:u}):null}),0===R.length&&!s&&(0,a.jsx)(ec,{indent:l,featureAdd:M?void 0:p})]})}function eO(e){let{lazyData:t,indent:i,prefix:n,IsReferenceData:l,schemaId:r,refLevel:s,latestNewSchemaId:o,featureExtractNode:d}=e,{data:c,actions:u}=(0,v.useContext)(A.aA),p=t(c.data),m=p.oneOf?"oneOf":p.allOf?"allOf":p.anyOf?"anyOf":null;return m?(0,a.jsx)(a.Fragment,{children:p[m].map((e,c)=>(0,a.jsx)(ti,{featureExtractNode:d,schemaId:r,lazyData:e=>t(e)[m][c],prefix:n?[...n,m,c.toString()]:void 0,indent:i+1,featureChangeType:!0,featureChangeTitle:!0,featureChangeDes:!0,featureAddNextSiblingNode:()=>{u.setState(e=>{var i;null==(i=t(e)[m])||i.splice(c+1,0,w.jZ.string())})},featureDeleteNode:0!==c?()=>{u.setState(e=>{var i;null==(i=t(e)[m])||i.splice(c,1)})}:void 0,fieldName:c.toString(),required:!1,featureAdvSetting:!0,IsReferenceData:l,refLevel:s,latestNewSchemaId:o},c))}):null}var eP=i(531579),eL=i(698879),e$=i(662387),eB=i(838062),ez=i(202130),eU=i(740565);i(684795);let eH=B.A.TextArea,eV="c-json-schema-editor-delicate-schema-node-description-input";function eK(e){let[t,i]=(0,v.useState)(e.description);(0,e$.A)(()=>{i(e.description)},[e.description]);let[n,r]=f().useState(!1),[s,d]=(0,v.useState)(!1),[u,p]=(0,v.useState)(""),h=(0,eL.A)({visible:s}),{actions:g,templateParameters:y}=(0,v.useContext)(A.aA),j=e.disabled||void 0===e.prefix,{openModal:b}=(0,z.useModel)("globalModal",e=>({openModal:e.openModal})),w=(0,v.useMemo)(()=>{if(!e.name||!(null==y?void 0:y.length))return null;let t=y.find(t=>t.name===e.name);return(null==t?void 0:t.description)?t:null},[e.name,y]),S=(0,v.useMemo)(()=>t?[]:w?[{value:w.description||"",label:(0,a.jsx)("div",{className:`${eV}__autocomplete-option`,children:w.description})}]:[],[t,w]),C=(0,l.A)(e=>(0,a.jsxs)("div",{children:[e,S.length>0&&(0,a.jsx)("div",{className:`${eV}__autocomplete-divider`}),(0,a.jsxs)("div",{className:`${eV}__autocomplete-template-entry`,onMouseDown:e=>{e.preventDefault()},onClick:()=>{b({moduleName:11,modalProps:{width:960}})},children:[(0,a.jsx)(m.A,{type:"icon-menu-01",size:16,style:{marginRight:"8px"}}),(0,eU.hw)({id:"menu.projectSettings.resource.templateParameter"})]})]})),I=e.prefix&&!j?t=>{if(e.description===t)return;let i=[...e.prefix,"description"];g.changeValueAction({key:i,value:t})}:void 0,N=(0,A.qQ)(e.indent),k=N&&e.showTitleInTable,T=o()(eV,e.className),M=`${eV}__popover`,E=`${eV}__main`,_=`${E}__input`,F=`${E}__btn__wrapper`,[D,R]=(0,v.useState)(!1),O=(0,eL.A)({visible:k&&D&&!j,delay:300}),L=(0,a.jsxs)("div",{className:E,children:[(0,a.jsx)(eB.A,{disabled:j,value:t,options:S,onChange:j?void 0:e=>{i(e),null==I||I(e)},onSelect:e=>{i(e),null==I||I(e)},filterOption:!1,dropdownRender:C,style:{width:"100%"},children:(0,a.jsx)(B.A.TextArea,{ref:O,autoFocus:k,...N?{autoSize:!1,rows:1}:n?{autoSize:{minRows:1,maxRows:4}}:{autoSize:!1,rows:1},className:o()({[_]:!0,[`${_}__isSimple`]:N}),placeholder:(0,x.a)({id:"description"}),disabled:j,onFocus:()=>r(!0),onBlur:e=>{N||e.target.scroll({top:0}),r(!1),null==I||I(t)}})}),!N&&n?(0,a.jsx)("div",{className:F,style:{backgroundColor:"transparent"},children:!j&&(0,a.jsx)(c.A,{type:"text",size:"small",icon:(0,a.jsx)(m.A,{type:"icon-operate-expand-small",className:"hover:app-text-primary-high",color:"var(--ui-text-color-secondary)",size:12}),onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},onClick:e=>{e.stopPropagation(),p(t||""),d(!0)}})}):null,N||n?null:(0,a.jsx)("div",{className:F,children:e.useTemplateParameter&&!j&&(0,a.jsx)(eP.Z,{type:"DESCRIPTION",keyword:e.name,onSelect:e=>{i(e.description),null==I||I(e.description)}})})]});return(0,a.jsxs)("div",{className:o()(T,{[`${eV}--isFocus`]:n,[`${eV}--simple`]:N,[`${eV}--simple--mini`]:k,[`${eV}--simple--mini--hasValue`]:k&&!!e.description}),children:[!k&&L,k&&(0,a.jsx)(ez.A,{overlayClassName:M,placement:"topRight",content:L,trigger:"click",open:D,onOpenChange:R,getPopupContainer:e=>{var t;return null!=(t=null==e?void 0:e.parentElement)?t:e},children:(0,a.jsx)(c.A,{type:"text",theme:"secondary",size:"small",style:{color:"inherit"},icon:(0,a.jsx)(m.A,{type:"icon-book-open-01",size:15})})}),(0,a.jsx)(P.Ay,{title:(0,eU.hw)({id:"api.parameterLabel.description"}),open:s,onOk:()=>{i(u),null==I||I(u),d(!1)},onCancel:()=>{d(!1)},size:"720",maskClosable:!1,destroyOnClose:!0,children:(0,a.jsx)(eH,{ref:h,value:u,rows:15,onChange:e=>p(e.target.value),style:{resize:"none"}})})]})}let eq=function(){return(0,a.jsx)("div",{style:{width:24,height:24}})},eG=e=>{let{style:t,className:i,expandable:n,expanded:l,onClick:r}=e,s=o()("c-json-schema-editor-delicate-schema-node-expand-icon",i);return(0,a.jsx)("div",{onClick:r,className:s,style:t,children:n&&(0,a.jsx)(m.A,{type:l?"icon-nav-arrow-down":"icon-nav-arrow-right"})})};var eW=i(775026),eJ=i(729968),eY=i(411902);let eZ="c-json-schema-editor-delicate-schema-node-faker-select",eQ=e=>{let{schema:t,className:i,indent:r}=e,{actions:s,fakerOptions:d}=(0,v.useContext)(A.aA),u=(0,A.qQ)(r),p=(0,n.bq)(),h=e.disabled||(0,w.Hq)(t)||void 0===e.prefix,g=t[w.EW]||"",y=f().useRef(g),[,j]=f().useState({});f().useMemo(()=>{y.current=g},[g]);let b=e.prefix?t=>{if(g===t)return;let i=[...e.prefix,w.EW];s.changeValueAction({key:i,value:t||""})}:()=>{},S=e.prefix?()=>{p.show(eY.A,{keys:e.prefix,editingDescriptionType:w.EW,editingDescriptionValue:t[w.EW]?t[w.EW]:"",title:"Mock",moduleId:e.moduleId})}:void 0,[C,I]=f().useState(!1),N=(0,l.A)(e=>{y.current=e,j({})}),k=o()(eZ,i),T=`${eZ}__main`,M=`${eZ}__popover`,E=`${T}__input`,_=`${T}__btn`,F=`${T}__dropdown`,[D,R]=(0,v.useState)(!1),[O,P]=(0,v.useState)(!1),L=(0,eL.A)({visible:u&&D&&!h,delay:300}),[$,B]=f().useState(!1),[z,U]=f().useState(!0),H=!y.current;(0,e$.A)(()=>{H&&B(!1)},[H]);let V=$?(0,a.jsx)(eJ.A,{autoFocus:!0,moduleId:e.moduleId,hiddenDynamicValueIcon:!0,value:y.current,onlyShowDynamicValue:!0,defaultClickFirstTag:z,onChange:b,disabled:h,onFocus:()=>{I(!0)},onBlur:()=>{I(!1)},onTextAreaModalChange:e=>{P(e)},size:"small-plus",bordered:!1}):(0,a.jsx)(eB.A,{ref:L,className:o()({[E]:!0,[`${E}--disabled`]:h}),placeholder:(0,x.a)({id:"mock"}),value:y.current,onChange:e=>{N(e)},disabled:h,onFocus:()=>{y.current&&(U(!0),B(!0)),I(!0)},onSelect:()=>{U(!1),B(!0)},popupClassName:o()((0,eW.$i)(),F),onBlur:()=>{I(!1),b(y.current)},filterOption:(e,t)=>{let{searchValues:i,selectable:a}=t;if(!Array.isArray(i)||!a)return!1;let n=e.toLocaleLowerCase().trim();return i.some(e=>null==e?void 0:e.includes(n))},options:d,dropdownMatchSelectWidth:!0,virtual:!0}),K=(0,a.jsxs)("div",{className:T,children:[V,!h&&!$&&(0,a.jsx)(m.A,{type:"icon-operate-expand-small",className:_,onClick:e=>{e.stopPropagation(),null==S||S()}})]});return(0,a.jsxs)("div",{className:o()(k,{[`${eZ}--isFocus`]:C,[`${eZ}--simple`]:u,[`${eZ}--simple--hasValue`]:u&&!!y.current}),children:[!u&&K,u&&(0,a.jsx)(ez.A,{open:D,onOpenChange:R,overlayClassName:o()({[M]:!0,[`${M}--low`]:O}),placement:"topRight",content:K,trigger:"click",getPopupContainer:e=>{var t;return null!=(t=null==e?void 0:e.parentElement)?t:e},children:(0,a.jsx)(c.A,{type:"text",theme:"secondary",size:"small",style:{color:"inherit"},icon:(0,a.jsx)(m.A,{type:"icon-mcok",size:15})})})]})};var eX=i(511573),e0=i(47371),e1=i(941929),e4=i(50160);function e3(e){let[t,i]=(0,e1.A)(e,{defaultValue:!1,valuePropName:"visible"}),{dataSchemaDefinitions:n}=(0,v.useContext)(A.aA),[l,r]=(0,v.useState)();(0,v.useEffect)(()=>{t&&r(void 0)},[t]);let s=e.onCancel?e.onCancel:()=>i(!1);return(0,a.jsxs)(P.Ay,{size:"720",visible:t,onCancel:s,onOk:()=>{if((null==l?void 0:l.type)==="apiSchema"&&void 0!==l.schema.id){let t=null==n?void 0:n[l.schema.id];e.onOK(l.schema.id,t)}s()},title:(0,x.a)({id:"refsSchemaModel"}),children:[(0,a.jsx)(e4.W,{selectedRowKeys:l,setSelectedRowKeys:r}),e.children]})}let e8="c-json-schema-editor-delicate-schema-node-refer-to-schema",e6=e=>{let{className:t,featureLinkRef:i,indent:l}=e,r=(0,n.bq)(),s=(0,A.qQ)(l),d=o()(e8,t),c=`${e8}__or`,u=`${e8}__refer`;return(0,a.jsxs)("div",{className:o()({[d]:!0,[`${e8}--simple`]:s}),children:[(0,a.jsx)("div",{className:c,children:(0,x.a)({id:"or"})}),(0,a.jsx)("div",{className:u,onClick:()=>{r.show(e3,{onCancel:()=>{},onOK:e=>null==i?void 0:i(e.toString())})},children:(0,x.a)({id:"referToSchema"})})]})};var e2=i(586708),e5=i(622594);let e7="c-json-schema-editor-delicate-schema-node-title-input";function e9(e){let{actions:t,templateParameters:i}=(0,v.useContext)(A.aA),n=(0,A.qQ)(e.indent),[r,s]=f().useState(!1),d=o()(e7,e.className),c=`${e7}__input`,u=`${e7}__icon`,[p,h]=(0,v.useState)(e.title);(0,e$.A)(()=>{h(e.title)},[e.title]);let g=e.disabled||void 0===e.prefix,{openModal:y}=(0,z.useModel)("globalModal",e=>({openModal:e.openModal})),j=(0,v.useMemo)(()=>{if(!e.name||!(null==i?void 0:i.length))return null;let t=i.find(t=>t.name===e.name);return(null==t?void 0:t.title)?t:null},[e.name,i]),b=(0,v.useMemo)(()=>p?[]:j?[{value:j.title||"",label:(0,a.jsx)("div",{className:`${e7}__autocomplete-option`,children:j.title})}]:[],[p,j]),w=(0,l.A)(e=>(0,a.jsxs)("div",{children:[e,b.length>0&&(0,a.jsx)("div",{className:`${e7}__autocomplete-divider`}),(0,a.jsxs)("div",{className:`${e7}__autocomplete-template-entry`,onMouseDown:e=>{e.preventDefault()},onClick:()=>{y({moduleName:11,modalProps:{width:960}})},children:[(0,a.jsx)(m.A,{type:"icon-menu-01",size:16,style:{marginRight:"8px"}}),(0,eU.hw)({id:"menu.projectSettings.resource.templateParameter"})]})]})),S=e.prefix&&!g?i=>{if(e.title===i)return;let a=[...e.prefix,"title"];t.changeValueAction({key:a,value:i})}:void 0;return(0,a.jsxs)("div",{className:o()(d,"relative",{[`${e7}--isFocus`]:r,[`${e7}--simple`]:n}),children:[(0,a.jsx)(eB.A,{disabled:g,value:p,options:b,onSelect:e=>{h(e),null==S||S(e)},onChange:e=>{h(e),null==S||S(e)},filterOption:!1,dropdownRender:w,style:{width:"100%"},children:(0,a.jsx)(e5.S,{className:c,placeholder:(0,x.a)({id:"schemaTitlePlaceholder"}),disabled:g,fieldName:"title",isAutoWidth:n,onFocus:()=>s(!0),onBlur:()=>{s(!1),g||null==S||S(p)}})}),(0,a.jsx)("div",{className:o()(u),children:e.useTemplateParameter&&!g&&(0,a.jsx)(eP.Z,{keyword:e.name,type:"TITLE",onSelect:e=>{g||(h(e.title),null==S||S(e.title))}})})]})}var te=i(77552);let tt="c-json-schema-editor-delicate-schema-node";function ti(e){let{schemaId:t=[],lazyData:i,prefix:s,indent:g,hidden:j=!1,invalid:b=!1,fieldName:C,featureChangeName:I,featureLinkRef:N,required:M,featureChangeRequire:_,featureChangeType:F=!1,featureChangeMock:D=!1,featureChangeTitle:R=!1,featureChangeDes:O=!1,featureAdvSetting:P=!1,featureExtractNode:L=!1,featureDeleteNode:$,featureAddNextSiblingNode:B,featureRevertReference:z,featureHideReference:H,featureShowReference:V,featureDefReference:K,IsReferenceData:q=!1,featureSortable:G=!0,featureSelfSortIndex:W,refLevel:J=0,isRootRef:Y=!1,nameType:Z="input",className:Q,latestNewSchemaId:X}=e,{getMainType:ee,isIncludeCycleDeps:et}=(0,r.r)(),ei=(0,v.useRef)(s);(0,h.isEqual)(ei.current,s)||(ei.current=s);let ea=ei.current,{showMock:en,showFaker:el,dataSchemaDefinitions:er,data:es,actions:eo,sortable:ed,showTitleInTable:ec,useTemplateParameter:eu=!1,readonly:ep=!1,moduleId:em,defaultExpanded:eh}=(0,v.useContext)(A.aA),ev=(0,A.qQ)(g),ef=!ev,eg=f().useRef(null),ey=(0,n.bq)(),ex=i(es.data),eA=(0,v.useMemo)(()=>ee(ex),[ex]),ej="string"===eA&&!!ex.contentSchema,{res:eb}=y(ex,er),{RefSourceObject:ew,datatype:eC,refStack:eI}=eb||{},eN=(null==ea?void 0:ea[ea.length-1])==="contentSchema",[ek,eT]=(0,v.useState)(0===g||"array"===eA||Y||eN||!!(null==eh?void 0:eh(eA,g))),eM=(0,v.useRef)(ej);f().useEffect(()=>{ej&&!eM.current&&eT(!0),eM.current=ej},[ej]);let eE=et(t,eI),e_=(()=>{if(!eE&&!j&&(["object","oneOf","anyOf","allOf"].includes(eA)||ew)){if("object"===eA)return()=>{eo.setState(e=>{X.current=function(e){var t,i;let{getActiveXAppOrder:a}=S();null!=(t=e.properties)||(e.properties={});let n=a(e),l=(0,w.uR)();return e.properties[l]={"x-tmp-pending-properties":!0},n.push(l),e[w.cG]=n,null!=(i=e.required)||(e.required=[]),l}(i(e))}),eT(!0)};if(["oneOf","anyOf","allOf"].includes(eA))return()=>{eo.setState(e=>{!function(e,t){var i;let{defaultSchema:a}=S();null!=(i=e[t])||(e[t]=[]),e[t].push(a.object())}(i(e),eA)}),eT(!0)};if(ew&&!eE&&"object"===eC)return()=>{eo.setState(e=>{X.current=function(e){var t,i,a,n;let{isNullableRef:l}=S(),r=l(e),{$ref:s}=r?null!=(a=null==(t=null!=(i=e.anyOf)?i:e.oneOf)?void 0:t[0])?a:{}:e;if(s){r?(delete e.oneOf,delete e.anyOf):delete e.$ref,e.type=r?["object","null"]:"object";let t=(0,w.uR)();e[w.HK]={[t]:{$ref:s,[w.iB]:{}}};let i=(0,w.uR)();return e.properties={},e.properties[i]={"x-tmp-pending-properties":!0},null!=(n=e.required)||(e.required=[]),e[w.cG]=[t,i],i}return""}(i(e))}),eT(!0)}}})(),eP=(0,v.useMemo)(()=>(e_||"array"===eA||ej)&&!b,[e_,eA,b,ej]),eL=!!(ed&&"number"==typeof W&&!q),e$=q||j||b,eB=!!ex["x-tmp-pending-properties"]&&N,ez=!es.sorting&&!q&&!!eL,eU=o()(tt,Q),eH=`${tt}__row`,eV=`${eH}__filed`,eW=`${eH}__drag`,eJ=`${eH}__name`,eY=`${eH}__referToSchema`,eZ=`${eH}__schemaType`,e1=`${eH}__mock`,e4=`${eH}__faker`,e3=`${eH}__title`,e8=`${eH}__description`,e5=`${eH}__operation`,e7=`${eH}__revertRef`,ti=`${eH}__referOperation`,ta=`${eH}__rightEmpty`,tn=(0,l.A)(e=>{null==N||N(e)}),tl=eB&&(0,a.jsx)(e6,{indent:g,className:o()({[eV]:ef},eY),featureLinkRef:N?tn:void 0}),tr=!eB&&(0,a.jsx)(e2.A,{indent:g,className:o()({[eV]:ef},eZ),prefix:ea,schema:ex,disabled:ep||!F||e$,enabledAdvSetting:!ep&&P&&!q&&!b,onSelect:()=>eT(!0),required:M,disabledRequired:ep||!_||e$,featureChangeRequire:_,isHiddenRequired:0===g,rowRef:eg,moduleId:em}),ts=!eB&&ec&&(0,a.jsx)(e9,{indent:g,className:o()({[eV]:ef},{[e3]:!0,[`${e3}--noValue`]:!ex.title}),name:C,title:ex.title,prefix:ea,disabled:ep||!R||e$,useTemplateParameter:eu}),to=!eB&&(0,a.jsx)(eK,{indent:g,className:o()({[eV]:ef||ec},{[e8]:!0,[`${e8}--noValue`]:!ex.description}),name:C,description:ex.description,prefix:ea,disabled:ep||!O||e$,showTitleInTable:ec,useTemplateParameter:eu,moduleId:em}),td=!ep&&g>0&&ez&&(0,a.jsx)(eS,{className:eW}),tc=(0,v.useCallback)(()=>eT(e=>!e),[]),tu=eP&&(0,a.jsx)(eG,{expandable:eP,expanded:ek,onClick:tc}),tp=(0,a.jsx)(eX.A,{className:o()(eV,eJ),onChange:e=>{null==I||I(e.replace(//g," "))},value:C,disabled:ep||!I||e$,autoFocus:!!ex["x-tmp-pending-properties"]&&!!N,invalid:b,nameType:Z,indentLeft:(g+Number(!td)+Number(!tu))*16,simpleLeft:(0,a.jsxs)(a.Fragment,{children:[tl,tr]}),simpleRight:(0,a.jsx)(a.Fragment,{children:ec?ts:to}),indent:g,isRefer:!!eB,latestNewSchemaId:X,schemaName:ea?ea[ea.length-1]:void 0,isDeprecated:!!(null==ex?void 0:ex.deprecated),dragHandle:td,onTemplateParameterSelect:e=>{null==I||I(e.name.replace(//g," ")),ea&&eo.setState(t=>{let i=ea.slice();i[(null==i?void 0:i.length)-1]=e.name;let a=[...i,"title"],n=[...i,"description"],l=(0,h.get)(t,a),r=(0,h.get)(t,n);l||(0,h.set)(t,[...i,"title"],e.title),r||(0,h.set)(t,[...i,"description"],e.description)})},children:tu}),tm=!eB&&en&&(0,a.jsx)(e0.Ay,{indent:g,className:o()(eV,{[e1]:!0,[`${e1}--noValue`]:!ex[w.EW]}),schema:ex,prefix:ea,moduleId:em,disabled:ep||!D||e$}),th=!eB&&el&&(0,a.jsx)(eQ,{indent:g,className:o()(eV,{[e4]:!0,[`${e4}--noValue`]:!ex[w.EW]}),schema:ex,prefix:ea,moduleId:em,disabled:ep||!D||e$}),tv=ep?null:(0,a.jsxs)("div",{className:ti,children:[K&&(0,a.jsx)(d.A,{title:(0,x.a)({id:"DereferenceTips"}),children:(0,a.jsx)(c.A,{onClick:K,type:"primary",size:"small",theme:"primary",icon:(0,a.jsx)(m.A,{type:"icon-button-disconnect",color:"var(--ui-legacy-text-bg-high)",size:18}),children:(0,x.a)({id:"Dereference"})})}),H&&(0,a.jsx)(c.A,{onClick:H,type:"primary",size:"small",theme:"primary",icon:(0,a.jsx)(m.A,{type:"icon-operate-eyes-closed",color:"var(--ui-legacy-text-bg-high)",size:18}),children:(0,x.a)({id:"hideField"})}),V&&(0,a.jsx)(c.A,{onClick:V,type:"primary",size:"small",theme:"primary",icon:(0,a.jsx)(m.A,{type:"icon-operate-eye-open",color:"var(--ui-legacy-text-bg-high)",size:18}),children:(0,x.a)({id:"showField"})})]}),[tf,tg]=(0,v.useState)(!1),ty=(0,a.jsxs)("div",{className:o()(eV,{[e5]:!0,[`${e5}--empty`]:ep||!($&&!q&&!b)&&!(B&&!q&&!b)&&!(e_&&!q&&!b),[`${e5}--hidden`]:z&&!b}),children:[!ep&&L&&["object","ref"].includes(eA)?(0,a.jsx)(u.A,{open:tf,onOpenChange:tg,menu:{onClick:()=>tg(!1),items:[{label:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(m.A,{type:"icon-data-extraction"})," ",(0,x.a)({id:"setAsASchema"})]}),key:"dataSchema",onClick:()=>{ey.show(U,{value:ex,moduleId:em,onOk:e=>{eo.setState(t=>{var a=i(t),n=e.id;for(let e of Object.keys(a))delete a[e];a.$ref=`#/definitions/${n}`})}})}}]},children:(0,a.jsx)(c.A,{style:{color:tf?"var(--ui-text-color)":"var(--ui-blue-6)"},type:"text",theme:"secondary",icon:(0,a.jsx)(m.A,{size:15,type:"icon-more"}),size:"small"})}):(0,a.jsx)(eq,{}),(()=>{let e=[!ep&&!!B&&!q&&!b&&{title:(0,x.a)({id:"add_sibling_node"}),onClick:B},!ep&&!!e_&&!q&&!b&&{title:(0,x.a)({id:"add_child_node"}),onClick:e_}].filter(Boolean);if(0===e.length)return(0,a.jsx)(eq,{});if(1===e.length)return(0,a.jsx)(d.A,{title:e[0].title,arrowPointAtCenter:!0,autoAdjustOverflow:!0,placement:"topRight",children:(0,a.jsx)(c.A,{type:"text",theme:"secondary",className:"add",icon:(0,a.jsx)(m.A,{size:15,type:"icon-circle-add1"}),size:"small",onClick:e[0].onClick})});let t=ep||!B||q||b?void 0:()=>B();return(0,a.jsx)(u.A,{overlay:(0,a.jsx)(p.A,{children:e.map(e=>(0,a.jsx)(p.A.Item,{onClick:e.onClick,children:(0,a.jsx)("span",{children:e.title})},e.title))}),trigger:["click","hover"],getPopupContainer:e=>e,children:(0,a.jsx)(c.A,{type:"text",theme:"secondary",className:"add",icon:(0,a.jsx)(m.A,{size:15,type:"icon-circle-add1"}),size:"small",onClick:t})})})(),ep||!$||q||b?(0,a.jsx)(eq,{}):(0,a.jsx)(E,{onDelete:$})]}),tx=z&&!b&&(0,a.jsx)("div",{className:o()(eV,{[e7]:!0}),children:(0,a.jsx)(d.A,{title:(0,x.a)({id:"RevertReference"}),arrowPointAtCenter:!0,autoAdjustOverflow:!0,children:(0,a.jsx)(c.A,{type:"text",theme:"secondary",icon:(0,a.jsx)(m.A,{size:15,type:"icon-button-link"}),size:"small",onClick:z})})}),tA=(0,a.jsx)("div",{className:o()(eV,ta),style:{flexBasis:!eB||ef||tl?void 0:24*(1+Number(ev&&ec))+5}}),tj=[tp,tx,tm,th,ec&&to,ty,tA,tv],tb=[tp,tl,tr,tm,th,ts,to,tx,ty,tA,tv];return(0,a.jsx)(eF,{index:W,className:eU,children:(0,a.jsxs)(te.m4,{value:{data:ex,name:C},children:[(0,a.jsxs)("div",{className:o()({[eH]:!0,[`${eH}--simple`]:ev,[`${eH}--hidden`]:j||b}),ref:eg,children:[ev&&tj,ef&&tb]}),ek&&eP&&!j&&!b?(0,a.jsxs)(a.Fragment,{children:[["allOf","anyOf","oneOf"].includes(eA)?(0,a.jsx)(eO,{schemaId:t,lazyData:i,prefix:ea,indent:g,IsReferenceData:q,refLevel:J,latestNewSchemaId:X,featureExtractNode:!q}):null,"array"===eA?(0,a.jsx)(k,{schemaId:t,lazyData:i,prefix:ea,indent:g,IsReferenceData:q,refLevel:J,latestNewSchemaId:X,featureExtractNode:!q}):null,ej?(0,a.jsx)(T,{schemaId:t,lazyData:i,prefix:ea,indent:g,IsReferenceData:q,refLevel:J,latestNewSchemaId:X,featureExtractNode:!q}):null,"object"===eA?(0,a.jsx)(eR,{schemaId:t,objectData:ex,lazyData:i,prefix:ea,indent:g,IsReferenceData:q,featureSortable:G,refLevel:J,featureExtractNode:!q,latestNewSchemaId:X,featureAddChild:e_}):null,"ref"===eA&&ew?(0,a.jsx)(eD,{PriorityQueue:new Set,schemaId:t,lazyData:i,prefix:ea,indent:g,IsReferenceData:q,featureSortable:G,title:ew.title,featureJumpToRef:!0,isRefSnap:!1,borderLeft:0===g?0:`${20*(g+1-[eP,ez].filter(Boolean).length)}px`,featureUnlinkRef:ew&&!eE&&"object"===eC?()=>{eo.setState(e=>(function(e,t){var i,a,n;let{isNullableRef:l,getRef:r,getActiveXAppOrder:s}=S(),o=l(e),{$ref:d}=o?null!=(n=null==(i=null!=(a=e.anyOf)?a:e.oneOf)?void 0:i[0])?n:{}:e;if(d){let{RefSourceObject:i}=r(e,t);if(!i)return;let a=(0,w.Cz)(i),n=JSON.parse(JSON.stringify(i));if(o?(delete e.oneOf,delete e.anyOf):delete e.$ref,"object"===a){e.type=o?["object","null"]:"object",e.properties=n.properties||{};let t=Object.keys(n[w.HK]||{}).reduce((e,t)=>(e[t]=(0,w.uR)(),e),{}),i=n[w.HK]?Object.keys(t).reduce((e,i)=>(i in n[w.HK]&&(e[t[i]]=n[w.HK][i]),e),{}):{};e[w.HK]=i,e[w.cG]=s(n).map(e=>e in t?t[e]:e),void 0!==n.required&&(e.required=n.required,Array.isArray(e.required)&&0===e.required.length&&delete e.required)}"ref"===a&&Object.keys(n).forEach(t=>{e[t]=n[t]})}})(i(e),er))}:void 0,refLevel:J,latestNewSchemaId:X}):null]}):null]})})}},511573:function(e,t,i){"use strict";i.d(t,{A:()=>w,L:()=>b});var a=i(838e3),n=i(626026),l=i(839402),r=i(88316),s=i(622594),o=i(77552),d=i(751527),c=i(200384),u=i(140049),p=i(662387),m=i(52367),h=i(819463),v=i(838487),f=i.n(v),g=i(554692),y=i(671466),x=i(641486),A=i.n(x);let j={input:"input-htBVE4",inputSuffix:"inputSuffix-ZZ7VII"},b="c-json-schema-editor-delicate-schema-node-field-input",w=A().memo(function(e){var t;let{invalid:i,className:v,nameType:w,children:S,style:C,indentLeft:I,simpleLeft:N,simpleRight:k,indent:T,isRefer:M,autoFocus:E,latestNewSchemaId:_,isDeprecated:F,dragHandle:D,schemaName:R,onTemplateParameterSelect:O}=e,P=(0,o.UM)(e=>e),L=(0,c.qQ)(T),{templateParameters:$}=(0,x.useContext)(c.aA),[B,z]=(0,x.useState)(!0),U=(0,u.A)(e=>{var t;let i=Array.isArray(e)?e.join(","):null!=(t=null==e?void 0:e.toString())?t:"",a=i.startsWith(" ")||i.startsWith("\xa0"),n=i.length>1&&(i.endsWith(" ")||i.endsWith("\xa0"));return a&&!n?"containsSpacesAtBeginning":a&&n?"containsSpacesAtBothEnds":!a&&n?"containsSpacesAtEnd":void 0}),H=A().useRef(null),[V,K]=A().useState(e.value);(0,p.A)(()=>{K(e.value)},[e.value]);let q=A().useMemo(()=>U(V),[V]),G=(0,u.A)(t=>{M&&!e.value&&e.onChange&&e.onChange(t),K(t)}),W=(0,u.A)(e=>{if((G(e),e&&$)&&$.some(t=>t.name.startsWith(e)))return void Z(!0);Z(!1)}),J=(0,u.A)(t=>{if(e.onChange&&13===t.keyCode){let i=t.target.value;if(i!==e.value)return e.onChange(i)}}),[Y,Z]=(0,x.useState)(!1),{run:Q}=(0,m.A)(e=>{Z(e)},{wait:150,trailing:!1,leading:!0}),X=(0,x.useCallback)((e,t)=>!B||!!e&&"string"==typeof(null==t?void 0:t.label)&&t.label.startsWith(e),[B]),ee=(0,u.A)(e=>{z(!1),Z(e)}),et=(0,u.A)(e=>{if(e){let e=null==V?void 0:V.toString();if(!e||!$||!$.some(t=>t.name.startsWith(e)))return}Q(e)}),ei=(0,x.useRef)(!1),ea=(0,u.A)(t=>{if(ei.current){ei.current=!1;return}let i=t.target.value;if(e.onChange&&i!==e.value)return e.onChange(i)});A().useEffect(()=>{var e;if(!E||!M||!R||R!==_.current)return;let t=null==(e=H.current)?void 0:e.querySelector(".ui-input");null==t||t.focus(),_.current=""},[E,M,R,_]);let en=f()(b,v),el=`${b}__bg`,er=`${el}__bgItem`,es=`${er}__input`,eo=`${er}__tag`,ed=`${b}__autoComplete`,ec=(0,x.useRef)(!1),eu=(0,x.useRef)(null);(0,h.A)(()=>{Y&&ec.current&&Z(!1),Y&&!ec.current&&(ec.current=!0)},eu);let ep=(0,a.jsx)("div",{className:"relative w-full",ref:eu,children:(0,a.jsx)(n.y,{open:Y,onDropdownVisibleChange:et,value:null!=(t=null==V?void 0:V.toString())?t:"",filterOption:X,onChange:W,disabled:e.disabled,className:ed,onClick:()=>z(!0),onBlur:ea,onSelect:e=>{ei.current=!0,W(e.name),null==O||O(e),Z(!1)},children:(0,a.jsx)(s.S,{autoFocus:E,className:f()(j.input,{[es]:!0,[`${es}--simpleRefer`]:L&&M,[`${es}--isDeprecated`]:F&&!!V}),value:null==V?void 0:V.toString(),onKeyUp:J,placeholder:(0,d.a)({id:"fieldName"}),disabled:e.disabled,isAutoWidth:L,suffix:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.A,{title:(0,d.a)({id:null!=q?q:""}),children:q&&(0,a.jsx)(y.A,{type:"icon-info-2",style:{color:"var(--ui-text-color-secondary)"}})}),!e.disabled&&(0,a.jsx)(r.s,{value:{commonParametersOpen:Y,setCommonParametersOpen:ee,onNameChange:e.onChange},children:(0,a.jsx)(l.A,{className:j.inputSuffix,rowContext:{...null==P?void 0:P.data,name:V}})})]})})})}),em=(0,a.jsx)("div",{className:f()({[eo]:!0,[`${eo}--hidden`]:!V}),children:V});return(0,a.jsxs)("div",{className:f()({[en]:!0,[`${b}--simple`]:L}),style:C,ref:H,children:[(0,a.jsx)("p",{style:{width:I}}),D,(0,a.jsxs)("div",{className:el,children:[(0,a.jsxs)("div",{className:f()({[er]:!0,[`${er}--left`]:!0}),children:[S,i&&(0,a.jsx)(g.A,{title:(0,d.a)({id:"fieldNameConflict"}),children:"tag"===w?em:ep}),!i&&("tag"===w?em:ep),L&&N]}),L&&(0,a.jsx)("div",{className:f()({[er]:!0,[`${er}--right`]:!0}),children:k})]})]})})},47371:function(e,t,i){"use strict";i.d(t,{mX:()=>S,Ay:()=>I,jx:()=>C});var a=i(838e3),n=i(740565),l=i(698879),r=i(722238),s=i(140049),o=i(838487),d=i.n(o),c=i(838062),u=i(202130),p=i(458184),m=i(671466),h=i(641486),v=i.n(h),f=i(751527),g=i(200384),y=i(704128);let x=[{name:"",mock:"@ctitle"},{name:"",mock:"@cword"},{name:"",mock:"@cparagraph"},{name:"",mock:"@csentence"},{name:"",mock:"@cname"},{name:"",mock:"@cfirst"},{name:"",mock:"@clast"},{name:"",mock:"@image"},{name:"",mock:"@phone"},{name:"",mock:"@regexp(/(0\\d{2}-\\d{8}(-\\d{1,4})?)|(0\\d{3}-\\d{7,8}(-\\d{1,4})?)/)"},{name:"",mock:"@regexp(/[1-9]\\d{5}(18|19|20)\\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\\d{3}[0-9Xx]/)"},{name:"QQ ",mock:"@regexp(/[1-9][0-9]{4,}/)"},{name:"",mock:'@url("http")'},{name:"ip",mock:"@ip"},{name:"",mock:"@regexp(/\\d+/)"},{name:"",mock:"@now"},{name:"",mock:"@datetime"},{name:"",mock:"@timestamp"},{name:"",mock:"@date"},{name:"",mock:"@time"},{name:"email",mock:"@email"},{name:"",mock:"@string"},{name:"",mock:"@natural"},{name:"",mock:"@float"},{name:"",mock:"@character"},{name:"",mock:"@boolean"},{name:"",mock:"@domain"},{name:"",mock:'@domain("com")'},{name:" ID",mock:"@id"},{name:" ID",mock:"@increment"},{name:" ID",mock:"@increment(100)"},{name:"GUID",mock:"@guid"},{name:"data",mock:"@dataImage"},{name:"",mock:"@color"},{name:"hex",mock:"@hex"},{name:"rgba",mock:"@rgba"},{name:"rgb",mock:"@rgb"},{name:"hsl",mock:"@hsl"},{name:"",mock:"@integer"},{name:"",mock:"@paragraph"},{name:"",mock:"@sentence"},{name:"",mock:"@word"},{name:"",mock:"@title"},{name:"",mock:"@name"},{name:"",mock:"@first"},{name:"",mock:"@last"},{name:"",mock:"@region"},{name:"",mock:"@province"},{name:"",mock:"@city"},{name:" ()",mock:"@city(true)"},{name:"",mock:"@county"},{name:" ()",mock:"@county(true)"},{name:"",mock:"@zip"},{name:"",mock:'@upper("hello")'},{name:"",mock:'@lower("HELLO")'},{name:"",mock:"@pick(['a','b','c','d'])"},{name:"",mock:"@shuffle(['a','b','c','d'])"},{name:"",mock:"@protocol"},{name:"",mock:'@date("yyyy-MM-dd")'},{name:"",mock:'@date("yy-MM-dd")'},{name:"",mock:'@date("y-MM-dd")'},{name:"",mock:'@date("y-M-d")'},{name:"",mock:'@datetime("yyyy-MM-dd A HH:mm:ss")'},{name:"",mock:'@datetime("yy-MM-dd a HH:mm:ss")'},{name:"",mock:'@datetime("y-MM-dd HH:mm:ss")'},{name:"",mock:'@now("year")'},{name:"",mock:'@now("month")'},{name:"",mock:'@now("week")'},{name:"",mock:'@now("day")'},{name:"",mock:'@now("hour")'},{name:"",mock:'@now("minute")'},{name:"",mock:'@now("second")'},{name:"",mock:'@image("200x100")'},{name:"",mock:"@image('200x100', '#FF6600')"},{name:"",mock:"@image('200x100', '#4A7BF7', 'Hello')"},{name:"",mock:"@image('200x100', '#50B347', '#FFF', 'Mock.js')"},{name:"",mock:"@image('200x100', '#894FC4', '#FFF', 'png', '!')"},{name:"data",mock:'@dataImage("200x100")'},{name:"data",mock:"@dataImage('200x100', 'Hello Mock.js!')"},{name:"data",mock:"@dataImage('200x100', 'Hello Mock.js!', '#CCC')"},{name:"",mock:"@boolean(true)"},{name:"",mock:"@boolean(false)"},{name:"",mock:"@boolean(1, 9, true)"},{name:"",mock:"@integer(10000)"},{name:"",mock:"@integer(60, 100)"},{name:"",mock:"@float(0)"},{name:"",mock:"@float(60, 100)"},{name:"",mock:"@float(60, 100, 3)"},{name:"",mock:"@float(60, 100, 3, 5)"},{name:"",mock:'@string("lower")'},{name:"",mock:'@string("upper")'},{name:"",mock:'@string("number")'},{name:"",mock:'@string("symbol")'},{name:"",mock:'@string("aeiou")'},{name:"",mock:"@string(7, 10)"},{name:"",mock:"@string('lower', 1, 3)"},{name:"",mock:"@string('upper', 1, 3)"},{name:"",mock:"@string('number', 1, 3)"},{name:"",mock:"@string('symbol', 1, 3)"},{name:"",mock:'@character("lower")'},{name:"",mock:'@character("upper")'},{name:"",mock:'@character("number")'},{name:"",mock:'@character("symbol")'},{name:"",mock:'@character("aeiou")'}],A=[{name:"chinese title",mock:"@ctitle"},{name:"chinese phrase",mock:"@cword"},{name:"chinese paragraph",mock:"@cparagraph"},{name:"chinese sentence",mock:"@csentence"},{name:"chinese name",mock:"@cname"},{name:"chinese firstName",mock:"@cfirst"},{name:"chinese lastName",mock:"@clast"},{name:"image link",mock:"@image"},{name:"chinese mobile number",mock:"@phone"},{name:"domestic fixed-line",mock:"@regexp(/(0\\d{2}-\\d{8}(-\\d{1,4})?)|(0\\d{3}-\\d{7,8}(-\\d{1,4})?)/)"},{name:"identity card number",mock:"@regexp(/[1-9]\\d{5}(18|19|20)\\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\\d{3}[0-9Xx]/)"},{name:"QQ Number",mock:"@regexp(/[1-9][0-9]{4,}/)"},{name:"url",mock:'@url("http")'},{name:"ip address",mock:"@ip"},{name:"regexp",mock:"@regexp(/\\d+/)"},{name:"current date and time",mock:"@now"},{name:"date time",mock:"@datetime"},{name:"timestamp",mock:"@timestamp"},{name:"date",mock:"@date"},{name:"time",mock:"@time"},{name:"email",mock:"@email"},{name:"string",mock:"@string"},{name:"natural",mock:"@natural"},{name:"float",mock:"@float"},{name:"character",mock:"@character"},{name:"boolean",mock:"@boolean"},{name:"domain",mock:"@domain"},{name:"domain",mock:'@domain("com")'},{name:"numeric ID",mock:"@id"},{name:"increment ID",mock:"@increment"},{name:"increment ID",mock:"@increment(100)"},{name:"GUID",mock:"@guid"},{name:"image data",mock:"@dataImage"},{name:"color",mock:"@color"},{name:"color hex",mock:"@hex"},{name:"color rgba",mock:"@rgba"},{name:"color rgb",mock:"@rgb"},{name:"color hsl",mock:"@hsl"},{name:"integer",mock:"@integer"},{name:"paragraph",mock:"@paragraph"},{name:"sentence",mock:"@sentence"},{name:"word",mock:"@word"},{name:"title",mock:"@title"},{name:"name",mock:"@name"},{name:"first name",mock:"@first"},{name:"last name",mock:"@last"},{name:"region",mock:"@region"},{name:"province",mock:"@province"},{name:"city",mock:"@city"},{name:"city (with province)",mock:"@city(true)"},{name:"county",mock:"@county"},{name:"county (with province)",mock:"@county(true)"},{name:"post code",mock:"@zip"},{name:"to upper",mock:'@upper("hello")'},{name:"to lower",mock:'@lower("HELLO")'},{name:"pick from enum",mock:"@pick(['a','b','c','d'])"},{name:"shuffle array",mock:"@shuffle(['a','b','c','d'])"},{name:"protocol",mock:"@protocol"},{name:"date",mock:'@date("yyyy-MM-dd")'},{name:"date",mock:'@date("yy-MM-dd")'},{name:"date",mock:'@date("y-MM-dd")'},{name:"date",mock:'@date("y-M-d")'},{name:"date time",mock:'@datetime("yyyy-MM-dd A HH:mm:ss")'},{name:"date time",mock:'@datetime("yy-MM-dd a HH:mm:ss")'},{name:"date time",mock:'@datetime("y-MM-dd HH:mm:ss")'},{name:"current year",mock:'@now("year")'},{name:"current month",mock:'@now("month")'},{name:"current week",mock:'@now("week")'},{name:"current day",mock:'@now("day")'},{name:"current hour",mock:'@now("hour")'},{name:"current minute",mock:'@now("minute")'},{name:"current second",mock:'@now("second")'},{name:"image",mock:'@image("200x100")'},{name:"image",mock:"@image('200x100', '#FF6600')"},{name:"image",mock:"@image('200x100', '#4A7BF7', 'Hello')"},{name:"image",mock:"@image('200x100', '#50B347', '#FFF', 'Mock.js')"},{name:"image",mock:"@image('200x100', '#894FC4', '#FFF', 'png', '!')"},{name:"imagedata",mock:'@dataImage("200x100")'},{name:"imagedata",mock:"@dataImage('200x100', 'Hello Mock.js!')"},{name:"imagedata",mock:"@dataImage('200x100', 'Hello Mock.js!', '#CCC')"},{name:"boolean",mock:"@boolean(true)"},{name:"boolean",mock:"@boolean(false)"},{name:"boolean",mock:"@boolean(1, 9, true)"},{name:"integer",mock:"@integer(10000)"},{name:"integer",mock:"@integer(60, 100)"},{name:"float",mock:"@float(0)"},{name:"float",mock:"@float(60, 100)"},{name:"float",mock:"@float(60, 100, 3)"},{name:"float",mock:"@float(60, 100, 3, 5)"},{name:"string",mock:'@string("lower")'},{name:"string",mock:'@string("upper")'},{name:"string",mock:'@string("number")'},{name:"string",mock:'@string("symbol")'},{name:"string",mock:'@string("aeiou")'},{name:"string",mock:"@string(7, 10)"},{name:"string",mock:"@string('lower', 1, 3)"},{name:"string",mock:"@string('upper', 1, 3)"},{name:"string",mock:"@string('number', 1, 3)"},{name:"string",mock:"@string('symbol', 1, 3)"},{name:"character",mock:'@character("lower")'},{name:"character",mock:'@character("upper")'},{name:"character",mock:'@character("number")'},{name:"character",mock:'@character("symbol")'},{name:"character",mock:'@character("aeiou")'}],j=[{name:"",mock:"@ctitle"},{name:"",mock:"@cword"},{name:"",mock:"@cparagraph"},{name:"",mock:"@csentence"},{name:"",mock:"@cname"},{name:"",mock:"@cfirst"},{name:"",mock:"@clast"},{name:"",mock:"@image"},{name:"",mock:"@phone"},{name:"",mock:"@regexp(/(0\\d{2}-\\d{8}(-\\d{1,4})?)|(0\\d{3}-\\d{7,8}(-\\d{1,4})?)/)"},{name:"",mock:"@regexp(/[1-9]\\d{5}(18|19|20)\\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\\d{3}[0-9Xx]/)"},{name:"QQ ",mock:"@regexp(/[1-9][0-9]{4,}/)"},{name:"",mock:'@url("http")'},{name:"ip",mock:"@ip"},{name:"",mock:"@regexp(/\\d+/)"},{name:"",mock:"@now"},{name:"",mock:"@datetime"},{name:"",mock:"@timestamp"},{name:"",mock:"@date"},{name:"",mock:"@time"},{name:"email",mock:"@email"},{name:"",mock:"@string"},{name:"",mock:"@natural"},{name:"",mock:"@float"},{name:"",mock:"@character"},{name:"",mock:"@boolean"},{name:"",mock:"@domain"},{name:"",mock:'@domain("com")'},{name:" ID",mock:"@id"},{name:" ID",mock:"@increment"},{name:" ID",mock:"@increment(100)"},{name:"GUID",mock:"@guid"},{name:"data",mock:"@dataImage"},{name:"",mock:"@color"},{name:"hex",mock:"@hex"},{name:"rgba",mock:"@rgba"},{name:"rgb",mock:"@rgb"},{name:"hsl",mock:"@hsl"},{name:"",mock:"@integer"},{name:"",mock:"@paragraph"},{name:"",mock:"@sentence"},{name:"",mock:"@word"},{name:"",mock:"@title"},{name:"",mock:"@name"},{name:"",mock:"@first"},{name:"",mock:"@last"},{name:"",mock:"@region"},{name:"",mock:"@province"},{name:"",mock:"@city"},{name:" ()",mock:"@city(true)"},{name:"",mock:"@county"},{name:" ()",mock:"@county(true)"},{name:"",mock:"@zip"},{name:"",mock:'@upper("hello")'},{name:"",mock:'@lower("HELLO")'},{name:"",mock:"@pick(['a','b','c','d'])"},{name:"",mock:"@shuffle(['a','b','c','d'])"},{name:"",mock:"@protocol"},{name:"",mock:'@date("yyyy-MM-dd")'},{name:"",mock:'@date("yy-MM-dd")'},{name:"",mock:'@date("y-MM-dd")'},{name:"",mock:'@date("y-M-d")'},{name:"",mock:'@datetime("yyyy-MM-dd A HH:mm:ss")'},{name:"",mock:'@datetime("yy-MM-dd a HH:mm:ss")'},{name:"",mock:'@datetime("y-MM-dd HH:mm:ss")'},{name:"",mock:'@now("year")'},{name:"",mock:'@now("month")'},{name:"",mock:'@now("week")'},{name:"",mock:'@now("day")'},{name:"",mock:'@now("hour")'},{name:"",mock:'@now("minute")'},{name:"",mock:'@now("second")'},{name:"",mock:'@image("200x100")'},{name:"",mock:"@image('200x100', '#FF6600')"},{name:"",mock:"@image('200x100', '#4A7BF7', 'Hello')"},{name:"",mock:"@image('200x100', '#50B347', '#FFF', 'Mock.js')"},{name:"",mock:"@image('200x100', '#894FC4', '#FFF', 'png', '!')"},{name:"data",mock:'@dataImage("200x100")'},{name:"data",mock:"@dataImage('200x100', 'Hello Mock.js!')"},{name:"data",mock:"@dataImage('200x100', 'Hello Mock.js!', '#CCC')"},{name:"",mock:"@boolean(true)"},{name:"",mock:"@boolean(false)"},{name:"",mock:"@boolean(1, 9, true)"},{name:"",mock:"@integer(10000)"},{name:"",mock:"@integer(60, 100)"},{name:"",mock:"@float(0)"},{name:"",mock:"@float(60, 100)"},{name:"",mock:"@float(60, 100, 3)"},{name:"",mock:"@float(60, 100, 3, 5)"},{name:"",mock:'@string("lower")'},{name:"",mock:'@string("upper")'},{name:"",mock:'@string("number")'},{name:"",mock:'@string("symbol")'},{name:"",mock:'@string("aeiou")'},{name:"",mock:"@string(7, 10)"},{name:"",mock:"@string('lower', 1, 3)"},{name:"",mock:"@string('upper', 1, 3)"},{name:"",mock:"@string('number', 1, 3)"},{name:"",mock:"@string('symbol', 1, 3)"},{name:"",mock:'@character("lower")'},{name:"",mock:'@character("upper")'},{name:"",mock:'@character("number")'},{name:"",mock:'@character("symbol")'},{name:"",mock:'@character("aeiou")'}];var b=i(411902);let w="c-json-schema-editor-delicate-schema-node-mock-select";function S(){return v().useMemo(()=>(0,n.oE)([x,A,j]).map(e=>({value:e.mock,label:(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("div",{className:"truncate",style:{maxWidth:270,marginRight:30},children:[e.mock," "]}),(0,a.jsxs)("div",{children:[e.name," "]})]})})),[])}function C(e,t){return -1!==t.value.toLowerCase().indexOf(`${e}`.toLowerCase())}function I(e){let{schema:t,className:i,indent:n}=e,o=e.disabled||(0,y.Hq)(t)||void 0===e.prefix,{actions:x}=(0,h.useContext)(g.aA),A=(0,g.qQ)(n),j=(0,r.bq)(),I=S(),N=e.prefix?()=>{j.show(b.A,{keys:e.prefix,title:(0,f.a)({id:"mock"}),editingDescriptionType:y.EW,editingDescriptionValue:t[y.EW]||"",moduleId:e.moduleId})}:void 0,k=t[y.EW]||"",T=v().useRef(k),[,M]=v().useState({});v().useMemo(()=>{T.current=k},[k]);let[E,_]=(0,h.useState)(!1),F=e.prefix?t=>{if(k===t)return;let i=[...e.prefix,y.EW];x.changeValueAction({key:i,value:null!=t?t:""})}:()=>{},[D,R]=v().useState(!1),O=(0,s.A)(e=>{T.current=e,M({})}),P=d()(w,i),L=`${w}__main`,$=`${w}__popover`,B=`${L}__input`,z=`${L}__btn`,U=`${L}__dropdown`,H=(0,l.A)({visible:A&&E&&!o,delay:300}),V=(0,a.jsxs)("div",{className:L,children:[(0,a.jsx)(c.A,{ref:H,className:d()({[B]:!0,[`${B}__isSimple`]:A,[`${B}--disabled`]:o}),dropdownMatchSelectWidth:!1,dropdownClassName:U,placement:"bottomRight",options:I,placeholder:(0,f.a)({id:"mock"}),value:T.current,onChange:O,disabled:o,filterOption:!!T.current&&C,size:"small",onFocus:()=>R(!0),onBlur:()=>{R(!1),F(T.current)}}),!o&&(0,a.jsx)(m.A,{type:"icon-operate-expand-small",className:z,onClick:e=>{e.stopPropagation(),null==N||N(),_(!1)}})]});return(0,a.jsxs)("div",{className:d()(P,{[`${w}--isFocus`]:D,[`${w}--simple`]:A,[`${w}--simple--hasValue`]:A&&!!T.current}),children:[!A&&V,A&&(0,a.jsx)(u.A,{overlayClassName:$,placement:"topRight",content:V,trigger:"click",open:E,onOpenChange:_,destroyTooltipOnHide:!0,getPopupContainer:e=>{var t;return null!=(t=null==e?void 0:e.parentElement)?t:e},children:(0,a.jsx)(p.A,{type:"text",theme:"secondary",size:"small",style:{color:"inherit"},icon:(0,a.jsx)(m.A,{type:"icon-mcok",size:15})})})]})}},586708:function(e,t,i){"use strict";i.d(t,{A:()=>I});var a=i(838e3),n=i(751527),l=i(200384),r=i(533066),s=i(168062),o=i(140049),d=i(891173),c=i(838487),u=i.n(c),p=i(929463),m=i(202130),h=i(398380),v=i(641486),f=i.n(v),g=i(704128),y=i(28594),x=i(594709),A=i(554692);let j="c-json-schema-editor-delicate-json-schema-check-box",b=e=>{let{style:t,className:i,checked:n,onChange:l,disabled:r,tooltip:s,iconType:o}=e,d=u()(j,i),c=`${j}__text`,p=(0,a.jsx)("div",{className:u()({[d]:!0,[`${j}--checked`]:n,[`${j}--disabled`]:r}),style:t,onClick:()=>{r||null==l||l(!n)},children:(0,a.jsx)(x.A,{type:o,className:c})});return s?(0,a.jsx)(A.A,{title:s,children:p}):p};var w=i(674984);let S="c-json-schema-editor-delicate-schema-node-schema-type-select";function C(e){var t,i,c,x,A,j;let{isHiddenNullable:w,getCustomAdvancedSettingsShow:C,style:I,schema:N,prefix:k,className:T,required:M,onSelect:E,typeSelectRender:_,getRequiredClassName:F,getNullableClassName:D,getMoreTypeClassName:R,disabledRequiredTooltip:O,indent:P,moduleId:L}=e,$=f().useMemo(()=>null!=k?k:[],[k]),{JsonSchemaStandard2AppJsonSchema:B,isNullable:z}=(0,d.r)(),{actions:U,customDataSchemaMap:H={}}=(0,v.useContext)(l.aA),V=(0,l.qQ)(P),[K,q]=f().useState(()=>({visible:!1,mode:"simple"})),G=(0,s.b)(),W=(0,o.A)(async(e,t)=>{let i=e,a=$;try{if(i=B(e,{enableXAppEnum:!0,enableXAppMock:!0,enableMockjsAutoTransformFakerjs:G}),!await (0,g.qj)(i))throw Error("jsonSchemaValidator fail.")}catch(e){p.Ay.error((0,n.a)({id:"jsonSchemaValidationFail"}));return}if("other"!==(0,g.Cz)(i)&&!t){let e=(0,g.JA)(i,N,$);i=e.schema,a=e.prefix}0===a.length?U.changeEditorSchemaAction({value:i}):U.changeValueAction({key:a,value:B(i,{enableXAppEnum:!0,enableXAppMock:!0,enableMockjsAutoTransformFakerjs:G})})}),J=(0,o.A)(e=>{let t,{type:i}=N,a=(0,g.Cz)(N);if("null"!==a)if("ref"!==a)"string"==typeof i?t=[i]:Array.isArray(i)&&(t=[...i]),Array.isArray(t)&&(e&&!t.includes("null")?t=[...t,"null"]:!e&&t.includes("null")&&(t=t.filter(e=>"null"!==e)),t.length<=1&&(t=t[0])),W({...N,type:t});else{let t=(0,g.cX)(N);if(e)W({anyOf:[N,{type:"null"}]});else{var n,l,r;let e=null!=(r=null==(n=null!=(l=N.anyOf)?l:N.oneOf)?void 0:n[0])?r:{...N,$ref:t};e.allOf&&delete e.allOf,e.oneOf&&delete e.oneOf,e.anyOf&&delete e.anyOf,W(e)}}}),Y=(0,g.Cz)(N),Z=(0,g.Bn)(N),Q=z(N),X=N.format,ee=void 0===$||e.disabled||["any","null"].includes(Y)||Z,et=f().useMemo(()=>{let e=[];if("ref"===Y){let t;e=["ref",(t=H[Number(((0,g.cX)(N)||"").replace("#/definitions/",""))],(null==t?void 0:t.displayName)||(null==t?void 0:t.name)||"ref")]}else e=Z?["advanced",Y]:[Y||"object"];return e},[H,Z,Y,N]),ei=u()(S,T),ea=`${S}__popover`,en=`${S}__typeSelect`,el=`${S}__more-type`,er=`${S}__more-type--visible`,es=`${S}__required`,eo=`${S}__nullable`,ed=e.disabled||(null==(t=e.prefix)?void 0:t.length)===void 0,ec=null!=(i=null==_?void 0:_())?i:(0,a.jsx)("div",{className:u()({[en]:!0,[`${en}--disabled`]:ed}),children:(0,a.jsxs)("span",{className:(0,r.U)("ref"===Y?"$ref":Y),onClick:()=>q(e=>e.visible?e:{visible:!0,mode:["oneOf","anyOf","allOf","ref","other"].includes(Y)?"full":"simple"}),children:[(0,a.jsx)("span",{title:et[et.length-1],children:et[et.length-1]}),X&&(0,a.jsx)("span",{title:X,children:`<${X}>`})]})}),eu=e=>e.some(e=>e in N),ep=!!(Z||"deprecated"in N&&!0===N.deprecated||eu(["xml"]))||("string"===Y?eu(["enum","const","format","writeOnly","readOnly","minLength","maxLength","default","pattern","examples","contentMediaType","contentEncoding","contentSchema"]):"integer"===Y||"number"===Y?eu(["enum","const","format","writeOnly","readOnly","minimum","maximum","multipleOf","exclusiveMaximum","exclusiveMinimum","default","examples"]):"boolean"===Y?eu(["writeOnly","readOnly","default"]):"array"===Y?eu(["minItems","maxItems","uniqueItems","writeOnly","readOnly"]):"object"===Y&&eu(["minProperties","maxProperties","writeOnly","readOnly","additionalProperties"])),em=(0,v.useMemo)(()=>{let t=[{key:"REQUIRED",value:e.required},{key:"NULLABLE",value:Q},{key:"ADVANCE_SETTING",value:ep}];return(0,h.orderBy)(t,["value"],["desc"]).reduce((e,t,i)=>{let{key:a}=t;return e[a]=i+1,e},{})},[ep,Q,e.required]);return(0,a.jsxs)("div",{className:u()(ei,{[`${S}--simple`]:V}),style:I,children:[(0,a.jsx)(a.Fragment,{children:!ed&&(0,a.jsx)(m.A,{visible:K.visible,onVisibleChange:e=>{e||q(e=>({...e,visible:!1}))},trigger:"click",placement:"right",overlayClassName:ea,destroyTooltipOnHide:!0,overlayStyle:{zIndex:"var(--ui-zindex-modal)"},content:(0,a.jsx)(y.A,{mode:K.mode,value:e.schema,onChange:W,onSelect:E,itemKey:$,requiredDisabled:e.disabledRequired,requiredChecked:M,onRequiredChange:e.featureChangeRequire,nullableDisabled:ee,nullableChecked:Q,onNullableChange:J,isHiddenRequired:e.isHiddenRequired,moduleId:L,onChangeMode:e=>{q(t=>({visible:t.visible,mode:e}))},schemaTypeSelectOptions:e.schemaTypeSelectOptions,onClose:()=>{q(e=>({...e,visible:!1}))}}),children:ec})}),(0,a.jsx)(a.Fragment,{children:ed&&ec}),(null!=(c=null==C?void 0:C(ed,Z))?c:!ed&&!Z)&&(0,a.jsx)(b,{className:u()("mr-px",{[er]:ep&&!R,[el]:!ep&&!R,[`${S}__more-type--custom`]:ep&&R,[null!=(x=null==R?void 0:R(ep))?x:""]:R}),onChange:()=>{q(e=>e.visible?e:{visible:!0,mode:"full"})},iconType:"icon-settings-03",tooltip:(0,n.a)({id:"advancedSettings"}),style:{order:R?void 0:em.ADVANCE_SETTING,color:R?"inherit":void 0}}),!e.isHiddenRequired&&(0,a.jsx)(b,{className:u()("mr-px",{[es]:!F,[`${es}--visible`]:e.required&&!F,[null!=(A=null==F?void 0:F(!!e.required))?A:""]:F}),disabled:e.disabledRequired,onChange:e.featureChangeRequire,checked:e.required,tooltip:null!=O?O:(0,n.a)({id:"required"}),iconType:"icon-must",style:{order:F?void 0:em.REQUIRED}}),!w&&(0,a.jsx)(b,{className:u()("mr-px",{[eo]:!D,[`${eo}--visible`]:Q&&!D,[null!=(j=null==D?void 0:D(Q))?j:""]:D}),style:{order:D?void 0:em.NULLABLE},tooltip:(0,n.a)({id:"nullable"}),disabled:ee,checked:Q,onChange:J,iconType:"icon-null"})]})}function I(e){return(0,a.jsx)(w.hL,{children:(0,a.jsx)(C,{...e})})}},77552:function(e,t,i){"use strict";i.d(t,{UM:()=>s,m4:()=>o});var a=i(838e3),n=i(910155),l=i(641486);let{ContextProvider:r,useContextStore:s}=(0,n.B)(),o=(0,l.memo)(e=>{let{children:t,value:i}=e,n=s(e=>e),o=(0,l.useMemo)(()=>({parent:n,name:i.name,data:i.data}),[n,i.name,i.data]);return(0,a.jsx)(r,{value:o,children:t})})},250688:function(e,t,i){"use strict";i.d(t,{A:()=>C});var a=i(838e3),n=i(140049),l=i(641486),r=i.n(l),s=i(751527),o=i(200384),d=i(119522),c=i(838487),u=i.n(c),p=i(115864),m=i(876591);let h=e=>{let t=window.getSelection(),i=document.createRange();i.selectNodeContents(e),null==t||t.removeAllRanges(),null==t||t.addRange(i)},v=/(\f|\n|\r|\t|\v)?/g,f=RegExp(String.fromCharCode(160),"g"),g=e=>e.replace(v,"").replace(f," "),y=e=>{var t;return g(null!=(t=e.textContent)?t:"")},x=(e,t)=>{t.textContent=g(e)},A=(e,t)=>{y(t)!==g(e)&&x(e,t)},j=r().forwardRef((e,t)=>{var i;let{wrapperClassName:s,wrapperStyle:o,prefixCls:d,size:c,disabled:v,value:f,onChange:g,className:j,readOnly:b,onFocus:w,onBlur:S,revertOnEmptyValue:C,placeholder:I,autoFocus:N,suffix:k,...T}=e,M=null==f?void 0:f.replace(/ /g,"\xa0"),{getPrefixCls:E,direction:_}=(0,l.useContext)(p.QO),F=E("input",d),D=r().useContext(m.A),R=c||D,O=(0,l.useRef)(null),P=(0,l.useRef)(null),[L,$]=(0,l.useState)(()=>!!I&&!M),B=(0,l.useCallback)(e=>{let t=e;O.current&&t&&(t=O.current),t&&$(!!I&&!y(t))},[I]);(0,l.useEffect)(()=>{$(!!I&&!M)},[I,M]),(0,l.useLayoutEffect)(()=>{if(O.current&&P.current){let e=window.getComputedStyle(O.current);P.current.style.fontSize=e.fontSize,P.current.style.fontFamily=e.fontFamily,P.current.style.fontWeight=e.fontWeight,P.current.style.fontStyle=e.fontStyle,P.current.style.letterSpacing=e.letterSpacing,P.current.style.textTransform=e.textTransform}},[]);let[z,U]=(0,l.useState)(0);(0,l.useLayoutEffect)(()=>{if(L&&P.current){var e;U(null!=(e=window.getComputedStyle(P.current).width)?e:0)}},[L]);let H=(0,n.A)(e=>{M!==e&&(null==g||g(e))}),V=(0,l.useRef)(null!=M?M:"");V.current=null!=M?M:"",(0,l.useLayoutEffect)(()=>{let e=O.current;e&&(V.current=null!=M?M:"",x(V.current,e))},[H,M]);let K=(0,l.useCallback)(e=>{let t=y(e),i=C&&""===t;console.log("---2",V.current,e,t,i),i?A(V.current,e):(V.current=t,A(V.current,e),H(t)),B(e)},[H,B,C]),q=(0,n.A)(e=>{let t=e.currentTarget;if(window.navigator.userAgent.includes("Macintosh")){if(e.metaKey&&65===e.keyCode)return h(t),!0}else if(e.ctrlKey&&65===e.keyCode)return h(t),!0;return!1}),G=(0,n.A)(e=>{if(13===e.keyCode&&e.currentTarget instanceof HTMLDivElement){let t;t=window.getSelection(),null==t||t.removeAllRanges(),K(e.currentTarget)}}),W=(0,n.A)(e=>{q(e)||G(e)}),J=(0,n.A)(e=>{B(e.currentTarget)}),[Y,Z]=(0,l.useState)(null!=N&&N),Q=(0,n.A)(e=>{B(e.currentTarget),null==w||w(e),e.currentTarget.addEventListener("keydown",W),e.currentTarget.addEventListener("input",J),Z(!0)}),X=(0,n.A)(e=>{let t=y(e),i=C&&""===t;console.log("---3",V.current,e,t,i),i?A(V.current,e):(V.current=t,H(t),A(t,e)),B(e)}),ee=(0,n.A)(e=>{e.currentTarget.removeEventListener("keydown",W),e.currentTarget.removeEventListener("input",J),null==S||S(e),X(e.currentTarget),Z(!1)});return(0,l.useLayoutEffect)(()=>{if(O.current&&N){var e;let t,i;O.current.focus(),O.current.autofocus=!0;e=O.current,t=window.getSelection(),i=document.createRange(),i.selectNodeContents(e),null==t||t.removeAllRanges(),null==t||t.addRange(i),y(e).length&&(i.setStart(e,1),i.setEnd(e,1))}},[N]),(0,a.jsxs)("div",{className:u()("auto-width-input-container",Y&&"auto-width-input-container--focused",s),style:o,children:[(0,a.jsx)("div",{ref:(i=[O,t],e=>{i.forEach(t=>{"function"==typeof t?t(e):null!=t&&(t.current=e)})}),...T,suppressContentEditableWarning:!0,contentEditable:!(v||b),onBlur:ee,onFocus:Q,className:u()({[`${F}-sm`]:"small"===R,[`${F}-lg`]:"large"===R,[`${F}-rtl`]:"rtl"===_,[`${F}-borderless`]:!0,[`${F}-disabled`]:v},j,F,"ui-app-input__underline"),disabled:v,style:L?{...T.style,width:z}:{...T.style,minWidth:z},onInput:e=>{var t;null==(t=T.onInput)||t.call(T,e),X(e.target)}}),L?(0,a.jsx)("div",{ref:P,className:"ui-app-input__underline__placeholder",children:I}):null,k&&(0,a.jsx)("div",{className:"ui-input-suffix",children:k})]})});j.displayName="AppUnderLineInput";let b="c-json-schema-editor-delicate-schema-root-xml-header",w=e=>{let{style:t,className:i,value:n,onChange:l}=e,[s,o]=r().useState(null),d=u()(b,i),c=`${b}__main`,p=`${c}__input`;return(0,a.jsx)("div",{className:d,style:t,children:(0,a.jsx)("div",{className:u()({[c]:!0,[`${c}--editing`]:!0===s,[`${c}--noEditing`]:!1===s}),children:(0,a.jsx)(j,{wrapperClassName:p,value:n,onChange:e=>l(e),autoFocus:!!s,onBlur:()=>{o(!1)}})})})},S='<?xml version="1.0" encoding="UTF-8"?>',C=r().memo(e=>{var t;let{data:i,schemaId:l,sortable:c}=e,u=r().useRef(""),[p,m]=r().useState(!1),{contentType:h,actions:v,containerSize:f}=r().useContext(o.aA),g=(0,n.A)(e=>{m(void 0===e?!p:e)}),y=(0,n.A)(e=>{let t=e;t===S&&(t=void 0);let a={...i.xml,"x-header":t};v.changeValueAction({key:["xml"],value:a})});return(0,a.jsxs)(a.Fragment,{children:["xml"===h&&(0,a.jsx)(w,{value:(null==i||null==(t=i.xml)?void 0:t["x-header"])===void 0?S:i.xml["x-header"],onChange:y}),(0,a.jsx)(d.A,{schemaId:[l].filter(Boolean),fieldName:"simple"===f?"":(0,s.a)({id:"rootNode"}),lazyData:e=>e,prefix:[],indent:0,required:p,featureChangeRequire:e=>{v.requireAllAction({required:e}),g(e)},featureChangeType:!0,featureChangeMock:!0,featureChangeTitle:!0,featureChangeDes:!0,featureAdvSetting:!0,featureSortable:c,featureExtractNode:"object"===i.type||!!i.$ref,nameType:"tag",latestNewSchemaId:u})]})})},411902:function(e,t,i){"use strict";i.d(t,{A:()=>C});var a=i(838e3),n=i(17602),l=i(510455),r=i(80859),s=i(143193),o=i(648500),d=i(820182);let c=(0,i(880285).A)(d.A.TextArea);var u=i(704128),p=i(483482),m=i(276129),h=i(689368),v=i(941929),f=i(764007),g=i(838062),y=i(671466),x=i(641486),A=i.n(x),j=i(751527),b=i(200384),w=i(47371);let{TextArea:S}=d.A;function C(e){let t=(0,h.Ay)(e=>{var t;return null==(t=e.projectSetting.projectSettingData)?void 0:t.mockSettings.engine}),i=(0,w.mX)(),[d,C]=(0,v.A)(e,{defaultValue:!1,valuePropName:"visible"}),{externalURL:I}=(0,h.Ay)(e=>{let{externalURL:t}=e;return{externalURL:t}}),[N,k]=(0,x.useState)(e.editingDescriptionValue);(0,x.useEffect)(()=>{k(e.editingDescriptionValue)},[e.editingDescriptionValue]);let T=(0,x.useContext)(b.aA),M=e.editingDescriptionType,E=e.onCancel?e.onCancel:()=>{C(!1)},_=()=>{let{editingDescriptionType:t}=e,i=e.keys;T.actions.changeValueAction({key:[...i,t],value:N}),E()},F=e=>{k(e)};(0,m.B7)("DescriptionModal","save",_);let{editorRef:D,saveFocusPos:R,insertOnLastFocusOrSelection:O}=(0,o.S)(),{showTemplatePopover:P,props:L}=(0,l.N)({onInsert:O}),[$,B]=A().useState([]);return A().useEffect(()=>{let e=-1;return d&&(e=window.setTimeout(()=>{B([{key:"templating",placement:"topRight",showTrigger:"hover",noStyle:!0,render:e=>{var t,i;return(0,a.jsxs)("div",{className:"flex items-center w-full",children:[(0,a.jsx)("div",{className:"flex-1"}),(0,a.jsx)("div",{className:"ml-1",children:(0,a.jsx)(r.A,{collapse:!1,handleShowInsertModal:e=>{R(),P(e.target)}})}),(0,a.jsx)("div",{className:"ml-1",children:s.Si.wrap(e.wrap,(null==(i=D.current)||null==(t=i.editor)?void 0:t.getOption(125))==="on")})]})}}])},100)),()=>{window.clearTimeout(e)}},[d]),(0,a.jsxs)(f.Ay,{title:e.title||(0,j.a)({id:"description"===M?"description":"mock"}),maskClosable:!1,visible:d,onOk:_,onCancel:E,okText:(0,j.a)({id:"ok"}),cancelText:(0,j.a)({id:"cancel"}),size:"720",destroyOnClose:!0,children:["description"===M&&(0,a.jsx)(c,{defaultValue:N,placeholder:(0,j.a)({id:"support_Markdown"}),onChange:F,autoSize:{minRows:3,maxRows:10}}),M===u.EW&&"mockjs"===t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.A,{options:i,filterOption:w.jx,style:{width:"100%"},defaultValue:N||"",onChange:F,children:(0,a.jsx)(S,{placeholder:(0,j.a)({id:M}),autoSize:{minRows:6,maxRows:10}})}),(0,a.jsx)("div",{style:{marginTop:12},children:(0,a.jsxs)("a",{onClick:()=>(0,p.kK)(I.help.mockRules),children:[(0,a.jsx)(y.A,{type:"icon-help-o",className:"opacity-25"}),"\xa0",(0,j.a)({id:"mockTips"})]})})]}),M===u.EW&&"fakerjs"===t&&(0,a.jsxs)("div",{style:{height:300},children:[(0,a.jsx)(s.Ay,{ref:D,language:"text",value:N||"",onChange:F,actions:$,width:"100%",topRightCol:24,height:"100%",options:{renderValidationDecorations:"off"}}),(0,a.jsx)(n.A,{...L,moduleId:e.moduleId})]})]})}},891173:function(e,t,i){"use strict";i.d(t,{r:()=>n});var a=i(674984);function n(){let{jsonSchemaUtils:e}=(0,a.CA)();return e}},200384:function(e,t,i){"use strict";i.d(t,{Ay:()=>k,Gv:()=>C,Vx:()=>S,aA:()=>I,qQ:()=>M,yr:()=>T});var a=i(838e3),n=i(775026),l=i(169508),r=i(698050),s=i(168062),o=i(689368),d=i(142508),c=i(202182),u=i(252396),p=i(674984),m=i(506598),h=i(641486),v=i.n(h),f=i(618487),g=i(891173),y=i(16718),x=i(704128);let A=["allOf","oneOf","anyOf"];function j(e){return A.includes(e)}let{produce:b}=new u.$N({autoFreeze:!1}),w={message:null,data:{title:"",type:"object",properties:{},required:[]},sorting:!1,code:"",saveAsExampleStatus:f.SaveAsExampleStatus.HIDDEN},S={setData(e,t){t(e)},setState(e,t){t(e.data)},changeEditorSchemaAction(e,t){var i;let a,n=null!=(i=(0,o.DA)(e=>{var t;return null==(t=e.projectSetting.projectSettingData)?void 0:t.mockSettings.engine}))?i:l.wC;try{a="string"==typeof t.value?JSON.parse(t.value):t.value}catch(e){a=t.value}(0,y.A)(a),void 0===e&&(e={...w});let{jsonSchemaUtils:{JsonSchemaStandard2AppJsonSchema:r}}=m.utilsContainer.getItemsSync(e=>[e.jsonSchemaUtils]);e.data=r(a,{enableXAppEnum:!0,enableXAppMock:!0,enableMockjsAutoTransformFakerjs:"fakerjs"===n})},changeCodeAction(e,t){e.code=t.code;let i=t.saveAsExampleStatus;e.saveAsExampleStatus="boolean"==typeof i?i?f.SaveAsExampleStatus.CHECKED:f.SaveAsExampleStatus.UNCHECKED:i},changeValueAction(e,t){let i=t.key;t.value?(0,x.XO)(e.data,i,t.value):(0,x.Wv)(e.data,i)},changeTypeAction(e,t,i){let{value:a,key:n}=t,l=(0,x.Cz)(a),r=i.data,s=(0,x.bQ)(r,n),o=(0,x.Cz)(s),d={};j(l)&&j(o)&&(a[l]=s[o]),s.title&&(d.title=s.title),s.description&&(d.description=s.description),s[x.EW]&&(d[x.EW]=s[x.EW]);let c={};if(l&&"other"!==l&&"ref"!==l&&"not"!==l){var u;c=(null==(u=x.jZ[l])?void 0:u.call(x.jZ))||{}}let p={...c,...d,...a},m=["data",...n];(0,x.XO)(e,m,p)},requireAllAction(e,t){(0,x.dg)(e.data,t.required)}};function C(e){return"object"===e.type||!!Array.isArray(e.type)&&e.type.includes("object")}let I=(0,h.createContext)({data:w});function N(e){var t,i;let{showMock:l,showFaker:u,customSchemaDefinitions:p,customSchemaTreeList:m,mainBranchSchemaTreeList:x,mainBranch:A,currentBranch:j,enableFallback:C,customDataSchemaMap:N,contentType:k,children:T,dataSchemaDefinitions:M,value:E,onChange:_,sortable:F,rootContainerRef:D,showTitleInTable:R,containerSize:O,hiddenXmlOptions:P,hiddenContentSchemaOptions:L,importJsonDefaultValue:$,saveAsExampleStatus:B,sceneId:z,useTemplateParameter:U,templateParameters:H,readonly:V,moduleId:K,defaultExpanded:q}=e,{JsonSchemaStandard2AppJsonSchema:G}=(0,g.r)(),W=(0,s.b)(),[J,Y]=(0,h.useState)(()=>{let e={...w,data:E||w.data};return(0,y.A)(e.data),e.data=G(e.data,{enableXAppEnum:!0,enableXAppMock:!0,enableMockjsAutoTransformFakerjs:W}),e}),Z=(0,c.A)(()=>e=>{if(e!==J.data){let t={...w,data:e||w.data};return(0,y.A)(t.data),t.data=G(t.data,{enableXAppEnum:!0,enableXAppMock:!0,enableMockjsAutoTransformFakerjs:W}),t}return J},[J]);(0,h.useEffect)(()=>{Y(()=>Z(E)),Z(E)},[E]);let Q=(0,c.A)(()=>Object.keys(S).reduce((e,t)=>(e[t]=e=>{Y(i=>{let a=b(i,a=>{S[t](a,e,i)});return a!==i&&(null==_||_(a.data,{code:a.code,saveAsExample:a.saveAsExampleStatus===f.SaveAsExampleStatus.CHECKED})),a})},e),{}),[_]),X=(0,o.Ay)(e=>{let{projectSetting:t}=e;return t.projectSettingData}),ee=v().useMemo(()=>{var e,t;return(0,r.gQ)((null==X||null==(t=X.mockSettings)||null==(e=t.fakerjs)?void 0:e.locale)||(null==X?void 0:X.language)||d.AllFakerLocale.zh_CN)},[null==X||null==(i=X.mockSettings)||null==(t=i.fakerjs)?void 0:t.locale,null==X?void 0:X.language]),et=v().useMemo(()=>{var e;let t=d.TemplateSchemaConfig.getTemplateSchemaConfigByKind(d.TemplateKind.DynamicValue,{locale:(0,f.getLocale)()});return null!=(e=null==t?void 0:t.templateGroups.map(e=>(0,n.om)({name:e.groupName,value:e.groupName,hint:e.hint,children:e.templates.filter(e=>!(e.hidden||Array.isArray(e.displayOnlyInFakerLocale)&&!e.displayOnlyInFakerLocale.includes(ee)||Array.isArray(e.hideInFakerLocale)&&e.hideInFakerLocale.includes(ee))&&!0).map(e=>{var t;return(0,n.om)({name:e.name,value:`{{${null!=(t=e.exampleCode)?t:e.callee}}}`,hint:e.hint,description:e.description,searchKeywords:e.searchKeywords,leftNameLeafStyle:{fontWeight:400}})})})))?e:[]},[ee]),ei=(0,h.useMemo)(()=>({data:J,actions:Q,showMock:l,showFaker:u,customSchemaTreeList:m,mainBranchSchemaTreeList:x,mainBranch:A,currentBranch:j,enableFallback:C,customDataSchemaMap:N,customSchemaDefinitions:p,contentType:k,dataSchemaDefinitions:M,sortable:F,rootContainerRef:D,showTitleInTable:R,containerSize:O,hiddenXmlOptions:P,hiddenContentSchemaOptions:L,importJsonDefaultValue:$,saveAsExampleStatus:B,sceneId:z,useTemplateParameter:U,templateParameters:H,readonly:V,moduleId:K,fakerOptions:et,defaultExpanded:q}),[J,Q,l,u,m,x,A,C,j,N,p,k,M,F,D,R,O,P,L,$,B,z,U,H,V,K,et,q]);return(0,a.jsx)(I.Provider,{value:ei,children:T})}function k(e){return(0,a.jsx)(p.hL,{children:(0,a.jsx)(N,{...e})})}let T=(0,h.createContext)({});function M(e){let{containerSize:t}=(0,h.useContext)(I);return"simple"===t||e>10}},533066:function(e,t,i){"use strict";i.d(t,{U:()=>n,q:()=>a});let a={object:"text-blue-6",any:"text-blue-5",array:"text-green-6",allOf:"text-orange-6",anyOf:"text-orange-6",oneOf:"text-orange-6",null:"text-orange-6",integer:"text-magenta-6",number:"text-magenta-6",boolean:"text-magenta-5",binary:"text-green-5",string:"text-green-7",$ref:"text-purple-6",file:"text-purple-6"};function n(e){var t;return null!=(t=a[e])?t:"text-blue-6"}},16718:function(e,t,i){"use strict";function a(e){!e.type&&e.properties&&"object"==typeof e.properties&&(e.type="object")}function n(e){try{if(!e||e.type||e.properties||e.$ref||e.oneOf||e.anyOf||e.allOf||e.not||(e.type="string"),a(e),"object"===e.type)e.properties||(e.properties={}),function(e){for(let t in e)a(e[t]),("array"===e[t].type||"object"===e[t].type)&&n(e[t])}(e.properties);else{if("array"!==e.type)return e;e.items||(e.items={type:"string"}),n(e.items)}}catch(e){}}i.d(t,{A:()=>n})},704128:function(e,t,i){"use strict";let a;i.d(t,{Ac:()=>b,Ay:()=>U,Bn:()=>F,Cz:()=>y,DA:()=>C,EW:()=>$,HK:()=>P,Hq:()=>D,JA:()=>H,MR:()=>x,Wv:()=>T,XO:()=>k,aG:()=>A,bQ:()=>N,cG:()=>R,cX:()=>function e(t){let{$ref:i,anyOf:a,oneOf:n}=t;if(i)return i;if(Array.isArray(a)){let t;return a.forEach(i=>{if("object"==typeof i){let a=e(i);a&&(t=a)}}),t}if(Array.isArray(n)){let t;return n.forEach(i=>{if("object"==typeof i){let a=e(i);a&&(t=a)}}),t}},dg:()=>E,fS:()=>V,gK:()=>w,iB:()=>L,jZ:()=>g,jk:()=>B,o7:()=>S,qT:()=>_,qj:()=>f,sg:()=>I,tk:()=>O,uR:()=>v,vM:()=>j});var n=i(471504),l=i(506598),r=i(252396),s=i(398380),o=i(641486),d=i.n(o),c=i(129867),u=i(169508),p=i(751527);let{produce:m}=new r.$N({autoFreeze:!1}),h=()=>{let{jsonSchemaUtils:e}=l.utilsContainer.getItemsSync(e=>[e.jsonSchemaUtils]);return e},v=c.Z0,f=async function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];let{jsonSchemaValidator:a}=await l.utilsContainer.items.jsonSchemaValidateUtils;return a(...t)},g=new Proxy({},{get(e,t){let{defaultSchema:i}=h();return i[t]}}),y=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];let{getMainType:a}=h();return a(...t)},x=[["date-time","date","time","duration","email","idn-email"],["hostname","idn-hostname","ipv4","ipv6","uri","uri-reference","iri","iri-reference","uuid","uri-template","json-pointer","relative-json-pointer"],["regex","binary","byte","password","char"]],A=[["float","double"],["float32","float64"]],j=[["int32","int64"],["long","uint32","uint64","uint","ulong","sint32","sint64","fixed32","fixed64","sfixed32","sfixed64"],["bignum","fixnum"]],b=["string","integer","boolean","array","object","number","null"],w=[{label:(0,p.a)({id:"refsModel"}),value:"ref"},{label:"string",value:"string",type:"primitive"},{label:"integer",value:"integer",type:"primitive"},{label:"boolean",value:"boolean",type:"primitive"},{label:"array",value:"array",type:"primitive"},{label:"object",value:"object",type:"primitive"},{label:"number",value:"number",type:"primitive"},{label:"null",value:"null",type:"primitive"},{label:"any",value:"any",type:"primitive"},{label:(0,p.a)({id:"schemaComposition"}),value:"advanced"},{label:(0,p.a)({id:"customizeLabel"}),value:"other"}],S=[{label:(0,p.a)({id:"referenceGroup"}),options:[{label:d().createElement(d().Fragment,{},d().createElement(n.NZ,{style:{display:"inline-block"}}),(0,p.a)({id:"refsModel"})),value:"ref"}]},{label:(0,p.a)({id:"primitiveGroup"}),options:[{label:"string",value:"string"},{label:"integer",value:"integer"},{label:"boolean",value:"boolean"},{label:"array",value:"array"},{label:"object",value:"object"},{label:"number",value:"number"},{label:"null",value:"null"},{label:"any",value:"any"}]},{label:(0,p.a)({id:"advancedGroup"}),options:[{label:(0,p.a)({id:"schemaComposition"}),value:"advanced"},{label:(0,p.a)({id:"customizeLabel"}),value:"other"}]}],C=(e,t)=>{let i=[];return"ref"===e&&i.push({label:(0,p.a)({id:"referenceGroup"}),options:[{label:d().createElement(d().Fragment,{},d().createElement(n.NZ,{style:{display:"inline-block"}}),(0,p.a)({id:"refsModel"})),value:"ref"}]}),i.push({label:(0,p.a)({id:"primitiveGroup"}),options:t}),"advanced"===e&&i.push({label:(0,p.a)({id:"advancedGroup"}),options:[{label:(0,p.a)({id:"schemaComposition"}),value:"advanced"}]}),i},I=s.debounce;function N(e,t){let i=e;for(let e=0;e<t.length;e++)i=null==i?void 0:i[t[e]];return i}let k=function(e,t,i){let a=e;for(let e=0;e<t.length-1;e++)a=a[t[e]];a[t[t.length-1]]=i},T=function(e,t){let i=e;for(let e=0;e<t.length-1;e++)i=i[t[e]];delete i[t[t.length-1]]};function M(e){return Object.keys(e)}function E(e,t){if("object"===e.type)t?e.required=M(e.properties||{}):delete e.required,function(e,t){for(let i in e)("array"===e[i].type||"object"===e[i].type)&&E(e[i],t)}(e.properties,t);else{if("array"!==e.type)return e;E(e.items||{},t)}}function _(e){let{type:t}=e,{isNullableRef:i}=h();return Array.isArray(t)&&t.includes("null")&&!(0,s.isEqual)(t,b)||i(e)}function F(e){return["oneOf","anyOf","allOf","not","other"].includes(y(e))}function D(e){return!["string","integer","boolean","number"].includes(y(e))}let R=`x-${u.A3}-orders`,O=`x-${u.A3}`,P=`x-${u.A3}-refs`,L=`x-${u.A3}-overrides`,$=`x-${u.A3}-mock`,B=`x-${u.A3}-enum`,z=e=>{if("object"===e.type&&e.properties){let t=new Set;if(Object.keys(e.properties).forEach(i=>{let a=e.properties[i];void 0!==a["x-tmp-pending-properties"]?t.add(i):"object"===a.type&&z(a)}),t.forEach(t=>{delete e.properties[t]}),Array.isArray(e.required)&&(e.required=e.required.filter(e=>!t.has(e))),Array.isArray(e[R])){e[R]=e[R].filter(e=>!t.has(e));let{getActiveXAppOrder:i}=h();e[R]=i(e)}}},U={JSONPATH_JOIN_CHAR:".",debounce:I,getData:N,setData:k,deleteData:T,getFieldstitle:M,handleSchemaRequired:E,saveJsonSchemaState:e=>m(e,e=>{z(e)})};function H(e,t,i){var a;let n=y(e),l=y(t),r=["allOf","oneOf","anyOf"],s={};r.includes(n)&&r.includes(l)&&(e[n]=t[l]),t.title&&(s.title=t.title),t.description&&(s.description=t.description),t[$]&&(s[$]=t[$]);let o={...n&&(null==(a=g[n])?void 0:a.call(g))||{},...s,...e},d=[...i],c=e.deprecated;return!1===c?delete o.deprecated:void 0===c&&t.deprecated&&(o.deprecated=t.deprecated),{prefix:d,schema:o}}function V(e){return"string"==typeof e||null==e?e:e.target.value}a=0,()=>`field${a++}`},103058:function(e,t,i){"use strict";i.d(t,{A:()=>a});let a=(0,i(641486).createContext)({})},995829:function(e,t,i){"use strict";i.d(t,{A:()=>p});var a=i(526838),n=i(838e3);function l(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e===t)return!0;let a="object"!=typeof t||null===t;if("object"!=typeof e||null===e||a)return!1;let n=Object.keys(e),l=Object.keys(t);if(n.length!==l.length)return!1;for(let a of(i.push("form","data-__meta","data-__field"),n)){if(i.includes(a))continue;let n=e[a]===t[a];if(!t.hasOwnProperty(a)||!n)return!1}return!0}var r=i(138249),s=i(641486);let o="base-select-container-DFFEC7",d="base-select-option-ZIMrxT",c="base-select-option-label-ZFJnm_",{Option:u}=r.A;class p extends s.Component{shouldComponentUpdate(e,t){return function(e,t,i,a,n){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"value",s=[];if(n&&(s.push(r),n!==i[r]))return!0;let o=l(e,i,s),d=l(t,a);return!o||!d}(this.props,this.state,e,t)}render(){let e,{options:t,value:i,defaultValue:a,resetNotExistValue:l,...s}=this.props,p=[];t?p=t:this.state&&this.state.options&&(p=this.state.options),this.emptyValues.includes(i)?e=void 0:l&&void 0!==i&&!p.find(e=>e.value===i)?(e=void 0,this.onValueChange(e)):e=i;let m={};return this.selectProps.forEach(e=>{void 0!==s[e]&&(m[e]=s[e])}),(0,n.jsx)("div",{className:o,children:(0,n.jsx)(r.A,{...m,value:e,defaultValue:a,onChange:this.onValueChange,children:p.map(e=>(0,n.jsx)(u,{label:e.label,value:e.value,disabled:!0===e.disabled,className:d,children:(0,n.jsx)("div",{className:c,children:e.renderItem?e.renderItem():e.label})},e.value))})})}constructor(e){super(e),(0,a._)(this,"selectProps",["variant","style","className","allowClear","autoClearSearchValue","autoFocus","defaultActiveFirstOption","defaultValue","disabled","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownStyle","dropdownMenuStyle","filterOption","firstActiveValue","getPopupContainer","labelInValue","maxTagCount","maxTagTextLength","maxTagPlaceholder","tagRender","mode","notFoundContent","optionFilterProp","optionLabelProp","placeholder","showArrow","showSearch","size","suffixIcon","removeIcon","clearIcon","menuItemSelectedIcon","tokenSeparators","value","onBlur","onChange","onDeselect","onFocus","onInputKeyDown","onMouseEnter","onMouseLeave","onPopupScroll","onSearch","onSelect","defaultOpen","open","onDropdownVisibleChange","loading","bordered","placement"]),(0,a._)(this,"emptyValues",[]),(0,a._)(this,"onValueChange",(e,t)=>{this.props.onChange&&this.props.onChange(e,t)})}}},476136:function(e,t,i){"use strict";i.d(t,{A:()=>g});var a=i(838e3),n=i(140049),l=i(838487),r=i.n(l),s=i(764007),o=i(398380),d=i(641486),c=i(740565),u=i(949760);let p="header-Tc7qa4",m="title-amVCxG",h="back-ZewWBY",v="clickArea-k91Ejx";function f(e){let{title:t,canGoBack:i,onBack:n,closeIcon:l,onClose:r}=e;return(0,a.jsx)("div",{className:p,children:(0,a.jsx)(u.A,{className:i?v:void 0,onBack:i?n:void 0,onClose:r,renderLeft:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:m,children:t}),i?(0,a.jsx)("div",{className:h,children:(0,c.hw)({id:"back"})}):void 0]}),renderRight:l,onClick:i?n:void 0,type:"modal"})})}let g=e=>{let{activeKeys:t=[],items:i=[],className:l,onGoBack:c,...u}=e,p=(0,d.useMemo)(()=>i.filter(e=>t.includes(e.key)),[t,i]),m=(0,n.A)(()=>{t.length>1&&(null==c||c(t.slice(0,t.length-1)))}),h=(0,d.useMemo)(()=>{var t;let i=null==(t=(0,o.last)(p))?void 0:t.title;return(0,a.jsx)(f,{canGoBack:p.length>1,title:i,onBack:m,onClose:e.onCancel,closeIconBtnShape:"default",type:"modal",closeIconSize:"small"})},[m,p,e.onCancel]);return(0,a.jsx)(s.Ay,{...u,title:h,className:l,style:{"--ui-modal-header-padding":"0px"},closable:!1,children:p.map((e,t)=>(0,a.jsx)("div",{className:r()(e.className),hidden:t!==p.length-1,children:e.content},e.key))})}},323194:function(e,t,i){"use strict";i.d(t,{dG:()=>s,q5:()=>l});var a=i(398380),n=i(620148);let l=(e,t)=>t.op===e.op&&t.path===e.path&&(!("value"in e)||!("value"in t)||(0,a.isEqual)(t.value,e.value)),r=(e,t)=>t.op===e.op&&t.path===e.path;function s(e,t,i){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r,s=n.createPatch(e,i),o=n.createPatch(e,t);if(o.filter(e=>!s.find(t=>l(e,t))).length>0){let e=(0,a.cloneDeep)(i);return n.applyPatch(e,o.filter(e=>!s.find(t=>l(e,t)))),e}return t}},262514:function(e,t,i){"use strict";i.d(t,{Rp:()=>c,p7:()=>o});var a=i(641064),n=i(331418),l=i(140049),r=i(272164),s=i(641486);function o(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;return!!function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;if(!e)return null;let a=0;for(;e&&a<i;){if(t(e))return e;if(!e.parentElement)break;e=e.parentElement,a++}return null}(e,t,i)}let d={wait:100,auto:!0},c=function(e){var t,i;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d,{wait:c,auto:u}={...d,...o},p=null==(i=e.current)||null==(t=i.children)?void 0:t[0],[m,h]=(0,s.useState)(d.auto),v=m&&u,{height:f=0,width:g=0}=(0,a.A)((0,n.A)(p||null),{wait:c}),y=(0,l.A)(()=>{var t;0!==f&&0!==g&&v&&e.current&&(e.current.scrollTop=null==(t=e.current)?void 0:t.scrollHeight)}),{run:x}=(0,r.A)(()=>{e.current&&Math.ceil(e.current.scrollTop)>=e.current.scrollHeight-e.current.clientHeight?m||h(!0):m&&h(!1)},{wait:100,leading:!1,trailing:!0});return(0,s.useEffect)(()=>{v&&f>0&&y()},[v,y,f]),(0,s.useEffect)(()=>{let t=e.current;return null==t||t.addEventListener("wheel",x),()=>{null==t||t.removeEventListener("wheel",x)}},[x,e.current]),{scroll:y}}},81611:function(e,t,i){"use strict";i.d(t,{A:()=>r});var a=i(169508);let n={homeLink:a.pH,browserExtensionLink:`${a.g1}/app/web/browser-extension`,importOpenAPILink:`${a.g1}/api-docs/importing-api/swagger`,importPostmanLink:`${a.g1}/api-docs/importing-api/postman`,importEolinkerLink:`${a.g1}/api-docs/importing-api/eolink`,importNeiLink:`${a.g1}/api-docs/importing-api/nei`,importApipostLink:`${a.g1}/api-docs/importing-api/apipost`,importApizzaLink:`${a.g1}/api-docs/importing-api/apizza`,importDocwayLink:`${a.g1}/api-docs/importing-api/docway`,importKnife4jLink:`${a.g1}/api-docs/importing-api/knife4j`,teamRunnerLink:`${a.g1}`,dockerInstallLink:"https://docs.docker.com/get-docker/",contactWechatPngLink:`${a.SA}/www/assets/image/index/contact-wechat.png`,rap2ExportJpgL:`${a.SA}/app/prompt/import/rap2-export.jpg`,importJavaProjectLink:`${a.g1}/applications-and-plugins/idea/start`},l={GLOBAL:{homeLink:a.pH,browserExtensionLink:`${a.g1}/web-browser-extension/`,importOpenAPILink:`${a.g1}/import/import-data#1-import-from-openapiswagger`,importPostmanLink:`${a.g1}/import/import-data#2-import-from-postman`,importEolinkerLink:`${a.g1}/app/import/#eolinker`,importNeiLink:`${a.g1}/app/import/#nei`,importApipostLink:`${a.g1}/app/import/#apipost`,importApizzaLink:`${a.g1}/app/import/#apizza`,importDocwayLink:`${a.g1}/app/import/#docway`,contactWechatPngLink:`${a.g1}/www/assets/image/index/contact-wechat.png`,importKnife4jLink:`${a.g1}/app/import/#%E4%B9%9D%E3%80%81%E5%AF%BC%E5%85%A5-knife4j-%E6%95%B0%E6%8D%AE`,teamRunnerLink:`${a.g1}`,dockerInstallLink:"https://docs.docker.com/get-docker/",rap2ExportJpgL:`${a.SA}/app/prompt/import/rap2-export.jpg`,importJavaProjectLink:`${a.g1}/applications-and-plugins/idea/start`},CN:n},r=l[a.Gi]||n},794337:function(e,t,i){"use strict";i.d(t,{L:()=>n,b:()=>a});let a=new(i(520102)).CookieJar(void 0,{rejectPublicSuffixes:!1,looseMode:!0});function n(e){a=e}},141355:function(e,t,i){"use strict";i.d(t,{A:()=>l});var a=i(909871);let n=i.n(a)().create();n.defaults.validateStatus=e=>e>=200&&e<300||401===e,n.defaults.headers.common={"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"};let l=async function e(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await n.get(e,t)}},54418:function(e,t,i){"use strict";i.d(t,{A:()=>l});var a=i(456269),n=i(434781);async function l(e,t){let{gitConnectionId:i,branch:l,filePath:r}=t,{isYamlFile:s,onResponseHandle:o,isUserLevel:d=!1}=e;if(s){let e=new a.Ay,t=await e.fetchAndParseGitFile(i,l,r,d);return o&&o(t,{gitConnectionId:i,branch:l,filePath:r}),t}let c=d?await (0,n.tZ)(i,l,r):await (0,n.kj)(i,l,r);return o&&o((null==c?void 0:c.data)||"",{gitConnectionId:i,branch:l,filePath:r}),(null==c?void 0:c.data)||""}},656493:function(e,t,i){"use strict";i.d(t,{A:()=>n});var a=i(141355);let n=async function e(e,t){let i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{i=await (0,a.A)(e,n)}catch(l){e!==t&&(i=await (0,a.A)(t,n))}return i}},519271:function(e,t,i){"use strict";i.d(t,{Yw:()=>o.Yw,wi:()=>o.wi,bf:()=>v,iT:()=>o.iT});var a=i(169508),n=i(740565),l=i(456269),r=i(109078),s=i(656493),o=i(925053),d=i(280102),c=i(790453);let u=e=>{try{var t;return JSON.parse(null==e||null==(t=e.request)?void 0:t.responseText),!0}catch(e){return!1}},p=async function(e,t){let i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i=a.xl?await (0,s.A)(e,t,n):await (0,d.A)(e,t,n)},m=async(e,t)=>{let i=new URL(e).origin,a=`${i}/openapi.json`,n=`${i}/v2/swagger.json`;try{let e=await p(a,a,t);if(e&&u(e))return e}catch(e){}try{let e=await p(n,n,t);if(e&&u(e))return e}catch(e){}return null},h=async(e,t,a)=>{try{var n,l;let{default:r}=await Promise.all([i.e("67007"),i.e("37865"),i.e("34760")]).then(i.t.bind(i,385840,23)),s=!0;try{JSON.parse(t.data)}catch(e){s=!1}if(!s&&(null==t||null==(l=t.headers)||null==(n=l["content-type"])?void 0:n.includes("text/html"))){let{data:i}=t;if(!i)return t;let n=r.load(i)("body a[href]").eq(0).attr("href");if(n)return await p(n,n,a);{let t=await m(e,a);if(t)return t}}}catch(e){}return t};async function v(e){var t,i,s;let d,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{importFormat:m,ignoreType:v,auth:f,isYamlFile:g,onResponseHandle:y}=u;if(g){let t=new l.Ay(y);return await t.parse(e,f)}if(m===r.b.OpenApi){let t,i;t=e.replace(/\/swagger-ui\.html([#|?].*)?$/,"/v2/api-docs"),i=RegExp("^.+https?://.*","g").exec(t),i&&i.index>0&&(t=t.substring(i.index)),d=t}else d=e;let x=d;v&&a.xl&&(d+=`${d.includes("?")?"&":"?"}needIgnoreCertificate=${v}`);let A=await p(x,d,{auth:f});if(m===r.b.OpenApi&&A&&(A=await h(e,A,{auth:f})),A){if(401===A.status)throw new o.Yw({message:(0,n.hw)({id:"import.message.authorizeError"}),type:"authorizationRequired"})}else throw Error((0,n.hw)({id:"import.message.checkUrlAccessErrorGeneric"},{url:e}),{cause:c.hW.URL_FETCH_NETWORK_ERROR});return null==y||y(e,null==A||null==(t=A.request)?void 0:t.responseText,null!=(s=null==A?void 0:A.headers)?s:{}),null==A||null==(i=A.request)?void 0:i.responseText}},925053:function(e,t,i){"use strict";i.d(t,{Yw:()=>n});var a=i(526838);class n extends Error{constructor({message:e,type:t}){super(e),(0,a._)(this,"type",void 0),this.type=t}}},280102:function(e,t,i){"use strict";i.d(t,{A:()=>s});var a=i(499189),n=i(656493),l=i(925053);let r=e=>!e||e instanceof Error||(e.status<200||e.status>=300)&&401!==e.status||e.data&&500===e.data.code,s=async function e(e,t){let i,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=!1;if((0,a.or)()){let{auth:n,...l}=s,d={...l};if(n){let{username:e,password:t}=n;d.headers={Authorization:`Basic ${btoa(`${e}:${t}`)}`}}try{i=await (0,a.He)(e,d)}catch(e){}try{(o=r(i))&&e!==t&&(i=await (0,a.He)(t,d))}catch(e){}}if(r(i))try{i=await (0,n.A)(e,t)}catch(e){}if(o=r(i)){if(!(0,a.or)())throw new l.Yw({type:"webExtensionRequired"});throw new l.Yw({type:"desktopVersionRequired"})}return i}},237887:function(e,t,i){"use strict";i.d(t,{m:()=>n});var a=i(496411);function n(e){return!!e&&e!==(0,a.MJ)()}},137486:function(e,t,i){"use strict";function a(e,t){var i,a,n,l,r,s,o,d,c,u,p,m,h,v,f,g,y,x,A,j,b;let{row:w,table:S,column:C}=e.getContext();if(!(null==(a=S.options.meta)||null==(i=a.props)?void 0:i.addable))return;let I=null==(n=C.columnDef.meta)?void 0:n.dataIndex;if(!I)return;let N=(null==(m=S.options.meta)||null==(p=m.props)||null==(u=p.columns)?void 0:u.some(e=>"initialValue"===e.dataIndex))?"initialValue":(null==(f=S.options.meta)||null==(v=f.props)||null==(h=v.columns)?void 0:h.some(e=>"example"===e.dataIndex))?"example":(null==(x=S.options.meta)||null==(y=x.props)||null==(g=y.columns)?void 0:g.some(e=>"defaultValue"===e.dataIndex))?"defaultValue":(null==(b=S.options.meta)||null==(j=b.props)||null==(A=j.columns)?void 0:A.some(e=>"value"===e.dataIndex))?"value":void 0;if(!N)return;let k=(()=>{try{let e=t.clipboardData.getData("text"),i=JSON.parse(e);if(!i||"object"!=typeof i||Array.isArray(i))return;return Object.entries(i).filter(e=>{let[,t]=e;return"string"==typeof t||"number"==typeof t||"boolean"==typeof t}).map(e=>{let[t,i]=e;return{key:t,value:i}})}catch(e){return}})();if(!(null==k?void 0:k.length))return;let T=null==(s=S.options.meta)||null==(r=s.props)||null==(l=r.columns)?void 0:l.find(t=>{try{if("select"===t.componentType&&t.componentExtraProps){let i="function"==typeof t.componentExtraProps?t.componentExtraProps(e):t.componentExtraProps;if(i&&"object"==typeof i&&Array.isArray(i.options)){let e=i.options.map(e=>{if(e&&"object"==typeof e&&"string"==typeof e.value)return e.value}).filter(Boolean);if(e.includes("string")&&e.includes("number")&&e.includes("boolean")&&e.includes("integer"))return!0}}}catch(e){}return!1}),M=null!=(c=null==(o=S.options.meta)?void 0:o.getTableOriginalValue())?c:[],E=k.map(e=>{var t,i,a,n;let l=null!=(n=null==(a=S.options.meta)||null==(i=a.props)||null==(t=i.newDataTemplate)?void 0:t.call(i))?n:{};if(l[I]=e.key,l[N]=String(e.value),null==T?void 0:T.dataIndex){let t="boolean"==typeof e.value?"boolean":"number"==typeof e.value?Number.isInteger(e.value)?"integer":"number":"string"==typeof e.value?"string":void 0;t&&(l[T.dataIndex]=t)}return l}),_=[...M];_.splice(w.index,0,...E),t.preventDefault(),null==(d=S.options.meta)||d.updateTableValue(_)}i.d(t,{T:()=>a})},427183:function(e,t,i){"use strict";i.d(t,{Q:()=>a});let a=(e,t)=>{let i=e;return t&&Object.keys(t).forEach(e=>{i=i.replaceAll(`{{${e}}}`,t[e].toString())}),i}},791027:function(e,t,i){"use strict";i.d(t,{ED:()=>d,I7:()=>h,JV:()=>m,PJ:()=>u,R1:()=>o,aw:()=>p,rv:()=>c});var a=i(482106),n=i(202182),l=i(641486),r=i(689368),s=i(69712);function o(e){let t=(0,r.Ay)(e=>{let{apiDetailFolder:t}=e;return t.rootFolderMap});return e?null==t?void 0:t[e]:void 0}function d(e){let t=(0,s.Gu)().apiDetailFolder.rootFolderMap;return e?null==t?void 0:t[e]:void 0}function c(e,t){return e?null==t?void 0:t[e]:void 0}function u(e){let t=(0,a.IA)(e=>e.defaultProjectModuleId);return e||t}function p(){let e=(0,r.Ay)(e=>{let{apiDetailFolder:t}=e;return t.list});return(0,n.A)(()=>null==e?void 0:e.find(e=>"root"===e.type),[e])}function m(e){let t=(0,a.IA)(e=>e.defaultProjectModuleId),i=(0,r.Ay)(e=>{var t;return null==(t=e.projectSetting.projectSettingData)?void 0:t.servers})||[];return(0,l.useMemo)(()=>e?i.filter(i=>e===(i.moduleId||t)):i,[i,e,t])}function h(e){return"default"===e.id||e.moduleId===Number(e.id)}},573885:function(e,t,i){"use strict";i.d(t,{_:()=>r});var a=i(505508),n=i(38368),l=i(119075);async function r(){await (0,l.x1)(),await (0,a.yI)(),await (0,n.UB)()}},434119:function(e,t,i){"use strict";function a(e,t){var i;return!t||!!(null==(i=e.match(RegExp(t.toLowerCase().replaceAll(RegExp("\\*|\\.|\\?|\\+|\\$|\\^|\\[|\\]|\\(|\\)|\\{|\\}|\\||\\|\\/|\\\\","g"),e=>`\\${e}`),"i")))?void 0:i.length)}i.d(t,{w:()=>a})},3126:function(e,t,i){"use strict";function a(e){return"reference"in e&&!!e.reference||"referencedResponseId"in e}function n(e){return!a(e)}i.d(t,{B:()=>a,O:()=>n})},79136:function(e,t,i){"use strict";i.d(t,{S:()=>r});var a=i(957705),n=i(641486),l=i(689368);function r(){let{allHttpApiTags:e}=(0,l.Ay)(e=>{let{apiDetail:t}=e;return{allHttpApiTags:t.allApiTags}}),t=(0,l.Ay)(e=>{let{customEndpoint:t}=e;return t.list.reduce((e,t)=>((null==t?void 0:t.tags)&&e.push(...t.tags),e),[])}),i=(0,a.Ay)(e=>e.allDocTags);return(0,n.useMemo)(()=>[...new Set([...e||[],...i,...t])],[i,e,t])}},383117:function(e,t,i){"use strict";i.d(t,{A:()=>d});var a=i(140049),n=i(641486);let l=()=>{},r="undefined"!=typeof window,s=r?n.useLayoutEffect:n.useEffect,o={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0},d=r&&void 0!==window.ResizeObserver?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>e,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.is,[l,r]=(0,n.useState)(null),[d,c]=(0,n.useState)(()=>e(o)),u=(0,a.A)(t=>e(t)),[p]=(0,n.useState)(()=>new window.ResizeObserver(e=>{if(e[0]){let a=e[0].contentRect;if(t&&0===a.width&&0===a.height)return;let n=u(a);c(e=>i(e,n)?e:n)}}));return s(()=>l?(p.observe(l),()=>{p.disconnect()}):()=>{},[l]),[r,d]}:()=>[l,o]},658006:function(e,t,i){"use strict";i.d(t,{A:()=>d});var a=i(140049),n=i(641486);let l=()=>{},r="undefined"!=typeof window,s=r?n.useLayoutEffect:n.useEffect,o={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0},d=r&&void 0!==window.ResizeObserver?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.is,[i,l]=(0,n.useState)(null),[r,o]=(0,n.useState)(void 0),d=(0,a.A)(e),[c]=(0,n.useState)(()=>new window.ResizeObserver(e=>{if(e[0]){let i=e[0].contentRect;if(0===i.width&&0===i.height)return;let a=d(i);o(e=>e?t(e,a)?e:a:a)}}));return s(()=>i?(c.observe(i),()=>{c.disconnect()}):()=>{},[i]),[l,r]}:()=>[l,o]},371488:function(e,t,i){"use strict";i.d(t,{$:()=>o});var a=i(838e3),n=i(641486),l=i.n(n);let r=0,s=l().memo(function(e){let[t]=(0,n.useState)(()=>r++);return(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"148",height:"148",viewBox:"0 0 148 148",fill:"none",...e,children:[(0,a.jsxs)("g",{clipPath:`url(#clip0_7531_118740${t})`,children:[(0,a.jsx)("path",{d:"M123.64 51.53C124.4 51.53 125.142 51.3048 125.773 50.8829C126.405 50.4609 126.897 49.8612 127.188 49.1595C127.478 48.4578 127.554 47.6857 127.406 46.9409C127.258 46.196 126.892 45.5118 126.355 44.9747C125.818 44.4377 125.134 44.072 124.389 43.9238C123.644 43.7756 122.872 43.8517 122.171 44.1423C121.469 44.433 120.869 44.9251 120.447 45.5566C120.025 46.1881 119.8 46.9305 119.8 47.69C119.8 48.7084 120.205 49.6852 120.925 50.4053C121.645 51.1254 122.622 51.53 123.64 51.53Z",fill:"var(--ui-empty-img-accent-color)"}),(0,a.jsx)("path",{d:"M122.57 130.94C123.18 130.942 123.777 130.763 124.285 130.425C124.793 130.087 125.189 129.606 125.424 129.043C125.658 128.48 125.72 127.86 125.601 127.262C125.483 126.663 125.189 126.113 124.758 125.682C124.327 125.251 123.777 124.957 123.178 124.839C122.58 124.72 121.96 124.782 121.397 125.016C120.834 125.251 120.353 125.647 120.015 126.155C119.677 126.663 119.498 127.26 119.5 127.87C119.5 128.684 119.823 129.465 120.399 130.041C120.975 130.617 121.756 130.94 122.57 130.94Z",fill:"var(--ui-empty-img-accent-color)"}),(0,a.jsx)("path",{d:"M26.9001 45.61C27.3574 45.612 27.805 45.4782 28.1862 45.2256C28.5674 44.9729 28.865 44.6129 29.0414 44.191C29.2177 43.769 29.2649 43.3043 29.1769 42.8555C29.0889 42.4067 28.8697 41.9942 28.5471 41.6702C28.2244 41.3461 27.8128 41.1251 27.3644 41.0351C26.9161 40.9452 26.4511 40.9904 26.0284 41.1649C25.6057 41.3394 25.2444 41.6355 24.9901 42.0156C24.7358 42.3957 24.6001 42.8427 24.6001 43.3C24.6001 43.9109 24.8421 44.497 25.2731 44.9299C25.7042 45.3628 26.2892 45.6074 26.9001 45.61Z",fill:"var(--ui-empty-img-accent-color)"}),(0,a.jsx)("path",{d:"M18.61 129C19.5227 129 20.4148 128.729 21.1733 128.222C21.9318 127.714 22.5227 126.993 22.871 126.15C23.2193 125.306 23.3095 124.378 23.1299 123.483C22.9504 122.588 22.5094 121.767 21.8627 121.123C21.2159 120.479 20.3927 120.042 19.4971 119.866C18.6015 119.691 17.674 119.785 16.832 120.137C15.99 120.489 15.2714 121.083 14.7672 121.843C14.2631 122.604 13.9961 123.497 14 124.41C14.008 125.628 14.4968 126.794 15.3602 127.654C16.2236 128.514 17.3917 128.997 18.61 129Z",fill:"var(--ui-empty-img-accent-color)"}),(0,a.jsx)("path",{opacity:"0.34",d:"M114.28 77.53V111.4C114.275 113.082 113.938 114.746 113.289 116.298C112.641 117.849 111.693 119.258 110.499 120.443C109.306 121.628 107.891 122.566 106.335 123.204C104.778 123.842 103.112 124.167 101.43 124.16H42.0001C38.6128 124.179 35.3555 122.857 32.9389 120.484C30.5222 118.11 29.1423 114.877 29.1001 111.49V77.34C29.0864 77.1489 29.1172 76.9572 29.1901 76.78C29.2901 76.5 29.3801 76.31 29.4701 76.03L45.4701 45.54C45.7494 44.9609 46.1913 44.4757 46.7418 44.1436C47.2923 43.8115 47.9276 43.647 48.5701 43.67H94.7701C95.4088 43.66 96.0374 43.83 96.5839 44.1608C97.1304 44.4915 97.5727 44.9695 97.8601 45.54L113.81 76C113.923 76.2425 114.016 76.4932 114.09 76.75C114.174 76.8598 114.234 76.9859 114.267 77.1201C114.299 77.2544 114.304 77.3939 114.28 77.53Z",fill:"var(--ui-empty-img-color-primary)"}),(0,a.jsx)("g",{filter:`url(#filter0_d_7531_118740${t})`,children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M114.28 114.87V77.53C114.3 77.3986 114.293 77.2646 114.261 77.1359C114.228 77.0071 114.17 76.8861 114.09 76.78H92.8001C92.0531 76.7725 91.3126 76.9187 90.6245 77.2094C89.9364 77.5001 89.3154 77.9292 88.8001 78.47C87.7169 79.5717 87.1099 81.055 87.1101 82.6C87.1141 83.3641 86.9665 84.1214 86.6759 84.8281C86.3854 85.5348 85.9575 86.1769 85.4172 86.7172C84.8769 87.2575 84.2349 87.6853 83.5282 87.9758C82.8215 88.2664 82.0642 88.414 81.3001 88.41H62.2101C61.4442 88.4324 60.6821 88.2945 59.9726 88.0052C59.2631 87.7159 58.6219 87.2816 58.0901 86.73C57.0069 85.6283 56.3999 84.145 56.4001 82.6C56.4041 81.8346 56.2562 81.076 55.9652 80.3681C55.6741 79.6602 55.2455 79.017 54.7043 78.4758C54.1631 77.9345 53.5199 77.506 52.812 77.2149C52.1041 76.9238 51.3455 76.776 50.5801 76.78H29.1901C29.1172 76.9572 29.0864 77.1489 29.1001 77.34V114.87C29.1053 116.096 29.3522 117.309 29.8265 118.44C30.3009 119.57 30.9934 120.596 31.8646 121.459C32.7357 122.322 33.7684 123.005 34.9035 123.468C36.0387 123.931 37.254 124.167 38.4801 124.16H104.9C106.128 124.175 107.347 123.945 108.486 123.484C109.625 123.024 110.661 122.341 111.533 121.477C112.406 120.613 113.098 119.583 113.57 118.449C114.041 117.315 114.283 116.098 114.28 114.87Z",fill:"var(--ui-empty-img-bg-color)"})})]}),(0,a.jsxs)("defs",{children:[(0,a.jsxs)("filter",{id:`filter0_d_7531_118740${t}`,x:"5.09692",y:"54.7797",width:"133.194",height:"95.3809",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,a.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,a.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,a.jsx)("feOffset",{dy:"2"}),(0,a.jsx)("feGaussianBlur",{stdDeviation:"12"}),(0,a.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,a.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.0627451 0 0 0 0 0.0941176 0 0 0 0 0.156863 0 0 0 0.06 0"}),(0,a.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_7531_118740"}),(0,a.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_7531_118740",result:"shape"})]}),(0,a.jsx)("clipPath",{id:`clip0_7531_118740${t}`,children:(0,a.jsx)("rect",{width:"148",height:"148",fill:"var(--ui-empty-img-bg-color)"})})]})]})});function o(e){return(0,a.jsx)(s,{...e})}},949695:function(e,t,i){"use strict";i.d(t,{A:()=>c});var a=i(838e3),n=i(394555),l=i(641486),r=i.n(l);let s=(0,a.jsx)("div",{className:"w-full p-4 flex items-center justify-center",style:{minHeight:400},children:(0,a.jsx)(n.A,{spinning:!0})}),o=async()=>Promise.all([i.e("67007"),i.e("77447"),i.e("77018"),i.e("83150"),i.e("84962"),i.e("30807")]).then(i.bind(i,682246)),d=r().lazy(()=>o().then(e=>{let{DeRefJsonSchemaViewer:t}=e;return{default:t}})),c=e=>(0,a.jsx)(l.Suspense,{fallback:s,children:(0,a.jsx)(d,{...e})})},734354:function(e,t,i){"use strict";i.d(t,{fx:()=>r,gl:()=>o,tm:()=>s,uP:()=>d,v3:()=>l});var a=i(350590),n=i(17516);let l=(e,t)=>{let{Http:i}=n.sdkContainer.getItemsSync(e=>[e.Http]),l=null!=t?t:i.msgpack;try{var r,s,o;let t=null==(s=e.contentInfo)||null==(r=s.call(e))?void 0:r.contentType;if("string"==typeof t&&l.isMsgpackContentType(t)){let{stream:t}=e,i=(0,a.D)(t);return JSON.stringify(i)}return null!=(o=e.text())?o:""}catch{return""}};function r(){let{userAgent:e}=window.navigator,t=e.includes("Edge")||e.includes("Edg"),i=!t&&e.includes("Chrome"),a=(()=>{if(i){var e;let t=null==(e=window.navigator.userAgentData)?void 0:e.brands;if(Array.isArray(t)&&t.length>0){let e=t[0];if(e&&"object"==typeof e&&"string"==typeof e.brand&&"Google Chrome"!==e.brand)return!0}}return!1})();return{isChrome:i,isEdge:t,isOtherChrome:a,isChromeKernel:i||t}}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"HTTP";return["GRPC","DUBBO"].includes(e)}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"HTTP";return"DUBBO"===e}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"HTTP";return"GRPC"===e}},526638:function(e,t,i){"use strict";function a(e,t,i,a,n,l,r,s,o){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return i(t(e.apply(this,arguments)))};case 4:return function(){return a(i(t(e.apply(this,arguments))))};case 5:return function(){return n(a(i(t(e.apply(this,arguments)))))};case 6:return function(){return l(n(a(i(t(e.apply(this,arguments))))))};case 7:return function(){return r(l(n(a(i(t(e.apply(this,arguments)))))))};case 8:return function(){return s(r(l(n(a(i(t(e.apply(this,arguments))))))))};case 9:return function(){return o(s(r(l(n(a(i(t(e.apply(this,arguments)))))))))};default:throw Error(`Invalid number of arguments: ${arguments.length}`)}}i.d(t,{L:()=>a})},387327:function(e,t,i){"use strict";i.d(t,{a:()=>v});var a=i(793536);let n={"userLayout.title.notSave":"This tab has unsaved changes","confirm.close":"Are you sure to close? ","message.error.xml2json":"Error in converting XML to JSON, please check whether the XML format is wrong",cancel:"Cancel",confirm:"Confirm",isCopied:"Copied"},l={...n,"userLayout.title.notSave":"","confirm.close":"","message.createSuccess":"","message.error.xml2json":"XMLJSONXML",cancel:"",confirm:"",isCopied:""},r={...n,"userLayout.title.notSave":"   .","confirm.close":"?","message.createSuccess":" .","message.error.xml2json":"XML JSON   . XML   .",cancel:"",confirm:"",isCopied:"."},s={...n,"userLayout.title.notSave":"Esta guia possui altera\xe7\xf5es n\xe3o salvas","confirm.close":"Tem certeza que deseja fechar?","message.error.xml2json":"Erro ao converter XML para JSON, verifique se o formato XML est\xe1 correto",cancel:"Cancelar",confirm:"Confirmar",isCopied:"Copiado"},o={"userLayout.title.notSave":"","confirm.close":"","message.createSuccess":"","message.error.xml2json":"XML  JSON  XML ",cancel:"",confirm:"",isCopied:""},d={...n,"userLayout.title.notSave":"This tab has unsaved changes","confirm.close":"Are you sure to close? ","message.error.xml2json":"Error in converting XML to JSON, please check whether the XML format is wrong",cancel:"Cancel",confirm:"Confirm",isCopied:"Copied"},c={...n,"userLayout.title.notSave":"Esta guia possui altera\xe7\xf5es n\xe3o salvas","confirm.close":"Tem certeza que deseja fechar?","message.error.xml2json":"Erro ao converter XML para JSON, verifique se o formato XML est\xe1 correto",cancel:"Cancelar",confirm:"Confirmar",isCopied:"Copiado"},u={...n,"userLayout.title.notSave":"","confirm.close":"","message.createSuccess":"","message.error.xml2json":"XML  JSON  XML ",cancel:"",confirm:"",isCopied:""},p={...n,"userLayout.title.notSave":"Tab n\xe0y c\xf3 thay i cha c lu","confirm.close":"Bn c\xf3 chc chn mun \xf3ng?","message.error.xml2json":"Li khi chuyn i XML sang JSON, vui l\xf2ng kim tra xem nh dng XML c\xf3 sai kh\xf4ng",cancel:"Hy",confirm:"X\xe1c nhn",isCopied:"\xe3 sao ch\xe9p"},m={...n,"userLayout.title.notSave":"Tab ini memiliki perubahan yang belum disimpan","confirm.close":"Apakah Anda yakin ingin menutup?","message.error.xml2json":"Kesalahan dalam mengonversi XML ke JSON, harap periksa apakah format XML salah",cancel:"Batal",confirm:"Konfirmasi",isCopied:"Disalin"},h={"zh-CN":o,"en-US":n,"ja-JP":l,"pt-PT":s,"ko-KR":r,"es-ES":d,"pt-BR":c,"zh-TW":u,"vi-VN":p,"id-ID":m},v=(e,t)=>(0,a.xM)(h)(e,t)},992194:function(e,t,i){"use strict";i.r(t),i.d(t,{default:()=>d});var a=i(526838),n=i(169445),l=i(398380),r=i(803325),s=i(152574),o=i(861645);class d extends s.default{static isCollection(e){return!!e&&(e instanceof d||"object"==typeof e&&null!==e&&"constructor"in e&&n.lodash.inSuperChain(e.constructor,"_postman_propertyName",d._postman_propertyName))}syncVariablesFrom(e,t){return this.variables.syncFromObject(e,t)}syncVariablesTo(e){return this.variables.syncToObject(e)}toJSON(){let e=s.default.prototype.toJSON.apply(this);return e.info={_postman_id:this.id,name:this.name,version:this.version,schema:"https://schema.getpostman.com/json/collection/v2.1.0/collection.json"},delete e.id,delete e.name,delete e.version,e.hasOwnProperty("description")&&(e.info.description=this.description,delete e.description),e}itemCount(){let e=0;return this.forEachItem(()=>{e++}),e}constructor(e={},t){var i;const n=(0,l.merge)({},e,{protocolProfileBehavior:{disabledSystemHeaders:{"postman-token":!0}}});super(n),(0,a._)(this,"variables",void 0),(0,a._)(this,"version",void 0),(0,a._)(this,"dataSchemas",void 0),(0,a._)(this,"customFunctions",void 0),(0,a._)(this,"environment",void 0),(0,a._)(this,"globals",void 0),(0,a._)(this,"mockRules",void 0),(0,a._)(this,"requestProxyAgentMap",void 0),(0,a._)(this,"databaseConnectionMap",void 0),this.variables=new o.VariableList(this,null==n?void 0:n.variable,t),this.version=(null==n||null==(i=n.info)?void 0:i.version)?new o.Version(n.info.version):void 0,this.dataSchemas=null==n?void 0:n.dataSchemas,this.customFunctions=null==n?void 0:n.customFunctions,this.mockRules=null==n?void 0:n.mockRules,n.environment&&(this.environment=new r.default(n.environment)),n.globals&&(this.globals=new r.default(n.globals)),this.requestProxyAgentMap=n.requestProxyAgentMap,this.databaseConnectionMap=n.databaseConnectionMap}}(0,a._)(d,"_postman_propertyName","Collection")},803325:function(e,t,i){"use strict";i.r(t),i.d(t,{default:()=>o});var a=i(526838),n=i(169445),l=i(861645),r=i(175300),s=i(794941);class o extends l.Property{static isEnvironment(e){return!!e&&(e instanceof o||"object"==typeof e&&null!==e&&"constructor"in e&&n.lodash.inSuperChain(e.constructor,"_postman_propertyName",o._postman_propertyName))}getFullVariableScope(){var e;let{values:t}=this.variable.toJSON();return null==(e=this.getExtraVariables())||e.forEach(e=>{t.find(t=>"object"==typeof t&&null!==t&&"key"in t&&t.key===e.key)||t.push(e)}),new r.default({values:t,name:this.name,baseUrls:this.baseUrls,baseUrl:this.baseUrl})}getExtraVariables(){var e;return(null==(e=this.baseUrls)?void 0:e.default)!==void 0?[{key:s.Y["0"],value:this.baseUrls.default,builtIn:!0},{type:"object",key:s.Y["1"],value:this.baseUrls,builtIn:!0}]:[]}constructor(e){var t,i,n,l,s,o,d,c,u,p;super(e),(0,a._)(this,"baseUrl",void 0),(0,a._)(this,"baseUrls",void 0),(0,a._)(this,"websocketBaseUrls",void 0),(0,a._)(this,"socketioBaseUrls",void 0),(0,a._)(this,"variable",void 0),(0,a._)(this,"advancedSettings",void 0),(0,a._)(this,"definition",void 0),(0,a._)(this,"type","normal"),(0,a._)(this,"parameter",void 0),this.baseUrls=null!=(o=e.baseUrls)?o:{},this.websocketBaseUrls=null!=(d=e.websocketBaseUrls)?d:{},this.socketioBaseUrls=null!=(c=e.socketioBaseUrls)?c:{},this.baseUrl=null!=(p=null!=(u=e.baseUrl)?u:null==e||null==(t=e.baseUrls)?void 0:t.default)?p:"",this.variable=new r.default({values:e.variable.values,name:e.name,baseUrls:this.baseUrls,baseUrl:this.baseUrl}),this.parameter={header:(null==(i=e.parameter)?void 0:i.header)||[],query:(null==(n=e.parameter)?void 0:n.query)||[],body:(null==(l=e.parameter)?void 0:l.body)||[],cookie:(null==(s=e.parameter)?void 0:s.cookie)||[]},this.type=e.type,this.advancedSettings=e.advancedSettings}}(0,a._)(o,"_postman_propertyName","Environment")},305109:function(e,t,i){"use strict";i.r(t),i.d(t,{default:()=>n});var a=i(17516);class n{static create(e){let t=a.sdkContainer.getItemsSync(e=>[e.Http,e.Socket,e.WebSocket]),{HttpItem:i}=t.Http,{SocketItem:n}=t.Socket,{WebSocketItem:l}=t.WebSocket;return"socket"===e.type?new n(e):"webSocket"===e.type?new l(e):new i(e)}}},152574:function(e,t,i){"use strict";i.r(t),i.d(t,{default:()=>d});var a,n=i(526838),l=i(861645),r=i(169445),s=i(17516);function o(e){let t=s.sdkContainer.getItemsSync(e=>[e.Http,e.Socket,e.WebSocket]),{HttpItem:i}=t.Http,{SocketItem:a}=t.Socket,{WebSocketItem:n}=t.WebSocket;if(i.isHttpItem(e)||a.isSocketItem(e)||d.isItemGroup(e))return e;let r=e;if((l.Item.isItem(e)||l.ItemGroup.isItemGroup(e))&&(r="function"==typeof e.toJSON?e.toJSON():e),"object"==typeof r&&null!==r&&"item"in r)return new d(r);let o=r;return"socket"===o.type?new a(r):"webSocket"===o.type?new n(r):new i(r)}class d extends(a=l.ItemGroup){static isItemGroup(e){return!!e&&(e instanceof d||"object"==typeof e&&null!==e&&"constructor"in e&&r.lodash.inSuperChain(e.constructor,"_postman_propertyName",d._postman_propertyName))}constructor(e){super(e),this.items=new l.PropertyList(o,this,e&&e.item)}}(0,n._)(d,"_postman_propertyName","ItemGroup"),(0,n._)(d,"_createNewGroupOrItem",o)},175300:function(e,t,i){"use strict";i.r(t),i.d(t,{default:()=>l});var a=i(526838),n=i(861645);class l extends n.VariableScope{unshiftLayer(e){n.VariableList.isVariableList(e)&&(this._layers||(this._layers=[]),this._layers.unshift(e))}constructor(e,...t){super(e,...t),(0,a._)(this,"baseUrls",void 0),(0,a._)(this,"baseUrl",void 0)}}},667095:function(e,t,i){"use strict";i.r(t),i.d(t,{Certificate:()=>n.Certificate,CertificateList:()=>n.CertificateList,Collection:()=>l.default,Cookie:()=>n.Cookie,CookieList:()=>n.CookieList,Description:()=>n.Description,Environment:()=>r.default,Event:()=>s.default,EventList:()=>n.EventList,FormParam:()=>n.FormParam,Header:()=>n.Header,HeaderList:()=>n.HeaderList,HttpFormParam:()=>n.FormParam,HttpHeader:()=>n.Header,HttpItem:()=>o.default,HttpQueryParam:()=>n.QueryParam,HttpRequest:()=>d.default,HttpRequestAuth:()=>c.default,HttpRequestBody:()=>n.RequestBody,HttpResponse:()=>u.default,Item:()=>p.default,ItemGroup:()=>m.default,MutationTracker:()=>n.MutationTracker,Property:()=>n.Property,PropertyBase:()=>n.PropertyBase,PropertyList:()=>n.PropertyList,ProxyConfig:()=>n.ProxyConfig,ProxyConfigList:()=>n.ProxyConfigList,QueryParam:()=>n.QueryParam,Request:()=>n.Request,RequestAuth:()=>n.RequestAuth,RequestBody:()=>n.RequestBody,Response:()=>n.Response,Script:()=>n.Script,SocketItem:()=>h.default,SocketRequest:()=>v.default,SocketResponse:()=>f.default,Url:()=>n.Url,UrlMatchPattern:()=>n.UrlMatchPattern,UrlMatchPatternList:()=>n.UrlMatchPatternList,Variable:()=>n.Variable,VariableList:()=>n.VariableList,VariableScope:()=>g.default,Version:()=>n.Version,WebSocketFormParam:()=>n.FormParam,WebSocketHeader:()=>n.Header,WebSocketItem:()=>y.default,WebSocketQueryParam:()=>n.QueryParam,WebSocketRequest:()=>x.default,WebSocketResponse:()=>A.default});var a=i(17516),n=i(861645),l=i(992194),r=i(803325),s=i(255725),o=i(995189),d=i(611677),c=i(976019),u=i(514753),p=i(305109),m=i(152574),h=i(248259),v=i(185311),f=i(475571),g=i(175300),y=i(105775),x=i(227371),A=i(754647);a.sdkContainer.getItems(e=>Object.keys(e).map(t=>e[t]))},995189:function(e,t,i){"use strict";i.r(t),i.d(t,{default:()=>s});var a,n=i(526838),l=i(861645),r=i(169445);class s extends(a=l.Item){static isHttpItem(e){return!!e&&(e instanceof s||"object"==typeof e&&null!==e&&"constructor"in e&&r.lodash.inSuperChain(e.constructor,"_postman_propertyName",s._postman_propertyName))}static isItem(e){return s.isHttpItem(e)||"object"==typeof e&&null!==e&&"type"in e&&"socket"===e.type||l.Item.isItem(e)}clone(){return new s(this.toJSON())}constructor(e){var t;super(e),(0,n._)(this,"responseDefinition",void 0),(0,n._)(this,"requestDefinition",void 0),(0,n._)(this,"overrideRequesterOptions",void 0),(0,n._)(this,"metaInfo",void 0),(0,n._)(this,"type","http"),(null==e?void 0:e.responseDefinition)&&(this.responseDefinition=e.responseDefinition),(null==e?void 0:e.requestDefinition)&&(this.requestDefinition=e.requestDefinition),(null==e?void 0:e.overrideRequesterOptions)&&(this.overrideRequesterOptions=e.overrideRequesterOptions),this.metaInfo=null!=(t=null==e?void 0:e.metaInfo)?t:{}}}(0,n._)(s,"_postman_propertyName","Item")},611677:function(e,t,i){"use strict";i.r(t),i.d(t,{default:()=>l});var a=i(526838),n=i(861645);class l extends n.Request{static isHttpRequest(e){return!!e&&n.Request.isRequest(e)}constructor(...e){super(...e),(0,a._)(this,"response",void 0),(0,a._)(this,"type","http")}}},976019:function(e,t,i){"use strict";i.r(t),i.d(t,{default:()=>n});var a=i(861645);class n extends a.RequestAuth{update(e,t){if("combination"!==t)return super.update(e);Array.isArray(e)&&e.forEach(e=>{var t;let i=null!=(t=e.value)?t:{};e.value="object"==typeof i&&null!==i&&"toJSON"in i?i:new n(i)}),super.update(e)}}},514753:function(e,t,i){"use strict";i.r(t),i.d(t,{default:()=>r});var a=i(526838),n=i(861645),l=i(363181);class r extends n.Response{static isHttpResponse(e){return!!e&&n.Response.isResponse(e)}toFastJSON(){var e,t,i,a;let n=!(arguments.length>0)||void 0===arguments[0]||arguments[0],r="headers"in this&&"function"==typeof(null==(e=this.headers)?void 0:e.toJSON)?this.headers.toJSON():void 0,s="cookies"in this&&"function"==typeof(null==(t=this.cookies)?void 0:t.toJSON)?this.cookies.toJSON():void 0,o="trailers"in this&&"function"==typeof(null==(i=this.trailers)?void 0:i.toJSON)?this.trailers.toJSON():void 0,d="stream"in this&&this.stream?void 0:this.body,c=n&&"stream"in this&&this.stream?(0,l.toStream)(this.stream):"stream"in this?this.stream:void 0,u="responseSize"in this?this.responseSize:void 0,p="size"in this&&"function"==typeof this.size?this.size():void 0,m=(null==p?void 0:p.total)||p||u;return{id:this.id,code:this.code,status:this.status,header:r,cookie:s,trailer:o,body:d,stream:c,responseTime:this.responseTime,responseSize:u,responseTotalSize:m,downloadedBytes:this.downloadedBytes,type:this.type,originalRequest:null==(a=this.originalRequest)?void 0:a.toJSON()}}constructor(e){super(e),(0,a._)(this,"type","http"),(0,a._)(this,"visualizer",void 0),(0,a._)(this,"tempFilePath",void 0),this.visualizer=null==e?void 0:e.visualizer,this.tempFilePath=(null==e?void 0:e.tempFilePath)||""}}},617587:function(e,t,i){"use strict";i.d(t,{sdkContainer:()=>a.sdkContainer});var a=i(17516)},248259:function(e,t,i){"use strict";i.r(t),i.d(t,{default:()=>s});var a=i(526838),n=i(169445),l=i(861645),r=i(185311);class s extends l.Property{static isSocketItem(e){return!!e&&(e instanceof s||"object"==typeof e&&null!==e&&"constructor"in e&&n.lodash.inSuperChain(e.constructor,"_postman_propertyName",s._postman_propertyName))}clone(){return new s(this.toJSON())}getEvents(e){var t,i;return e?null==(t=this.events)?void 0:t.filter(function(t){return"object"==typeof t&&null!==t&&"listen"in t&&t.listen===e}):null==(i=this.events)?void 0:i.all()}getAuth(){}constructor(e){super(e),(0,a._)(this,"_postman_propertyRequiresId",!0),(0,a._)(this,"request",void 0),(0,a._)(this,"events",void 0),(0,a._)(this,"metaInfo",void 0),(0,a._)(this,"type","socket"),(0,a._)(this,"responseDefinition",void 0),e&&(this.request=new r.default(e.request)),(null==e?void 0:e.responseDefinition)&&(this.responseDefinition=e.responseDefinition),(null==e?void 0:e.metaInfo)&&(this.metaInfo=e.metaInfo),this.events=new l.EventList(this,(null==e?void 0:e.event)||[])}}(0,a._)(s,"_postman_propertyName","SocketItem")},185311:function(e,t,i){"use strict";i.r(t),i.d(t,{default:()=>u});var a=i(526838),n=i(169445),l=i(802391),r=i.n(l),s=i(363181),o=i(861645),d=i(208963).Buffer;function c(e){if(void 0!==e)return"string"==typeof e?e:d.isBuffer(e)?e.toString():"object"==typeof e?JSON.stringify(e):e&&String(e)}class u extends o.Property{static isSocketRequest(e){return!!e&&(e instanceof u||"object"==typeof e&&null!==e&&"constructor"in e&&n.lodash.inSuperChain(e.constructor,"_postman_propertyName",u._postman_propertyName))}update(){let{data:e,stream:t,port:i,host:a,name:n,unpackProcessor:l,connectOptions:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n&&(this.name=n),a&&(this.host=a),i&&(this.port=i),e?this.data=e:t&&(this.data=(0,s.normalizeStream)(t)),l&&(this.unpackProcessor=l),r&&(this.connectOptions=r)}setData(e){this.data=e}text(){return c(this.data)}json(e,t){let i;var a=this.data,n=e;if(void 0!==a){if(d.isBuffer(a))i=a.toString();else{if("string"!=typeof a)return a;i=a}return r().parse(i,n)}}buffer(){var e=this.data;if(void 0!==e)return d.isBuffer(e)?e:d.from(c(e))}clone(){return new u(this.toJSON())}toJSON(){let e;if(d.isBuffer(this.data)){let t,i=d.isBuffer(this.data);i&&(t=this.data,delete this.data),e=o.PropertyBase.toJSON(this),i&&t&&(e.stream=(0,s.toStream)(t),this.data=t)}else e=o.PropertyBase.toJSON(this);return e}constructor(e){super(e),(0,a._)(this,"type","socket"),(0,a._)(this,"id",void 0),(0,a._)(this,"name",void 0),(0,a._)(this,"host",void 0),(0,a._)(this,"port",void 0),(0,a._)(this,"data",void 0),(0,a._)(this,"serviceId",void 0),(0,a._)(this,"unpackProcessor",void 0),(0,a._)(this,"connectOptions",{}),this.update(e)}}(0,a._)(u,"_postman_propertyName","SocketRequest")},475571:function(e,t,i){"use strict";i.r(t),i.d(t,{default:()=>p});var a=i(526838),n=i(169445),l=i(506598),r=i(363181),s=i(861645),o=i(208963).Buffer;function d(e){if(void 0!==e)return o.isBuffer(e)?e:o.from(c(e))}function c(e){if(void 0!==e)return"string"==typeof e?e:o.isBuffer(e)?e.toString():"object"==typeof e?JSON.stringify(e):e&&String(e)}function u(e,t,i){let a;if(void 0===e)return;if(o.isBuffer(e))a=e.toString();else{if("string"!=typeof e)return e;a=e}let{xmlSerializationUtils:n}=l.utilsContainer.getItemsSync(e=>[e.xmlSerializationUtils]),{xml2json:r,removeXmlUselessPrefixAndSuffix:s}=n;if(null==a?void 0:a.trim().startsWith("<"))return r(a);if(a)try{return JSON.parse(a)}catch(e){return r(a=s(a))}}class p extends s.Property{static isSocketResponse(e){return!!e&&(e instanceof p||"object"==typeof e&&null!==e&&"constructor"in e&&n.lodash.inSuperChain(e.constructor,"_postman_propertyName",p._postman_propertyName))}update(){let{data:e,stream:t,originalData:i,originalStream:a,responseTime:n,responseSize:l}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e?this.data=e:t&&(this.data=(0,r.normalizeStream)(t)),i?this.originalData=i:a?this.originalData=(0,r.normalizeStream)(a):this.data&&(this.originalData=this.data),l||(o.isBuffer(this.originalData)?l=this.originalData.byteLength:"string"==typeof this.originalData&&(l=this.originalData.length)),l&&(this.responseSize=l),n&&(this.responseTime=n)}setData(e){this.data=e}setOriginalData(e){this.originalData=e}text(){return c(this.data)}json(e,t){return u(this.data,e,t)}buffer(){return d(this.data)}originalText(){return c(this.originalData||this.data)}originalJson(e,t){return u(this.originalData||this.data,e,t)}originalBuffer(){return d(this.originalData||this.data)}size(){var e;return(null==(e=this.originalBuffer())?void 0:e.length)||0}get headers(){return new s.HeaderList(null,[])}toJSON(){let e,t,i,a=o.isBuffer(this.data),n=o.isBuffer(this.originalData);return a&&(t=this.data,delete this.data),n&&(i=this.originalData,delete this.originalData),e=s.PropertyBase.toJSON(this),a&&t&&(e.stream=(0,r.toStream)(t),this.data=t),n&&i&&(t!==i&&(e.originalStream=(0,r.toStream)(i)),this.originalData=i),e}toFastJSON(){return this.toJSON()}constructor(e){super(e),(0,a._)(this,"data",void 0),(0,a._)(this,"originalData",void 0),(0,a._)(this,"type","socket"),(0,a._)(this,"responseTime",void 0),(0,a._)(this,"responseSize",void 0),this.update(e)}}(0,a._)(p,"_postman_propertyName","SocketResponse")},255725:function(e,t,i){"use strict";i.r(t),i.d(t,{default:()=>l});var a=i(526838),n=i(861645);class l extends n.Event{static create(e){return new l(e)}toJSON(){return{...n.Event.prototype.toJSON.apply(this),extraData:this.extraData}}constructor(e){super(e),(0,a._)(this,"extraData",void 0),this.extraData=e.extraData}}},363181:function(e,t,i){"use strict";i.r(t),i.d(t,{normalizeStream:()=>l,streamToSafeString:()=>s,toStream:()=>r});var a=i(208963).Buffer;let n="Base64";function l(e){return null==e?null:"object"!=typeof e||null===e?e:"Buffer"===e.type&&Array.isArray(e.data)?"function"==typeof a?a.from(e.data):new Uint8Array(e.data).buffer:e.type===n&&"string"==typeof e.data?a.from(e.data,"base64"):"data"in e?e.data:e}function r(e){var t,i;return null==e?{data:null}:"object"==typeof e&&"data"in e?e:{type:n,data:null!=(i=null==e||null==(t=e.toString)?void 0:t.call(e,"base64"))?i:null}}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";try{if(a.isBuffer(e))return e.toString(t);if(e instanceof ArrayBuffer)return new TextDecoder(t).decode(new Uint8Array(e))}catch(e){}return""}},105775:function(e,t,i){"use strict";i.r(t),i.d(t,{default:()=>s});var a,n=i(526838),l=i(861645),r=i(169445);class s extends(a=l.Item){static isWebSocketItem(e){return!!e&&(e instanceof s||"object"==typeof e&&null!==e&&"constructor"in e&&r.lodash.inSuperChain(e.constructor,"_postman_propertyName",s._postman_propertyName))}clone(){return new s("function"==typeof this.toJSON?this.toJSON():{})}constructor(e){super(e),(0,n._)(this,"responseDefinition",void 0),(0,n._)(this,"requestDefinition",void 0),(0,n._)(this,"metaInfo",void 0),(0,n._)(this,"type","webSocket"),(null==e?void 0:e.responseDefinition)&&(this.responseDefinition=e.responseDefinition),(null==e?void 0:e.requestDefinition)&&(this.requestDefinition=e.requestDefinition),(null==e?void 0:e.metaInfo)&&(this.metaInfo=e.metaInfo)}}(0,n._)(s,"_postman_propertyName","WebSocketItem")},227371:function(e,t,i){"use strict";i.r(t),i.d(t,{default:()=>s});var a,n=i(526838),l=i(861645),r=i(169445);class s extends(a=l.Request){static isWebSocketRequest(e){return!!e&&(e instanceof s||"object"==typeof e&&null!==e&&"constructor"in e&&r.lodash.inSuperChain(e.constructor,"_postman_propertyName",s._postman_propertyName))}constructor(...e){super(...e),(0,n._)(this,"response",void 0),(0,n._)(this,"type","webSocket")}}(0,n._)(s,"_postman_propertyName","WebSocketRequest")},754647:function(e,t,i){"use strict";i.r(t),i.d(t,{default:()=>s});var a,n=i(526838),l=i(861645),r=i(169445);class s extends(a=l.Response){static isWebSocketResponse(e){return!!e&&(e instanceof s||"object"==typeof e&&null!==e&&"constructor"in e&&r.lodash.inSuperChain(e.constructor,"_postman_propertyName",s._postman_propertyName))}toFastJSON(){var e,t;let i="headers"in this&&"function"==typeof(null==(e=this.headers)?void 0:e.toJSON)?this.headers.toJSON():void 0,a="cookies"in this&&"function"==typeof(null==(t=this.cookies)?void 0:t.toJSON)?this.cookies.toJSON():void 0;return{id:this.id,code:this.code,header:i,cookie:a,type:this.type}}constructor(...e){super(...e),(0,n._)(this,"type","webSocket")}}(0,n._)(s,"_postman_propertyName","WebSocketResponse")},543013:function(e,t,i){"use strict";i.d(t,{SM:()=>a,hv:()=>n,jN:()=>o,z6:()=>s});let a={type:"object",required:["data"],properties:{data:{type:"string"},event:{type:"string"},id:{type:"string"},retry:{type:"integer",minimum:0}}},n=["json","xml","msgpack","eventStream"];var l,r,s=((l={}).Before="-1",l.After="1",l.Append="0",l.Insert="2",l),o=((r={})[r.Fetch=0]="Fetch",r[r.Create=1]="Create",r[r.Update=2]="Update",r[r.Delete=3]="Delete",r[r.BulkDelete=4]="BulkDelete",r[r.Reorder=5]="Reorder",r[r.Duplicate=6]="Duplicate",r[r.Import=7]="Import",r[r.Other=8]="Other",r[r.Transfer=9]="Transfer",r[r.Dismiss=10]="Dismiss",r[r.Custom=11]="Custom",r[r.Clone=12]="Clone",r[r.Quit=13]="Quit",r[r.BulkAction=14]="BulkAction",r)},656502:function(e,t,i){"use strict";i.d(t,{Dz:()=>a,gl:()=>n,pn:()=>l,y9:()=>r});let a="text/event-stream",n="application/x-ndjson",l=e=>{try{var t,i,l,r,s,o;return[a,n].includes(null==e||null==(o=e.headers)||null==(s=o.get("content-type"))||null==(r=s.toString())||null==(l=r.split(";"))||null==(i=l[0])||null==(t=i.trim())?void 0:t.toLowerCase())}catch{return!1}},r=e=>{try{var t,i,n,l,r,s;return(null==e||null==(s=e.headers)||null==(r=s.get("content-type"))||null==(l=r.toString())||null==(n=l.split(";"))||null==(i=n[0])||null==(t=i.trim())?void 0:t.toLowerCase())===a}catch{return!1}}},790453:function(e,t,i){"use strict";i.d(t,{du:()=>l,hW:()=>r});var a,n,l=((a={}).DAILY_OPEN="dailyOpen",a.ONBOARDING_PROGRESS="onboardingProgress",a),r=((n={}).URL_FETCH_NETWORK_ERROR="URL_FETCH_NETWORK_ERROR",n.URL_FETCH_SERVER_ERROR="URL_FETCH_SERVER_ERROR",n.URL_FETCH_AUTH_FAILED="URL_FETCH_AUTH_FAILED",n.PARSE_ERROR="PARSE_ERROR",n.JS_ERROR="JS_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.DATA_SIZE_EXCEED="DATA_SIZE_EXCEED",n.INCORRECT_FILE_TYPE="INCORRECT_FILE_TYPE",n.UNKNOWN="UNKNOWN",n)},106149:function(e,t,i){"use strict";function a(e){var t;return["json","xml","msgpack"].includes(null!=(t=e.contentType)?t:"")?e.jsonSchema:"eventStream"===e.contentType?e.itemSchema:void 0}i.d(t,{qV:()=>a})},294359:function(e,t,i){"use strict";i.d(t,{Ox:()=>n,Pw:()=>s,WS:()=>o,a1:()=>d,tB:()=>a,v:()=>r});let a=[100,101,102,103,"1XX",200,201,202,203,204,205,206,207,208,226,"2XX",300,301,302,303,304,305,307,308,"3XX",400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,421,422,423,424,425,426,428,429,431,451,"4XX",500,501,502,503,504,505,506,507,508,510,511,"5XX","default"],n={text:{label:"TEXT",value:"text"},json:{label:"JSON",value:"json"},xml:{label:"XML",value:"xml"},html:{label:"HTML",value:"html"},raw:{label:"Raw",value:"raw"},binary:{label:"Binary",value:"binary"},noContent:{label:"No-Content",value:"noContent"},msgpack:{label:"MsgPack",value:"msgpack"},eventStream:{label:"Event-Stream",value:"eventStream"}};var l,r=((l={}).Json="json",l.MsgPack="msgpack",l.Xml="xml",l.Html="html",l.Raw="raw",l.Binary="binary",l.NoContent="noContent",l.EventStream="eventStream",l.Text="text",l);let s=[n.json,n.xml,n.html,n.raw,n.binary,n.noContent,n.msgpack,n.eventStream];function o(e){return e===n.noContent.value}let d=a.map(e=>({value:`${e}`}))},109078:function(e,t,i){"use strict";i.d(t,{b:()=>n});var a,n=((a={}).OpenApi="openapi",a.Postman="Postman",a.HAR="har",a.YApi="yapi",a.RAP2="rap2",a.DOClever="doclever",a.SosoApi="sosoapi",a.Eolinker="eolinker",a.Nei="nei",a.ApiPost="apipost",a.Apizza="apizza",a.RAML="raml",a.APIBlueprint="apiblueprint",a.IODocs="iodocs",a.WADL="wadl",a.Google="google",a.ShowDoc="showdoc",a.Docway="docway",a.Jmeter="jmeter",a.Apidoc="apidoc",a.HkbSocketExcel="hksocketexcel",a.EasyDoc="easydoc",a.Knife4j="knife4j",a.App="app",a.CURL="curl",a.Insomnia="insomnia",a.WSDL="wsdl",a.JsonSchema="jsonSchema",a.Markdown="markdown",a.Protobuf="protobuf",a.JavaProject="javaProject",a.SoapUI="soapui",a.Hoppscotch="hoppscotch",a)},789728:function(e,t,i){"use strict";i.d(t,{Y:()=>a});let a=["parameter","example","requestBody","header","link","callback","pathItem"]},603683:function(e,t,i){"use strict";i.d(t,{WW:()=>n,li:()=>a,pp:()=>l});let a=[{value:"Accept"},{value:"Accept-Charset"},{value:"Accept-Encoding"},{value:"Accept-Language"},{value:"Access-Control-Request-Headers"},{value:"Access-Control-Request-Method"},{value:"Authorization"},{value:"Cache-Control"},{value:"Content-MD5"},{value:"Content-Length"},{value:"Content-Transfer-Encoding"},{value:"Content-Type"},{value:"Cookie"},{value:"Date"},{value:"Expect"},{value:"From"},{value:"Host"},{value:"If-Match"},{value:"If-Modified-Since"},{value:"If-None-Match"},{value:"If-Range"},{value:"If-Unmodified-Since"},{value:"Keep-Alive"},{value:"Max-Forwards"},{value:"Origin"},{value:"Pragma"},{value:"Proxy-Authorization"},{value:"Range"},{value:"Referer"},{value:"TE"},{value:"Trailer"},{value:"Transfer-Encoding"},{value:"Upgrade"},{value:"User-Agent"},{value:"Via"},{value:"Warning"},{value:"X-Requested-With"},{value:"X-Do-Not-Track"},{value:"DNT"},{value:"x-api-key"}],n=[{value:"Connection"},{value:"Cookie"},{value:"Host"},{value:"Origin"},{value:"Sec-WebSocket-Extensions"},{value:"Sec-WebSocket-Key"},{value:"Sec-WebSocket-Origin"},{value:"Sec-WebSocket-Protocol"},{value:"Sec-WebSocket-Version"},{value:"Upgrade"},{value:"User-Agent"}],l=[{value:"application/atom+xml"},{value:"application/ecmascript"},{value:"application/json"},{value:"application/vnd.api+json"},{value:"application/javascript"},{value:"application/octet-stream"},{value:"application/ogg"},{value:"application/pdf"},{value:"application/postscript"},{value:"application/rdf+xml"},{value:"application/rss+xml"},{value:"application/soap+xml"},{value:"application/font-woff"},{value:"application/x-msgpack"},{value:"application/x-yaml"},{value:"application/xhtml+xml"},{value:"application/xml"},{value:"application/xml-dtd"},{value:"application/xop+xml"},{value:"application/zip"},{value:"application/gzip"},{value:"application/graphql"},{value:"application/x-www-form-urlencoded"},{value:"audio/basic"},{value:"audio/L24"},{value:"audio/mp4"},{value:"audio/mpeg"},{value:"audio/ogg"},{value:"audio/vorbis"},{value:"audio/vnd.rn-realaudio"},{value:"audio/vnd.wave"},{value:"audio/webm"},{value:"image/gif"},{value:"image/jpeg"},{value:"image/pjpeg"},{value:"image/png"},{value:"image/svg+xml"},{value:"image/tiff"},{value:"message/http"},{value:"message/imdn+xml"},{value:"message/partial"},{value:"message/rfc822"},{value:"multipart/mixed"},{value:"multipart/alternative"},{value:"multipart/related"},{value:"multipart/form-data"},{value:"multipart/signed"},{value:"multipart/encrypted"},{value:"text/cmd"},{value:"text/css"},{value:"text/csv"},{value:"text/html"},{value:"text/plain"},{value:"text/vcard"},{value:"text/xml"}]},502464:function(e,t,i){"use strict";i.d(t,{S:()=>r});var a=i(140049),n=i(641486),l=i.n(n);let r=()=>{let e=l().useRef(null),t=l().useRef(null),n=(0,a.A)(()=>{var i,a,n,l;let r=null==(a=e.current)||null==(i=a.editor)?void 0:i.hasTextFocus(),s=null==(l=e.current)||null==(n=l.editor)?void 0:n.getPosition();t.current=r?s:void 0}),r=(0,a.A)(async a=>{var n;let l=null==(n=e.current)?void 0:n.editor;if(!l)return;let{Range:r}=await Promise.all([i.e("720"),i.e("88175")]).then(i.bind(i,984530));l.executeEdits("my-source",[{identifier:{major:1,minor:1},range:t.current?r.fromPositions(t.current):l.getSelection(),text:a,forceMoveMarkers:!0}]),l.focus()});return{editorRef:e,focusPositionOnInsertRef:t,saveFocusPos:n,insertOnLastFocusOrSelection:r}}},308250:function(e,t,i){"use strict";i.d(t,{f:()=>s,O:()=>r});var a=i(838e3),n=i(221675);let l="propertyName-Zh4tse",r=e=>(0,a.jsx)("div",{className:l,children:(0,a.jsx)(n.A,{text:e,copyText:e})}),s=e=>(0,a.jsx)("div",{className:l,children:e})},833774:function(e,t,i){"use strict";i.d(t,{q:()=>a});let a={object:"text-blue-6",any:"text-blue-5",array:"text-green-6",allOf:"text-orange-6",anyOf:"text-orange-6",oneOf:"text-orange-6",null:"text-orange-6",integer:"text-magenta-6",number:"text-magenta-6",boolean:"text-magenta-5",binary:"text-green-5",string:"text-green-7",$ref:"text-purple-6",file:"text-purple-6"}},212168:function(e,t,i){"use strict";i.d(t,{h:()=>a});let a=(0,i(641486).createContext)({})},119501:function(e,t,i){"use strict";i.d(t,{A:()=>h});var a=i(838e3),n=i(830029),l=i.n(n),r=i(364099),s=i(649269),o=i(641486),d=i.n(o),c=i(402076),u=i(524743);function p(e){return"number"==typeof e?`${e}px`:e}function m(e){let t=(0,o.useRef)(null),[i]=(0,o.useState)(()=>{var t,i,a,n,l,r,s,o,d,c,u,m;let h=p(null!=(a=null!=(i=null!=(t=e.offsetBottom)?t:e.offsetVertical)?i:e.offset)?a:"0px"),v=p(null!=(r=null!=(l=null!=(n=e.offsetTop)?n:e.offsetVertical)?l:e.offset)?r:"0px"),f=p(null!=(d=null!=(o=null!=(s=e.offsetRight)?s:e.offsetHorizontal)?o:e.offset)?d:"0px"),g=p(null!=(m=null!=(u=null!=(c=e.offsetLeft)?c:e.offsetHorizontal)?u:e.offset)?m:"0px"),y=`${h} ${g} ${v} ${f}`;return e.options||{root:e.scrollContainer,rootMargin:y}}),n=(0,u.A)(t,i),d=(0,o.useRef)(!1);e.unmountIfInvisible?d.current=!!n:d.current||(d.current=!!n);let[m,h]=(0,o.useState)(!e.delayInMs);return l()(()=>{h(!0)},e.delayInMs||null),(0,a.jsx)("div",{className:e.className,style:e.style,ref:t,children:m&&d.current?(0,a.jsx)(a.Fragment,{children:e.children}):(0,a.jsx)(r.A,{justify:"center",align:"middle",children:(0,a.jsx)(s.A,{flex:1,children:e.placeholder||(0,a.jsx)(c.A,{})})})})}let h=d().memo(function(e){return e.noLazy?(0,a.jsx)(a.Fragment,{children:e.children}):(0,a.jsx)(m,{...e})})},412219:function(e,t,i){"use strict";i.d(t,{A:()=>a});let a=i(119501).A},524743:function(e,t,i){"use strict";i.d(t,{A:()=>l});var a=i(988901);i(947635);var n=i(641486);function l(e,t){let[i,l]=(0,n.useState)(()=>(function(e){if(!e)return;let t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,i=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,a=e.getBoundingClientRect();if(a){let{top:e,bottom:n,left:l,right:r}=a;return n>0&&e<=i&&l<=t&&r>0}return!1})((0,a.e)(e)));return(0,n.useEffect)(()=>{let i=(0,a.e)(e);if(!i)return()=>{};let n=new IntersectionObserver(e=>{for(let t of e)t.isIntersecting?l(!0):l(!1)},t);return n.observe(i),()=>{n.disconnect()}},[e]),i}},711111:function(e,t,i){"use strict";i.d(t,{B:()=>n});var a=i(641486);function n(e,t){let i=(0,a.useRef)(),n=(0,a.useRef)();return!function(e,t){if(void 0===e||e.length!==t.length)return!1;let i=e.length;for(let a=0;a<i;a++)if(e[a]!==t[a])return!1;return!0}(n.current,t)&&(n.current=t,i.current=e()),i.current}},562506:function(e,t,i){"use strict";i.d(t,{A:()=>v});var a=i(838e3),n=i(140049),l=i(949606),r=i(965031),s=i(838487),o=i.n(s),d=i(729405),c=i(398380),u=i(641486);let p="anchor-A5I5_y",m="anchor__content-n4Kcja",{Link:h}=d.A,v=e=>{let{containerRef:t,className:i,style:s}=e,[v,f]=(0,u.useState)(()=>[]),g=(0,u.useRef)(v),y=(0,u.useMemo)(()=>{let e=(0,c.cloneDeep)(v);return e&&0!==e.length?e.sort((e,t)=>e.depth&&t.depth?e.depth-t.depth:0)[0].depth:0},[v]),x=(0,n.A)(()=>{var e;let i=null==(e=t.current)?void 0:e.querySelector(".markdown-body");if(i){let e=Array.from(i.querySelectorAll("h1, h2, h3, h4, h5, h6")).filter(e=>e.id).map(e=>{var t;let i;return{id:e.id,depth:Number(e.tagName.replace("H","")),text:(i=null!=(t=e.textContent)?t:"",i.endsWith("#")?i.slice(0,-1):i)}}).filter(e=>e.text);(0,c.isEqual)(g.current,e)||(f(e),g.current=e)}}),A=(0,u.useMemo)(()=>new MutationObserver(()=>x()),[]);(0,u.useLayoutEffect)(()=>(t.current&&(x(),A.observe(t.current,{childList:!0,subtree:!0})),()=>{A.disconnect()}),[t.current]);let[j,b]=(0,u.useState)(null),{top:w}=(0,l.A)(j),S=(null==v?void 0:v.length)>0,C=(0,r.A)(j),I=null==j?void 0:j.clientHeight;return(0,a.jsx)(a.Fragment,{children:S&&(0,a.jsx)("div",{className:o()(p,i),style:s,children:(0,a.jsx)("div",{ref:b,className:o()(m,"overflow-y-scroll h-full"),children:(0,a.jsx)(d.A,{offsetTop:0,affix:!1,showInkInFixed:!0,getContainer:()=>t.current,onChange:e=>(e=>{var t;let i=null==j||null==(t=j.querySelector(`a[href = '${e}']`))?void 0:t.offsetTop;if(!(w<i&&i<I+w)&&!C){let e=i;i>=w&&(e=i+100-I),null==j||j.scrollTo(0,e)}})(e),onClick:e=>{e.preventDefault()},children:v.map(e=>(0,a.jsx)("div",{style:{paddingLeft:`${(e.depth-y)*20}px`},onClick:()=>{var t;null==(t=document.getElementById(`#${e.id}`))||t.scrollTo({behavior:"smooth"})},children:(0,a.jsx)(h,{href:`#${e.id}`,title:(0,a.jsx)("span",{dangerouslySetInnerHTML:{__html:e.text}})})},e.id))})})})})}},208335:function(e,t,i){"use strict";i.d(t,{G:()=>d});var a=i(838e3),n=i(709530),l=i(941929),r=i(965691),s=i(641486);let o=i.n(s)().lazy(()=>Promise.all([i.e("98400"),i.e("3998"),i.e("11374")]).then(i.bind(i,955613)));function d(e){let[t,i]=(0,l.A)(e,{defaultValue:!1,valuePropName:"visible"}),d=e.onCancel?e.onCancel:()=>i(!1);return(0,a.jsx)(s.Suspense,{fallback:(0,a.jsx)(n.A,{}),children:(0,a.jsx)(r.hL,{children:(0,a.jsx)(o,{...e,visible:t,onCancel:d})})})}},622754:function(e,t,i){"use strict";function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,{order:a="NLR"}=i||{},n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1?arguments[1]:void 0;e.forEach(e=>{"NLR"===a?!1!==t(e,i)&&e.children&&n(e.children,e):"LRN"===a&&(e.children&&n(e.children,e),t(e,i))})};n(e)}i.d(t,{J:()=>a,d:()=>function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1?arguments[1]:void 0;return t.map(t=>{let a=i(t);if(a&&a.children){let t=e(a.children,i).filter(Boolean);return{...a,children:t}}return a}).filter(Boolean)}})},965691:function(e,t,i){"use strict";i.d(t,{CA:()=>v,hL:()=>h});var a=i(435685),n=i(506598),l=i(720323),r=i(641486),s=i.n(r);let o=s().createContext(a.baseContainer),d=(0,l.WD)(o).useItems,c=(0,l.E7)(()=>d(e=>[e.templatingModule]));c.EnsureWrapper,c.contextHook;let u=s().createContext(n.utilsContainer),p=(0,l.WD)(u).useItems,m=(0,l.E7)(()=>p(e=>[e.jsonSchemaUtils])),h=m.EnsureWrapper,v=m.contextHook},535121:function(e,t,i){"use strict";i.d(t,{UQ:()=>r,eT:()=>n,qh:()=>l});let a=BigInt;function n(e){return Number.isInteger(e)&&!Number.isSafeInteger(e)}function l(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.reduce((e,t)=>e+a(t),a(0))}function r(e){try{return a(e)}catch{return e}}},950189:function(){},897569:function(){},567503:function(){},80882:function(){},840298:function(){}}]);