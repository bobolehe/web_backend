"use strict";(self.webpackChunkapifox_renderer=self.webpackChunkapifox_renderer||[]).push([["3226"],{129271:function(e,t,n){n.d(t,{A:()=>l});var r=n(838e3),a=n(276129),i=n(641486);function l(e){let t=(0,i.useRef)(null),{actions:n,handler:l,ensureScope:s="default",deps:o}=e;return(0,a.B7)(s,n,l,t,o),(0,r.jsx)("div",{ref:t,style:{width:0,height:0}})}},876870:function(e,t,n){n.d(t,{j:()=>o});var r=n(740565),a=n(905007),i=n(866146),l=n(140049),s=n(929463);function o(e,t){let[n,o]=(0,i.A)(),[c,d]=(0,i.A)(),{verify:u,slotId:m}=(0,a.A)(t),p=async e=>{let t=await u(e);t&&d(t)},f=(0,l.A)(async()=>n&&!c?(await p(n),{pass:!1,captchaResponse:c}):(d(void 0),o(void 0),{pass:!0,captchaResponse:c}));return{slotId:m,checkCaptchaResponse:f,responseHandler:t=>{(null==t?void 0:t.errorCode)==="401007"?(o(null==t?void 0:t.meta),p(null==t?void 0:t.meta)):(null==t?void 0:t.errorCode)==="401006"?s.Ay.error((0,r.hw)({id:"teamMember.inviteMemberForm.email.rateLimit"})):["401008","400121","400122"].includes(null==t?void 0:t.errorCode)?s.Ay.error((0,r.hw)({id:"user.login.message.invalidCaptcha"})):e(t)}}}},280346:function(e,t,n){n.d(t,{Mt:()=>o,yx:()=>d,Mo:()=>c});var r=n(467687);n(765787);var a=n(759300),i=n.n(a);function l(e){var t,n,r,a,l,s,o,c,d,u,m,p,f,h;let v=e.id,x=e.expiresAt||new Date().toISOString(),g=i()().isAfter(i()(x)),M=(null==(n=e.planInfo)||null==(t=n.price)?void 0:t.id)||"",y=e.quantity||1,b=e.type||"",w=e.paymentMethod||"",C=e.total||0,j=(e.total/100).toFixed(2),A=(null==(a=e.paymentInfo)||null==(r=a.qrcode)?void 0:r.alipay)||"",N=(null==(s=e.paymentInfo)||null==(l=s.qrcode)?void 0:l.wechatPay)||"",L=(null==(c=e.paymentInfo)||null==(o=c.invoice)?void 0:o.url)||"",Y=e.status,O=e.plan,T=(null==(m=e.planInfo)||null==(u=m.price)||null==(d=u.recurring)?void 0:d.interval)||"year";return{unpaidOrderId:v,unpaidOrderPriceId:M,unpaidOrderType:b,unpaidOrderQuantity:y,unpaidOrderExpiresAt:x,unpaidOrderExpired:g,unpaidOrderPaymentMethod:w,unpaidOrderTotal:C,unpaidOrderTotalForDisplay:j,alipayUrl:A,wechatPayUrl:N,stripeInvoiceUrl:L,unpaidOrderStatus:Y,isUnpaidOrderStatusPending:"PENDING"===Y,unpaidOrderPlanType:O,unpaidOrderInterval:T,unpaidOrderIntervalCount:(null==(h=e.planInfo)||null==(f=h.price)||null==(p=f.recurring)?void 0:p.interval)||1}}var s=n(608896);function o(e){let t=(0,r.x)(e=>e.teamUnpaidOrderListMap),n=(0,r.x)(e=>e.queryTeamUnpaidOrderList),a=(0,r.x)(e=>e.queryTeamUnpaidOrderListLoading),i=t.get(e)||[];return{...l(i[0]||{}),unpaidOrderList:i,getUnpaidOrderList:n,getUnpaidOrderListLoading:a}}function c(e){let t=(0,r.x)(e=>e.organizationUnpaidOrderListMap),n=(0,r.x)(e=>e.queryOrganizationUnpaidOrderList),a=(0,r.x)(e=>e.queryOrganizationUnpaidOrderListLoading),i=t.get(e)||[];return{...l(i[0]||{}),unpaidOrderList:i,getUnpaidOrderList:n,getUnpaidOrderListLoading:a}}function d(e,t){let{entityId:n,entityType:r}=(0,s.M)(e,t),a=o(n),i=c(n);return"TEAM"===r?a:i}},756422:function(e,t,n){n.d(t,{A:()=>v});var r=n(838e3),a=n(740565),i=n(524836),l=n(759345),s=n(140049),o=n(272164),c=n(838487),d=n.n(c),u=n(458184),m=n(641486);let p="request-button-container-bxaOFZ",f="request-button-mryUHR",h="loading-content-vvfjHJ",v=e=>{let{delayForCancelable:t=5e3,loading:n,cancelText:c=(0,a.hw)({id:"cancel"}),children:v,onClick:x,onCancel:g,className:M="",containerClassName:y="",type:b="default",debounceOptions:w={wait:500,leading:!0,trailing:!1},renderHotKey:C,...j}=e,[A,N]=(0,m.useState)(!1),L=(0,m.useRef)(null),Y=(0,m.useRef)(!1),O=(0,m.useRef)(!1),T=()=>{L.current&&(clearTimeout(L.current),L.current=null,O.current=!1)};(0,m.useEffect)(()=>{n||T()},[n]),(0,l.A)(()=>{T()});let U=(0,s.A)(()=>{Y.current=!0,n&&O.current&&N(!0)}),_=(0,s.A)(()=>{Y.current=!1,n&&N(!1)}),{run:S}=(0,o.A)(e=>{n?O.current&&(null==g||g(),T(),N(!1)):(null==x||x(e),L.current=setTimeout(()=>{Y.current&&N(!0),O.current=!0},t))},w);return(0,r.jsxs)("div",{className:d()(p,y),children:[n&&(0,r.jsxs)("div",{className:d()(h,`ui-btn-${b}`,"loading-icon"),children:[(0,r.jsx)(i.A,{className:d()({"mr-1":A})}),A&&(0,r.jsx)("span",{children:c})]}),(0,r.jsx)(u.A,{type:b,className:d()(f,M),onClick:S,onMouseEnter:U,onMouseLeave:_,...j,children:(0,r.jsx)("span",{style:{visibility:n?"hidden":"visible"},children:v})}),!j.disabled&&"function"==typeof C&&C(S)]})}},220854:function(e,t,n){n.d(t,{i:()=>o});var r=n(838e3);let a="container-kMrUol",i="title-swTzrb";var l=n(838487),s=n.n(l);let o=e=>{let{title:t,children:n,className:l,...o}=e;return(0,r.jsxs)("div",{className:s()(a,l),...o,children:[t&&(0,r.jsx)("div",{className:i,children:t}),n]})}},467687:function(e,t,n){n.d(t,{L:()=>l,x:()=>i});var r=n(52659),a=n(253566);let i=(0,n(325475).vt)((e,t)=>({teamUnpaidOrderListMap:new Map,queryTeamUnpaidOrderListLoading:!1,organizationUnpaidOrderListMap:new Map,queryOrganizationUnpaidOrderListLoading:!1,planType:void 0,upgradeModalVisible:!1,setUpgradeModalVisible:(t,n)=>e({upgradeModalVisible:t,planType:n}),quantityIncreaseModalVisible:!1,setQuantityIncreaseModalVisible:t=>e({quantityIncreaseModalVisible:t}),renewalModalVisible:!1,setRenewalModalVisible:t=>e({renewalModalVisible:t}),unpaidOrderModalVisible:!1,setUnpaidOrderModalVisible:t=>e({unpaidOrderModalVisible:t}),corporateTransferModalVisible:!1,setCorporateTransferModalVisible:t=>e({corporateTransferModalVisible:t}),expiredOrderModalVisible:!1,setExpiredOrderModalVisible:t=>e({expiredOrderModalVisible:t}),closeAllModal:()=>e({upgradeModalVisible:!1,quantityIncreaseModalVisible:!1,renewalModalVisible:!1}),queryTeamUnpaidOrderList:async n=>{var i;let l;e({queryTeamUnpaidOrderListLoading:!0});let s=await (0,r.Ut)(n,{page:1,perPage:10,status:a.q$});e({queryTeamUnpaidOrderListLoading:!1});return s.success&&(i=e=>e.set(n,s.data),l=new Map(t().teamUnpaidOrderListMap),i(l),e({teamUnpaidOrderListMap:l})),s},queryOrganizationUnpaidOrderList:async n=>{var i;let l;e({queryOrganizationUnpaidOrderListLoading:!0});let s=await (0,r.iB)(n,{page:1,perPage:10,status:a.q$});e({queryOrganizationUnpaidOrderListLoading:!1});return s.success&&(i=e=>e.set(n,s.data),l=new Map(t().organizationUnpaidOrderListMap),i(l),e({organizationUnpaidOrderListMap:l})),s},pageSource:"",setPageSource:t=>e({pageSource:t})})),l=i.getState},451479:function(e,t,n){n.d(t,{Kl:()=>d,Rw:()=>o,ZQ:()=>u,dY:()=>c,p4:()=>l,pc:()=>s});var r=n(169508),a=n(818220),i=n(325475);let l=100;function s(e,t,n){return Math.round(100*t*e/100)/Math.pow(10,d(n))}function o(e,t,n){return Math.round(e/(100*t)*100)*Math.pow(10,d(n))}function c(e,t){return new Intl.NumberFormat(["en-US"],{style:"currency",currency:t,currencyDisplay:"symbol",minimumFractionDigits:0,maximumFractionDigits:d(t)}).format(e)}function d(e){var t;return 2*((null==e||null==(t=e.toLowerCase)?void 0:t.call(e))==="usd")}let u=(0,i.vt)((e,t)=>({teamCreditMap:new Map,fetchTeamCreditByTeamId:async e=>{if(!r.pF)return;let n=await (0,a.yq)(e);if(void 0!==n.data)return n.success&&t().teamCreditMap.set(e,n.data),n.data},getTeamCreditByTeamId:e=>t().teamCreditMap.get(e)}))},411576:function(e,t,n){n.d(t,{A:()=>f});var r=n(838e3),a=n(129271),i=n(756422),l=n(740565);n(276129);var s=n(471504),o=n(838487),c=n.n(o),d=n(458184),u=n(554692);let m="formModalFooter-WVapLT",p=e=>{let{onSubmit:t,onCancel:n,submitText:o=(0,l.hw)({id:"save"}),cancelText:p=(0,l.hw)({id:"cancel"}),submitBtn:f=null,leftActions:h=null,disabled:v,disabledTooltip:x,hideDisabledTooltip:g=!1,className:M="",style:y,submitBtnLoading:b,cancelSubmit:w,needEnterHotKey:C=!0,needCtrlSHotKey:j=!0,needHotKey:A=!0,hotKeyScope:N="modalFormFooter",cancelBtnProps:L,submitBtnProps:Y}=e,O=e=>{!0!==b&&(null==t||t(e))},T=[];A&&(C&&T.push("formSubmitEnter"),j&&T.push("save"));let U=g?(0,r.jsx)(d.A,{className:p?"ml-2":"",disabled:!0,children:o}):(0,r.jsx)(u.A,{getPopupContainer:e=>e,title:x||(0,l.hw)({id:"noPermission"}),children:(0,r.jsx)(d.A,{className:p?"ml-2":"",disabled:!0,children:o})});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:c()(m,M),style:y,children:[h?(0,r.jsx)("div",{className:"left-action flex-1 text-left flex",children:h}):(0,r.jsx)("div",{}),(0,r.jsxs)("div",{className:"right-action",children:[p&&(0,r.jsx)(d.A,{...L,onClick:()=>{null==n||n()},children:p}),(0,r.jsx)(s.jz,{disabled:v,disabledTooltip:g?null:x,fallback:U,children:f||(0,r.jsx)(i.A,{...Y,containerClassName:p?"ml-2":"",onClick:O,type:"primary",htmlType:w?"button":"submit",loading:b,cancelText:p,onCancel:w,children:o})})]})]}),A&&(0,r.jsx)(a.A,{actions:T,handler:O,ensureScope:N})]})};p.defaultProps={disabled:!1};let f=p},237379:function(e,t,n){n.d(t,{A:()=>S});var r=n(838e3),a=n(740565),i=n(793594),l=n(556561),s=n(140049),o=n(838487),c=n.n(o),d=n(929463),u=n(794397),m=n(671466),p=n(641486),f=n(764007),h=n(820182);function v(e){let{visible:t,destroyOnClose:n,title:i=(0,a.hw)({id:"component.batchSelectModal.title"}),rows:l=12,placeholder:o="",onCancel:c,onOk:d}=e,[u,m]=(0,p.useState)(""),v=(0,p.useRef)(null),x=(0,s.A)(()=>{null==d||d(u?u.split("\n"):[])}),g=(0,s.A)(()=>{m("")});return(0,p.useEffect)(()=>{t&&setTimeout(()=>{var e;null==(e=v.current)||e.focus()}),n&&!t&&g()},[n,g,t]),(0,r.jsx)(f.Ay,{visible:t,title:i,onCancel:c,onOk:x,children:(0,r.jsx)(h.A.TextArea,{allowClear:!0,ref:v,value:u,rows:l,placeholder:o,onChange:e=>m(e.target.value)})})}let x="tars-transfer-b8sRuF",g="tars-transfer-gap-vvuxWZ",M="list-G0cVfj",y="list-header-m4YC7v",b="list-search-input-m3gMHJ",w="list-body-t1pOCc",C="list-search-SgG7HF",j="list-search-icon-quokJc",A="list-content-NF_iSH",N="list-content-empty-kwdgIt",L="list-content-item-Eu50u5",Y="list-content-item-selected-icon-HMm4ss",O="list-content-item-title-jXjAQM",T="list-content-item-delete-icon-ra43Qt";var U=n(272164);let _=function(e){let{dataSource:t=[],fieldNames:n,notFoundContent:a,emptyContent:l,searchPlaceholder:o,renderItem:c,renderHeader:d,onFilter:u,onDisplayDataChange:f}=e,[v,x]=(0,p.useState)(""),[g,L]=(0,p.useState)(t||[]),Y=(null==n?void 0:n.title)||"title",O=(0,s.A)(e=>{let n=t.filter(t=>u?u(t,e||v):String(t[Y]).includes(e||v));L(n),null==f||f(n)}),{run:T}=(0,U.A)(O,{wait:200});return(0,p.useEffect)(()=>{O()},[t,O]),(0,r.jsxs)("div",{className:M,children:[(0,r.jsx)("div",{className:y,children:d()}),(0,r.jsxs)("div",{className:w,children:[(0,r.jsx)("div",{className:C,children:(0,r.jsx)(h.A,{allowClear:!0,size:"small",placeholder:o,className:b,prefix:(0,r.jsx)(m.A,{type:"icon-operate-search-bar",className:j}),value:v,onChange:e=>{x(e.target.value),T(e.target.value)},onClick:()=>{l||(0,i.IL)("app_invite_button_click_select_member",{title:"search_left_member"})}})}),g.length>0?(0,r.jsx)("ul",{className:A,children:g.map(e=>c(e))}):(0,r.jsx)("div",{className:N,children:v?a:l||a})]})]})},S=function(e){let{dataSource:t=[],value:n=[],fieldNames:o,loading:f=!1,locale:h={itemUnit:(0,a.hw)({id:"component.tarsTransfer.itemUnit"}),searchPlaceholder:(0,a.hw)({id:"component.tarsTransfer.searchPlaceholder"}),batchSelectPlaceholder:(0,a.hw)({id:"component.tarsTransfer.batchSelectPlaceholder"}),sourceNotFoundContent:(0,a.hw)({id:"component.tarsTransfer.sourceNotFoundContent"}),targetNotFoundContent:(0,a.hw)({id:"component.tarsTransfer.targetNotFoundContent"})},showBatchSelect:M=!1,render:y,onChange:b=()=>{},onFilter:w}=e,C=(null==o?void 0:o.id)||"id",j=(null==o?void 0:o.title)||"title",[A,{setFalse:N,setTrue:U}]=(0,l.A)(!1),S=(0,p.useRef)(),D=(0,s.A)((e,t)=>{b(t?n.filter(t=>t!==e[C]):[...n,e[C]])}),I=(0,s.A)(e=>{b(n.filter(t=>t!==e[C]))}),k=(0,s.A)(()=>{let e=(S.current||[]).filter(e=>!n.includes(e[C])&&!e.disabled).map(e=>e[C]);e.length>0&&b([...n,...e])}),P=(0,s.A)(e=>{let r=t.filter(t=>{let r=t[j],a=t[C];return(e.includes(String(a))||e.includes(String(r)))&&!n.includes(a)&&!t.disabled}).map(e=>e[C]);r.length>0&&(b([...n,...r]),d.Ay.success((0,a.hw)({id:"component.tarsTransfer.matchSuccess"},{count:r.length,itemUnit:h.itemUnit}))),N()}),F=(0,s.A)(()=>{b([])}),V=(0,s.A)(e=>{let t=n.includes(e[C]),{disabled:a}=e;return(0,r.jsxs)("li",{className:c()([L,{selected:t,disabled:a}]),onClick:()=>{a||(D(e,t),(0,i.IL)("app_invite_button_click_select_member",{title:"select_member"}))},children:[(0,r.jsx)("div",{className:O,children:y?y(e):e[j]}),t&&(0,r.jsx)(m.A,{type:"icon-check",className:Y})]},e[C])}),q=(0,s.A)(()=>{let e=t.filter(e=>!e.disabled).length;return(0,r.jsxs)("div",{className:"flex-auto flex items-center overflow-auto",children:[(0,r.jsx)("div",{className:"flex-auto truncate",children:(0,r.jsx)(a.n3,{id:"component.tarsTransfer.sourceSelections",values:{total:t.length,itemUnit:h.itemUnit,availableCount:e}})}),(0,r.jsxs)("div",{className:"flex-none",children:[M&&(0,r.jsx)("a",{className:"ml-1",onClick:U,children:(0,a.hw)({id:"component.tarsTransfer.batchSelect"})}),(0,r.jsx)("a",{className:"ml-2",onClick:()=>{k(),(0,i.IL)("app_invite_button_click_select_member",{page_source:"select_all_left_members"})},children:(0,a.hw)({id:"component.tarsTransfer.selectAll"})})]})]})}),E=(0,s.A)(e=>{let{disabled:t}=e;return(0,r.jsxs)("li",{className:c()([L,{disabled:t}]),children:[(0,r.jsx)("div",{className:O,children:y?y(e):e[j]}),(0,r.jsx)(m.A,{type:"icon-nav-close",className:T,onClick:()=>{I(e),(0,i.IL)("app_invite_button_click_select_member",{page_source:"delete_right_member"})}})]},e[C])}),H=(0,s.A)(()=>(0,r.jsxs)("div",{className:"flex-auto flex items-center",children:[(0,r.jsx)("div",{className:"flex-auto truncate",children:(0,r.jsx)(a.n3,{id:"component.tarsTransfer.targetSelections",values:{selectedCount:n.length,itemUnit:h.itemUnit}})}),(0,r.jsx)("div",{className:"flex-none",children:(0,r.jsx)("a",{className:"ml-1",onClick:()=>{F(),(0,i.IL)("app_invite_button_click_select_member",{page_source:"empty"})},children:(0,a.hw)({id:"component.tarsTransfer.clear"})})})]})),z=(0,s.A)(e=>{S.current=e}),R=(0,p.useMemo)(()=>{let e=[];return n.forEach(n=>{let r=t.find(e=>e[C]===n);r&&e.push(r)}),e},[t,C,n]);return(0,r.jsx)(u.A,{spinning:f,children:(0,r.jsxs)("div",{className:x,children:[(0,r.jsx)(_,{dataSource:t,notFoundContent:h.sourceNotFoundContent,emptyContent:h.sourceEmptyContent,searchPlaceholder:h.searchPlaceholder,fieldNames:o,renderItem:V,renderHeader:q,onFilter:w,onDisplayDataChange:z}),(0,r.jsx)("div",{className:g}),(0,r.jsx)(_,{dataSource:R,notFoundContent:h.targetNotFoundContent,emptyContent:h.targetEmptyContent,searchPlaceholder:h.searchPlaceholder,fieldNames:o,renderItem:E,renderHeader:H,onFilter:w}),M&&(0,r.jsx)(v,{destroyOnClose:!0,visible:A,placeholder:h.batchSelectPlaceholder,onCancel:N,onOk:P})]})})}},351885:function(e,t,n){n.d(t,{$D:()=>C,AY:()=>b,Ay:()=>Y,HF:()=>j,QP:()=>N,WQ:()=>w,XR:()=>A,Xd:()=>y,ZV:()=>L});var r,a=n(759300),i=n.n(a);n(40711),n(738357),n(280750),n(923668),n(38576),n(684538),n(245954),n(322085),n(588097);var l=n(552387),s=n.n(l),o=n(94089),c=n.n(o),d=n(768446),u=n.n(d),m=n(884860),p=n.n(m),f=n(229445),h=n.n(f),v=n(740565);i().extend(u()),i().extend(h()),i().extend(p()),i().extend(c()),i().extend(s());let x=(0,v.getUserLocale)(),g=null!=(r=({"en-US":"en","zh-CN":"zh-cn","ja-JP":"ja","es-ES":"es","pt-PT":"pt","pt-BR":"pt","zh-TW":"zh-tw","id-ID":"id","vi-VN":"vi"})[x])?r:"en";i().locale(g);let M=new Intl.DateTimeFormat().resolvedOptions().timeZone;function y(e){return i()(e).tz(M)}function b(e){return y(e).isAfter(y(new Date))}function w(e){let t=y(e);return b(t)?(0,v.hw)({id:"Justnow"}):y(t).fromNow()}function C(e){return y(e).fromNow()}function j(e){return y(e).format("LL")}function A(e){switch(!0){case x.includes("CN"):case x.includes("TW"):return y(e).format("YYYY-MM-DD");case x.includes("JP"):return y(e).format("YYYY年M月D日");default:return y(e).format("MMM DD, YYYY")}}function N(e){switch(!0){case x.includes("CN"):case x.includes("TW"):return y(e).format("YYYY-MM-DD HH:mm:ss");case x.includes("JP"):return y(e).format("YYYY年M月D日 HH:mm:ss");case x.includes("ES"):return y(e).format("D [de] MMMM [de] YYYY [a las] H:mm:ss");case x.includes("PT"):case x.includes("BR"):return y(e).format("D [de] MMMM [de] YYYY [\xe0s] H:mm:ss");case x.includes("KR"):return y(e).format("YYYY년 M월 D일 HH:mm:ss");case x.includes("ID"):return y(e).format("DD MMMM YYYY HH:mm:ss");case x.includes("VN"):return y(e).format("DD/MM/YYYY HH:mm:ss");default:return y(e).format("MMM DD, YYYY [at] HH:mm:ss")}}function L(){return i()().unix()}"Etc/Unknown"===M&&(M="UTC");let Y=i()},905007:function(e,t,n){n.d(t,{A:()=>u});var r=n(511389),a=n(740565),i=n(929463),l=n(398380),s=n(641486),o=n(618487),c=n(351697);function d(e,t){let n=`[captcha] ${e}`;i.Ay.error(`${(0,a.hw)({id:"error"})}: ${n}`),(0,c.A)(Error(n)),t(null)}let u=function(e){let t="CaptchaMetaScript",n=e||"CaptchaMetaSlot",{theme:a}=(0,s.useContext)(r.Ay),i=(0,o.getLocale)();return{verify:(0,s.useCallback)(e=>new Promise(r=>{if(!(null==e?void 0:e.captchaService)||!(null==e?void 0:e.scriptSrc))return void d("Invalid captcha meta info",r);let{scriptSrc:s,captchaService:o,options:c}=e,u=async()=>{try{var e;if(!(0,l.isFunction)(window.verifyCaptcha))return void d("Captcha script error",r);let t=await window.verifyCaptcha(o,{...null!=c?c:{},slotId:n,theme:null!=(e=a.background)?e:"dark",locale:i});r(t)}catch(e){d(`Captcha verify error: ${JSON.stringify(e)}`,r)}},m=document.getElementById(t);m?u():((m=document.createElement("script")).id=t,m.onload=u,m.onerror=()=>d("Captcha load error",r),m.src=s,document.body.appendChild(m))}),[n,a,i]),slotId:n}}},253566:function(e,t,n){n.d(t,{W5:()=>a,q$:()=>r});let r=["OPEN","FAILED","PENDING"],a=["PAID","CANCELED","EXPIRED"]}}]);